// Copyright 2006 The Closure Library Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

//   (b) destructuring, (c) block-scoped functions,

/**
 * @license
 * Latitude/longitude spherical geodesy formulae taken from
 * http://www.movable-type.co.uk/scripts/latlong.html
 * Licensed under CC-BY-3.0.
 */

// Copyright (c) 2013 The Polymer Authors. All rights reserved.
//
// Redistribution and use in source and binary forms, with or without
// modification, are permitted provided that the following conditions are
// met:
//
// * Redistributions of source code must retain the above copyright
// notice, this list of conditions and the following disclaimer.
// * Redistributions in binary form must reproduce the above
// copyright notice, this list of conditions and the following disclaimer
// in the documentation and/or other materials provided with the
// distribution.
// * Neither the name of Google Inc. nor the names of its
// contributors may be used to endorse or promote products derived from
// this software without specific prior written permission.
//
// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
// "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

// Based on simplify-js https://github.com/mourner/simplify-js
// Copyright (c) 2012, Vladimir Agafonkin
// All rights reserved.
//
// Redistribution and use in source and binary forms, with or without
// modification, are permitted provided that the following conditions are met:
//
//    1. Redistributions of source code must retain the above copyright notice,
//       this list of conditions and the following disclaimer.
//
//    2. Redistributions in binary form must reproduce the above copyright
//       notice, this list of conditions and the following disclaimer in the
//       documentation and/or other materials provided with the distribution.
//
// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
// POSSIBILITY OF SUCH DAMAGE.

// Copyright 2000 softSurfer, 2012 Dan Sunday

// providing that this copyright notice is included with it.

//var copyright = response.copyright;  // FIXME do we need to display this?

/**
 * The attribution containing a link to the OpenStreetMap Copyright and License
 * page.
 * @const
 * @type {ol.Attribution}
 * @api
 */

// Copyright 2009 The Closure Library Authors.
// All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//
// This file has been auto-generated by GenJsDeps, please do not edit.

/*!
**  sprintf.js -- POSIX sprintf(3)-style String Formatting for JavaScript
**  Copyright (c) 2006-2014 Ralf S. Engelschall <rse@engelschall.com>
**  Partly based on Public Domain code by Jan Moesen <http://jan.moesen.nu/>
**
**  Permission is hereby granted, free of charge, to any person obtaining
**  a copy of this software and associated documentation files (the
**  "Software"), to deal in the Software without restriction, including
**  without limitation the rights to use, copy, modify, merge, publish,
**  distribute, sublicense, and/or sell copies of the Software, and to
**  permit persons to whom the Software is furnished to do so, subject to
**  the following conditions:
**
**  The above copyright notice and this permission notice shall be included
**  in all copies or substantial portions of the Software.
**
**  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
**  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
**  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
**  IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
**  CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
**  TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
**  SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/

function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Buffer(e,t,o){if(assert||(assert=require("assert")),!(this instanceof Buffer))return new Buffer(e,t,o);if(this.parent=this,this.offset=0,"base64"==t&&"string"==typeof e)for(e=stringtrim(e);e.length%4!=0;)e+="=";var r;if("number"==typeof o){this.length=coerce(t);for(var i=0;i<this.length;i++)this[i]=e.get(i+o)}else{switch(r=typeof e){case"number":this.length=coerce(e);break;case"string":this.length=Buffer.byteLength(e,t);break;case"object":this.length=coerce(e.length);break;default:throw new TypeError("First argument needs to be a number, array or string.")}if(isArrayIsh(e))for(var i=0;i<this.length;i++)e instanceof Buffer?this[i]=e.readUInt8(i):this[i]=(e[i]%256+256)%256;else if("string"==r)this.length=this.write(e,0,t);else if("number"===r)for(var i=0;i<this.length;i++)this[i]=0}}function clamp(e,t,o){return"number"!=typeof e?o:(e=~~e,e>=t?t:e>=0?e:(e+=t,e>=0?e:0))}function coerce(e){return e=~~Math.ceil(+e),e<0?0:e}function isArray(e){return(Array.isArray||function(e){return"[object Array]"=={}.toString.apply(e)})(e)}function isArrayIsh(e){return isArray(e)||Buffer.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e){for(var t=[],o=0;o<e.length;o++)if(e.charCodeAt(o)<=127)t.push(e.charCodeAt(o));else for(var r=encodeURIComponent(e.charAt(o)).substr(1).split("%"),i=0;i<r.length;i++)t.push(parseInt(r[i],16));return t}function asciiToBytes(e){for(var t=[],o=0;o<e.length;o++)t.push(255&e.charCodeAt(o));return t}function base64ToBytes(e){return require("base64-js").toByteArray(e)}function blitBuffer(e,t,o,r){for(var i=0;i<r&&!(i+o>=t.length||i>=e.length);)t[i+o]=e[i],i++;return i}function decodeUtf8Char(e){try{return decodeURIComponent(e)}catch(e){return String.fromCharCode(65533)}}function readUInt16(e,t,o,r){var i=0;return r||(assert.ok("boolean"==typeof o,"missing or invalid endian"),assert.ok(void 0!==t&&null!==t,"missing offset"),assert.ok(t+1<e.length,"Trying to read beyond buffer length")),t>=e.length?0:(o?(i=e[t]<<8,t+1<e.length&&(i|=e[t+1])):(i=e[t],t+1<e.length&&(i|=e[t+1]<<8)),i)}function readUInt32(e,t,o,r){var i=0;return r||(assert.ok("boolean"==typeof o,"missing or invalid endian"),assert.ok(void 0!==t&&null!==t,"missing offset"),assert.ok(t+3<e.length,"Trying to read beyond buffer length")),t>=e.length?0:(o?(t+1<e.length&&(i=e[t+1]<<16),t+2<e.length&&(i|=e[t+2]<<8),t+3<e.length&&(i|=e[t+3]),i+=e[t]<<24>>>0):(t+2<e.length&&(i=e[t+2]<<16),t+1<e.length&&(i|=e[t+1]<<8),i|=e[t],t+3<e.length&&(i+=e[t+3]<<24>>>0)),i)}function readInt16(e,t,o,r){var i,n;return r||(assert.ok("boolean"==typeof o,"missing or invalid endian"),assert.ok(void 0!==t&&null!==t,"missing offset"),assert.ok(t+1<e.length,"Trying to read beyond buffer length")),n=readUInt16(e,t,o,r),i=32768&n,i?(65535-n+1)*-1:n}function readInt32(e,t,o,r){var i,n;return r||(assert.ok("boolean"==typeof o,"missing or invalid endian"),assert.ok(void 0!==t&&null!==t,"missing offset"),assert.ok(t+3<e.length,"Trying to read beyond buffer length")),n=readUInt32(e,t,o,r),i=2147483648&n,i?(4294967295-n+1)*-1:n}function readFloat(e,t,o,r){return r||(assert.ok("boolean"==typeof o,"missing or invalid endian"),assert.ok(t+3<e.length,"Trying to read beyond buffer length")),require("./buffer_ieee754").readIEEE754(e,t,o,23,4)}function readDouble(e,t,o,r){return r||(assert.ok("boolean"==typeof o,"missing or invalid endian"),assert.ok(t+7<e.length,"Trying to read beyond buffer length")),require("./buffer_ieee754").readIEEE754(e,t,o,52,8)}function verifuint(e,t){assert.ok("number"==typeof e,"cannot write a non-number as a number"),assert.ok(e>=0,"specified a negative value for writing an unsigned value"),assert.ok(e<=t,"value is larger than maximum value for type"),assert.ok(Math.floor(e)===e,"value has a fractional component")}function writeUInt16(e,t,o,r,i){i||(assert.ok(void 0!==t&&null!==t,"missing value"),assert.ok("boolean"==typeof r,"missing or invalid endian"),assert.ok(void 0!==o&&null!==o,"missing offset"),assert.ok(o+1<e.length,"trying to write beyond buffer length"),verifuint(t,65535));for(var n=0;n<Math.min(e.length-o,2);n++)e[o+n]=(t&255<<8*(r?1-n:n))>>>8*(r?1-n:n)}function writeUInt32(e,t,o,r,i){i||(assert.ok(void 0!==t&&null!==t,"missing value"),assert.ok("boolean"==typeof r,"missing or invalid endian"),assert.ok(void 0!==o&&null!==o,"missing offset"),assert.ok(o+3<e.length,"trying to write beyond buffer length"),verifuint(t,4294967295));for(var n=0;n<Math.min(e.length-o,4);n++)e[o+n]=t>>>8*(r?3-n:n)&255}function verifsint(e,t,o){assert.ok("number"==typeof e,"cannot write a non-number as a number"),assert.ok(e<=t,"value larger than maximum allowed value"),assert.ok(e>=o,"value smaller than minimum allowed value"),assert.ok(Math.floor(e)===e,"value has a fractional component")}function verifIEEE754(e,t,o){assert.ok("number"==typeof e,"cannot write a non-number as a number"),assert.ok(e<=t,"value larger than maximum allowed value"),assert.ok(e>=o,"value smaller than minimum allowed value")}function writeInt16(e,t,o,r,i){i||(assert.ok(void 0!==t&&null!==t,"missing value"),assert.ok("boolean"==typeof r,"missing or invalid endian"),assert.ok(void 0!==o&&null!==o,"missing offset"),assert.ok(o+1<e.length,"Trying to write beyond buffer length"),verifsint(t,32767,-32768)),t>=0?writeUInt16(e,t,o,r,i):writeUInt16(e,65535+t+1,o,r,i)}function writeInt32(e,t,o,r,i){i||(assert.ok(void 0!==t&&null!==t,"missing value"),assert.ok("boolean"==typeof r,"missing or invalid endian"),assert.ok(void 0!==o&&null!==o,"missing offset"),assert.ok(o+3<e.length,"Trying to write beyond buffer length"),verifsint(t,2147483647,-2147483648)),t>=0?writeUInt32(e,t,o,r,i):writeUInt32(e,4294967295+t+1,o,r,i)}function writeFloat(e,t,o,r,i){i||(assert.ok(void 0!==t&&null!==t,"missing value"),assert.ok("boolean"==typeof r,"missing or invalid endian"),assert.ok(void 0!==o&&null!==o,"missing offset"),assert.ok(o+3<e.length,"Trying to write beyond buffer length"),verifIEEE754(t,3.4028234663852886e38,-3.4028234663852886e38)),require("./buffer_ieee754").writeIEEE754(e,t,o,r,23,4)}function writeDouble(e,t,o,r,i){i||(assert.ok(void 0!==t&&null!==t,"missing value"),assert.ok("boolean"==typeof r,"missing or invalid endian"),assert.ok(void 0!==o&&null!==o,"missing offset"),assert.ok(o+7<e.length,"Trying to write beyond buffer length"),verifIEEE754(t,1.7976931348623157e308,-1.7976931348623157e308)),require("./buffer_ieee754").writeIEEE754(e,t,o,r,52,8)}!function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define("ol3",[],t):e.ol=t()}(this,function(){var OPENLAYERS={},goog=this.goog={};this.CLOSURE_NO_DEPS=!0;var COMPILED=!1,goog=goog||{};goog.global=this,goog.global.CLOSURE_UNCOMPILED_DEFINES,goog.global.CLOSURE_DEFINES,goog.isDef=function(e){return void 0!==e},goog.exportPath_=function(e,t,o){var r=e.split("."),i=o||goog.global;r[0]in i||!i.execScript||i.execScript("var "+r[0]);for(var n;r.length&&(n=r.shift());)!r.length&&goog.isDef(t)?i[n]=t:i=i[n]&&i[n]!==Object.prototype[n]?i[n]:i[n]={}},goog.define=function(e,t){var o=t;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,e)?o=goog.global.CLOSURE_UNCOMPILED_DEFINES[e]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,e)&&(o=goog.global.CLOSURE_DEFINES[e])),goog.exportPath_(e,o)},goog.define("goog.DEBUG",!0),goog.define("goog.LOCALE","en"),goog.define("goog.TRUSTED_SITE",!0),goog.define("goog.STRICT_MODE_COMPATIBLE",!1),goog.define("goog.DISALLOW_TEST_ONLY_CODE",COMPILED&&!goog.DEBUG),goog.define("goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING",!1),goog.provide=function(e){if(goog.isInModuleLoader_())throw Error("goog.provide can not be used within a goog.module.");if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var o=e;(o=o.substring(0,o.lastIndexOf(".")))&&!goog.getObjectByName(o);)goog.implicitNamespaces_[o]=!0}goog.exportPath_(e,t)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if(!goog.isString(e)||!e||e.search(goog.VALID_MODULE_RE_)==-1)throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){if(!COMPILED){if(e in goog.loadedModules_)return goog.loadedModules_[e];if(!goog.implicitNamespaces_[e]){var t=goog.getObjectByName(e);return null!=t?t:null}}return null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw new Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},goog.forwardDeclare("Document"),goog.forwardDeclare("HTMLScriptElement"),goog.forwardDeclare("XMLHttpRequest"),COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){for(var o,r=e.split("."),i=t||goog.global;o=r.shift();){if(!goog.isDefAndNotNull(i[o]))return null;i=i[o]}return i},goog.globalize=function(e,t){var o=t||goog.global;for(var r in e)o[r]=e[r]},goog.addDependency=function(e,t,o,r){if(goog.DEPENDENCIES_ENABLED){var i,n,a=e.replace(/\\/g,"/"),l=goog.dependencies_;r&&"boolean"!=typeof r||(r=r?{module:"goog"}:{});for(var s=0;i=t[s];s++)l.nameToPath[i]=a,l.loadFlags[a]=r;for(var p=0;n=o[p];p++)a in l.requires||(l.requires[a]={}),l.requires[a][n]=!0}},goog.define("goog.ENABLE_DEBUG_LOADER",!0),goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(e),goog.isProvided_(e)){if(goog.isInModuleLoader_())return goog.module.getInternal_(e)}else if(goog.ENABLE_DEBUG_LOADER){var t=goog.getPathFromDeps_(e);if(!t){var o="goog.require could not find: "+e;throw goog.logToConsole_(o),Error(o)}goog.writeScripts_(t)}return null}},goog.basePath="",goog.global.CLOSURE_BASE_PATH,goog.global.CLOSURE_NO_DEPS,goog.global.CLOSURE_IMPORT_SCRIPT,goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.instance_=void 0,e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.define("goog.LOAD_MODULE_USING_EVAL",!0),goog.define("goog.SEAL_MODULE_EXPORTS",goog.DEBUG),goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.define("goog.TRANSPILE","detect"),goog.define("goog.TRANSPILER","transpile.js"),goog.DEPENDENCIES_ENABLED&&(goog.dependencies_={loadFlags:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var e=goog.global.document;return null!=e&&"write"in e},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))return void(goog.basePath=goog.global.CLOSURE_BASE_PATH);if(goog.inHtmlDocument_())for(var e=goog.global.document,t=e.getElementsByTagName("SCRIPT"),o=t.length-1;o>=0;--o){var r=t[o],i=r.src,n=i.lastIndexOf("?"),a=n==-1?i.length:n;if("base.js"==i.substr(a-7,7))return void(goog.basePath=i.substr(0,a-7))}},goog.importScript_=function(e,t){var o=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;o(e,t)&&(goog.dependencies_.written[e]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.oldIeWaiting_=!1,goog.importProcessedScript_=function(e,t,o){var r='goog.retrieveAndExec_("'+e+'", '+t+", "+o+");";goog.importScript_("",r)},goog.queuedModules_=[],goog.wrapModule_=function(e,t){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(t+"\n//# sourceURL="+e+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+t+"\n;return exports});\n//# sourceURL="+e+"\n"},goog.loadQueuedModules_=function(){var e=goog.queuedModules_.length;if(e>0){var t=goog.queuedModules_;goog.queuedModules_=[];for(var o=0;o<e;o++){var r=t[o];goog.maybeProcessDeferredPath_(r)}}goog.oldIeWaiting_=!1},goog.maybeProcessDeferredDep_=function(e){if(goog.isDeferredModule_(e)&&goog.allDepsAreAvailable_(e)){var t=goog.getPathFromDeps_(e);goog.maybeProcessDeferredPath_(goog.basePath+t)}},goog.isDeferredModule_=function(e){var t=goog.getPathFromDeps_(e),o=t&&goog.dependencies_.loadFlags[t]||{},r=o.lang||"es3";if(t&&("goog"==o.module||goog.needsTranspile_(r))){var i=goog.basePath+t;return i in goog.dependencies_.deferred}return!1},goog.allDepsAreAvailable_=function(e){var t=goog.getPathFromDeps_(e);if(t&&t in goog.dependencies_.requires)for(var o in goog.dependencies_.requires[t])if(!goog.isProvided_(o)&&!goog.isDeferredModule_(o))return!1;return!0},goog.maybeProcessDeferredPath_=function(e){if(e in goog.dependencies_.deferred){var t=goog.dependencies_.deferred[e];delete goog.dependencies_.deferred[e],goog.globalEval(t)}},goog.loadModuleFromUrl=function(e){goog.retrieveAndExec_(e,!0,!1)},goog.writeScriptSrcNode_=function(e){goog.global.document.write('<script type="text/javascript" src="'+e+'"></script>')},goog.appendScriptSrcNode_=function(e){var t=goog.global.document,o=t.createElement("script");o.type="text/javascript",o.src=e,o.defer=!1,o.async=!1,t.head.appendChild(o)},goog.writeScriptTag_=function(e,t){if(goog.inHtmlDocument_()){var o=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==o.readyState){var r=/\bdeps.js$/.test(e);if(r)return!1;throw Error('Cannot write "'+e+'" after document load')}if(void 0===t)if(goog.IS_OLD_IE_){goog.oldIeWaiting_=!0;var i=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";o.write('<script type="text/javascript" src="'+e+'"'+i+"></script>")}else goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(e):goog.writeScriptSrcNode_(e);else o.write('<script type="text/javascript">'+goog.protectScriptTag_(t)+"</script>");return!0}return!1},goog.protectScriptTag_=function(e){return e.replace(/<\/(SCRIPT)/gi,"\\x3c/$1")},goog.needsTranspile_=function(e){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(goog.requiresTranspilation_||(goog.requiresTranspilation_=goog.createRequiresTranspilation_()),e in goog.requiresTranspilation_)return goog.requiresTranspilation_[e];throw new Error("Unknown language mode: "+e)},goog.requiresTranspilation_=null,goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(e,t){return"complete"==e.readyState&&goog.lastNonModuleScriptIndex_==t&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(e){function t(e){if(!(e in i.written||e in i.visited)){if(i.visited[e]=!0,e in i.requires)for(var n in i.requires[e])if(!goog.isProvided_(n)){if(!(n in i.nameToPath))throw Error("Undefined nameToPath for "+n);t(i.nameToPath[n])}e in r||(r[e]=!0,o.push(e))}}var o=[],r={},i=goog.dependencies_;t(e);for(var n=0;n<o.length;n++){var a=o[n];goog.dependencies_.written[a]=!0}var l=goog.moduleLoaderState_;goog.moduleLoaderState_=null;for(var n=0;n<o.length;n++){var a=o[n];if(!a)throw goog.moduleLoaderState_=l,Error("Undefined script input");var s=i.loadFlags[a]||{},p=s.lang||"es3",g=goog.needsTranspile_(p);"goog"==s.module||g?goog.importProcessedScript_(goog.basePath+a,"goog"==s.module,g):goog.importScript_(goog.basePath+a)}goog.moduleLoaderState_=l},goog.getPathFromDeps_=function(e){return e in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[e]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){var hasBadLetScoping;try{hasBadLetScoping=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(e){hasBadLetScoping=!1}goog.hasBadLetScoping=hasBadLetScoping}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(e){return"(function(){"+e+"\n;})();\n"},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:void 0,declareLegacyNamespace:!1};var o;if(goog.isFunction(e))o=e.call(void 0,{});else{if(!goog.isString(e))throw Error("Invalid module definition");goog.useSafari10Workaround()&&(e=goog.workaroundSafari10EvalBug(e)),o=goog.loadModuleFromSource_.call(void 0,e)}var r=goog.moduleLoaderState_.moduleName;if(!goog.isString(r)||!r)throw Error('Invalid module name "'+r+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(r,o):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof o&&null!=o&&Object.seal(o),goog.loadedModules_[r]=o}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(){"use strict";var exports={};return eval(arguments[0]),exports},goog.normalizePath_=function(e){for(var t=e.split("/"),o=0;o<t.length;)"."==t[o]?t.splice(o,1):o&&".."==t[o]&&t[o-1]&&".."!=t[o-1]?t.splice(--o,2):o++;return t.join("/")},goog.global.CLOSURE_LOAD_FILE_SYNC,goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);try{var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),0==t.status||200==t.status?t.responseText:null}catch(e){return null}},goog.retrieveAndExec_=function(e,t,o){if(!COMPILED){var r=e;e=goog.normalizePath_(e);var i=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,n=goog.loadFileSync_(e);if(null==n)throw new Error('Load of "'+e+'" failed');o&&(n=goog.transpile_.call(goog.global,n,e)),t?n=goog.wrapModule_(e,n):n+="\n//# sourceURL="+e;var a=goog.IS_OLD_IE_;a&&goog.oldIeWaiting_?(goog.dependencies_.deferred[r]=n,goog.queuedModules_.push(r)):i(e,n)}},goog.transpile_=function(code,path){var jscomp=goog.global.$jscomp;jscomp||(goog.global.$jscomp=jscomp={});var transpile=jscomp.transpile;if(!transpile){var transpilerPath=goog.basePath+goog.TRANSPILER,transpilerCode=goog.loadFileSync_(transpilerPath);if(transpilerCode){if(eval(transpilerCode+"\n//# sourceURL="+transpilerPath),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw new Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,jscomp=goog.global.$jscomp,transpile=jscomp.transpile}}if(!transpile){var suffix=" requires transpilation but no transpiler was found.";transpile=jscomp.transpile=function(e,t){return goog.logToConsole_(t+suffix),e}}return transpile(code,path)},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var o=Object.prototype.toString.call(e);if("[object Window]"==o)return"object";if("[object Array]"==o||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==o||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var o="array"==t?[]:{};for(var r in e)o[r]=goog.cloneObject(e[r]);return o}return e},goog.bindNative_=function(e,t,o){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,o){if(!e)throw new Error;if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),e.apply(t,o)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,o){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var o=Array.prototype.slice.call(arguments,1);return function(){var t=o.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var o in t)e[o]=t[o]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),"undefined"!=typeof goog.global._evalTest_){try{delete goog.global._evalTest_}catch(e){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,o=t.createElement("SCRIPT");o.type="text/javascript",o.defer=!1,o.appendChild(t.createTextNode(e)),t.body.appendChild(o),t.body.removeChild(o)}}},goog.evalWorksForGlobals_=null,goog.cssNameMapping_,goog.cssNameMappingStyle_,goog.global.CLOSURE_CSS_NAME_MAP_FN,goog.getCssName=function(e,t){if("."==String(e).charAt(0))throw new Error('className passed in goog.getCssName must not start with ".". You passed: '+e);var o,r=function(e){return goog.cssNameMapping_[e]||e},i=function(e){for(var t=e.split("-"),o=[],i=0;i<t.length;i++)o.push(r(t[i]));return o.join("-")};o=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?r:i:function(e){return e};var n=t?e+"-"+o(t):o(e);return goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(n):n},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},goog.global.CLOSURE_CSS_NAME_MAPPING,!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t){return t&&(e=e.replace(/\{\$([^}]+)}/g,function(e,o){return null!=t&&o in t?t[o]:e})),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,o){goog.exportPath_(e,t,o)},goog.exportProperty=function(e,t,o){e[t]=o},goog.inherits=function(e,t){function o(){}o.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new o,e.prototype.constructor=e,e.base=function(e,o,r){for(var i=new Array(arguments.length-2),n=2;n<arguments.length;n++)i[n-2]=arguments[n];return t.prototype[o].apply(e,i)}},goog.base=function(e,t,o){var r=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!r)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(r.superClass_){for(var i=new Array(arguments.length-1),n=1;n<arguments.length;n++)i[n-1]=arguments[n];return r.superClass_.constructor.apply(e,i)}for(var a=new Array(arguments.length-2),n=2;n<arguments.length;n++)a[n-2]=arguments[n];for(var l=!1,s=e.constructor;s;s=s.superClass_&&s.superClass_.constructor)if(s.prototype[t]===r)l=!0;else if(l)return s.prototype[t].apply(e,a);if(e[t]===r)return e.constructor.prototype[t].apply(e,a);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a goog.module.");e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(e,t){var o=t.constructor,r=t.statics;o&&o!=Object.prototype.constructor||(o=function(){throw Error("cannot instantiate an interface (no constructor defined).")});var i=goog.defineClass.createSealingConstructor_(o,e);return e&&goog.inherits(i,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(i.prototype,t),null!=r&&(r instanceof Function?r(i):goog.defineClass.applyProperties_(i,r)),i},goog.defineClass.ClassDescriptor,goog.define("goog.defineClass.SEAL_CLASS_INSTANCES",goog.DEBUG),goog.defineClass.createSealingConstructor_=function(e,t){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return e;var o=!goog.defineClass.isUnsealable_(t),r=function(){var t=e.apply(this,arguments)||this;return t[goog.UID_PROPERTY_]=t[goog.UID_PROPERTY_],this.constructor===r&&o&&Object.seal instanceof Function&&Object.seal(t),t};return r},goog.defineClass.isUnsealable_=function(e){return e&&e.prototype&&e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],goog.defineClass.applyProperties_=function(e,t){var o;for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);for(var r=0;r<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;r++)o=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[r],Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])},goog.tagUnsealableClass=function(e){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.createRequiresTranspilation_=function(){function addNewerLanguageTranspilationCheck(e,t){transpilationRequiredForAllLaterModes?requiresTranspilation[e]=!0:t()?requiresTranspilation[e]=!1:(requiresTranspilation[e]=!0,transpilationRequiredForAllLaterModes=!0)}function evalCheck(code){try{return!!eval(code)}catch(e){return!1}}var requiresTranspilation={es3:!1},transpilationRequiredForAllLaterModes=!1,userAgent=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";return addNewerLanguageTranspilationCheck("es5",function(){return evalCheck("[1,].length==1")}),addNewerLanguageTranspilationCheck("es6",function(){var e=/Edge\/(\d+)(\.\d)*/i,t=userAgent.match(e);if(t&&Number(t[1])<15)return!1;var o="class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}";return evalCheck('(()=>{"use strict";'+o+"})()")}),addNewerLanguageTranspilationCheck("es6-impl",function(){return!0}),addNewerLanguageTranspilationCheck("es7",function(){return evalCheck("2 ** 2 == 4")}),addNewerLanguageTranspilationCheck("es8",function(){return evalCheck("async () => 1, true")}),requiresTranspilation},goog.provide("ol.array"),ol.array.binarySearch=function(e,t,o){for(var r,i,n=o||ol.array.numberSafeCompareFunction,a=0,l=e.length,s=!1;a<l;)r=a+(l-a>>1),i=+n(e[r],t),i<0?a=r+1:(l=r,s=!i);return s?a:~a},ol.array.numberSafeCompareFunction=function(e,t){return e>t?1:e<t?-1:0},ol.array.includes=function(e,t){return e.indexOf(t)>=0},ol.array.linearFindNearest=function(e,t,o){var r=e.length;if(e[0]<=t)return 0;if(t<=e[r-1])return r-1;var i;if(o>0){for(i=1;i<r;++i)if(e[i]<t)return i-1}else if(o<0){for(i=1;i<r;++i)if(e[i]<=t)return i}else for(i=1;i<r;++i){if(e[i]==t)return i;if(e[i]<t)return e[i-1]-t<t-e[i]?i-1:i}return r-1},ol.array.reverseSubArray=function(e,t,o){for(;t<o;){var r=e[t];e[t]=e[o],e[o]=r,++t,--o}},ol.array.extend=function(e,t){var o,r=Array.isArray(t)?t:[t],i=r.length;for(o=0;o<i;o++)e[e.length]=r[o]},ol.array.remove=function(e,t){var o=e.indexOf(t),r=o>-1;return r&&e.splice(o,1),r},ol.array.find=function(e,t){for(var o,r=e.length>>>0,i=0;i<r;i++)if(o=e[i],t(o,i,e))return o;return null},ol.array.equals=function(e,t){var o=e.length;if(o!==t.length)return!1;for(var r=0;r<o;r++)if(e[r]!==t[r])return!1;return!0},ol.array.stableSort=function(e,t){var o,r=e.length,i=Array(e.length);for(o=0;o<r;o++)i[o]={index:o,value:e[o]};for(i.sort(function(e,o){return t(e.value,o.value)||e.index-o.index}),o=0;o<e.length;o++)e[o]=i[o].value},ol.array.findIndex=function(e,t){var o,r=!e.every(function(r,i){return o=i,!t(r,i,e)});return r?o:-1},ol.array.isSorted=function(e,t,o){var r=t||ol.array.numberSafeCompareFunction;return e.every(function(t,i){if(0===i)return!0;var n=r(e[i-1],t);return!(n>0||o&&0===n)})},goog.provide("ol"),ol.ASSUME_TOUCH=!1,ol.DEFAULT_MAX_ZOOM=42,ol.DEFAULT_MIN_ZOOM=0,ol.DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD=.5,ol.DEFAULT_TILE_SIZE=256,ol.DEFAULT_WMS_VERSION="1.3.0",ol.ENABLE_CANVAS=!0,ol.ENABLE_PROJ4JS=!0,ol.ENABLE_RASTER_REPROJECTION=!0,ol.ENABLE_WEBGL=!0,ol.DEBUG_WEBGL=!0,ol.INITIAL_ATLAS_SIZE=256,ol.MAX_ATLAS_SIZE=-1,ol.MOUSEWHEELZOOM_MAXDELTA=1,ol.OVERVIEWMAP_MAX_RATIO=.75,ol.OVERVIEWMAP_MIN_RATIO=.1,ol.RASTER_REPROJECTION_MAX_SOURCE_TILES=100,ol.RASTER_REPROJECTION_MAX_SUBDIVISION=10,ol.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH=.25,ol.SIMPLIFY_TOLERANCE=.5,ol.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK=1024,ol.VERSION="",ol.WEBGL_MAX_TEXTURE_SIZE,ol.WEBGL_EXTENSIONS,ol.inherits=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},ol.nullFunction=function(){},ol.getUid=function(e){return e.ol_uid||(e.ol_uid=++ol.uidCounter_)},ol.uidCounter_=0,goog.provide("ol.AssertionError"),goog.require("ol"),ol.AssertionError=function(e){var t=ol.VERSION?ol.VERSION.split("-")[0]:"latest";this.message="Assertion failed. See https://openlayers.org/en/"+t+"/doc/errors/#"+e+" for details.",this.code=e,this.name="AssertionError"},ol.inherits(ol.AssertionError,Error),goog.provide("ol.asserts"),goog.require("ol.AssertionError"),ol.asserts.assert=function(e,t){if(!e)throw new ol.AssertionError(t)},goog.provide("ol.TileRange"),ol.TileRange=function(e,t,o,r){this.minX=e,this.maxX=t,this.minY=o,this.maxY=r},ol.TileRange.createOrUpdate=function(e,t,o,r,i){return void 0!==i?(i.minX=e,i.maxX=t,i.minY=o,i.maxY=r,i):new ol.TileRange(e,t,o,r)},ol.TileRange.prototype.contains=function(e){return this.containsXY(e[1],e[2])},ol.TileRange.prototype.containsTileRange=function(e){
return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY},ol.TileRange.prototype.containsXY=function(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY},ol.TileRange.prototype.equals=function(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY},ol.TileRange.prototype.extend=function(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)},ol.TileRange.prototype.getHeight=function(){return this.maxY-this.minY+1},ol.TileRange.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},ol.TileRange.prototype.getWidth=function(){return this.maxX-this.minX+1},ol.TileRange.prototype.intersects=function(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY},goog.provide("ol.math"),goog.require("ol.asserts"),ol.math.clamp=function(e,t,o){return Math.min(Math.max(e,t),o)},ol.math.cosh=function(){var e;return e="cosh"in Math?Math.cosh:function(e){var t=Math.exp(e);return(t+1/t)/2}}(),ol.math.roundUpToPowerOfTwo=function(e){return ol.asserts.assert(0<e,29),Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},ol.math.squaredSegmentDistance=function(e,t,o,r,i,n){var a=i-o,l=n-r;if(0!==a||0!==l){var s=((e-o)*a+(t-r)*l)/(a*a+l*l);s>1?(o=i,r=n):s>0&&(o+=a*s,r+=l*s)}return ol.math.squaredDistance(e,t,o,r)},ol.math.squaredDistance=function(e,t,o,r){var i=o-e,n=r-t;return i*i+n*n},ol.math.solveLinearSystem=function(e){for(var t=e.length,o=0;o<t;o++){for(var r=o,i=Math.abs(e[o][o]),n=o+1;n<t;n++){var a=Math.abs(e[n][o]);a>i&&(i=a,r=n)}if(0===i)return null;var l=e[r];e[r]=e[o],e[o]=l;for(var s=o+1;s<t;s++)for(var p=-e[s][o]/e[o][o],g=o;g<t+1;g++)o==g?e[s][g]=0:e[s][g]+=p*e[o][g]}for(var u=new Array(t),c=t-1;c>=0;c--){u[c]=e[c][t]/e[c][c];for(var y=c-1;y>=0;y--)e[y][t]-=e[y][c]*u[c]}return u},ol.math.toDegrees=function(e){return 180*e/Math.PI},ol.math.toRadians=function(e){return e*Math.PI/180},ol.math.modulo=function(e,t){var o=e%t;return o*t<0?o+t:o},ol.math.lerp=function(e,t,o){return e+o*(t-e)},goog.provide("ol.size"),ol.size.buffer=function(e,t,o){return void 0===o&&(o=[0,0]),o[0]=e[0]+2*t,o[1]=e[1]+2*t,o},ol.size.hasArea=function(e){return e[0]>0&&e[1]>0},ol.size.scale=function(e,t,o){return void 0===o&&(o=[0,0]),o[0]=e[0]*t+.5|0,o[1]=e[1]*t+.5|0,o},ol.size.toSize=function(e,t){return Array.isArray(e)?e:(void 0===t?t=[e,e]:t[0]=t[1]=e,t)},goog.provide("ol.extent.Corner"),ol.extent.Corner={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},goog.provide("ol.extent.Relationship"),ol.extent.Relationship={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16},goog.provide("ol.extent"),goog.require("ol.asserts"),goog.require("ol.extent.Corner"),goog.require("ol.extent.Relationship"),ol.extent.boundingExtent=function(e){for(var t=ol.extent.createEmpty(),o=0,r=e.length;o<r;++o)ol.extent.extendCoordinate(t,e[o]);return t},ol.extent.boundingExtentXYs_=function(e,t,o){var r=Math.min.apply(null,e),i=Math.min.apply(null,t),n=Math.max.apply(null,e),a=Math.max.apply(null,t);return ol.extent.createOrUpdate(r,i,n,a,o)},ol.extent.buffer=function(e,t,o){return o?(o[0]=e[0]-t,o[1]=e[1]-t,o[2]=e[2]+t,o[3]=e[3]+t,o):[e[0]-t,e[1]-t,e[2]+t,e[3]+t]},ol.extent.clone=function(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()};ol.extent.closestSquaredDistanceXY=function(e,t,o){var r,i;return r=t<e[0]?e[0]-t:e[2]<t?t-e[2]:0,i=o<e[1]?e[1]-o:e[3]<o?o-e[3]:0,r*r+i*i};ol.extent.containsCoordinate=function(e,t){return ol.extent.containsXY(e,t[0],t[1])},ol.extent.containsExtent=function(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]},ol.extent.containsXY=function(e,t,o){return e[0]<=t&&t<=e[2]&&e[1]<=o&&o<=e[3]},ol.extent.coordinateRelationship=function(e,t){var o=e[0],r=e[1],i=e[2],n=e[3],a=t[0],l=t[1],s=ol.extent.Relationship.UNKNOWN;return a<o?s|=ol.extent.Relationship.LEFT:a>i&&(s|=ol.extent.Relationship.RIGHT),l<r?s|=ol.extent.Relationship.BELOW:l>n&&(s|=ol.extent.Relationship.ABOVE),s===ol.extent.Relationship.UNKNOWN&&(s=ol.extent.Relationship.INTERSECTING),s},ol.extent.createEmpty=function(){return[1/0,1/0,-(1/0),-(1/0)]},ol.extent.createOrUpdate=function(e,t,o,r,i){return i?(i[0]=e,i[1]=t,i[2]=o,i[3]=r,i):[e,t,o,r]},ol.extent.createOrUpdateEmpty=function(e){return ol.extent.createOrUpdate(1/0,1/0,-(1/0),-(1/0),e)},ol.extent.createOrUpdateFromCoordinate=function(e,t){var o=e[0],r=e[1];return ol.extent.createOrUpdate(o,r,o,r,t)},ol.extent.createOrUpdateFromCoordinates=function(e,t){var o=ol.extent.createOrUpdateEmpty(t);return ol.extent.extendCoordinates(o,e)},ol.extent.createOrUpdateFromFlatCoordinates=function(e,t,o,r,i){var n=ol.extent.createOrUpdateEmpty(i);return ol.extent.extendFlatCoordinates(n,e,t,o,r)},ol.extent.createOrUpdateFromRings=function(e,t){var o=ol.extent.createOrUpdateEmpty(t);return ol.extent.extendRings(o,e)},ol.extent.equals=function(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]},ol.extent.extend=function(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e},ol.extent.extendCoordinate=function(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])},ol.extent.extendCoordinates=function(e,t){var o,r;for(o=0,r=t.length;o<r;++o)ol.extent.extendCoordinate(e,t[o]);return e},ol.extent.extendFlatCoordinates=function(e,t,o,r,i){for(;o<r;o+=i)ol.extent.extendXY(e,t[o],t[o+1]);return e},ol.extent.extendRings=function(e,t){var o,r;for(o=0,r=t.length;o<r;++o)ol.extent.extendCoordinates(e,t[o]);return e},ol.extent.extendXY=function(e,t,o){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],o),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],o)},ol.extent.forEachCorner=function(e,t,o){var r;return(r=t.call(o,ol.extent.getBottomLeft(e)))?r:(r=t.call(o,ol.extent.getBottomRight(e)))?r:(r=t.call(o,ol.extent.getTopRight(e)))?r:(r=t.call(o,ol.extent.getTopLeft(e)),!!r&&r)},ol.extent.getArea=function(e){var t=0;return ol.extent.isEmpty(e)||(t=ol.extent.getWidth(e)*ol.extent.getHeight(e)),t},ol.extent.getBottomLeft=function(e){return[e[0],e[1]]},ol.extent.getBottomRight=function(e){return[e[2],e[1]]},ol.extent.getCenter=function(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]},ol.extent.getCorner=function(e,t){var o;return t===ol.extent.Corner.BOTTOM_LEFT?o=ol.extent.getBottomLeft(e):t===ol.extent.Corner.BOTTOM_RIGHT?o=ol.extent.getBottomRight(e):t===ol.extent.Corner.TOP_LEFT?o=ol.extent.getTopLeft(e):t===ol.extent.Corner.TOP_RIGHT?o=ol.extent.getTopRight(e):ol.asserts.assert(!1,13),o},ol.extent.getEnlargedArea=function(e,t){var o=Math.min(e[0],t[0]),r=Math.min(e[1],t[1]),i=Math.max(e[2],t[2]),n=Math.max(e[3],t[3]);return(i-o)*(n-r)},ol.extent.getForViewAndSize=function(e,t,o,r,i){var n=t*r[0]/2,a=t*r[1]/2,l=Math.cos(o),s=Math.sin(o),p=n*l,g=n*s,u=a*l,c=a*s,y=e[0],h=e[1],d=y-p+c,f=y-p-c,m=y+p-c,v=y+p+c,_=h-g-u,S=h-g+u,x=h+g+u,E=h+g-u;return ol.extent.createOrUpdate(Math.min(d,f,m,v),Math.min(_,S,x,E),Math.max(d,f,m,v),Math.max(_,S,x,E),i)},ol.extent.getHeight=function(e){return e[3]-e[1]},ol.extent.getIntersectionArea=function(e,t){var o=ol.extent.getIntersection(e,t);return ol.extent.getArea(o)},ol.extent.getIntersection=function(e,t,o){var r=o?o:ol.extent.createEmpty();return ol.extent.intersects(e,t)&&(e[0]>t[0]?r[0]=e[0]:r[0]=t[0],e[1]>t[1]?r[1]=e[1]:r[1]=t[1],e[2]<t[2]?r[2]=e[2]:r[2]=t[2],e[3]<t[3]?r[3]=e[3]:r[3]=t[3]),r},ol.extent.getMargin=function(e){return ol.extent.getWidth(e)+ol.extent.getHeight(e)},ol.extent.getSize=function(e){return[e[2]-e[0],e[3]-e[1]]},ol.extent.getTopLeft=function(e){return[e[0],e[3]]},ol.extent.getTopRight=function(e){return[e[2],e[3]]},ol.extent.getWidth=function(e){return e[2]-e[0]},ol.extent.intersects=function(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]},ol.extent.isEmpty=function(e){return e[2]<e[0]||e[3]<e[1]},ol.extent.returnOrUpdate=function(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e},ol.extent.scaleFromCenter=function(e,t){var o=(e[2]-e[0])/2*(t-1),r=(e[3]-e[1])/2*(t-1);e[0]-=o,e[2]+=o,e[1]-=r,e[3]+=r},ol.extent.intersectsSegment=function(e,t,o){var r=!1,i=ol.extent.coordinateRelationship(e,t),n=ol.extent.coordinateRelationship(e,o);if(i===ol.extent.Relationship.INTERSECTING||n===ol.extent.Relationship.INTERSECTING)r=!0;else{var a,l,s=e[0],p=e[1],g=e[2],u=e[3],c=t[0],y=t[1],h=o[0],d=o[1],f=(d-y)/(h-c);n&ol.extent.Relationship.ABOVE&&!(i&ol.extent.Relationship.ABOVE)&&(a=h-(d-u)/f,r=a>=s&&a<=g),r||!(n&ol.extent.Relationship.RIGHT)||i&ol.extent.Relationship.RIGHT||(l=d-(h-g)*f,r=l>=p&&l<=u),r||!(n&ol.extent.Relationship.BELOW)||i&ol.extent.Relationship.BELOW||(a=h-(d-p)/f,r=a>=s&&a<=g),r||!(n&ol.extent.Relationship.LEFT)||i&ol.extent.Relationship.LEFT||(l=d-(h-s)*f,r=l>=p&&l<=u)}return r},ol.extent.applyTransform=function(e,t,o){var r=[e[0],e[1],e[0],e[3],e[2],e[1],e[2],e[3]];t(r,r,2);var i=[r[0],r[2],r[4],r[6]],n=[r[1],r[3],r[5],r[7]];return ol.extent.boundingExtentXYs_(i,n,o)},goog.provide("ol.obj"),ol.obj.assign="function"==typeof Object.assign?Object.assign:function(e,t){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(e),r=1,i=arguments.length;r<i;++r){var n=arguments[r];if(void 0!==n&&null!==n)for(var a in n)n.hasOwnProperty(a)&&(o[a]=n[a])}return o},ol.obj.clear=function(e){for(var t in e)delete e[t]},ol.obj.getValues=function(e){var t=[];for(var o in e)t.push(e[o]);return t},ol.obj.isEmpty=function(e){var t;for(t in e)return!1;return!t},goog.provide("ol.Sphere"),goog.require("ol.math"),ol.Sphere=function(e){this.radius=e},ol.Sphere.prototype.geodesicArea=function(e){for(var t=0,o=e.length,r=e[o-1][0],i=e[o-1][1],n=0;n<o;n++){var a=e[n][0],l=e[n][1];t+=ol.math.toRadians(a-r)*(2+Math.sin(ol.math.toRadians(i))+Math.sin(ol.math.toRadians(l))),r=a,i=l}return t*this.radius*this.radius/2},ol.Sphere.prototype.haversineDistance=function(e,t){var o=ol.math.toRadians(e[1]),r=ol.math.toRadians(t[1]),i=(r-o)/2,n=ol.math.toRadians(t[0]-e[0])/2,a=Math.sin(i)*Math.sin(i)+Math.sin(n)*Math.sin(n)*Math.cos(o)*Math.cos(r);return 2*this.radius*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))},ol.Sphere.prototype.offset=function(e,t,o){var r=ol.math.toRadians(e[1]),i=ol.math.toRadians(e[0]),n=t/this.radius,a=Math.asin(Math.sin(r)*Math.cos(n)+Math.cos(r)*Math.sin(n)*Math.cos(o)),l=i+Math.atan2(Math.sin(o)*Math.sin(n)*Math.cos(r),Math.cos(n)-Math.sin(r)*Math.sin(a));return[ol.math.toDegrees(l),ol.math.toDegrees(a)]},goog.provide("ol.sphere.NORMAL"),goog.require("ol.Sphere"),ol.sphere.NORMAL=new ol.Sphere(6370997),goog.provide("ol.proj.Units"),goog.require("ol.sphere.NORMAL"),ol.proj.Units={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},ol.proj.Units.METERS_PER_UNIT={},ol.proj.Units.METERS_PER_UNIT[ol.proj.Units.DEGREES]=2*Math.PI*ol.sphere.NORMAL.radius/360,ol.proj.Units.METERS_PER_UNIT[ol.proj.Units.FEET]=.3048,ol.proj.Units.METERS_PER_UNIT[ol.proj.Units.METERS]=1,ol.proj.Units.METERS_PER_UNIT[ol.proj.Units.USFEET]=1200/3937,goog.provide("ol.proj.proj4"),ol.proj.proj4.cache_=null,ol.proj.proj4.set=function(e){ol.proj.proj4.cache_=e},ol.proj.proj4.get=function(){return ol.proj.proj4.cache_||window.proj4},goog.provide("ol.proj.Projection"),goog.require("ol"),goog.require("ol.proj.Units"),goog.require("ol.proj.proj4"),ol.proj.Projection=function(e){this.code_=e.code,this.units_=e.units,this.extent_=void 0!==e.extent?e.extent:null,this.worldExtent_=void 0!==e.worldExtent?e.worldExtent:null,this.axisOrientation_=void 0!==e.axisOrientation?e.axisOrientation:"enu",this.global_=void 0!==e.global&&e.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit;var t=e.code;if(ol.ENABLE_PROJ4JS){var o=ol.proj.proj4.get();if("function"==typeof o){var r=o.defs(t);void 0!==r&&(void 0!==r.axis&&void 0===e.axisOrientation&&(this.axisOrientation_=r.axis),void 0===e.metersPerUnit&&(this.metersPerUnit_=r.to_meter),void 0===e.units&&(this.units_=r.units))}}},ol.proj.Projection.prototype.canWrapX=function(){return this.canWrapX_},ol.proj.Projection.prototype.getCode=function(){return this.code_},ol.proj.Projection.prototype.getExtent=function(){return this.extent_},ol.proj.Projection.prototype.getUnits=function(){return this.units_},ol.proj.Projection.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||ol.proj.Units.METERS_PER_UNIT[this.units_]},ol.proj.Projection.prototype.getWorldExtent=function(){return this.worldExtent_},ol.proj.Projection.prototype.getAxisOrientation=function(){return this.axisOrientation_},ol.proj.Projection.prototype.isGlobal=function(){return this.global_},ol.proj.Projection.prototype.setGlobal=function(e){this.global_=e,this.canWrapX_=!(!e||!this.extent_)},ol.proj.Projection.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},ol.proj.Projection.prototype.setDefaultTileGrid=function(e){this.defaultTileGrid_=e},ol.proj.Projection.prototype.setExtent=function(e){this.extent_=e,this.canWrapX_=!(!this.global_||!e)},ol.proj.Projection.prototype.setWorldExtent=function(e){this.worldExtent_=e},ol.proj.Projection.prototype.setGetPointResolution=function(e){this.getPointResolutionFunc_=e},ol.proj.Projection.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},goog.provide("ol.proj.EPSG3857"),goog.require("ol"),goog.require("ol.math"),goog.require("ol.proj.Projection"),goog.require("ol.proj.Units"),ol.proj.EPSG3857.Projection_=function(e){ol.proj.Projection.call(this,{code:e,units:ol.proj.Units.METERS,extent:ol.proj.EPSG3857.EXTENT,global:!0,worldExtent:ol.proj.EPSG3857.WORLD_EXTENT,getPointResolution:function(e,t){return e/ol.math.cosh(t[1]/ol.proj.EPSG3857.RADIUS)}})},ol.inherits(ol.proj.EPSG3857.Projection_,ol.proj.Projection),ol.proj.EPSG3857.RADIUS=6378137,ol.proj.EPSG3857.HALF_SIZE=Math.PI*ol.proj.EPSG3857.RADIUS,ol.proj.EPSG3857.EXTENT=[-ol.proj.EPSG3857.HALF_SIZE,-ol.proj.EPSG3857.HALF_SIZE,ol.proj.EPSG3857.HALF_SIZE,ol.proj.EPSG3857.HALF_SIZE],ol.proj.EPSG3857.WORLD_EXTENT=[-180,-85,180,85],ol.proj.EPSG3857.CODES=["EPSG:3857","EPSG:102100","EPSG:102113","EPSG:900913","urn:ogc:def:crs:EPSG:6.18:3:3857","urn:ogc:def:crs:EPSG::3857","http://www.opengis.net/gml/srs/epsg.xml#3857"],ol.proj.EPSG3857.PROJECTIONS=ol.proj.EPSG3857.CODES.map(function(e){return new ol.proj.EPSG3857.Projection_(e)}),ol.proj.EPSG3857.fromEPSG4326=function(e,t,o){var r=e.length,i=o>1?o:2,n=t;void 0===n&&(n=i>2?e.slice():new Array(r));for(var a=ol.proj.EPSG3857.HALF_SIZE,l=0;l<r;l+=i){n[l]=a*e[l]/180;var s=ol.proj.EPSG3857.RADIUS*Math.log(Math.tan(Math.PI*(e[l+1]+90)/360));s>a?s=a:s<-a&&(s=-a),n[l+1]=s}return n},ol.proj.EPSG3857.toEPSG4326=function(e,t,o){var r=e.length,i=o>1?o:2,n=t;void 0===n&&(n=i>2?e.slice():new Array(r));for(var a=0;a<r;a+=i)n[a]=180*e[a]/ol.proj.EPSG3857.HALF_SIZE,n[a+1]=360*Math.atan(Math.exp(e[a+1]/ol.proj.EPSG3857.RADIUS))/Math.PI-90;return n},goog.provide("ol.sphere.WGS84"),goog.require("ol.Sphere"),ol.sphere.WGS84=new ol.Sphere(6378137),goog.provide("ol.proj.EPSG4326"),goog.require("ol"),goog.require("ol.proj.Projection"),goog.require("ol.proj.Units"),goog.require("ol.sphere.WGS84"),ol.proj.EPSG4326.Projection_=function(e,t){ol.proj.Projection.call(this,{code:e,units:ol.proj.Units.DEGREES,extent:ol.proj.EPSG4326.EXTENT,axisOrientation:t,global:!0,metersPerUnit:ol.proj.EPSG4326.METERS_PER_UNIT,worldExtent:ol.proj.EPSG4326.EXTENT})},ol.inherits(ol.proj.EPSG4326.Projection_,ol.proj.Projection),ol.proj.EPSG4326.EXTENT=[-180,-90,180,90],ol.proj.EPSG4326.METERS_PER_UNIT=Math.PI*ol.sphere.WGS84.radius/180,ol.proj.EPSG4326.PROJECTIONS=[new ol.proj.EPSG4326.Projection_("CRS:84"),new ol.proj.EPSG4326.Projection_("EPSG:4326","neu"),new ol.proj.EPSG4326.Projection_("urn:ogc:def:crs:EPSG::4326","neu"),new ol.proj.EPSG4326.Projection_("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new ol.proj.EPSG4326.Projection_("urn:ogc:def:crs:OGC:1.3:CRS84"),new ol.proj.EPSG4326.Projection_("urn:ogc:def:crs:OGC:2:84"),new ol.proj.EPSG4326.Projection_("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ol.proj.EPSG4326.Projection_("urn:x-ogc:def:crs:EPSG:4326","neu")],goog.provide("ol.proj.projections"),ol.proj.projections.cache_={},ol.proj.projections.clear=function(){ol.proj.projections.cache_={}},ol.proj.projections.get=function(e){var t=ol.proj.projections.cache_;return t[e]||null},ol.proj.projections.add=function(e,t){var o=ol.proj.projections.cache_;o[e]=t},goog.provide("ol.proj.transforms"),goog.require("ol.obj"),ol.proj.transforms.cache_={},ol.proj.transforms.clear=function(){ol.proj.transforms.cache_={}},ol.proj.transforms.add=function(e,t,o){var r=e.getCode(),i=t.getCode(),n=ol.proj.transforms.cache_;r in n||(n[r]={}),n[r][i]=o},ol.proj.transforms.remove=function(e,t){var o=e.getCode(),r=t.getCode(),i=ol.proj.transforms.cache_,n=i[o][r];return delete i[o][r],ol.obj.isEmpty(i[o])&&delete i[o],n},ol.proj.transforms.get=function(e,t){var o,r=ol.proj.transforms.cache_;return e in r&&t in r[e]&&(o=r[e][t]),o},goog.provide("ol.proj"),goog.require("ol"),goog.require("ol.extent"),goog.require("ol.proj.EPSG3857"),goog.require("ol.proj.EPSG4326"),goog.require("ol.proj.Projection"),goog.require("ol.proj.Units"),goog.require("ol.proj.proj4"),goog.require("ol.proj.projections"),goog.require("ol.proj.transforms"),goog.require("ol.sphere.NORMAL"),ol.proj.METERS_PER_UNIT=ol.proj.Units.METERS_PER_UNIT,ol.ENABLE_PROJ4JS&&(ol.proj.setProj4=function(e){ol.proj.proj4.set(e)}),ol.proj.getPointResolution=function(e,t,o){e=ol.proj.get(e);var r,i=e.getPointResolutionFunc();if(i)r=i(t,o);else{var n=e.getUnits();if(n==ol.proj.Units.DEGREES)r=t;else{var a=ol.proj.getTransformFromProjections(e,ol.proj.get("EPSG:4326")),l=[o[0]-t/2,o[1],o[0]+t/2,o[1],o[0],o[1]-t/2,o[0],o[1]+t/2];l=a(l,l,2);var s=ol.sphere.NORMAL.haversineDistance(l.slice(0,2),l.slice(2,4)),p=ol.sphere.NORMAL.haversineDistance(l.slice(4,6),l.slice(6,8));r=(s+p)/2;var g=e.getMetersPerUnit();void 0!==g&&(r/=g)}}return r},ol.proj.addEquivalentProjections=function(e){ol.proj.addProjections(e),e.forEach(function(t){e.forEach(function(e){t!==e&&ol.proj.transforms.add(t,e,ol.proj.cloneTransform)})})},ol.proj.addEquivalentTransforms=function(e,t,o,r){e.forEach(function(e){t.forEach(function(t){ol.proj.transforms.add(e,t,o),ol.proj.transforms.add(t,e,r)})})},ol.proj.addProjection=function(e){ol.proj.projections.add(e.getCode(),e),ol.proj.transforms.add(e,e,ol.proj.cloneTransform)},ol.proj.addProjections=function(e){e.forEach(ol.proj.addProjection)},ol.proj.clearAllProjections=function(){ol.proj.projections.clear(),ol.proj.transforms.clear()},ol.proj.createProjection=function(e,t){return e?"string"==typeof e?ol.proj.get(e):e:ol.proj.get(t)},ol.proj.addCoordinateTransforms=function(e,t,o,r){var i=ol.proj.get(e),n=ol.proj.get(t);ol.proj.transforms.add(i,n,ol.proj.createTransformFromCoordinateTransform(o)),ol.proj.transforms.add(n,i,ol.proj.createTransformFromCoordinateTransform(r))},ol.proj.createTransformFromCoordinateTransform=function(e){return function(t,o,r){var i,n,a,l=t.length,s=void 0!==r?r:2,p=void 0!==o?o:new Array(l);for(n=0;n<l;n+=s)for(i=e([t[n],t[n+1]]),p[n]=i[0],p[n+1]=i[1],a=s-1;a>=2;--a)p[n+a]=t[n+a];return p}},ol.proj.fromLonLat=function(e,t){return ol.proj.transform(e,"EPSG:4326",void 0!==t?t:"EPSG:3857")},ol.proj.toLonLat=function(e,t){return ol.proj.transform(e,void 0!==t?t:"EPSG:3857","EPSG:4326")},ol.proj.get=function(e){var t=null;if(e instanceof ol.proj.Projection)t=e;else if("string"==typeof e){var o=e;if(t=ol.proj.projections.get(o),ol.ENABLE_PROJ4JS){var r=ol.proj.proj4.get();t||"function"!=typeof r||void 0===r.defs(o)||(t=new ol.proj.Projection({code:o}),ol.proj.addProjection(t))}}return t},ol.proj.equivalent=function(e,t){if(e===t)return!0;var o=e.getUnits()===t.getUnits();if(e.getCode()===t.getCode())return o;var r=ol.proj.getTransformFromProjections(e,t);return r===ol.proj.cloneTransform&&o},ol.proj.getTransform=function(e,t){var o=ol.proj.get(e),r=ol.proj.get(t);return ol.proj.getTransformFromProjections(o,r)},ol.proj.getTransformFromProjections=function(e,t){var o=e.getCode(),r=t.getCode(),i=ol.proj.transforms.get(o,r);if(ol.ENABLE_PROJ4JS&&!i){var n=ol.proj.proj4.get();if("function"==typeof n){var a=n.defs(o),l=n.defs(r);if(void 0!==a&&void 0!==l){if(a===l)ol.proj.addEquivalentProjections([t,e]);else{var s=n(r,o);ol.proj.addCoordinateTransforms(t,e,s.forward,s.inverse)}i=ol.proj.transforms.get(o,r)}}}return i||(i=ol.proj.identityTransform),i},ol.proj.identityTransform=function(e,t,o){if(void 0!==t&&e!==t){for(var r=0,i=e.length;r<i;++r)t[r]=e[r];e=t}return e},ol.proj.cloneTransform=function(e,t,o){var r;if(void 0!==t){for(var i=0,n=e.length;i<n;++i)t[i]=e[i];r=t}else r=e.slice();return r},ol.proj.transform=function(e,t,o){var r=ol.proj.getTransform(t,o);return r(e,void 0,e.length)},ol.proj.transformExtent=function(e,t,o){var r=ol.proj.getTransform(t,o);return ol.extent.applyTransform(e,r)},ol.proj.transformWithProjections=function(e,t,o){var r=ol.proj.getTransformFromProjections(t,o);return r(e)},ol.proj.addCommon=function(){ol.proj.addEquivalentProjections(ol.proj.EPSG3857.PROJECTIONS),ol.proj.addEquivalentProjections(ol.proj.EPSG4326.PROJECTIONS),ol.proj.addEquivalentTransforms(ol.proj.EPSG4326.PROJECTIONS,ol.proj.EPSG3857.PROJECTIONS,ol.proj.EPSG3857.fromEPSG4326,ol.proj.EPSG3857.toEPSG4326)},ol.proj.addCommon(),goog.provide("ol.tilecoord"),ol.tilecoord.createOrUpdate=function(e,t,o,r){return void 0!==r?(r[0]=e,r[1]=t,r[2]=o,r):[e,t,o]},ol.tilecoord.getKeyZXY=function(e,t,o){return e+"/"+t+"/"+o},ol.tilecoord.hash=function(e){return(e[1]<<e[0])+e[2]},ol.tilecoord.quadKey=function(e){var t,o,r=e[0],i=new Array(r),n=1<<r-1;for(t=0;t<r;++t)o=48,e[1]&n&&(o+=1),e[2]&n&&(o+=2),i[t]=String.fromCharCode(o),n>>=1;return i.join("")},ol.tilecoord.withinExtentAndZ=function(e,t){var o=e[0],r=e[1],i=e[2];if(t.getMinZoom()>o||o>t.getMaxZoom())return!1;var n,a=t.getExtent();return n=a?t.getTileRangeForExtentAndZ(a,o):t.getFullTileRange(o),!n||n.containsXY(r,i)},goog.provide("ol.tilegrid.TileGrid"),goog.require("ol"),goog.require("ol.asserts"),goog.require("ol.TileRange"),goog.require("ol.array"),goog.require("ol.extent"),goog.require("ol.math"),goog.require("ol.size"),goog.require("ol.tilecoord"),ol.tilegrid.TileGrid=function(e){this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.resolutions_=e.resolutions,ol.asserts.assert(ol.array.isSorted(this.resolutions_,function(e,t){return t-e},!0),17),this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==e.origin?e.origin:null,this.origins_=null,void 0!==e.origins&&(this.origins_=e.origins,ol.asserts.assert(this.origins_.length==this.resolutions_.length,20));var t=e.extent;void 0===t||this.origin_||this.origins_||(this.origin_=ol.extent.getTopLeft(t)),ol.asserts.assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==e.tileSizes&&(this.tileSizes_=e.tileSizes,ol.asserts.assert(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==e.tileSize?e.tileSize:this.tileSizes_?null:ol.DEFAULT_TILE_SIZE,ol.asserts.assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==t?t:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==e.sizes?this.fullTileRanges_=e.sizes.map(function(e,t){var o=new ol.TileRange(Math.min(0,e[0]),Math.max(e[0]-1,-1),Math.min(0,e[1]),Math.max(e[1]-1,-1));return o},this):t&&this.calculateTileRanges_(t)},ol.tilegrid.TileGrid.tmpTileCoord_=[0,0,0],ol.tilegrid.TileGrid.prototype.forEachTileCoord=function(e,t,o){for(var r=this.getTileRangeForExtentAndZ(e,t),i=r.minX,n=r.maxX;i<=n;++i)for(var a=r.minY,l=r.maxY;a<=l;++a)o([t,i,a])},ol.tilegrid.TileGrid.prototype.forEachTileCoordParentTileRange=function(e,t,o,r,i){for(var n=this.getTileCoordExtent(e,i),a=e[0]-1;a>=this.minZoom;){if(t.call(o,a,this.getTileRangeForExtentAndZ(n,a,r)))return!0;--a}return!1},ol.tilegrid.TileGrid.prototype.getExtent=function(){return this.extent_},ol.tilegrid.TileGrid.prototype.getMaxZoom=function(){return this.maxZoom},ol.tilegrid.TileGrid.prototype.getMinZoom=function(){return this.minZoom},ol.tilegrid.TileGrid.prototype.getOrigin=function(e){return this.origin_?this.origin_:this.origins_[e]},ol.tilegrid.TileGrid.prototype.getResolution=function(e){return this.resolutions_[e]},ol.tilegrid.TileGrid.prototype.getResolutions=function(){return this.resolutions_},ol.tilegrid.TileGrid.prototype.getTileCoordChildTileRange=function(e,t,o){if(e[0]<this.maxZoom){var r=this.getTileCoordExtent(e,o);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null},ol.tilegrid.TileGrid.prototype.getTileRangeExtent=function(e,t,o){var r=this.getOrigin(e),i=this.getResolution(e),n=ol.size.toSize(this.getTileSize(e),this.tmpSize_),a=r[0]+t.minX*n[0]*i,l=r[0]+(t.maxX+1)*n[0]*i,s=r[1]+t.minY*n[1]*i,p=r[1]+(t.maxY+1)*n[1]*i;return ol.extent.createOrUpdate(a,s,l,p,o)},ol.tilegrid.TileGrid.prototype.getTileRangeForExtentAndResolution=function(e,t,o){var r=ol.tilegrid.TileGrid.tmpTileCoord_;this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,r);var i=r[1],n=r[2];return this.getTileCoordForXYAndResolution_(e[2],e[3],t,!0,r),ol.TileRange.createOrUpdate(i,r[1],n,r[2],o)},ol.tilegrid.TileGrid.prototype.getTileRangeForExtentAndZ=function(e,t,o){var r=this.getResolution(t);return this.getTileRangeForExtentAndResolution(e,r,o)},ol.tilegrid.TileGrid.prototype.getTileCoordCenter=function(e){var t=this.getOrigin(e[0]),o=this.getResolution(e[0]),r=ol.size.toSize(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*o,t[1]+(e[2]+.5)*r[1]*o]},ol.tilegrid.TileGrid.prototype.getTileCoordExtent=function(e,t){var o=this.getOrigin(e[0]),r=this.getResolution(e[0]),i=ol.size.toSize(this.getTileSize(e[0]),this.tmpSize_),n=o[0]+e[1]*i[0]*r,a=o[1]+e[2]*i[1]*r,l=n+i[0]*r,s=a+i[1]*r;return ol.extent.createOrUpdate(n,a,l,s,t)},ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndResolution=function(e,t,o){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,o)},ol.tilegrid.TileGrid.prototype.getTileCoordForXYAndResolution_=function(e,t,o,r,i){var n=this.getZForResolution(o),a=o/this.getResolution(n),l=this.getOrigin(n),s=ol.size.toSize(this.getTileSize(n),this.tmpSize_),p=r?.5:0,g=r?0:.5,u=Math.floor((e-l[0])/o+p),c=Math.floor((t-l[1])/o+g),y=a*u/s[0],h=a*c/s[1];return r?(y=Math.ceil(y)-1,h=Math.ceil(h)-1):(y=Math.floor(y),h=Math.floor(h)),ol.tilecoord.createOrUpdate(n,y,h,i)},ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndZ=function(e,t,o){var r=this.getResolution(t);return this.getTileCoordForXYAndResolution_(e[0],e[1],r,!1,o)},ol.tilegrid.TileGrid.prototype.getTileCoordResolution=function(e){return this.resolutions_[e[0]]},ol.tilegrid.TileGrid.prototype.getTileSize=function(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]},ol.tilegrid.TileGrid.prototype.getFullTileRange=function(e){return this.fullTileRanges_?this.fullTileRanges_[e]:null},ol.tilegrid.TileGrid.prototype.getZForResolution=function(e,t){var o=ol.array.linearFindNearest(this.resolutions_,e,t||0);return ol.math.clamp(o,this.minZoom,this.maxZoom)},ol.tilegrid.TileGrid.prototype.calculateTileRanges_=function(e){for(var t=this.resolutions_.length,o=new Array(t),r=this.minZoom;r<t;++r)o[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=o};goog.provide("ol.tilegrid");goog.require("ol"),goog.require("ol.size"),goog.require("ol.extent"),goog.require("ol.extent.Corner"),goog.require("ol.obj"),goog.require("ol.proj"),goog.require("ol.proj.Units"),goog.require("ol.tilegrid.TileGrid"),ol.tilegrid.getForProjection=function(e){var t=e.getDefaultTileGrid();return t||(t=ol.tilegrid.createForProjection(e),e.setDefaultTileGrid(t)),t},ol.tilegrid.wrapX=function(e,t,o){var r=t[0],i=e.getTileCoordCenter(t),n=ol.tilegrid.extentFromProjection(o);if(ol.extent.containsCoordinate(n,i))return t;var a=ol.extent.getWidth(n),l=Math.ceil((n[0]-i[0])/a);return i[0]+=a*l,e.getTileCoordForCoordAndZ(i,r)},ol.tilegrid.createForExtent=function(e,t,o,r){var i=void 0!==r?r:ol.extent.Corner.TOP_LEFT,n=ol.tilegrid.resolutionsFromExtent(e,t,o);return new ol.tilegrid.TileGrid({extent:e,origin:ol.extent.getCorner(e,i),resolutions:n,tileSize:o})},ol.tilegrid.createXYZ=function(e){var t={};return ol.obj.assign(t,void 0!==e?e:{}),void 0===t.extent&&(t.extent=ol.proj.get("EPSG:3857").getExtent()),t.resolutions=ol.tilegrid.resolutionsFromExtent(t.extent,t.maxZoom,t.tileSize),delete t.maxZoom,new ol.tilegrid.TileGrid(t)},ol.tilegrid.resolutionsFromExtent=function(e,t,o){for(var r=void 0!==t?t:ol.DEFAULT_MAX_ZOOM,i=ol.extent.getHeight(e),n=ol.extent.getWidth(e),a=ol.size.toSize(void 0!==o?o:ol.DEFAULT_TILE_SIZE),l=Math.max(n/a[0],i/a[1]),s=r+1,p=new Array(s),g=0;g<s;++g)p[g]=l/Math.pow(2,g);return p},ol.tilegrid.createForProjection=function(e,t,o,r){var i=ol.tilegrid.extentFromProjection(e);return ol.tilegrid.createForExtent(i,t,o,r)},ol.tilegrid.extentFromProjection=function(e){e=ol.proj.get(e);var t=e.getExtent();if(!t){var o=180*ol.proj.METERS_PER_UNIT[ol.proj.Units.DEGREES]/e.getMetersPerUnit();t=ol.extent.createOrUpdate(-o,-o,o,o)}return t},goog.provide("ol.Attribution"),goog.require("ol.TileRange"),goog.require("ol.math"),goog.require("ol.tilegrid"),ol.Attribution=function(e){this.html_=e.html,this.tileRanges_=e.tileRanges?e.tileRanges:null},ol.Attribution.prototype.getHTML=function(){return this.html_},ol.Attribution.prototype.intersectsAnyTileRange=function(e,t,o){if(!this.tileRanges_)return!0;var r,i,n,a;for(a in e)if(a in this.tileRanges_){n=e[a];var l;for(r=0,i=this.tileRanges_[a].length;r<i;++r){if(l=this.tileRanges_[a][r],l.intersects(n))return!0;var s=t.getTileRangeForExtentAndZ(ol.tilegrid.extentFromProjection(o),parseInt(a,10)),p=s.getWidth();if(n.minX<s.minX||n.maxX>s.maxX){if(l.intersects(new ol.TileRange(ol.math.modulo(n.minX,p),ol.math.modulo(n.maxX,p),n.minY,n.maxY)))return!0;if(n.getWidth()>p&&l.intersects(s))return!0}}}return!1},goog.provide("ol.CenterConstraint"),goog.require("ol.math"),ol.CenterConstraint.createExtent=function(e){return function(t){return t?[ol.math.clamp(t[0],e[0],e[2]),ol.math.clamp(t[1],e[1],e[3])]:void 0}},ol.CenterConstraint.none=function(e){return e},goog.provide("ol.CollectionEventType"),ol.CollectionEventType={ADD:"add",REMOVE:"remove"},goog.provide("ol.ObjectEventType"),ol.ObjectEventType={PROPERTYCHANGE:"propertychange"},goog.provide("ol.events"),goog.require("ol.obj"),ol.events.bindListener_=function(e){var t=function(t){var o=e.listener,r=e.bindTo||e.target;return e.callOnce&&ol.events.unlistenByKey(e),o.call(r,t)};return e.boundListener=t,t},ol.events.findListener_=function(e,t,o,r){for(var i,n=0,a=e.length;n<a;++n)if(i=e[n],i.listener===t&&i.bindTo===o)return r&&(i.deleteIndex=n),i},ol.events.getListeners=function(e,t){var o=e.ol_lm;return o?o[t]:void 0},ol.events.getListenerMap_=function(e){var t=e.ol_lm;return t||(t=e.ol_lm={}),t},ol.events.removeListeners_=function(e,t){var o=ol.events.getListeners(e,t);if(o){for(var r=0,i=o.length;r<i;++r)e.removeEventListener(t,o[r].boundListener),ol.obj.clear(o[r]);o.length=0;var n=e.ol_lm;n&&(delete n[t],0===Object.keys(n).length&&delete e.ol_lm)}},ol.events.listen=function(e,t,o,r,i){var n=ol.events.getListenerMap_(e),a=n[t];a||(a=n[t]=[]);var l=ol.events.findListener_(a,o,r,!1);return l?i||(l.callOnce=!1):(l={bindTo:r,callOnce:!!i,listener:o,target:e,type:t},e.addEventListener(t,ol.events.bindListener_(l)),a.push(l)),l},ol.events.listenOnce=function(e,t,o,r){return ol.events.listen(e,t,o,r,!0)},ol.events.unlisten=function(e,t,o,r){var i=ol.events.getListeners(e,t);if(i){var n=ol.events.findListener_(i,o,r,!0);n&&ol.events.unlistenByKey(n)}},ol.events.unlistenByKey=function(e){if(e&&e.target){e.target.removeEventListener(e.type,e.boundListener);var t=ol.events.getListeners(e.target,e.type);if(t){var o="deleteIndex"in e?e.deleteIndex:t.indexOf(e);o!==-1&&t.splice(o,1),0===t.length&&ol.events.removeListeners_(e.target,e.type);
}ol.obj.clear(e)}},ol.events.unlistenAll=function(e){var t=ol.events.getListenerMap_(e);for(var o in t)ol.events.removeListeners_(e,o)},goog.provide("ol.Disposable"),goog.require("ol"),ol.Disposable=function(){},ol.Disposable.prototype.disposed_=!1,ol.Disposable.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},ol.Disposable.prototype.disposeInternal=ol.nullFunction,goog.provide("ol.events.Event"),ol.events.Event=function(e){this.propagationStopped,this.type=e,this.target=null},ol.events.Event.prototype.preventDefault=ol.events.Event.prototype.stopPropagation=function(){this.propagationStopped=!0},ol.events.Event.stopPropagation=function(e){e.stopPropagation()},ol.events.Event.preventDefault=function(e){e.preventDefault()},goog.provide("ol.events.EventTarget"),goog.require("ol"),goog.require("ol.Disposable"),goog.require("ol.events"),goog.require("ol.events.Event"),ol.events.EventTarget=function(){ol.Disposable.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}},ol.inherits(ol.events.EventTarget,ol.Disposable),ol.events.EventTarget.prototype.addEventListener=function(e,t){var o=this.listeners_[e];o||(o=this.listeners_[e]=[]),o.indexOf(t)===-1&&o.push(t)},ol.events.EventTarget.prototype.dispatchEvent=function(e){var t="string"==typeof e?new ol.events.Event(e):e,o=t.type;t.target=this;var r,i=this.listeners_[o];if(i){o in this.dispatching_||(this.dispatching_[o]=0,this.pendingRemovals_[o]=0),++this.dispatching_[o];for(var n=0,a=i.length;n<a;++n)if(i[n].call(this,t)===!1||t.propagationStopped){r=!1;break}if(--this.dispatching_[o],0===this.dispatching_[o]){var l=this.pendingRemovals_[o];for(delete this.pendingRemovals_[o];l--;)this.removeEventListener(o,ol.nullFunction);delete this.dispatching_[o]}return r}},ol.events.EventTarget.prototype.disposeInternal=function(){ol.events.unlistenAll(this)},ol.events.EventTarget.prototype.getListeners=function(e){return this.listeners_[e]},ol.events.EventTarget.prototype.hasListener=function(e){return e?e in this.listeners_:Object.keys(this.listeners_).length>0},ol.events.EventTarget.prototype.removeEventListener=function(e,t){var o=this.listeners_[e];if(o){var r=o.indexOf(t);e in this.pendingRemovals_?(o[r]=ol.nullFunction,++this.pendingRemovals_[e]):(o.splice(r,1),0===o.length&&delete this.listeners_[e])}},goog.provide("ol.events.EventType"),ol.events.EventType={CHANGE:"change",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"},goog.provide("ol.Observable"),goog.require("ol"),goog.require("ol.events"),goog.require("ol.events.EventTarget"),goog.require("ol.events.EventType"),ol.Observable=function(){ol.events.EventTarget.call(this),this.revision_=0},ol.inherits(ol.Observable,ol.events.EventTarget),ol.Observable.unByKey=function(e){if(Array.isArray(e))for(var t=0,o=e.length;t<o;++t)ol.events.unlistenByKey(e[t]);else ol.events.unlistenByKey(e)},ol.Observable.prototype.changed=function(){++this.revision_,this.dispatchEvent(ol.events.EventType.CHANGE)},ol.Observable.prototype.dispatchEvent,ol.Observable.prototype.getRevision=function(){return this.revision_},ol.Observable.prototype.on=function(e,t,o){if(Array.isArray(e)){for(var r=e.length,i=new Array(r),n=0;n<r;++n)i[n]=ol.events.listen(this,e[n],t,o);return i}return ol.events.listen(this,e,t,o)},ol.Observable.prototype.once=function(e,t,o){if(Array.isArray(e)){for(var r=e.length,i=new Array(r),n=0;n<r;++n)i[n]=ol.events.listenOnce(this,e[n],t,o);return i}return ol.events.listenOnce(this,e,t,o)},ol.Observable.prototype.un=function(e,t,o){if(Array.isArray(e))for(var r=0,i=e.length;r<i;++r)ol.events.unlisten(this,e[r],t,o);else ol.events.unlisten(this,e,t,o)},goog.provide("ol.Object"),goog.require("ol"),goog.require("ol.ObjectEventType"),goog.require("ol.Observable"),goog.require("ol.events.Event"),goog.require("ol.obj"),ol.Object=function(e){ol.Observable.call(this),ol.getUid(this),this.values_={},void 0!==e&&this.setProperties(e)},ol.inherits(ol.Object,ol.Observable),ol.Object.changeEventTypeCache_={},ol.Object.getChangeEventType=function(e){return ol.Object.changeEventTypeCache_.hasOwnProperty(e)?ol.Object.changeEventTypeCache_[e]:ol.Object.changeEventTypeCache_[e]="change:"+e},ol.Object.prototype.get=function(e){var t;return this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t},ol.Object.prototype.getKeys=function(){return Object.keys(this.values_)},ol.Object.prototype.getProperties=function(){return ol.obj.assign({},this.values_)},ol.Object.prototype.notify=function(e,t){var o;o=ol.Object.getChangeEventType(e),this.dispatchEvent(new ol.Object.Event(o,e,t)),o=ol.ObjectEventType.PROPERTYCHANGE,this.dispatchEvent(new ol.Object.Event(o,e,t))},ol.Object.prototype.set=function(e,t,o){if(o)this.values_[e]=t;else{var r=this.values_[e];this.values_[e]=t,r!==t&&this.notify(e,r)}},ol.Object.prototype.setProperties=function(e,t){var o;for(o in e)this.set(o,e[o],t)},ol.Object.prototype.unset=function(e,t){if(e in this.values_){var o=this.values_[e];delete this.values_[e],t||this.notify(e,o)}},ol.Object.Event=function(e,t,o){ol.events.Event.call(this,e),this.key=t,this.oldValue=o},ol.inherits(ol.Object.Event,ol.events.Event),goog.provide("ol.Collection"),goog.require("ol"),goog.require("ol.AssertionError"),goog.require("ol.CollectionEventType"),goog.require("ol.Object"),goog.require("ol.events.Event"),ol.Collection=function(e,t){ol.Object.call(this);var o=t||{};if(this.unique_=!!o.unique,this.array_=e?e:[],this.unique_)for(var r=0,i=this.array_.length;r<i;++r)this.assertUnique_(this.array_[r],r);this.updateLength_()},ol.inherits(ol.Collection,ol.Object),ol.Collection.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},ol.Collection.prototype.extend=function(e){var t,o;for(t=0,o=e.length;t<o;++t)this.push(e[t]);return this},ol.Collection.prototype.forEach=function(e,t){this.array_.forEach(e,t)},ol.Collection.prototype.getArray=function(){return this.array_},ol.Collection.prototype.item=function(e){return this.array_[e]},ol.Collection.prototype.getLength=function(){return this.get(ol.Collection.Property_.LENGTH)},ol.Collection.prototype.insertAt=function(e,t){this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new ol.Collection.Event(ol.CollectionEventType.ADD,t))},ol.Collection.prototype.pop=function(){return this.removeAt(this.getLength()-1)},ol.Collection.prototype.push=function(e){this.unique_&&this.assertUnique_(e);var t=this.getLength();return this.insertAt(t,e),this.getLength()},ol.Collection.prototype.remove=function(e){var t,o,r=this.array_;for(t=0,o=r.length;t<o;++t)if(r[t]===e)return this.removeAt(t)},ol.Collection.prototype.removeAt=function(e){var t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new ol.Collection.Event(ol.CollectionEventType.REMOVE,t)),t},ol.Collection.prototype.setAt=function(e,t){var o=this.getLength();if(e<o){this.unique_&&this.assertUnique_(t,e);var r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new ol.Collection.Event(ol.CollectionEventType.REMOVE,r)),this.dispatchEvent(new ol.Collection.Event(ol.CollectionEventType.ADD,t))}else{var i;for(i=o;i<e;++i)this.insertAt(i,void 0);this.insertAt(e,t)}},ol.Collection.prototype.updateLength_=function(){this.set(ol.Collection.Property_.LENGTH,this.array_.length)},ol.Collection.prototype.assertUnique_=function(e,t){for(var o=0,r=this.array_.length;o<r;++o)if(this.array_[o]===e&&o!==t)throw new ol.AssertionError(58)},ol.Collection.Property_={LENGTH:"length"},ol.Collection.Event=function(e,t){ol.events.Event.call(this,e),this.element=t},ol.inherits(ol.Collection.Event,ol.events.Event),goog.provide("ol.color"),goog.require("ol.asserts"),goog.require("ol.math"),ol.color.HEX_COLOR_RE_=/^#(?:[0-9a-f]{3}){1,2}$/i,ol.color.NAMED_COLOR_RE_=/^([a-z]*)$/i,ol.color.asArray=function(e){return Array.isArray(e)?e:ol.color.fromString(e)},ol.color.asString=function(e){return"string"==typeof e?e:ol.color.toString(e)},ol.color.fromNamed=function(e){var t=document.createElement("div");t.style.color=e,document.body.appendChild(t);var o=getComputedStyle(t).color;return document.body.removeChild(t),o},ol.color.fromString=function(){var e=1024,t={},o=0;return function(r){var i;if(t.hasOwnProperty(r))i=t[r];else{if(o>=e){var n,a=0;for(n in t)0===(3&a++)&&(delete t[n],--o)}i=ol.color.fromStringInternal_(r),t[r]=i,++o}return i}}(),ol.color.fromStringInternal_=function(e){var t,o,r,i,n,a;if(ol.color.NAMED_COLOR_RE_.exec(e)&&(e=ol.color.fromNamed(e)),ol.color.HEX_COLOR_RE_.exec(e)){var l=e.length-1;ol.asserts.assert(3==l||6==l,54);var s=3==l?1:2;t=parseInt(e.substr(1+0*s,s),16),o=parseInt(e.substr(1+1*s,s),16),r=parseInt(e.substr(1+2*s,s),16),1==s&&(t=(t<<4)+t,o=(o<<4)+o,r=(r<<4)+r),i=1,n=[t,o,r,i]}else 0==e.indexOf("rgba(")?(a=e.slice(5,-1).split(",").map(Number),n=ol.color.normalize(a)):0==e.indexOf("rgb(")?(a=e.slice(4,-1).split(",").map(Number),a.push(1),n=ol.color.normalize(a)):ol.asserts.assert(!1,14);return n},ol.color.normalize=function(e,t){var o=t||[];return o[0]=ol.math.clamp(e[0]+.5|0,0,255),o[1]=ol.math.clamp(e[1]+.5|0,0,255),o[2]=ol.math.clamp(e[2]+.5|0,0,255),o[3]=ol.math.clamp(e[3],0,1),o},ol.color.toString=function(e){var t=e[0];t!=(0|t)&&(t=t+.5|0);var o=e[1];o!=(0|o)&&(o=o+.5|0);var r=e[2];r!=(0|r)&&(r=r+.5|0);var i=void 0===e[3]?1:e[3];return"rgba("+t+","+o+","+r+","+i+")"},goog.provide("ol.colorlike"),goog.require("ol.color"),ol.colorlike.asColorLike=function(e){return ol.colorlike.isColorLike(e)?e:ol.color.asString(e)},ol.colorlike.isColorLike=function(e){return"string"==typeof e||e instanceof CanvasPattern||e instanceof CanvasGradient},goog.provide("ol.dom"),ol.dom.createCanvasContext2D=function(e,t){var o=document.createElement("CANVAS");return e&&(o.width=e),t&&(o.height=t),o.getContext("2d")},ol.dom.outerWidth=function(e){var t=e.offsetWidth,o=getComputedStyle(e);return t+=parseInt(o.marginLeft,10)+parseInt(o.marginRight,10)},ol.dom.outerHeight=function(e){var t=e.offsetHeight,o=getComputedStyle(e);return t+=parseInt(o.marginTop,10)+parseInt(o.marginBottom,10)},ol.dom.replaceNode=function(e,t){var o=t.parentNode;o&&o.replaceChild(e,t)},ol.dom.removeNode=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},ol.dom.removeChildren=function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},goog.provide("ol.MapEventType"),ol.MapEventType={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"},goog.provide("ol.control.Control"),goog.require("ol"),goog.require("ol.MapEventType"),goog.require("ol.Object"),goog.require("ol.dom"),goog.require("ol.events"),ol.control.Control=function(e){ol.Object.call(this),this.element=e.element?e.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=e.render?e.render:ol.nullFunction,e.target&&this.setTarget(e.target)},ol.inherits(ol.control.Control,ol.Object),ol.control.Control.prototype.disposeInternal=function(){ol.dom.removeNode(this.element),ol.Object.prototype.disposeInternal.call(this)},ol.control.Control.prototype.getMap=function(){return this.map_},ol.control.Control.prototype.setMap=function(e){this.map_&&ol.dom.removeNode(this.element);for(var t=0,o=this.listenerKeys.length;t<o;++t)ol.events.unlistenByKey(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=e,this.map_){var r=this.target_?this.target_:e.getOverlayContainerStopEvent();r.appendChild(this.element),this.render!==ol.nullFunction&&this.listenerKeys.push(ol.events.listen(e,ol.MapEventType.POSTRENDER,this.render,this)),e.render()}},ol.control.Control.prototype.setTarget=function(e){this.target_="string"==typeof e?document.getElementById(e):e},goog.provide("ol.css"),ol.css.CLASS_HIDDEN="ol-hidden",ol.css.CLASS_SELECTABLE="ol-selectable",ol.css.CLASS_UNSELECTABLE="ol-unselectable",ol.css.CLASS_UNSUPPORTED="ol-unsupported",ol.css.CLASS_CONTROL="ol-control",goog.provide("ol.control.Attribution"),goog.require("ol"),goog.require("ol.dom"),goog.require("ol.control.Control"),goog.require("ol.css"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.obj"),ol.control.Attribution=function(e){var t=e?e:{};this.ulElement_=document.createElement("UL"),this.logoLi_=document.createElement("LI"),this.ulElement_.appendChild(this.logoLi_),this.logoLi_.style.display="none",this.collapsed_=void 0===t.collapsed||t.collapsed,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);var o=void 0!==t.className?t.className:"ol-attribution",r=void 0!==t.tipLabel?t.tipLabel:"Attributions",i=void 0!==t.collapseLabel?t.collapseLabel:"»";"string"==typeof i?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=i):this.collapseLabel_=i;var n=void 0!==t.label?t.label:"i";"string"==typeof n?(this.label_=document.createElement("span"),this.label_.textContent=n):this.label_=n;var a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,l=document.createElement("button");l.setAttribute("type","button"),l.title=r,l.appendChild(a),ol.events.listen(l,ol.events.EventType.CLICK,this.handleClick_,this);var s=o+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible"),p=document.createElement("div");p.className=s,p.appendChild(this.ulElement_),p.appendChild(l);var g=t.render?t.render:ol.control.Attribution.render;ol.control.Control.call(this,{element:p,render:g,target:t.target}),this.renderedVisible_=!0,this.attributionElements_={},this.attributionElementRenderedVisible_={},this.logoElements_={}},ol.inherits(ol.control.Attribution,ol.control.Control),ol.control.Attribution.prototype.getSourceAttributions=function(e){var t,o,r,i,n,a,l,s,p,g,u,c=e.layerStatesArray,y=ol.obj.assign({},e.attributions),h={},d={},f=e.viewState.projection;for(t=0,o=c.length;t<o;t++)if(a=c[t].layer.getSource(),a&&(g=ol.getUid(a).toString(),p=a.getAttributions()))for(r=0,i=p.length;r<i;r++)if(l=p[r],s=ol.getUid(l).toString(),!(s in y)){if(n=e.usedTiles[g]){var m=a.getTileGridForProjection(f);u=l.intersectsAnyTileRange(n,m,f)}else u=!1;if(u){s in h&&delete h[s];var v=l.getHTML();v in d||(d[v]=!0,y[s]=l)}else h[s]=l}return[y,h]},ol.control.Attribution.render=function(e){this.updateElement_(e.frameState)},ol.control.Attribution.prototype.updateElement_=function(e){if(!e)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));var t,o,r=this.getSourceAttributions(e),i=r[0],n=r[1];for(o in this.attributionElements_)o in i?(this.attributionElementRenderedVisible_[o]||(this.attributionElements_[o].style.display="",this.attributionElementRenderedVisible_[o]=!0),delete i[o]):o in n?(this.attributionElementRenderedVisible_[o]&&(this.attributionElements_[o].style.display="none",delete this.attributionElementRenderedVisible_[o]),delete n[o]):(ol.dom.removeNode(this.attributionElements_[o]),delete this.attributionElements_[o],delete this.attributionElementRenderedVisible_[o]);for(o in i)t=document.createElement("LI"),t.innerHTML=i[o].getHTML(),this.ulElement_.appendChild(t),this.attributionElements_[o]=t,this.attributionElementRenderedVisible_[o]=!0;for(o in n)t=document.createElement("LI"),t.innerHTML=n[o].getHTML(),t.style.display="none",this.ulElement_.appendChild(t),this.attributionElements_[o]=t;var a=!ol.obj.isEmpty(this.attributionElementRenderedVisible_)||!ol.obj.isEmpty(e.logos);this.renderedVisible_!=a&&(this.element.style.display=a?"":"none",this.renderedVisible_=a),a&&ol.obj.isEmpty(this.attributionElementRenderedVisible_)?this.element.classList.add("ol-logo-only"):this.element.classList.remove("ol-logo-only"),this.insertLogos_(e)},ol.control.Attribution.prototype.insertLogos_=function(e){var t,o=e.logos,r=this.logoElements_;for(t in r)t in o||(ol.dom.removeNode(r[t]),delete r[t]);var i,n,a;for(a in o){var l=o[a];l instanceof HTMLElement&&(this.logoLi_.appendChild(l),r[a]=l),a in r||(i=new Image,i.src=a,""===l?n=i:(n=document.createElement("a"),n.href=l,n.appendChild(i)),this.logoLi_.appendChild(n),r[a]=n)}this.logoLi_.style.display=ol.obj.isEmpty(o)?"none":""},ol.control.Attribution.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_()},ol.control.Attribution.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?ol.dom.replaceNode(this.collapseLabel_,this.label_):ol.dom.replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},ol.control.Attribution.prototype.getCollapsible=function(){return this.collapsible_},ol.control.Attribution.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())},ol.control.Attribution.prototype.setCollapsed=function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},ol.control.Attribution.prototype.getCollapsed=function(){return this.collapsed_},goog.provide("ol.easing"),ol.easing.easeIn=function(e){return Math.pow(e,3)},ol.easing.easeOut=function(e){return 1-ol.easing.easeIn(1-e)},ol.easing.inAndOut=function(e){return 3*e*e-2*e*e*e},ol.easing.linear=function(e){return e},ol.easing.upAndDown=function(e){return e<.5?ol.easing.inAndOut(2*e):1-ol.easing.inAndOut(2*(e-.5))},goog.provide("ol.control.Rotate"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol"),goog.require("ol.control.Control");goog.require("ol.css");goog.require("ol.easing"),ol.control.Rotate=function(e){var t=e?e:{},o=void 0!==t.className?t.className:"ol-rotate",r=void 0!==t.label?t.label:"⇧";this.label_=null,"string"==typeof r?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=r):(this.label_=r,this.label_.classList.add("ol-compass"));var i=t.tipLabel?t.tipLabel:"Reset rotation",n=document.createElement("button");n.className=o+"-reset",n.setAttribute("type","button"),n.title=i,n.appendChild(this.label_),ol.events.listen(n,ol.events.EventType.CLICK,ol.control.Rotate.prototype.handleClick_,this);var a=o+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL,l=document.createElement("div");l.className=a,l.appendChild(n);var s=t.render?t.render:ol.control.Rotate.render;this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,ol.control.Control.call(this,{element:l,render:s,target:t.target}),this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(ol.css.CLASS_HIDDEN)},ol.inherits(ol.control.Rotate,ol.control.Control),ol.control.Rotate.prototype.handleClick_=function(e){e.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},ol.control.Rotate.prototype.resetNorth_=function(){var e=this.getMap(),t=e.getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:ol.easing.easeOut}):t.setRotation(0))},ol.control.Rotate.render=function(e){var t=e.frameState;if(t){var o=t.viewState.rotation;if(o!=this.rotation_){var r="rotate("+o+"rad)";if(this.autoHide_){var i=this.element.classList.contains(ol.css.CLASS_HIDDEN);i||0!==o?i&&0!==o&&this.element.classList.remove(ol.css.CLASS_HIDDEN):this.element.classList.add(ol.css.CLASS_HIDDEN)}this.label_.style.msTransform=r,this.label_.style.webkitTransform=r,this.label_.style.transform=r}this.rotation_=o}},goog.provide("ol.control.Zoom"),goog.require("ol"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.control.Control"),goog.require("ol.css"),goog.require("ol.easing"),ol.control.Zoom=function(e){var t=e?e:{},o=void 0!==t.className?t.className:"ol-zoom",r=void 0!==t.delta?t.delta:1,i=void 0!==t.zoomInLabel?t.zoomInLabel:"+",n=void 0!==t.zoomOutLabel?t.zoomOutLabel:"−",a=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",l=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",s=document.createElement("button");s.className=o+"-in",s.setAttribute("type","button"),s.title=a,s.appendChild("string"==typeof i?document.createTextNode(i):i),ol.events.listen(s,ol.events.EventType.CLICK,ol.control.Zoom.prototype.handleClick_.bind(this,r));var p=document.createElement("button");p.className=o+"-out",p.setAttribute("type","button"),p.title=l,p.appendChild("string"==typeof n?document.createTextNode(n):n),ol.events.listen(p,ol.events.EventType.CLICK,ol.control.Zoom.prototype.handleClick_.bind(this,-r));var g=o+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL,u=document.createElement("div");u.className=g,u.appendChild(s),u.appendChild(p),ol.control.Control.call(this,{element:u,target:t.target}),this.duration_=void 0!==t.duration?t.duration:250},ol.inherits(ol.control.Zoom,ol.control.Control),ol.control.Zoom.prototype.handleClick_=function(e,t){t.preventDefault(),this.zoomByDelta_(e)},ol.control.Zoom.prototype.zoomByDelta_=function(e){var t=this.getMap(),o=t.getView();if(o){var r=o.getResolution();if(r){var i=o.constrainResolution(r,e);this.duration_>0?(o.getAnimating()&&o.cancelAnimations(),o.animate({resolution:i,duration:this.duration_,easing:ol.easing.easeOut})):o.setResolution(i)}}},goog.provide("ol.control"),goog.require("ol.Collection"),goog.require("ol.control.Attribution"),goog.require("ol.control.Rotate"),goog.require("ol.control.Zoom"),ol.control.defaults=function(e){var t=e?e:{},o=new ol.Collection,r=void 0===t.zoom||t.zoom;r&&o.push(new ol.control.Zoom(t.zoomOptions));var i=void 0===t.rotate||t.rotate;i&&o.push(new ol.control.Rotate(t.rotateOptions));var n=void 0===t.attribution||t.attribution;return n&&o.push(new ol.control.Attribution(t.attributionOptions)),o},goog.provide("ol.control.FullScreen"),goog.require("ol"),goog.require("ol.control.Control"),goog.require("ol.css"),goog.require("ol.dom"),goog.require("ol.events"),goog.require("ol.events.EventType"),ol.control.FullScreen=function(e){var t=e?e:{};this.cssClassName_=void 0!==t.className?t.className:"ol-full-screen";var o=void 0!==t.label?t.label:"⤢";this.labelNode_="string"==typeof o?document.createTextNode(o):o;var r=void 0!==t.labelActive?t.labelActive:"×";this.labelActiveNode_="string"==typeof r?document.createTextNode(r):r;var i=t.tipLabel?t.tipLabel:"Toggle full-screen",n=document.createElement("button");n.className=this.cssClassName_+"-"+ol.control.FullScreen.isFullScreen(),n.setAttribute("type","button"),n.title=i,n.appendChild(this.labelNode_),ol.events.listen(n,ol.events.EventType.CLICK,this.handleClick_,this);var a=this.cssClassName_+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL+" "+(ol.control.FullScreen.isFullScreenSupported()?"":ol.css.CLASS_UNSUPPORTED),l=document.createElement("div");l.className=a,l.appendChild(n),ol.control.Control.call(this,{element:l,target:t.target}),this.keys_=void 0!==t.keys&&t.keys,this.source_=t.source},ol.inherits(ol.control.FullScreen,ol.control.Control),ol.control.FullScreen.prototype.handleClick_=function(e){e.preventDefault(),this.handleFullScreen_()},ol.control.FullScreen.prototype.handleFullScreen_=function(){if(ol.control.FullScreen.isFullScreenSupported()){var e=this.getMap();if(e)if(ol.control.FullScreen.isFullScreen())ol.control.FullScreen.exitFullScreen();else{var t;t=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:e.getTargetElement(),this.keys_?ol.control.FullScreen.requestFullScreenWithKeys(t):ol.control.FullScreen.requestFullScreen(t)}}},ol.control.FullScreen.prototype.handleFullScreenChange_=function(){var e=this.element.firstElementChild,t=this.getMap();ol.control.FullScreen.isFullScreen()?(e.className=this.cssClassName_+"-true",ol.dom.replaceNode(this.labelActiveNode_,this.labelNode_)):(e.className=this.cssClassName_+"-false",ol.dom.replaceNode(this.labelNode_,this.labelActiveNode_)),t&&t.updateSize()},ol.control.FullScreen.prototype.setMap=function(e){ol.control.Control.prototype.setMap.call(this,e),e&&this.listenerKeys.push(ol.events.listen(document,ol.control.FullScreen.getChangeType_(),this.handleFullScreenChange_,this))},ol.control.FullScreen.isFullScreenSupported=function(){var e=document.body;return!!(e.webkitRequestFullscreen||e.mozRequestFullScreen&&document.mozFullScreenEnabled||e.msRequestFullscreen&&document.msFullscreenEnabled||e.requestFullscreen&&document.fullscreenEnabled)},ol.control.FullScreen.isFullScreen=function(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},ol.control.FullScreen.requestFullScreen=function(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},ol.control.FullScreen.requestFullScreenWithKeys=function(e){e.mozRequestFullScreenWithKeys?e.mozRequestFullScreenWithKeys():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):ol.control.FullScreen.requestFullScreen(e)},ol.control.FullScreen.exitFullScreen=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},ol.control.FullScreen.getChangeType_=function(){var e;return function(){if(!e){var t=document.body;t.webkitRequestFullscreen?e="webkitfullscreenchange":t.mozRequestFullScreen?e="mozfullscreenchange":t.msRequestFullscreen?e="MSFullscreenChange":t.requestFullscreen&&(e="fullscreenchange")}return e}}(),goog.provide("ol.control.MousePosition"),goog.require("ol"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.Object"),goog.require("ol.control.Control"),goog.require("ol.proj"),ol.control.MousePosition=function(e){var t=e?e:{},o=document.createElement("DIV");o.className=void 0!==t.className?t.className:"ol-mouse-position";var r=t.render?t.render:ol.control.MousePosition.render;ol.control.Control.call(this,{element:o,render:r,target:t.target}),ol.events.listen(this,ol.Object.getChangeEventType(ol.control.MousePosition.Property_.PROJECTION),this.handleProjectionChanged_,this),t.coordinateFormat&&this.setCoordinateFormat(t.coordinateFormat),t.projection&&this.setProjection(t.projection),this.undefinedHTML_=void 0!==t.undefinedHTML?t.undefinedHTML:"",this.renderedHTML_=o.innerHTML,this.mapProjection_=null,this.transform_=null,this.lastMouseMovePixel_=null},ol.inherits(ol.control.MousePosition,ol.control.Control),ol.control.MousePosition.render=function(e){var t=e.frameState;t?this.mapProjection_!=t.viewState.projection&&(this.mapProjection_=t.viewState.projection,this.transform_=null):this.mapProjection_=null,this.updateHTML_(this.lastMouseMovePixel_)},ol.control.MousePosition.prototype.handleProjectionChanged_=function(){this.transform_=null},ol.control.MousePosition.prototype.getCoordinateFormat=function(){return this.get(ol.control.MousePosition.Property_.COORDINATE_FORMAT)},ol.control.MousePosition.prototype.getProjection=function(){return this.get(ol.control.MousePosition.Property_.PROJECTION)},ol.control.MousePosition.prototype.handleMouseMove=function(e){var t=this.getMap();this.lastMouseMovePixel_=t.getEventPixel(e),this.updateHTML_(this.lastMouseMovePixel_)},ol.control.MousePosition.prototype.handleMouseOut=function(e){this.updateHTML_(null),this.lastMouseMovePixel_=null},ol.control.MousePosition.prototype.setMap=function(e){if(ol.control.Control.prototype.setMap.call(this,e),e){var t=e.getViewport();this.listenerKeys.push(ol.events.listen(t,ol.events.EventType.MOUSEMOVE,this.handleMouseMove,this),ol.events.listen(t,ol.events.EventType.MOUSEOUT,this.handleMouseOut,this))}},ol.control.MousePosition.prototype.setCoordinateFormat=function(e){this.set(ol.control.MousePosition.Property_.COORDINATE_FORMAT,e)},ol.control.MousePosition.prototype.setProjection=function(e){this.set(ol.control.MousePosition.Property_.PROJECTION,ol.proj.get(e))},ol.control.MousePosition.prototype.updateHTML_=function(e){var t=this.undefinedHTML_;if(e&&this.mapProjection_){if(!this.transform_){var o=this.getProjection();o?this.transform_=ol.proj.getTransformFromProjections(this.mapProjection_,o):this.transform_=ol.proj.identityTransform}var r=this.getMap(),i=r.getCoordinateFromPixel(e);if(i){this.transform_(i,i);var n=this.getCoordinateFormat();t=n?n(i):i.toString()}}this.renderedHTML_&&t==this.renderedHTML_||(this.element.innerHTML=t,this.renderedHTML_=t)},ol.control.MousePosition.Property_={PROJECTION:"projection",COORDINATE_FORMAT:"coordinateFormat"},goog.provide("ol.MapEvent"),goog.require("ol"),goog.require("ol.events.Event"),ol.MapEvent=function(e,t,o){ol.events.Event.call(this,e),this.map=t,this.frameState=void 0!==o?o:null},ol.inherits(ol.MapEvent,ol.events.Event),goog.provide("ol.MapBrowserEvent"),goog.require("ol"),goog.require("ol.MapEvent"),ol.MapBrowserEvent=function(e,t,o,r,i){ol.MapEvent.call(this,e,t,i),this.originalEvent=o,this.pixel=t.getEventPixel(o),this.coordinate=t.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==r&&r},ol.inherits(ol.MapBrowserEvent,ol.MapEvent),ol.MapBrowserEvent.prototype.preventDefault=function(){ol.MapEvent.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},ol.MapBrowserEvent.prototype.stopPropagation=function(){ol.MapEvent.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},goog.provide("ol.webgl"),goog.require("ol"),ol.ENABLE_WEBGL&&(ol.webgl.ONE=1,ol.webgl.SRC_ALPHA=770,ol.webgl.COLOR_ATTACHMENT0=36064,ol.webgl.COLOR_BUFFER_BIT=16384,ol.webgl.TRIANGLES=4,ol.webgl.TRIANGLE_STRIP=5,ol.webgl.ONE_MINUS_SRC_ALPHA=771,ol.webgl.ARRAY_BUFFER=34962,ol.webgl.ELEMENT_ARRAY_BUFFER=34963,ol.webgl.STREAM_DRAW=35040,ol.webgl.STATIC_DRAW=35044,ol.webgl.DYNAMIC_DRAW=35048,ol.webgl.CULL_FACE=2884,ol.webgl.BLEND=3042,ol.webgl.STENCIL_TEST=2960,ol.webgl.DEPTH_TEST=2929,ol.webgl.SCISSOR_TEST=3089,ol.webgl.UNSIGNED_BYTE=5121,ol.webgl.UNSIGNED_SHORT=5123,ol.webgl.UNSIGNED_INT=5125,ol.webgl.FLOAT=5126,ol.webgl.RGBA=6408,ol.webgl.FRAGMENT_SHADER=35632,ol.webgl.VERTEX_SHADER=35633,ol.webgl.LINK_STATUS=35714,ol.webgl.LINEAR=9729,ol.webgl.TEXTURE_MAG_FILTER=10240,ol.webgl.TEXTURE_MIN_FILTER=10241,ol.webgl.TEXTURE_WRAP_S=10242,ol.webgl.TEXTURE_WRAP_T=10243,ol.webgl.TEXTURE_2D=3553,ol.webgl.TEXTURE0=33984,ol.webgl.CLAMP_TO_EDGE=33071,ol.webgl.COMPILE_STATUS=35713,ol.webgl.FRAMEBUFFER=36160,ol.webgl.CONTEXT_IDS_=["experimental-webgl","webgl","webkit-3d","moz-webgl"],ol.webgl.getContext=function(e,t){var o,r,i=ol.webgl.CONTEXT_IDS_.length;for(r=0;r<i;++r)try{if(o=e.getContext(ol.webgl.CONTEXT_IDS_[r],t))return o}catch(e){}return null}),goog.provide("ol.has"),goog.require("ol"),goog.require("ol.webgl");var ua="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"";ol.has.FIREFOX=ua.indexOf("firefox")!==-1,ol.has.SAFARI=ua.indexOf("safari")!==-1&&ua.indexOf("chrom")==-1,ol.has.WEBKIT=ua.indexOf("webkit")!==-1&&ua.indexOf("edge")==-1,ol.has.MAC=ua.indexOf("macintosh")!==-1,ol.has.DEVICE_PIXEL_RATIO=window.devicePixelRatio||1,ol.has.CANVAS_LINE_DASH=!1,ol.has.CANVAS=ol.ENABLE_CANVAS&&function(){if(!("HTMLCanvasElement"in window))return!1;try{var e=document.createElement("CANVAS").getContext("2d");return!!e&&(void 0!==e.setLineDash&&(ol.has.CANVAS_LINE_DASH=!0),!0)}catch(e){return!1}}(),ol.has.DEVICE_ORIENTATION="DeviceOrientationEvent"in window,ol.has.GEOLOCATION="geolocation"in navigator,ol.has.TOUCH=ol.ASSUME_TOUCH||"ontouchstart"in window,ol.has.POINTER="PointerEvent"in window,ol.has.MSPOINTER=!!navigator.msPointerEnabled,ol.has.WEBGL,function(){if(ol.ENABLE_WEBGL){var e,t=!1,o=[];if("WebGLRenderingContext"in window)try{var r=document.createElement("CANVAS"),i=ol.webgl.getContext(r,{
failIfMajorPerformanceCaveat:!0});i&&(t=!0,e=i.getParameter(i.MAX_TEXTURE_SIZE),o=i.getSupportedExtensions())}catch(e){}ol.has.WEBGL=t,ol.WEBGL_EXTENSIONS=o,ol.WEBGL_MAX_TEXTURE_SIZE=e}}(),goog.provide("ol.MapBrowserEventType"),goog.require("ol.events.EventType"),ol.MapBrowserEventType={SINGLECLICK:"singleclick",CLICK:ol.events.EventType.CLICK,DBLCLICK:ol.events.EventType.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},goog.provide("ol.MapBrowserPointerEvent"),goog.require("ol"),goog.require("ol.MapBrowserEvent"),ol.MapBrowserPointerEvent=function(e,t,o,r,i){ol.MapBrowserEvent.call(this,e,t,o.originalEvent,r,i),this.pointerEvent=o},ol.inherits(ol.MapBrowserPointerEvent,ol.MapBrowserEvent),goog.provide("ol.pointer.EventType"),ol.pointer.EventType={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},goog.provide("ol.pointer.EventSource"),ol.pointer.EventSource=function(e,t){this.dispatcher=e,this.mapping_=t},ol.pointer.EventSource.prototype.getEvents=function(){return Object.keys(this.mapping_)},ol.pointer.EventSource.prototype.getHandlerForEvent=function(e){return this.mapping_[e]},goog.provide("ol.pointer.MouseSource"),goog.require("ol"),goog.require("ol.pointer.EventSource"),ol.pointer.MouseSource=function(e){var t={mousedown:this.mousedown,mousemove:this.mousemove,mouseup:this.mouseup,mouseover:this.mouseover,mouseout:this.mouseout};ol.pointer.EventSource.call(this,e,t),this.pointerMap=e.pointerMap,this.lastTouches=[]},ol.inherits(ol.pointer.MouseSource,ol.pointer.EventSource),ol.pointer.MouseSource.POINTER_ID=1,ol.pointer.MouseSource.POINTER_TYPE="mouse",ol.pointer.MouseSource.DEDUP_DIST=25,ol.pointer.MouseSource.prototype.isEventSimulatedFromTouch_=function(e){for(var t,o=this.lastTouches,r=e.clientX,i=e.clientY,n=0,a=o.length;n<a&&(t=o[n]);n++){var l=Math.abs(r-t[0]),s=Math.abs(i-t[1]);if(l<=ol.pointer.MouseSource.DEDUP_DIST&&s<=ol.pointer.MouseSource.DEDUP_DIST)return!0}return!1},ol.pointer.MouseSource.prepareEvent=function(e,t){var o=t.cloneEvent(e,e),r=o.preventDefault;return o.preventDefault=function(){e.preventDefault(),r()},o.pointerId=ol.pointer.MouseSource.POINTER_ID,o.isPrimary=!0,o.pointerType=ol.pointer.MouseSource.POINTER_TYPE,o},ol.pointer.MouseSource.prototype.mousedown=function(e){if(!this.isEventSimulatedFromTouch_(e)){ol.pointer.MouseSource.POINTER_ID.toString()in this.pointerMap&&this.cancel(e);var t=ol.pointer.MouseSource.prepareEvent(e,this.dispatcher);this.pointerMap[ol.pointer.MouseSource.POINTER_ID.toString()]=e,this.dispatcher.down(t,e)}},ol.pointer.MouseSource.prototype.mousemove=function(e){if(!this.isEventSimulatedFromTouch_(e)){var t=ol.pointer.MouseSource.prepareEvent(e,this.dispatcher);this.dispatcher.move(t,e)}},ol.pointer.MouseSource.prototype.mouseup=function(e){if(!this.isEventSimulatedFromTouch_(e)){var t=this.pointerMap[ol.pointer.MouseSource.POINTER_ID.toString()];if(t&&t.button===e.button){var o=ol.pointer.MouseSource.prepareEvent(e,this.dispatcher);this.dispatcher.up(o,e),this.cleanupMouse()}}},ol.pointer.MouseSource.prototype.mouseover=function(e){if(!this.isEventSimulatedFromTouch_(e)){var t=ol.pointer.MouseSource.prepareEvent(e,this.dispatcher);this.dispatcher.enterOver(t,e)}},ol.pointer.MouseSource.prototype.mouseout=function(e){if(!this.isEventSimulatedFromTouch_(e)){var t=ol.pointer.MouseSource.prepareEvent(e,this.dispatcher);this.dispatcher.leaveOut(t,e)}},ol.pointer.MouseSource.prototype.cancel=function(e){var t=ol.pointer.MouseSource.prepareEvent(e,this.dispatcher);this.dispatcher.cancel(t,e),this.cleanupMouse()},ol.pointer.MouseSource.prototype.cleanupMouse=function(){delete this.pointerMap[ol.pointer.MouseSource.POINTER_ID.toString()]},goog.provide("ol.pointer.MsSource"),goog.require("ol"),goog.require("ol.pointer.EventSource"),ol.pointer.MsSource=function(e){var t={MSPointerDown:this.msPointerDown,MSPointerMove:this.msPointerMove,MSPointerUp:this.msPointerUp,MSPointerOut:this.msPointerOut,MSPointerOver:this.msPointerOver,MSPointerCancel:this.msPointerCancel,MSGotPointerCapture:this.msGotPointerCapture,MSLostPointerCapture:this.msLostPointerCapture};ol.pointer.EventSource.call(this,e,t),this.pointerMap=e.pointerMap,this.POINTER_TYPES=["","unavailable","touch","pen","mouse"]},ol.inherits(ol.pointer.MsSource,ol.pointer.EventSource),ol.pointer.MsSource.prototype.prepareEvent_=function(e){var t=e;return"number"==typeof e.pointerType&&(t=this.dispatcher.cloneEvent(e,e),t.pointerType=this.POINTER_TYPES[e.pointerType]),t},ol.pointer.MsSource.prototype.cleanup=function(e){delete this.pointerMap[e.toString()]},ol.pointer.MsSource.prototype.msPointerDown=function(e){this.pointerMap[e.pointerId.toString()]=e;var t=this.prepareEvent_(e);this.dispatcher.down(t,e)},ol.pointer.MsSource.prototype.msPointerMove=function(e){var t=this.prepareEvent_(e);this.dispatcher.move(t,e)},ol.pointer.MsSource.prototype.msPointerUp=function(e){var t=this.prepareEvent_(e);this.dispatcher.up(t,e),this.cleanup(e.pointerId)},ol.pointer.MsSource.prototype.msPointerOut=function(e){var t=this.prepareEvent_(e);this.dispatcher.leaveOut(t,e)},ol.pointer.MsSource.prototype.msPointerOver=function(e){var t=this.prepareEvent_(e);this.dispatcher.enterOver(t,e)},ol.pointer.MsSource.prototype.msPointerCancel=function(e){var t=this.prepareEvent_(e);this.dispatcher.cancel(t,e),this.cleanup(e.pointerId)},ol.pointer.MsSource.prototype.msLostPointerCapture=function(e){var t=this.dispatcher.makeEvent("lostpointercapture",e,e);this.dispatcher.dispatchEvent(t)},ol.pointer.MsSource.prototype.msGotPointerCapture=function(e){var t=this.dispatcher.makeEvent("gotpointercapture",e,e);this.dispatcher.dispatchEvent(t)},goog.provide("ol.pointer.NativeSource"),goog.require("ol"),goog.require("ol.pointer.EventSource"),ol.pointer.NativeSource=function(e){var t={pointerdown:this.pointerDown,pointermove:this.pointerMove,pointerup:this.pointerUp,pointerout:this.pointerOut,pointerover:this.pointerOver,pointercancel:this.pointerCancel,gotpointercapture:this.gotPointerCapture,lostpointercapture:this.lostPointerCapture};ol.pointer.EventSource.call(this,e,t)},ol.inherits(ol.pointer.NativeSource,ol.pointer.EventSource),ol.pointer.NativeSource.prototype.pointerDown=function(e){this.dispatcher.fireNativeEvent(e)},ol.pointer.NativeSource.prototype.pointerMove=function(e){this.dispatcher.fireNativeEvent(e)},ol.pointer.NativeSource.prototype.pointerUp=function(e){this.dispatcher.fireNativeEvent(e)},ol.pointer.NativeSource.prototype.pointerOut=function(e){this.dispatcher.fireNativeEvent(e)},ol.pointer.NativeSource.prototype.pointerOver=function(e){this.dispatcher.fireNativeEvent(e)},ol.pointer.NativeSource.prototype.pointerCancel=function(e){this.dispatcher.fireNativeEvent(e)},ol.pointer.NativeSource.prototype.lostPointerCapture=function(e){this.dispatcher.fireNativeEvent(e)},ol.pointer.NativeSource.prototype.gotPointerCapture=function(e){this.dispatcher.fireNativeEvent(e)},goog.provide("ol.pointer.PointerEvent"),goog.require("ol"),goog.require("ol.events.Event"),ol.pointer.PointerEvent=function(e,t,o){ol.events.Event.call(this,e),this.originalEvent=t;var r=o?o:{};this.buttons=this.getButtons_(r),this.pressure=this.getPressure_(r,this.buttons),this.bubbles="bubbles"in r&&r.bubbles,this.cancelable="cancelable"in r&&r.cancelable,this.view="view"in r?r.view:null,this.detail="detail"in r?r.detail:null,this.screenX="screenX"in r?r.screenX:0,this.screenY="screenY"in r?r.screenY:0,this.clientX="clientX"in r?r.clientX:0,this.clientY="clientY"in r?r.clientY:0,this.ctrlKey="ctrlKey"in r&&r.ctrlKey,this.altKey="altKey"in r&&r.altKey,this.shiftKey="shiftKey"in r&&r.shiftKey,this.metaKey="metaKey"in r&&r.metaKey,this.button="button"in r?r.button:0,this.relatedTarget="relatedTarget"in r?r.relatedTarget:null,this.pointerId="pointerId"in r?r.pointerId:0,this.width="width"in r?r.width:0,this.height="height"in r?r.height:0,this.tiltX="tiltX"in r?r.tiltX:0,this.tiltY="tiltY"in r?r.tiltY:0,this.pointerType="pointerType"in r?r.pointerType:"",this.hwTimestamp="hwTimestamp"in r?r.hwTimestamp:0,this.isPrimary="isPrimary"in r&&r.isPrimary,t.preventDefault&&(this.preventDefault=function(){t.preventDefault()})},ol.inherits(ol.pointer.PointerEvent,ol.events.Event),ol.pointer.PointerEvent.prototype.getButtons_=function(e){var t;if(e.buttons||ol.pointer.PointerEvent.HAS_BUTTONS)t=e.buttons;else switch(e.which){case 1:t=1;break;case 2:t=4;break;case 3:t=2;break;default:t=0}return t},ol.pointer.PointerEvent.prototype.getPressure_=function(e,t){var o=0;return o=e.pressure?e.pressure:t?.5:0},ol.pointer.PointerEvent.HAS_BUTTONS=!1,function(){try{var e=new MouseEvent("click",{buttons:1});ol.pointer.PointerEvent.HAS_BUTTONS=1===e.buttons}catch(e){}}(),goog.provide("ol.pointer.TouchSource"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.pointer.EventSource"),goog.require("ol.pointer.MouseSource"),ol.pointer.TouchSource=function(e,t){var o={touchstart:this.touchstart,touchmove:this.touchmove,touchend:this.touchend,touchcancel:this.touchcancel};ol.pointer.EventSource.call(this,e,o),this.pointerMap=e.pointerMap,this.mouseSource=t,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_=void 0},ol.inherits(ol.pointer.TouchSource,ol.pointer.EventSource),ol.pointer.TouchSource.DEDUP_TIMEOUT=2500,ol.pointer.TouchSource.CLICK_COUNT_TIMEOUT=200,ol.pointer.TouchSource.POINTER_TYPE="touch",ol.pointer.TouchSource.prototype.isPrimaryTouch_=function(e){return this.firstTouchId_===e.identifier},ol.pointer.TouchSource.prototype.setPrimaryTouch_=function(e){var t=Object.keys(this.pointerMap).length;(0===t||1===t&&ol.pointer.MouseSource.POINTER_ID.toString()in this.pointerMap)&&(this.firstTouchId_=e.identifier,this.cancelResetClickCount_())},ol.pointer.TouchSource.prototype.removePrimaryPointer_=function(e){e.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},ol.pointer.TouchSource.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),ol.pointer.TouchSource.CLICK_COUNT_TIMEOUT)},ol.pointer.TouchSource.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},ol.pointer.TouchSource.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},ol.pointer.TouchSource.prototype.touchToPointer_=function(e,t){var o=this.dispatcher.cloneEvent(e,t);return o.pointerId=t.identifier+2,o.bubbles=!0,o.cancelable=!0,o.detail=this.clickCount_,o.button=0,o.buttons=1,o.width=t.webkitRadiusX||t.radiusX||0,o.height=t.webkitRadiusY||t.radiusY||0,o.pressure=t.webkitForce||t.force||.5,o.isPrimary=this.isPrimaryTouch_(t),o.pointerType=ol.pointer.TouchSource.POINTER_TYPE,o.clientX=t.clientX,o.clientY=t.clientY,o.screenX=t.screenX,o.screenY=t.screenY,o},ol.pointer.TouchSource.prototype.processTouches_=function(e,t){function o(){e.preventDefault()}var r,i,n=Array.prototype.slice.call(e.changedTouches),a=n.length;for(r=0;r<a;++r)i=this.touchToPointer_(e,n[r]),i.preventDefault=o,t.call(this,e,i)},ol.pointer.TouchSource.prototype.findTouch_=function(e,t){for(var o,r=e.length,i=0;i<r;i++)if(o=e[i],o.identifier===t)return!0;return!1},ol.pointer.TouchSource.prototype.vacuumTouches_=function(e){var t=e.touches,o=Object.keys(this.pointerMap),r=o.length;if(r>=t.length){var i,n,a,l=[];for(i=0;i<r;++i)n=o[i],a=this.pointerMap[n],n==ol.pointer.MouseSource.POINTER_ID||this.findTouch_(t,n-2)||l.push(a.out);for(i=0;i<l.length;++i)this.cancelOut_(e,l[i])}},ol.pointer.TouchSource.prototype.touchstart=function(e){this.vacuumTouches_(e),this.setPrimaryTouch_(e.changedTouches[0]),this.dedupSynthMouse_(e),this.clickCount_++,this.processTouches_(e,this.overDown_)},ol.pointer.TouchSource.prototype.overDown_=function(e,t){this.pointerMap[t.pointerId]={target:t.target,out:t,outTarget:t.target},this.dispatcher.over(t,e),this.dispatcher.enter(t,e),this.dispatcher.down(t,e)},ol.pointer.TouchSource.prototype.touchmove=function(e){e.preventDefault(),this.processTouches_(e,this.moveOverOut_)},ol.pointer.TouchSource.prototype.moveOverOut_=function(e,t){var o=t,r=this.pointerMap[o.pointerId];if(r){var i=r.out,n=r.outTarget;this.dispatcher.move(o,e),i&&n!==o.target&&(i.relatedTarget=o.target,o.relatedTarget=n,i.target=n,o.target?(this.dispatcher.leaveOut(i,e),this.dispatcher.enterOver(o,e)):(o.target=n,o.relatedTarget=null,this.cancelOut_(e,o))),r.out=o,r.outTarget=o.target}},ol.pointer.TouchSource.prototype.touchend=function(e){this.dedupSynthMouse_(e),this.processTouches_(e,this.upOut_)},ol.pointer.TouchSource.prototype.upOut_=function(e,t){this.dispatcher.up(t,e),this.dispatcher.out(t,e),this.dispatcher.leave(t,e),this.cleanUpPointer_(t)},ol.pointer.TouchSource.prototype.touchcancel=function(e){this.processTouches_(e,this.cancelOut_)},ol.pointer.TouchSource.prototype.cancelOut_=function(e,t){this.dispatcher.cancel(t,e),this.dispatcher.out(t,e),this.dispatcher.leave(t,e),this.cleanUpPointer_(t)},ol.pointer.TouchSource.prototype.cleanUpPointer_=function(e){delete this.pointerMap[e.pointerId],this.removePrimaryPointer_(e)},ol.pointer.TouchSource.prototype.dedupSynthMouse_=function(e){var t=this.mouseSource.lastTouches,o=e.changedTouches[0];if(this.isPrimaryTouch_(o)){var r=[o.clientX,o.clientY];t.push(r),setTimeout(function(){ol.array.remove(t,r)},ol.pointer.TouchSource.DEDUP_TIMEOUT)}},goog.provide("ol.pointer.PointerEventHandler"),goog.require("ol"),goog.require("ol.events"),goog.require("ol.events.EventTarget"),goog.require("ol.has"),goog.require("ol.pointer.EventType"),goog.require("ol.pointer.MouseSource"),goog.require("ol.pointer.MsSource"),goog.require("ol.pointer.NativeSource"),goog.require("ol.pointer.PointerEvent"),goog.require("ol.pointer.TouchSource"),ol.pointer.PointerEventHandler=function(e){ol.events.EventTarget.call(this),this.element_=e,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()},ol.inherits(ol.pointer.PointerEventHandler,ol.events.EventTarget),ol.pointer.PointerEventHandler.prototype.registerSources=function(){if(ol.has.POINTER)this.registerSource("native",new ol.pointer.NativeSource(this));else if(ol.has.MSPOINTER)this.registerSource("ms",new ol.pointer.MsSource(this));else{var e=new ol.pointer.MouseSource(this);this.registerSource("mouse",e),ol.has.TOUCH&&this.registerSource("touch",new ol.pointer.TouchSource(this,e))}this.register_()},ol.pointer.PointerEventHandler.prototype.registerSource=function(e,t){var o=t,r=o.getEvents();r&&(r.forEach(function(e){var t=o.getHandlerForEvent(e);t&&(this.eventMap_[e]=t.bind(o))},this),this.eventSourceList_.push(o))},ol.pointer.PointerEventHandler.prototype.register_=function(){for(var e,t=this.eventSourceList_.length,o=0;o<t;o++)e=this.eventSourceList_[o],this.addEvents_(e.getEvents())},ol.pointer.PointerEventHandler.prototype.unregister_=function(){for(var e,t=this.eventSourceList_.length,o=0;o<t;o++)e=this.eventSourceList_[o],this.removeEvents_(e.getEvents())},ol.pointer.PointerEventHandler.prototype.eventHandler_=function(e){var t=e.type,o=this.eventMap_[t];o&&o(e)},ol.pointer.PointerEventHandler.prototype.addEvents_=function(e){e.forEach(function(e){ol.events.listen(this.element_,e,this.eventHandler_,this)},this)},ol.pointer.PointerEventHandler.prototype.removeEvents_=function(e){e.forEach(function(e){ol.events.unlisten(this.element_,e,this.eventHandler_,this)},this)},ol.pointer.PointerEventHandler.prototype.cloneEvent=function(e,t){for(var o,r={},i=0,n=ol.pointer.PointerEventHandler.CLONE_PROPS.length;i<n;i++)o=ol.pointer.PointerEventHandler.CLONE_PROPS[i][0],r[o]=e[o]||t[o]||ol.pointer.PointerEventHandler.CLONE_PROPS[i][1];return r},ol.pointer.PointerEventHandler.prototype.down=function(e,t){this.fireEvent(ol.pointer.EventType.POINTERDOWN,e,t)},ol.pointer.PointerEventHandler.prototype.move=function(e,t){this.fireEvent(ol.pointer.EventType.POINTERMOVE,e,t)},ol.pointer.PointerEventHandler.prototype.up=function(e,t){this.fireEvent(ol.pointer.EventType.POINTERUP,e,t)},ol.pointer.PointerEventHandler.prototype.enter=function(e,t){e.bubbles=!1,this.fireEvent(ol.pointer.EventType.POINTERENTER,e,t)},ol.pointer.PointerEventHandler.prototype.leave=function(e,t){e.bubbles=!1,this.fireEvent(ol.pointer.EventType.POINTERLEAVE,e,t)},ol.pointer.PointerEventHandler.prototype.over=function(e,t){e.bubbles=!0,this.fireEvent(ol.pointer.EventType.POINTEROVER,e,t)},ol.pointer.PointerEventHandler.prototype.out=function(e,t){e.bubbles=!0,this.fireEvent(ol.pointer.EventType.POINTEROUT,e,t)},ol.pointer.PointerEventHandler.prototype.cancel=function(e,t){this.fireEvent(ol.pointer.EventType.POINTERCANCEL,e,t)},ol.pointer.PointerEventHandler.prototype.leaveOut=function(e,t){this.out(e,t),this.contains_(e.target,e.relatedTarget)||this.leave(e,t)},ol.pointer.PointerEventHandler.prototype.enterOver=function(e,t){this.over(e,t),this.contains_(e.target,e.relatedTarget)||this.enter(e,t)},ol.pointer.PointerEventHandler.prototype.contains_=function(e,t){return!(!e||!t)&&e.contains(t)},ol.pointer.PointerEventHandler.prototype.makeEvent=function(e,t,o){return new ol.pointer.PointerEvent(e,o,t)},ol.pointer.PointerEventHandler.prototype.fireEvent=function(e,t,o){var r=this.makeEvent(e,t,o);this.dispatchEvent(r)},ol.pointer.PointerEventHandler.prototype.fireNativeEvent=function(e){var t=this.makeEvent(e.type,e,e);this.dispatchEvent(t)},ol.pointer.PointerEventHandler.prototype.wrapMouseEvent=function(e,t){var o=this.makeEvent(e,ol.pointer.MouseSource.prepareEvent(t,this),t);return o},ol.pointer.PointerEventHandler.prototype.disposeInternal=function(){this.unregister_(),ol.events.EventTarget.prototype.disposeInternal.call(this)},ol.pointer.PointerEventHandler.CLONE_PROPS=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],goog.provide("ol.MapBrowserEventHandler"),goog.require("ol"),goog.require("ol.has"),goog.require("ol.MapBrowserEventType"),goog.require("ol.MapBrowserPointerEvent"),goog.require("ol.events"),goog.require("ol.events.EventTarget"),goog.require("ol.pointer.EventType"),goog.require("ol.pointer.PointerEventHandler"),ol.MapBrowserEventHandler=function(e,t){ol.events.EventTarget.call(this),this.map_=e,this.clickTimeoutId_=0,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t?t*ol.has.DEVICE_PIXEL_RATIO:ol.has.DEVICE_PIXEL_RATIO,this.down_=null;var o=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new ol.pointer.PointerEventHandler(o),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=ol.events.listen(this.pointerEventHandler_,ol.pointer.EventType.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=ol.events.listen(this.pointerEventHandler_,ol.pointer.EventType.POINTERMOVE,this.relayEvent_,this)},ol.inherits(ol.MapBrowserEventHandler,ol.events.EventTarget),ol.MapBrowserEventHandler.prototype.emulateClick_=function(e){var t=new ol.MapBrowserPointerEvent(ol.MapBrowserEventType.CLICK,this.map_,e);this.dispatchEvent(t),0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=0,t=new ol.MapBrowserPointerEvent(ol.MapBrowserEventType.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=0;var t=new ol.MapBrowserPointerEvent(ol.MapBrowserEventType.SINGLECLICK,this.map_,e);this.dispatchEvent(t)}.bind(this),250)},ol.MapBrowserEventHandler.prototype.updateActivePointers_=function(e){var t=e;t.type==ol.MapBrowserEventType.POINTERUP||t.type==ol.MapBrowserEventType.POINTERCANCEL?delete this.trackedTouches_[t.pointerId]:t.type==ol.MapBrowserEventType.POINTERDOWN&&(this.trackedTouches_[t.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},ol.MapBrowserEventHandler.prototype.handlePointerUp_=function(e){this.updateActivePointers_(e);var t=new ol.MapBrowserPointerEvent(ol.MapBrowserEventType.POINTERUP,this.map_,e);this.dispatchEvent(t),!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(ol.events.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},ol.MapBrowserEventHandler.prototype.isMouseActionButton_=function(e){return 0===e.button},ol.MapBrowserEventHandler.prototype.handlePointerDown_=function(e){this.updateActivePointers_(e);var t=new ol.MapBrowserPointerEvent(ol.MapBrowserEventType.POINTERDOWN,this.map_,e);this.dispatchEvent(t),this.down_=e,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new ol.pointer.PointerEventHandler(document),this.dragListenerKeys_.push(ol.events.listen(this.documentPointerEventHandler_,ol.MapBrowserEventType.POINTERMOVE,this.handlePointerMove_,this),ol.events.listen(this.documentPointerEventHandler_,ol.MapBrowserEventType.POINTERUP,this.handlePointerUp_,this),ol.events.listen(this.pointerEventHandler_,ol.MapBrowserEventType.POINTERCANCEL,this.handlePointerUp_,this)))},ol.MapBrowserEventHandler.prototype.handlePointerMove_=function(e){if(this.isMoving_(e)){this.dragging_=!0;var t=new ol.MapBrowserPointerEvent(ol.MapBrowserEventType.POINTERDRAG,this.map_,e,this.dragging_);this.dispatchEvent(t)}e.preventDefault()},ol.MapBrowserEventHandler.prototype.relayEvent_=function(e){var t=!(!this.down_||!this.isMoving_(e));this.dispatchEvent(new ol.MapBrowserPointerEvent(e.type,this.map_,e,t))},ol.MapBrowserEventHandler.prototype.isMoving_=function(e){return Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_},ol.MapBrowserEventHandler.prototype.disposeInternal=function(){this.relayedListenerKey_&&(ol.events.unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(ol.events.unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ol.events.unlistenByKey),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),ol.events.EventTarget.prototype.disposeInternal.call(this)},goog.provide("ol.MapProperty"),ol.MapProperty={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},goog.provide("ol.TileState"),ol.TileState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5},goog.provide("ol.structs.PriorityQueue"),goog.require("ol.asserts"),goog.require("ol.obj"),ol.structs.PriorityQueue=function(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}},ol.structs.PriorityQueue.DROP=1/0,ol.structs.PriorityQueue.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,ol.obj.clear(this.queuedElements_)},ol.structs.PriorityQueue.prototype.dequeue=function(){var e=this.elements_,t=this.priorities_,o=e[0];1==e.length?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));var r=this.keyFunction_(o);return delete this.queuedElements_[r],o},ol.structs.PriorityQueue.prototype.enqueue=function(e){ol.asserts.assert(!(this.keyFunction_(e)in this.queuedElements_),31);var t=this.priorityFunction_(e);return t!=ol.structs.PriorityQueue.DROP&&(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},ol.structs.PriorityQueue.prototype.getCount=function(){return this.elements_.length},ol.structs.PriorityQueue.prototype.getLeftChildIndex_=function(e){return 2*e+1},ol.structs.PriorityQueue.prototype.getRightChildIndex_=function(e){return 2*e+2},ol.structs.PriorityQueue.prototype.getParentIndex_=function(e){return e-1>>1},ol.structs.PriorityQueue.prototype.heapify_=function(){var e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)},ol.structs.PriorityQueue.prototype.isEmpty=function(){return 0===this.elements_.length},ol.structs.PriorityQueue.prototype.isKeyQueued=function(e){return e in this.queuedElements_},ol.structs.PriorityQueue.prototype.isQueued=function(e){return this.isKeyQueued(this.keyFunction_(e))},ol.structs.PriorityQueue.prototype.siftUp_=function(e){for(var t=this.elements_,o=this.priorities_,r=t.length,i=t[e],n=o[e],a=e;e<r>>1;){var l=this.getLeftChildIndex_(e),s=this.getRightChildIndex_(e),p=s<r&&o[s]<o[l]?s:l;t[e]=t[p],o[e]=o[p],e=p}t[e]=i,o[e]=n,this.siftDown_(a,e)},ol.structs.PriorityQueue.prototype.siftDown_=function(e,t){for(var o=this.elements_,r=this.priorities_,i=o[t],n=r[t];t>e;){var a=this.getParentIndex_(t);if(!(r[a]>n))break;o[t]=o[a],r[t]=r[a],t=a}o[t]=i,r[t]=n},ol.structs.PriorityQueue.prototype.reprioritize=function(){var e,t,o,r=this.priorityFunction_,i=this.elements_,n=this.priorities_,a=0,l=i.length;for(t=0;t<l;++t)e=i[t],o=r(e),o==ol.structs.PriorityQueue.DROP?delete this.queuedElements_[this.keyFunction_(e)]:(n[a]=o,i[a++]=e);i.length=a,n.length=a,this.heapify_()},goog.provide("ol.TileQueue"),goog.require("ol"),goog.require("ol.TileState"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.structs.PriorityQueue"),ol.TileQueue=function(e,t){ol.structs.PriorityQueue.call(this,function(t){return e.apply(null,t)},function(e){return e[0].getKey()}),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}};ol.inherits(ol.TileQueue,ol.structs.PriorityQueue);ol.TileQueue.prototype.enqueue=function(e){var t=ol.structs.PriorityQueue.prototype.enqueue.call(this,e);if(t){var o=e[0];ol.events.listen(o,ol.events.EventType.CHANGE,this.handleTileChange,this)}return t},ol.TileQueue.prototype.getTilesLoading=function(){return this.tilesLoading_},ol.TileQueue.prototype.handleTileChange=function(e){var t=e.target,o=t.getState();if(o===ol.TileState.LOADED||o===ol.TileState.ERROR||o===ol.TileState.EMPTY||o===ol.TileState.ABORT){ol.events.unlisten(t,ol.events.EventType.CHANGE,this.handleTileChange,this);var r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}},ol.TileQueue.prototype.loadMoreTiles=function(e,t){for(var o,r,i=0;this.tilesLoading_<e&&i<t&&this.getCount()>0;)o=this.dequeue()[0],r=o.getKey(),o.getState()!==ol.TileState.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++i,o.load())},goog.provide("ol.ResolutionConstraint"),goog.require("ol.array"),goog.require("ol.math"),ol.ResolutionConstraint.createSnapToResolutions=function(e){return function(t,o,r){if(void 0!==t){var i=ol.array.linearFindNearest(e,t,r);i=ol.math.clamp(i+o,0,e.length-1);var n=Math.floor(i);if(i!=n&&n<e.length-1){var a=e[n]/e[n+1];return e[n]/Math.pow(a,i-n)}return e[n]}}},ol.ResolutionConstraint.createSnapToPower=function(e,t,o){return function(r,i,n){if(void 0!==r){var a=-n/2+.5,l=Math.floor(Math.log(t/r)/Math.log(e)+a),s=Math.max(l+i,0);return void 0!==o&&(s=Math.min(s,o)),t/Math.pow(e,s)}}},goog.provide("ol.RotationConstraint"),goog.require("ol.math"),ol.RotationConstraint.disable=function(e,t){return void 0!==e?0:void 0},ol.RotationConstraint.none=function(e,t){return void 0!==e?e+t:void 0},ol.RotationConstraint.createSnapToN=function(e){var t=2*Math.PI/e;return function(e,o){return void 0!==e?e=Math.floor((e+o)/t+.5)*t:void 0}},ol.RotationConstraint.createSnapToZero=function(e){var t=e||ol.math.toRadians(5);return function(e,o){return void 0!==e?Math.abs(e+o)<=t?0:e+o:void 0}},goog.provide("ol.ViewHint"),ol.ViewHint={ANIMATING:0,INTERACTING:1},goog.provide("ol.ViewProperty"),ol.ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"},goog.provide("ol.string"),ol.string.padNumber=function(e,t,o){var r=void 0!==o?e.toFixed(o):""+e,i=r.indexOf(".");return i=i===-1?r.length:i,i>t?r:new Array(1+t-i).join("0")+r},ol.string.compareVersions=function(e,t){for(var o=(""+e).split("."),r=(""+t).split("."),i=0;i<Math.max(o.length,r.length);i++){var n=parseInt(o[i]||"0",10),a=parseInt(r[i]||"0",10);if(n>a)return 1;if(a>n)return-1}return 0},goog.provide("ol.coordinate"),goog.require("ol.math"),goog.require("ol.string"),ol.coordinate.add=function(e,t){return e[0]+=t[0],e[1]+=t[1],e},ol.coordinate.closestOnCircle=function(e,t){var o=t.getRadius(),r=t.getCenter(),i=r[0],n=r[1],a=e[0],l=e[1],s=a-i,p=l-n;0===s&&0===p&&(s=1);var g,u,c=Math.sqrt(s*s+p*p);return g=i+o*s/c,u=n+o*p/c,[g,u]},ol.coordinate.closestOnSegment=function(e,t){var o,r,i=e[0],n=e[1],a=t[0],l=t[1],s=a[0],p=a[1],g=l[0],u=l[1],c=g-s,y=u-p,h=0===c&&0===y?0:(c*(i-s)+y*(n-p))/(c*c+y*y||0);return h<=0?(o=s,r=p):h>=1?(o=g,r=u):(o=s+h*c,r=p+h*y),[o,r]},ol.coordinate.createStringXY=function(e){return function(t){return ol.coordinate.toStringXY(t,e)}},ol.coordinate.degreesToStringHDMS=function(e,t,o){var r=ol.math.modulo(t+180,360)-180,i=Math.abs(3600*r),n=o||0,a=Math.pow(10,n),l=Math.floor(i/3600),s=Math.floor((i-3600*l)/60),p=i-3600*l-60*s;return p=Math.ceil(p*a)/a,p>=60&&(p=0,s+=1),s>=60&&(s=0,l+=1),l+"° "+ol.string.padNumber(s,2)+"′ "+ol.string.padNumber(p,2,n)+"″"+(0==r?"":" "+e.charAt(r<0?1:0))},ol.coordinate.format=function(e,t,o){return e?t.replace("{x}",e[0].toFixed(o)).replace("{y}",e[1].toFixed(o)):""},ol.coordinate.equals=function(e,t){for(var o=!0,r=e.length-1;r>=0;--r)if(e[r]!=t[r]){o=!1;break}return o},ol.coordinate.rotate=function(e,t){var o=Math.cos(t),r=Math.sin(t),i=e[0]*o-e[1]*r,n=e[1]*o+e[0]*r;return e[0]=i,e[1]=n,e},ol.coordinate.scale=function(e,t){return e[0]*=t,e[1]*=t,e},ol.coordinate.sub=function(e,t){return e[0]-=t[0],e[1]-=t[1],e},ol.coordinate.squaredDistance=function(e,t){var o=e[0]-t[0],r=e[1]-t[1];return o*o+r*r},ol.coordinate.distance=function(e,t){return Math.sqrt(ol.coordinate.squaredDistance(e,t))},ol.coordinate.squaredDistanceToSegment=function(e,t){return ol.coordinate.squaredDistance(e,ol.coordinate.closestOnSegment(e,t))},ol.coordinate.toStringHDMS=function(e,t){return e?ol.coordinate.degreesToStringHDMS("NS",e[1],t)+" "+ol.coordinate.degreesToStringHDMS("EW",e[0],t):""},ol.coordinate.toStringXY=function(e,t){return ol.coordinate.format(e,"{x}, {y}",t)},goog.provide("ol.geom.GeometryType"),ol.geom.GeometryType={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"},goog.provide("ol.geom.GeometryLayout"),ol.geom.GeometryLayout={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"},goog.provide("ol.functions"),ol.functions.TRUE=function(){return!0},ol.functions.FALSE=function(){return!1},goog.provide("ol.geom.Geometry"),goog.require("ol"),goog.require("ol.Object"),goog.require("ol.extent"),goog.require("ol.functions"),goog.require("ol.proj"),ol.geom.Geometry=function(){ol.Object.call(this),this.extent_=ol.extent.createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0},ol.inherits(ol.geom.Geometry,ol.Object),ol.geom.Geometry.prototype.clone=function(){},ol.geom.Geometry.prototype.closestPointXY=function(e,t,o,r){},ol.geom.Geometry.prototype.getClosestPoint=function(e,t){var o=t?t:[NaN,NaN];return this.closestPointXY(e[0],e[1],o,1/0),o},ol.geom.Geometry.prototype.intersectsCoordinate=function(e){return this.containsXY(e[0],e[1])},ol.geom.Geometry.prototype.computeExtent=function(e){},
ol.geom.Geometry.prototype.containsXY=ol.functions.FALSE,ol.geom.Geometry.prototype.getExtent=function(e){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),ol.extent.returnOrUpdate(this.extent_,e)},ol.geom.Geometry.prototype.rotate=function(e,t){},ol.geom.Geometry.prototype.scale=function(e,t,o){},ol.geom.Geometry.prototype.simplify=function(e){return this.getSimplifiedGeometry(e*e)},ol.geom.Geometry.prototype.getSimplifiedGeometry=function(e){},ol.geom.Geometry.prototype.getType=function(){},ol.geom.Geometry.prototype.applyTransform=function(e){},ol.geom.Geometry.prototype.intersectsExtent=function(e){},ol.geom.Geometry.prototype.translate=function(e,t){},ol.geom.Geometry.prototype.transform=function(e,t){return this.applyTransform(ol.proj.getTransform(e,t)),this},goog.provide("ol.geom.flat.transform"),ol.geom.flat.transform.transform2D=function(e,t,o,r,i,n){var a,l=n?n:[],s=0;for(a=t;a<o;a+=r){var p=e[a],g=e[a+1];l[s++]=i[0]*p+i[2]*g+i[4],l[s++]=i[1]*p+i[3]*g+i[5]}return n&&l.length!=s&&(l.length=s),l},ol.geom.flat.transform.rotate=function(e,t,o,r,i,n,a){for(var l=a?a:[],s=Math.cos(i),p=Math.sin(i),g=n[0],u=n[1],c=0,y=t;y<o;y+=r){var h=e[y]-g,d=e[y+1]-u;l[c++]=g+h*s-d*p,l[c++]=u+h*p+d*s;for(var f=y+2;f<y+r;++f)l[c++]=e[f]}return a&&l.length!=c&&(l.length=c),l},ol.geom.flat.transform.scale=function(e,t,o,r,i,n,a,l){for(var s=l?l:[],p=a[0],g=a[1],u=0,c=t;c<o;c+=r){var y=e[c]-p,h=e[c+1]-g;s[u++]=p+i*y,s[u++]=g+n*h;for(var d=c+2;d<c+r;++d)s[u++]=e[d]}return l&&s.length!=u&&(s.length=u),s},ol.geom.flat.transform.translate=function(e,t,o,r,i,n,a){var l,s,p=a?a:[],g=0;for(l=t;l<o;l+=r)for(p[g++]=e[l]+i,p[g++]=e[l+1]+n,s=l+2;s<l+r;++s)p[g++]=e[s];return a&&p.length!=g&&(p.length=g),p},goog.provide("ol.geom.SimpleGeometry"),goog.require("ol"),goog.require("ol.functions"),goog.require("ol.extent"),goog.require("ol.geom.Geometry"),goog.require("ol.geom.GeometryLayout"),goog.require("ol.geom.flat.transform"),goog.require("ol.obj"),ol.geom.SimpleGeometry=function(){ol.geom.Geometry.call(this),this.layout=ol.geom.GeometryLayout.XY,this.stride=2,this.flatCoordinates=null},ol.inherits(ol.geom.SimpleGeometry,ol.geom.Geometry),ol.geom.SimpleGeometry.getLayoutForStride_=function(e){var t;return 2==e?t=ol.geom.GeometryLayout.XY:3==e?t=ol.geom.GeometryLayout.XYZ:4==e&&(t=ol.geom.GeometryLayout.XYZM),t},ol.geom.SimpleGeometry.getStrideForLayout=function(e){var t;return e==ol.geom.GeometryLayout.XY?t=2:e==ol.geom.GeometryLayout.XYZ||e==ol.geom.GeometryLayout.XYM?t=3:e==ol.geom.GeometryLayout.XYZM&&(t=4),t},ol.geom.SimpleGeometry.prototype.containsXY=ol.functions.FALSE,ol.geom.SimpleGeometry.prototype.computeExtent=function(e){return ol.extent.createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)},ol.geom.SimpleGeometry.prototype.getCoordinates=function(){},ol.geom.SimpleGeometry.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},ol.geom.SimpleGeometry.prototype.getFlatCoordinates=function(){return this.flatCoordinates},ol.geom.SimpleGeometry.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},ol.geom.SimpleGeometry.prototype.getLayout=function(){return this.layout},ol.geom.SimpleGeometry.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!=this.getRevision()&&(ol.obj.clear(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var t=e.toString();if(this.simplifiedGeometryCache.hasOwnProperty(t))return this.simplifiedGeometryCache[t];var o=this.getSimplifiedGeometryInternal(e),r=o.getFlatCoordinates();return r.length<this.flatCoordinates.length?(this.simplifiedGeometryCache[t]=o,o):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)},ol.geom.SimpleGeometry.prototype.getSimplifiedGeometryInternal=function(e){return this},ol.geom.SimpleGeometry.prototype.getStride=function(){return this.stride},ol.geom.SimpleGeometry.prototype.setFlatCoordinatesInternal=function(e,t){this.stride=ol.geom.SimpleGeometry.getStrideForLayout(e),this.layout=e,this.flatCoordinates=t},ol.geom.SimpleGeometry.prototype.setCoordinates=function(e,t){},ol.geom.SimpleGeometry.prototype.setLayout=function(e,t,o){var r;if(e)r=ol.geom.SimpleGeometry.getStrideForLayout(e);else{var i;for(i=0;i<o;++i){if(0===t.length)return this.layout=ol.geom.GeometryLayout.XY,void(this.stride=2);t=t[0]}r=t.length,e=ol.geom.SimpleGeometry.getLayoutForStride_(r)}this.layout=e,this.stride=r},ol.geom.SimpleGeometry.prototype.applyTransform=function(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},ol.geom.SimpleGeometry.prototype.rotate=function(e,t){var o=this.getFlatCoordinates();if(o){var r=this.getStride();ol.geom.flat.transform.rotate(o,0,o.length,r,e,t,o),this.changed()}},ol.geom.SimpleGeometry.prototype.scale=function(e,t,o){var r=t;void 0===r&&(r=e);var i=o;i||(i=ol.extent.getCenter(this.getExtent()));var n=this.getFlatCoordinates();if(n){var a=this.getStride();ol.geom.flat.transform.scale(n,0,n.length,a,e,r,i,n),this.changed()}},ol.geom.SimpleGeometry.prototype.translate=function(e,t){var o=this.getFlatCoordinates();if(o){var r=this.getStride();ol.geom.flat.transform.translate(o,0,o.length,r,e,t,o),this.changed()}},ol.geom.SimpleGeometry.transform2D=function(e,t,o){var r=e.getFlatCoordinates();if(r){var i=e.getStride();return ol.geom.flat.transform.transform2D(r,0,r.length,i,t,o)}return null},goog.provide("ol.geom.flat.area"),ol.geom.flat.area.linearRing=function(e,t,o,r){for(var i=0,n=e[o-r],a=e[o-r+1];t<o;t+=r){var l=e[t],s=e[t+1];i+=a*l-n*s,n=l,a=s}return i/2},ol.geom.flat.area.linearRings=function(e,t,o,r){var i,n,a=0;for(i=0,n=o.length;i<n;++i){var l=o[i];a+=ol.geom.flat.area.linearRing(e,t,l,r),t=l}return a},ol.geom.flat.area.linearRingss=function(e,t,o,r){var i,n,a=0;for(i=0,n=o.length;i<n;++i){var l=o[i];a+=ol.geom.flat.area.linearRings(e,t,l,r),t=l[l.length-1]}return a},goog.provide("ol.geom.flat.closest"),goog.require("ol.math"),ol.geom.flat.closest.point=function(e,t,o,r,i,n,a){var l,s,p=e[t],g=e[t+1],u=e[o]-p,c=e[o+1]-g;if(0===u&&0===c)s=t;else{var y=((i-p)*u+(n-g)*c)/(u*u+c*c);if(y>1)s=o;else{if(y>0){for(l=0;l<r;++l)a[l]=ol.math.lerp(e[t+l],e[o+l],y);return void(a.length=r)}s=t}}for(l=0;l<r;++l)a[l]=e[s+l];a.length=r},ol.geom.flat.closest.getMaxSquaredDelta=function(e,t,o,r,i){var n=e[t],a=e[t+1];for(t+=r;t<o;t+=r){var l=e[t],s=e[t+1],p=ol.math.squaredDistance(n,a,l,s);p>i&&(i=p),n=l,a=s}return i},ol.geom.flat.closest.getsMaxSquaredDelta=function(e,t,o,r,i){var n,a;for(n=0,a=o.length;n<a;++n){var l=o[n];i=ol.geom.flat.closest.getMaxSquaredDelta(e,t,l,r,i),t=l}return i},ol.geom.flat.closest.getssMaxSquaredDelta=function(e,t,o,r,i){var n,a;for(n=0,a=o.length;n<a;++n){var l=o[n];i=ol.geom.flat.closest.getsMaxSquaredDelta(e,t,l,r,i),t=l[l.length-1]}return i},ol.geom.flat.closest.getClosestPoint=function(e,t,o,r,i,n,a,l,s,p,g){if(t==o)return p;var u,c;if(0===i){if(c=ol.math.squaredDistance(a,l,e[t],e[t+1]),c<p){for(u=0;u<r;++u)s[u]=e[t+u];return s.length=r,c}return p}for(var y=g?g:[NaN,NaN],h=t+r;h<o;)if(ol.geom.flat.closest.point(e,h-r,h,r,a,l,y),c=ol.math.squaredDistance(a,l,y[0],y[1]),c<p){for(p=c,u=0;u<r;++u)s[u]=y[u];s.length=r,h+=r}else h+=r*Math.max((Math.sqrt(c)-Math.sqrt(p))/i|0,1);if(n&&(ol.geom.flat.closest.point(e,o-r,t,r,a,l,y),c=ol.math.squaredDistance(a,l,y[0],y[1]),c<p)){for(p=c,u=0;u<r;++u)s[u]=y[u];s.length=r}return p},ol.geom.flat.closest.getsClosestPoint=function(e,t,o,r,i,n,a,l,s,p,g){var u,c,y=g?g:[NaN,NaN];for(u=0,c=o.length;u<c;++u){var h=o[u];p=ol.geom.flat.closest.getClosestPoint(e,t,h,r,i,n,a,l,s,p,y),t=h}return p},ol.geom.flat.closest.getssClosestPoint=function(e,t,o,r,i,n,a,l,s,p,g){var u,c,y=g?g:[NaN,NaN];for(u=0,c=o.length;u<c;++u){var h=o[u];p=ol.geom.flat.closest.getsClosestPoint(e,t,h,r,i,n,a,l,s,p,y),t=h[h.length-1]}return p},goog.provide("ol.geom.flat.deflate"),ol.geom.flat.deflate.coordinate=function(e,t,o,r){var i,n;for(i=0,n=o.length;i<n;++i)e[t++]=o[i];return t},ol.geom.flat.deflate.coordinates=function(e,t,o,r){var i,n;for(i=0,n=o.length;i<n;++i){var a,l=o[i];for(a=0;a<r;++a)e[t++]=l[a]}return t},ol.geom.flat.deflate.coordinatess=function(e,t,o,r,i){var n,a,l=i?i:[],s=0;for(n=0,a=o.length;n<a;++n){var p=ol.geom.flat.deflate.coordinates(e,t,o[n],r);l[s++]=p,t=p}return l.length=s,l},ol.geom.flat.deflate.coordinatesss=function(e,t,o,r,i){var n,a,l=i?i:[],s=0;for(n=0,a=o.length;n<a;++n){var p=ol.geom.flat.deflate.coordinatess(e,t,o[n],r,l[s]);l[s++]=p,t=p[p.length-1]}return l.length=s,l},goog.provide("ol.geom.flat.inflate"),ol.geom.flat.inflate.coordinates=function(e,t,o,r,i){var n,a=void 0!==i?i:[],l=0;for(n=t;n<o;n+=r)a[l++]=e.slice(n,n+r);return a.length=l,a},ol.geom.flat.inflate.coordinatess=function(e,t,o,r,i){var n,a,l=void 0!==i?i:[],s=0;for(n=0,a=o.length;n<a;++n){var p=o[n];l[s++]=ol.geom.flat.inflate.coordinates(e,t,p,r,l[s]),t=p}return l.length=s,l},ol.geom.flat.inflate.coordinatesss=function(e,t,o,r,i){var n,a,l=void 0!==i?i:[],s=0;for(n=0,a=o.length;n<a;++n){var p=o[n];l[s++]=ol.geom.flat.inflate.coordinatess(e,t,p,r,l[s]),t=p[p.length-1]}return l.length=s,l},goog.provide("ol.geom.flat.simplify"),goog.require("ol.math"),ol.geom.flat.simplify.lineString=function(e,t,o,r,i,n,a){var l=void 0!==a?a:[];return n||(o=ol.geom.flat.simplify.radialDistance(e,t,o,r,i,l,0),e=l,t=0,r=2),l.length=ol.geom.flat.simplify.douglasPeucker(e,t,o,r,i,l,0),l},ol.geom.flat.simplify.douglasPeucker=function(e,t,o,r,i,n,a){var l=(o-t)/r;if(l<3){for(;t<o;t+=r)n[a++]=e[t],n[a++]=e[t+1];return a}var s=new Array(l);s[0]=1,s[l-1]=1;for(var p,g=[t,o-r],u=0;g.length>0;){var c=g.pop(),y=g.pop(),h=0,d=e[y],f=e[y+1],m=e[c],v=e[c+1];for(p=y+r;p<c;p+=r){var _=e[p],S=e[p+1],x=ol.math.squaredSegmentDistance(_,S,d,f,m,v);x>h&&(u=p,h=x)}h>i&&(s[(u-t)/r]=1,y+r<u&&g.push(y,u),u+r<c&&g.push(u,c))}for(p=0;p<l;++p)s[p]&&(n[a++]=e[t+p*r],n[a++]=e[t+p*r+1]);return a},ol.geom.flat.simplify.douglasPeuckers=function(e,t,o,r,i,n,a,l){var s,p;for(s=0,p=o.length;s<p;++s){var g=o[s];a=ol.geom.flat.simplify.douglasPeucker(e,t,g,r,i,n,a),l.push(a),t=g}return a},ol.geom.flat.simplify.douglasPeuckerss=function(e,t,o,r,i,n,a,l){var s,p;for(s=0,p=o.length;s<p;++s){var g=o[s],u=[];a=ol.geom.flat.simplify.douglasPeuckers(e,t,g,r,i,n,a,u),l.push(u),t=g[g.length-1]}return a},ol.geom.flat.simplify.radialDistance=function(e,t,o,r,i,n,a){if(o<=t+r){for(;t<o;t+=r)n[a++]=e[t],n[a++]=e[t+1];return a}var l=e[t],s=e[t+1];n[a++]=l,n[a++]=s;var p=l,g=s;for(t+=r;t<o;t+=r)p=e[t],g=e[t+1],ol.math.squaredDistance(l,s,p,g)>i&&(n[a++]=p,n[a++]=g,l=p,s=g);return p==l&&g==s||(n[a++]=p,n[a++]=g),a},ol.geom.flat.simplify.snap=function(e,t){return t*Math.round(e/t)},ol.geom.flat.simplify.quantize=function(e,t,o,r,i,n,a){if(t==o)return a;var l=ol.geom.flat.simplify.snap(e[t],i),s=ol.geom.flat.simplify.snap(e[t+1],i);t+=r,n[a++]=l,n[a++]=s;var p,g;do if(p=ol.geom.flat.simplify.snap(e[t],i),g=ol.geom.flat.simplify.snap(e[t+1],i),t+=r,t==o)return n[a++]=p,n[a++]=g,a;while(p==l&&g==s);for(;t<o;){var u,c;if(u=ol.geom.flat.simplify.snap(e[t],i),c=ol.geom.flat.simplify.snap(e[t+1],i),t+=r,u!=p||c!=g){var y=p-l,h=g-s,d=u-l,f=c-s;y*f==h*d&&(y<0&&d<y||y==d||y>0&&d>y)&&(h<0&&f<h||h==f||h>0&&f>h)?(p=u,g=c):(n[a++]=p,n[a++]=g,l=p,s=g,p=u,g=c)}}return n[a++]=p,n[a++]=g,a},ol.geom.flat.simplify.quantizes=function(e,t,o,r,i,n,a,l){var s,p;for(s=0,p=o.length;s<p;++s){var g=o[s];a=ol.geom.flat.simplify.quantize(e,t,g,r,i,n,a),l.push(a),t=g}return a},ol.geom.flat.simplify.quantizess=function(e,t,o,r,i,n,a,l){var s,p;for(s=0,p=o.length;s<p;++s){var g=o[s],u=[];a=ol.geom.flat.simplify.quantizes(e,t,g,r,i,n,a,u),l.push(u),t=g[g.length-1]}return a},goog.provide("ol.geom.LinearRing"),goog.require("ol"),goog.require("ol.extent"),goog.require("ol.geom.GeometryLayout"),goog.require("ol.geom.GeometryType"),goog.require("ol.geom.SimpleGeometry"),goog.require("ol.geom.flat.area"),goog.require("ol.geom.flat.closest"),goog.require("ol.geom.flat.deflate"),goog.require("ol.geom.flat.inflate"),goog.require("ol.geom.flat.simplify"),ol.geom.LinearRing=function(e,t){ol.geom.SimpleGeometry.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(e,t)},ol.inherits(ol.geom.LinearRing,ol.geom.SimpleGeometry),ol.geom.LinearRing.prototype.clone=function(){var e=new ol.geom.LinearRing(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),e},ol.geom.LinearRing.prototype.closestPointXY=function(e,t,o,r){return r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ol.geom.flat.closest.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,o,r))},ol.geom.LinearRing.prototype.getArea=function(){return ol.geom.flat.area.linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},ol.geom.LinearRing.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},ol.geom.LinearRing.prototype.getSimplifiedGeometryInternal=function(e){var t=[];t.length=ol.geom.flat.simplify.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0);var o=new ol.geom.LinearRing(null);return o.setFlatCoordinates(ol.geom.GeometryLayout.XY,t),o},ol.geom.LinearRing.prototype.getType=function(){return ol.geom.GeometryType.LINEAR_RING},ol.geom.LinearRing.prototype.intersectsExtent=function(e){},ol.geom.LinearRing.prototype.setCoordinates=function(e,t){e?(this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ol.geom.flat.deflate.coordinates(this.flatCoordinates,0,e,this.stride),this.changed()):this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)},ol.geom.LinearRing.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t),this.changed()},goog.provide("ol.geom.Point"),goog.require("ol"),goog.require("ol.extent"),goog.require("ol.geom.GeometryLayout"),goog.require("ol.geom.GeometryType"),goog.require("ol.geom.SimpleGeometry"),goog.require("ol.geom.flat.deflate"),goog.require("ol.math"),ol.geom.Point=function(e,t){ol.geom.SimpleGeometry.call(this),this.setCoordinates(e,t)},ol.inherits(ol.geom.Point,ol.geom.SimpleGeometry),ol.geom.Point.prototype.clone=function(){var e=new ol.geom.Point(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),e},ol.geom.Point.prototype.closestPointXY=function(e,t,o,r){var i=this.flatCoordinates,n=ol.math.squaredDistance(e,t,i[0],i[1]);if(n<r){var a,l=this.stride;for(a=0;a<l;++a)o[a]=i[a];return o.length=l,n}return r},ol.geom.Point.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},ol.geom.Point.prototype.computeExtent=function(e){return ol.extent.createOrUpdateFromCoordinate(this.flatCoordinates,e)},ol.geom.Point.prototype.getType=function(){return ol.geom.GeometryType.POINT},ol.geom.Point.prototype.intersectsExtent=function(e){return ol.extent.containsXY(e,this.flatCoordinates[0],this.flatCoordinates[1])},ol.geom.Point.prototype.setCoordinates=function(e,t){e?(this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ol.geom.flat.deflate.coordinate(this.flatCoordinates,0,e,this.stride),this.changed()):this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)},ol.geom.Point.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t),this.changed()},goog.provide("ol.geom.flat.contains"),goog.require("ol.extent"),ol.geom.flat.contains.linearRingContainsExtent=function(e,t,o,r,i){var n=ol.extent.forEachCorner(i,function(i){return!ol.geom.flat.contains.linearRingContainsXY(e,t,o,r,i[0],i[1])});return!n},ol.geom.flat.contains.linearRingContainsXY=function(e,t,o,r,i,n){for(var a=0,l=e[o-r],s=e[o-r+1];t<o;t+=r){var p=e[t],g=e[t+1];s<=n?g>n&&(p-l)*(n-s)-(i-l)*(g-s)>0&&a++:g<=n&&(p-l)*(n-s)-(i-l)*(g-s)<0&&a--,l=p,s=g}return 0!==a},ol.geom.flat.contains.linearRingsContainsXY=function(e,t,o,r,i,n){if(0===o.length)return!1;if(!ol.geom.flat.contains.linearRingContainsXY(e,t,o[0],r,i,n))return!1;var a,l;for(a=1,l=o.length;a<l;++a)if(ol.geom.flat.contains.linearRingContainsXY(e,o[a-1],o[a],r,i,n))return!1;return!0},ol.geom.flat.contains.linearRingssContainsXY=function(e,t,o,r,i,n){if(0===o.length)return!1;var a,l;for(a=0,l=o.length;a<l;++a){var s=o[a];if(ol.geom.flat.contains.linearRingsContainsXY(e,t,s,r,i,n))return!0;t=s[s.length-1]}return!1},goog.provide("ol.geom.flat.interiorpoint"),goog.require("ol.array"),goog.require("ol.geom.flat.contains"),ol.geom.flat.interiorpoint.linearRings=function(e,t,o,r,i,n,a){var l,s,p,g,u,c,y,h=i[n+1],d=[],f=o[0];for(g=e[f-r],c=e[f-r+1],l=t;l<f;l+=r)u=e[l],y=e[l+1],(h<=c&&y<=h||c<=h&&h<=y)&&(p=(h-c)/(y-c)*(u-g)+g,d.push(p)),g=u,c=y;var m=NaN,v=-(1/0);for(d.sort(ol.array.numberSafeCompareFunction),g=d[0],l=1,s=d.length;l<s;++l){u=d[l];var _=Math.abs(u-g);_>v&&(p=(g+u)/2,ol.geom.flat.contains.linearRingsContainsXY(e,t,o,r,p,h)&&(m=p,v=_)),g=u}return isNaN(m)&&(m=i[n]),a?(a.push(m,h),a):[m,h]},ol.geom.flat.interiorpoint.linearRingss=function(e,t,o,r,i){var n,a,l=[];for(n=0,a=o.length;n<a;++n){var s=o[n];l=ol.geom.flat.interiorpoint.linearRings(e,t,s,r,i,2*n,l),t=s[s.length-1]}return l},goog.provide("ol.geom.flat.segments"),ol.geom.flat.segments.forEach=function(e,t,o,r,i,n){for(var a,l=[e[t],e[t+1]],s=[];t+r<o;t+=r){if(s[0]=e[t+r],s[1]=e[t+r+1],a=i.call(n,l,s))return a;l[0]=s[0],l[1]=s[1]}return!1},goog.provide("ol.geom.flat.intersectsextent"),goog.require("ol.extent"),goog.require("ol.geom.flat.contains"),goog.require("ol.geom.flat.segments"),ol.geom.flat.intersectsextent.lineString=function(e,t,o,r,i){var n=ol.extent.extendFlatCoordinates(ol.extent.createEmpty(),e,t,o,r);return!!ol.extent.intersects(i,n)&&(!!ol.extent.containsExtent(i,n)||(n[0]>=i[0]&&n[2]<=i[2]||(n[1]>=i[1]&&n[3]<=i[3]||ol.geom.flat.segments.forEach(e,t,o,r,function(e,t){return ol.extent.intersectsSegment(i,e,t)}))))},ol.geom.flat.intersectsextent.lineStrings=function(e,t,o,r,i){var n,a;for(n=0,a=o.length;n<a;++n){if(ol.geom.flat.intersectsextent.lineString(e,t,o[n],r,i))return!0;t=o[n]}return!1},ol.geom.flat.intersectsextent.linearRing=function(e,t,o,r,i){return!!ol.geom.flat.intersectsextent.lineString(e,t,o,r,i)||(!!ol.geom.flat.contains.linearRingContainsXY(e,t,o,r,i[0],i[1])||(!!ol.geom.flat.contains.linearRingContainsXY(e,t,o,r,i[0],i[3])||(!!ol.geom.flat.contains.linearRingContainsXY(e,t,o,r,i[2],i[1])||!!ol.geom.flat.contains.linearRingContainsXY(e,t,o,r,i[2],i[3]))))},ol.geom.flat.intersectsextent.linearRings=function(e,t,o,r,i){if(!ol.geom.flat.intersectsextent.linearRing(e,t,o[0],r,i))return!1;if(1===o.length)return!0;var n,a;for(n=1,a=o.length;n<a;++n)if(ol.geom.flat.contains.linearRingContainsExtent(e,o[n-1],o[n],r,i))return!1;return!0};ol.geom.flat.intersectsextent.linearRingss=function(e,t,o,r,i){var n,a;for(n=0,a=o.length;n<a;++n){var l=o[n];if(ol.geom.flat.intersectsextent.linearRings(e,t,l,r,i))return!0;t=l[l.length-1]}return!1};goog.provide("ol.geom.flat.reverse"),ol.geom.flat.reverse.coordinates=function(e,t,o,r){for(;t<o-r;){var i;for(i=0;i<r;++i){var n=e[t+i];e[t+i]=e[o-r+i],e[o-r+i]=n}t+=r,o-=r}},goog.provide("ol.geom.flat.orient"),goog.require("ol.geom.flat.reverse"),ol.geom.flat.orient.linearRingIsClockwise=function(e,t,o,r){for(var i=0,n=e[o-r],a=e[o-r+1];t<o;t+=r){var l=e[t],s=e[t+1];i+=(l-n)*(s+a),n=l,a=s}return i>0},ol.geom.flat.orient.linearRingsAreOriented=function(e,t,o,r,i){var n,a,l=void 0!==i&&i;for(n=0,a=o.length;n<a;++n){var s=o[n],p=ol.geom.flat.orient.linearRingIsClockwise(e,t,s,r);if(0===n){if(l&&p||!l&&!p)return!1}else if(l&&!p||!l&&p)return!1;t=s}return!0},ol.geom.flat.orient.linearRingssAreOriented=function(e,t,o,r,i){var n,a;for(n=0,a=o.length;n<a;++n)if(!ol.geom.flat.orient.linearRingsAreOriented(e,t,o[n],r,i))return!1;return!0},ol.geom.flat.orient.orientLinearRings=function(e,t,o,r,i){var n,a,l=void 0!==i&&i;for(n=0,a=o.length;n<a;++n){var s=o[n],p=ol.geom.flat.orient.linearRingIsClockwise(e,t,s,r),g=0===n?l&&p||!l&&!p:l&&!p||!l&&p;g&&ol.geom.flat.reverse.coordinates(e,t,s,r),t=s}return t},ol.geom.flat.orient.orientLinearRingss=function(e,t,o,r,i){var n,a;for(n=0,a=o.length;n<a;++n)t=ol.geom.flat.orient.orientLinearRings(e,t,o[n],r,i);return t},goog.provide("ol.geom.Polygon"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.extent"),goog.require("ol.geom.GeometryLayout"),goog.require("ol.geom.GeometryType"),goog.require("ol.geom.LinearRing"),goog.require("ol.geom.Point"),goog.require("ol.geom.SimpleGeometry"),goog.require("ol.geom.flat.area"),goog.require("ol.geom.flat.closest"),goog.require("ol.geom.flat.contains"),goog.require("ol.geom.flat.deflate"),goog.require("ol.geom.flat.inflate"),goog.require("ol.geom.flat.interiorpoint"),goog.require("ol.geom.flat.intersectsextent"),goog.require("ol.geom.flat.orient"),goog.require("ol.geom.flat.simplify"),goog.require("ol.math"),ol.geom.Polygon=function(e,t){ol.geom.SimpleGeometry.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(e,t)},ol.inherits(ol.geom.Polygon,ol.geom.SimpleGeometry),ol.geom.Polygon.prototype.appendLinearRing=function(e){this.flatCoordinates?ol.array.extend(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},ol.geom.Polygon.prototype.clone=function(){var e=new ol.geom.Polygon(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),e},ol.geom.Polygon.prototype.closestPointXY=function(e,t,o,r){return r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ol.geom.flat.closest.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,o,r))},ol.geom.Polygon.prototype.containsXY=function(e,t){return ol.geom.flat.contains.linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)},ol.geom.Polygon.prototype.getArea=function(){return ol.geom.flat.area.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},ol.geom.Polygon.prototype.getCoordinates=function(e){var t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),ol.geom.flat.orient.orientLinearRings(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,ol.geom.flat.inflate.coordinatess(t,0,this.ends_,this.stride)},ol.geom.Polygon.prototype.getEnds=function(){return this.ends_},ol.geom.Polygon.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var e=ol.extent.getCenter(this.getExtent());this.flatInteriorPoint_=ol.geom.flat.interiorpoint.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},ol.geom.Polygon.prototype.getInteriorPoint=function(){return new ol.geom.Point(this.getFlatInteriorPoint())},ol.geom.Polygon.prototype.getLinearRingCount=function(){return this.ends_.length},ol.geom.Polygon.prototype.getLinearRing=function(e){if(e<0||this.ends_.length<=e)return null;var t=new ol.geom.LinearRing(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e])),t},ol.geom.Polygon.prototype.getLinearRings=function(){var e,t,o=this.layout,r=this.flatCoordinates,i=this.ends_,n=[],a=0;for(e=0,t=i.length;e<t;++e){var l=i[e],s=new ol.geom.LinearRing(null);s.setFlatCoordinates(o,r.slice(a,l)),n.push(s),a=l}return n},ol.geom.Polygon.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;ol.geom.flat.orient.linearRingsAreOriented(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=ol.geom.flat.orient.orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},ol.geom.Polygon.prototype.getSimplifiedGeometryInternal=function(e){var t=[],o=[];t.length=ol.geom.flat.simplify.quantizes(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,o);var r=new ol.geom.Polygon(null);return r.setFlatCoordinates(ol.geom.GeometryLayout.XY,t,o),r},ol.geom.Polygon.prototype.getType=function(){return ol.geom.GeometryType.POLYGON},ol.geom.Polygon.prototype.intersectsExtent=function(e){return ol.geom.flat.intersectsextent.linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)},ol.geom.Polygon.prototype.setCoordinates=function(e,t){if(e){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);var o=ol.geom.flat.deflate.coordinatess(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===o.length?0:o[o.length-1],this.changed()}else this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null,this.ends_)},ol.geom.Polygon.prototype.setFlatCoordinates=function(e,t,o){this.setFlatCoordinatesInternal(e,t),this.ends_=o,this.changed()},ol.geom.Polygon.circular=function(e,t,o,r){var i,n=r?r:32,a=[];for(i=0;i<n;++i)ol.array.extend(a,e.offset(t,o,2*Math.PI*i/n));a.push(a[0],a[1]);var l=new ol.geom.Polygon(null);return l.setFlatCoordinates(ol.geom.GeometryLayout.XY,a,[a.length]),l},ol.geom.Polygon.fromExtent=function(e){var t=e[0],o=e[1],r=e[2],i=e[3],n=[t,o,t,i,r,i,r,o,t,o],a=new ol.geom.Polygon(null);return a.setFlatCoordinates(ol.geom.GeometryLayout.XY,n,[n.length]),a},ol.geom.Polygon.fromCircle=function(e,t,o){for(var r=t?t:32,i=e.getStride(),n=e.getLayout(),a=new ol.geom.Polygon(null,n),l=i*(r+1),s=new Array(l),p=0;p<l;p++)s[p]=0;var g=[s.length];return a.setFlatCoordinates(n,s,g),ol.geom.Polygon.makeRegular(a,e.getCenter(),e.getRadius(),o),a},ol.geom.Polygon.makeRegular=function(e,t,o,r){for(var i,n,a=e.getFlatCoordinates(),l=e.getLayout(),s=e.getStride(),p=e.getEnds(),g=a.length/s-1,u=r?r:0,c=0;c<=g;++c)n=c*s,i=u+2*ol.math.modulo(c,g)*Math.PI/g,a[n]=t[0]+o*Math.cos(i),a[n+1]=t[1]+o*Math.sin(i);e.setFlatCoordinates(l,a,p)},goog.provide("ol.View"),goog.require("ol"),goog.require("ol.CenterConstraint"),goog.require("ol.Object"),goog.require("ol.ResolutionConstraint"),goog.require("ol.RotationConstraint"),goog.require("ol.ViewHint"),goog.require("ol.ViewProperty"),goog.require("ol.array"),goog.require("ol.asserts"),goog.require("ol.coordinate"),goog.require("ol.easing"),goog.require("ol.extent"),goog.require("ol.geom.GeometryType"),goog.require("ol.geom.Polygon"),goog.require("ol.geom.SimpleGeometry"),goog.require("ol.obj"),goog.require("ol.proj"),goog.require("ol.proj.Units"),ol.View=function(e){ol.Object.call(this);var t=ol.obj.assign({},e);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=ol.proj.createProjection(t.projection,"EPSG:3857"),this.applyOptions_(t)},ol.inherits(ol.View,ol.Object),ol.View.prototype.applyOptions_=function(e){var t={};t[ol.ViewProperty.CENTER]=void 0!==e.center?e.center:null;var o=ol.View.createResolutionConstraint_(e);this.maxResolution_=o.maxResolution,this.minResolution_=o.minResolution,this.zoomFactor_=o.zoomFactor,this.resolutions_=e.resolutions,this.minZoom_=o.minZoom;var r=ol.View.createCenterConstraint_(e),i=o.constraint,n=ol.View.createRotationConstraint_(e);this.constraints_={center:r,resolution:i,rotation:n},void 0!==e.resolution?t[ol.ViewProperty.RESOLUTION]=e.resolution:void 0!==e.zoom&&(t[ol.ViewProperty.RESOLUTION]=this.constrainResolution(this.maxResolution_,e.zoom-this.minZoom_)),t[ol.ViewProperty.ROTATION]=void 0!==e.rotation?e.rotation:0,this.setProperties(t),this.options_=e},ol.View.prototype.getUpdatedOptions_=function(e){var t=ol.obj.assign({},this.options_);return void 0!==t.resolution?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenter(),t.rotation=this.getRotation(),ol.obj.assign({},t,e)},ol.View.prototype.animate=function(e){var t,o=Date.now(),r=this.getCenter().slice(),i=this.getResolution(),n=this.getRotation(),a=arguments.length;a>1&&"function"==typeof arguments[a-1]&&(t=arguments[a-1],--a);for(var l=[],s=0;s<a;++s){var p=arguments[s],g={start:o,complete:!1,anchor:p.anchor,duration:void 0!==p.duration?p.duration:1e3,easing:p.easing||ol.easing.inAndOut};p.center&&(g.sourceCenter=r,g.targetCenter=p.center,r=g.targetCenter),void 0!==p.zoom?(g.sourceResolution=i,g.targetResolution=this.constrainResolution(this.maxResolution_,p.zoom-this.minZoom_,0),i=g.targetResolution):p.resolution&&(g.sourceResolution=i,g.targetResolution=p.resolution,i=g.targetResolution),void 0!==p.rotation&&(g.sourceRotation=n,g.targetRotation=p.rotation,n=g.targetRotation),g.callback=t,o+=g.duration,l.push(g)}this.animations_.push(l),this.setHint(ol.ViewHint.ANIMATING,1),this.updateAnimations_()},ol.View.prototype.getAnimating=function(){return this.getHints()[ol.ViewHint.ANIMATING]>0},ol.View.prototype.getInteracting=function(){return this.getHints()[ol.ViewHint.INTERACTING]>0},ol.View.prototype.cancelAnimations=function(){this.setHint(ol.ViewHint.ANIMATING,-this.getHints()[ol.ViewHint.ANIMATING]);for(var e=0,t=this.animations_.length;e<t;++e){var o=this.animations_[e];o[0].callback&&o[0].callback(!1)}this.animations_.length=0},ol.View.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var e=Date.now(),t=!1,o=this.animations_.length-1;o>=0;--o){for(var r=this.animations_[o],i=!0,n=0,a=r.length;n<a;++n){var l=r[n];if(!l.complete){var s=e-l.start,p=l.duration>0?s/l.duration:1;p>=1?(l.complete=!0,p=1):i=!1;var g=l.easing(p);if(l.sourceCenter){var u=l.sourceCenter[0],c=l.sourceCenter[1],y=l.targetCenter[0],h=l.targetCenter[1],d=u+g*(y-u),f=c+g*(h-c);this.set(ol.ViewProperty.CENTER,[d,f])}if(l.sourceResolution&&l.targetResolution){var m=1===g?l.targetResolution:l.sourceResolution+g*(l.targetResolution-l.sourceResolution);l.anchor&&this.set(ol.ViewProperty.CENTER,this.calculateCenterZoom(m,l.anchor)),this.set(ol.ViewProperty.RESOLUTION,m)}if(void 0!==l.sourceRotation&&void 0!==l.targetRotation){var v=1===g?l.targetRotation:l.sourceRotation+g*(l.targetRotation-l.sourceRotation);l.anchor&&this.set(ol.ViewProperty.CENTER,this.calculateCenterRotate(v,l.anchor)),this.set(ol.ViewProperty.ROTATION,v)}if(t=!0,!l.complete)break}}if(i){this.animations_[o]=null,this.setHint(ol.ViewHint.ANIMATING,-1);var _=r[0].callback;_&&_(!0)}}this.animations_=this.animations_.filter(Boolean),t&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},ol.View.prototype.calculateCenterRotate=function(e,t){var o,r=this.getCenter();return void 0!==r&&(o=[r[0]-t[0],r[1]-t[1]],ol.coordinate.rotate(o,e-this.getRotation()),ol.coordinate.add(o,t)),o},ol.View.prototype.calculateCenterZoom=function(e,t){var o,r=this.getCenter(),i=this.getResolution();if(void 0!==r&&void 0!==i){var n=t[0]-e*(t[0]-r[0])/i,a=t[1]-e*(t[1]-r[1])/i;o=[n,a]}return o},ol.View.prototype.getSizeFromViewport_=function(){var e=[100,100],t='.ol-viewport[data-view="'+ol.getUid(this)+'"]',o=document.querySelector(t);if(o){var r=getComputedStyle(o);e[0]=parseInt(r.width,10),
e[1]=parseInt(r.height,10)}return e},ol.View.prototype.constrainCenter=function(e){return this.constraints_.center(e)},ol.View.prototype.constrainResolution=function(e,t,o){var r=t||0,i=o||0;return this.constraints_.resolution(e,r,i)},ol.View.prototype.constrainRotation=function(e,t){var o=t||0;return this.constraints_.rotation(e,o)},ol.View.prototype.getCenter=function(){return this.get(ol.ViewProperty.CENTER)},ol.View.prototype.getConstraints=function(){return this.constraints_},ol.View.prototype.getHints=function(e){return void 0!==e?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()},ol.View.prototype.calculateExtent=function(e){var t=e||this.getSizeFromViewport_(),o=this.getCenter();ol.asserts.assert(o,1);var r=this.getResolution();ol.asserts.assert(void 0!==r,2);var i=this.getRotation();return ol.asserts.assert(void 0!==i,3),ol.extent.getForViewAndSize(o,r,i,t)},ol.View.prototype.getMaxResolution=function(){return this.maxResolution_},ol.View.prototype.getMinResolution=function(){return this.minResolution_},ol.View.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},ol.View.prototype.setMaxZoom=function(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))},ol.View.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},ol.View.prototype.setMinZoom=function(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))},ol.View.prototype.getProjection=function(){return this.projection_},ol.View.prototype.getResolution=function(){return this.get(ol.ViewProperty.RESOLUTION)},ol.View.prototype.getResolutions=function(){return this.resolutions_},ol.View.prototype.getResolutionForExtent=function(e,t){var o=t||this.getSizeFromViewport_(),r=ol.extent.getWidth(e)/o[0],i=ol.extent.getHeight(e)/o[1];return Math.max(r,i)},ol.View.prototype.getResolutionForValueFunction=function(e){var t=e||2,o=this.maxResolution_,r=this.minResolution_,i=Math.log(o/r)/Math.log(t);return function(e){var r=o/Math.pow(t,e*i);return r}},ol.View.prototype.getRotation=function(){return this.get(ol.ViewProperty.ROTATION)},ol.View.prototype.getValueForResolutionFunction=function(e){var t=e||2,o=this.maxResolution_,r=this.minResolution_,i=Math.log(o/r)/Math.log(t);return function(e){var r=Math.log(o/e)/Math.log(t)/i;return r}},ol.View.prototype.getState=function(){var e=this.getCenter(),t=this.getProjection(),o=this.getResolution(),r=this.getRotation();return{center:e.slice(),projection:void 0!==t?t:null,resolution:o,rotation:r}},ol.View.prototype.getZoom=function(){var e,t=this.getResolution();return void 0!==t&&(e=this.getZoomForResolution(t)),e},ol.View.prototype.getZoomForResolution=function(e){var t;if(e>=this.minResolution_&&e<=this.maxResolution_){var o,r,i=this.minZoom_||0;if(this.resolutions_){var n=ol.array.linearFindNearest(this.resolutions_,e,1);if(i+=n,n==this.resolutions_.length-1)return i;o=this.resolutions_[n],r=o/this.resolutions_[n+1]}else o=this.maxResolution_,r=this.zoomFactor_;t=i+Math.log(o/e)/Math.log(r)}return t},ol.View.prototype.fit=function(e,t){var o=t||{},r=o.size;r||(r=this.getSizeFromViewport_());var i;e instanceof ol.geom.SimpleGeometry?e.getType()===ol.geom.GeometryType.CIRCLE?(e=e.getExtent(),i=ol.geom.Polygon.fromExtent(e),i.rotate(this.getRotation(),ol.extent.getCenter(e))):i=e:(ol.asserts.assert(Array.isArray(e),24),ol.asserts.assert(!ol.extent.isEmpty(e),25),i=ol.geom.Polygon.fromExtent(e));var n,a=void 0!==o.padding?o.padding:[0,0,0,0],l=void 0===o.constrainResolution||o.constrainResolution,s=void 0!==o.nearest&&o.nearest;n=void 0!==o.minResolution?o.minResolution:void 0!==o.maxZoom?this.constrainResolution(this.maxResolution_,o.maxZoom-this.minZoom_,0):0;for(var p=i.getFlatCoordinates(),g=this.getRotation(),u=Math.cos(-g),c=Math.sin(-g),y=+(1/0),h=+(1/0),d=-(1/0),f=-(1/0),m=i.getStride(),v=0,_=p.length;v<_;v+=m){var S=p[v]*u-p[v+1]*c,x=p[v]*c+p[v+1]*u;y=Math.min(y,S),h=Math.min(h,x),d=Math.max(d,S),f=Math.max(f,x)}var E=this.getResolutionForExtent([y,h,d,f],[r[0]-a[1]-a[3],r[1]-a[0]-a[2]]);if(E=isNaN(E)?n:Math.max(E,n),l){var P=this.constrainResolution(E,0,0);!s&&P<E&&(P=this.constrainResolution(P,-1,0)),E=P}c=-c;var T=(y+d)/2,R=(h+f)/2;T+=(a[1]-a[3])/2*E,R+=(a[0]-a[2])/2*E;var L=T*u-R*c,M=R*u+T*c,C=[L,M],b=o.callback?o.callback:ol.nullFunction;void 0!==o.duration?this.animate({resolution:E,center:C,duration:o.duration,easing:o.easing},b):(this.setResolution(E),this.setCenter(C),setTimeout(b.bind(void 0,!0),0))},ol.View.prototype.centerOn=function(e,t,o){var r=this.getRotation(),i=Math.cos(-r),n=Math.sin(-r),a=e[0]*i-e[1]*n,l=e[1]*i+e[0]*n,s=this.getResolution();a+=(t[0]/2-o[0])*s,l+=(o[1]-t[1]/2)*s,n=-n;var p=a*i-l*n,g=l*i+a*n;this.setCenter([p,g])},ol.View.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},ol.View.prototype.rotate=function(e,t){if(void 0!==t){var o=this.calculateCenterRotate(e,t);this.setCenter(o)}this.setRotation(e)},ol.View.prototype.setCenter=function(e){this.set(ol.ViewProperty.CENTER,e),this.getAnimating()&&this.cancelAnimations()},ol.View.prototype.setHint=function(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]},ol.View.prototype.setResolution=function(e){this.set(ol.ViewProperty.RESOLUTION,e),this.getAnimating()&&this.cancelAnimations()},ol.View.prototype.setRotation=function(e){this.set(ol.ViewProperty.ROTATION,e),this.getAnimating()&&this.cancelAnimations()},ol.View.prototype.setZoom=function(e){var t=this.constrainResolution(this.maxResolution_,e-this.minZoom_,0);this.setResolution(t)},ol.View.createCenterConstraint_=function(e){return void 0!==e.extent?ol.CenterConstraint.createExtent(e.extent):ol.CenterConstraint.none},ol.View.createResolutionConstraint_=function(e){var t,o,r,i=28,n=2,a=void 0!==e.minZoom?e.minZoom:ol.DEFAULT_MIN_ZOOM,l=void 0!==e.maxZoom?e.maxZoom:i,s=void 0!==e.zoomFactor?e.zoomFactor:n;if(void 0!==e.resolutions){var p=e.resolutions;o=p[0],r=p[p.length-1],t=ol.ResolutionConstraint.createSnapToResolutions(p)}else{var g=ol.proj.createProjection(e.projection,"EPSG:3857"),u=g.getExtent(),c=u?Math.max(ol.extent.getWidth(u),ol.extent.getHeight(u)):360*ol.proj.METERS_PER_UNIT[ol.proj.Units.DEGREES]/g.getMetersPerUnit(),y=c/ol.DEFAULT_TILE_SIZE/Math.pow(n,ol.DEFAULT_MIN_ZOOM),h=y/Math.pow(n,i-ol.DEFAULT_MIN_ZOOM);o=e.maxResolution,void 0!==o?a=0:o=y/Math.pow(s,a),r=e.minResolution,void 0===r&&(r=void 0!==e.maxZoom?void 0!==e.maxResolution?o/Math.pow(s,l):y/Math.pow(s,l):h),l=a+Math.floor(Math.log(o/r)/Math.log(s)),r=o/Math.pow(s,l-a),t=ol.ResolutionConstraint.createSnapToPower(s,o,l-a)}return{constraint:t,maxResolution:o,minResolution:r,minZoom:a,zoomFactor:s}},ol.View.createRotationConstraint_=function(e){var t=void 0===e.enableRotation||e.enableRotation;if(t){var o=e.constrainRotation;return void 0===o||o===!0?ol.RotationConstraint.createSnapToZero():o===!1?ol.RotationConstraint.none:"number"==typeof o?ol.RotationConstraint.createSnapToN(o):ol.RotationConstraint.none}return ol.RotationConstraint.disable},goog.provide("ol.Kinetic"),ol.Kinetic=function(e,t,o){this.decay_=e,this.minVelocity_=t,this.delay_=o,this.points_=[],this.angle_=0,this.initialVelocity_=0},ol.Kinetic.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},ol.Kinetic.prototype.update=function(e,t){this.points_.push(e,t,Date.now())},ol.Kinetic.prototype.end=function(){if(this.points_.length<6)return!1;var e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;for(var o=t-3;o>0&&this.points_[o+2]>e;)o-=3;var r=this.points_[t+2]-this.points_[o+2];if(r<1e3/60)return!1;var i=this.points_[t]-this.points_[o],n=this.points_[t+1]-this.points_[o+1];return this.angle_=Math.atan2(n,i),this.initialVelocity_=Math.sqrt(i*i+n*n)/r,this.initialVelocity_>this.minVelocity_},ol.Kinetic.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},ol.Kinetic.prototype.getAngle=function(){return this.angle_},goog.provide("ol.interaction.Property"),ol.interaction.Property={ACTIVE:"active"},goog.provide("ol.interaction.Interaction"),goog.require("ol"),goog.require("ol.Object"),goog.require("ol.easing"),goog.require("ol.interaction.Property"),ol.interaction.Interaction=function(e){ol.Object.call(this),this.map_=null,this.setActive(!0),this.handleEvent=e.handleEvent},ol.inherits(ol.interaction.Interaction,ol.Object),ol.interaction.Interaction.prototype.getActive=function(){return this.get(ol.interaction.Property.ACTIVE)},ol.interaction.Interaction.prototype.getMap=function(){return this.map_},ol.interaction.Interaction.prototype.setActive=function(e){this.set(ol.interaction.Property.ACTIVE,e)},ol.interaction.Interaction.prototype.setMap=function(e){this.map_=e},ol.interaction.Interaction.pan=function(e,t,o){var r=e.getCenter();if(r){var i=e.constrainCenter([r[0]+t[0],r[1]+t[1]]);o?e.animate({duration:o,easing:ol.easing.linear,center:i}):e.setCenter(i)}},ol.interaction.Interaction.rotate=function(e,t,o,r){t=e.constrainRotation(t,0),ol.interaction.Interaction.rotateWithoutConstraints(e,t,o,r)},ol.interaction.Interaction.rotateWithoutConstraints=function(e,t,o,r){if(void 0!==t){var i=e.getRotation(),n=e.getCenter();void 0!==i&&n&&r>0?e.animate({rotation:t,anchor:o,duration:r,easing:ol.easing.easeOut}):e.rotate(t,o)}},ol.interaction.Interaction.zoom=function(e,t,o,r,i){t=e.constrainResolution(t,0,i),ol.interaction.Interaction.zoomWithoutConstraints(e,t,o,r)},ol.interaction.Interaction.zoomByDelta=function(e,t,o,r){var i=e.getResolution(),n=e.constrainResolution(i,t,0);if(o&&void 0!==n&&n!==i){var a=e.getCenter(),l=e.calculateCenterZoom(n,o);l=e.constrainCenter(l),o=[(n*a[0]-i*l[0])/(n-i),(n*a[1]-i*l[1])/(n-i)]}ol.interaction.Interaction.zoomWithoutConstraints(e,n,o,r)},ol.interaction.Interaction.zoomWithoutConstraints=function(e,t,o,r){if(t){var i=e.getResolution(),n=e.getCenter();if(void 0!==i&&n&&t!==i&&r)e.animate({resolution:t,anchor:o,duration:r,easing:ol.easing.easeOut});else{if(o){var a=e.calculateCenterZoom(t,o);e.setCenter(a)}e.setResolution(t)}}},goog.provide("ol.interaction.DoubleClickZoom"),goog.require("ol"),goog.require("ol.MapBrowserEventType"),goog.require("ol.interaction.Interaction"),ol.interaction.DoubleClickZoom=function(e){var t=e?e:{};this.delta_=t.delta?t.delta:1,ol.interaction.Interaction.call(this,{handleEvent:ol.interaction.DoubleClickZoom.handleEvent}),this.duration_=void 0!==t.duration?t.duration:250},ol.inherits(ol.interaction.DoubleClickZoom,ol.interaction.Interaction),ol.interaction.DoubleClickZoom.handleEvent=function(e){var t=!1,o=e.originalEvent;if(e.type==ol.MapBrowserEventType.DBLCLICK){var r=e.map,i=e.coordinate,n=o.shiftKey?-this.delta_:this.delta_,a=r.getView();ol.interaction.Interaction.zoomByDelta(a,n,i,this.duration_),e.preventDefault(),t=!0}return!t},goog.provide("ol.events.condition"),goog.require("ol.MapBrowserEventType"),goog.require("ol.asserts"),goog.require("ol.functions"),goog.require("ol.has"),ol.events.condition.altKeyOnly=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},ol.events.condition.altShiftKeysOnly=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},ol.events.condition.always=ol.functions.TRUE,ol.events.condition.click=function(e){return e.type==ol.MapBrowserEventType.CLICK},ol.events.condition.mouseActionButton=function(e){var t=e.originalEvent;return 0==t.button&&!(ol.has.WEBKIT&&ol.has.MAC&&t.ctrlKey)},ol.events.condition.never=ol.functions.FALSE,ol.events.condition.pointerMove=function(e){return"pointermove"==e.type},ol.events.condition.singleClick=function(e){return e.type==ol.MapBrowserEventType.SINGLECLICK},ol.events.condition.doubleClick=function(e){return e.type==ol.MapBrowserEventType.DBLCLICK},ol.events.condition.noModifierKeys=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},ol.events.condition.platformModifierKeyOnly=function(e){var t=e.originalEvent;return!t.altKey&&(ol.has.MAC?t.metaKey:t.ctrlKey)&&!t.shiftKey},ol.events.condition.shiftKeyOnly=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},ol.events.condition.targetNotEditable=function(e){var t=e.originalEvent.target,o=t.tagName;return"INPUT"!==o&&"SELECT"!==o&&"TEXTAREA"!==o},ol.events.condition.mouseOnly=function(e){return ol.asserts.assert(e.pointerEvent,56),"mouse"==e.pointerEvent.pointerType},ol.events.condition.primaryAction=function(e){var t=e.pointerEvent;return t.isPrimary&&0===t.button},goog.provide("ol.interaction.Pointer"),goog.require("ol"),goog.require("ol.functions"),goog.require("ol.MapBrowserEventType"),goog.require("ol.MapBrowserPointerEvent"),goog.require("ol.interaction.Interaction"),goog.require("ol.obj"),ol.interaction.Pointer=function(e){var t=e?e:{},o=t.handleEvent?t.handleEvent:ol.interaction.Pointer.handleEvent;ol.interaction.Interaction.call(this,{handleEvent:o}),this.handleDownEvent_=t.handleDownEvent?t.handleDownEvent:ol.interaction.Pointer.handleDownEvent,this.handleDragEvent_=t.handleDragEvent?t.handleDragEvent:ol.interaction.Pointer.handleDragEvent,this.handleMoveEvent_=t.handleMoveEvent?t.handleMoveEvent:ol.interaction.Pointer.handleMoveEvent,this.handleUpEvent_=t.handleUpEvent?t.handleUpEvent:ol.interaction.Pointer.handleUpEvent,this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]},ol.inherits(ol.interaction.Pointer,ol.interaction.Interaction),ol.interaction.Pointer.centroid=function(e){for(var t=e.length,o=0,r=0,i=0;i<t;i++)o+=e[i].clientX,r+=e[i].clientY;return[o/t,r/t]},ol.interaction.Pointer.prototype.isPointerDraggingEvent_=function(e){var t=e.type;return t===ol.MapBrowserEventType.POINTERDOWN||t===ol.MapBrowserEventType.POINTERDRAG||t===ol.MapBrowserEventType.POINTERUP},ol.interaction.Pointer.prototype.updateTrackedPointers_=function(e){if(this.isPointerDraggingEvent_(e)){var t=e.pointerEvent;e.type==ol.MapBrowserEventType.POINTERUP?delete this.trackedPointers_[t.pointerId]:e.type==ol.MapBrowserEventType.POINTERDOWN?this.trackedPointers_[t.pointerId]=t:t.pointerId in this.trackedPointers_&&(this.trackedPointers_[t.pointerId]=t),this.targetPointers=ol.obj.getValues(this.trackedPointers_)}},ol.interaction.Pointer.handleDragEvent=ol.nullFunction,ol.interaction.Pointer.handleUpEvent=ol.functions.FALSE,ol.interaction.Pointer.handleDownEvent=ol.functions.FALSE,ol.interaction.Pointer.handleMoveEvent=ol.nullFunction,ol.interaction.Pointer.handleEvent=function(e){if(!(e instanceof ol.MapBrowserPointerEvent))return!0;var t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==ol.MapBrowserEventType.POINTERDRAG)this.handleDragEvent_(e);else if(e.type==ol.MapBrowserEventType.POINTERUP){var o=this.handleUpEvent_(e);this.handlingDownUpSequence=o&&this.targetPointers.length>0}}else if(e.type==ol.MapBrowserEventType.POINTERDOWN){var r=this.handleDownEvent_(e);this.handlingDownUpSequence=r,t=this.shouldStopEvent(r)}else e.type==ol.MapBrowserEventType.POINTERMOVE&&this.handleMoveEvent_(e);return!t},ol.interaction.Pointer.prototype.shouldStopEvent=function(e){return e},goog.provide("ol.interaction.DragPan"),goog.require("ol"),goog.require("ol.ViewHint"),goog.require("ol.coordinate"),goog.require("ol.easing"),goog.require("ol.events.condition"),goog.require("ol.functions"),goog.require("ol.interaction.Pointer"),ol.interaction.DragPan=function(e){ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.DragPan.handleDownEvent_,handleDragEvent:ol.interaction.DragPan.handleDragEvent_,handleUpEvent:ol.interaction.DragPan.handleUpEvent_});var t=e?e:{};this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.condition_=t.condition?t.condition:ol.events.condition.noModifierKeys,this.noKinetic_=!1},ol.inherits(ol.interaction.DragPan,ol.interaction.Pointer),ol.interaction.DragPan.handleDragEvent_=function(e){var t=this.targetPointers,o=ol.interaction.Pointer.centroid(t);if(t.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(o[0],o[1]),this.lastCentroid){var r=this.lastCentroid[0]-o[0],i=o[1]-this.lastCentroid[1],n=e.map,a=n.getView(),l=a.getState(),s=[r,i];ol.coordinate.scale(s,l.resolution),ol.coordinate.rotate(s,l.rotation),ol.coordinate.add(s,l.center),s=a.constrainCenter(s),a.setCenter(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=o,this.lastPointersCount_=t.length};ol.interaction.DragPan.handleUpEvent_=function(e){var t=e.map,o=t.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var r=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),n=o.getCenter(),a=t.getPixelFromCoordinate(n),l=t.getCoordinateFromPixel([a[0]-r*Math.cos(i),a[1]-r*Math.sin(i)]);o.animate({center:o.constrainCenter(l),duration:500,easing:ol.easing.easeOut})}return o.setHint(ol.ViewHint.INTERACTING,-1),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0};ol.interaction.DragPan.handleDownEvent_=function(e){if(this.targetPointers.length>0&&this.condition_(e)){var t=e.map,o=t.getView();return this.lastCentroid=null,this.handlingDownUpSequence||o.setHint(ol.ViewHint.INTERACTING,1),o.getHints()[ol.ViewHint.ANIMATING]&&o.setCenter(e.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},ol.interaction.DragPan.prototype.shouldStopEvent=ol.functions.FALSE,goog.provide("ol.interaction.DragRotate"),goog.require("ol"),goog.require("ol.RotationConstraint"),goog.require("ol.ViewHint"),goog.require("ol.events.condition"),goog.require("ol.functions"),goog.require("ol.interaction.Interaction"),goog.require("ol.interaction.Pointer"),ol.interaction.DragRotate=function(e){var t=e?e:{};ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.DragRotate.handleDownEvent_,handleDragEvent:ol.interaction.DragRotate.handleDragEvent_,handleUpEvent:ol.interaction.DragRotate.handleUpEvent_}),this.condition_=t.condition?t.condition:ol.events.condition.altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250},ol.inherits(ol.interaction.DragRotate,ol.interaction.Pointer),ol.interaction.DragRotate.handleDragEvent_=function(e){if(ol.events.condition.mouseOnly(e)){var t=e.map,o=t.getView();if(o.getConstraints().rotation!==ol.RotationConstraint.disable){var r=t.getSize(),i=e.pixel,n=Math.atan2(r[1]/2-i[1],i[0]-r[0]/2);if(void 0!==this.lastAngle_){var a=n-this.lastAngle_,l=o.getRotation();ol.interaction.Interaction.rotateWithoutConstraints(o,l-a)}this.lastAngle_=n}}},ol.interaction.DragRotate.handleUpEvent_=function(e){if(!ol.events.condition.mouseOnly(e))return!0;var t=e.map,o=t.getView();o.setHint(ol.ViewHint.INTERACTING,-1);var r=o.getRotation();return ol.interaction.Interaction.rotate(o,r,void 0,this.duration_),!1},ol.interaction.DragRotate.handleDownEvent_=function(e){if(!ol.events.condition.mouseOnly(e))return!1;if(ol.events.condition.mouseActionButton(e)&&this.condition_(e)){var t=e.map;return t.getView().setHint(ol.ViewHint.INTERACTING,1),this.lastAngle_=void 0,!0}return!1},ol.interaction.DragRotate.prototype.shouldStopEvent=ol.functions.FALSE,goog.provide("ol.render.Box"),goog.require("ol"),goog.require("ol.Disposable"),goog.require("ol.geom.Polygon"),ol.render.Box=function(e){this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null},ol.inherits(ol.render.Box,ol.Disposable),ol.render.Box.prototype.disposeInternal=function(){this.setMap(null)},ol.render.Box.prototype.render_=function(){var e=this.startPixel_,t=this.endPixel_,o="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+o,r.top=Math.min(e[1],t[1])+o,r.width=Math.abs(t[0]-e[0])+o,r.height=Math.abs(t[1]-e[1])+o},ol.render.Box.prototype.setMap=function(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var t=this.element_.style;t.left=t.top=t.width=t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},ol.render.Box.prototype.setPixels=function(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()},ol.render.Box.prototype.createOrUpdateGeometry=function(){var e=this.startPixel_,t=this.endPixel_,o=[e,[e[0],t[1]],t,[t[0],e[1]]],r=o.map(this.map_.getCoordinateFromPixel,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new ol.geom.Polygon([r])},ol.render.Box.prototype.getGeometry=function(){return this.geometry_},goog.provide("ol.interaction.DragBox"),goog.require("ol.events.Event"),goog.require("ol"),goog.require("ol.events.condition"),goog.require("ol.interaction.Pointer"),goog.require("ol.render.Box"),ol.interaction.DragBox=function(e){ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.DragBox.handleDownEvent_,handleDragEvent:ol.interaction.DragBox.handleDragEvent_,handleUpEvent:ol.interaction.DragBox.handleUpEvent_});var t=e?e:{};this.box_=new ol.render.Box(t.className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,this.startPixel_=null,this.condition_=t.condition?t.condition:ol.events.condition.always,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:ol.interaction.DragBox.defaultBoxEndCondition},ol.inherits(ol.interaction.DragBox,ol.interaction.Pointer),ol.interaction.DragBox.defaultBoxEndCondition=function(e,t,o){var r=o[0]-t[0],i=o[1]-t[1];return r*r+i*i>=this.minArea_},ol.interaction.DragBox.handleDragEvent_=function(e){ol.events.condition.mouseOnly(e)&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new ol.interaction.DragBox.Event(ol.interaction.DragBox.EventType_.BOXDRAG,e.coordinate,e)))},ol.interaction.DragBox.prototype.getGeometry=function(){return this.box_.getGeometry()},ol.interaction.DragBox.prototype.onBoxEnd=ol.nullFunction,ol.interaction.DragBox.handleUpEvent_=function(e){return!ol.events.condition.mouseOnly(e)||(this.box_.setMap(null),this.boxEndCondition_(e,this.startPixel_,e.pixel)&&(this.onBoxEnd(e),this.dispatchEvent(new ol.interaction.DragBox.Event(ol.interaction.DragBox.EventType_.BOXEND,e.coordinate,e))),!1)},ol.interaction.DragBox.handleDownEvent_=function(e){return!!ol.events.condition.mouseOnly(e)&&(!(!ol.events.condition.mouseActionButton(e)||!this.condition_(e))&&(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new ol.interaction.DragBox.Event(ol.interaction.DragBox.EventType_.BOXSTART,e.coordinate,e)),!0))},ol.interaction.DragBox.EventType_={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend"},ol.interaction.DragBox.Event=function(e,t,o){ol.events.Event.call(this,e),this.coordinate=t,this.mapBrowserEvent=o},ol.inherits(ol.interaction.DragBox.Event,ol.events.Event),goog.provide("ol.interaction.DragZoom"),goog.require("ol"),goog.require("ol.easing"),goog.require("ol.events.condition"),goog.require("ol.extent"),goog.require("ol.interaction.DragBox"),ol.interaction.DragZoom=function(e){var t=e?e:{},o=t.condition?t.condition:ol.events.condition.shiftKeyOnly;this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out,ol.interaction.DragBox.call(this,{condition:o,className:t.className||"ol-dragzoom"})},ol.inherits(ol.interaction.DragZoom,ol.interaction.DragBox),ol.interaction.DragZoom.prototype.onBoxEnd=function(){var e=this.getMap(),t=e.getView(),o=e.getSize(),r=this.getGeometry().getExtent();if(this.out_){var i=t.calculateExtent(o),n=ol.extent.createOrUpdateFromCoordinates([e.getPixelFromCoordinate(ol.extent.getBottomLeft(r)),e.getPixelFromCoordinate(ol.extent.getTopRight(r))]),a=t.getResolutionForExtent(n,o);ol.extent.scaleFromCenter(i,1/a),r=i}var l=t.constrainResolution(t.getResolutionForExtent(r,o)),s=ol.extent.getCenter(r);s=t.constrainCenter(s),t.animate({resolution:l,center:s,duration:this.duration_,easing:ol.easing.easeOut})},goog.provide("ol.events.KeyCode"),ol.events.KeyCode={LEFT:37,UP:38,RIGHT:39,DOWN:40},goog.provide("ol.interaction.KeyboardPan"),goog.require("ol"),goog.require("ol.coordinate"),goog.require("ol.events.EventType"),goog.require("ol.events.KeyCode"),goog.require("ol.events.condition"),goog.require("ol.interaction.Interaction"),ol.interaction.KeyboardPan=function(e){ol.interaction.Interaction.call(this,{handleEvent:ol.interaction.KeyboardPan.handleEvent});var t=e||{};this.defaultCondition_=function(e){return ol.events.condition.noModifierKeys(e)&&ol.events.condition.targetNotEditable(e)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128},ol.inherits(ol.interaction.KeyboardPan,ol.interaction.Interaction),ol.interaction.KeyboardPan.handleEvent=function(e){var t=!1;if(e.type==ol.events.EventType.KEYDOWN){var o=e.originalEvent,r=o.keyCode;if(this.condition_(e)&&(r==ol.events.KeyCode.DOWN||r==ol.events.KeyCode.LEFT||r==ol.events.KeyCode.RIGHT||r==ol.events.KeyCode.UP)){var i=e.map,n=i.getView(),a=n.getResolution()*this.pixelDelta_,l=0,s=0;r==ol.events.KeyCode.DOWN?s=-a:r==ol.events.KeyCode.LEFT?l=-a:r==ol.events.KeyCode.RIGHT?l=a:s=a;var p=[l,s];ol.coordinate.rotate(p,n.getRotation()),ol.interaction.Interaction.pan(n,p,this.duration_),e.preventDefault(),t=!0}}return!t},goog.provide("ol.interaction.KeyboardZoom"),goog.require("ol"),goog.require("ol.events.EventType"),goog.require("ol.events.condition"),goog.require("ol.interaction.Interaction"),ol.interaction.KeyboardZoom=function(e){ol.interaction.Interaction.call(this,{handleEvent:ol.interaction.KeyboardZoom.handleEvent});var t=e?e:{};this.condition_=t.condition?t.condition:ol.events.condition.targetNotEditable,this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100},ol.inherits(ol.interaction.KeyboardZoom,ol.interaction.Interaction),ol.interaction.KeyboardZoom.handleEvent=function(e){var t=!1;if(e.type==ol.events.EventType.KEYDOWN||e.type==ol.events.EventType.KEYPRESS){var o=e.originalEvent,r=o.charCode;if(this.condition_(e)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var i=e.map,n=r=="+".charCodeAt(0)?this.delta_:-this.delta_,a=i.getView();ol.interaction.Interaction.zoomByDelta(a,n,void 0,this.duration_),e.preventDefault(),t=!0}}return!t},goog.provide("ol.interaction.MouseWheelZoom"),goog.require("ol"),goog.require("ol.ViewHint"),goog.require("ol.easing"),goog.require("ol.events.EventType"),goog.require("ol.has"),goog.require("ol.interaction.Interaction"),goog.require("ol.math"),ol.interaction.MouseWheelZoom=function(e){ol.interaction.Interaction.call(this,{handleEvent:ol.interaction.MouseWheelZoom.handleEvent});var t=e||{};this.delta_=0,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=t.constrainResolution||!1,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_=void 0,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5},ol.inherits(ol.interaction.MouseWheelZoom,ol.interaction.Interaction),ol.interaction.MouseWheelZoom.handleEvent=function(e){var t=e.type;if(t!==ol.events.EventType.WHEEL&&t!==ol.events.EventType.MOUSEWHEEL)return!0;e.preventDefault();var o=e.map,r=e.originalEvent;this.useAnchor_&&(this.lastAnchor_=e.coordinate);var i;if(e.type==ol.events.EventType.WHEEL?(i=r.deltaY,ol.has.FIREFOX&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=ol.has.DEVICE_PIXEL_RATIO),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)):e.type==ol.events.EventType.MOUSEWHEEL&&(i=-r.wheelDeltaY,ol.has.SAFARI&&(i/=3)),0===i)return!1;var n=Date.now();if(void 0===this.startTime_&&(this.startTime_=n),(!this.mode_||n-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?ol.interaction.MouseWheelZoom.Mode_.TRACKPAD:ol.interaction.MouseWheelZoom.Mode_.WHEEL),this.mode_===ol.interaction.MouseWheelZoom.Mode_.TRACKPAD){var a=o.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):a.setHint(ol.ViewHint.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var l=a.getResolution()*Math.pow(2,i/this.trackpadDeltaPerZoom_),s=a.getMinResolution(),p=a.getMaxResolution(),g=0;if(l<s?(l=Math.max(l,s/this.trackpadZoomBuffer_),g=1):l>p&&(l=Math.min(l,p*this.trackpadZoomBuffer_),g=-1),this.lastAnchor_){var u=a.calculateCenterZoom(l,this.lastAnchor_);a.setCenter(a.constrainCenter(u))}return a.setResolution(l),0===g&&this.constrainResolution_&&a.animate({resolution:a.constrainResolution(l,i>0?-1:1),easing:ol.easing.easeOut,anchor:this.lastAnchor_,duration:this.duration_}),g>0?a.animate({resolution:s,easing:ol.easing.easeOut,anchor:this.lastAnchor_,duration:500}):g<0&&a.animate({resolution:p,easing:ol.easing.easeOut,anchor:this.lastAnchor_,duration:500}),this.startTime_=n,!1}this.delta_+=i;var c=Math.max(this.timeout_-(n-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,o),c),!1},ol.interaction.MouseWheelZoom.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0;var e=this.getMap().getView();e.setHint(ol.ViewHint.INTERACTING,-1)},ol.interaction.MouseWheelZoom.prototype.handleWheelZoom_=function(e){var t=e.getView();t.getAnimating()&&t.cancelAnimations();var o=ol.MOUSEWHEELZOOM_MAXDELTA,r=ol.math.clamp(this.delta_,-o,o);ol.interaction.Interaction.zoomByDelta(t,-r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},ol.interaction.MouseWheelZoom.prototype.setMouseAnchor=function(e){this.useAnchor_=e,e||(this.lastAnchor_=null)},ol.interaction.MouseWheelZoom.Mode_={TRACKPAD:"trackpad",WHEEL:"wheel"},goog.provide("ol.interaction.PinchRotate"),goog.require("ol"),goog.require("ol.ViewHint"),goog.require("ol.functions"),goog.require("ol.interaction.Interaction"),goog.require("ol.interaction.Pointer"),goog.require("ol.RotationConstraint"),ol.interaction.PinchRotate=function(e){ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.PinchRotate.handleDownEvent_,handleDragEvent:ol.interaction.PinchRotate.handleDragEvent_,handleUpEvent:ol.interaction.PinchRotate.handleUpEvent_});var t=e||{};this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250},ol.inherits(ol.interaction.PinchRotate,ol.interaction.Pointer),ol.interaction.PinchRotate.handleDragEvent_=function(e){var t=0,o=this.targetPointers[0],r=this.targetPointers[1],i=Math.atan2(r.clientY-o.clientY,r.clientX-o.clientX);if(void 0!==this.lastAngle_){var n=i-this.lastAngle_;this.rotationDelta_+=n,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=n}this.lastAngle_=i;var a=e.map,l=a.getView();if(l.getConstraints().rotation!==ol.RotationConstraint.disable){var s=a.getViewport().getBoundingClientRect(),p=ol.interaction.Pointer.centroid(this.targetPointers);if(p[0]-=s.left,p[1]-=s.top,this.anchor_=a.getCoordinateFromPixel(p),this.rotating_){var g=l.getRotation();a.render(),ol.interaction.Interaction.rotateWithoutConstraints(l,g+t,this.anchor_)}}},ol.interaction.PinchRotate.handleUpEvent_=function(e){if(this.targetPointers.length<2){var t=e.map,o=t.getView();if(o.setHint(ol.ViewHint.INTERACTING,-1),this.rotating_){var r=o.getRotation();ol.interaction.Interaction.rotate(o,r,this.anchor_,this.duration_)}return!1}return!0},ol.interaction.PinchRotate.handleDownEvent_=function(e){if(this.targetPointers.length>=2){var t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().setHint(ol.ViewHint.INTERACTING,1),!0}return!1},ol.interaction.PinchRotate.prototype.shouldStopEvent=ol.functions.FALSE,goog.provide("ol.interaction.PinchZoom"),
goog.require("ol"),goog.require("ol.ViewHint"),goog.require("ol.functions"),goog.require("ol.interaction.Interaction"),goog.require("ol.interaction.Pointer"),ol.interaction.PinchZoom=function(e){ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.PinchZoom.handleDownEvent_,handleDragEvent:ol.interaction.PinchZoom.handleDragEvent_,handleUpEvent:ol.interaction.PinchZoom.handleUpEvent_});var t=e?e:{};this.constrainResolution_=t.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1},ol.inherits(ol.interaction.PinchZoom,ol.interaction.Pointer),ol.interaction.PinchZoom.handleDragEvent_=function(e){var t=1,o=this.targetPointers[0],r=this.targetPointers[1],i=o.clientX-r.clientX,n=o.clientY-r.clientY,a=Math.sqrt(i*i+n*n);void 0!==this.lastDistance_&&(t=this.lastDistance_/a),this.lastDistance_=a;var l=e.map,s=l.getView(),p=s.getResolution(),g=s.getMaxResolution(),u=s.getMinResolution(),c=p*t;c>g?(t=g/p,c=g):c<u&&(t=u/p,c=u),1!=t&&(this.lastScaleDelta_=t);var y=l.getViewport().getBoundingClientRect(),h=ol.interaction.Pointer.centroid(this.targetPointers);h[0]-=y.left,h[1]-=y.top,this.anchor_=l.getCoordinateFromPixel(h),l.render(),ol.interaction.Interaction.zoomWithoutConstraints(s,c,this.anchor_)},ol.interaction.PinchZoom.handleUpEvent_=function(e){if(this.targetPointers.length<2){var t=e.map,o=t.getView();o.setHint(ol.ViewHint.INTERACTING,-1);var r=o.getResolution();if(this.constrainResolution_||r<o.getMinResolution()||r>o.getMaxResolution()){var i=this.lastScaleDelta_-1;ol.interaction.Interaction.zoom(o,r,this.anchor_,this.duration_,i)}return!1}return!0},ol.interaction.PinchZoom.handleDownEvent_=function(e){if(this.targetPointers.length>=2){var t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().setHint(ol.ViewHint.INTERACTING,1),!0}return!1},ol.interaction.PinchZoom.prototype.shouldStopEvent=ol.functions.FALSE,goog.provide("ol.interaction"),goog.require("ol.Collection"),goog.require("ol.Kinetic"),goog.require("ol.interaction.DoubleClickZoom"),goog.require("ol.interaction.DragPan"),goog.require("ol.interaction.DragRotate"),goog.require("ol.interaction.DragZoom"),goog.require("ol.interaction.KeyboardPan"),goog.require("ol.interaction.KeyboardZoom"),goog.require("ol.interaction.MouseWheelZoom"),goog.require("ol.interaction.PinchRotate"),goog.require("ol.interaction.PinchZoom"),ol.interaction.defaults=function(e){var t=e?e:{},o=new ol.Collection,r=new ol.Kinetic(-.005,.05,100),i=void 0===t.altShiftDragRotate||t.altShiftDragRotate;i&&o.push(new ol.interaction.DragRotate);var n=void 0===t.doubleClickZoom||t.doubleClickZoom;n&&o.push(new ol.interaction.DoubleClickZoom({delta:t.zoomDelta,duration:t.zoomDuration}));var a=void 0===t.dragPan||t.dragPan;a&&o.push(new ol.interaction.DragPan({kinetic:r}));var l=void 0===t.pinchRotate||t.pinchRotate;l&&o.push(new ol.interaction.PinchRotate);var s=void 0===t.pinchZoom||t.pinchZoom;s&&o.push(new ol.interaction.PinchZoom({constrainResolution:t.constrainResolution,duration:t.zoomDuration}));var p=void 0===t.keyboard||t.keyboard;p&&(o.push(new ol.interaction.KeyboardPan),o.push(new ol.interaction.KeyboardZoom({delta:t.zoomDelta,duration:t.zoomDuration})));var g=void 0===t.mouseWheelZoom||t.mouseWheelZoom;g&&o.push(new ol.interaction.MouseWheelZoom({constrainResolution:t.constrainResolution,duration:t.zoomDuration}));var u=void 0===t.shiftDragZoom||t.shiftDragZoom;return u&&o.push(new ol.interaction.DragZoom({duration:t.zoomDuration})),o},goog.provide("ol.layer.Property"),ol.layer.Property={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"},goog.provide("ol.layer.Base"),goog.require("ol"),goog.require("ol.Object"),goog.require("ol.layer.Property"),goog.require("ol.math"),goog.require("ol.obj"),ol.layer.Base=function(e){ol.Object.call(this);var t=ol.obj.assign({},e);t[ol.layer.Property.OPACITY]=void 0!==e.opacity?e.opacity:1,t[ol.layer.Property.VISIBLE]=void 0===e.visible||e.visible,t[ol.layer.Property.Z_INDEX]=void 0!==e.zIndex?e.zIndex:0,t[ol.layer.Property.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,t[ol.layer.Property.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,this.setProperties(t),this.state_={layer:this,managed:!0}},ol.inherits(ol.layer.Base,ol.Object),ol.layer.Base.prototype.createRenderer=function(e){},ol.layer.Base.prototype.getLayerState=function(){return this.state_.opacity=ol.math.clamp(this.getOpacity(),0,1),this.state_.sourceState=this.getSourceState(),this.state_.visible=this.getVisible(),this.state_.extent=this.getExtent(),this.state_.zIndex=this.getZIndex(),this.state_.maxResolution=this.getMaxResolution(),this.state_.minResolution=Math.max(this.getMinResolution(),0),this.state_},ol.layer.Base.prototype.getLayersArray=function(e){},ol.layer.Base.prototype.getLayerStatesArray=function(e){},ol.layer.Base.prototype.getExtent=function(){return this.get(ol.layer.Property.EXTENT)},ol.layer.Base.prototype.getMaxResolution=function(){return this.get(ol.layer.Property.MAX_RESOLUTION)},ol.layer.Base.prototype.getMinResolution=function(){return this.get(ol.layer.Property.MIN_RESOLUTION)},ol.layer.Base.prototype.getOpacity=function(){return this.get(ol.layer.Property.OPACITY)},ol.layer.Base.prototype.getSourceState=function(){},ol.layer.Base.prototype.getVisible=function(){return this.get(ol.layer.Property.VISIBLE)},ol.layer.Base.prototype.getZIndex=function(){return this.get(ol.layer.Property.Z_INDEX)},ol.layer.Base.prototype.setExtent=function(e){this.set(ol.layer.Property.EXTENT,e)},ol.layer.Base.prototype.setMaxResolution=function(e){this.set(ol.layer.Property.MAX_RESOLUTION,e)},ol.layer.Base.prototype.setMinResolution=function(e){this.set(ol.layer.Property.MIN_RESOLUTION,e)},ol.layer.Base.prototype.setOpacity=function(e){this.set(ol.layer.Property.OPACITY,e)},ol.layer.Base.prototype.setVisible=function(e){this.set(ol.layer.Property.VISIBLE,e)},ol.layer.Base.prototype.setZIndex=function(e){this.set(ol.layer.Property.Z_INDEX,e)},goog.provide("ol.source.State"),ol.source.State={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"},goog.provide("ol.layer.Group"),goog.require("ol"),goog.require("ol.Collection"),goog.require("ol.CollectionEventType"),goog.require("ol.Object"),goog.require("ol.ObjectEventType"),goog.require("ol.asserts"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.extent"),goog.require("ol.layer.Base"),goog.require("ol.obj"),goog.require("ol.source.State"),ol.layer.Group=function(e){var t=e||{},o=ol.obj.assign({},t);delete o.layers;var r=t.layers;ol.layer.Base.call(this,o),this.layersListenerKeys_=[],this.listenerKeys_={},ol.events.listen(this,ol.Object.getChangeEventType(ol.layer.Group.Property_.LAYERS),this.handleLayersChanged_,this),r?Array.isArray(r)?r=new ol.Collection(r.slice(),{unique:!0}):(ol.asserts.assert(r instanceof ol.Collection,43),r=r):r=new ol.Collection(void 0,{unique:!0}),this.setLayers(r)},ol.inherits(ol.layer.Group,ol.layer.Base),ol.layer.Group.prototype.createRenderer=function(e){},ol.layer.Group.prototype.handleLayerChange_=function(){this.getVisible()&&this.changed()},ol.layer.Group.prototype.handleLayersChanged_=function(e){this.layersListenerKeys_.forEach(ol.events.unlistenByKey),this.layersListenerKeys_.length=0;var t=this.getLayers();this.layersListenerKeys_.push(ol.events.listen(t,ol.CollectionEventType.ADD,this.handleLayersAdd_,this),ol.events.listen(t,ol.CollectionEventType.REMOVE,this.handleLayersRemove_,this));for(var o in this.listenerKeys_)this.listenerKeys_[o].forEach(ol.events.unlistenByKey);ol.obj.clear(this.listenerKeys_);var r,i,n,a=t.getArray();for(r=0,i=a.length;r<i;r++)n=a[r],this.listenerKeys_[ol.getUid(n).toString()]=[ol.events.listen(n,ol.ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),ol.events.listen(n,ol.events.EventType.CHANGE,this.handleLayerChange_,this)];this.changed()},ol.layer.Group.prototype.handleLayersAdd_=function(e){var t=e.element,o=ol.getUid(t).toString();this.listenerKeys_[o]=[ol.events.listen(t,ol.ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),ol.events.listen(t,ol.events.EventType.CHANGE,this.handleLayerChange_,this)],this.changed()},ol.layer.Group.prototype.handleLayersRemove_=function(e){var t=e.element,o=ol.getUid(t).toString();this.listenerKeys_[o].forEach(ol.events.unlistenByKey),delete this.listenerKeys_[o],this.changed()},ol.layer.Group.prototype.getLayers=function(){return this.get(ol.layer.Group.Property_.LAYERS)},ol.layer.Group.prototype.setLayers=function(e){this.set(ol.layer.Group.Property_.LAYERS,e)},ol.layer.Group.prototype.getLayersArray=function(e){var t=void 0!==e?e:[];return this.getLayers().forEach(function(e){e.getLayersArray(t)}),t},ol.layer.Group.prototype.getLayerStatesArray=function(e){var t=void 0!==e?e:[],o=t.length;this.getLayers().forEach(function(e){e.getLayerStatesArray(t)});var r,i,n,a=this.getLayerState();for(r=o,i=t.length;r<i;r++)n=t[r],n.opacity*=a.opacity,n.visible=n.visible&&a.visible,n.maxResolution=Math.min(n.maxResolution,a.maxResolution),n.minResolution=Math.max(n.minResolution,a.minResolution),void 0!==a.extent&&(void 0!==n.extent?n.extent=ol.extent.getIntersection(n.extent,a.extent):n.extent=a.extent);return t},ol.layer.Group.prototype.getSourceState=function(){return ol.source.State.READY},ol.layer.Group.Property_={LAYERS:"layers"},goog.provide("ol.render.EventType"),ol.render.EventType={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render"},goog.provide("ol.layer.Layer"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol"),goog.require("ol.Object"),goog.require("ol.layer.Base"),goog.require("ol.layer.Property"),goog.require("ol.obj"),goog.require("ol.render.EventType"),goog.require("ol.source.State"),ol.layer.Layer=function(e){var t=ol.obj.assign({},e);delete t.source,ol.layer.Base.call(this,t),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,e.map&&this.setMap(e.map),ol.events.listen(this,ol.Object.getChangeEventType(ol.layer.Property.SOURCE),this.handleSourcePropertyChange_,this);var o=e.source?e.source:null;this.setSource(o)},ol.inherits(ol.layer.Layer,ol.layer.Base),ol.layer.Layer.visibleAtResolution=function(e,t){return e.visible&&t>=e.minResolution&&t<e.maxResolution},ol.layer.Layer.prototype.getLayersArray=function(e){var t=e?e:[];return t.push(this),t},ol.layer.Layer.prototype.getLayerStatesArray=function(e){var t=e?e:[];return t.push(this.getLayerState()),t},ol.layer.Layer.prototype.getSource=function(){var e=this.get(ol.layer.Property.SOURCE);return e||null};ol.layer.Layer.prototype.getSourceState=function(){var e=this.getSource();return e?e.getState():ol.source.State.UNDEFINED};ol.layer.Layer.prototype.handleSourceChange_=function(){this.changed()},ol.layer.Layer.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(ol.events.unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null);var e=this.getSource();e&&(this.sourceChangeKey_=ol.events.listen(e,ol.events.EventType.CHANGE,this.handleSourceChange_,this)),this.changed()},ol.layer.Layer.prototype.setMap=function(e){this.mapPrecomposeKey_&&(ol.events.unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(ol.events.unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=ol.events.listen(e,ol.render.EventType.PRECOMPOSE,function(e){var t=this.getLayerState();t.managed=!1,t.zIndex=1/0,e.frameState.layerStatesArray.push(t),e.frameState.layerStates[ol.getUid(this)]=t},this),this.mapRenderKey_=ol.events.listen(this,ol.events.EventType.CHANGE,e.render,e),this.changed())},ol.layer.Layer.prototype.setSource=function(e){this.set(ol.layer.Property.SOURCE,e)},goog.provide("ol.style.IconImageCache"),goog.require("ol.color"),ol.style.IconImageCache=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32},ol.style.IconImageCache.getKey=function(e,t,o){var r=o?ol.color.asString(o):"null";return t+":"+e+":"+r},ol.style.IconImageCache.prototype.clear=function(){this.cache_={},this.cacheSize_=0},ol.style.IconImageCache.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var e,t,o=0;for(e in this.cache_)t=this.cache_[e],0!==(3&o++)||t.hasListener()||(delete this.cache_[e],--this.cacheSize_)}},ol.style.IconImageCache.prototype.get=function(e,t,o){var r=ol.style.IconImageCache.getKey(e,t,o);return r in this.cache_?this.cache_[r]:null},ol.style.IconImageCache.prototype.set=function(e,t,o,r){var i=ol.style.IconImageCache.getKey(e,t,o);this.cache_[i]=r,++this.cacheSize_},goog.provide("ol.style"),goog.require("ol.style.IconImageCache"),ol.style.iconImageCache=new ol.style.IconImageCache,goog.provide("ol.transform"),goog.require("ol.asserts"),ol.transform.tmp_=new Array(6),ol.transform.create=function(){return[1,0,0,1,0,0]},ol.transform.reset=function(e){return ol.transform.set(e,1,0,0,1,0,0)},ol.transform.multiply=function(e,t){var o=e[0],r=e[1],i=e[2],n=e[3],a=e[4],l=e[5],s=t[0],p=t[1],g=t[2],u=t[3],c=t[4],y=t[5];return e[0]=o*s+i*p,e[1]=r*s+n*p,e[2]=o*g+i*u,e[3]=r*g+n*u,e[4]=o*c+i*y+a,e[5]=r*c+n*y+l,e},ol.transform.set=function(e,t,o,r,i,n,a){return e[0]=t,e[1]=o,e[2]=r,e[3]=i,e[4]=n,e[5]=a,e},ol.transform.setFromArray=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},ol.transform.apply=function(e,t){var o=t[0],r=t[1];return t[0]=e[0]*o+e[2]*r+e[4],t[1]=e[1]*o+e[3]*r+e[5],t},ol.transform.rotate=function(e,t){var o=Math.cos(t),r=Math.sin(t);return ol.transform.multiply(e,ol.transform.set(ol.transform.tmp_,o,r,-r,o,0,0))},ol.transform.scale=function(e,t,o){return ol.transform.multiply(e,ol.transform.set(ol.transform.tmp_,t,0,0,o,0,0))},ol.transform.translate=function(e,t,o){return ol.transform.multiply(e,ol.transform.set(ol.transform.tmp_,1,0,0,1,t,o))},ol.transform.compose=function(e,t,o,r,i,n,a,l){var s=Math.sin(n),p=Math.cos(n);return e[0]=r*p,e[1]=i*s,e[2]=-r*s,e[3]=i*p,e[4]=a*r*p-l*r*s+t,e[5]=a*i*s+l*i*p+o,e},ol.transform.invert=function(e){var t=ol.transform.determinant(e);ol.asserts.assert(0!==t,32);var o=e[0],r=e[1],i=e[2],n=e[3],a=e[4],l=e[5];return e[0]=n/t,e[1]=-r/t,e[2]=-i/t,e[3]=o/t,e[4]=(i*l-n*a)/t,e[5]=-(o*l-r*a)/t,e},ol.transform.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},goog.provide("ol.renderer.Map"),goog.require("ol"),goog.require("ol.Disposable"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.extent"),goog.require("ol.functions"),goog.require("ol.layer.Layer"),goog.require("ol.style"),goog.require("ol.transform"),ol.renderer.Map=function(e,t){ol.Disposable.call(this),this.map_=t,this.layerRenderers_={},this.layerRendererListeners_={}},ol.inherits(ol.renderer.Map,ol.Disposable),ol.renderer.Map.prototype.calculateMatrices2D=function(e){var t=e.viewState,o=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;ol.transform.compose(o,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),ol.transform.invert(ol.transform.setFromArray(r,o))},ol.renderer.Map.prototype.disposeInternal=function(){for(var e in this.layerRenderers_)this.layerRenderers_[e].dispose()},ol.renderer.Map.expireIconCache_=function(e,t){var o=ol.style.iconImageCache;o.expire()},ol.renderer.Map.prototype.forEachFeatureAtCoordinate=function(e,t,o,r,i,n,a){function l(e,o){var n=ol.getUid(e).toString(),a=t.layerStates[ol.getUid(o)].managed;if(!(n in t.skippedFeatureUids)||a)return r.call(i,e,a?o:null)}var s,p=t.viewState,g=p.resolution,u=p.projection,c=e;if(u.canWrapX()){var y=u.getExtent(),h=ol.extent.getWidth(y),d=e[0];if(d<y[0]||d>y[2]){var f=Math.ceil((y[0]-d)/h);c=[d+h*f,e[1]]}}var m,v=t.layerStatesArray,_=v.length;for(m=_-1;m>=0;--m){var S=v[m],x=S.layer;if(ol.layer.Layer.visibleAtResolution(S,g)&&n.call(a,x)){var E=this.getLayerRenderer(x);if(x.getSource()&&(s=E.forEachFeatureAtCoordinate(x.getSource().getWrapX()?c:e,t,o,l,i)),s)return s}}},ol.renderer.Map.prototype.forEachLayerAtPixel=function(e,t,o,r,i,n){},ol.renderer.Map.prototype.hasFeatureAtCoordinate=function(e,t,o,r,i){var n=this.forEachFeatureAtCoordinate(e,t,o,ol.functions.TRUE,this,r,i);return void 0!==n},ol.renderer.Map.prototype.getLayerRenderer=function(e){var t=ol.getUid(e).toString();if(t in this.layerRenderers_)return this.layerRenderers_[t];var o=e.createRenderer(this);return this.layerRenderers_[t]=o,this.layerRendererListeners_[t]=ol.events.listen(o,ol.events.EventType.CHANGE,this.handleLayerRendererChange_,this),o},ol.renderer.Map.prototype.getLayerRendererByKey=function(e){return this.layerRenderers_[e]},ol.renderer.Map.prototype.getLayerRenderers=function(){return this.layerRenderers_},ol.renderer.Map.prototype.getMap=function(){return this.map_},ol.renderer.Map.prototype.getType=function(){},ol.renderer.Map.prototype.handleLayerRendererChange_=function(){this.map_.render()},ol.renderer.Map.prototype.removeLayerRendererByKey_=function(e){var t=this.layerRenderers_[e];return delete this.layerRenderers_[e],ol.events.unlistenByKey(this.layerRendererListeners_[e]),delete this.layerRendererListeners_[e],t},ol.renderer.Map.prototype.renderFrame=ol.nullFunction,ol.renderer.Map.prototype.removeUnusedLayerRenderers_=function(e,t){var o;for(o in this.layerRenderers_)t&&o in t.layerStates||this.removeLayerRendererByKey_(o).dispose()},ol.renderer.Map.prototype.scheduleExpireIconCache=function(e){e.postRenderFunctions.push(ol.renderer.Map.expireIconCache_)},ol.renderer.Map.prototype.scheduleRemoveUnusedLayerRenderers=function(e){var t;for(t in this.layerRenderers_)if(!(t in e.layerStates))return void e.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},ol.renderer.Map.sortByZIndex=function(e,t){return e.zIndex-t.zIndex},goog.provide("ol.renderer.Type"),ol.renderer.Type={CANVAS:"canvas",WEBGL:"webgl"},goog.provide("ol.render.Event"),goog.require("ol"),goog.require("ol.events.Event"),ol.render.Event=function(e,t,o,r,i){ol.events.Event.call(this,e),this.vectorContext=t,this.frameState=o,this.context=r,this.glContext=i},ol.inherits(ol.render.Event,ol.events.Event),goog.provide("ol.render.canvas"),ol.render.canvas.defaultFont="10px sans-serif",ol.render.canvas.defaultFillStyle=[0,0,0,1],ol.render.canvas.defaultLineCap="round",ol.render.canvas.defaultLineDash=[],ol.render.canvas.defaultLineDashOffset=0,ol.render.canvas.defaultLineJoin="round",ol.render.canvas.defaultMiterLimit=10,ol.render.canvas.defaultStrokeStyle=[0,0,0,1],ol.render.canvas.defaultTextAlign="center",ol.render.canvas.defaultTextBaseline="middle",ol.render.canvas.defaultLineWidth=1,ol.render.canvas.rotateAtOffset=function(e,t,o,r){0!==t&&(e.translate(o,r),e.rotate(t),e.translate(-o,-r))},goog.provide("ol.render.VectorContext"),ol.render.VectorContext=function(){},ol.render.VectorContext.prototype.drawGeometry=function(e){},ol.render.VectorContext.prototype.setStyle=function(e){},ol.render.VectorContext.prototype.drawCircle=function(e,t){},ol.render.VectorContext.prototype.drawFeature=function(e,t){},ol.render.VectorContext.prototype.drawGeometryCollection=function(e,t){},ol.render.VectorContext.prototype.drawLineString=function(e,t){},ol.render.VectorContext.prototype.drawMultiLineString=function(e,t){},ol.render.VectorContext.prototype.drawMultiPoint=function(e,t){},ol.render.VectorContext.prototype.drawMultiPolygon=function(e,t){},ol.render.VectorContext.prototype.drawPoint=function(e,t){},ol.render.VectorContext.prototype.drawPolygon=function(e,t){},ol.render.VectorContext.prototype.drawText=function(e,t,o,r,i,n){},ol.render.VectorContext.prototype.setFillStrokeStyle=function(e,t){},ol.render.VectorContext.prototype.setImageStyle=function(e){},ol.render.VectorContext.prototype.setTextStyle=function(e){},goog.provide("ol.render.canvas.Immediate"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.colorlike"),goog.require("ol.extent"),goog.require("ol.geom.GeometryType"),goog.require("ol.geom.SimpleGeometry"),goog.require("ol.geom.flat.transform"),goog.require("ol.has"),goog.require("ol.render.VectorContext"),goog.require("ol.render.canvas"),goog.require("ol.transform"),ol.render.canvas.Immediate=function(e,t,o,r,i){ol.render.VectorContext.call(this),this.context_=e,this.pixelRatio_=t,this.extent_=o,this.transform_=r,this.viewRotation_=i,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageSnapToPixel_=!1,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=ol.transform.create()},ol.inherits(ol.render.canvas.Immediate,ol.render.VectorContext),ol.render.canvas.Immediate.prototype.drawImages_=function(e,t,o,r){if(this.image_){var i=ol.geom.flat.transform.transform2D(e,t,o,2,this.transform_,this.pixelCoordinates_),n=this.context_,a=this.tmpLocalTransform_,l=n.globalAlpha;1!=this.imageOpacity_&&(n.globalAlpha=l*this.imageOpacity_);var s=this.imageRotation_;this.imageRotateWithView_&&(s+=this.viewRotation_);var p,g;for(p=0,g=i.length;p<g;p+=2){var u=i[p]-this.imageAnchorX_,c=i[p+1]-this.imageAnchorY_;if(this.imageSnapToPixel_&&(u=Math.round(u),c=Math.round(c)),0!==s||1!=this.imageScale_){var y=u+this.imageAnchorX_,h=c+this.imageAnchorY_;ol.transform.compose(a,y,h,this.imageScale_,this.imageScale_,s,-y,-h),n.setTransform.apply(n,a)}n.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,u,c,this.imageWidth_,this.imageHeight_)}0===s&&1==this.imageScale_||n.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(n.globalAlpha=l)}},ol.render.canvas.Immediate.prototype.drawText_=function(e,t,o,r){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var i=ol.geom.flat.transform.transform2D(e,t,o,r,this.transform_,this.pixelCoordinates_),n=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);t<o;t+=r){var l=i[t]+this.textOffsetX_,s=i[t+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_){var p=ol.transform.compose(this.tmpLocalTransform_,l,s,this.textScale_,this.textScale_,a,-l,-s);n.setTransform.apply(n,p)}this.textStrokeState_&&n.strokeText(this.text_,l,s),this.textFillState_&&n.fillText(this.text_,l,s)}0===a&&1==this.textScale_||n.setTransform(1,0,0,1,0,0)}},ol.render.canvas.Immediate.prototype.moveToLineTo_=function(e,t,o,r,i){var n=this.context_,a=ol.geom.flat.transform.transform2D(e,t,o,r,this.transform_,this.pixelCoordinates_);n.moveTo(a[0],a[1]);var l=a.length;i&&(l-=2);for(var s=2;s<l;s+=2)n.lineTo(a[s],a[s+1]);return i&&n.closePath(),o},ol.render.canvas.Immediate.prototype.drawRings_=function(e,t,o,r){var i,n;for(i=0,n=o.length;i<n;++i)t=this.moveToLineTo_(e,t,o[i],r,!0);return t},ol.render.canvas.Immediate.prototype.drawCircle=function(e){if(ol.extent.intersects(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var t=ol.geom.SimpleGeometry.transform2D(e,this.transform_,this.pixelCoordinates_),o=t[2]-t[0],r=t[3]-t[1],i=Math.sqrt(o*o+r*r),n=this.context_;n.beginPath(),n.arc(t[0],t[1],i,0,2*Math.PI),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}""!==this.text_&&this.drawText_(e.getCenter(),0,2,2)}},ol.render.canvas.Immediate.prototype.setStyle=function(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())},ol.render.canvas.Immediate.prototype.drawGeometry=function(e){var t=e.getType();switch(t){case ol.geom.GeometryType.POINT:this.drawPoint(e);break;case ol.geom.GeometryType.LINE_STRING:this.drawLineString(e);break;case ol.geom.GeometryType.POLYGON:this.drawPolygon(e);break;case ol.geom.GeometryType.MULTI_POINT:this.drawMultiPoint(e);break;case ol.geom.GeometryType.MULTI_LINE_STRING:this.drawMultiLineString(e);break;case ol.geom.GeometryType.MULTI_POLYGON:this.drawMultiPolygon(e);break;case ol.geom.GeometryType.GEOMETRY_COLLECTION:this.drawGeometryCollection(e);break;case ol.geom.GeometryType.CIRCLE:this.drawCircle(e)}},ol.render.canvas.Immediate.prototype.drawFeature=function(e,t){var o=t.getGeometryFunction()(e);o&&ol.extent.intersects(this.extent_,o.getExtent())&&(this.setStyle(t),this.drawGeometry(o))},ol.render.canvas.Immediate.prototype.drawGeometryCollection=function(e){var t,o,r=e.getGeometriesArray();for(t=0,o=r.length;t<o;++t)this.drawGeometry(r[t])},ol.render.canvas.Immediate.prototype.drawPoint=function(e){var t=e.getFlatCoordinates(),o=e.getStride();this.image_&&this.drawImages_(t,0,t.length,o),""!==this.text_&&this.drawText_(t,0,t.length,o)},ol.render.canvas.Immediate.prototype.drawMultiPoint=function(e){var t=e.getFlatCoordinates(),o=e.getStride();this.image_&&this.drawImages_(t,0,t.length,o),""!==this.text_&&this.drawText_(t,0,t.length,o)},ol.render.canvas.Immediate.prototype.drawLineString=function(e){if(ol.extent.intersects(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var t=this.context_,o=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(o,0,o.length,e.getStride(),!1),t.stroke()}if(""!==this.text_){var r=e.getFlatMidpoint();this.drawText_(r,0,2,2)}}},ol.render.canvas.Immediate.prototype.drawMultiLineString=function(e){var t=e.getExtent();if(ol.extent.intersects(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var o=this.context_,r=e.getFlatCoordinates(),i=0,n=e.getEnds(),a=e.getStride();o.beginPath();var l,s;for(l=0,s=n.length;l<s;++l)i=this.moveToLineTo_(r,i,n[l],a,!1);o.stroke()}if(""!==this.text_){var p=e.getFlatMidpoints();this.drawText_(p,0,p.length,2)}}},ol.render.canvas.Immediate.prototype.drawPolygon=function(e){if(ol.extent.intersects(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(""!==this.text_){var o=e.getFlatInteriorPoint();this.drawText_(o,0,2,2)}}},ol.render.canvas.Immediate.prototype.drawMultiPolygon=function(e){if(ol.extent.intersects(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var t,o,r=this.context_,i=e.getOrientedFlatCoordinates(),n=0,a=e.getEndss(),l=e.getStride();for(r.beginPath(),t=0,o=a.length;t<o;++t){var s=a[t];n=this.drawRings_(i,n,s,l)}this.fillState_&&r.fill(),this.strokeState_&&r.stroke()}if(""!==this.text_){var p=e.getFlatInteriorPoints();this.drawText_(p,0,p.length,2)}}},ol.render.canvas.Immediate.prototype.setContextFillState_=function(e){var t=this.context_,o=this.contextFillState_;o?o.fillStyle!=e.fillStyle&&(o.fillStyle=t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})},ol.render.canvas.Immediate.prototype.setContextStrokeState_=function(e){var t=this.context_,o=this.contextStrokeState_;o?(o.lineCap!=e.lineCap&&(o.lineCap=t.lineCap=e.lineCap),ol.has.CANVAS_LINE_DASH&&(ol.array.equals(o.lineDash,e.lineDash)||t.setLineDash(o.lineDash=e.lineDash)),o.lineJoin!=e.lineJoin&&(o.lineJoin=t.lineJoin=e.lineJoin),o.lineWidth!=e.lineWidth&&(o.lineWidth=t.lineWidth=e.lineWidth),o.miterLimit!=e.miterLimit&&(o.miterLimit=t.miterLimit=e.miterLimit),o.strokeStyle!=e.strokeStyle&&(o.strokeStyle=t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,ol.has.CANVAS_LINE_DASH&&t.setLineDash(e.lineDash),t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})},ol.render.canvas.Immediate.prototype.setContextTextState_=function(e){var t=this.context_,o=this.contextTextState_;o?(o.font!=e.font&&(o.font=t.font=e.font),o.textAlign!=e.textAlign&&(o.textAlign=t.textAlign=e.textAlign),o.textBaseline!=e.textBaseline&&(o.textBaseline=t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=e.textAlign,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:e.textAlign,textBaseline:e.textBaseline})},ol.render.canvas.Immediate.prototype.setFillStrokeStyle=function(e,t){if(e){var o=e.getColor();this.fillState_={fillStyle:ol.colorlike.asColorLike(o?o:ol.render.canvas.defaultFillStyle)}}else this.fillState_=null;if(t){var r=t.getColor(),i=t.getLineCap(),n=t.getLineDash(),a=t.getLineDashOffset(),l=t.getLineJoin(),s=t.getWidth(),p=t.getMiterLimit();this.strokeState_={lineCap:void 0!==i?i:ol.render.canvas.defaultLineCap,lineDash:n?n:ol.render.canvas.defaultLineDash,lineDashOffset:a?a:ol.render.canvas.defaultLineDashOffset,lineJoin:void 0!==l?l:ol.render.canvas.defaultLineJoin,lineWidth:this.pixelRatio_*(void 0!==s?s:ol.render.canvas.defaultLineWidth),miterLimit:void 0!==p?p:ol.render.canvas.defaultMiterLimit,strokeStyle:ol.colorlike.asColorLike(r?r:ol.render.canvas.defaultStrokeStyle)}}else this.strokeState_=null},ol.render.canvas.Immediate.prototype.setImageStyle=function(e){if(e){var t=e.getAnchor(),o=e.getImage(1),r=e.getOrigin(),i=e.getSize();this.imageAnchorX_=t[0],this.imageAnchorY_=t[1],this.imageHeight_=i[1],this.image_=o,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation(),this.imageScale_=e.getScale(),this.imageSnapToPixel_=e.getSnapToPixel(),this.imageWidth_=i[0]}else this.image_=null},ol.render.canvas.Immediate.prototype.setTextStyle=function(e){if(e){var t=e.getFill();if(t){var o=t.getColor();this.textFillState_={fillStyle:ol.colorlike.asColorLike(o?o:ol.render.canvas.defaultFillStyle)}}else this.textFillState_=null;var r=e.getStroke();if(r){var i=r.getColor(),n=r.getLineCap(),a=r.getLineDash(),l=r.getLineDashOffset(),s=r.getLineJoin(),p=r.getWidth(),g=r.getMiterLimit();this.textStrokeState_={lineCap:void 0!==n?n:ol.render.canvas.defaultLineCap,lineDash:a?a:ol.render.canvas.defaultLineDash,lineDashOffset:l?l:ol.render.canvas.defaultLineDashOffset,lineJoin:void 0!==s?s:ol.render.canvas.defaultLineJoin,lineWidth:void 0!==p?p:ol.render.canvas.defaultLineWidth,miterLimit:void 0!==g?g:ol.render.canvas.defaultMiterLimit,strokeStyle:ol.colorlike.asColorLike(i?i:ol.render.canvas.defaultStrokeStyle)}}else this.textStrokeState_=null;var u=e.getFont(),c=e.getOffsetX(),y=e.getOffsetY(),h=e.getRotateWithView(),d=e.getRotation(),f=e.getScale(),m=e.getText(),v=e.getTextAlign(),_=e.getTextBaseline();this.textState_={font:void 0!==u?u:ol.render.canvas.defaultFont,textAlign:void 0!==v?v:ol.render.canvas.defaultTextAlign,textBaseline:void 0!==_?_:ol.render.canvas.defaultTextBaseline},this.text_=void 0!==m?m:"",this.textOffsetX_=void 0!==c?this.pixelRatio_*c:0,this.textOffsetY_=void 0!==y?this.pixelRatio_*y:0,this.textRotateWithView_=void 0!==h&&h,this.textRotation_=void 0!==d?d:0,this.textScale_=this.pixelRatio_*(void 0!==f?f:1)}else this.text_=""},goog.provide("ol.renderer.canvas.Map"),goog.require("ol.transform"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.css"),goog.require("ol.dom"),
goog.require("ol.layer.Layer"),goog.require("ol.render.Event"),goog.require("ol.render.EventType"),goog.require("ol.render.canvas"),goog.require("ol.render.canvas.Immediate"),goog.require("ol.renderer.Map"),goog.require("ol.renderer.Type"),goog.require("ol.source.State"),ol.renderer.canvas.Map=function(e,t){ol.renderer.Map.call(this,e,t),this.context_=ol.dom.createCanvasContext2D(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=ol.css.CLASS_UNSELECTABLE,e.insertBefore(this.canvas_,e.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=ol.transform.create()},ol.inherits(ol.renderer.canvas.Map,ol.renderer.Map),ol.renderer.canvas.Map.prototype.dispatchComposeEvent_=function(e,t){var o=this.getMap(),r=this.context_;if(o.hasListener(e)){var i=t.extent,n=t.pixelRatio,a=t.viewState,l=a.rotation,s=this.getTransform(t),p=new ol.render.canvas.Immediate(r,n,i,s,l),g=new ol.render.Event(e,p,t,r,null);o.dispatchEvent(g)}},ol.renderer.canvas.Map.prototype.getTransform=function(e){var t=e.viewState,o=this.canvas_.width/2,r=this.canvas_.height/2,i=e.pixelRatio/t.resolution,n=-i,a=-t.rotation,l=-t.center[0],s=-t.center[1];return ol.transform.compose(this.transform_,o,r,i,n,a,l,s)},ol.renderer.canvas.Map.prototype.getType=function(){return ol.renderer.Type.CANVAS},ol.renderer.canvas.Map.prototype.renderFrame=function(e){if(!e)return void(this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1));var t=this.context_,o=e.pixelRatio,r=Math.round(e.size[0]*o),i=Math.round(e.size[1]*o);this.canvas_.width!=r||this.canvas_.height!=i?(this.canvas_.width=r,this.canvas_.height=i):t.clearRect(0,0,r,i);var n=e.viewState.rotation;this.calculateMatrices2D(e),this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,e);var a=e.layerStatesArray;ol.array.stableSort(a,ol.renderer.Map.sortByZIndex),n&&(t.save(),ol.render.canvas.rotateAtOffset(t,n,r/2,i/2));var l,s,p,g,u,c=e.viewState.resolution;for(l=0,s=a.length;l<s;++l)u=a[l],p=u.layer,g=this.getLayerRenderer(p),ol.layer.Layer.visibleAtResolution(u,c)&&u.sourceState==ol.source.State.READY&&g.prepareFrame(e,u)&&g.composeFrame(e,u,t);n&&t.restore(),this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,e),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(e),this.scheduleExpireIconCache(e)},ol.renderer.canvas.Map.prototype.forEachLayerAtPixel=function(e,t,o,r,i,n){var a,l,s=t.viewState,p=s.resolution,g=t.layerStatesArray,u=g.length,c=ol.transform.apply(t.pixelToCoordinateTransform,e.slice());for(l=u-1;l>=0;--l){var y=g[l],h=y.layer;if(ol.layer.Layer.visibleAtResolution(y,p)&&i.call(n,h)){var d=this.getLayerRenderer(h);if(a=d.forEachLayerAtCoordinate(c,t,o,r))return a}}},goog.provide("ol.render.ReplayType"),ol.render.ReplayType={CIRCLE:"Circle",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"},goog.provide("ol.render.replay"),goog.require("ol.render.ReplayType"),ol.render.replay.ORDER=[ol.render.ReplayType.POLYGON,ol.render.ReplayType.CIRCLE,ol.render.ReplayType.LINE_STRING,ol.render.ReplayType.IMAGE,ol.render.ReplayType.TEXT],goog.provide("ol.render.ReplayGroup"),ol.render.ReplayGroup=function(){},ol.render.ReplayGroup.prototype.getReplay=function(e,t){},ol.render.ReplayGroup.prototype.isEmpty=function(){},goog.provide("ol.webgl.Shader"),goog.require("ol"),goog.require("ol.functions"),ol.ENABLE_WEBGL&&(ol.webgl.Shader=function(e){this.source_=e},ol.webgl.Shader.prototype.getType=function(){},ol.webgl.Shader.prototype.getSource=function(){return this.source_},ol.webgl.Shader.prototype.isAnimated=ol.functions.FALSE),goog.provide("ol.webgl.Fragment"),goog.require("ol"),goog.require("ol.webgl"),goog.require("ol.webgl.Shader"),ol.ENABLE_WEBGL&&(ol.webgl.Fragment=function(e){ol.webgl.Shader.call(this,e)},ol.inherits(ol.webgl.Fragment,ol.webgl.Shader),ol.webgl.Fragment.prototype.getType=function(){return ol.webgl.FRAGMENT_SHADER}),goog.provide("ol.webgl.Vertex"),goog.require("ol"),goog.require("ol.webgl"),goog.require("ol.webgl.Shader"),ol.ENABLE_WEBGL&&(ol.webgl.Vertex=function(e){ol.webgl.Shader.call(this,e)},ol.inherits(ol.webgl.Vertex,ol.webgl.Shader),ol.webgl.Vertex.prototype.getType=function(){return ol.webgl.VERTEX_SHADER}),goog.provide("ol.render.webgl.circlereplay.defaultshader"),goog.require("ol"),goog.require("ol.webgl.Fragment"),goog.require("ol.webgl.Vertex"),ol.ENABLE_WEBGL&&(ol.render.webgl.circlereplay.defaultshader.Fragment=function(){ol.webgl.Fragment.call(this,ol.render.webgl.circlereplay.defaultshader.Fragment.SOURCE)},ol.inherits(ol.render.webgl.circlereplay.defaultshader.Fragment,ol.webgl.Fragment),ol.render.webgl.circlereplay.defaultshader.Fragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_fillColor;\nuniform vec4 u_strokeColor;\nuniform vec2 u_size;\n\nvoid main(void) {\n  vec2 windowCenter = vec2((v_center.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_center.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  vec2 windowOffset = vec2((v_offset.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_offset.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  float radius = length(windowCenter - windowOffset);\n  float dist = length(windowCenter - gl_FragCoord.xy);\n  if (dist > radius + v_halfWidth) {\n    if (u_strokeColor.a == 0.0) {\n      gl_FragColor = u_fillColor;\n    } else {\n      gl_FragColor = u_strokeColor;\n    }\n    gl_FragColor.a = gl_FragColor.a - (dist - (radius + v_halfWidth));\n  } else if (u_fillColor.a == 0.0) {\n    // Hooray, no fill, just stroke. We can use real antialiasing.\n    gl_FragColor = u_strokeColor;\n    if (dist < radius - v_halfWidth) {\n      gl_FragColor.a = gl_FragColor.a - (radius - v_halfWidth - dist);\n    }\n  } else {\n    gl_FragColor = u_fillColor;\n    float strokeDist = radius - v_halfWidth;\n    float antialias = 2.0 * v_pixelRatio;\n    if (dist > strokeDist) {\n      gl_FragColor = u_strokeColor;\n    } else if (dist >= strokeDist - antialias) {\n      float step = smoothstep(strokeDist - antialias, strokeDist, dist);\n      gl_FragColor = mix(u_fillColor, u_strokeColor, step);\n    }\n  }\n  gl_FragColor.a = gl_FragColor.a * u_opacity;\n  if (gl_FragColor.a <= 0.0) {\n    discard;\n  }\n}\n",ol.render.webgl.circlereplay.defaultshader.Fragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;varying vec2 b;varying float c;varying float d;uniform float m;uniform vec4 n;uniform vec4 o;uniform vec2 p;void main(void){vec2 windowCenter=vec2((a.x+1.0)/2.0*p.x*d,(a.y+1.0)/2.0*p.y*d);vec2 windowOffset=vec2((b.x+1.0)/2.0*p.x*d,(b.y+1.0)/2.0*p.y*d);float radius=length(windowCenter-windowOffset);float dist=length(windowCenter-gl_FragCoord.xy);if(dist>radius+c){if(o.a==0.0){gl_FragColor=n;}else{gl_FragColor=o;}gl_FragColor.a=gl_FragColor.a-(dist-(radius+c));}else if(n.a==0.0){gl_FragColor=o;if(dist<radius-c){gl_FragColor.a=gl_FragColor.a-(radius-c-dist);}} else{gl_FragColor=n;float strokeDist=radius-c;float antialias=2.0*d;if(dist>strokeDist){gl_FragColor=o;}else if(dist>=strokeDist-antialias){float step=smoothstep(strokeDist-antialias,strokeDist,dist);gl_FragColor=mix(n,o,step);}} gl_FragColor.a=gl_FragColor.a*m;if(gl_FragColor.a<=0.0){discard;}}",ol.render.webgl.circlereplay.defaultshader.Fragment.SOURCE=ol.DEBUG_WEBGL?ol.render.webgl.circlereplay.defaultshader.Fragment.DEBUG_SOURCE:ol.render.webgl.circlereplay.defaultshader.Fragment.OPTIMIZED_SOURCE,ol.render.webgl.circlereplay.defaultshader.fragment=new ol.render.webgl.circlereplay.defaultshader.Fragment,ol.render.webgl.circlereplay.defaultshader.Vertex=function(){ol.webgl.Vertex.call(this,ol.render.webgl.circlereplay.defaultshader.Vertex.SOURCE)},ol.inherits(ol.render.webgl.circlereplay.defaultshader.Vertex,ol.webgl.Vertex),ol.render.webgl.circlereplay.defaultshader.Vertex.DEBUG_SOURCE="varying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\nattribute vec2 a_position;\nattribute float a_instruction;\nattribute float a_radius;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  v_center = vec4(u_projectionMatrix * vec4(a_position, 0.0, 1.0)).xy;\n  v_pixelRatio = u_pixelRatio;\n  float lineWidth = u_lineWidth * u_pixelRatio;\n  v_halfWidth = lineWidth / 2.0;\n  if (lineWidth == 0.0) {\n    lineWidth = 2.0 * u_pixelRatio;\n  }\n  vec2 offset;\n  // Radius with anitaliasing (roughly).\n  float radius = a_radius + 3.0 * u_pixelRatio;\n  // Until we get gl_VertexID in WebGL, we store an instruction.\n  if (a_instruction == 0.0) {\n    // Offsetting the edges of the triangle by lineWidth / 2 is necessary, however\n    // we should also leave some space for the antialiasing, thus we offset by lineWidth.\n    offset = vec2(-1.0, 1.0);\n  } else if (a_instruction == 1.0) {\n    offset = vec2(-1.0, -1.0);\n  } else if (a_instruction == 2.0) {\n    offset = vec2(1.0, -1.0);\n  } else {\n    offset = vec2(1.0, 1.0);\n  }\n\n  gl_Position = u_projectionMatrix * vec4(a_position + offset * radius, 0.0, 1.0) +\n      offsetMatrix * vec4(offset * lineWidth, 0.0, 0.0);\n  v_offset = vec4(u_projectionMatrix * vec4(a_position.x + a_radius, a_position.y,\n      0.0, 1.0)).xy;\n\n  if (distance(v_center, v_offset) > 20000.0) {\n    gl_Position = vec4(v_center, 0.0, 1.0);\n  }\n}\n\n\n",ol.render.webgl.circlereplay.defaultshader.Vertex.OPTIMIZED_SOURCE="varying vec2 a;varying vec2 b;varying float c;varying float d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;void main(void){mat4 offsetMatrix=i*j;a=vec4(h*vec4(e,0.0,1.0)).xy;d=l;float lineWidth=k*l;c=lineWidth/2.0;if(lineWidth==0.0){lineWidth=2.0*l;}vec2 offset;float radius=g+3.0*l;if(f==0.0){offset=vec2(-1.0,1.0);}else if(f==1.0){offset=vec2(-1.0,-1.0);}else if(f==2.0){offset=vec2(1.0,-1.0);}else{offset=vec2(1.0,1.0);}gl_Position=h*vec4(e+offset*radius,0.0,1.0)+offsetMatrix*vec4(offset*lineWidth,0.0,0.0);b=vec4(h*vec4(e.x+g,e.y,0.0,1.0)).xy;if(distance(a,b)>20000.0){gl_Position=vec4(a,0.0,1.0);}}",ol.render.webgl.circlereplay.defaultshader.Vertex.SOURCE=ol.DEBUG_WEBGL?ol.render.webgl.circlereplay.defaultshader.Vertex.DEBUG_SOURCE:ol.render.webgl.circlereplay.defaultshader.Vertex.OPTIMIZED_SOURCE,ol.render.webgl.circlereplay.defaultshader.vertex=new ol.render.webgl.circlereplay.defaultshader.Vertex,ol.render.webgl.circlereplay.defaultshader.Locations=function(e,t){this.u_fillColor=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_fillColor":"n"),this.u_lineWidth=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_lineWidth":"k"),this.u_offsetRotateMatrix=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_offsetRotateMatrix":"j"),this.u_offsetScaleMatrix=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_offsetScaleMatrix":"i"),this.u_opacity=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_opacity":"m"),this.u_pixelRatio=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_pixelRatio":"l"),this.u_projectionMatrix=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_projectionMatrix":"h"),this.u_size=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_size":"p"),this.u_strokeColor=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_strokeColor":"o"),this.a_instruction=e.getAttribLocation(t,ol.DEBUG_WEBGL?"a_instruction":"f"),this.a_position=e.getAttribLocation(t,ol.DEBUG_WEBGL?"a_position":"e"),this.a_radius=e.getAttribLocation(t,ol.DEBUG_WEBGL?"a_radius":"g")}),goog.provide("ol.vec.Mat4"),ol.vec.Mat4.create=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},ol.vec.Mat4.fromTransform=function(e,t){return e[0]=t[0],e[1]=t[1],e[4]=t[2],e[5]=t[3],e[12]=t[4],e[13]=t[5],e},goog.provide("ol.render.webgl.Replay"),goog.require("ol"),goog.require("ol.extent"),goog.require("ol.render.VectorContext"),goog.require("ol.transform"),goog.require("ol.vec.Mat4"),goog.require("ol.webgl"),ol.ENABLE_WEBGL&&(ol.render.webgl.Replay=function(e,t){ol.render.VectorContext.call(this),this.tolerance=e,this.maxExtent=t,this.origin=ol.extent.getCenter(t),this.projectionMatrix_=ol.transform.create(),this.offsetRotateMatrix_=ol.transform.create(),this.offsetScaleMatrix_=ol.transform.create(),this.tmpMat4_=ol.vec.Mat4.create(),this.indices=[],this.indicesBuffer=null,this.startIndices=[],this.startIndicesFeature=[],this.vertices=[],this.verticesBuffer=null,this.lineStringReplay=void 0},ol.inherits(ol.render.webgl.Replay,ol.render.VectorContext),ol.render.webgl.Replay.prototype.getDeleteResourcesFunction=function(e){},ol.render.webgl.Replay.prototype.finish=function(e){},ol.render.webgl.Replay.prototype.setUpProgram=function(e,t,o,r){},ol.render.webgl.Replay.prototype.shutDownProgram=function(e,t){},ol.render.webgl.Replay.prototype.drawReplay=function(e,t,o,r){},ol.render.webgl.Replay.prototype.drawHitDetectionReplayOneByOne=function(e,t,o,r,i){},ol.render.webgl.Replay.prototype.drawHitDetectionReplay=function(e,t,o,r,i,n){return i?this.drawHitDetectionReplayOneByOne(e,t,o,r,n):this.drawHitDetectionReplayAll(e,t,o,r)},ol.render.webgl.Replay.prototype.drawHitDetectionReplayAll=function(e,t,o,r){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this.drawReplay(e,t,o,!0);var i=r(null);return i?i:void 0},ol.render.webgl.Replay.prototype.replay=function(e,t,o,r,i,n,a,l,s,p,g){var u,c,y,h,d,f,m,v,_=e.getGL();this.lineStringReplay&&(u=_.isEnabled(_.STENCIL_TEST),c=_.getParameter(_.STENCIL_FUNC),y=_.getParameter(_.STENCIL_VALUE_MASK),h=_.getParameter(_.STENCIL_REF),d=_.getParameter(_.STENCIL_WRITEMASK),f=_.getParameter(_.STENCIL_FAIL),m=_.getParameter(_.STENCIL_PASS_DEPTH_PASS),v=_.getParameter(_.STENCIL_PASS_DEPTH_FAIL),_.enable(_.STENCIL_TEST),_.clear(_.STENCIL_BUFFER_BIT),_.stencilMask(255),_.stencilFunc(_.ALWAYS,1,255),_.stencilOp(_.KEEP,_.KEEP,_.REPLACE),this.lineStringReplay.replay(e,t,o,r,i,n,a,l,s,p,g),_.stencilMask(0),_.stencilFunc(_.NOTEQUAL,1,255)),e.bindBuffer(ol.webgl.ARRAY_BUFFER,this.verticesBuffer),e.bindBuffer(ol.webgl.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);var S=this.setUpProgram(_,e,i,n),x=ol.transform.reset(this.projectionMatrix_);ol.transform.scale(x,2/(o*i[0]),2/(o*i[1])),ol.transform.rotate(x,-r),ol.transform.translate(x,-(t[0]-this.origin[0]),-(t[1]-this.origin[1]));var E=ol.transform.reset(this.offsetScaleMatrix_);ol.transform.scale(E,2/i[0],2/i[1]);var P=ol.transform.reset(this.offsetRotateMatrix_);0!==r&&ol.transform.rotate(P,-r),_.uniformMatrix4fv(S.u_projectionMatrix,!1,ol.vec.Mat4.fromTransform(this.tmpMat4_,x)),_.uniformMatrix4fv(S.u_offsetScaleMatrix,!1,ol.vec.Mat4.fromTransform(this.tmpMat4_,E)),_.uniformMatrix4fv(S.u_offsetRotateMatrix,!1,ol.vec.Mat4.fromTransform(this.tmpMat4_,P)),_.uniform1f(S.u_opacity,a);var T;return void 0===s?this.drawReplay(_,e,l,!1):T=this.drawHitDetectionReplay(_,e,l,s,p,g),this.shutDownProgram(_,S),this.lineStringReplay&&(u||_.disable(_.STENCIL_TEST),_.clear(_.STENCIL_BUFFER_BIT),_.stencilFunc(c,h,y),_.stencilMask(d),_.stencilOp(f,v,m)),T},ol.render.webgl.Replay.prototype.drawElements=function(e,t,o,r){var i=t.hasOESElementIndexUint?ol.webgl.UNSIGNED_INT:ol.webgl.UNSIGNED_SHORT,n=t.hasOESElementIndexUint?4:2,a=r-o,l=o*n;e.drawElements(ol.webgl.TRIANGLES,a,i,l)}),goog.provide("ol.render.webgl"),goog.require("ol"),ol.ENABLE_WEBGL&&(ol.render.webgl.defaultFillStyle=[0,0,0,1],ol.render.webgl.defaultLineCap="round",ol.render.webgl.defaultLineDash=[],ol.render.webgl.defaultLineDashOffset=0,ol.render.webgl.defaultLineJoin="round",ol.render.webgl.defaultMiterLimit=10,ol.render.webgl.defaultStrokeStyle=[0,0,0,1],ol.render.webgl.defaultLineWidth=1,ol.render.webgl.triangleIsCounterClockwise=function(e,t,o,r,i,n){var a=(o-e)*(n-t)-(i-e)*(r-t);return a<=ol.render.webgl.EPSILON&&a>=-ol.render.webgl.EPSILON?void 0:a>0},ol.render.webgl.EPSILON=Number.EPSILON||2.220446049250313e-16),goog.provide("ol.webgl.Buffer"),goog.require("ol"),goog.require("ol.webgl"),ol.ENABLE_WEBGL&&(ol.webgl.Buffer=function(e,t){this.arr_=void 0!==e?e:[],this.usage_=void 0!==t?t:ol.webgl.Buffer.Usage_.STATIC_DRAW},ol.webgl.Buffer.prototype.getArray=function(){return this.arr_},ol.webgl.Buffer.prototype.getUsage=function(){return this.usage_},ol.webgl.Buffer.Usage_={STATIC_DRAW:ol.webgl.STATIC_DRAW,STREAM_DRAW:ol.webgl.STREAM_DRAW,DYNAMIC_DRAW:ol.webgl.DYNAMIC_DRAW}),goog.provide("ol.render.webgl.CircleReplay");goog.require("ol");goog.require("ol.array"),goog.require("ol.color"),goog.require("ol.extent"),goog.require("ol.obj"),goog.require("ol.geom.flat.transform"),goog.require("ol.render.webgl.circlereplay.defaultshader"),goog.require("ol.render.webgl.Replay"),goog.require("ol.render.webgl"),goog.require("ol.webgl"),goog.require("ol.webgl.Buffer"),ol.ENABLE_WEBGL&&(ol.render.webgl.CircleReplay=function(e,t){ol.render.webgl.Replay.call(this,e,t),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.radius_=0,this.state_={fillColor:null,strokeColor:null,lineDash:null,lineDashOffset:void 0,lineWidth:void 0,changed:!1}},ol.inherits(ol.render.webgl.CircleReplay,ol.render.webgl.Replay),ol.render.webgl.CircleReplay.prototype.drawCoordinates_=function(e,t,o,r){var i,n,a=this.vertices.length,l=this.indices.length,s=a/4;for(i=t,n=o;i<n;i+=r)this.vertices[a++]=e[i],this.vertices[a++]=e[i+1],this.vertices[a++]=0,this.vertices[a++]=this.radius_,this.vertices[a++]=e[i],this.vertices[a++]=e[i+1],this.vertices[a++]=1,this.vertices[a++]=this.radius_,this.vertices[a++]=e[i],this.vertices[a++]=e[i+1],this.vertices[a++]=2,this.vertices[a++]=this.radius_,this.vertices[a++]=e[i],this.vertices[a++]=e[i+1],this.vertices[a++]=3,this.vertices[a++]=this.radius_,this.indices[l++]=s,this.indices[l++]=s+1,this.indices[l++]=s+2,this.indices[l++]=s+2,this.indices[l++]=s+3,this.indices[l++]=s,s+=4},ol.render.webgl.CircleReplay.prototype.drawCircle=function(e,t){var o=e.getRadius(),r=e.getStride();if(o){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(t),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.radius_=o;var i=e.getFlatCoordinates();i=ol.geom.flat.transform.translate(i,0,2,r,-this.origin[0],-this.origin[1]),this.drawCoordinates_(i,0,2,r)}else if(this.state_.changed&&(this.styles_.pop(),this.styles_.length)){var n=this.styles_[this.styles_.length-1];this.state_.fillColor=n[0],this.state_.strokeColor=n[1],this.state_.lineWidth=n[2],this.state_.changed=!1}},ol.render.webgl.CircleReplay.prototype.finish=function(e){this.verticesBuffer=new ol.webgl.Buffer(this.vertices),this.indicesBuffer=new ol.webgl.Buffer(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},ol.render.webgl.CircleReplay.prototype.getDeleteResourcesFunction=function(e){var t=this.verticesBuffer,o=this.indicesBuffer;return function(){e.deleteBuffer(t),e.deleteBuffer(o)}},ol.render.webgl.CircleReplay.prototype.setUpProgram=function(e,t,o,r){var i,n;i=ol.render.webgl.circlereplay.defaultshader.fragment,n=ol.render.webgl.circlereplay.defaultshader.vertex;var a,l=t.getProgram(i,n);return this.defaultLocations_?a=this.defaultLocations_:(a=new ol.render.webgl.circlereplay.defaultshader.Locations(e,l),this.defaultLocations_=a),t.useProgram(l),e.enableVertexAttribArray(a.a_position),e.vertexAttribPointer(a.a_position,2,ol.webgl.FLOAT,!1,16,0),e.enableVertexAttribArray(a.a_instruction),e.vertexAttribPointer(a.a_instruction,1,ol.webgl.FLOAT,!1,16,8),e.enableVertexAttribArray(a.a_radius),e.vertexAttribPointer(a.a_radius,1,ol.webgl.FLOAT,!1,16,12),e.uniform2fv(a.u_size,o),e.uniform1f(a.u_pixelRatio,r),a},ol.render.webgl.CircleReplay.prototype.shutDownProgram=function(e,t){e.disableVertexAttribArray(t.a_position),e.disableVertexAttribArray(t.a_instruction),e.disableVertexAttribArray(t.a_radius)},ol.render.webgl.CircleReplay.prototype.drawReplay=function(e,t,o,r){if(ol.obj.isEmpty(o)){var i,n,a,l;for(a=this.startIndices[this.startIndices.length-1],i=this.styleIndices_.length-1;i>=0;--i)n=this.styleIndices_[i],l=this.styles_[i],this.setFillStyle_(e,l[0]),this.setStrokeStyle_(e,l[1],l[2]),this.drawElements(e,t,n,a),a=n}else this.drawReplaySkipping_(e,t,o)},ol.render.webgl.CircleReplay.prototype.drawHitDetectionReplayOneByOne=function(e,t,o,r,i){var n,a,l,s,p,g,u,c;for(c=this.startIndices.length-2,l=this.startIndices[c+1],n=this.styleIndices_.length-1;n>=0;--n)for(s=this.styles_[n],this.setFillStyle_(e,s[0]),this.setStrokeStyle_(e,s[1],s[2]),p=this.styleIndices_[n];c>=0&&this.startIndices[c]>=p;){if(a=this.startIndices[c],g=this.startIndicesFeature[c],u=ol.getUid(g).toString(),void 0===o[u]&&g.getGeometry()&&(void 0===i||ol.extent.intersects(i,g.getGeometry().getExtent()))){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this.drawElements(e,t,a,l);var y=r(g);if(y)return y}c--,l=a}},ol.render.webgl.CircleReplay.prototype.drawReplaySkipping_=function(e,t,o){var r,i,n,a,l,s,p,g,u;for(g=this.startIndices.length-2,n=i=this.startIndices[g+1],r=this.styleIndices_.length-1;r>=0;--r){for(a=this.styles_[r],this.setFillStyle_(e,a[0]),this.setStrokeStyle_(e,a[1],a[2]),l=this.styleIndices_[r];g>=0&&this.startIndices[g]>=l;)u=this.startIndices[g],s=this.startIndicesFeature[g],p=ol.getUid(s).toString(),o[p]&&(i!==n&&this.drawElements(e,t,i,n),n=u),g--,i=u;i!==n&&this.drawElements(e,t,i,n),i=n=l}},ol.render.webgl.CircleReplay.prototype.setFillStyle_=function(e,t){e.uniform4fv(this.defaultLocations_.u_fillColor,t)},ol.render.webgl.CircleReplay.prototype.setStrokeStyle_=function(e,t,o){e.uniform4fv(this.defaultLocations_.u_strokeColor,t),e.uniform1f(this.defaultLocations_.u_lineWidth,o)},ol.render.webgl.CircleReplay.prototype.setFillStrokeStyle=function(e,t){var o,r;if(t){var i=t.getLineDash();this.state_.lineDash=i?i:ol.render.webgl.defaultLineDash;var n=t.getLineDashOffset();this.state_.lineDashOffset=n?n:ol.render.webgl.defaultLineDashOffset,o=t.getColor(),o=o instanceof CanvasGradient||o instanceof CanvasPattern?ol.render.webgl.defaultStrokeStyle:ol.color.asArray(o).map(function(e,t){return 3!=t?e/255:e})||ol.render.webgl.defaultStrokeStyle,r=t.getWidth(),r=void 0!==r?r:ol.render.webgl.defaultLineWidth}else o=[0,0,0,0],r=0;var a=e?e.getColor():[0,0,0,0];a=a instanceof CanvasGradient||a instanceof CanvasPattern?ol.render.webgl.defaultFillStyle:ol.color.asArray(a).map(function(e,t){return 3!=t?e/255:e})||ol.render.webgl.defaultFillStyle,this.state_.strokeColor&&ol.array.equals(this.state_.strokeColor,o)&&this.state_.fillColor&&ol.array.equals(this.state_.fillColor,a)&&this.state_.lineWidth===r||(this.state_.changed=!0,this.state_.fillColor=a,this.state_.strokeColor=o,this.state_.lineWidth=r,this.styles_.push([a,o,r]))}),goog.provide("ol.render.webgl.imagereplay.defaultshader"),goog.require("ol"),goog.require("ol.webgl.Fragment"),goog.require("ol.webgl.Vertex"),ol.ENABLE_WEBGL&&(ol.render.webgl.imagereplay.defaultshader.Fragment=function(){ol.webgl.Fragment.call(this,ol.render.webgl.imagereplay.defaultshader.Fragment.SOURCE)},ol.inherits(ol.render.webgl.imagereplay.defaultshader.Fragment,ol.webgl.Fragment),ol.render.webgl.imagereplay.defaultshader.Fragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n",ol.render.webgl.imagereplay.defaultshader.Fragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}",ol.render.webgl.imagereplay.defaultshader.Fragment.SOURCE=ol.DEBUG_WEBGL?ol.render.webgl.imagereplay.defaultshader.Fragment.DEBUG_SOURCE:ol.render.webgl.imagereplay.defaultshader.Fragment.OPTIMIZED_SOURCE,ol.render.webgl.imagereplay.defaultshader.fragment=new ol.render.webgl.imagereplay.defaultshader.Fragment,ol.render.webgl.imagereplay.defaultshader.Vertex=function(){ol.webgl.Vertex.call(this,ol.render.webgl.imagereplay.defaultshader.Vertex.SOURCE)},ol.inherits(ol.render.webgl.imagereplay.defaultshader.Vertex,ol.webgl.Vertex),ol.render.webgl.imagereplay.defaultshader.Vertex.DEBUG_SOURCE="varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n",ol.render.webgl.imagereplay.defaultshader.Vertex.OPTIMIZED_SOURCE="varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.0,0.0);gl_Position=h*vec4(c,0.0,1.0)+offsets;a=d;b=f;}",ol.render.webgl.imagereplay.defaultshader.Vertex.SOURCE=ol.DEBUG_WEBGL?ol.render.webgl.imagereplay.defaultshader.Vertex.DEBUG_SOURCE:ol.render.webgl.imagereplay.defaultshader.Vertex.OPTIMIZED_SOURCE,ol.render.webgl.imagereplay.defaultshader.vertex=new ol.render.webgl.imagereplay.defaultshader.Vertex,ol.render.webgl.imagereplay.defaultshader.Locations=function(e,t){this.u_image=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_image":"l"),this.u_offsetRotateMatrix=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_offsetRotateMatrix":"j"),this.u_offsetScaleMatrix=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_offsetScaleMatrix":"i"),this.u_opacity=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_opacity":"k"),this.u_projectionMatrix=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_projectionMatrix":"h"),this.a_offsets=e.getAttribLocation(t,ol.DEBUG_WEBGL?"a_offsets":"e"),this.a_opacity=e.getAttribLocation(t,ol.DEBUG_WEBGL?"a_opacity":"f"),this.a_position=e.getAttribLocation(t,ol.DEBUG_WEBGL?"a_position":"c"),this.a_rotateWithView=e.getAttribLocation(t,ol.DEBUG_WEBGL?"a_rotateWithView":"g"),this.a_texCoord=e.getAttribLocation(t,ol.DEBUG_WEBGL?"a_texCoord":"d")}),goog.provide("ol.webgl.ContextEventType"),ol.webgl.ContextEventType={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"},goog.provide("ol.webgl.Context"),goog.require("ol"),goog.require("ol.Disposable"),goog.require("ol.array"),goog.require("ol.events"),goog.require("ol.obj"),goog.require("ol.webgl"),goog.require("ol.webgl.ContextEventType"),ol.ENABLE_WEBGL&&(ol.webgl.Context=function(e,t){this.canvas_=e,this.gl_=t,this.bufferCache_={},this.shaderCache_={},this.programCache_={},this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null,this.hasOESElementIndexUint=ol.array.includes(ol.WEBGL_EXTENSIONS,"OES_element_index_uint"),this.hasOESElementIndexUint&&t.getExtension("OES_element_index_uint"),ol.events.listen(this.canvas_,ol.webgl.ContextEventType.LOST,this.handleWebGLContextLost,this),ol.events.listen(this.canvas_,ol.webgl.ContextEventType.RESTORED,this.handleWebGLContextRestored,this)},ol.inherits(ol.webgl.Context,ol.Disposable),ol.webgl.Context.prototype.bindBuffer=function(e,t){var o=this.getGL(),r=t.getArray(),i=String(ol.getUid(t));if(i in this.bufferCache_){var n=this.bufferCache_[i];o.bindBuffer(e,n.buffer)}else{var a=o.createBuffer();o.bindBuffer(e,a);var l;e==ol.webgl.ARRAY_BUFFER?l=new Float32Array(r):e==ol.webgl.ELEMENT_ARRAY_BUFFER&&(l=this.hasOESElementIndexUint?new Uint32Array(r):new Uint16Array(r)),o.bufferData(e,l,t.getUsage()),this.bufferCache_[i]={buf:t,buffer:a}}},ol.webgl.Context.prototype.deleteBuffer=function(e){var t=this.getGL(),o=String(ol.getUid(e)),r=this.bufferCache_[o];t.isContextLost()||t.deleteBuffer(r.buffer),delete this.bufferCache_[o]},ol.webgl.Context.prototype.disposeInternal=function(){ol.events.unlistenAll(this.canvas_);var e=this.getGL();if(!e.isContextLost()){var t;for(t in this.bufferCache_)e.deleteBuffer(this.bufferCache_[t].buffer);for(t in this.programCache_)e.deleteProgram(this.programCache_[t]);for(t in this.shaderCache_)e.deleteShader(this.shaderCache_[t]);e.deleteFramebuffer(this.hitDetectionFramebuffer_),e.deleteRenderbuffer(this.hitDetectionRenderbuffer_),e.deleteTexture(this.hitDetectionTexture_)}},ol.webgl.Context.prototype.getCanvas=function(){return this.canvas_},ol.webgl.Context.prototype.getGL=function(){return this.gl_},ol.webgl.Context.prototype.getHitDetectionFramebuffer=function(){return this.hitDetectionFramebuffer_||this.initHitDetectionFramebuffer_(),this.hitDetectionFramebuffer_},ol.webgl.Context.prototype.getShader=function(e){var t=String(ol.getUid(e));if(t in this.shaderCache_)return this.shaderCache_[t];var o=this.getGL(),r=o.createShader(e.getType());return o.shaderSource(r,e.getSource()),o.compileShader(r),this.shaderCache_[t]=r,r},ol.webgl.Context.prototype.getProgram=function(e,t){var o=ol.getUid(e)+"/"+ol.getUid(t);if(o in this.programCache_)return this.programCache_[o];var r=this.getGL(),i=r.createProgram();return r.attachShader(i,this.getShader(e)),r.attachShader(i,this.getShader(t)),r.linkProgram(i),this.programCache_[o]=i,i},ol.webgl.Context.prototype.handleWebGLContextLost=function(){ol.obj.clear(this.bufferCache_),ol.obj.clear(this.shaderCache_),ol.obj.clear(this.programCache_),this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null},ol.webgl.Context.prototype.handleWebGLContextRestored=function(){},ol.webgl.Context.prototype.initHitDetectionFramebuffer_=function(){var e=this.gl_,t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);var o=ol.webgl.Context.createEmptyTexture(e,1,1),r=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,r),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,1,1),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,r),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),this.hitDetectionFramebuffer_=t,this.hitDetectionTexture_=o,this.hitDetectionRenderbuffer_=r},ol.webgl.Context.prototype.useProgram=function(e){if(e==this.currentProgram_)return!1;var t=this.getGL();return t.useProgram(e),this.currentProgram_=e,!0},ol.webgl.Context.createTexture_=function(e,t,o){var r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),void 0!==t&&e.texParameteri(ol.webgl.TEXTURE_2D,ol.webgl.TEXTURE_WRAP_S,t),void 0!==o&&e.texParameteri(ol.webgl.TEXTURE_2D,ol.webgl.TEXTURE_WRAP_T,o),r},ol.webgl.Context.createEmptyTexture=function(e,t,o,r,i){var n=ol.webgl.Context.createTexture_(e,r,i);return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,o,0,e.RGBA,e.UNSIGNED_BYTE,null),n},ol.webgl.Context.createTexture=function(e,t,o,r){var i=ol.webgl.Context.createTexture_(e,o,r);return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),i}),goog.provide("ol.render.webgl.ImageReplay"),goog.require("ol"),goog.require("ol.extent"),goog.require("ol.obj"),goog.require("ol.render.webgl.imagereplay.defaultshader"),goog.require("ol.render.webgl.Replay"),goog.require("ol.webgl"),
goog.require("ol.webgl.Buffer"),goog.require("ol.webgl.Context"),ol.ENABLE_WEBGL&&(ol.render.webgl.ImageReplay=function(e,t){ol.render.webgl.Replay.call(this,e,t),this.anchorX_=void 0,this.anchorY_=void 0,this.groupIndices_=[],this.hitDetectionGroupIndices_=[],this.height_=void 0,this.images_=[],this.hitDetectionImages_=[],this.imageHeight_=void 0,this.imageWidth_=void 0,this.defaultLocations_=null,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.textures_=[],this.hitDetectionTextures_=[],this.width_=void 0},ol.inherits(ol.render.webgl.ImageReplay,ol.render.webgl.Replay),ol.render.webgl.ImageReplay.prototype.getDeleteResourcesFunction=function(e){var t=this.verticesBuffer,o=this.indicesBuffer,r=this.textures_,i=this.hitDetectionTextures_,n=e.getGL();return function(){if(!n.isContextLost()){var a,l;for(a=0,l=r.length;a<l;++a)n.deleteTexture(r[a]);for(a=0,l=i.length;a<l;++a)n.deleteTexture(i[a])}e.deleteBuffer(t),e.deleteBuffer(o)}},ol.render.webgl.ImageReplay.prototype.drawCoordinates_=function(e,t,o,r){var i,n,a,l,s,p,g=this.anchorX_,u=this.anchorY_,c=this.height_,y=this.imageHeight_,h=this.imageWidth_,d=this.opacity_,f=this.originX_,m=this.originY_,v=this.rotateWithView_?1:0,_=-this.rotation_,S=this.scale_,x=this.width_,E=Math.cos(_),P=Math.sin(_),T=this.indices.length,R=this.vertices.length;for(i=t;i<o;i+=r)s=e[i]-this.origin[0],p=e[i+1]-this.origin[1],n=R/8,a=-S*g,l=-S*(c-u),this.vertices[R++]=s,this.vertices[R++]=p,this.vertices[R++]=a*E-l*P,this.vertices[R++]=a*P+l*E,this.vertices[R++]=f/h,this.vertices[R++]=(m+c)/y,this.vertices[R++]=d,this.vertices[R++]=v,a=S*(x-g),l=-S*(c-u),this.vertices[R++]=s,this.vertices[R++]=p,this.vertices[R++]=a*E-l*P,this.vertices[R++]=a*P+l*E,this.vertices[R++]=(f+x)/h,this.vertices[R++]=(m+c)/y,this.vertices[R++]=d,this.vertices[R++]=v,a=S*(x-g),l=S*u,this.vertices[R++]=s,this.vertices[R++]=p,this.vertices[R++]=a*E-l*P,this.vertices[R++]=a*P+l*E,this.vertices[R++]=(f+x)/h,this.vertices[R++]=m/y,this.vertices[R++]=d,this.vertices[R++]=v,a=-S*g,l=S*u,this.vertices[R++]=s,this.vertices[R++]=p,this.vertices[R++]=a*E-l*P,this.vertices[R++]=a*P+l*E,this.vertices[R++]=f/h,this.vertices[R++]=m/y,this.vertices[R++]=d,this.vertices[R++]=v,this.indices[T++]=n,this.indices[T++]=n+1,this.indices[T++]=n+2,this.indices[T++]=n,this.indices[T++]=n+2,this.indices[T++]=n+3;return R},ol.render.webgl.ImageReplay.prototype.drawMultiPoint=function(e,t){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(t);var o=e.getFlatCoordinates(),r=e.getStride();this.drawCoordinates_(o,0,o.length,r)},ol.render.webgl.ImageReplay.prototype.drawPoint=function(e,t){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(t);var o=e.getFlatCoordinates(),r=e.getStride();this.drawCoordinates_(o,0,o.length,r)},ol.render.webgl.ImageReplay.prototype.finish=function(e){var t=e.getGL();this.groupIndices_.push(this.indices.length),this.hitDetectionGroupIndices_.push(this.indices.length),this.verticesBuffer=new ol.webgl.Buffer(this.vertices);var o=this.indices;this.indicesBuffer=new ol.webgl.Buffer(o);var r={};this.createTextures_(this.textures_,this.images_,r,t),this.createTextures_(this.hitDetectionTextures_,this.hitDetectionImages_,r,t),this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.images_=null,this.hitDetectionImages_=null,this.imageHeight_=void 0,this.imageWidth_=void 0,this.indices=null,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.vertices=null,this.width_=void 0},ol.render.webgl.ImageReplay.prototype.createTextures_=function(e,t,o,r){var i,n,a,l,s=t.length;for(l=0;l<s;++l)n=t[l],a=ol.getUid(n).toString(),a in o?i=o[a]:(i=ol.webgl.Context.createTexture(r,n,ol.webgl.CLAMP_TO_EDGE,ol.webgl.CLAMP_TO_EDGE),o[a]=i),e[l]=i},ol.render.webgl.ImageReplay.prototype.setUpProgram=function(e,t,o,r){var i,n=ol.render.webgl.imagereplay.defaultshader.fragment,a=ol.render.webgl.imagereplay.defaultshader.vertex,l=t.getProgram(n,a);return this.defaultLocations_?i=this.defaultLocations_:(i=new ol.render.webgl.imagereplay.defaultshader.Locations(e,l),this.defaultLocations_=i),t.useProgram(l),e.enableVertexAttribArray(i.a_position),e.vertexAttribPointer(i.a_position,2,ol.webgl.FLOAT,!1,32,0),e.enableVertexAttribArray(i.a_offsets),e.vertexAttribPointer(i.a_offsets,2,ol.webgl.FLOAT,!1,32,8),e.enableVertexAttribArray(i.a_texCoord),e.vertexAttribPointer(i.a_texCoord,2,ol.webgl.FLOAT,!1,32,16),e.enableVertexAttribArray(i.a_opacity),e.vertexAttribPointer(i.a_opacity,1,ol.webgl.FLOAT,!1,32,24),e.enableVertexAttribArray(i.a_rotateWithView),e.vertexAttribPointer(i.a_rotateWithView,1,ol.webgl.FLOAT,!1,32,28),i},ol.render.webgl.ImageReplay.prototype.shutDownProgram=function(e,t){e.disableVertexAttribArray(t.a_position),e.disableVertexAttribArray(t.a_offsets),e.disableVertexAttribArray(t.a_texCoord),e.disableVertexAttribArray(t.a_opacity),e.disableVertexAttribArray(t.a_rotateWithView)},ol.render.webgl.ImageReplay.prototype.drawReplay=function(e,t,o,r){var i=r?this.hitDetectionTextures_:this.textures_,n=r?this.hitDetectionGroupIndices_:this.groupIndices_;if(ol.obj.isEmpty(o)){var a,l,s;for(a=0,l=i.length,s=0;a<l;++a){e.bindTexture(ol.webgl.TEXTURE_2D,i[a]);var p=n[a];this.drawElements(e,t,s,p),s=p}}else this.drawReplaySkipping_(e,t,o,i,n)},ol.render.webgl.ImageReplay.prototype.drawReplaySkipping_=function(e,t,o,r,i){var n,a,l=0;for(n=0,a=r.length;n<a;++n){e.bindTexture(ol.webgl.TEXTURE_2D,r[n]);for(var s=n>0?i[n-1]:0,p=i[n],g=s,u=s;l<this.startIndices.length&&this.startIndices[l]<=p;){var c=this.startIndicesFeature[l],y=ol.getUid(c).toString();void 0!==o[y]?(g!==u&&this.drawElements(e,t,g,u),g=l===this.startIndices.length-1?p:this.startIndices[l+1],u=g):u=l===this.startIndices.length-1?p:this.startIndices[l+1],l++}g!==u&&this.drawElements(e,t,g,u)}},ol.render.webgl.ImageReplay.prototype.drawHitDetectionReplayOneByOne=function(e,t,o,r,i){var n,a,l,s,p,g,u=this.startIndices.length-1;for(n=this.hitDetectionTextures_.length-1;n>=0;--n)for(e.bindTexture(ol.webgl.TEXTURE_2D,this.hitDetectionTextures_[n]),a=n>0?this.hitDetectionGroupIndices_[n-1]:0,s=this.hitDetectionGroupIndices_[n];u>=0&&this.startIndices[u]>=a;){if(l=this.startIndices[u],p=this.startIndicesFeature[u],g=ol.getUid(p).toString(),void 0===o[g]&&p.getGeometry()&&(void 0===i||ol.extent.intersects(i,p.getGeometry().getExtent()))){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this.drawElements(e,t,l,s);var c=r(p);if(c)return c}s=l,u--}},ol.render.webgl.ImageReplay.prototype.setImageStyle=function(e){var t,o=e.getAnchor(),r=e.getImage(1),i=e.getImageSize(),n=e.getHitDetectionImage(1),a=e.getOpacity(),l=e.getOrigin(),s=e.getRotateWithView(),p=e.getRotation(),g=e.getSize(),u=e.getScale();0===this.images_.length?this.images_.push(r):(t=this.images_[this.images_.length-1],ol.getUid(t)!=ol.getUid(r)&&(this.groupIndices_.push(this.indices.length),this.images_.push(r))),0===this.hitDetectionImages_.length?this.hitDetectionImages_.push(n):(t=this.hitDetectionImages_[this.hitDetectionImages_.length-1],ol.getUid(t)!=ol.getUid(n)&&(this.hitDetectionGroupIndices_.push(this.indices.length),this.hitDetectionImages_.push(n))),this.anchorX_=o[0],this.anchorY_=o[1],this.height_=g[1],this.imageHeight_=i[1],this.imageWidth_=i[0],this.opacity_=a,this.originX_=l[0],this.originY_=l[1],this.rotation_=p,this.rotateWithView_=s,this.scale_=u,this.width_=g[0]}),goog.provide("ol.geom.flat.topology"),goog.require("ol.geom.flat.area"),ol.geom.flat.topology.lineStringIsClosed=function(e,t,o,r){var i=o-r;return e[t]===e[i]&&e[t+1]===e[i+1]&&(o-t)/r>3&&!!ol.geom.flat.area.linearRing(e,t,o,r)},goog.provide("ol.render.webgl.linestringreplay.defaultshader"),goog.require("ol"),goog.require("ol.webgl.Fragment"),goog.require("ol.webgl.Vertex"),ol.ENABLE_WEBGL&&(ol.render.webgl.linestringreplay.defaultshader.Fragment=function(){ol.webgl.Fragment.call(this,ol.render.webgl.linestringreplay.defaultshader.Fragment.SOURCE)},ol.inherits(ol.render.webgl.linestringreplay.defaultshader.Fragment,ol.webgl.Fragment),ol.render.webgl.linestringreplay.defaultshader.Fragment.DEBUG_SOURCE="precision mediump float;\nvarying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_color;\nuniform vec2 u_size;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  if (v_round > 0.0) {\n    vec2 windowCoords = vec2((v_roundVertex.x + 1.0) / 2.0 * u_size.x * u_pixelRatio,\n        (v_roundVertex.y + 1.0) / 2.0 * u_size.y * u_pixelRatio);\n    if (length(windowCoords - gl_FragCoord.xy) > v_halfWidth * u_pixelRatio) {\n      discard;\n    }\n  }\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n",ol.render.webgl.linestringreplay.defaultshader.Fragment.OPTIMIZED_SOURCE="precision mediump float;varying float a;varying vec2 b;varying float c;uniform float m;uniform vec4 n;uniform vec2 o;uniform float p;void main(void){if(a>0.0){vec2 windowCoords=vec2((b.x+1.0)/2.0*o.x*p,(b.y+1.0)/2.0*o.y*p);if(length(windowCoords-gl_FragCoord.xy)>c*p){discard;}} gl_FragColor=n;float alpha=n.a*m;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}",ol.render.webgl.linestringreplay.defaultshader.Fragment.SOURCE=ol.DEBUG_WEBGL?ol.render.webgl.linestringreplay.defaultshader.Fragment.DEBUG_SOURCE:ol.render.webgl.linestringreplay.defaultshader.Fragment.OPTIMIZED_SOURCE,ol.render.webgl.linestringreplay.defaultshader.fragment=new ol.render.webgl.linestringreplay.defaultshader.Fragment,ol.render.webgl.linestringreplay.defaultshader.Vertex=function(){ol.webgl.Vertex.call(this,ol.render.webgl.linestringreplay.defaultshader.Vertex.SOURCE)},ol.inherits(ol.render.webgl.linestringreplay.defaultshader.Vertex,ol.webgl.Vertex),ol.render.webgl.linestringreplay.defaultshader.Vertex.DEBUG_SOURCE="varying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\nattribute vec2 a_lastPos;\nattribute vec2 a_position;\nattribute vec2 a_nextPos;\nattribute float a_direction;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_miterLimit;\n\nbool nearlyEquals(in float value, in float ref) {\n  float epsilon = 0.000000000001;\n  return value >= ref - epsilon && value <= ref + epsilon;\n}\n\nvoid alongNormal(out vec2 offset, in vec2 nextP, in float turnDir, in float direction) {\n  vec2 dirVect = nextP - a_position;\n  vec2 normal = normalize(vec2(-turnDir * dirVect.y, turnDir * dirVect.x));\n  offset = u_lineWidth / 2.0 * normal * direction;\n}\n\nvoid miterUp(out vec2 offset, out float round, in bool isRound, in float direction) {\n  float halfWidth = u_lineWidth / 2.0;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_nextPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n  offset = normal * direction * miterLength;\n  round = 0.0;\n  if (isRound) {\n    round = 1.0;\n  } else if (miterLength > u_miterLimit + u_lineWidth) {\n    offset = halfWidth * tmpNormal * direction;\n  }\n}\n\nbool miterDown(out vec2 offset, in vec4 projPos, in mat4 offsetMatrix, in float direction) {\n  bool degenerate = false;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_lastPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  vec2 longOffset, shortOffset, longVertex;\n  vec4 shortProjVertex;\n  float halfWidth = u_lineWidth / 2.0;\n  if (length(a_nextPos - a_position) > length(a_lastPos - a_position)) {\n    longOffset = tmpNormal * direction * halfWidth;\n    shortOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_nextPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_lastPos, 0.0, 1.0);\n  } else {\n    shortOffset = tmpNormal * direction * halfWidth;\n    longOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_lastPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_nextPos, 0.0, 1.0);\n  }\n  //Intersection algorithm based on theory by Paul Bourke (http://paulbourke.net/geometry/pointlineplane/).\n  vec4 p1 = u_projectionMatrix * vec4(longVertex, 0.0, 1.0) + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p2 = projPos + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p3 = shortProjVertex + offsetMatrix * vec4(-shortOffset, 0.0, 0.0);\n  vec4 p4 = shortProjVertex + offsetMatrix * vec4(shortOffset, 0.0, 0.0);\n  float denom = (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);\n  float firstU = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\n  float secondU = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\n  float epsilon = 0.000000000001;\n  if (firstU > epsilon && firstU < 1.0 - epsilon && secondU > epsilon && secondU < 1.0 - epsilon) {\n    shortProjVertex.x = p1.x + firstU * (p2.x - p1.x);\n    shortProjVertex.y = p1.y + firstU * (p2.y - p1.y);\n    offset = shortProjVertex.xy;\n    degenerate = true;\n  } else {\n    float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n    offset = normal * direction * miterLength;\n  }\n  return degenerate;\n}\n\nvoid squareCap(out vec2 offset, out float round, in bool isRound, in vec2 nextP,\n    in float turnDir, in float direction) {\n  round = 0.0;\n  vec2 dirVect = a_position - nextP;\n  vec2 firstNormal = normalize(dirVect);\n  vec2 secondNormal = vec2(turnDir * firstNormal.y * direction, -turnDir * firstNormal.x * direction);\n  vec2 hypotenuse = normalize(firstNormal - secondNormal);\n  vec2 normal = vec2(turnDir * hypotenuse.y * direction, -turnDir * hypotenuse.x * direction);\n  float length = sqrt(v_halfWidth * v_halfWidth * 2.0);\n  offset = normal * length;\n  if (isRound) {\n    round = 1.0;\n  }\n}\n\nvoid main(void) {\n  bool degenerate = false;\n  float direction = float(sign(a_direction));\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  vec2 offset;\n  vec4 projPos = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  bool round = nearlyEquals(mod(a_direction, 2.0), 0.0);\n\n  v_round = 0.0;\n  v_halfWidth = u_lineWidth / 2.0;\n  v_roundVertex = projPos.xy;\n\n  if (nearlyEquals(mod(a_direction, 3.0), 0.0) || nearlyEquals(mod(a_direction, 17.0), 0.0)) {\n    alongNormal(offset, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 5.0), 0.0) || nearlyEquals(mod(a_direction, 13.0), 0.0)) {\n    alongNormal(offset, a_lastPos, -1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 23.0), 0.0)) {\n    miterUp(offset, v_round, round, direction);\n  } else if (nearlyEquals(mod(a_direction, 19.0), 0.0)) {\n    degenerate = miterDown(offset, projPos, offsetMatrix, direction);\n  } else if (nearlyEquals(mod(a_direction, 7.0), 0.0)) {\n    squareCap(offset, v_round, round, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 11.0), 0.0)) {\n    squareCap(offset, v_round, round, a_lastPos, -1.0, direction);\n  }\n  if (!degenerate) {\n    vec4 offsets = offsetMatrix * vec4(offset, 0.0, 0.0);\n    gl_Position = projPos + offsets;\n  } else {\n    gl_Position = vec4(offset, 0.0, 1.0);\n  }\n}\n\n\n",ol.render.webgl.linestringreplay.defaultshader.Vertex.OPTIMIZED_SOURCE="varying float a;varying vec2 b;varying float c;attribute vec2 d;attribute vec2 e;attribute vec2 f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;bool nearlyEquals(in float value,in float ref){float epsilon=0.000000000001;return value>=ref-epsilon&&value<=ref+epsilon;}void alongNormal(out vec2 offset,in vec2 nextP,in float turnDir,in float direction){vec2 dirVect=nextP-e;vec2 normal=normalize(vec2(-turnDir*dirVect.y,turnDir*dirVect.x));offset=k/2.0*normal*direction;}void miterUp(out vec2 offset,out float round,in bool isRound,in float direction){float halfWidth=k/2.0;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=f-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;round=0.0;if(isRound){round=1.0;}else if(miterLength>l+k){offset=halfWidth*tmpNormal*direction;}} bool miterDown(out vec2 offset,in vec4 projPos,in mat4 offsetMatrix,in float direction){bool degenerate=false;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=d-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));vec2 longOffset,shortOffset,longVertex;vec4 shortProjVertex;float halfWidth=k/2.0;if(length(f-e)>length(d-e)){longOffset=tmpNormal*direction*halfWidth;shortOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=f;shortProjVertex=h*vec4(d,0.0,1.0);}else{shortOffset=tmpNormal*direction*halfWidth;longOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=d;shortProjVertex=h*vec4(f,0.0,1.0);}vec4 p1=h*vec4(longVertex,0.0,1.0)+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p2=projPos+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p3=shortProjVertex+offsetMatrix*vec4(-shortOffset,0.0,0.0);vec4 p4=shortProjVertex+offsetMatrix*vec4(shortOffset,0.0,0.0);float denom=(p4.y-p3.y)*(p2.x-p1.x)-(p4.x-p3.x)*(p2.y-p1.y);float firstU=((p4.x-p3.x)*(p1.y-p3.y)-(p4.y-p3.y)*(p1.x-p3.x))/denom;float secondU=((p2.x-p1.x)*(p1.y-p3.y)-(p2.y-p1.y)*(p1.x-p3.x))/denom;float epsilon=0.000000000001;if(firstU>epsilon&&firstU<1.0-epsilon&&secondU>epsilon&&secondU<1.0-epsilon){shortProjVertex.x=p1.x+firstU*(p2.x-p1.x);shortProjVertex.y=p1.y+firstU*(p2.y-p1.y);offset=shortProjVertex.xy;degenerate=true;}else{float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;}return degenerate;}void squareCap(out vec2 offset,out float round,in bool isRound,in vec2 nextP,in float turnDir,in float direction){round=0.0;vec2 dirVect=e-nextP;vec2 firstNormal=normalize(dirVect);vec2 secondNormal=vec2(turnDir*firstNormal.y*direction,-turnDir*firstNormal.x*direction);vec2 hypotenuse=normalize(firstNormal-secondNormal);vec2 normal=vec2(turnDir*hypotenuse.y*direction,-turnDir*hypotenuse.x*direction);float length=sqrt(c*c*2.0);offset=normal*length;if(isRound){round=1.0;}} void main(void){bool degenerate=false;float direction=float(sign(g));mat4 offsetMatrix=i*j;vec2 offset;vec4 projPos=h*vec4(e,0.0,1.0);bool round=nearlyEquals(mod(g,2.0),0.0);a=0.0;c=k/2.0;b=projPos.xy;if(nearlyEquals(mod(g,3.0),0.0)||nearlyEquals(mod(g,17.0),0.0)){alongNormal(offset,f,1.0,direction);}else if(nearlyEquals(mod(g,5.0),0.0)||nearlyEquals(mod(g,13.0),0.0)){alongNormal(offset,d,-1.0,direction);}else if(nearlyEquals(mod(g,23.0),0.0)){miterUp(offset,a,round,direction);}else if(nearlyEquals(mod(g,19.0),0.0)){degenerate=miterDown(offset,projPos,offsetMatrix,direction);}else if(nearlyEquals(mod(g,7.0),0.0)){squareCap(offset,a,round,f,1.0,direction);}else if(nearlyEquals(mod(g,11.0),0.0)){squareCap(offset,a,round,d,-1.0,direction);}if(!degenerate){vec4 offsets=offsetMatrix*vec4(offset,0.0,0.0);gl_Position=projPos+offsets;}else{gl_Position=vec4(offset,0.0,1.0);}}",ol.render.webgl.linestringreplay.defaultshader.Vertex.SOURCE=ol.DEBUG_WEBGL?ol.render.webgl.linestringreplay.defaultshader.Vertex.DEBUG_SOURCE:ol.render.webgl.linestringreplay.defaultshader.Vertex.OPTIMIZED_SOURCE,ol.render.webgl.linestringreplay.defaultshader.vertex=new ol.render.webgl.linestringreplay.defaultshader.Vertex,ol.render.webgl.linestringreplay.defaultshader.Locations=function(e,t){this.u_color=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_color":"n"),this.u_lineWidth=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_lineWidth":"k"),this.u_miterLimit=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_miterLimit":"l"),this.u_offsetRotateMatrix=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_offsetRotateMatrix":"j"),this.u_offsetScaleMatrix=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_offsetScaleMatrix":"i"),this.u_opacity=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_opacity":"m"),this.u_pixelRatio=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_pixelRatio":"p"),this.u_projectionMatrix=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_projectionMatrix":"h"),this.u_size=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_size":"o"),this.a_direction=e.getAttribLocation(t,ol.DEBUG_WEBGL?"a_direction":"g"),this.a_lastPos=e.getAttribLocation(t,ol.DEBUG_WEBGL?"a_lastPos":"d"),this.a_nextPos=e.getAttribLocation(t,ol.DEBUG_WEBGL?"a_nextPos":"f"),this.a_position=e.getAttribLocation(t,ol.DEBUG_WEBGL?"a_position":"e")}),goog.provide("ol.render.webgl.LineStringReplay"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.color"),goog.require("ol.extent"),goog.require("ol.geom.flat.orient"),goog.require("ol.geom.flat.transform"),goog.require("ol.geom.flat.topology"),goog.require("ol.obj"),goog.require("ol.render.webgl"),goog.require("ol.render.webgl.Replay"),goog.require("ol.render.webgl.linestringreplay.defaultshader"),goog.require("ol.webgl"),goog.require("ol.webgl.Buffer"),ol.ENABLE_WEBGL&&(ol.render.webgl.LineStringReplay=function(e,t){ol.render.webgl.Replay.call(this,e,t),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0,changed:!1}},ol.inherits(ol.render.webgl.LineStringReplay,ol.render.webgl.Replay),ol.render.webgl.LineStringReplay.prototype.drawCoordinates_=function(e,t,o,r){var i,n,a,l,s,p,g,u,c=this.vertices.length,y=this.indices.length,h="bevel"===this.state_.lineJoin?0:"miter"===this.state_.lineJoin?1:2,d="butt"===this.state_.lineCap?0:"square"===this.state_.lineCap?1:2,f=ol.geom.flat.topology.lineStringIsClosed(e,t,o,r),m=y,v=1;for(i=t,n=o;i<n;i+=r){if(s=c/7,p=g,g=u||[e[i],e[i+1]],i===t){if(u=[e[i+r],e[i+r+1]],o-t===2*r&&ol.array.equals(g,u))break;if(!f){d&&(c=this.addVertices_([0,0],g,u,v*ol.render.webgl.LineStringReplay.Instruction_.BEGIN_LINE_CAP*d,c),c=this.addVertices_([0,0],g,u,-v*ol.render.webgl.LineStringReplay.Instruction_.BEGIN_LINE_CAP*d,c),this.indices[y++]=s+2,this.indices[y++]=s,this.indices[y++]=s+1,this.indices[y++]=s+1,this.indices[y++]=s+3,this.indices[y++]=s+2),c=this.addVertices_([0,0],g,u,v*ol.render.webgl.LineStringReplay.Instruction_.BEGIN_LINE*(d||1),c),c=this.addVertices_([0,0],g,u,-v*ol.render.webgl.LineStringReplay.Instruction_.BEGIN_LINE*(d||1),c),m=c/7-1;continue}p=[e[o-2*r],e[o-2*r+1]],a=u}else{if(i===o-r){if(f){u=a;break}p=p||[0,0],c=this.addVertices_(p,g,[0,0],v*ol.render.webgl.LineStringReplay.Instruction_.END_LINE*(d||1),c),c=this.addVertices_(p,g,[0,0],-v*ol.render.webgl.LineStringReplay.Instruction_.END_LINE*(d||1),c),this.indices[y++]=s,this.indices[y++]=m-1,this.indices[y++]=m,this.indices[y++]=m,this.indices[y++]=s+1,this.indices[y++]=s,d&&(c=this.addVertices_(p,g,[0,0],v*ol.render.webgl.LineStringReplay.Instruction_.END_LINE_CAP*d,c),c=this.addVertices_(p,g,[0,0],-v*ol.render.webgl.LineStringReplay.Instruction_.END_LINE_CAP*d,c),this.indices[y++]=s+2,this.indices[y++]=s,this.indices[y++]=s+1,this.indices[y++]=s+1,this.indices[y++]=s+3,this.indices[y++]=s+2);break}u=[e[i+r],e[i+r+1]]}l=ol.render.webgl.triangleIsCounterClockwise(p[0],p[1],g[0],g[1],u[0],u[1])?-1:1,c=this.addVertices_(p,g,u,l*ol.render.webgl.LineStringReplay.Instruction_.BEVEL_FIRST*(h||1),c),c=this.addVertices_(p,g,u,l*ol.render.webgl.LineStringReplay.Instruction_.BEVEL_SECOND*(h||1),c),c=this.addVertices_(p,g,u,-l*ol.render.webgl.LineStringReplay.Instruction_.MITER_BOTTOM*(h||1),c),i>t&&(this.indices[y++]=s,this.indices[y++]=m-1,this.indices[y++]=m,this.indices[y++]=s+2,this.indices[y++]=s,this.indices[y++]=v*l>0?m:m-1),this.indices[y++]=s,this.indices[y++]=s+2,this.indices[y++]=s+1,m=s+2,v=l,h&&(c=this.addVertices_(p,g,u,l*ol.render.webgl.LineStringReplay.Instruction_.MITER_TOP*h,c),this.indices[y++]=s+1,this.indices[y++]=s+3,this.indices[y++]=s)}f&&(s=s||c/7,l=ol.geom.flat.orient.linearRingIsClockwise([p[0],p[1],g[0],g[1],u[0],u[1]],0,6,2)?1:-1,c=this.addVertices_(p,g,u,l*ol.render.webgl.LineStringReplay.Instruction_.BEVEL_FIRST*(h||1),c),c=this.addVertices_(p,g,u,-l*ol.render.webgl.LineStringReplay.Instruction_.MITER_BOTTOM*(h||1),c),this.indices[y++]=s,this.indices[y++]=m-1,this.indices[y++]=m,this.indices[y++]=s+1,this.indices[y++]=s,this.indices[y++]=v*l>0?m:m-1)},ol.render.webgl.LineStringReplay.prototype.addVertices_=function(e,t,o,r,i){return this.vertices[i++]=e[0],this.vertices[i++]=e[1],this.vertices[i++]=t[0],this.vertices[i++]=t[1],this.vertices[i++]=o[0],this.vertices[i++]=o[1],this.vertices[i++]=r,i},ol.render.webgl.LineStringReplay.prototype.isValid_=function(e,t,o,r){var i=o-t;if(i<2*r)return!1;if(i===2*r){var n=[e[t],e[t+1]],a=[e[t+r],e[t+r+1]];return!ol.array.equals(n,a)}return!0},ol.render.webgl.LineStringReplay.prototype.drawLineString=function(e,t){var o=e.getFlatCoordinates(),r=e.getStride();this.isValid_(o,0,o.length,r)&&(o=ol.geom.flat.transform.translate(o,0,o.length,r,-this.origin[0],-this.origin[1]),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.startIndices.push(this.indices.length),this.startIndicesFeature.push(t),this.drawCoordinates_(o,0,o.length,r))},ol.render.webgl.LineStringReplay.prototype.drawMultiLineString=function(e,t){var o=this.indices.length,r=e.getEnds();r.unshift(0);var i,n,a=e.getFlatCoordinates(),l=e.getStride();if(r.length>1)for(i=1,n=r.length;i<n;++i)if(this.isValid_(a,r[i-1],r[i],l)){var s=ol.geom.flat.transform.translate(a,r[i-1],r[i],l,-this.origin[0],-this.origin[1]);this.drawCoordinates_(s,0,s.length,l)}this.indices.length>o&&(this.startIndices.push(o),this.startIndicesFeature.push(t),this.state_.changed&&(this.styleIndices_.push(o),this.state_.changed=!1))},ol.render.webgl.LineStringReplay.prototype.drawPolygonCoordinates=function(e,t,o){if(ol.geom.flat.topology.lineStringIsClosed(e,0,e.length,o)||(e.push(e[0]),e.push(e[1])),this.drawCoordinates_(e,0,e.length,o),t.length){var r,i;for(r=0,i=t.length;r<i;++r)ol.geom.flat.topology.lineStringIsClosed(t[r],0,t[r].length,o)||(t[r].push(t[r][0]),t[r].push(t[r][1])),this.drawCoordinates_(t[r],0,t[r].length,o)}},ol.render.webgl.LineStringReplay.prototype.setPolygonStyle=function(e,t){var o=void 0===t?this.indices.length:t;this.startIndices.push(o),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(o),this.state_.changed=!1)},ol.render.webgl.LineStringReplay.prototype.getCurrentIndex=function(){return this.indices.length},ol.render.webgl.LineStringReplay.prototype.finish=function(e){this.verticesBuffer=new ol.webgl.Buffer(this.vertices),this.indicesBuffer=new ol.webgl.Buffer(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},ol.render.webgl.LineStringReplay.prototype.getDeleteResourcesFunction=function(e){var t=this.verticesBuffer,o=this.indicesBuffer;return function(){e.deleteBuffer(t),e.deleteBuffer(o)}},ol.render.webgl.LineStringReplay.prototype.setUpProgram=function(e,t,o,r){var i,n;i=ol.render.webgl.linestringreplay.defaultshader.fragment,n=ol.render.webgl.linestringreplay.defaultshader.vertex;var a,l=t.getProgram(i,n);return this.defaultLocations_?a=this.defaultLocations_:(a=new ol.render.webgl.linestringreplay.defaultshader.Locations(e,l),this.defaultLocations_=a),t.useProgram(l),e.enableVertexAttribArray(a.a_lastPos),e.vertexAttribPointer(a.a_lastPos,2,ol.webgl.FLOAT,!1,28,0),e.enableVertexAttribArray(a.a_position),e.vertexAttribPointer(a.a_position,2,ol.webgl.FLOAT,!1,28,8),e.enableVertexAttribArray(a.a_nextPos),e.vertexAttribPointer(a.a_nextPos,2,ol.webgl.FLOAT,!1,28,16),e.enableVertexAttribArray(a.a_direction),e.vertexAttribPointer(a.a_direction,1,ol.webgl.FLOAT,!1,28,24),e.uniform2fv(a.u_size,o),e.uniform1f(a.u_pixelRatio,r),a},ol.render.webgl.LineStringReplay.prototype.shutDownProgram=function(e,t){e.disableVertexAttribArray(t.a_lastPos),e.disableVertexAttribArray(t.a_position),e.disableVertexAttribArray(t.a_nextPos),e.disableVertexAttribArray(t.a_direction)},ol.render.webgl.LineStringReplay.prototype.drawReplay=function(e,t,o,r){var i=e.getParameter(e.DEPTH_FUNC),n=e.getParameter(e.DEPTH_WRITEMASK);if(r||(e.enable(e.DEPTH_TEST),e.depthMask(!0),e.depthFunc(e.NOTEQUAL)),ol.obj.isEmpty(o)){var a,l,s,p;for(s=this.startIndices[this.startIndices.length-1],a=this.styleIndices_.length-1;a>=0;--a)l=this.styleIndices_[a],p=this.styles_[a],this.setStrokeStyle_(e,p[0],p[1],p[2]),this.drawElements(e,t,l,s),e.clear(e.DEPTH_BUFFER_BIT),s=l}else this.drawReplaySkipping_(e,t,o);r||(e.disable(e.DEPTH_TEST),e.clear(e.DEPTH_BUFFER_BIT),e.depthMask(n),e.depthFunc(i))},ol.render.webgl.LineStringReplay.prototype.drawReplaySkipping_=function(e,t,o){var r,i,n,a,l,s,p,g,u;for(g=this.startIndices.length-2,n=i=this.startIndices[g+1],r=this.styleIndices_.length-1;r>=0;--r){for(a=this.styles_[r],this.setStrokeStyle_(e,a[0],a[1],a[2]),l=this.styleIndices_[r];g>=0&&this.startIndices[g]>=l;)u=this.startIndices[g],s=this.startIndicesFeature[g],p=ol.getUid(s).toString(),o[p]&&(i!==n&&(this.drawElements(e,t,i,n),e.clear(e.DEPTH_BUFFER_BIT)),n=u),g--,i=u;i!==n&&(this.drawElements(e,t,i,n),e.clear(e.DEPTH_BUFFER_BIT)),i=n=l}},ol.render.webgl.LineStringReplay.prototype.drawHitDetectionReplayOneByOne=function(e,t,o,r,i){var n,a,l,s,p,g,u,c;for(c=this.startIndices.length-2,l=this.startIndices[c+1],n=this.styleIndices_.length-1;n>=0;--n)for(s=this.styles_[n],this.setStrokeStyle_(e,s[0],s[1],s[2]),p=this.styleIndices_[n];c>=0&&this.startIndices[c]>=p;){if(a=this.startIndices[c],g=this.startIndicesFeature[c],u=ol.getUid(g).toString(),void 0===o[u]&&g.getGeometry()&&(void 0===i||ol.extent.intersects(i,g.getGeometry().getExtent()))){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this.drawElements(e,t,a,l);var y=r(g);if(y)return y}c--,l=a}},ol.render.webgl.LineStringReplay.prototype.setStrokeStyle_=function(e,t,o,r){e.uniform4fv(this.defaultLocations_.u_color,t),e.uniform1f(this.defaultLocations_.u_lineWidth,o),e.uniform1f(this.defaultLocations_.u_miterLimit,r)},ol.render.webgl.LineStringReplay.prototype.setFillStrokeStyle=function(e,t){var o=t.getLineCap();this.state_.lineCap=void 0!==o?o:ol.render.webgl.defaultLineCap;var r=t.getLineDash();this.state_.lineDash=r?r:ol.render.webgl.defaultLineDash;var i=t.getLineDashOffset();this.state_.lineDashOffset=i?i:ol.render.webgl.defaultLineDashOffset;var n=t.getLineJoin();this.state_.lineJoin=void 0!==n?n:ol.render.webgl.defaultLineJoin;var a=t.getColor();a=a instanceof CanvasGradient||a instanceof CanvasPattern?ol.render.webgl.defaultStrokeStyle:ol.color.asArray(a).map(function(e,t){return 3!=t?e/255:e})||ol.render.webgl.defaultStrokeStyle;var l=t.getWidth();l=void 0!==l?l:ol.render.webgl.defaultLineWidth;var s=t.getMiterLimit();s=void 0!==s?s:ol.render.webgl.defaultMiterLimit,this.state_.strokeColor&&ol.array.equals(this.state_.strokeColor,a)&&this.state_.lineWidth===l&&this.state_.miterLimit===s||(this.state_.changed=!0,this.state_.strokeColor=a,this.state_.lineWidth=l,this.state_.miterLimit=s,this.styles_.push([a,l,s]))},ol.render.webgl.LineStringReplay.Instruction_={ROUND:2,BEGIN_LINE:3,END_LINE:5,BEGIN_LINE_CAP:7,END_LINE_CAP:11,BEVEL_FIRST:13,BEVEL_SECOND:17,MITER_BOTTOM:19,MITER_TOP:23}),goog.provide("ol.render.webgl.polygonreplay.defaultshader"),goog.require("ol"),goog.require("ol.webgl.Fragment"),goog.require("ol.webgl.Vertex"),ol.ENABLE_WEBGL&&(ol.render.webgl.polygonreplay.defaultshader.Fragment=function(){ol.webgl.Fragment.call(this,ol.render.webgl.polygonreplay.defaultshader.Fragment.SOURCE)},ol.inherits(ol.render.webgl.polygonreplay.defaultshader.Fragment,ol.webgl.Fragment),
ol.render.webgl.polygonreplay.defaultshader.Fragment.DEBUG_SOURCE="precision mediump float;\n\n\n\nuniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main(void) {\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n",ol.render.webgl.polygonreplay.defaultshader.Fragment.OPTIMIZED_SOURCE="precision mediump float;uniform vec4 e;uniform float f;void main(void){gl_FragColor=e;float alpha=e.a*f;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}",ol.render.webgl.polygonreplay.defaultshader.Fragment.SOURCE=ol.DEBUG_WEBGL?ol.render.webgl.polygonreplay.defaultshader.Fragment.DEBUG_SOURCE:ol.render.webgl.polygonreplay.defaultshader.Fragment.OPTIMIZED_SOURCE,ol.render.webgl.polygonreplay.defaultshader.fragment=new ol.render.webgl.polygonreplay.defaultshader.Fragment,ol.render.webgl.polygonreplay.defaultshader.Vertex=function(){ol.webgl.Vertex.call(this,ol.render.webgl.polygonreplay.defaultshader.Vertex.SOURCE)},ol.inherits(ol.render.webgl.polygonreplay.defaultshader.Vertex,ol.webgl.Vertex),ol.render.webgl.polygonreplay.defaultshader.Vertex.DEBUG_SOURCE="\n\nattribute vec2 a_position;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n}\n\n\n",ol.render.webgl.polygonreplay.defaultshader.Vertex.OPTIMIZED_SOURCE="attribute vec2 a;uniform mat4 b;uniform mat4 c;uniform mat4 d;void main(void){gl_Position=b*vec4(a,0.0,1.0);}",ol.render.webgl.polygonreplay.defaultshader.Vertex.SOURCE=ol.DEBUG_WEBGL?ol.render.webgl.polygonreplay.defaultshader.Vertex.DEBUG_SOURCE:ol.render.webgl.polygonreplay.defaultshader.Vertex.OPTIMIZED_SOURCE,ol.render.webgl.polygonreplay.defaultshader.vertex=new ol.render.webgl.polygonreplay.defaultshader.Vertex,ol.render.webgl.polygonreplay.defaultshader.Locations=function(e,t){this.u_color=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_color":"e"),this.u_offsetRotateMatrix=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_offsetRotateMatrix":"d"),this.u_offsetScaleMatrix=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_offsetScaleMatrix":"c"),this.u_opacity=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_opacity":"f"),this.u_projectionMatrix=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_projectionMatrix":"b"),this.a_position=e.getAttribLocation(t,ol.DEBUG_WEBGL?"a_position":"a")}),goog.provide("ol.style.Stroke"),goog.require("ol"),ol.style.Stroke=function(e){var t=e||{};this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width,this.checksum_=void 0},ol.style.Stroke.prototype.clone=function(){var e=this.getColor();return new ol.style.Stroke({color:e&&e.slice?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},ol.style.Stroke.prototype.getColor=function(){return this.color_},ol.style.Stroke.prototype.getLineCap=function(){return this.lineCap_},ol.style.Stroke.prototype.getLineDash=function(){return this.lineDash_},ol.style.Stroke.prototype.getLineDashOffset=function(){return this.lineDashOffset_},ol.style.Stroke.prototype.getLineJoin=function(){return this.lineJoin_},ol.style.Stroke.prototype.getMiterLimit=function(){return this.miterLimit_},ol.style.Stroke.prototype.getWidth=function(){return this.width_},ol.style.Stroke.prototype.setColor=function(e){this.color_=e,this.checksum_=void 0},ol.style.Stroke.prototype.setLineCap=function(e){this.lineCap_=e,this.checksum_=void 0},ol.style.Stroke.prototype.setLineDash=function(e){this.lineDash_=e,this.checksum_=void 0},ol.style.Stroke.prototype.setLineDashOffset=function(e){this.lineDashOffset_=e,this.checksum_=void 0},ol.style.Stroke.prototype.setLineJoin=function(e){this.lineJoin_=e,this.checksum_=void 0},ol.style.Stroke.prototype.setMiterLimit=function(e){this.miterLimit_=e,this.checksum_=void 0},ol.style.Stroke.prototype.setWidth=function(e){this.width_=e,this.checksum_=void 0},ol.style.Stroke.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.color_?"string"==typeof this.color_?this.checksum_+=this.color_:this.checksum_+=ol.getUid(this.color_).toString():this.checksum_+="-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_},goog.provide("ol.structs.LinkedList"),ol.structs.LinkedList=function(e){this.first_=void 0,this.last_=void 0,this.head_=void 0,this.circular_=void 0===e||e,this.length_=0},ol.structs.LinkedList.prototype.insertItem=function(e){var t={prev:void 0,next:void 0,data:e},o=this.head_;if(o){var r=o.next;t.prev=o,t.next=r,o.next=t,r&&(r.prev=t),o===this.last_&&(this.last_=t)}else this.first_=t,this.last_=t,this.circular_&&(t.next=t,t.prev=t);this.head_=t,this.length_++},ol.structs.LinkedList.prototype.removeItem=function(){var e=this.head_;if(e){var t=e.next,o=e.prev;t&&(t.prev=o),o&&(o.next=t),this.head_=t||o,this.first_===this.last_?(this.head_=void 0,this.first_=void 0,this.last_=void 0):this.first_===e?this.first_=this.head_:this.last_===e&&(this.last_=o?this.head_.prev:this.head_),this.length_--}},ol.structs.LinkedList.prototype.firstItem=function(){if(this.head_=this.first_,this.head_)return this.head_.data},ol.structs.LinkedList.prototype.lastItem=function(){if(this.head_=this.last_,this.head_)return this.head_.data},ol.structs.LinkedList.prototype.nextItem=function(){if(this.head_&&this.head_.next)return this.head_=this.head_.next,this.head_.data},ol.structs.LinkedList.prototype.getNextItem=function(){if(this.head_&&this.head_.next)return this.head_.next.data},ol.structs.LinkedList.prototype.prevItem=function(){if(this.head_&&this.head_.prev)return this.head_=this.head_.prev,this.head_.data},ol.structs.LinkedList.prototype.getPrevItem=function(){if(this.head_&&this.head_.prev)return this.head_.prev.data},ol.structs.LinkedList.prototype.getCurrItem=function(){if(this.head_)return this.head_.data},ol.structs.LinkedList.prototype.setFirstItem=function(){this.circular_&&this.head_&&(this.first_=this.head_,this.last_=this.head_.prev)},ol.structs.LinkedList.prototype.concat=function(e){if(e.head_){if(this.head_){var t=this.head_.next;this.head_.next=e.first_,e.first_.prev=this.head_,t.prev=e.last_,e.last_.next=t,this.length_+=e.length_}else this.head_=e.head_,this.first_=e.first_,this.last_=e.last_,this.length_=e.length_;e.head_=void 0,e.first_=void 0,e.last_=void 0,e.length_=0}},ol.structs.LinkedList.prototype.getLength=function(){return this.length_},goog.provide("ol.ext.rbush"),ol.ext.rbush=function(){},function(){!function(e){"use strict";function t(e,i,n,a,l){for(n=n||0,a=a||e.length-1,l=l||r;a>n;){if(a-n>600){var s=a-n+1,p=i-n+1,g=Math.log(s),u=.5*Math.exp(2*g/3),c=.5*Math.sqrt(g*u*(s-u)/s)*(p-s/2<0?-1:1),y=Math.max(n,Math.floor(i-p*u/s+c)),h=Math.min(a,Math.floor(i+(s-p)*u/s+c));t(e,i,y,h,l)}var d=e[i],f=n,m=a;for(o(e,n,i),l(e[a],d)>0&&o(e,n,a);f<m;){for(o(e,f,m),f++,m--;l(e[f],d)<0;)f++;for(;l(e[m],d)>0;)m--}0===l(e[n],d)?o(e,n,m):(m++,o(e,m,a)),m<=i&&(n=m+1),i<=m&&(a=m-1)}}function o(e,t,o){var r=e[t];e[t]=e[o],e[o]=r}function r(e,t){return e<t?-1:e>t?1:0}function i(e,t){return this instanceof i?(this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&this._initFormat(t),void this.clear()):new i(e,t)}function n(e,t,o){if(!o)return t.indexOf(e);for(var r=0;r<t.length;r++)if(o(e,t[r]))return r;return-1}function a(e,t){l(e,0,e.children.length,t,e)}function l(e,t,o,r,i){i||(i=m(null)),i.minX=1/0,i.minY=1/0,i.maxX=-(1/0),i.maxY=-(1/0);for(var n,a=t;a<o;a++)n=e.children[a],s(i,e.leaf?r(n):n);return i}function s(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function p(e,t){return e.minX-t.minX}function g(e,t){return e.minY-t.minY}function u(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function c(e){return e.maxX-e.minX+(e.maxY-e.minY)}function y(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function h(e,t){var o=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),n=Math.min(e.maxY,t.maxY);return Math.max(0,i-o)*Math.max(0,n-r)}function d(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function f(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function m(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-(1/0),maxY:-(1/0)}}function v(e,t,o,r,i){for(var n,a=[t,o];a.length;)o=a.pop(),t=a.pop(),o-t<=r||(n=t+Math.ceil((o-t)/r/2)*r,_(e,n,t,o,i),a.push(t,n,n,o))}var _=t,S=i;i.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,o=[],r=this.toBBox;if(!f(e,t))return o;for(var i,n,a,l,s=[];t;){for(i=0,n=t.children.length;i<n;i++)a=t.children[i],l=t.leaf?r(a):a,f(e,l)&&(t.leaf?o.push(a):d(e,l)?this._all(a,o):s.push(a));t=s.pop()}return o},collides:function(e){var t=this.data,o=this.toBBox;if(!f(e,t))return!1;for(var r,i,n,a,l=[];t;){for(r=0,i=t.children.length;r<i;r++)if(n=t.children[r],a=t.leaf?o(n):n,f(e,a)){if(t.leaf||d(e,a))return!0;l.push(n)}t=l.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,o=e.length;t<o;t++)this.insert(e[t]);return this}var r=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=m([]),this},remove:function(e,t){if(!e)return this;for(var o,r,i,a,l=this.data,s=this.toBBox(e),p=[],g=[];l||p.length;){if(l||(l=p.pop(),r=p[p.length-1],o=g.pop(),a=!0),l.leaf&&(i=n(e,l.children,t),i!==-1))return l.children.splice(i,1),p.push(l),this._condense(p),this;a||l.leaf||!d(l,s)?r?(o++,l=r.children[o],a=!1):l=null:(p.push(l),g.push(o),o=0,r=l,l=l.children[0])}return this},toBBox:function(e){return e},compareMinX:p,compareMinY:g,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var o=[];e;)e.leaf?t.push.apply(t,e.children):o.push.apply(o,e.children),e=o.pop();return t},_build:function(e,t,o,r){var i,n=o-t+1,l=this._maxEntries;if(n<=l)return i=m(e.slice(t,o+1)),a(i,this.toBBox),i;r||(r=Math.ceil(Math.log(n)/Math.log(l)),l=Math.ceil(n/Math.pow(l,r-1))),i=m([]),i.leaf=!1,i.height=r;var s,p,g,u,c=Math.ceil(n/l),y=c*Math.ceil(Math.sqrt(l));for(v(e,t,o,y,this.compareMinX),s=t;s<=o;s+=y)for(g=Math.min(s+y-1,o),v(e,s,g,c,this.compareMinY),p=s;p<=g;p+=c)u=Math.min(p+c-1,g),i.children.push(this._build(e,p,u,r-1));return a(i,this.toBBox),i},_chooseSubtree:function(e,t,o,r){for(var i,n,a,l,s,p,g,c;;){if(r.push(t),t.leaf||r.length-1===o)break;for(g=c=1/0,i=0,n=t.children.length;i<n;i++)a=t.children[i],s=u(a),p=y(e,a)-s,p<c?(c=p,g=s<g?s:g,l=a):p===c&&s<g&&(g=s,l=a);t=l||t.children[0]}return t},_insert:function(e,t,o){var r=this.toBBox,i=o?e:r(e),n=[],a=this._chooseSubtree(i,this.data,t,n);for(a.children.push(e),s(a,i);t>=0&&n[t].children.length>this._maxEntries;)this._split(n,t),t--;this._adjustParentBBoxes(i,n,t)},_split:function(e,t){var o=e[t],r=o.children.length,i=this._minEntries;this._chooseSplitAxis(o,i,r);var n=this._chooseSplitIndex(o,i,r),l=m(o.children.splice(n,o.children.length-n));l.height=o.height,l.leaf=o.leaf,a(o,this.toBBox),a(l,this.toBBox),t?e[t-1].children.push(l):this._splitRoot(o,l)},_splitRoot:function(e,t){this.data=m([e,t]),this.data.height=e.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,o){var r,i,n,a,s,p,g,c;for(p=g=1/0,r=t;r<=o-t;r++)i=l(e,0,r,this.toBBox),n=l(e,r,o,this.toBBox),a=h(i,n),s=u(i)+u(n),a<p?(p=a,c=r,g=s<g?s:g):a===p&&s<g&&(g=s,c=r);return c},_chooseSplitAxis:function(e,t,o){var r=e.leaf?this.compareMinX:p,i=e.leaf?this.compareMinY:g,n=this._allDistMargin(e,t,o,r),a=this._allDistMargin(e,t,o,i);n<a&&e.children.sort(r)},_allDistMargin:function(e,t,o,r){e.children.sort(r);var i,n,a=this.toBBox,p=l(e,0,t,a),g=l(e,o-t,o,a),u=c(p)+c(g);for(i=t;i<o-t;i++)n=e.children[i],s(p,e.leaf?a(n):n),u+=c(p);for(i=o-t-1;i>=t;i--)n=e.children[i],s(g,e.leaf?a(n):n),u+=c(g);return u},_adjustParentBBoxes:function(e,t,o){for(var r=o;r>=0;r--)s(t[r],e)},_condense:function(e){for(var t,o=e.length-1;o>=0;o--)0===e[o].children.length?o>0?(t=e[o-1].children,t.splice(t.indexOf(e[o]),1)):this.clear():a(e[o],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}},e.default=S}(this.rbush=this.rbush||{})}.call(ol.ext),ol.ext.rbush=ol.ext.rbush.default,goog.provide("ol.structs.RBush"),goog.require("ol"),goog.require("ol.ext.rbush"),goog.require("ol.extent"),goog.require("ol.obj"),ol.structs.RBush=function(e){this.rbush_=ol.ext.rbush(e),this.items_={}},ol.structs.RBush.prototype.insert=function(e,t){var o={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(o),this.items_[ol.getUid(t)]=o},ol.structs.RBush.prototype.load=function(e,t){for(var o=new Array(t.length),r=0,i=t.length;r<i;r++){var n=e[r],a=t[r],l={minX:n[0],minY:n[1],maxX:n[2],maxY:n[3],value:a};o[r]=l,this.items_[ol.getUid(a)]=l}this.rbush_.load(o)},ol.structs.RBush.prototype.remove=function(e){var t=ol.getUid(e),o=this.items_[t];return delete this.items_[t],null!==this.rbush_.remove(o)},ol.structs.RBush.prototype.update=function(e,t){var o=this.items_[ol.getUid(t)],r=[o.minX,o.minY,o.maxX,o.maxY];ol.extent.equals(r,e)||(this.remove(t),this.insert(e,t))},ol.structs.RBush.prototype.getAll=function(){var e=this.rbush_.all();return e.map(function(e){return e.value})},ol.structs.RBush.prototype.getInExtent=function(e){var t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]},o=this.rbush_.search(t);return o.map(function(e){return e.value})},ol.structs.RBush.prototype.forEach=function(e,t){return this.forEach_(this.getAll(),e,t)},ol.structs.RBush.prototype.forEachInExtent=function(e,t,o){return this.forEach_(this.getInExtent(e),t,o)},ol.structs.RBush.prototype.forEach_=function(e,t,o){for(var r,i=0,n=e.length;i<n;i++)if(r=t.call(o,e[i]))return r;return r},ol.structs.RBush.prototype.isEmpty=function(){return ol.obj.isEmpty(this.items_)},ol.structs.RBush.prototype.clear=function(){this.rbush_.clear(),this.items_={}},ol.structs.RBush.prototype.getExtent=function(e){var t=this.rbush_.data;return ol.extent.createOrUpdate(t.minX,t.minY,t.maxX,t.maxY,e)},ol.structs.RBush.prototype.concat=function(e){this.rbush_.load(e.rbush_.all());for(var t in e.items_)this.items_[0|t]=e.items_[0|t]},goog.provide("ol.render.webgl.PolygonReplay"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.color"),goog.require("ol.extent"),goog.require("ol.obj"),goog.require("ol.geom.flat.contains"),goog.require("ol.geom.flat.orient"),goog.require("ol.geom.flat.transform"),goog.require("ol.render.webgl.polygonreplay.defaultshader"),goog.require("ol.render.webgl.LineStringReplay"),goog.require("ol.render.webgl.Replay"),goog.require("ol.render.webgl"),goog.require("ol.style.Stroke"),goog.require("ol.structs.LinkedList"),goog.require("ol.structs.RBush"),goog.require("ol.webgl"),goog.require("ol.webgl.Buffer"),ol.ENABLE_WEBGL&&(ol.render.webgl.PolygonReplay=function(e,t){ol.render.webgl.Replay.call(this,e,t),this.lineStringReplay=new ol.render.webgl.LineStringReplay(e,t),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={fillColor:null,changed:!1}},ol.inherits(ol.render.webgl.PolygonReplay,ol.render.webgl.Replay),ol.render.webgl.PolygonReplay.prototype.drawCoordinates_=function(e,t,o){var r=new ol.structs.LinkedList,i=new ol.structs.RBush,n=this.processFlatCoordinates_(e,o,r,i,!0);if(t.length){var a,l,s=[];for(a=0,l=t.length;a<l;++a){var p={list:new ol.structs.LinkedList,maxX:void 0,rtree:new ol.structs.RBush};s.push(p),p.maxX=this.processFlatCoordinates_(t[a],o,p.list,p.rtree,!1)}for(s.sort(function(e,t){return t.maxX[0]===e.maxX[0]?e.maxX[1]-t.maxX[1]:t.maxX[0]-e.maxX[0]}),a=0;a<s.length;++a){var g,u=s[a].list,c=u.firstItem(),y=c;do{if(this.getIntersections_(y,i).length){g=!0;break}y=u.nextItem()}while(c!==y);g||(this.classifyPoints_(u,s[a].rtree,!0),this.bridgeHole_(u,s[a].maxX[0],r,n[0],i)&&(i.concat(s[a].rtree),this.classifyPoints_(r,i,!1)))}}else this.classifyPoints_(r,i,!1);this.triangulate_(r,i)},ol.render.webgl.PolygonReplay.prototype.processFlatCoordinates_=function(e,t,o,r,i){var n,a,l,s,p,g,u,c=ol.geom.flat.orient.linearRingIsClockwise(e,0,e.length,t),y=this.vertices.length/2,h=[],d=[];if(i===c){for(p=this.createPoint_(e[0],e[1],y++),g=p,l=e[0],s=e[1],n=t,a=e.length;n<a;n+=t)u=this.createPoint_(e[n],e[n+1],y++),d.push(this.insertItem_(g,u,o)),h.push([Math.min(g.x,u.x),Math.min(g.y,u.y),Math.max(g.x,u.x),Math.max(g.y,u.y)]),e[n]>l&&(l=e[n],s=e[n+1]),g=u;d.push(this.insertItem_(u,p,o)),h.push([Math.min(g.x,u.x),Math.min(g.y,u.y),Math.max(g.x,u.x),Math.max(g.y,u.y)])}else{var f=e.length-t;for(p=this.createPoint_(e[f],e[f+1],y++),g=p,l=e[f],s=e[f+1],n=f-t,a=0;n>=a;n-=t)u=this.createPoint_(e[n],e[n+1],y++),d.push(this.insertItem_(g,u,o)),h.push([Math.min(g.x,u.x),Math.min(g.y,u.y),Math.max(g.x,u.x),Math.max(g.y,u.y)]),e[n]>l&&(l=e[n],s=e[n+1]),g=u;d.push(this.insertItem_(u,p,o)),h.push([Math.min(g.x,u.x),Math.min(g.y,u.y),Math.max(g.x,u.x),Math.max(g.y,u.y)])}return r.load(h,d),[l,s]},ol.render.webgl.PolygonReplay.prototype.classifyPoints_=function(e,t,o){var r=e.firstItem(),i=r,n=e.nextItem(),a=!1;do{var l=o?ol.render.webgl.triangleIsCounterClockwise(n.p1.x,n.p1.y,i.p1.x,i.p1.y,i.p0.x,i.p0.y):ol.render.webgl.triangleIsCounterClockwise(i.p0.x,i.p0.y,i.p1.x,i.p1.y,n.p1.x,n.p1.y);void 0===l?(this.removeItem_(i,n,e,t),a=!0,n===r&&(r=e.getNextItem()),n=i,e.prevItem()):i.p1.reflex!==l&&(i.p1.reflex=l,a=!0),i=n,n=e.nextItem()}while(i!==r);return a},ol.render.webgl.PolygonReplay.prototype.bridgeHole_=function(e,t,o,r,i){for(var n=e.firstItem();n.p1.x!==t;)n=e.nextItem();var a,l,s,p,g=n.p1,u={x:r,y:g.y,i:-1},c=1/0,y=this.getIntersections_({p0:g,p1:u},i,!0);for(a=0,l=y.length;a<l;++a){var h=y[a],d=this.calculateIntersection_(g,u,h.p0,h.p1,!0),f=Math.abs(g.x-d[0]);f<c&&void 0!==ol.render.webgl.triangleIsCounterClockwise(g.x,g.y,h.p0.x,h.p0.y,h.p1.x,h.p1.y)&&(c=f,p={x:d[0],y:d[1],i:-1},n=h)}if(c===1/0)return!1;if(s=n.p1,c>0){var m=this.getPointsInTriangle_(g,p,n.p1,i);if(m.length){var v=1/0;for(a=0,l=m.length;a<l;++a){var _=m[a],S=Math.atan2(g.y-_.y,u.x-_.x);(S<v||S===v&&_.x<s.x)&&(v=S,s=_)}}}for(n=o.firstItem();n.p1.x!==s.x||n.p1.y!==s.y;)n=o.nextItem();var x={x:g.x,y:g.y,i:g.i,reflex:void 0},E={x:n.p1.x,y:n.p1.y,i:n.p1.i,reflex:void 0};return e.getNextItem().p0=x,this.insertItem_(g,n.p1,e,i),this.insertItem_(E,x,e,i),n.p1=E,e.setFirstItem(),o.concat(e),!0},ol.render.webgl.PolygonReplay.prototype.triangulate_=function(e,t){for(var o=!1,r=this.isSimple_(e,t);e.getLength()>3;)if(r){if(!this.clipEars_(e,t,r,o)&&!this.classifyPoints_(e,t,o)&&!this.resolveLocalSelfIntersections_(e,t,!0))break}else if(!this.clipEars_(e,t,r,o)&&!this.classifyPoints_(e,t,o)&&!this.resolveLocalSelfIntersections_(e,t)){if(r=this.isSimple_(e,t),!r){this.splitPolygon_(e,t);break}o=!this.isClockwise_(e),this.classifyPoints_(e,t,o)}if(3===e.getLength()){var i=this.indices.length;this.indices[i++]=e.getPrevItem().p0.i,this.indices[i++]=e.getCurrItem().p0.i,this.indices[i++]=e.getNextItem().p0.i}},ol.render.webgl.PolygonReplay.prototype.clipEars_=function(e,t,o,r){var i,n,a,l=this.indices.length,s=e.firstItem(),p=e.getPrevItem(),g=s,u=e.nextItem(),c=e.getNextItem(),y=!1;do{if(i=g.p0,n=g.p1,a=u.p1,n.reflex===!1){var h=r?this.diagonalIsInside_(c.p1,a,n,i,p.p0):this.diagonalIsInside_(p.p0,i,n,a,c.p1);(o||0===this.getIntersections_({p0:i,p1:a},t).length)&&h&&0===this.getPointsInTriangle_(i,n,a,t,!0).length&&(o||i.reflex===!1||a.reflex===!1||ol.geom.flat.orient.linearRingIsClockwise([p.p0.x,p.p0.y,i.x,i.y,n.x,n.y,a.x,a.y,c.p1.x,c.p1.y],0,10,2)===!r)&&(this.indices[l++]=i.i,this.indices[l++]=n.i,this.indices[l++]=a.i,this.removeItem_(g,u,e,t),u===s&&(s=c),y=!0)}p=e.getPrevItem(),g=e.getCurrItem(),u=e.nextItem(),c=e.getNextItem()}while(g!==s&&e.getLength()>3);return y},ol.render.webgl.PolygonReplay.prototype.resolveLocalSelfIntersections_=function(e,t,o){var r=e.firstItem();e.nextItem();var i=r,n=e.nextItem(),a=!1;do{var l=this.calculateIntersection_(i.p0,i.p1,n.p0,n.p1,o);if(l){var s=!1,p=this.vertices.length,g=this.indices.length,u=p/2,c=e.prevItem();e.removeItem(),t.remove(c),s=c===r;var y;if(o?(l[0]===i.p0.x&&l[1]===i.p0.y?(e.prevItem(),y=i.p0,n.p0=y,t.remove(i),s=s||i===r):(y=n.p1,i.p1=y,t.remove(n),s=s||n===r),e.removeItem()):(y=this.createPoint_(l[0],l[1],u),i.p1=y,n.p0=y,t.update([Math.min(i.p0.x,i.p1.x),Math.min(i.p0.y,i.p1.y),Math.max(i.p0.x,i.p1.x),Math.max(i.p0.y,i.p1.y)],i),t.update([Math.min(n.p0.x,n.p1.x),Math.min(n.p0.y,n.p1.y),Math.max(n.p0.x,n.p1.x),Math.max(n.p0.y,n.p1.y)],n)),this.indices[g++]=c.p0.i,this.indices[g++]=c.p1.i,this.indices[g++]=y.i,a=!0,s)break}i=e.getPrevItem(),n=e.nextItem()}while(i!==r);return a},ol.render.webgl.PolygonReplay.prototype.isSimple_=function(e,t){var o=e.firstItem(),r=o;do{if(this.getIntersections_(r,t).length)return!1;r=e.nextItem()}while(r!==o);return!0},ol.render.webgl.PolygonReplay.prototype.isClockwise_=function(e){var t=2*e.getLength(),o=new Array(t),r=e.firstItem(),i=r,n=0;do o[n++]=i.p0.x,o[n++]=i.p0.y,i=e.nextItem();while(i!==r);return ol.geom.flat.orient.linearRingIsClockwise(o,0,t,2)},ol.render.webgl.PolygonReplay.prototype.splitPolygon_=function(e,t){var o=e.firstItem(),r=o;do{var i=this.getIntersections_(r,t);if(i.length){var n=i[0],a=this.vertices.length/2,l=this.calculateIntersection_(r.p0,r.p1,n.p0,n.p1),s=this.createPoint_(l[0],l[1],a),p=new ol.structs.LinkedList,g=new ol.structs.RBush;this.insertItem_(s,r.p1,p,g),r.p1=s,t.update([Math.min(r.p0.x,s.x),Math.min(r.p0.y,s.y),Math.max(r.p0.x,s.x),Math.max(r.p0.y,s.y)],r);for(var u=e.nextItem();u!==n;)this.insertItem_(u.p0,u.p1,p,g),t.remove(u),e.removeItem(),u=e.getCurrItem();this.insertItem_(n.p0,s,p,g),n.p0=s,t.update([Math.min(n.p1.x,s.x),Math.min(n.p1.y,s.y),Math.max(n.p1.x,s.x),Math.max(n.p1.y,s.y)],n),this.classifyPoints_(e,t,!1),this.triangulate_(e,t),this.classifyPoints_(p,g,!1),this.triangulate_(p,g);break}r=e.nextItem()}while(r!==o)},ol.render.webgl.PolygonReplay.prototype.createPoint_=function(e,t,o){var r=this.vertices.length;this.vertices[r++]=e,this.vertices[r++]=t;var i={x:e,y:t,i:o,reflex:void 0};return i},ol.render.webgl.PolygonReplay.prototype.insertItem_=function(e,t,o,r){var i={p0:e,p1:t};return o.insertItem(i),r&&r.insert([Math.min(e.x,t.x),Math.min(e.y,t.y),Math.max(e.x,t.x),Math.max(e.y,t.y)],i),i},ol.render.webgl.PolygonReplay.prototype.removeItem_=function(e,t,o,r){o.getCurrItem()===t&&(o.removeItem(),e.p1=t.p1,r.remove(t),r.update([Math.min(e.p0.x,e.p1.x),Math.min(e.p0.y,e.p1.y),Math.max(e.p0.x,e.p1.x),Math.max(e.p0.y,e.p1.y)],e))},ol.render.webgl.PolygonReplay.prototype.getPointsInTriangle_=function(e,t,o,r,i){var n,a,l,s,p=[],g=r.getInExtent([Math.min(e.x,t.x,o.x),Math.min(e.y,t.y,o.y),Math.max(e.x,t.x,o.x),Math.max(e.y,t.y,o.y)]);for(n=0,a=g.length;n<a;++n)for(l in g[n])s=g[n][l],"object"!=typeof s||i&&!s.reflex||s.x===e.x&&s.y===e.y||s.x===t.x&&s.y===t.y||s.x===o.x&&s.y===o.y||p.indexOf(s)!==-1||!ol.geom.flat.contains.linearRingContainsXY([e.x,e.y,t.x,t.y,o.x,o.y],0,6,2,s.x,s.y)||p.push(s);return p},ol.render.webgl.PolygonReplay.prototype.getIntersections_=function(e,t,o){var r,i,n=e.p0,a=e.p1,l=t.getInExtent([Math.min(n.x,a.x),Math.min(n.y,a.y),Math.max(n.x,a.x),Math.max(n.y,a.y)]),s=[];for(r=0,i=l.length;r<i;++r){var p=l[r];e!==p&&(o||p.p0!==a||p.p1!==n)&&this.calculateIntersection_(n,a,p.p0,p.p1,o)&&s.push(p)}return s},ol.render.webgl.PolygonReplay.prototype.calculateIntersection_=function(e,t,o,r,i){var n=(r.y-o.y)*(t.x-e.x)-(r.x-o.x)*(t.y-e.y);if(0!==n){var a=((r.x-o.x)*(e.y-o.y)-(r.y-o.y)*(e.x-o.x))/n,l=((t.x-e.x)*(e.y-o.y)-(t.y-e.y)*(e.x-o.x))/n;if(!i&&a>ol.render.webgl.EPSILON&&a<1-ol.render.webgl.EPSILON&&l>ol.render.webgl.EPSILON&&l<1-ol.render.webgl.EPSILON||i&&a>=0&&a<=1&&l>=0&&l<=1)return[e.x+a*(t.x-e.x),e.y+a*(t.y-e.y)]}},ol.render.webgl.PolygonReplay.prototype.diagonalIsInside_=function(e,t,o,r,i){if(void 0===t.reflex||void 0===r.reflex)return!1;var n=(o.x-r.x)*(t.y-r.y)>(o.y-r.y)*(t.x-r.x),a=(i.x-r.x)*(t.y-r.y)<(i.y-r.y)*(t.x-r.x),l=(e.x-t.x)*(r.y-t.y)>(e.y-t.y)*(r.x-t.x),s=(o.x-t.x)*(r.y-t.y)<(o.y-t.y)*(r.x-t.x),p=r.reflex?a||n:a&&n,g=t.reflex?s||l:s&&l;return p&&g},ol.render.webgl.PolygonReplay.prototype.drawMultiPolygon=function(e,t){var o,r,i,n,a=e.getEndss(),l=e.getStride(),s=this.indices.length,p=this.lineStringReplay.getCurrentIndex(),g=e.getFlatCoordinates(),u=0;for(o=0,r=a.length;o<r;++o){var c=a[o];if(c.length>0){var y=ol.geom.flat.transform.translate(g,u,c[0],l,-this.origin[0],-this.origin[1]);if(y.length){var h,d=[];for(i=1,n=c.length;i<n;++i)c[i]!==c[i-1]&&(h=ol.geom.flat.transform.translate(g,c[i-1],c[i],l,-this.origin[0],-this.origin[1]),d.push(h));this.lineStringReplay.drawPolygonCoordinates(y,d,l),this.drawCoordinates_(y,d,l)}}u=c[c.length-1]}this.indices.length>s&&(this.startIndices.push(s),this.startIndicesFeature.push(t),this.state_.changed&&(this.styleIndices_.push(s),this.state_.changed=!1)),this.lineStringReplay.getCurrentIndex()>p&&this.lineStringReplay.setPolygonStyle(t,p)},ol.render.webgl.PolygonReplay.prototype.drawPolygon=function(e,t){var o=e.getEnds(),r=e.getStride();if(o.length>0){var i=e.getFlatCoordinates().map(Number),n=ol.geom.flat.transform.translate(i,0,o[0],r,-this.origin[0],-this.origin[1]);if(n.length){var a,l,s,p=[];for(a=1,l=o.length;a<l;++a)o[a]!==o[a-1]&&(s=ol.geom.flat.transform.translate(i,o[a-1],o[a],r,-this.origin[0],-this.origin[1]),p.push(s));this.startIndices.push(this.indices.length),this.startIndicesFeature.push(t),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.lineStringReplay.setPolygonStyle(t),this.lineStringReplay.drawPolygonCoordinates(n,p,r),this.drawCoordinates_(n,p,r)}}},ol.render.webgl.PolygonReplay.prototype.finish=function(e){this.verticesBuffer=new ol.webgl.Buffer(this.vertices),this.indicesBuffer=new ol.webgl.Buffer(this.indices),this.startIndices.push(this.indices.length),this.lineStringReplay.finish(e),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},ol.render.webgl.PolygonReplay.prototype.getDeleteResourcesFunction=function(e){var t=this.verticesBuffer,o=this.indicesBuffer,r=this.lineStringReplay.getDeleteResourcesFunction(e);return function(){e.deleteBuffer(t),e.deleteBuffer(o),r()}},ol.render.webgl.PolygonReplay.prototype.setUpProgram=function(e,t,o,r){var i,n;i=ol.render.webgl.polygonreplay.defaultshader.fragment,n=ol.render.webgl.polygonreplay.defaultshader.vertex;var a,l=t.getProgram(i,n);return this.defaultLocations_?a=this.defaultLocations_:(a=new ol.render.webgl.polygonreplay.defaultshader.Locations(e,l),this.defaultLocations_=a),t.useProgram(l),e.enableVertexAttribArray(a.a_position),e.vertexAttribPointer(a.a_position,2,ol.webgl.FLOAT,!1,8,0),a},ol.render.webgl.PolygonReplay.prototype.shutDownProgram=function(e,t){e.disableVertexAttribArray(t.a_position)},ol.render.webgl.PolygonReplay.prototype.drawReplay=function(e,t,o,r){var i=e.getParameter(e.DEPTH_FUNC),n=e.getParameter(e.DEPTH_WRITEMASK);if(r||(e.enable(e.DEPTH_TEST),e.depthMask(!0),e.depthFunc(e.NOTEQUAL)),ol.obj.isEmpty(o)){var a,l,s,p;for(s=this.startIndices[this.startIndices.length-1],a=this.styleIndices_.length-1;a>=0;--a)l=this.styleIndices_[a],p=this.styles_[a],this.setFillStyle_(e,p),this.drawElements(e,t,l,s),s=l}else this.drawReplaySkipping_(e,t,o);r||(e.disable(e.DEPTH_TEST),e.clear(e.DEPTH_BUFFER_BIT),e.depthMask(n),e.depthFunc(i))},ol.render.webgl.PolygonReplay.prototype.drawHitDetectionReplayOneByOne=function(e,t,o,r,i){var n,a,l,s,p,g,u,c;for(c=this.startIndices.length-2,l=this.startIndices[c+1],n=this.styleIndices_.length-1;n>=0;--n)for(s=this.styles_[n],this.setFillStyle_(e,s),p=this.styleIndices_[n];c>=0&&this.startIndices[c]>=p;){if(a=this.startIndices[c],g=this.startIndicesFeature[c],u=ol.getUid(g).toString(),void 0===o[u]&&g.getGeometry()&&(void 0===i||ol.extent.intersects(i,g.getGeometry().getExtent()))){e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this.drawElements(e,t,a,l);var y=r(g);if(y)return y}c--,l=a}},ol.render.webgl.PolygonReplay.prototype.drawReplaySkipping_=function(e,t,o){var r,i,n,a,l,s,p,g,u;for(g=this.startIndices.length-2,n=i=this.startIndices[g+1],r=this.styleIndices_.length-1;r>=0;--r){for(a=this.styles_[r],this.setFillStyle_(e,a),l=this.styleIndices_[r];g>=0&&this.startIndices[g]>=l;)u=this.startIndices[g],s=this.startIndicesFeature[g],p=ol.getUid(s).toString(),o[p]&&(i!==n&&(this.drawElements(e,t,i,n),e.clear(e.DEPTH_BUFFER_BIT)),n=u),g--,i=u;i!==n&&(this.drawElements(e,t,i,n),e.clear(e.DEPTH_BUFFER_BIT)),i=n=l}},ol.render.webgl.PolygonReplay.prototype.setFillStyle_=function(e,t){e.uniform4fv(this.defaultLocations_.u_color,t)},ol.render.webgl.PolygonReplay.prototype.setFillStrokeStyle=function(e,t){var o=e?e.getColor():[0,0,0,0];if(o=o instanceof CanvasGradient||o instanceof CanvasPattern?ol.render.webgl.defaultFillStyle:ol.color.asArray(o).map(function(e,t){return 3!=t?e/255:e})||ol.render.webgl.defaultFillStyle,this.state_.fillColor&&ol.array.equals(o,this.state_.fillColor)||(this.state_.fillColor=o,this.state_.changed=!0,this.styles_.push(o)),t)this.lineStringReplay.setFillStrokeStyle(null,t);else{var r=new ol.style.Stroke({color:[0,0,0,0],lineWidth:0});this.lineStringReplay.setFillStrokeStyle(null,r)}}),goog.provide("ol.render.webgl.TextReplay"),goog.require("ol"),ol.ENABLE_WEBGL&&(ol.render.webgl.TextReplay=function(e,t){},ol.render.webgl.TextReplay.prototype.setTextStyle=function(e){},ol.render.webgl.TextReplay.prototype.replay=function(e,t,o,r,i,n,a,l,s,p,g){},ol.render.webgl.TextReplay.prototype.drawText=function(e,t,o,r,i,n){},ol.render.webgl.TextReplay.prototype.finish=function(e){},ol.render.webgl.TextReplay.prototype.getDeleteResourcesFunction=function(e){return ol.nullFunction}),goog.provide("ol.render.webgl.ReplayGroup"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.extent"),goog.require("ol.obj"),goog.require("ol.render.replay"),goog.require("ol.render.ReplayGroup"),goog.require("ol.render.webgl.CircleReplay"),goog.require("ol.render.webgl.ImageReplay"),goog.require("ol.render.webgl.LineStringReplay"),goog.require("ol.render.webgl.PolygonReplay"),goog.require("ol.render.webgl.TextReplay"),ol.ENABLE_WEBGL&&(ol.render.webgl.ReplayGroup=function(e,t,o){ol.render.ReplayGroup.call(this),this.maxExtent_=t,this.tolerance_=e,this.renderBuffer_=o,this.replaysByZIndex_={}},ol.inherits(ol.render.webgl.ReplayGroup,ol.render.ReplayGroup),ol.render.webgl.ReplayGroup.prototype.getDeleteResourcesFunction=function(e){var t,o=[];for(t in this.replaysByZIndex_){var r,i=this.replaysByZIndex_[t];for(r in i)o.push(i[r].getDeleteResourcesFunction(e))}return function(){for(var e,t=o.length,r=0;r<t;r++)e=o[r].apply(this,arguments);return e}},ol.render.webgl.ReplayGroup.prototype.finish=function(e){var t;for(t in this.replaysByZIndex_){var o,r=this.replaysByZIndex_[t];for(o in r)r[o].finish(e);
}},ol.render.webgl.ReplayGroup.prototype.getReplay=function(e,t){var o=void 0!==e?e.toString():"0",r=this.replaysByZIndex_[o];void 0===r&&(r={},this.replaysByZIndex_[o]=r);var i=r[t];if(void 0===i){var n=ol.render.webgl.ReplayGroup.BATCH_CONSTRUCTORS_[t];i=new n(this.tolerance_,this.maxExtent_),r[t]=i}return i},ol.render.webgl.ReplayGroup.prototype.isEmpty=function(){return ol.obj.isEmpty(this.replaysByZIndex_)},ol.render.webgl.ReplayGroup.prototype.replay=function(e,t,o,r,i,n,a,l){var s=Object.keys(this.replaysByZIndex_).map(Number);s.sort(ol.array.numberSafeCompareFunction);var p,g,u,c,y,h;for(p=0,g=s.length;p<g;++p)for(y=this.replaysByZIndex_[s[p].toString()],u=0,c=ol.render.replay.ORDER.length;u<c;++u)h=y[ol.render.replay.ORDER[u]],void 0!==h&&h.replay(e,t,o,r,i,n,a,l,void 0,!1)},ol.render.webgl.ReplayGroup.prototype.replayHitDetection_=function(e,t,o,r,i,n,a,l,s,p,g){var u=Object.keys(this.replaysByZIndex_).map(Number);u.sort(function(e,t){return t-e});var c,y,h,d,f,m;for(c=0,y=u.length;c<y;++c)for(d=this.replaysByZIndex_[u[c].toString()],h=ol.render.replay.ORDER.length-1;h>=0;--h)if(f=d[ol.render.replay.ORDER[h]],void 0!==f&&(m=f.replay(e,t,o,r,i,n,a,l,s,p,g)))return m},ol.render.webgl.ReplayGroup.prototype.forEachFeatureAtCoordinate=function(e,t,o,r,i,n,a,l,s,p){var g=t.getGL();g.bindFramebuffer(g.FRAMEBUFFER,t.getHitDetectionFramebuffer());var u;return void 0!==this.renderBuffer_&&(u=ol.extent.buffer(ol.extent.createOrUpdateFromCoordinate(e),r*this.renderBuffer_)),this.replayHitDetection_(t,e,r,i,ol.render.webgl.ReplayGroup.HIT_DETECTION_SIZE_,a,l,s,function(e){var t=new Uint8Array(4);if(g.readPixels(0,0,1,1,g.RGBA,g.UNSIGNED_BYTE,t),t[3]>0){var o=p(e);if(o)return o}},!0,u)},ol.render.webgl.ReplayGroup.prototype.hasFeatureAtCoordinate=function(e,t,o,r,i,n,a,l,s){var p=t.getGL();p.bindFramebuffer(p.FRAMEBUFFER,t.getHitDetectionFramebuffer());var g=this.replayHitDetection_(t,e,r,i,ol.render.webgl.ReplayGroup.HIT_DETECTION_SIZE_,a,l,s,function(e){var t=new Uint8Array(4);return p.readPixels(0,0,1,1,p.RGBA,p.UNSIGNED_BYTE,t),t[3]>0},!1);return void 0!==g},ol.render.webgl.ReplayGroup.HIT_DETECTION_SIZE_=[1,1],ol.render.webgl.ReplayGroup.BATCH_CONSTRUCTORS_={Circle:ol.render.webgl.CircleReplay,Image:ol.render.webgl.ImageReplay,LineString:ol.render.webgl.LineStringReplay,Polygon:ol.render.webgl.PolygonReplay,Text:ol.render.webgl.TextReplay}),goog.provide("ol.render.webgl.Immediate"),goog.require("ol"),goog.require("ol.extent"),goog.require("ol.geom.GeometryType"),goog.require("ol.render.ReplayType"),goog.require("ol.render.VectorContext"),goog.require("ol.render.webgl.ReplayGroup"),ol.ENABLE_WEBGL&&(ol.render.webgl.Immediate=function(e,t,o,r,i,n,a){ol.render.VectorContext.call(this),this.context_=e,this.center_=t,this.extent_=n,this.pixelRatio_=a,this.size_=i,this.rotation_=r,this.resolution_=o,this.imageStyle_=null,this.fillStyle_=null,this.strokeStyle_=null},ol.inherits(ol.render.webgl.Immediate,ol.render.VectorContext),ol.render.webgl.Immediate.prototype.setStyle=function(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage())},ol.render.webgl.Immediate.prototype.drawGeometry=function(e){var t=e.getType();switch(t){case ol.geom.GeometryType.POINT:this.drawPoint(e,null);break;case ol.geom.GeometryType.LINE_STRING:this.drawLineString(e,null);break;case ol.geom.GeometryType.POLYGON:this.drawPolygon(e,null);break;case ol.geom.GeometryType.MULTI_POINT:this.drawMultiPoint(e,null);break;case ol.geom.GeometryType.MULTI_LINE_STRING:this.drawMultiLineString(e,null);break;case ol.geom.GeometryType.MULTI_POLYGON:this.drawMultiPolygon(e,null);break;case ol.geom.GeometryType.GEOMETRY_COLLECTION:this.drawGeometryCollection(e,null);break;case ol.geom.GeometryType.CIRCLE:this.drawCircle(e,null)}},ol.render.webgl.Immediate.prototype.drawFeature=function(e,t){var o=t.getGeometryFunction()(e);o&&ol.extent.intersects(this.extent_,o.getExtent())&&(this.setStyle(t),this.drawGeometry(o))},ol.render.webgl.Immediate.prototype.drawGeometryCollection=function(e,t){var o,r,i=e.getGeometriesArray();for(o=0,r=i.length;o<r;++o)this.drawGeometry(i[o])},ol.render.webgl.Immediate.prototype.drawPoint=function(e,t){var o=this.context_,r=new ol.render.webgl.ReplayGroup(1,this.extent_),i=r.getReplay(0,ol.render.ReplayType.IMAGE);i.setImageStyle(this.imageStyle_),i.drawPoint(e,t),i.finish(o);var n,a=1,l={},s=!1;i.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,a,l,n,s),i.getDeleteResourcesFunction(o)()},ol.render.webgl.Immediate.prototype.drawMultiPoint=function(e,t){var o=this.context_,r=new ol.render.webgl.ReplayGroup(1,this.extent_),i=r.getReplay(0,ol.render.ReplayType.IMAGE);i.setImageStyle(this.imageStyle_),i.drawMultiPoint(e,t),i.finish(o);var n,a=1,l={},s=!1;i.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,a,l,n,s),i.getDeleteResourcesFunction(o)()},ol.render.webgl.Immediate.prototype.drawLineString=function(e,t){var o=this.context_,r=new ol.render.webgl.ReplayGroup(1,this.extent_),i=r.getReplay(0,ol.render.ReplayType.LINE_STRING);i.setFillStrokeStyle(null,this.strokeStyle_),i.drawLineString(e,t),i.finish(o);var n,a=1,l={},s=!1;i.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,a,l,n,s),i.getDeleteResourcesFunction(o)()},ol.render.webgl.Immediate.prototype.drawMultiLineString=function(e,t){var o=this.context_,r=new ol.render.webgl.ReplayGroup(1,this.extent_),i=r.getReplay(0,ol.render.ReplayType.LINE_STRING);i.setFillStrokeStyle(null,this.strokeStyle_),i.drawMultiLineString(e,t),i.finish(o);var n,a=1,l={},s=!1;i.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,a,l,n,s),i.getDeleteResourcesFunction(o)()},ol.render.webgl.Immediate.prototype.drawPolygon=function(e,t){var o=this.context_,r=new ol.render.webgl.ReplayGroup(1,this.extent_),i=r.getReplay(0,ol.render.ReplayType.POLYGON);i.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),i.drawPolygon(e,t),i.finish(o);var n,a=1,l={},s=!1;i.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,a,l,n,s),i.getDeleteResourcesFunction(o)()},ol.render.webgl.Immediate.prototype.drawMultiPolygon=function(e,t){var o=this.context_,r=new ol.render.webgl.ReplayGroup(1,this.extent_),i=r.getReplay(0,ol.render.ReplayType.POLYGON);i.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),i.drawMultiPolygon(e,t),i.finish(o);var n,a=1,l={},s=!1;i.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,a,l,n,s),i.getDeleteResourcesFunction(o)()},ol.render.webgl.Immediate.prototype.drawCircle=function(e,t){var o=this.context_,r=new ol.render.webgl.ReplayGroup(1,this.extent_),i=r.getReplay(0,ol.render.ReplayType.CIRCLE);i.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),i.drawCircle(e,t),i.finish(o);var n,a=1,l={},s=!1;i.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,a,l,n,s),i.getDeleteResourcesFunction(o)()},ol.render.webgl.Immediate.prototype.setImageStyle=function(e){this.imageStyle_=e},ol.render.webgl.Immediate.prototype.setFillStrokeStyle=function(e,t){this.fillStyle_=e,this.strokeStyle_=t}),goog.provide("ol.structs.LRUCache"),goog.require("ol.asserts"),ol.structs.LRUCache=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},ol.structs.LRUCache.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},ol.structs.LRUCache.prototype.containsKey=function(e){return this.entries_.hasOwnProperty(e)},ol.structs.LRUCache.prototype.forEach=function(e,t){for(var o=this.oldest_;o;)e.call(t,o.value_,o.key_,this),o=o.newer},ol.structs.LRUCache.prototype.get=function(e){var t=this.entries_[e];return ol.asserts.assert(void 0!==t,15),t===this.newest_?t.value_:(t===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(t.newer.older=t.older,t.older.newer=t.newer),t.newer=null,t.older=this.newest_,this.newest_.newer=t,this.newest_=t,t.value_)},ol.structs.LRUCache.prototype.getCount=function(){return this.count_},ol.structs.LRUCache.prototype.getKeys=function(){var e,t=new Array(this.count_),o=0;for(e=this.newest_;e;e=e.older)t[o++]=e.key_;return t},ol.structs.LRUCache.prototype.getValues=function(){var e,t=new Array(this.count_),o=0;for(e=this.newest_;e;e=e.older)t[o++]=e.value_;return t},ol.structs.LRUCache.prototype.peekLast=function(){return this.oldest_.value_},ol.structs.LRUCache.prototype.peekLastKey=function(){return this.oldest_.key_},ol.structs.LRUCache.prototype.pop=function(){var e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_},ol.structs.LRUCache.prototype.replace=function(e,t){this.get(e),this.entries_[e].value_=t},ol.structs.LRUCache.prototype.set=function(e,t){ol.asserts.assert(!(e in this.entries_),16);var o={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=o:this.oldest_=o,this.newest_=o,this.entries_[e]=o,++this.count_},goog.provide("ol.renderer.webgl.Map"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.css"),goog.require("ol.dom"),goog.require("ol.events"),goog.require("ol.layer.Layer"),goog.require("ol.render.Event"),goog.require("ol.render.EventType"),goog.require("ol.render.webgl.Immediate"),goog.require("ol.renderer.Map"),goog.require("ol.renderer.Type"),goog.require("ol.source.State"),goog.require("ol.structs.LRUCache"),goog.require("ol.structs.PriorityQueue"),goog.require("ol.webgl"),goog.require("ol.webgl.Context"),goog.require("ol.webgl.ContextEventType"),ol.ENABLE_WEBGL&&(ol.renderer.webgl.Map=function(e,t){ol.renderer.Map.call(this,e,t),this.canvas_=document.createElement("CANVAS"),this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=ol.css.CLASS_UNSELECTABLE,e.insertBefore(this.canvas_,e.childNodes[0]||null),this.clipTileCanvasWidth_=0,this.clipTileCanvasHeight_=0,this.clipTileContext_=ol.dom.createCanvasContext2D(),this.renderedVisible_=!0,this.gl_=ol.webgl.getContext(this.canvas_,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0}),this.context_=new ol.webgl.Context(this.canvas_,this.gl_),ol.events.listen(this.canvas_,ol.webgl.ContextEventType.LOST,this.handleWebGLContextLost,this),ol.events.listen(this.canvas_,ol.webgl.ContextEventType.RESTORED,this.handleWebGLContextRestored,this),this.textureCache_=new ol.structs.LRUCache,this.focus_=null,this.tileTextureQueue_=new ol.structs.PriorityQueue(function(e){var t=e[1],o=e[2],r=t[0]-this.focus_[0],i=t[1]-this.focus_[1];return 65536*Math.log(o)+Math.sqrt(r*r+i*i)/o}.bind(this),function(e){return e[0].getKey()}),this.loadNextTileTexture_=function(e,t){if(!this.tileTextureQueue_.isEmpty()){this.tileTextureQueue_.reprioritize();var o=this.tileTextureQueue_.dequeue(),r=o[0],i=o[3],n=o[4];this.bindTileTexture(r,i,n,ol.webgl.LINEAR,ol.webgl.LINEAR)}return!1}.bind(this),this.textureCacheFrameMarkerCount_=0,this.initializeGL_()},ol.inherits(ol.renderer.webgl.Map,ol.renderer.Map),ol.renderer.webgl.Map.prototype.bindTileTexture=function(e,t,o,r,i){var n=this.getGL(),a=e.getKey();if(this.textureCache_.containsKey(a)){var l=this.textureCache_.get(a);n.bindTexture(ol.webgl.TEXTURE_2D,l.texture),l.magFilter!=r&&(n.texParameteri(ol.webgl.TEXTURE_2D,ol.webgl.TEXTURE_MAG_FILTER,r),l.magFilter=r),l.minFilter!=i&&(n.texParameteri(ol.webgl.TEXTURE_2D,ol.webgl.TEXTURE_MIN_FILTER,i),l.minFilter=i)}else{var s=n.createTexture();if(n.bindTexture(ol.webgl.TEXTURE_2D,s),o>0){var p=this.clipTileContext_.canvas,g=this.clipTileContext_;this.clipTileCanvasWidth_!==t[0]||this.clipTileCanvasHeight_!==t[1]?(p.width=t[0],p.height=t[1],this.clipTileCanvasWidth_=t[0],this.clipTileCanvasHeight_=t[1]):g.clearRect(0,0,t[0],t[1]),g.drawImage(e.getImage(),o,o,t[0],t[1],0,0,t[0],t[1]),n.texImage2D(ol.webgl.TEXTURE_2D,0,ol.webgl.RGBA,ol.webgl.RGBA,ol.webgl.UNSIGNED_BYTE,p)}else n.texImage2D(ol.webgl.TEXTURE_2D,0,ol.webgl.RGBA,ol.webgl.RGBA,ol.webgl.UNSIGNED_BYTE,e.getImage());n.texParameteri(ol.webgl.TEXTURE_2D,ol.webgl.TEXTURE_MAG_FILTER,r),n.texParameteri(ol.webgl.TEXTURE_2D,ol.webgl.TEXTURE_MIN_FILTER,i),n.texParameteri(ol.webgl.TEXTURE_2D,ol.webgl.TEXTURE_WRAP_S,ol.webgl.CLAMP_TO_EDGE),n.texParameteri(ol.webgl.TEXTURE_2D,ol.webgl.TEXTURE_WRAP_T,ol.webgl.CLAMP_TO_EDGE),this.textureCache_.set(a,{texture:s,magFilter:r,minFilter:i})}},ol.renderer.webgl.Map.prototype.dispatchComposeEvent_=function(e,t){var o=this.getMap();if(o.hasListener(e)){var r=this.context_,i=t.extent,n=t.size,a=t.viewState,l=t.pixelRatio,s=a.resolution,p=a.center,g=a.rotation,u=new ol.render.webgl.Immediate(r,p,s,g,n,i,l),c=new ol.render.Event(e,u,t,null,r);o.dispatchEvent(c)}},ol.renderer.webgl.Map.prototype.disposeInternal=function(){var e=this.getGL();e.isContextLost()||this.textureCache_.forEach(function(t){t&&e.deleteTexture(t.texture)}),this.context_.dispose(),ol.renderer.Map.prototype.disposeInternal.call(this)},ol.renderer.webgl.Map.prototype.expireCache_=function(e,t){for(var o,r=this.getGL();this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>ol.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK;){if(o=this.textureCache_.peekLast())r.deleteTexture(o.texture);else{if(+this.textureCache_.peekLastKey()==t.index)break;--this.textureCacheFrameMarkerCount_}this.textureCache_.pop()}},ol.renderer.webgl.Map.prototype.getContext=function(){return this.context_},ol.renderer.webgl.Map.prototype.getGL=function(){return this.gl_},ol.renderer.webgl.Map.prototype.getTileTextureQueue=function(){return this.tileTextureQueue_},ol.renderer.webgl.Map.prototype.getType=function(){return ol.renderer.Type.WEBGL},ol.renderer.webgl.Map.prototype.handleWebGLContextLost=function(e){e.preventDefault(),this.textureCache_.clear(),this.textureCacheFrameMarkerCount_=0;var t=this.getLayerRenderers();for(var o in t){var r=t[o];r.handleWebGLContextLost()}},ol.renderer.webgl.Map.prototype.handleWebGLContextRestored=function(){this.initializeGL_(),this.getMap().render()},ol.renderer.webgl.Map.prototype.initializeGL_=function(){var e=this.gl_;e.activeTexture(ol.webgl.TEXTURE0),e.blendFuncSeparate(ol.webgl.SRC_ALPHA,ol.webgl.ONE_MINUS_SRC_ALPHA,ol.webgl.ONE,ol.webgl.ONE_MINUS_SRC_ALPHA),e.disable(ol.webgl.CULL_FACE),e.disable(ol.webgl.DEPTH_TEST),e.disable(ol.webgl.SCISSOR_TEST),e.disable(ol.webgl.STENCIL_TEST)},ol.renderer.webgl.Map.prototype.isTileTextureLoaded=function(e){return this.textureCache_.containsKey(e.getKey())},ol.renderer.webgl.Map.prototype.renderFrame=function(e){var t=this.getContext(),o=this.getGL();if(o.isContextLost())return!1;if(!e)return this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1),!1;this.focus_=e.focus,this.textureCache_.set((-e.index).toString(),null),++this.textureCacheFrameMarkerCount_,this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,e);var r=[],i=e.layerStatesArray;ol.array.stableSort(i,ol.renderer.Map.sortByZIndex);var n,a,l,s,p=e.viewState.resolution;for(n=0,a=i.length;n<a;++n)s=i[n],ol.layer.Layer.visibleAtResolution(s,p)&&s.sourceState==ol.source.State.READY&&(l=this.getLayerRenderer(s.layer),l.prepareFrame(e,s,t)&&r.push(s));var g=e.size[0]*e.pixelRatio,u=e.size[1]*e.pixelRatio;for(this.canvas_.width==g&&this.canvas_.height==u||(this.canvas_.width=g,this.canvas_.height=u),o.bindFramebuffer(ol.webgl.FRAMEBUFFER,null),o.clearColor(0,0,0,0),o.clear(ol.webgl.COLOR_BUFFER_BIT),o.enable(ol.webgl.BLEND),o.viewport(0,0,this.canvas_.width,this.canvas_.height),n=0,a=r.length;n<a;++n)s=r[n],l=this.getLayerRenderer(s.layer),l.composeFrame(e,s,t);this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.calculateMatrices2D(e),this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>ol.WEBGL_TEXTURE_CACHE_HIGH_WATER_MARK&&e.postRenderFunctions.push(this.expireCache_.bind(this)),this.tileTextureQueue_.isEmpty()||(e.postRenderFunctions.push(this.loadNextTileTexture_),e.animate=!0),this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,e),this.scheduleRemoveUnusedLayerRenderers(e),this.scheduleExpireIconCache(e)},ol.renderer.webgl.Map.prototype.forEachFeatureAtCoordinate=function(e,t,o,r,i,n,a){var l;if(this.getGL().isContextLost())return!1;var s,p=t.viewState,g=t.layerStatesArray,u=g.length;for(s=u-1;s>=0;--s){var c=g[s],y=c.layer;if(ol.layer.Layer.visibleAtResolution(c,p.resolution)&&n.call(a,y)){var h=this.getLayerRenderer(y);if(l=h.forEachFeatureAtCoordinate(e,t,o,r,i))return l}}},ol.renderer.webgl.Map.prototype.hasFeatureAtCoordinate=function(e,t,o,r,i){var n=!1;if(this.getGL().isContextLost())return!1;var a,l=t.viewState,s=t.layerStatesArray,p=s.length;for(a=p-1;a>=0;--a){var g=s[a],u=g.layer;if(ol.layer.Layer.visibleAtResolution(g,l.resolution)&&r.call(i,u)){var c=this.getLayerRenderer(u);if(n=c.hasFeatureAtCoordinate(e,t))return!0}}return n},ol.renderer.webgl.Map.prototype.forEachLayerAtPixel=function(e,t,o,r,i,n){if(this.getGL().isContextLost())return!1;var a,l,s=t.viewState,p=t.layerStatesArray,g=p.length;for(l=g-1;l>=0;--l){var u=p[l],c=u.layer;if(ol.layer.Layer.visibleAtResolution(u,s.resolution)&&i.call(r,c)){var y=this.getLayerRenderer(c);if(a=y.forEachLayerAtPixel(e,t,o,r))return a}}}),goog.provide("ol.Map"),goog.require("ol");goog.require("ol.Collection");goog.require("ol.CollectionEventType"),goog.require("ol.MapBrowserEvent"),goog.require("ol.MapBrowserEventHandler"),goog.require("ol.MapBrowserEventType"),goog.require("ol.MapEvent"),goog.require("ol.MapEventType"),goog.require("ol.MapProperty"),goog.require("ol.Object"),goog.require("ol.ObjectEventType"),goog.require("ol.TileQueue"),goog.require("ol.View"),goog.require("ol.ViewHint"),goog.require("ol.asserts"),goog.require("ol.control"),goog.require("ol.dom"),goog.require("ol.events"),goog.require("ol.events.Event"),goog.require("ol.events.EventType"),goog.require("ol.extent"),goog.require("ol.functions"),goog.require("ol.has"),goog.require("ol.interaction"),goog.require("ol.layer.Group"),goog.require("ol.obj"),goog.require("ol.renderer.Map"),goog.require("ol.renderer.Type"),goog.require("ol.renderer.canvas.Map"),goog.require("ol.renderer.webgl.Map"),goog.require("ol.size"),goog.require("ol.structs.PriorityQueue"),goog.require("ol.transform"),ol.OL_URL="https://openlayers.org/",ol.OL_LOGO_URL="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC",ol.DEFAULT_RENDERER_TYPES=[ol.renderer.Type.CANVAS,ol.renderer.Type.WEBGL],ol.Map=function(e){ol.Object.call(this);var t=ol.Map.createOptionsInternal(e);this.loadTilesWhileAnimating_=void 0!==e.loadTilesWhileAnimating&&e.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==e.loadTilesWhileInteracting&&e.loadTilesWhileInteracting,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:ol.has.DEVICE_PIXEL_RATIO,this.logos_=t.logos,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=ol.transform.create(),this.pixelToCoordinateTransform_=ol.transform.create(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("DIV"),this.viewport_.className="ol-viewport"+(ol.has.TOUCH?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("DIV"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("DIV"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var o=[ol.events.EventType.CLICK,ol.events.EventType.DBLCLICK,ol.events.EventType.MOUSEDOWN,ol.events.EventType.TOUCHSTART,ol.events.EventType.MSPOINTERDOWN,ol.MapBrowserEventType.POINTERDOWN,ol.events.EventType.MOUSEWHEEL,ol.events.EventType.WHEEL],r=0,i=o.length;r<i;++r)ol.events.listen(this.overlayContainerStopEvent_,o[r],ol.events.Event.stopPropagation);this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new ol.MapBrowserEventHandler(this,e.moveTolerance);for(var n in ol.MapBrowserEventType)ol.events.listen(this.mapBrowserEventHandler_,ol.MapBrowserEventType[n],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=t.keyboardEventTarget,this.keyHandlerKeys_=null,ol.events.listen(this.viewport_,ol.events.EventType.WHEEL,this.handleBrowserEvent,this),ol.events.listen(this.viewport_,ol.events.EventType.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls_=t.controls,this.interactions_=t.interactions,this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=new t.rendererConstructor(this.viewport_,this),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new ol.TileQueue(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},ol.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.LAYERGROUP),this.handleLayerGroupChanged_,this),ol.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.VIEW),this.handleViewChanged_,this),ol.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.SIZE),this.handleSizeChanged_,this),ol.events.listen(this,ol.Object.getChangeEventType(ol.MapProperty.TARGET),this.handleTargetChanged_,this),this.setProperties(t.values),this.controls_.forEach(function(e){e.setMap(this)},this),ol.events.listen(this.controls_,ol.CollectionEventType.ADD,function(e){e.element.setMap(this)},this),ol.events.listen(this.controls_,ol.CollectionEventType.REMOVE,function(e){e.element.setMap(null)},this),this.interactions_.forEach(function(e){e.setMap(this)},this),ol.events.listen(this.interactions_,ol.CollectionEventType.ADD,function(e){e.element.setMap(this)},this),ol.events.listen(this.interactions_,ol.CollectionEventType.REMOVE,function(e){e.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_,this),ol.events.listen(this.overlays_,ol.CollectionEventType.ADD,function(e){this.addOverlayInternal_(e.element)},this),ol.events.listen(this.overlays_,ol.CollectionEventType.REMOVE,function(e){var t=e.element,o=t.getId();void 0!==o&&delete this.overlayIdIndex_[o.toString()],e.element.setMap(null)},this)},ol.inherits(ol.Map,ol.Object),ol.Map.prototype.addControl=function(e){this.getControls().push(e)},ol.Map.prototype.addInteraction=function(e){this.getInteractions().push(e)},ol.Map.prototype.addLayer=function(e){var t=this.getLayerGroup().getLayers();t.push(e)},ol.Map.prototype.addOverlay=function(e){this.getOverlays().push(e)},ol.Map.prototype.addOverlayInternal_=function(e){var t=e.getId();void 0!==t&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)},ol.Map.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),this.renderer_.dispose(),ol.events.unlisten(this.viewport_,ol.events.EventType.WHEEL,this.handleBrowserEvent,this),ol.events.unlisten(this.viewport_,ol.events.EventType.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(window.removeEventListener(ol.events.EventType.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),ol.Object.prototype.disposeInternal.call(this)},ol.Map.prototype.forEachFeatureAtPixel=function(e,t,o){if(this.frameState_){var r=this.getCoordinateFromPixel(e);o=void 0!==o?o:{};var i=void 0!==o.hitTolerance?o.hitTolerance*this.frameState_.pixelRatio:0,n=void 0!==o.layerFilter?o.layerFilter:ol.functions.TRUE;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,i,t,null,n,null)}},ol.Map.prototype.forEachLayerAtPixel=function(e,t,o,r,i){if(this.frameState_){var n=void 0!==o?o:null,a=void 0!==r?r:ol.functions.TRUE,l=void 0!==i?i:null;return this.renderer_.forEachLayerAtPixel(e,this.frameState_,t,n,a,l)}},ol.Map.prototype.hasFeatureAtPixel=function(e,t){if(!this.frameState_)return!1;var o=this.getCoordinateFromPixel(e);t=void 0!==t?t:{};var r=void 0!==t.layerFilter?t.layerFilter:ol.functions.TRUE,i=void 0!==t.hitTolerance?t.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(o,this.frameState_,i,r,null)},ol.Map.prototype.getEventCoordinate=function(e){return this.getCoordinateFromPixel(this.getEventPixel(e))},ol.Map.prototype.getEventPixel=function(e){var t=this.viewport_.getBoundingClientRect(),o=e.changedTouches?e.changedTouches[0]:e;return[o.clientX-t.left,o.clientY-t.top]},ol.Map.prototype.getTarget=function(){return this.get(ol.MapProperty.TARGET)},ol.Map.prototype.getTargetElement=function(){var e=this.getTarget();return void 0!==e?"string"==typeof e?document.getElementById(e):e:null},ol.Map.prototype.getCoordinateFromPixel=function(e){var t=this.frameState_;return t?ol.transform.apply(t.pixelToCoordinateTransform,e.slice()):null},ol.Map.prototype.getControls=function(){return this.controls_},ol.Map.prototype.getOverlays=function(){return this.overlays_},ol.Map.prototype.getOverlayById=function(e){var t=this.overlayIdIndex_[e.toString()];return void 0!==t?t:null},ol.Map.prototype.getInteractions=function(){return this.interactions_},ol.Map.prototype.getLayerGroup=function(){return this.get(ol.MapProperty.LAYERGROUP)},ol.Map.prototype.getLayers=function(){var e=this.getLayerGroup().getLayers();return e},ol.Map.prototype.getPixelFromCoordinate=function(e){var t=this.frameState_;return t?ol.transform.apply(t.coordinateToPixelTransform,e.slice(0,2)):null},ol.Map.prototype.getRenderer=function(){return this.renderer_},ol.Map.prototype.getSize=function(){return this.get(ol.MapProperty.SIZE)},ol.Map.prototype.getView=function(){return this.get(ol.MapProperty.VIEW)},ol.Map.prototype.getViewport=function(){return this.viewport_},ol.Map.prototype.getOverlayContainer=function(){return this.overlayContainer_},ol.Map.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},ol.Map.prototype.getTilePriority=function(e,t,o,r){var i=this.frameState_;if(!(i&&t in i.wantedTiles))return ol.structs.PriorityQueue.DROP;if(!i.wantedTiles[t][e.getKey()])return ol.structs.PriorityQueue.DROP;var n=o[0]-i.focus[0],a=o[1]-i.focus[1];return 65536*Math.log(r)+Math.sqrt(n*n+a*a)/r},ol.Map.prototype.handleBrowserEvent=function(e,t){var o=t||e.type,r=new ol.MapBrowserEvent(o,this,e);this.handleMapBrowserEvent(r)},ol.Map.prototype.handleMapBrowserEvent=function(e){if(this.frameState_){this.focus_=e.coordinate,e.frameState=this.frameState_;var t,o=this.getInteractions().getArray();if(this.dispatchEvent(e)!==!1)for(t=o.length-1;t>=0;t--){var r=o[t];if(r.getActive()){var i=r.handleEvent(e);if(!i)break}}}},ol.Map.prototype.handlePostRender=function(){var e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){var o=16,r=o;if(e){var i=e.viewHints;i[ol.ViewHint.ANIMATING]&&(o=this.loadTilesWhileAnimating_?8:0,r=2),i[ol.ViewHint.INTERACTING]&&(o=this.loadTilesWhileInteracting_?8:0,r=2)}t.getTilesLoading()<o&&(t.reprioritize(),t.loadMoreTiles(o,r))}var n,a,l=this.postRenderFunctions_;for(n=0,a=l.length;n<a;++n)l[n](this,e);l.length=0},ol.Map.prototype.handleSizeChanged_=function(){this.render()},ol.Map.prototype.handleTargetChanged_=function(){var e;if(this.getTarget()&&(e=this.getTargetElement()),this.keyHandlerKeys_){for(var t=0,o=this.keyHandlerKeys_.length;t<o;++t)ol.events.unlistenByKey(this.keyHandlerKeys_[t]);this.keyHandlerKeys_=null}if(e){e.appendChild(this.viewport_);var r=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.keyHandlerKeys_=[ol.events.listen(r,ol.events.EventType.KEYDOWN,this.handleBrowserEvent,this),ol.events.listen(r,ol.events.EventType.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(ol.events.EventType.RESIZE,this.handleResize_,!1))}else ol.dom.removeNode(this.viewport_),void 0!==this.handleResize_&&(window.removeEventListener(ol.events.EventType.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},ol.Map.prototype.handleTileChange_=function(){this.render()},ol.Map.prototype.handleViewPropertyChanged_=function(){this.render()},ol.Map.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(ol.events.unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ol.events.unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var e=this.getView();e&&(this.viewport_.setAttribute("data-view",ol.getUid(e)),this.viewPropertyListenerKey_=ol.events.listen(e,ol.ObjectEventType.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ol.events.listen(e,ol.events.EventType.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},ol.Map.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ol.events.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);var e=this.getLayerGroup();e&&(this.layerGroupPropertyListenerKeys_=[ol.events.listen(e,ol.ObjectEventType.PROPERTYCHANGE,this.render,this),ol.events.listen(e,ol.events.EventType.CHANGE,this.render,this)]),this.render()},ol.Map.prototype.isRendered=function(){return!!this.frameState_},ol.Map.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},ol.Map.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},ol.Map.prototype.removeControl=function(e){return this.getControls().remove(e)},ol.Map.prototype.removeInteraction=function(e){return this.getInteractions().remove(e)},ol.Map.prototype.removeLayer=function(e){var t=this.getLayerGroup().getLayers();return t.remove(e)},ol.Map.prototype.removeOverlay=function(e){return this.getOverlays().remove(e)},ol.Map.prototype.renderFrame_=function(e){var t,o,r,i=this.getSize(),n=this.getView(),a=ol.extent.createEmpty(),l=this.frameState_,s=null;if(void 0!==i&&ol.size.hasArea(i)&&n&&n.isDef()){var p=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),g=this.getLayerGroup().getLayerStatesArray(),u={};
for(t=0,o=g.length;t<o;++t)u[ol.getUid(g[t].layer)]=g[t];r=n.getState(),s={animate:!1,attributions:{},coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:a,focus:this.focus_?this.focus_:r.center,index:this.frameIndex_++,layerStates:u,layerStatesArray:g,logos:ol.obj.assign({},this.logos_),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:r,viewHints:p,wantedTiles:{}}}if(s&&(s.extent=ol.extent.getForViewAndSize(r.center,r.resolution,r.rotation,s.size,a)),this.frameState_=s,this.renderer_.renderFrame(s),s){if(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),l){var c=!this.previousExtent_||!ol.extent.isEmpty(this.previousExtent_)&&!ol.extent.equals(s.extent,this.previousExtent_);c&&(this.dispatchEvent(new ol.MapEvent(ol.MapEventType.MOVESTART,this,l)),this.previousExtent_=ol.extent.createOrUpdateEmpty(this.previousExtent_))}var y=this.previousExtent_&&!s.viewHints[ol.ViewHint.ANIMATING]&&!s.viewHints[ol.ViewHint.INTERACTING]&&!ol.extent.equals(s.extent,this.previousExtent_);y&&(this.dispatchEvent(new ol.MapEvent(ol.MapEventType.MOVEEND,this,s)),ol.extent.clone(s.extent,this.previousExtent_))}this.dispatchEvent(new ol.MapEvent(ol.MapEventType.POSTRENDER,this,s)),setTimeout(this.handlePostRender.bind(this),0)},ol.Map.prototype.setLayerGroup=function(e){this.set(ol.MapProperty.LAYERGROUP,e)},ol.Map.prototype.setSize=function(e){this.set(ol.MapProperty.SIZE,e)},ol.Map.prototype.setTarget=function(e){this.set(ol.MapProperty.TARGET,e)},ol.Map.prototype.setView=function(e){this.set(ol.MapProperty.VIEW,e)},ol.Map.prototype.skipFeature=function(e){var t=ol.getUid(e).toString();this.skippedFeatureUids_[t]=!0,this.render()},ol.Map.prototype.updateSize=function(){var e=this.getTargetElement();if(e){var t=getComputedStyle(e);this.setSize([e.offsetWidth-parseFloat(t.borderLeftWidth)-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)-parseFloat(t.borderRightWidth),e.offsetHeight-parseFloat(t.borderTopWidth)-parseFloat(t.paddingTop)-parseFloat(t.paddingBottom)-parseFloat(t.borderBottomWidth)])}else this.setSize(void 0)},ol.Map.prototype.unskipFeature=function(e){var t=ol.getUid(e).toString();delete this.skippedFeatureUids_[t],this.render()},ol.Map.createOptionsInternal=function(e){var t=null;void 0!==e.keyboardEventTarget&&(t="string"==typeof e.keyboardEventTarget?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var o={},r={};if(void 0===e.logo||"boolean"==typeof e.logo&&e.logo)r[ol.OL_LOGO_URL]=ol.OL_URL;else{var i=e.logo;"string"==typeof i?r[i]="":i instanceof HTMLElement?r[ol.getUid(i).toString()]=i:i&&(ol.asserts.assert("string"==typeof i.href,44),ol.asserts.assert("string"==typeof i.src,45),r[i.src]=i.href)}var n=e.layers instanceof ol.layer.Group?e.layers:new ol.layer.Group({layers:e.layers});o[ol.MapProperty.LAYERGROUP]=n,o[ol.MapProperty.TARGET]=e.target,o[ol.MapProperty.VIEW]=void 0!==e.view?e.view:new ol.View;var a,l=ol.renderer.Map;void 0!==e.renderer?(Array.isArray(e.renderer)?a=e.renderer:"string"==typeof e.renderer?a=[e.renderer]:ol.asserts.assert(!1,46),a.indexOf("dom")>=0&&(a=a.concat(ol.DEFAULT_RENDERER_TYPES))):a=ol.DEFAULT_RENDERER_TYPES;var s,p;for(s=0,p=a.length;s<p;++s){var g=a[s];if(ol.ENABLE_CANVAS&&g==ol.renderer.Type.CANVAS){if(ol.has.CANVAS){l=ol.renderer.canvas.Map;break}}else if(ol.ENABLE_WEBGL&&g==ol.renderer.Type.WEBGL&&ol.has.WEBGL){l=ol.renderer.webgl.Map;break}}var u;void 0!==e.controls?Array.isArray(e.controls)?u=new ol.Collection(e.controls.slice()):(ol.asserts.assert(e.controls instanceof ol.Collection,47),u=e.controls):u=ol.control.defaults();var c;void 0!==e.interactions?Array.isArray(e.interactions)?c=new ol.Collection(e.interactions.slice()):(ol.asserts.assert(e.interactions instanceof ol.Collection,48),c=e.interactions):c=ol.interaction.defaults();var y;return void 0!==e.overlays?Array.isArray(e.overlays)?y=new ol.Collection(e.overlays.slice()):(ol.asserts.assert(e.overlays instanceof ol.Collection,49),y=e.overlays):y=new ol.Collection,{controls:u,interactions:c,keyboardEventTarget:t,logos:r,overlays:y,rendererConstructor:l,values:o}},goog.provide("ol.OverlayPositioning"),ol.OverlayPositioning={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},goog.provide("ol.Overlay"),goog.require("ol"),goog.require("ol.MapEventType"),goog.require("ol.Object"),goog.require("ol.OverlayPositioning"),goog.require("ol.css"),goog.require("ol.dom"),goog.require("ol.events"),goog.require("ol.extent"),ol.Overlay=function(e){ol.Object.call(this),this.id_=e.id,this.insertFirst_=void 0===e.insertFirst||e.insertFirst,this.stopEvent_=void 0===e.stopEvent||e.stopEvent,this.element_=document.createElement("DIV"),this.element_.className="ol-overlay-container "+ol.css.CLASS_SELECTABLE,this.element_.style.position="absolute",this.autoPan=void 0!==e.autoPan&&e.autoPan,this.autoPanAnimation_=e.autoPanAnimation||{},this.autoPanMargin_=void 0!==e.autoPanMargin?e.autoPanMargin:20,this.rendered_={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey_=null,ol.events.listen(this,ol.Object.getChangeEventType(ol.Overlay.Property_.ELEMENT),this.handleElementChanged,this),ol.events.listen(this,ol.Object.getChangeEventType(ol.Overlay.Property_.MAP),this.handleMapChanged,this),ol.events.listen(this,ol.Object.getChangeEventType(ol.Overlay.Property_.OFFSET),this.handleOffsetChanged,this),ol.events.listen(this,ol.Object.getChangeEventType(ol.Overlay.Property_.POSITION),this.handlePositionChanged,this),ol.events.listen(this,ol.Object.getChangeEventType(ol.Overlay.Property_.POSITIONING),this.handlePositioningChanged,this),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(void 0!==e.positioning?e.positioning:ol.OverlayPositioning.TOP_LEFT),void 0!==e.position&&this.setPosition(e.position)},ol.inherits(ol.Overlay,ol.Object),ol.Overlay.prototype.getElement=function(){return this.get(ol.Overlay.Property_.ELEMENT)},ol.Overlay.prototype.getId=function(){return this.id_},ol.Overlay.prototype.getMap=function(){return this.get(ol.Overlay.Property_.MAP)},ol.Overlay.prototype.getOffset=function(){return this.get(ol.Overlay.Property_.OFFSET)},ol.Overlay.prototype.getPosition=function(){return this.get(ol.Overlay.Property_.POSITION)},ol.Overlay.prototype.getPositioning=function(){return this.get(ol.Overlay.Property_.POSITIONING)},ol.Overlay.prototype.handleElementChanged=function(){ol.dom.removeChildren(this.element_);var e=this.getElement();e&&this.element_.appendChild(e)},ol.Overlay.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey_&&(ol.dom.removeNode(this.element_),ol.events.unlistenByKey(this.mapPostrenderListenerKey_),this.mapPostrenderListenerKey_=null);var e=this.getMap();if(e){this.mapPostrenderListenerKey_=ol.events.listen(e,ol.MapEventType.POSTRENDER,this.render,this),this.updatePixelPosition();var t=this.stopEvent_?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst_?t.insertBefore(this.element_,t.childNodes[0]||null):t.appendChild(this.element_)}},ol.Overlay.prototype.render=function(){this.updatePixelPosition()},ol.Overlay.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},ol.Overlay.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(ol.Overlay.Property_.POSITION)&&this.autoPan&&this.panIntoView_()},ol.Overlay.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},ol.Overlay.prototype.setElement=function(e){this.set(ol.Overlay.Property_.ELEMENT,e)},ol.Overlay.prototype.setMap=function(e){this.set(ol.Overlay.Property_.MAP,e)},ol.Overlay.prototype.setOffset=function(e){this.set(ol.Overlay.Property_.OFFSET,e)},ol.Overlay.prototype.setPosition=function(e){this.set(ol.Overlay.Property_.POSITION,e)},ol.Overlay.prototype.panIntoView_=function(){var e=this.getMap();if(e&&e.getTargetElement()){var t=this.getRect_(e.getTargetElement(),e.getSize()),o=this.getElement(),r=this.getRect_(o,[ol.dom.outerWidth(o),ol.dom.outerHeight(o)]),i=this.autoPanMargin_;if(!ol.extent.containsExtent(t,r)){var n=r[0]-t[0],a=t[2]-r[2],l=r[1]-t[1],s=t[3]-r[3],p=[0,0];if(n<0?p[0]=n-i:a<0&&(p[0]=Math.abs(a)+i),l<0?p[1]=l-i:s<0&&(p[1]=Math.abs(s)+i),0!==p[0]||0!==p[1]){var g=e.getView().getCenter(),u=e.getPixelFromCoordinate(g),c=[u[0]+p[0],u[1]+p[1]];e.getView().animate({center:e.getCoordinateFromPixel(c),duration:this.autoPanAnimation_.duration,easing:this.autoPanAnimation_.easing})}}}},ol.Overlay.prototype.getRect_=function(e,t){var o=e.getBoundingClientRect(),r=o.left+window.pageXOffset,i=o.top+window.pageYOffset;return[r,i,r+t[0],i+t[1]]},ol.Overlay.prototype.setPositioning=function(e){this.set(ol.Overlay.Property_.POSITIONING,e)},ol.Overlay.prototype.setVisible=function(e){this.rendered_.visible!==e&&(this.element_.style.display=e?"":"none",this.rendered_.visible=e)},ol.Overlay.prototype.updatePixelPosition=function(){var e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t)return void this.setVisible(!1);var o=e.getPixelFromCoordinate(t),r=e.getSize();this.updateRenderedPosition(o,r)},ol.Overlay.prototype.updateRenderedPosition=function(e,t){var o=this.element_.style,r=this.getOffset(),i=this.getPositioning();this.setVisible(!0);var n=r[0],a=r[1];if(i==ol.OverlayPositioning.BOTTOM_RIGHT||i==ol.OverlayPositioning.CENTER_RIGHT||i==ol.OverlayPositioning.TOP_RIGHT){""!==this.rendered_.left_&&(this.rendered_.left_=o.left="");var l=Math.round(t[0]-e[0]-n)+"px";this.rendered_.right_!=l&&(this.rendered_.right_=o.right=l)}else{""!==this.rendered_.right_&&(this.rendered_.right_=o.right=""),i!=ol.OverlayPositioning.BOTTOM_CENTER&&i!=ol.OverlayPositioning.CENTER_CENTER&&i!=ol.OverlayPositioning.TOP_CENTER||(n-=this.element_.offsetWidth/2);var s=Math.round(e[0]+n)+"px";this.rendered_.left_!=s&&(this.rendered_.left_=o.left=s)}if(i==ol.OverlayPositioning.BOTTOM_LEFT||i==ol.OverlayPositioning.BOTTOM_CENTER||i==ol.OverlayPositioning.BOTTOM_RIGHT){""!==this.rendered_.top_&&(this.rendered_.top_=o.top="");var p=Math.round(t[1]-e[1]-a)+"px";this.rendered_.bottom_!=p&&(this.rendered_.bottom_=o.bottom=p)}else{""!==this.rendered_.bottom_&&(this.rendered_.bottom_=o.bottom=""),i!=ol.OverlayPositioning.CENTER_LEFT&&i!=ol.OverlayPositioning.CENTER_CENTER&&i!=ol.OverlayPositioning.CENTER_RIGHT||(a-=this.element_.offsetHeight/2);var g=Math.round(e[1]+a)+"px";this.rendered_.top_!=g&&(this.rendered_.top_=o.top=g)}},ol.Overlay.Property_={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},goog.provide("ol.control.OverviewMap"),goog.require("ol"),goog.require("ol.Collection"),goog.require("ol.Map"),goog.require("ol.MapEventType"),goog.require("ol.MapProperty"),goog.require("ol.Object"),goog.require("ol.ObjectEventType"),goog.require("ol.Overlay"),goog.require("ol.OverlayPositioning"),goog.require("ol.ViewProperty"),goog.require("ol.control.Control"),goog.require("ol.coordinate"),goog.require("ol.css"),goog.require("ol.dom"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.extent"),ol.control.OverviewMap=function(e){var t=e?e:{};this.collapsed_=void 0===t.collapsed||t.collapsed,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);var o=void 0!==t.className?t.className:"ol-overviewmap",r=void 0!==t.tipLabel?t.tipLabel:"Overview map",i=void 0!==t.collapseLabel?t.collapseLabel:"«";"string"==typeof i?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=i):this.collapseLabel_=i;var n=void 0!==t.label?t.label:"»";"string"==typeof n?(this.label_=document.createElement("span"),this.label_.textContent=n):this.label_=n;var a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,l=document.createElement("button");l.setAttribute("type","button"),l.title=r,l.appendChild(a),ol.events.listen(l,ol.events.EventType.CLICK,this.handleClick_,this),this.ovmapDiv_=document.createElement("DIV"),this.ovmapDiv_.className="ol-overviewmap-map",this.ovmap_=new ol.Map({controls:new ol.Collection,interactions:new ol.Collection,view:t.view});var s=this.ovmap_;t.layers&&t.layers.forEach(function(e){s.addLayer(e)},this);var p=document.createElement("DIV");p.className="ol-overviewmap-box",p.style.boxSizing="border-box",this.boxOverlay_=new ol.Overlay({position:[0,0],positioning:ol.OverlayPositioning.BOTTOM_LEFT,element:p}),this.ovmap_.addOverlay(this.boxOverlay_);var g=o+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" ol-collapsed":"")+(this.collapsible_?"":" ol-uncollapsible"),u=document.createElement("div");u.className=g,u.appendChild(this.ovmapDiv_),u.appendChild(l);var c=t.render?t.render:ol.control.OverviewMap.render;ol.control.Control.call(this,{element:u,render:c,target:t.target});var y=this,h=this.boxOverlay_,d=this.boxOverlay_.getElement(),f=function(e){return{clientX:e.clientX-d.offsetWidth/2,clientY:e.clientY+d.offsetHeight/2}},m=function(e){var t=s.getEventCoordinate(f(e));h.setPosition(t)},v=function(e){var t=s.getEventCoordinate(e);y.getMap().getView().setCenter(t),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",v)};d.addEventListener("mousedown",function(){window.addEventListener("mousemove",m),window.addEventListener("mouseup",v)})},ol.inherits(ol.control.OverviewMap,ol.control.Control),ol.control.OverviewMap.prototype.setMap=function(e){var t=this.getMap();if(e!==t){if(t){var o=t.getView();o&&this.unbindView_(o),this.ovmap_.setTarget(null)}if(ol.control.Control.prototype.setMap.call(this,e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(ol.events.listen(e,ol.ObjectEventType.PROPERTYCHANGE,this.handleMapPropertyChange_,this)),0===this.ovmap_.getLayers().getLength()&&this.ovmap_.setLayerGroup(e.getLayerGroup());var r=e.getView();r&&(this.bindView_(r),r.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},ol.control.OverviewMap.prototype.handleMapPropertyChange_=function(e){if(e.key===ol.MapProperty.VIEW){var t=e.oldValue;t&&this.unbindView_(t);var o=this.getMap().getView();this.bindView_(o)}},ol.control.OverviewMap.prototype.bindView_=function(e){ol.events.listen(e,ol.Object.getChangeEventType(ol.ViewProperty.ROTATION),this.handleRotationChanged_,this)},ol.control.OverviewMap.prototype.unbindView_=function(e){ol.events.unlisten(e,ol.Object.getChangeEventType(ol.ViewProperty.ROTATION),this.handleRotationChanged_,this)},ol.control.OverviewMap.prototype.handleRotationChanged_=function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},ol.control.OverviewMap.render=function(e){this.validateExtent_(),this.updateBox_()},ol.control.OverviewMap.prototype.validateExtent_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var o=e.getSize(),r=e.getView(),i=r.calculateExtent(o),n=t.getSize(),a=t.getView(),l=a.calculateExtent(n),s=t.getPixelFromCoordinate(ol.extent.getTopLeft(i)),p=t.getPixelFromCoordinate(ol.extent.getBottomRight(i)),g=Math.abs(s[0]-p[0]),u=Math.abs(s[1]-p[1]),c=n[0],y=n[1];g<c*ol.OVERVIEWMAP_MIN_RATIO||u<y*ol.OVERVIEWMAP_MIN_RATIO||g>c*ol.OVERVIEWMAP_MAX_RATIO||u>y*ol.OVERVIEWMAP_MAX_RATIO?this.resetExtent_():ol.extent.containsExtent(l,i)||this.recenter_()}},ol.control.OverviewMap.prototype.resetExtent_=function(){if(0!==ol.OVERVIEWMAP_MAX_RATIO&&0!==ol.OVERVIEWMAP_MIN_RATIO){var e=this.getMap(),t=this.ovmap_,o=e.getSize(),r=e.getView(),i=r.calculateExtent(o),n=t.getView(),a=Math.log(ol.OVERVIEWMAP_MAX_RATIO/ol.OVERVIEWMAP_MIN_RATIO)/Math.LN2,l=1/(Math.pow(2,a/2)*ol.OVERVIEWMAP_MIN_RATIO);ol.extent.scaleFromCenter(i,l),n.fit(i)}},ol.control.OverviewMap.prototype.recenter_=function(){var e=this.getMap(),t=this.ovmap_,o=e.getView(),r=t.getView();r.setCenter(o.getCenter())},ol.control.OverviewMap.prototype.updateBox_=function(){var e=this.getMap(),t=this.ovmap_;if(e.isRendered()&&t.isRendered()){var o=e.getSize(),r=e.getView(),i=t.getView(),n=r.getRotation(),a=this.boxOverlay_,l=this.boxOverlay_.getElement(),s=r.calculateExtent(o),p=i.getResolution(),g=ol.extent.getBottomLeft(s),u=ol.extent.getTopRight(s),c=this.calculateCoordinateRotate_(n,g);a.setPosition(c),l&&(l.style.width=Math.abs((g[0]-u[0])/p)+"px",l.style.height=Math.abs((u[1]-g[1])/p)+"px")}},ol.control.OverviewMap.prototype.calculateCoordinateRotate_=function(e,t){var o,r=this.getMap(),i=r.getView(),n=i.getCenter();return n&&(o=[t[0]-n[0],t[1]-n[1]],ol.coordinate.rotate(o,e),ol.coordinate.add(o,n)),o},ol.control.OverviewMap.prototype.handleClick_=function(e){e.preventDefault(),this.handleToggle_()},ol.control.OverviewMap.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?ol.dom.replaceNode(this.collapseLabel_,this.label_):ol.dom.replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var e=this.ovmap_;this.collapsed_||e.isRendered()||(e.updateSize(),this.resetExtent_(),ol.events.listenOnce(e,ol.MapEventType.POSTRENDER,function(e){this.updateBox_()},this))},ol.control.OverviewMap.prototype.getCollapsible=function(){return this.collapsible_},ol.control.OverviewMap.prototype.setCollapsible=function(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())},ol.control.OverviewMap.prototype.setCollapsed=function(e){this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()},ol.control.OverviewMap.prototype.getCollapsed=function(){return this.collapsed_},ol.control.OverviewMap.prototype.getOverviewMap=function(){return this.ovmap_},goog.provide("ol.control.ScaleLineUnits"),ol.control.ScaleLineUnits={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"},goog.provide("ol.control.ScaleLine"),goog.require("ol"),goog.require("ol.Object"),goog.require("ol.asserts"),goog.require("ol.control.Control"),goog.require("ol.control.ScaleLineUnits"),goog.require("ol.css"),goog.require("ol.events"),goog.require("ol.proj"),goog.require("ol.proj.Units"),ol.control.ScaleLine=function(e){var t=e?e:{},o=void 0!==t.className?t.className:"ol-scale-line";this.innerElement_=document.createElement("DIV"),this.innerElement_.className=o+"-inner",this.element_=document.createElement("DIV"),this.element_.className=o+" "+ol.css.CLASS_UNSELECTABLE,this.element_.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==t.minWidth?t.minWidth:64,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="";var r=t.render?t.render:ol.control.ScaleLine.render;ol.control.Control.call(this,{element:this.element_,render:r,target:t.target}),ol.events.listen(this,ol.Object.getChangeEventType(ol.control.ScaleLine.Property_.UNITS),this.handleUnitsChanged_,this),this.setUnits(t.units||ol.control.ScaleLineUnits.METRIC)},ol.inherits(ol.control.ScaleLine,ol.control.Control),ol.control.ScaleLine.LEADING_DIGITS=[1,2,5],ol.control.ScaleLine.prototype.getUnits=function(){return this.get(ol.control.ScaleLine.Property_.UNITS)},ol.control.ScaleLine.render=function(e){var t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()},ol.control.ScaleLine.prototype.handleUnitsChanged_=function(){this.updateElement_()},ol.control.ScaleLine.prototype.setUnits=function(e){this.set(ol.control.ScaleLine.Property_.UNITS,e)},ol.control.ScaleLine.prototype.updateElement_=function(){var e=this.viewState_;if(!e)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));var t=e.center,o=e.projection,r=o.getMetersPerUnit(),i=ol.proj.getPointResolution(o,e.resolution,t)*r,n=this.minWidth_*i,a="",l=this.getUnits();if(l==ol.control.ScaleLineUnits.DEGREES){var s=ol.proj.METERS_PER_UNIT[ol.proj.Units.DEGREES];i/=s,n<s/60?(a="″",i*=3600):n<s?(a="′",i*=60):a="°"}else l==ol.control.ScaleLineUnits.IMPERIAL?n<.9144?(a="in",i/=.0254):n<1609.344?(a="ft",i/=.3048):(a="mi",i/=1609.344):l==ol.control.ScaleLineUnits.NAUTICAL?(i/=1852,a="nm"):l==ol.control.ScaleLineUnits.METRIC?n<.001?(a="μm",i*=1e6):n<1?(a="mm",i*=1e3):n<1e3?a="m":(a="km",i/=1e3):l==ol.control.ScaleLineUnits.US?n<.9144?(a="in",i*=39.37):n<1609.344?(a="ft",i/=.30480061):(a="mi",i/=1609.3472):ol.asserts.assert(!1,33);for(var p,g,u=3*Math.floor(Math.log(this.minWidth_*i)/Math.log(10));;){if(p=ol.control.ScaleLine.LEADING_DIGITS[(u%3+3)%3]*Math.pow(10,Math.floor(u/3)),g=Math.round(p/i),isNaN(g))return this.element_.style.display="none",void(this.renderedVisible_=!1);if(g>=this.minWidth_)break;++u}var c=p+" "+a;this.renderedHTML_!=c&&(this.innerElement_.innerHTML=c,this.renderedHTML_=c),this.renderedWidth_!=g&&(this.innerElement_.style.width=g+"px",this.renderedWidth_=g),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0)},ol.control.ScaleLine.Property_={UNITS:"units"},goog.provide("ol.control.ZoomSlider"),goog.require("ol"),goog.require("ol.ViewHint"),goog.require("ol.control.Control"),goog.require("ol.css"),goog.require("ol.easing"),goog.require("ol.events"),goog.require("ol.events.Event"),goog.require("ol.events.EventType"),goog.require("ol.math"),goog.require("ol.pointer.EventType"),goog.require("ol.pointer.PointerEventHandler"),ol.control.ZoomSlider=function(e){var t=e?e:{};this.currentResolution_=void 0,this.direction_=ol.control.ZoomSlider.Direction_.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.previousX_,this.previousY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==t.duration?t.duration:200;var o=void 0!==t.className?t.className:"ol-zoomslider",r=document.createElement("button");r.setAttribute("type","button"),r.className=o+"-thumb "+ol.css.CLASS_UNSELECTABLE;var i=document.createElement("div");i.className=o+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL,i.appendChild(r),this.dragger_=new ol.pointer.PointerEventHandler(i),ol.events.listen(this.dragger_,ol.pointer.EventType.POINTERDOWN,this.handleDraggerStart_,this),ol.events.listen(this.dragger_,ol.pointer.EventType.POINTERMOVE,this.handleDraggerDrag_,this),ol.events.listen(this.dragger_,ol.pointer.EventType.POINTERUP,this.handleDraggerEnd_,this),ol.events.listen(i,ol.events.EventType.CLICK,this.handleContainerClick_,this),ol.events.listen(r,ol.events.EventType.CLICK,ol.events.Event.stopPropagation);var n=t.render?t.render:ol.control.ZoomSlider.render;ol.control.Control.call(this,{element:i,render:n})},ol.inherits(ol.control.ZoomSlider,ol.control.Control),ol.control.ZoomSlider.prototype.disposeInternal=function(){this.dragger_.dispose(),ol.control.Control.prototype.disposeInternal.call(this)},ol.control.ZoomSlider.Direction_={VERTICAL:0,HORIZONTAL:1};ol.control.ZoomSlider.prototype.setMap=function(e){ol.control.Control.prototype.setMap.call(this,e),e&&e.render()};ol.control.ZoomSlider.prototype.initSlider_=function(){var e=this.element,t={width:e.offsetWidth,height:e.offsetHeight},o=e.firstElementChild,r=getComputedStyle(o),i=o.offsetWidth+parseFloat(r.marginRight)+parseFloat(r.marginLeft),n=o.offsetHeight+parseFloat(r.marginTop)+parseFloat(r.marginBottom);this.thumbSize_=[i,n],t.width>t.height?(this.direction_=ol.control.ZoomSlider.Direction_.HORIZONTAL,this.widthLimit_=t.width-i):(this.direction_=ol.control.ZoomSlider.Direction_.VERTICAL,this.heightLimit_=t.height-n),this.sliderInitialized_=!0},ol.control.ZoomSlider.render=function(e){if(e.frameState){this.sliderInitialized_||this.initSlider_();var t=e.frameState.viewState.resolution;t!==this.currentResolution_&&(this.currentResolution_=t,this.setThumbPosition_(t))}},ol.control.ZoomSlider.prototype.handleContainerClick_=function(e){var t=this.getMap().getView(),o=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2),r=this.getResolutionForPosition_(o);t.animate({resolution:t.constrainResolution(r),duration:this.duration_,easing:ol.easing.easeOut})},ol.control.ZoomSlider.prototype.handleDraggerStart_=function(e){this.dragging_||e.originalEvent.target!==this.element.firstElementChild||(this.getMap().getView().setHint(ol.ViewHint.INTERACTING,1),this.previousX_=e.clientX,this.previousY_=e.clientY,this.dragging_=!0)},ol.control.ZoomSlider.prototype.handleDraggerDrag_=function(e){if(this.dragging_){var t=this.element.firstElementChild,o=e.clientX-this.previousX_+parseInt(t.style.left,10),r=e.clientY-this.previousY_+parseInt(t.style.top,10),i=this.getRelativePosition_(o,r);this.currentResolution_=this.getResolutionForPosition_(i),this.getMap().getView().setResolution(this.currentResolution_),this.setThumbPosition_(this.currentResolution_),this.previousX_=e.clientX,this.previousY_=e.clientY}},ol.control.ZoomSlider.prototype.handleDraggerEnd_=function(e){if(this.dragging_){var t=this.getMap().getView();t.setHint(ol.ViewHint.INTERACTING,-1),t.animate({resolution:t.constrainResolution(this.currentResolution_),duration:this.duration_,easing:ol.easing.easeOut}),this.dragging_=!1,this.previousX_=void 0,this.previousY_=void 0}},ol.control.ZoomSlider.prototype.setThumbPosition_=function(e){var t=this.getPositionForResolution_(e),o=this.element.firstElementChild;this.direction_==ol.control.ZoomSlider.Direction_.HORIZONTAL?o.style.left=this.widthLimit_*t+"px":o.style.top=this.heightLimit_*t+"px"},ol.control.ZoomSlider.prototype.getRelativePosition_=function(e,t){var o;return o=this.direction_===ol.control.ZoomSlider.Direction_.HORIZONTAL?e/this.widthLimit_:t/this.heightLimit_,ol.math.clamp(o,0,1)},ol.control.ZoomSlider.prototype.getResolutionForPosition_=function(e){var t=this.getMap().getView().getResolutionForValueFunction();return t(1-e)},ol.control.ZoomSlider.prototype.getPositionForResolution_=function(e){var t=this.getMap().getView().getValueForResolutionFunction();return 1-t(e)},goog.provide("ol.control.ZoomToExtent"),goog.require("ol"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.control.Control"),goog.require("ol.css"),ol.control.ZoomToExtent=function(e){var t=e?e:{};this.extent_=t.extent?t.extent:null;var o=void 0!==t.className?t.className:"ol-zoom-extent",r=void 0!==t.label?t.label:"E",i=void 0!==t.tipLabel?t.tipLabel:"Fit to extent",n=document.createElement("button");n.setAttribute("type","button"),n.title=i,n.appendChild("string"==typeof r?document.createTextNode(r):r),ol.events.listen(n,ol.events.EventType.CLICK,this.handleClick_,this);var a=o+" "+ol.css.CLASS_UNSELECTABLE+" "+ol.css.CLASS_CONTROL,l=document.createElement("div");l.className=a,l.appendChild(n),ol.control.Control.call(this,{element:l,target:t.target})},ol.inherits(ol.control.ZoomToExtent,ol.control.Control),ol.control.ZoomToExtent.prototype.handleClick_=function(e){e.preventDefault(),this.handleZoomToExtent_()},ol.control.ZoomToExtent.prototype.handleZoomToExtent_=function(){var e=this.getMap(),t=e.getView(),o=this.extent_?this.extent_:t.getProjection().getExtent();t.fit(o)},goog.provide("ol.DeviceOrientation"),goog.require("ol.events"),goog.require("ol"),goog.require("ol.Object"),goog.require("ol.has"),goog.require("ol.math"),ol.DeviceOrientation=function(e){ol.Object.call(this);var t=e?e:{};this.listenerKey_=null,ol.events.listen(this,ol.Object.getChangeEventType(ol.DeviceOrientation.Property_.TRACKING),this.handleTrackingChanged_,this),this.setTracking(void 0!==t.tracking&&t.tracking)},ol.inherits(ol.DeviceOrientation,ol.Object),ol.DeviceOrientation.prototype.disposeInternal=function(){this.setTracking(!1),ol.Object.prototype.disposeInternal.call(this)},ol.DeviceOrientation.prototype.orientationChange_=function(e){var t=e;if(null!==t.alpha){var o=ol.math.toRadians(t.alpha);if(this.set(ol.DeviceOrientation.Property_.ALPHA,o),"boolean"==typeof t.absolute&&t.absolute)this.set(ol.DeviceOrientation.Property_.HEADING,o);else if("number"==typeof t.webkitCompassHeading&&t.webkitCompassAccuracy!=-1){var r=ol.math.toRadians(t.webkitCompassHeading);this.set(ol.DeviceOrientation.Property_.HEADING,r)}}null!==t.beta&&this.set(ol.DeviceOrientation.Property_.BETA,ol.math.toRadians(t.beta)),null!==t.gamma&&this.set(ol.DeviceOrientation.Property_.GAMMA,ol.math.toRadians(t.gamma)),this.changed()},ol.DeviceOrientation.prototype.getAlpha=function(){return this.get(ol.DeviceOrientation.Property_.ALPHA)},ol.DeviceOrientation.prototype.getBeta=function(){return this.get(ol.DeviceOrientation.Property_.BETA)},ol.DeviceOrientation.prototype.getGamma=function(){return this.get(ol.DeviceOrientation.Property_.GAMMA)},ol.DeviceOrientation.prototype.getHeading=function(){return this.get(ol.DeviceOrientation.Property_.HEADING)},ol.DeviceOrientation.prototype.getTracking=function(){return this.get(ol.DeviceOrientation.Property_.TRACKING)},ol.DeviceOrientation.prototype.handleTrackingChanged_=function(){if(ol.has.DEVICE_ORIENTATION){var e=this.getTracking();e&&!this.listenerKey_?this.listenerKey_=ol.events.listen(window,"deviceorientation",this.orientationChange_,this):e||null===this.listenerKey_||(ol.events.unlistenByKey(this.listenerKey_),this.listenerKey_=null)}},ol.DeviceOrientation.prototype.setTracking=function(e){this.set(ol.DeviceOrientation.Property_.TRACKING,e)},ol.DeviceOrientation.Property_={ALPHA:"alpha",BETA:"beta",GAMMA:"gamma",HEADING:"heading",TRACKING:"tracking"},goog.provide("ol.ImageState"),ol.ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3},goog.provide("ol.style.Image"),ol.style.Image=function(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.snapToPixel_=e.snapToPixel},ol.style.Image.prototype.getOpacity=function(){return this.opacity_},ol.style.Image.prototype.getRotateWithView=function(){return this.rotateWithView_},ol.style.Image.prototype.getRotation=function(){return this.rotation_},ol.style.Image.prototype.getScale=function(){return this.scale_},ol.style.Image.prototype.getSnapToPixel=function(){return this.snapToPixel_},ol.style.Image.prototype.getAnchor=function(){},ol.style.Image.prototype.getImage=function(e){},ol.style.Image.prototype.getHitDetectionImage=function(e){},ol.style.Image.prototype.getImageState=function(){},ol.style.Image.prototype.getImageSize=function(){},ol.style.Image.prototype.getHitDetectionImageSize=function(){},ol.style.Image.prototype.getOrigin=function(){},ol.style.Image.prototype.getSize=function(){},ol.style.Image.prototype.setOpacity=function(e){this.opacity_=e},ol.style.Image.prototype.setRotateWithView=function(e){this.rotateWithView_=e},ol.style.Image.prototype.setRotation=function(e){this.rotation_=e},ol.style.Image.prototype.setScale=function(e){this.scale_=e},ol.style.Image.prototype.setSnapToPixel=function(e){this.snapToPixel_=e},ol.style.Image.prototype.listenImageChange=function(e,t){},ol.style.Image.prototype.load=function(){},ol.style.Image.prototype.unlistenImageChange=function(e,t){},goog.provide("ol.style.RegularShape"),goog.require("ol"),goog.require("ol.colorlike"),goog.require("ol.dom"),goog.require("ol.has"),goog.require("ol.ImageState"),goog.require("ol.render.canvas"),goog.require("ol.style.Image"),ol.style.RegularShape=function(e){this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=e.atlasManager,this.render_(this.atlasManager_);var t=void 0===e.snapToPixel||e.snapToPixel,o=void 0!==e.rotateWithView&&e.rotateWithView;ol.style.Image.call(this,{opacity:1,rotateWithView:o,rotation:void 0!==e.rotation?e.rotation:0,scale:1,snapToPixel:t})},ol.inherits(ol.style.RegularShape,ol.style.Image),
ol.style.RegularShape.prototype.clone=function(){var e=new ol.style.RegularShape({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),snapToPixel:this.getSnapToPixel(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return e.setOpacity(this.getOpacity()),e.setScale(this.getScale()),e},ol.style.RegularShape.prototype.getAnchor=function(){return this.anchor_},ol.style.RegularShape.prototype.getAngle=function(){return this.angle_},ol.style.RegularShape.prototype.getFill=function(){return this.fill_},ol.style.RegularShape.prototype.getHitDetectionImage=function(e){return this.hitDetectionCanvas_},ol.style.RegularShape.prototype.getImage=function(e){return this.canvas_},ol.style.RegularShape.prototype.getImageSize=function(){return this.imageSize_},ol.style.RegularShape.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},ol.style.RegularShape.prototype.getImageState=function(){return ol.ImageState.LOADED},ol.style.RegularShape.prototype.getOrigin=function(){return this.origin_},ol.style.RegularShape.prototype.getPoints=function(){return this.points_},ol.style.RegularShape.prototype.getRadius=function(){return this.radius_},ol.style.RegularShape.prototype.getRadius2=function(){return this.radius2_},ol.style.RegularShape.prototype.getSize=function(){return this.size_},ol.style.RegularShape.prototype.getStroke=function(){return this.stroke_},ol.style.RegularShape.prototype.listenImageChange=function(e,t){},ol.style.RegularShape.prototype.load=function(){},ol.style.RegularShape.prototype.unlistenImageChange=function(e,t){},ol.style.RegularShape.prototype.render_=function(e){var t,o,r="",i="",n=0,a=null,l=0;this.stroke_&&(o=this.stroke_.getColor(),null===o&&(o=ol.render.canvas.defaultStrokeStyle),o=ol.colorlike.asColorLike(o),l=this.stroke_.getWidth(),void 0===l&&(l=ol.render.canvas.defaultLineWidth),a=this.stroke_.getLineDash(),ol.has.CANVAS_LINE_DASH||(a=null),i=this.stroke_.getLineJoin(),void 0===i&&(i=ol.render.canvas.defaultLineJoin),r=this.stroke_.getLineCap(),void 0===r&&(r=ol.render.canvas.defaultLineCap),n=this.stroke_.getMiterLimit(),void 0===n&&(n=ol.render.canvas.defaultMiterLimit));var s=2*(this.radius_+l)+1,p={strokeStyle:o,strokeWidth:l,size:s,lineCap:r,lineDash:a,lineJoin:i,miterLimit:n};if(void 0===e){var g=ol.dom.createCanvasContext2D(s,s);this.canvas_=g.canvas,s=this.canvas_.width,t=s,this.draw_(p,g,0,0),this.createHitDetectionCanvas_(p)}else{s=Math.round(s);var u,c=!this.fill_;c&&(u=this.drawHitDetectionCanvas_.bind(this,p));var y=this.getChecksum(),h=e.add(y,s,s,this.draw_.bind(this,p),u);this.canvas_=h.image,this.origin_=[h.offsetX,h.offsetY],t=h.image.width,c?(this.hitDetectionCanvas_=h.hitImage,this.hitDetectionImageSize_=[h.hitImage.width,h.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[t,t])}this.anchor_=[s/2,s/2],this.size_=[s,s],this.imageSize_=[t,t]},ol.style.RegularShape.prototype.draw_=function(e,t,o,r){var i,n,a;t.setTransform(1,0,0,1,0,0),t.translate(o,r),t.beginPath();var l=this.points_;if(l===1/0)t.arc(e.size/2,e.size/2,this.radius_,0,2*Math.PI,!0);else{var s=void 0!==this.radius2_?this.radius2_:this.radius_;for(s!==this.radius_&&(l=2*l),i=0;i<=l;i++)n=2*i*Math.PI/l-Math.PI/2+this.angle_,a=i%2===0?this.radius_:s,t.lineTo(e.size/2+a*Math.cos(n),e.size/2+a*Math.sin(n))}if(this.fill_){var p=this.fill_.getColor();null===p&&(p=ol.render.canvas.defaultFillStyle),t.fillStyle=ol.colorlike.asColorLike(p),t.fill()}this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&t.setLineDash(e.lineDash),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke()),t.closePath()},ol.style.RegularShape.prototype.createHitDetectionCanvas_=function(e){if(this.hitDetectionImageSize_=[e.size,e.size],this.fill_)return void(this.hitDetectionCanvas_=this.canvas_);var t=ol.dom.createCanvasContext2D(e.size,e.size);this.hitDetectionCanvas_=t.canvas,this.drawHitDetectionCanvas_(e,t,0,0)},ol.style.RegularShape.prototype.drawHitDetectionCanvas_=function(e,t,o,r){t.setTransform(1,0,0,1,0,0),t.translate(o,r),t.beginPath();var i=this.points_;if(i===1/0)t.arc(e.size/2,e.size/2,this.radius_,0,2*Math.PI,!0);else{var n=void 0!==this.radius2_?this.radius2_:this.radius_;n!==this.radius_&&(i=2*i);var a,l,s;for(a=0;a<=i;a++)s=2*a*Math.PI/i-Math.PI/2+this.angle_,l=a%2===0?this.radius_:n,t.lineTo(e.size/2+l*Math.cos(s),e.size/2+l*Math.sin(s))}t.fillStyle=ol.render.canvas.defaultFillStyle,t.fill(),this.stroke_&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&t.setLineDash(e.lineDash),t.stroke()),t.closePath()},ol.style.RegularShape.prototype.getChecksum=function(){var e=this.stroke_?this.stroke_.getChecksum():"-",t=this.fill_?this.fill_.getChecksum():"-",o=!this.checksums_||e!=this.checksums_[1]||t!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6];if(o){var r="r"+e+t+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[r,e,t,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]},goog.provide("ol.style.Circle"),goog.require("ol"),goog.require("ol.style.RegularShape"),ol.style.Circle=function(e){var t=e||{};ol.style.RegularShape.call(this,{points:1/0,fill:t.fill,radius:t.radius,snapToPixel:t.snapToPixel,stroke:t.stroke,atlasManager:t.atlasManager})},ol.inherits(ol.style.Circle,ol.style.RegularShape),ol.style.Circle.prototype.clone=function(){var e=new ol.style.Circle({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),snapToPixel:this.getSnapToPixel(),atlasManager:this.atlasManager_});return e.setOpacity(this.getOpacity()),e.setScale(this.getScale()),e},ol.style.Circle.prototype.setRadius=function(e){this.radius_=e,this.render_(this.atlasManager_)},goog.provide("ol.style.Fill"),goog.require("ol"),goog.require("ol.color"),ol.style.Fill=function(e){var t=e||{};this.color_=void 0!==t.color?t.color:null,this.checksum_=void 0},ol.style.Fill.prototype.clone=function(){var e=this.getColor();return new ol.style.Fill({color:e&&e.slice?e.slice():e||void 0})},ol.style.Fill.prototype.getColor=function(){return this.color_},ol.style.Fill.prototype.setColor=function(e){this.color_=e,this.checksum_=void 0},ol.style.Fill.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.color_ instanceof CanvasPattern||this.color_ instanceof CanvasGradient?this.checksum_=ol.getUid(this.color_).toString():this.checksum_="f"+(this.color_?ol.color.asString(this.color_):"-")),this.checksum_},goog.provide("ol.style.Style"),goog.require("ol.asserts"),goog.require("ol.geom.GeometryType"),goog.require("ol.style.Circle"),goog.require("ol.style.Fill"),goog.require("ol.style.Stroke"),ol.style.Style=function(e){var t=e||{};this.geometry_=null,this.geometryFunction_=ol.style.Style.defaultGeometryFunction,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex},ol.style.Style.prototype.clone=function(){var e=this.getGeometry();return e&&e.clone&&(e=e.clone()),new ol.style.Style({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},ol.style.Style.prototype.getGeometry=function(){return this.geometry_},ol.style.Style.prototype.getGeometryFunction=function(){return this.geometryFunction_},ol.style.Style.prototype.getFill=function(){return this.fill_},ol.style.Style.prototype.setFill=function(e){this.fill_=e},ol.style.Style.prototype.getImage=function(){return this.image_},ol.style.Style.prototype.setImage=function(e){this.image_=e},ol.style.Style.prototype.getStroke=function(){return this.stroke_},ol.style.Style.prototype.setStroke=function(e){this.stroke_=e},ol.style.Style.prototype.getText=function(){return this.text_},ol.style.Style.prototype.setText=function(e){this.text_=e},ol.style.Style.prototype.getZIndex=function(){return this.zIndex_},ol.style.Style.prototype.setGeometry=function(e){"function"==typeof e?this.geometryFunction_=e:"string"==typeof e?this.geometryFunction_=function(t){return t.get(e)}:e?void 0!==e&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=ol.style.Style.defaultGeometryFunction,this.geometry_=e},ol.style.Style.prototype.setZIndex=function(e){this.zIndex_=e},ol.style.Style.createFunction=function(e){var t;if("function"==typeof e)t=e;else{var o;Array.isArray(e)?o=e:(ol.asserts.assert(e instanceof ol.style.Style,41),o=[e]),t=function(){return o}}return t},ol.style.Style.default_=null,ol.style.Style.defaultFunction=function(e,t){if(!ol.style.Style.default_){var o=new ol.style.Fill({color:"rgba(255,255,255,0.4)"}),r=new ol.style.Stroke({color:"#3399CC",width:1.25});ol.style.Style.default_=[new ol.style.Style({image:new ol.style.Circle({fill:o,stroke:r,radius:5}),fill:o,stroke:r})]}return ol.style.Style.default_},ol.style.Style.createDefaultEditing=function(){var e={},t=[255,255,255,1],o=[0,153,255,1],r=3;return e[ol.geom.GeometryType.POLYGON]=[new ol.style.Style({fill:new ol.style.Fill({color:[255,255,255,.5]})})],e[ol.geom.GeometryType.MULTI_POLYGON]=e[ol.geom.GeometryType.POLYGON],e[ol.geom.GeometryType.LINE_STRING]=[new ol.style.Style({stroke:new ol.style.Stroke({color:t,width:r+2})}),new ol.style.Style({stroke:new ol.style.Stroke({color:o,width:r})})],e[ol.geom.GeometryType.MULTI_LINE_STRING]=e[ol.geom.GeometryType.LINE_STRING],e[ol.geom.GeometryType.CIRCLE]=e[ol.geom.GeometryType.POLYGON].concat(e[ol.geom.GeometryType.LINE_STRING]),e[ol.geom.GeometryType.POINT]=[new ol.style.Style({image:new ol.style.Circle({radius:2*r,fill:new ol.style.Fill({color:o}),stroke:new ol.style.Stroke({color:t,width:r/2})}),zIndex:1/0})],e[ol.geom.GeometryType.MULTI_POINT]=e[ol.geom.GeometryType.POINT],e[ol.geom.GeometryType.GEOMETRY_COLLECTION]=e[ol.geom.GeometryType.POLYGON].concat(e[ol.geom.GeometryType.LINE_STRING],e[ol.geom.GeometryType.POINT]),e},ol.style.Style.defaultGeometryFunction=function(e){return e.getGeometry()},goog.provide("ol.Feature"),goog.require("ol.asserts"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol"),goog.require("ol.Object"),goog.require("ol.geom.Geometry"),goog.require("ol.style.Style"),ol.Feature=function(e){if(ol.Object.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,ol.events.listen(this,ol.Object.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),void 0!==e)if(e instanceof ol.geom.Geometry||!e){var t=e;this.setGeometry(t)}else{var o=e;this.setProperties(o)}},ol.inherits(ol.Feature,ol.Object),ol.Feature.prototype.clone=function(){var e=new ol.Feature(this.getProperties());e.setGeometryName(this.getGeometryName());var t=this.getGeometry();t&&e.setGeometry(t.clone());var o=this.getStyle();return o&&e.setStyle(o),e},ol.Feature.prototype.getGeometry=function(){return this.get(this.geometryName_)},ol.Feature.prototype.getId=function(){return this.id_},ol.Feature.prototype.getGeometryName=function(){return this.geometryName_},ol.Feature.prototype.getStyle=function(){return this.style_},ol.Feature.prototype.getStyleFunction=function(){return this.styleFunction_},ol.Feature.prototype.handleGeometryChange_=function(){this.changed()},ol.Feature.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(ol.events.unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);var e=this.getGeometry();e&&(this.geometryChangeKey_=ol.events.listen(e,ol.events.EventType.CHANGE,this.handleGeometryChange_,this)),this.changed()},ol.Feature.prototype.setGeometry=function(e){this.set(this.geometryName_,e)},ol.Feature.prototype.setStyle=function(e){this.style_=e,this.styleFunction_=e?ol.Feature.createStyleFunction(e):void 0,this.changed()},ol.Feature.prototype.setId=function(e){this.id_=e,this.changed()},ol.Feature.prototype.setGeometryName=function(e){ol.events.unlisten(this,ol.Object.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=e,ol.events.listen(this,ol.Object.getChangeEventType(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},ol.Feature.createStyleFunction=function(e){var t;if("function"==typeof e)t=2==e.length?function(t){return e(this,t)}:e;else{var o;Array.isArray(e)?o=e:(ol.asserts.assert(e instanceof ol.style.Style,41),o=[e]),t=function(){return o}}return t},goog.provide("ol.format.FormatType"),ol.format.FormatType={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"},goog.provide("ol.xml"),goog.require("ol.array"),ol.xml.DOCUMENT=document.implementation.createDocument("","",null),ol.xml.createElementNS=function(e,t){return ol.xml.DOCUMENT.createElementNS(e,t)},ol.xml.getAllTextContent=function(e,t){return ol.xml.getAllTextContent_(e,t,[]).join("")},ol.xml.getAllTextContent_=function(e,t,o){if(e.nodeType==Node.CDATA_SECTION_NODE||e.nodeType==Node.TEXT_NODE)t?o.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):o.push(e.nodeValue);else{var r;for(r=e.firstChild;r;r=r.nextSibling)ol.xml.getAllTextContent_(r,t,o)}return o},ol.xml.isDocument=function(e){return e instanceof Document},ol.xml.isNode=function(e){return e instanceof Node},ol.xml.getAttributeNS=function(e,t,o){return e.getAttributeNS(t,o)||""},ol.xml.setAttributeNS=function(e,t,o,r){e.setAttributeNS(t,o,r)},ol.xml.parse=function(e){return(new DOMParser).parseFromString(e,"application/xml")},ol.xml.makeArrayExtender=function(e,t){return function(o,r){var i=e.call(t,o,r);if(void 0!==i){var n=r[r.length-1];ol.array.extend(n,i)}}},ol.xml.makeArrayPusher=function(e,t){return function(o,r){var i=e.call(void 0!==t?t:this,o,r);if(void 0!==i){var n=r[r.length-1];n.push(i)}}},ol.xml.makeReplacer=function(e,t){return function(o,r){var i=e.call(void 0!==t?t:this,o,r);void 0!==i&&(r[r.length-1]=i)}},ol.xml.makeObjectPropertyPusher=function(e,t,o){return function(r,i){var n=e.call(void 0!==o?o:this,r,i);if(void 0!==n){var a,l=i[i.length-1],s=void 0!==t?t:r.localName;a=s in l?l[s]:l[s]=[],a.push(n)}}},ol.xml.makeObjectPropertySetter=function(e,t,o){return function(r,i){var n=e.call(void 0!==o?o:this,r,i);if(void 0!==n){var a=i[i.length-1],l=void 0!==t?t:r.localName;a[l]=n}}},ol.xml.makeChildAppender=function(e,t){return function(o,r,i){e.call(void 0!==t?t:this,o,r,i);var n=i[i.length-1],a=n.node;a.appendChild(o)}},ol.xml.makeArraySerializer=function(e,t){var o,r;return function(t,i,n){if(void 0===o){o={};var a={};a[t.localName]=e,o[t.namespaceURI]=a,r=ol.xml.makeSimpleNodeFactory(t.localName)}ol.xml.serialize(o,r,i,n)}},ol.xml.makeSimpleNodeFactory=function(e,t){var o=e;return function(e,r,i){var n=r[r.length-1],a=n.node,l=o;void 0===l&&(l=i);var s=t;return void 0===t&&(s=a.namespaceURI),ol.xml.createElementNS(s,l)}},ol.xml.OBJECT_PROPERTY_NODE_FACTORY=ol.xml.makeSimpleNodeFactory(),ol.xml.makeSequence=function(e,t){for(var o=t.length,r=new Array(o),i=0;i<o;++i)r[i]=e[t[i]];return r},ol.xml.makeStructureNS=function(e,t,o){var r,i,n=void 0!==o?o:{};for(r=0,i=e.length;r<i;++r)n[e[r]]=t;return n},ol.xml.parseNode=function(e,t,o,r){var i;for(i=t.firstElementChild;i;i=i.nextElementSibling){var n=e[i.namespaceURI];if(void 0!==n){var a=n[i.localName];void 0!==a&&a.call(r,i,o)}}},ol.xml.pushParseAndPop=function(e,t,o,r,i){return r.push(e),ol.xml.parseNode(t,o,r,i),r.pop()},ol.xml.serialize=function(e,t,o,r,i,n){for(var a,l,s=(void 0!==i?i:o).length,p=0;p<s;++p)a=o[p],void 0!==a&&(l=t.call(n,a,r,void 0!==i?i[p]:void 0),void 0!==l&&e[l.namespaceURI][l.localName].call(n,l,a,r))},ol.xml.pushSerializeAndPop=function(e,t,o,r,i,n,a){return i.push(e),ol.xml.serialize(t,o,r,i,n,a),i.pop()},goog.provide("ol.featureloader"),goog.require("ol"),goog.require("ol.format.FormatType"),goog.require("ol.xml"),ol.featureloader.loadFeaturesXhr=function(e,t,o,r){return function(i,n,a){var l=new XMLHttpRequest;l.open("GET","function"==typeof e?e(i,n,a):e,!0),t.getType()==ol.format.FormatType.ARRAY_BUFFER&&(l.responseType="arraybuffer"),l.onload=function(e){if(!l.status||l.status>=200&&l.status<300){var i,n=t.getType();n==ol.format.FormatType.JSON||n==ol.format.FormatType.TEXT?i=l.responseText:n==ol.format.FormatType.XML?(i=l.responseXML,i||(i=ol.xml.parse(l.responseText))):n==ol.format.FormatType.ARRAY_BUFFER&&(i=l.response),i?o.call(this,t.readFeatures(i,{featureProjection:a}),t.readProjection(i)):r.call(this)}else r.call(this)}.bind(this),l.onerror=function(){r.call(this)}.bind(this),l.send()}},ol.featureloader.xhr=function(e,t){return ol.featureloader.loadFeaturesXhr(e,t,function(e,t){this.addFeatures(e)},ol.nullFunction)},goog.provide("ol.format.Feature"),goog.require("ol.geom.Geometry"),goog.require("ol.obj"),goog.require("ol.proj"),ol.format.Feature=function(){this.defaultDataProjection=null,this.defaultFeatureProjection=null},ol.format.Feature.prototype.getReadOptions=function(e,t){var o;return t&&(o={dataProjection:t.dataProjection?t.dataProjection:this.readProjection(e),featureProjection:t.featureProjection}),this.adaptOptions(o)};ol.format.Feature.prototype.adaptOptions=function(e){return ol.obj.assign({dataProjection:this.defaultDataProjection,featureProjection:this.defaultFeatureProjection},e)};ol.format.Feature.prototype.getType=function(){},ol.format.Feature.prototype.readFeature=function(e,t){},ol.format.Feature.prototype.readFeatures=function(e,t){},ol.format.Feature.prototype.readGeometry=function(e,t){},ol.format.Feature.prototype.readProjection=function(e){},ol.format.Feature.prototype.writeFeature=function(e,t){},ol.format.Feature.prototype.writeFeatures=function(e,t){},ol.format.Feature.prototype.writeGeometry=function(e,t){},ol.format.Feature.transformWithOptions=function(e,t,o){var r,i=o?ol.proj.get(o.featureProjection):null,n=o?ol.proj.get(o.dataProjection):null;if(r=i&&n&&!ol.proj.equivalent(i,n)?e instanceof ol.geom.Geometry?(t?e.clone():e).transform(t?i:n,t?n:i):ol.proj.transformExtent(e,n,i):e,t&&o&&void 0!==o.decimals){var a=Math.pow(10,o.decimals),l=function(e){for(var t=0,o=e.length;t<o;++t)e[t]=Math.round(e[t]*a)/a;return e};r===e&&(r=r.clone()),r.applyTransform(l)}return r},goog.provide("ol.format.JSONFeature"),goog.require("ol"),goog.require("ol.format.Feature"),goog.require("ol.format.FormatType"),ol.format.JSONFeature=function(){ol.format.Feature.call(this)},ol.inherits(ol.format.JSONFeature,ol.format.Feature),ol.format.JSONFeature.prototype.getObject_=function(e){if("string"==typeof e){var t=JSON.parse(e);return t?t:null}return null!==e?e:null},ol.format.JSONFeature.prototype.getType=function(){return ol.format.FormatType.JSON},ol.format.JSONFeature.prototype.readFeature=function(e,t){return this.readFeatureFromObject(this.getObject_(e),this.getReadOptions(e,t))},ol.format.JSONFeature.prototype.readFeatures=function(e,t){return this.readFeaturesFromObject(this.getObject_(e),this.getReadOptions(e,t))},ol.format.JSONFeature.prototype.readFeatureFromObject=function(e,t){},ol.format.JSONFeature.prototype.readFeaturesFromObject=function(e,t){},ol.format.JSONFeature.prototype.readGeometry=function(e,t){return this.readGeometryFromObject(this.getObject_(e),this.getReadOptions(e,t))},ol.format.JSONFeature.prototype.readGeometryFromObject=function(e,t){},ol.format.JSONFeature.prototype.readProjection=function(e){return this.readProjectionFromObject(this.getObject_(e))},ol.format.JSONFeature.prototype.readProjectionFromObject=function(e){},ol.format.JSONFeature.prototype.writeFeature=function(e,t){return JSON.stringify(this.writeFeatureObject(e,t))},ol.format.JSONFeature.prototype.writeFeatureObject=function(e,t){},ol.format.JSONFeature.prototype.writeFeatures=function(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))},ol.format.JSONFeature.prototype.writeFeaturesObject=function(e,t){},ol.format.JSONFeature.prototype.writeGeometry=function(e,t){return JSON.stringify(this.writeGeometryObject(e,t))},ol.format.JSONFeature.prototype.writeGeometryObject=function(e,t){},goog.provide("ol.geom.flat.interpolate"),goog.require("ol.array"),goog.require("ol.math"),ol.geom.flat.interpolate.lineString=function(e,t,o,r,i,n){var a=NaN,l=NaN,s=(o-t)/r;if(1===s)a=e[t],l=e[t+1];else if(2==s)a=(1-i)*e[t]+i*e[t+r],l=(1-i)*e[t+1]+i*e[t+r+1];else if(0!==s){var p,g=e[t],u=e[t+1],c=0,y=[0];for(p=t+r;p<o;p+=r){var h=e[p],d=e[p+1];c+=Math.sqrt((h-g)*(h-g)+(d-u)*(d-u)),y.push(c),g=h,u=d}var f=i*c,m=ol.array.binarySearch(y,f);if(m<0){var v=(f-y[-m-2])/(y[-m-1]-y[-m-2]),_=t+(-m-2)*r;a=ol.math.lerp(e[_],e[_+r],v),l=ol.math.lerp(e[_+1],e[_+r+1],v)}else a=e[t+m*r],l=e[t+m*r+1]}return n?(n[0]=a,n[1]=l,n):[a,l]},ol.geom.flat.interpolate.lineStringCoordinateAtM=function(e,t,o,r,i,n){if(o==t)return null;var a;if(i<e[t+r-1])return n?(a=e.slice(t,t+r),a[r-1]=i,a):null;if(e[o-1]<i)return n?(a=e.slice(o-r,o),a[r-1]=i,a):null;if(i==e[t+r-1])return e.slice(t,t+r);for(var l=t/r,s=o/r;l<s;){var p=l+s>>1;i<e[(p+1)*r-1]?s=p:l=p+1}var g=e[l*r-1];if(i==g)return e.slice((l-1)*r,(l-1)*r+r);var u=e[(l+1)*r-1],c=(i-g)/(u-g);a=[];var y;for(y=0;y<r-1;++y)a.push(ol.math.lerp(e[(l-1)*r+y],e[l*r+y],c));return a.push(i),a},ol.geom.flat.interpolate.lineStringsCoordinateAtM=function(e,t,o,r,i,n,a){if(a)return ol.geom.flat.interpolate.lineStringCoordinateAtM(e,t,o[o.length-1],r,i,n);var l;if(i<e[r-1])return n?(l=e.slice(0,r),l[r-1]=i,l):null;if(e[e.length-1]<i)return n?(l=e.slice(e.length-r),l[r-1]=i,l):null;var s,p;for(s=0,p=o.length;s<p;++s){var g=o[s];if(t!=g){if(i<e[t+r-1])return null;if(i<=e[g-1])return ol.geom.flat.interpolate.lineStringCoordinateAtM(e,t,g,r,i,!1);t=g}}return null},goog.provide("ol.geom.flat.length"),ol.geom.flat.length.lineString=function(e,t,o,r){var i,n=e[t],a=e[t+1],l=0;for(i=t+r;i<o;i+=r){var s=e[i],p=e[i+1];l+=Math.sqrt((s-n)*(s-n)+(p-a)*(p-a)),n=s,a=p}return l},ol.geom.flat.length.linearRing=function(e,t,o,r){var i=ol.geom.flat.length.lineString(e,t,o,r),n=e[o-r]-e[t],a=e[o-r+1]-e[t+1];return i+=Math.sqrt(n*n+a*a)},goog.provide("ol.geom.LineString"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.extent"),goog.require("ol.geom.GeometryLayout"),goog.require("ol.geom.GeometryType"),goog.require("ol.geom.SimpleGeometry"),goog.require("ol.geom.flat.closest"),goog.require("ol.geom.flat.deflate"),goog.require("ol.geom.flat.inflate"),goog.require("ol.geom.flat.interpolate"),goog.require("ol.geom.flat.intersectsextent"),goog.require("ol.geom.flat.length"),goog.require("ol.geom.flat.segments"),goog.require("ol.geom.flat.simplify"),ol.geom.LineString=function(e,t){ol.geom.SimpleGeometry.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(e,t)},ol.inherits(ol.geom.LineString,ol.geom.SimpleGeometry),ol.geom.LineString.prototype.appendCoordinate=function(e){this.flatCoordinates?ol.array.extend(this.flatCoordinates,e):this.flatCoordinates=e.slice(),this.changed()},ol.geom.LineString.prototype.clone=function(){var e=new ol.geom.LineString(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),e},ol.geom.LineString.prototype.closestPointXY=function(e,t,o,r){return r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getMaxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ol.geom.flat.closest.getClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,o,r))},ol.geom.LineString.prototype.forEachSegment=function(e,t){return ol.geom.flat.segments.forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t)},ol.geom.LineString.prototype.getCoordinateAtM=function(e,t){if(this.layout!=ol.geom.GeometryLayout.XYM&&this.layout!=ol.geom.GeometryLayout.XYZM)return null;var o=void 0!==t&&t;return ol.geom.flat.interpolate.lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,o)},ol.geom.LineString.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},ol.geom.LineString.prototype.getCoordinateAt=function(e,t){return ol.geom.flat.interpolate.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t)},ol.geom.LineString.prototype.getLength=function(){return ol.geom.flat.length.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},ol.geom.LineString.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},ol.geom.LineString.prototype.getSimplifiedGeometryInternal=function(e){var t=[];t.length=ol.geom.flat.simplify.douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0);var o=new ol.geom.LineString(null);return o.setFlatCoordinates(ol.geom.GeometryLayout.XY,t),o},ol.geom.LineString.prototype.getType=function(){return ol.geom.GeometryType.LINE_STRING},ol.geom.LineString.prototype.intersectsExtent=function(e){return ol.geom.flat.intersectsextent.lineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)},ol.geom.LineString.prototype.setCoordinates=function(e,t){e?(this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ol.geom.flat.deflate.coordinates(this.flatCoordinates,0,e,this.stride),this.changed()):this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)},ol.geom.LineString.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t),this.changed()},goog.provide("ol.geom.MultiLineString"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.extent"),goog.require("ol.geom.GeometryLayout"),goog.require("ol.geom.GeometryType"),goog.require("ol.geom.LineString"),goog.require("ol.geom.SimpleGeometry"),goog.require("ol.geom.flat.closest"),goog.require("ol.geom.flat.deflate"),goog.require("ol.geom.flat.inflate"),goog.require("ol.geom.flat.interpolate"),goog.require("ol.geom.flat.intersectsextent"),goog.require("ol.geom.flat.simplify"),ol.geom.MultiLineString=function(e,t){ol.geom.SimpleGeometry.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.setCoordinates(e,t)},ol.inherits(ol.geom.MultiLineString,ol.geom.SimpleGeometry),ol.geom.MultiLineString.prototype.appendLineString=function(e){this.flatCoordinates?ol.array.extend(this.flatCoordinates,e.getFlatCoordinates().slice()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},ol.geom.MultiLineString.prototype.clone=function(){var e=new ol.geom.MultiLineString(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),this.ends_.slice()),e},ol.geom.MultiLineString.prototype.closestPointXY=function(e,t,o,r){return r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getsMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ol.geom.flat.closest.getsClosestPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,o,r))},ol.geom.MultiLineString.prototype.getCoordinateAtM=function(e,t,o){if(this.layout!=ol.geom.GeometryLayout.XYM&&this.layout!=ol.geom.GeometryLayout.XYZM||0===this.flatCoordinates.length)return null;var r=void 0!==t&&t,i=void 0!==o&&o;return ol.geom.flat.interpolate.lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,e,r,i)},ol.geom.MultiLineString.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinatess(this.flatCoordinates,0,this.ends_,this.stride)},ol.geom.MultiLineString.prototype.getEnds=function(){return this.ends_},ol.geom.MultiLineString.prototype.getLineString=function(e){if(e<0||this.ends_.length<=e)return null;var t=new ol.geom.LineString(null);return t.setFlatCoordinates(this.layout,this.flatCoordinates.slice(0===e?0:this.ends_[e-1],this.ends_[e])),t},ol.geom.MultiLineString.prototype.getLineStrings=function(){var e,t,o=this.flatCoordinates,r=this.ends_,i=this.layout,n=[],a=0;for(e=0,t=r.length;e<t;++e){var l=r[e],s=new ol.geom.LineString(null);s.setFlatCoordinates(i,o.slice(a,l)),n.push(s),a=l}return n},ol.geom.MultiLineString.prototype.getFlatMidpoints=function(){var e,t,o=[],r=this.flatCoordinates,i=0,n=this.ends_,a=this.stride;for(e=0,t=n.length;e<t;++e){var l=n[e],s=ol.geom.flat.interpolate.lineString(r,i,l,a,.5);ol.array.extend(o,s),i=l}return o},ol.geom.MultiLineString.prototype.getSimplifiedGeometryInternal=function(e){var t=[],o=[];t.length=ol.geom.flat.simplify.douglasPeuckers(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,o);var r=new ol.geom.MultiLineString(null);return r.setFlatCoordinates(ol.geom.GeometryLayout.XY,t,o),r},ol.geom.MultiLineString.prototype.getType=function(){return ol.geom.GeometryType.MULTI_LINE_STRING},ol.geom.MultiLineString.prototype.intersectsExtent=function(e){return ol.geom.flat.intersectsextent.lineStrings(this.flatCoordinates,0,this.ends_,this.stride,e)},ol.geom.MultiLineString.prototype.setCoordinates=function(e,t){if(e){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);var o=ol.geom.flat.deflate.coordinatess(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=0===o.length?0:o[o.length-1],this.changed()}else this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null,this.ends_)},ol.geom.MultiLineString.prototype.setFlatCoordinates=function(e,t,o){this.setFlatCoordinatesInternal(e,t),this.ends_=o,this.changed()},ol.geom.MultiLineString.prototype.setLineStrings=function(e){var t,o,r=this.getLayout(),i=[],n=[];for(t=0,o=e.length;t<o;++t){var a=e[t];0===t&&(r=a.getLayout()),ol.array.extend(i,a.getFlatCoordinates()),n.push(i.length)}this.setFlatCoordinates(r,i,n)},goog.provide("ol.geom.MultiPoint"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.extent"),goog.require("ol.geom.GeometryLayout"),goog.require("ol.geom.GeometryType"),goog.require("ol.geom.Point"),goog.require("ol.geom.SimpleGeometry"),goog.require("ol.geom.flat.deflate"),goog.require("ol.geom.flat.inflate"),goog.require("ol.math"),ol.geom.MultiPoint=function(e,t){ol.geom.SimpleGeometry.call(this),this.setCoordinates(e,t)},ol.inherits(ol.geom.MultiPoint,ol.geom.SimpleGeometry),ol.geom.MultiPoint.prototype.appendPoint=function(e){this.flatCoordinates?ol.array.extend(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.changed()},ol.geom.MultiPoint.prototype.clone=function(){var e=new ol.geom.MultiPoint(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),e},ol.geom.MultiPoint.prototype.closestPointXY=function(e,t,o,r){if(r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,t))return r;var i,n,a,l=this.flatCoordinates,s=this.stride;for(i=0,n=l.length;i<n;i+=s){var p=ol.math.squaredDistance(e,t,l[i],l[i+1]);if(p<r){for(r=p,a=0;a<s;++a)o[a]=l[i+a];o.length=s}}return r},ol.geom.MultiPoint.prototype.getCoordinates=function(){return ol.geom.flat.inflate.coordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},ol.geom.MultiPoint.prototype.getPoint=function(e){var t=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;
if(e<0||t<=e)return null;var o=new ol.geom.Point(null);return o.setFlatCoordinates(this.layout,this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride)),o},ol.geom.MultiPoint.prototype.getPoints=function(){var e,t,o=this.flatCoordinates,r=this.layout,i=this.stride,n=[];for(e=0,t=o.length;e<t;e+=i){var a=new ol.geom.Point(null);a.setFlatCoordinates(r,o.slice(e,e+i)),n.push(a)}return n},ol.geom.MultiPoint.prototype.getType=function(){return ol.geom.GeometryType.MULTI_POINT},ol.geom.MultiPoint.prototype.intersectsExtent=function(e){var t,o,r,i,n=this.flatCoordinates,a=this.stride;for(t=0,o=n.length;t<o;t+=a)if(r=n[t],i=n[t+1],ol.extent.containsXY(e,r,i))return!0;return!1},ol.geom.MultiPoint.prototype.setCoordinates=function(e,t){e?(this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ol.geom.flat.deflate.coordinates(this.flatCoordinates,0,e,this.stride),this.changed()):this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)},ol.geom.MultiPoint.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t),this.changed()},goog.provide("ol.geom.flat.center"),goog.require("ol.extent"),ol.geom.flat.center.linearRingss=function(e,t,o,r){var i,n,a=[],l=ol.extent.createEmpty();for(i=0,n=o.length;i<n;++i){var s=o[i];l=ol.extent.createOrUpdateFromFlatCoordinates(e,t,s[0],r),a.push((l[0]+l[2])/2,(l[1]+l[3])/2),t=s[s.length-1]}return a},goog.provide("ol.geom.MultiPolygon"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.extent"),goog.require("ol.geom.GeometryLayout"),goog.require("ol.geom.GeometryType"),goog.require("ol.geom.MultiPoint"),goog.require("ol.geom.Polygon"),goog.require("ol.geom.SimpleGeometry"),goog.require("ol.geom.flat.area"),goog.require("ol.geom.flat.center"),goog.require("ol.geom.flat.closest"),goog.require("ol.geom.flat.contains"),goog.require("ol.geom.flat.deflate"),goog.require("ol.geom.flat.inflate"),goog.require("ol.geom.flat.interiorpoint"),goog.require("ol.geom.flat.intersectsextent"),goog.require("ol.geom.flat.orient"),goog.require("ol.geom.flat.simplify"),ol.geom.MultiPolygon=function(e,t){ol.geom.SimpleGeometry.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,this.setCoordinates(e,t)},ol.inherits(ol.geom.MultiPolygon,ol.geom.SimpleGeometry),ol.geom.MultiPolygon.prototype.appendPolygon=function(e){var t;if(this.flatCoordinates){var o=this.flatCoordinates.length;ol.array.extend(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();var r,i;for(r=0,i=t.length;r<i;++r)t[r]+=o}else this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();this.endss_.push(t),this.changed()},ol.geom.MultiPolygon.prototype.clone=function(){for(var e=new ol.geom.MultiPolygon(null),t=this.endss_.length,o=new Array(t),r=0;r<t;++r)o[r]=this.endss_[r].slice();return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice(),o),e},ol.geom.MultiPolygon.prototype.closestPointXY=function(e,t,o,r){return r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ol.geom.flat.closest.getssMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ol.geom.flat.closest.getssClosestPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,o,r))},ol.geom.MultiPolygon.prototype.containsXY=function(e,t){return ol.geom.flat.contains.linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)},ol.geom.MultiPolygon.prototype.getArea=function(){return ol.geom.flat.area.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},ol.geom.MultiPolygon.prototype.getCoordinates=function(e){var t;return void 0!==e?(t=this.getOrientedFlatCoordinates().slice(),ol.geom.flat.orient.orientLinearRingss(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,ol.geom.flat.inflate.coordinatesss(t,0,this.endss_,this.stride)},ol.geom.MultiPolygon.prototype.getEndss=function(){return this.endss_},ol.geom.MultiPolygon.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var e=ol.geom.flat.center.linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=ol.geom.flat.interiorpoint.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},ol.geom.MultiPolygon.prototype.getInteriorPoints=function(){var e=new ol.geom.MultiPoint(null);return e.setFlatCoordinates(ol.geom.GeometryLayout.XY,this.getFlatInteriorPoints().slice()),e},ol.geom.MultiPolygon.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var e=this.flatCoordinates;ol.geom.flat.orient.linearRingssAreOriented(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=ol.geom.flat.orient.orientLinearRingss(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},ol.geom.MultiPolygon.prototype.getSimplifiedGeometryInternal=function(e){var t=[],o=[];t.length=ol.geom.flat.simplify.quantizess(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,o);var r=new ol.geom.MultiPolygon(null);return r.setFlatCoordinates(ol.geom.GeometryLayout.XY,t,o),r},ol.geom.MultiPolygon.prototype.getPolygon=function(e){if(e<0||this.endss_.length<=e)return null;var t;if(0===e)t=0;else{var o=this.endss_[e-1];t=o[o.length-1]}var r=this.endss_[e].slice(),i=r[r.length-1];if(0!==t){var n,a;for(n=0,a=r.length;n<a;++n)r[n]-=t}var l=new ol.geom.Polygon(null);return l.setFlatCoordinates(this.layout,this.flatCoordinates.slice(t,i),r),l},ol.geom.MultiPolygon.prototype.getPolygons=function(){var e,t,o,r,i=this.layout,n=this.flatCoordinates,a=this.endss_,l=[],s=0;for(e=0,t=a.length;e<t;++e){var p=a[e].slice(),g=p[p.length-1];if(0!==s)for(o=0,r=p.length;o<r;++o)p[o]-=s;var u=new ol.geom.Polygon(null);u.setFlatCoordinates(i,n.slice(s,g),p),l.push(u),s=g}return l},ol.geom.MultiPolygon.prototype.getType=function(){return ol.geom.GeometryType.MULTI_POLYGON},ol.geom.MultiPolygon.prototype.intersectsExtent=function(e){return ol.geom.flat.intersectsextent.linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)},ol.geom.MultiPolygon.prototype.setCoordinates=function(e,t){if(e){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);var o=ol.geom.flat.deflate.coordinatesss(this.flatCoordinates,0,e,this.stride,this.endss_);if(0===o.length)this.flatCoordinates.length=0;else{var r=o[o.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()}else this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null,this.endss_)},ol.geom.MultiPolygon.prototype.setFlatCoordinates=function(e,t,o){this.setFlatCoordinatesInternal(e,t),this.endss_=o,this.changed()},ol.geom.MultiPolygon.prototype.setPolygons=function(e){var t,o,r,i=this.getLayout(),n=[],a=[];for(t=0,o=e.length;t<o;++t){var l=e[t];0===t&&(i=l.getLayout());var s=n.length;r=l.getEnds();var p,g;for(p=0,g=r.length;p<g;++p)r[p]+=s;ol.array.extend(n,l.getFlatCoordinates()),a.push(r)}this.setFlatCoordinates(i,n,a)},goog.provide("ol.format.EsriJSON"),goog.require("ol"),goog.require("ol.Feature"),goog.require("ol.asserts"),goog.require("ol.extent"),goog.require("ol.format.Feature"),goog.require("ol.format.JSONFeature"),goog.require("ol.geom.GeometryLayout"),goog.require("ol.geom.GeometryType"),goog.require("ol.geom.LineString"),goog.require("ol.geom.LinearRing"),goog.require("ol.geom.MultiLineString"),goog.require("ol.geom.MultiPoint"),goog.require("ol.geom.MultiPolygon"),goog.require("ol.geom.Point"),goog.require("ol.geom.Polygon"),goog.require("ol.geom.flat.deflate"),goog.require("ol.geom.flat.orient"),goog.require("ol.obj"),goog.require("ol.proj"),ol.format.EsriJSON=function(e){var t=e?e:{};ol.format.JSONFeature.call(this),this.geometryName_=t.geometryName},ol.inherits(ol.format.EsriJSON,ol.format.JSONFeature),ol.format.EsriJSON.readGeometry_=function(e,t){if(!e)return null;var o;if("number"==typeof e.x&&"number"==typeof e.y)o=ol.geom.GeometryType.POINT;else if(e.points)o=ol.geom.GeometryType.MULTI_POINT;else if(e.paths)o=1===e.paths.length?ol.geom.GeometryType.LINE_STRING:ol.geom.GeometryType.MULTI_LINE_STRING;else if(e.rings){var r=ol.format.EsriJSON.getGeometryLayout_(e),i=ol.format.EsriJSON.convertRings_(e.rings,r);e=ol.obj.assign({},e),1===i.length?(o=ol.geom.GeometryType.POLYGON,e.rings=i[0]):(o=ol.geom.GeometryType.MULTI_POLYGON,e.rings=i)}var n=ol.format.EsriJSON.GEOMETRY_READERS_[o];return ol.format.Feature.transformWithOptions(n(e),!1,t)},ol.format.EsriJSON.convertRings_=function(e,t){var o,r,i=[],n=[],a=[];for(o=0,r=e.length;o<r;++o){i.length=0,ol.geom.flat.deflate.coordinates(i,0,e[o],t.length);var l=ol.geom.flat.orient.linearRingIsClockwise(i,0,i.length,t.length);l?n.push([e[o]]):a.push(e[o])}for(;a.length;){var s=a.shift(),p=!1;for(o=n.length-1;o>=0;o--){var g=n[o][0];if(ol.extent.containsExtent(new ol.geom.LinearRing(g).getExtent(),new ol.geom.LinearRing(s).getExtent())){n[o].push(s),p=!0;break}}p||n.push([s.reverse()])}return n},ol.format.EsriJSON.readPointGeometry_=function(e){var t;return t=void 0!==e.m&&void 0!==e.z?new ol.geom.Point([e.x,e.y,e.z,e.m],ol.geom.GeometryLayout.XYZM):void 0!==e.z?new ol.geom.Point([e.x,e.y,e.z],ol.geom.GeometryLayout.XYZ):void 0!==e.m?new ol.geom.Point([e.x,e.y,e.m],ol.geom.GeometryLayout.XYM):new ol.geom.Point([e.x,e.y])},ol.format.EsriJSON.readLineStringGeometry_=function(e){var t=ol.format.EsriJSON.getGeometryLayout_(e);return new ol.geom.LineString(e.paths[0],t)},ol.format.EsriJSON.readMultiLineStringGeometry_=function(e){var t=ol.format.EsriJSON.getGeometryLayout_(e);return new ol.geom.MultiLineString(e.paths,t)},ol.format.EsriJSON.getGeometryLayout_=function(e){var t=ol.geom.GeometryLayout.XY;return e.hasZ===!0&&e.hasM===!0?t=ol.geom.GeometryLayout.XYZM:e.hasZ===!0?t=ol.geom.GeometryLayout.XYZ:e.hasM===!0&&(t=ol.geom.GeometryLayout.XYM),t},ol.format.EsriJSON.readMultiPointGeometry_=function(e){var t=ol.format.EsriJSON.getGeometryLayout_(e);return new ol.geom.MultiPoint(e.points,t)},ol.format.EsriJSON.readMultiPolygonGeometry_=function(e){var t=ol.format.EsriJSON.getGeometryLayout_(e);return new ol.geom.MultiPolygon(e.rings,t)},ol.format.EsriJSON.readPolygonGeometry_=function(e){var t=ol.format.EsriJSON.getGeometryLayout_(e);return new ol.geom.Polygon(e.rings,t)},ol.format.EsriJSON.writePointGeometry_=function(e,t){var o,r=e.getCoordinates(),i=e.getLayout();return i===ol.geom.GeometryLayout.XYZ?o={x:r[0],y:r[1],z:r[2]}:i===ol.geom.GeometryLayout.XYM?o={x:r[0],y:r[1],m:r[2]}:i===ol.geom.GeometryLayout.XYZM?o={x:r[0],y:r[1],z:r[2],m:r[3]}:i===ol.geom.GeometryLayout.XY?o={x:r[0],y:r[1]}:ol.asserts.assert(!1,34),o},ol.format.EsriJSON.getHasZM_=function(e){var t=e.getLayout();return{hasZ:t===ol.geom.GeometryLayout.XYZ||t===ol.geom.GeometryLayout.XYZM,hasM:t===ol.geom.GeometryLayout.XYM||t===ol.geom.GeometryLayout.XYZM}};ol.format.EsriJSON.writeLineStringGeometry_=function(e,t){var o=ol.format.EsriJSON.getHasZM_(e);return{hasZ:o.hasZ,hasM:o.hasM,paths:[e.getCoordinates()]}};ol.format.EsriJSON.writePolygonGeometry_=function(e,t){var o=ol.format.EsriJSON.getHasZM_(e);return{hasZ:o.hasZ,hasM:o.hasM,rings:e.getCoordinates(!1)}},ol.format.EsriJSON.writeMultiLineStringGeometry_=function(e,t){var o=ol.format.EsriJSON.getHasZM_(e);return{hasZ:o.hasZ,hasM:o.hasM,paths:e.getCoordinates()}},ol.format.EsriJSON.writeMultiPointGeometry_=function(e,t){var o=ol.format.EsriJSON.getHasZM_(e);return{hasZ:o.hasZ,hasM:o.hasM,points:e.getCoordinates()}},ol.format.EsriJSON.writeMultiPolygonGeometry_=function(e,t){for(var o=ol.format.EsriJSON.getHasZM_(e),r=e.getCoordinates(!1),i=[],n=0;n<r.length;n++)for(var a=r[n].length-1;a>=0;a--)i.push(r[n][a]);return{hasZ:o.hasZ,hasM:o.hasM,rings:i}},ol.format.EsriJSON.GEOMETRY_READERS_={},ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.POINT]=ol.format.EsriJSON.readPointGeometry_,ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.LINE_STRING]=ol.format.EsriJSON.readLineStringGeometry_,ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.POLYGON]=ol.format.EsriJSON.readPolygonGeometry_,ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.MULTI_POINT]=ol.format.EsriJSON.readMultiPointGeometry_,ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.MULTI_LINE_STRING]=ol.format.EsriJSON.readMultiLineStringGeometry_,ol.format.EsriJSON.GEOMETRY_READERS_[ol.geom.GeometryType.MULTI_POLYGON]=ol.format.EsriJSON.readMultiPolygonGeometry_,ol.format.EsriJSON.GEOMETRY_WRITERS_={},ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.POINT]=ol.format.EsriJSON.writePointGeometry_,ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.LINE_STRING]=ol.format.EsriJSON.writeLineStringGeometry_,ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.POLYGON]=ol.format.EsriJSON.writePolygonGeometry_,ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.MULTI_POINT]=ol.format.EsriJSON.writeMultiPointGeometry_,ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.MULTI_LINE_STRING]=ol.format.EsriJSON.writeMultiLineStringGeometry_,ol.format.EsriJSON.GEOMETRY_WRITERS_[ol.geom.GeometryType.MULTI_POLYGON]=ol.format.EsriJSON.writeMultiPolygonGeometry_,ol.format.EsriJSON.prototype.readFeature,ol.format.EsriJSON.prototype.readFeatures,ol.format.EsriJSON.prototype.readFeatureFromObject=function(e,t){var o=e,r=ol.format.EsriJSON.readGeometry_(o.geometry,t),i=new ol.Feature;return this.geometryName_&&i.setGeometryName(this.geometryName_),i.setGeometry(r),t&&t.idField&&o.attributes[t.idField]&&i.setId(o.attributes[t.idField]),o.attributes&&i.setProperties(o.attributes),i},ol.format.EsriJSON.prototype.readFeaturesFromObject=function(e,t){var o=e,r=t?t:{};if(o.features){var i,n,a=e,l=[],s=a.features;for(r.idField=e.objectIdFieldName,i=0,n=s.length;i<n;++i)l.push(this.readFeatureFromObject(s[i],r));return l}return[this.readFeatureFromObject(e,r)]},ol.format.EsriJSON.prototype.readGeometry,ol.format.EsriJSON.prototype.readGeometryFromObject=function(e,t){return ol.format.EsriJSON.readGeometry_(e,t)},ol.format.EsriJSON.prototype.readProjection,ol.format.EsriJSON.prototype.readProjectionFromObject=function(e){var t=e;if(t.spatialReference&&t.spatialReference.wkid){var o=t.spatialReference.wkid;return ol.proj.get("EPSG:"+o)}return null},ol.format.EsriJSON.writeGeometry_=function(e,t){var o=ol.format.EsriJSON.GEOMETRY_WRITERS_[e.getType()];return o(ol.format.Feature.transformWithOptions(e,!0,t),t)},ol.format.EsriJSON.prototype.writeGeometry,ol.format.EsriJSON.prototype.writeGeometryObject=function(e,t){return ol.format.EsriJSON.writeGeometry_(e,this.adaptOptions(t))},ol.format.EsriJSON.prototype.writeFeature,ol.format.EsriJSON.prototype.writeFeatureObject=function(e,t){t=this.adaptOptions(t);var o={},r=e.getGeometry();r&&(o.geometry=ol.format.EsriJSON.writeGeometry_(r,t));var i=e.getProperties();return delete i[e.getGeometryName()],ol.obj.isEmpty(i)?o.attributes={}:o.attributes=i,t&&t.featureProjection&&(o.spatialReference={wkid:ol.proj.get(t.featureProjection).getCode().split(":").pop()}),o},ol.format.EsriJSON.prototype.writeFeatures,ol.format.EsriJSON.prototype.writeFeaturesObject=function(e,t){t=this.adaptOptions(t);var o,r,i=[];for(o=0,r=e.length;o<r;++o)i.push(this.writeFeatureObject(e[o],t));return{features:i}},goog.provide("ol.format.filter.Filter"),ol.format.filter.Filter=function(e){this.tagName_=e},ol.format.filter.Filter.prototype.getTagName=function(){return this.tagName_},goog.provide("ol.format.filter.LogicalNary"),goog.require("ol"),goog.require("ol.asserts"),goog.require("ol.format.filter.Filter"),ol.format.filter.LogicalNary=function(e,t){ol.format.filter.Filter.call(this,e),this.conditions=Array.prototype.slice.call(arguments,1),ol.asserts.assert(this.conditions.length>=2,57)},ol.inherits(ol.format.filter.LogicalNary,ol.format.filter.Filter),goog.provide("ol.format.filter.And"),goog.require("ol"),goog.require("ol.format.filter.LogicalNary"),ol.format.filter.And=function(e){var t=["And"].concat(Array.prototype.slice.call(arguments));ol.format.filter.LogicalNary.apply(this,t)},ol.inherits(ol.format.filter.And,ol.format.filter.LogicalNary),goog.provide("ol.format.filter.Bbox"),goog.require("ol"),goog.require("ol.format.filter.Filter"),ol.format.filter.Bbox=function(e,t,o){ol.format.filter.Filter.call(this,"BBOX"),this.geometryName=e,this.extent=t,this.srsName=o},ol.inherits(ol.format.filter.Bbox,ol.format.filter.Filter),goog.provide("ol.format.filter.Comparison"),goog.require("ol"),goog.require("ol.format.filter.Filter"),ol.format.filter.Comparison=function(e,t){ol.format.filter.Filter.call(this,e),this.propertyName=t},ol.inherits(ol.format.filter.Comparison,ol.format.filter.Filter),goog.provide("ol.format.filter.During"),goog.require("ol"),goog.require("ol.format.filter.Comparison"),ol.format.filter.During=function(e,t,o){ol.format.filter.Comparison.call(this,"During",e),this.begin=t,this.end=o},ol.inherits(ol.format.filter.During,ol.format.filter.Comparison),goog.provide("ol.format.filter.ComparisonBinary"),goog.require("ol"),goog.require("ol.format.filter.Comparison"),ol.format.filter.ComparisonBinary=function(e,t,o,r){ol.format.filter.Comparison.call(this,e,t),this.expression=o,this.matchCase=r},ol.inherits(ol.format.filter.ComparisonBinary,ol.format.filter.Comparison),goog.provide("ol.format.filter.EqualTo"),goog.require("ol"),goog.require("ol.format.filter.ComparisonBinary"),ol.format.filter.EqualTo=function(e,t,o){ol.format.filter.ComparisonBinary.call(this,"PropertyIsEqualTo",e,t,o)},ol.inherits(ol.format.filter.EqualTo,ol.format.filter.ComparisonBinary),goog.provide("ol.format.filter.GreaterThan"),goog.require("ol"),goog.require("ol.format.filter.ComparisonBinary"),ol.format.filter.GreaterThan=function(e,t){ol.format.filter.ComparisonBinary.call(this,"PropertyIsGreaterThan",e,t)},ol.inherits(ol.format.filter.GreaterThan,ol.format.filter.ComparisonBinary),goog.provide("ol.format.filter.GreaterThanOrEqualTo"),goog.require("ol"),goog.require("ol.format.filter.ComparisonBinary"),ol.format.filter.GreaterThanOrEqualTo=function(e,t){ol.format.filter.ComparisonBinary.call(this,"PropertyIsGreaterThanOrEqualTo",e,t)},ol.inherits(ol.format.filter.GreaterThanOrEqualTo,ol.format.filter.ComparisonBinary),goog.provide("ol.format.filter.Spatial"),goog.require("ol"),goog.require("ol.format.filter.Filter"),ol.format.filter.Spatial=function(e,t,o,r){ol.format.filter.Filter.call(this,e),this.geometryName=t||"the_geom",this.geometry=o,this.srsName=r},ol.inherits(ol.format.filter.Spatial,ol.format.filter.Filter),goog.provide("ol.format.filter.Intersects"),goog.require("ol"),goog.require("ol.format.filter.Spatial"),ol.format.filter.Intersects=function(e,t,o){ol.format.filter.Spatial.call(this,"Intersects",e,t,o)},ol.inherits(ol.format.filter.Intersects,ol.format.filter.Spatial),goog.provide("ol.format.filter.IsBetween"),goog.require("ol"),goog.require("ol.format.filter.Comparison"),ol.format.filter.IsBetween=function(e,t,o){ol.format.filter.Comparison.call(this,"PropertyIsBetween",e),this.lowerBoundary=t,this.upperBoundary=o},ol.inherits(ol.format.filter.IsBetween,ol.format.filter.Comparison),goog.provide("ol.format.filter.IsLike"),goog.require("ol"),goog.require("ol.format.filter.Comparison"),ol.format.filter.IsLike=function(e,t,o,r,i,n){ol.format.filter.Comparison.call(this,"PropertyIsLike",e),this.pattern=t,this.wildCard=void 0!==o?o:"*",this.singleChar=void 0!==r?r:".",this.escapeChar=void 0!==i?i:"!",this.matchCase=n},ol.inherits(ol.format.filter.IsLike,ol.format.filter.Comparison),goog.provide("ol.format.filter.IsNull"),goog.require("ol"),goog.require("ol.format.filter.Comparison"),ol.format.filter.IsNull=function(e){ol.format.filter.Comparison.call(this,"PropertyIsNull",e)},ol.inherits(ol.format.filter.IsNull,ol.format.filter.Comparison),goog.provide("ol.format.filter.LessThan"),goog.require("ol"),goog.require("ol.format.filter.ComparisonBinary"),ol.format.filter.LessThan=function(e,t){ol.format.filter.ComparisonBinary.call(this,"PropertyIsLessThan",e,t)},ol.inherits(ol.format.filter.LessThan,ol.format.filter.ComparisonBinary),goog.provide("ol.format.filter.LessThanOrEqualTo"),goog.require("ol"),goog.require("ol.format.filter.ComparisonBinary"),ol.format.filter.LessThanOrEqualTo=function(e,t){ol.format.filter.ComparisonBinary.call(this,"PropertyIsLessThanOrEqualTo",e,t)},ol.inherits(ol.format.filter.LessThanOrEqualTo,ol.format.filter.ComparisonBinary),goog.provide("ol.format.filter.Not"),goog.require("ol"),goog.require("ol.format.filter.Filter"),ol.format.filter.Not=function(e){ol.format.filter.Filter.call(this,"Not"),this.condition=e},ol.inherits(ol.format.filter.Not,ol.format.filter.Filter),goog.provide("ol.format.filter.NotEqualTo"),goog.require("ol"),goog.require("ol.format.filter.ComparisonBinary"),ol.format.filter.NotEqualTo=function(e,t,o){ol.format.filter.ComparisonBinary.call(this,"PropertyIsNotEqualTo",e,t,o)},ol.inherits(ol.format.filter.NotEqualTo,ol.format.filter.ComparisonBinary),goog.provide("ol.format.filter.Or"),goog.require("ol"),goog.require("ol.format.filter.LogicalNary"),ol.format.filter.Or=function(e){var t=["Or"].concat(Array.prototype.slice.call(arguments));ol.format.filter.LogicalNary.apply(this,t)},ol.inherits(ol.format.filter.Or,ol.format.filter.LogicalNary),goog.provide("ol.format.filter.Within"),goog.require("ol"),goog.require("ol.format.filter.Spatial"),ol.format.filter.Within=function(e,t,o){ol.format.filter.Spatial.call(this,"Within",e,t,o)},ol.inherits(ol.format.filter.Within,ol.format.filter.Spatial),goog.provide("ol.format.filter"),goog.require("ol.format.filter.And"),goog.require("ol.format.filter.Bbox"),goog.require("ol.format.filter.During"),goog.require("ol.format.filter.EqualTo"),goog.require("ol.format.filter.GreaterThan"),goog.require("ol.format.filter.GreaterThanOrEqualTo"),goog.require("ol.format.filter.Intersects"),goog.require("ol.format.filter.IsBetween"),goog.require("ol.format.filter.IsLike"),goog.require("ol.format.filter.IsNull"),goog.require("ol.format.filter.LessThan"),goog.require("ol.format.filter.LessThanOrEqualTo"),goog.require("ol.format.filter.Not"),goog.require("ol.format.filter.NotEqualTo"),goog.require("ol.format.filter.Or"),goog.require("ol.format.filter.Within"),ol.format.filter.and=function(e){var t=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(ol.format.filter.And,t))},ol.format.filter.or=function(e){var t=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(ol.format.filter.Or,t))},ol.format.filter.not=function(e){return new ol.format.filter.Not(e)},ol.format.filter.bbox=function(e,t,o){return new ol.format.filter.Bbox(e,t,o)},ol.format.filter.intersects=function(e,t,o){return new ol.format.filter.Intersects(e,t,o)},ol.format.filter.within=function(e,t,o){return new ol.format.filter.Within(e,t,o)},ol.format.filter.equalTo=function(e,t,o){return new ol.format.filter.EqualTo(e,t,o)},ol.format.filter.notEqualTo=function(e,t,o){return new ol.format.filter.NotEqualTo(e,t,o)},ol.format.filter.lessThan=function(e,t){return new ol.format.filter.LessThan(e,t)},ol.format.filter.lessThanOrEqualTo=function(e,t){return new ol.format.filter.LessThanOrEqualTo(e,t)},ol.format.filter.greaterThan=function(e,t){return new ol.format.filter.GreaterThan(e,t)},ol.format.filter.greaterThanOrEqualTo=function(e,t){return new ol.format.filter.GreaterThanOrEqualTo(e,t)},ol.format.filter.isNull=function(e){return new ol.format.filter.IsNull(e)},ol.format.filter.between=function(e,t,o){return new ol.format.filter.IsBetween(e,t,o)},ol.format.filter.like=function(e,t,o,r,i,n){return new ol.format.filter.IsLike(e,t,o,r,i,n)},ol.format.filter.during=function(e,t,o){return new ol.format.filter.During(e,t,o)},goog.provide("ol.geom.GeometryCollection"),goog.require("ol"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.extent"),goog.require("ol.geom.Geometry"),goog.require("ol.geom.GeometryType"),goog.require("ol.obj"),ol.geom.GeometryCollection=function(e){ol.geom.Geometry.call(this),this.geometries_=e?e:null,this.listenGeometriesChange_()},ol.inherits(ol.geom.GeometryCollection,ol.geom.Geometry),ol.geom.GeometryCollection.cloneGeometries_=function(e){var t,o,r=[];for(t=0,o=e.length;t<o;++t)r.push(e[t].clone());return r},ol.geom.GeometryCollection.prototype.unlistenGeometriesChange_=function(){var e,t;if(this.geometries_)for(e=0,t=this.geometries_.length;e<t;++e)ol.events.unlisten(this.geometries_[e],ol.events.EventType.CHANGE,this.changed,this)},ol.geom.GeometryCollection.prototype.listenGeometriesChange_=function(){var e,t;if(this.geometries_)for(e=0,t=this.geometries_.length;e<t;++e)ol.events.listen(this.geometries_[e],ol.events.EventType.CHANGE,this.changed,this)},ol.geom.GeometryCollection.prototype.clone=function(){var e=new ol.geom.GeometryCollection(null);return e.setGeometries(this.geometries_),e},ol.geom.GeometryCollection.prototype.closestPointXY=function(e,t,o,r){if(r<ol.extent.closestSquaredDistanceXY(this.getExtent(),e,t))return r;var i,n,a=this.geometries_;for(i=0,n=a.length;i<n;++i)r=a[i].closestPointXY(e,t,o,r);return r},ol.geom.GeometryCollection.prototype.containsXY=function(e,t){var o,r,i=this.geometries_;for(o=0,r=i.length;o<r;++o)if(i[o].containsXY(e,t))return!0;return!1},ol.geom.GeometryCollection.prototype.computeExtent=function(e){ol.extent.createOrUpdateEmpty(e);for(var t=this.geometries_,o=0,r=t.length;o<r;++o)ol.extent.extend(e,t[o].getExtent());return e},ol.geom.GeometryCollection.prototype.getGeometries=function(){return ol.geom.GeometryCollection.cloneGeometries_(this.geometries_)},ol.geom.GeometryCollection.prototype.getGeometriesArray=function(){return this.geometries_},ol.geom.GeometryCollection.prototype.getSimplifiedGeometry=function(e){if(this.simplifiedGeometryRevision!=this.getRevision()&&(ol.obj.clear(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var t=e.toString();if(this.simplifiedGeometryCache.hasOwnProperty(t))return this.simplifiedGeometryCache[t];var o,r,i=[],n=this.geometries_,a=!1;for(o=0,r=n.length;o<r;++o){var l=n[o],s=l.getSimplifiedGeometry(e);i.push(s),s!==l&&(a=!0)}if(a){var p=new ol.geom.GeometryCollection(null);return p.setGeometriesArray(i),this.simplifiedGeometryCache[t]=p,p}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this},ol.geom.GeometryCollection.prototype.getType=function(){return ol.geom.GeometryType.GEOMETRY_COLLECTION},ol.geom.GeometryCollection.prototype.intersectsExtent=function(e){var t,o,r=this.geometries_;for(t=0,o=r.length;t<o;++t)if(r[t].intersectsExtent(e))return!0;return!1},ol.geom.GeometryCollection.prototype.isEmpty=function(){return 0===this.geometries_.length},ol.geom.GeometryCollection.prototype.rotate=function(e,t){for(var o=this.geometries_,r=0,i=o.length;r<i;++r)o[r].rotate(e,t);this.changed()},ol.geom.GeometryCollection.prototype.scale=function(e,t,o){var r=o;r||(r=ol.extent.getCenter(this.getExtent()));for(var i=this.geometries_,n=0,a=i.length;n<a;++n)i[n].scale(e,t,r);this.changed()},ol.geom.GeometryCollection.prototype.setGeometries=function(e){this.setGeometriesArray(ol.geom.GeometryCollection.cloneGeometries_(e))},ol.geom.GeometryCollection.prototype.setGeometriesArray=function(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()},ol.geom.GeometryCollection.prototype.applyTransform=function(e){var t,o,r=this.geometries_;for(t=0,o=r.length;t<o;++t)r[t].applyTransform(e);this.changed()},ol.geom.GeometryCollection.prototype.translate=function(e,t){var o,r,i=this.geometries_;for(o=0,r=i.length;o<r;++o)i[o].translate(e,t);this.changed()},ol.geom.GeometryCollection.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),ol.geom.Geometry.prototype.disposeInternal.call(this)};goog.provide("ol.format.GeoJSON");goog.require("ol"),goog.require("ol.asserts"),goog.require("ol.Feature"),goog.require("ol.format.Feature"),goog.require("ol.format.JSONFeature"),goog.require("ol.geom.GeometryCollection"),goog.require("ol.geom.LineString"),goog.require("ol.geom.MultiLineString"),goog.require("ol.geom.MultiPoint"),goog.require("ol.geom.MultiPolygon"),goog.require("ol.geom.Point"),goog.require("ol.geom.Polygon"),goog.require("ol.obj"),goog.require("ol.proj"),ol.format.GeoJSON=function(e){var t=e?e:{};ol.format.JSONFeature.call(this),this.defaultDataProjection=ol.proj.get(t.defaultDataProjection?t.defaultDataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=ol.proj.get(t.featureProjection)),this.geometryName_=t.geometryName},ol.inherits(ol.format.GeoJSON,ol.format.JSONFeature),ol.format.GeoJSON.readGeometry_=function(e,t){if(!e)return null;var o=ol.format.GeoJSON.GEOMETRY_READERS_[e.type];return ol.format.Feature.transformWithOptions(o(e),!1,t)},ol.format.GeoJSON.readGeometryCollectionGeometry_=function(e,t){var o=e.geometries.map(function(e){return ol.format.GeoJSON.readGeometry_(e,t)});return new ol.geom.GeometryCollection(o)},ol.format.GeoJSON.readPointGeometry_=function(e){return new ol.geom.Point(e.coordinates)},ol.format.GeoJSON.readLineStringGeometry_=function(e){return new ol.geom.LineString(e.coordinates)},ol.format.GeoJSON.readMultiLineStringGeometry_=function(e){return new ol.geom.MultiLineString(e.coordinates)},ol.format.GeoJSON.readMultiPointGeometry_=function(e){return new ol.geom.MultiPoint(e.coordinates)},ol.format.GeoJSON.readMultiPolygonGeometry_=function(e){return new ol.geom.MultiPolygon(e.coordinates)},ol.format.GeoJSON.readPolygonGeometry_=function(e){return new ol.geom.Polygon(e.coordinates)},ol.format.GeoJSON.writeGeometry_=function(e,t){var o=ol.format.GeoJSON.GEOMETRY_WRITERS_[e.getType()];return o(ol.format.Feature.transformWithOptions(e,!0,t),t)},ol.format.GeoJSON.writeEmptyGeometryCollectionGeometry_=function(e){return{type:"GeometryCollection",geometries:[]}},ol.format.GeoJSON.writeGeometryCollectionGeometry_=function(e,t){var o=e.getGeometriesArray().map(function(e){var o=ol.obj.assign({},t);return delete o.featureProjection,ol.format.GeoJSON.writeGeometry_(e,o)});return{type:"GeometryCollection",geometries:o}},ol.format.GeoJSON.writeLineStringGeometry_=function(e,t){return{type:"LineString",coordinates:e.getCoordinates()}},ol.format.GeoJSON.writeMultiLineStringGeometry_=function(e,t){return{type:"MultiLineString",coordinates:e.getCoordinates()}},ol.format.GeoJSON.writeMultiPointGeometry_=function(e,t){return{type:"MultiPoint",coordinates:e.getCoordinates()}},ol.format.GeoJSON.writeMultiPolygonGeometry_=function(e,t){var o;return t&&(o=t.rightHanded),{type:"MultiPolygon",coordinates:e.getCoordinates(o)}},ol.format.GeoJSON.writePointGeometry_=function(e,t){return{type:"Point",coordinates:e.getCoordinates()}},ol.format.GeoJSON.writePolygonGeometry_=function(e,t){var o;return t&&(o=t.rightHanded),{type:"Polygon",coordinates:e.getCoordinates(o)}},ol.format.GeoJSON.GEOMETRY_READERS_={Point:ol.format.GeoJSON.readPointGeometry_,LineString:ol.format.GeoJSON.readLineStringGeometry_,Polygon:ol.format.GeoJSON.readPolygonGeometry_,MultiPoint:ol.format.GeoJSON.readMultiPointGeometry_,MultiLineString:ol.format.GeoJSON.readMultiLineStringGeometry_,MultiPolygon:ol.format.GeoJSON.readMultiPolygonGeometry_,GeometryCollection:ol.format.GeoJSON.readGeometryCollectionGeometry_},ol.format.GeoJSON.GEOMETRY_WRITERS_={Point:ol.format.GeoJSON.writePointGeometry_,LineString:ol.format.GeoJSON.writeLineStringGeometry_,
Polygon:ol.format.GeoJSON.writePolygonGeometry_,MultiPoint:ol.format.GeoJSON.writeMultiPointGeometry_,MultiLineString:ol.format.GeoJSON.writeMultiLineStringGeometry_,MultiPolygon:ol.format.GeoJSON.writeMultiPolygonGeometry_,GeometryCollection:ol.format.GeoJSON.writeGeometryCollectionGeometry_,Circle:ol.format.GeoJSON.writeEmptyGeometryCollectionGeometry_},ol.format.GeoJSON.prototype.readFeature,ol.format.GeoJSON.prototype.readFeatures,ol.format.GeoJSON.prototype.readFeatureFromObject=function(e,t){var o=null;o="Feature"===e.type?e:{type:"Feature",geometry:e};var r=ol.format.GeoJSON.readGeometry_(o.geometry,t),i=new ol.Feature;return this.geometryName_&&i.setGeometryName(this.geometryName_),i.setGeometry(r),void 0!==o.id&&i.setId(o.id),o.properties&&i.setProperties(o.properties),i},ol.format.GeoJSON.prototype.readFeaturesFromObject=function(e,t){var o=e,r=null;if("FeatureCollection"===o.type){var i=e;r=[];var n,a,l=i.features;for(n=0,a=l.length;n<a;++n)r.push(this.readFeatureFromObject(l[n],t))}else r=[this.readFeatureFromObject(e,t)];return r},ol.format.GeoJSON.prototype.readGeometry,ol.format.GeoJSON.prototype.readGeometryFromObject=function(e,t){return ol.format.GeoJSON.readGeometry_(e,t)},ol.format.GeoJSON.prototype.readProjection,ol.format.GeoJSON.prototype.readProjectionFromObject=function(e){var t,o=e,r=o.crs;return r?"name"==r.type?t=ol.proj.get(r.properties.name):"EPSG"==r.type?t=ol.proj.get("EPSG:"+r.properties.code):ol.asserts.assert(!1,36):t=this.defaultDataProjection,t},ol.format.GeoJSON.prototype.writeFeature,ol.format.GeoJSON.prototype.writeFeatureObject=function(e,t){t=this.adaptOptions(t);var o={type:"Feature"},r=e.getId();void 0!==r&&(o.id=r);var i=e.getGeometry();i?o.geometry=ol.format.GeoJSON.writeGeometry_(i,t):o.geometry=null;var n=e.getProperties();return delete n[e.getGeometryName()],ol.obj.isEmpty(n)?o.properties=null:o.properties=n,o},ol.format.GeoJSON.prototype.writeFeatures,ol.format.GeoJSON.prototype.writeFeaturesObject=function(e,t){t=this.adaptOptions(t);var o,r,i=[];for(o=0,r=e.length;o<r;++o)i.push(this.writeFeatureObject(e[o],t));return{type:"FeatureCollection",features:i}},ol.format.GeoJSON.prototype.writeGeometry,ol.format.GeoJSON.prototype.writeGeometryObject=function(e,t){return ol.format.GeoJSON.writeGeometry_(e,this.adaptOptions(t))},goog.provide("ol.format.XMLFeature"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.format.Feature"),goog.require("ol.format.FormatType"),goog.require("ol.xml"),ol.format.XMLFeature=function(){this.xmlSerializer_=new XMLSerializer,ol.format.Feature.call(this)},ol.inherits(ol.format.XMLFeature,ol.format.Feature),ol.format.XMLFeature.prototype.getType=function(){return ol.format.FormatType.XML},ol.format.XMLFeature.prototype.readFeature=function(e,t){if(ol.xml.isDocument(e))return this.readFeatureFromDocument(e,t);if(ol.xml.isNode(e))return this.readFeatureFromNode(e,t);if("string"==typeof e){var o=ol.xml.parse(e);return this.readFeatureFromDocument(o,t)}return null},ol.format.XMLFeature.prototype.readFeatureFromDocument=function(e,t){var o=this.readFeaturesFromDocument(e,t);return o.length>0?o[0]:null},ol.format.XMLFeature.prototype.readFeatureFromNode=function(e,t){return null},ol.format.XMLFeature.prototype.readFeatures=function(e,t){if(ol.xml.isDocument(e))return this.readFeaturesFromDocument(e,t);if(ol.xml.isNode(e))return this.readFeaturesFromNode(e,t);if("string"==typeof e){var o=ol.xml.parse(e);return this.readFeaturesFromDocument(o,t)}return[]},ol.format.XMLFeature.prototype.readFeaturesFromDocument=function(e,t){var o,r=[];for(o=e.firstChild;o;o=o.nextSibling)o.nodeType==Node.ELEMENT_NODE&&ol.array.extend(r,this.readFeaturesFromNode(o,t));return r},ol.format.XMLFeature.prototype.readFeaturesFromNode=function(e,t){},ol.format.XMLFeature.prototype.readGeometry=function(e,t){if(ol.xml.isDocument(e))return this.readGeometryFromDocument(e,t);if(ol.xml.isNode(e))return this.readGeometryFromNode(e,t);if("string"==typeof e){var o=ol.xml.parse(e);return this.readGeometryFromDocument(o,t)}return null},ol.format.XMLFeature.prototype.readGeometryFromDocument=function(e,t){return null},ol.format.XMLFeature.prototype.readGeometryFromNode=function(e,t){return null},ol.format.XMLFeature.prototype.readProjection=function(e){if(ol.xml.isDocument(e))return this.readProjectionFromDocument(e);if(ol.xml.isNode(e))return this.readProjectionFromNode(e);if("string"==typeof e){var t=ol.xml.parse(e);return this.readProjectionFromDocument(t)}return null},ol.format.XMLFeature.prototype.readProjectionFromDocument=function(e){return this.defaultDataProjection},ol.format.XMLFeature.prototype.readProjectionFromNode=function(e){return this.defaultDataProjection},ol.format.XMLFeature.prototype.writeFeature=function(e,t){var o=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(o)},ol.format.XMLFeature.prototype.writeFeatureNode=function(e,t){return null},ol.format.XMLFeature.prototype.writeFeatures=function(e,t){var o=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(o)},ol.format.XMLFeature.prototype.writeFeaturesNode=function(e,t){return null},ol.format.XMLFeature.prototype.writeGeometry=function(e,t){var o=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(o)},ol.format.XMLFeature.prototype.writeGeometryNode=function(e,t){return null},goog.provide("ol.format.GMLBase"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.Feature"),goog.require("ol.format.Feature"),goog.require("ol.format.XMLFeature"),goog.require("ol.geom.GeometryLayout"),goog.require("ol.geom.LineString"),goog.require("ol.geom.LinearRing"),goog.require("ol.geom.MultiLineString"),goog.require("ol.geom.MultiPoint"),goog.require("ol.geom.MultiPolygon"),goog.require("ol.geom.Point"),goog.require("ol.geom.Polygon"),goog.require("ol.obj"),goog.require("ol.proj"),goog.require("ol.xml"),ol.format.GMLBase=function(e){var t=e?e:{};this.featureType=t.featureType,this.featureNS=t.featureNS,this.srsName=t.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[ol.format.GMLBase.GMLNS]={featureMember:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readFeaturesInternal),featureMembers:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readFeaturesInternal)},ol.format.XMLFeature.call(this)},ol.inherits(ol.format.GMLBase,ol.format.XMLFeature),ol.format.GMLBase.GMLNS="http://www.opengis.net/gml",ol.format.GMLBase.ONLY_WHITESPACE_RE_=/^[\s\xa0]*$/,ol.format.GMLBase.prototype.readFeaturesInternal=function(e,t){var o=e.localName,r=null;if("FeatureCollection"==o)r="http://www.opengis.net/wfs"===e.namespaceURI?ol.xml.pushParseAndPop([],this.FEATURE_COLLECTION_PARSERS,e,t,this):ol.xml.pushParseAndPop(null,this.FEATURE_COLLECTION_PARSERS,e,t,this);else if("featureMembers"==o||"featureMember"==o){var i,n,a=t[0],l=a.featureType,s=a.featureNS,p="p",g="p0";if(!l&&e.childNodes){for(l=[],s={},i=0,n=e.childNodes.length;i<n;++i){var u=e.childNodes[i];if(1===u.nodeType){var c=u.nodeName.split(":").pop();if(l.indexOf(c)===-1){var y="",h=0,d=u.namespaceURI;for(var f in s){if(s[f]===d){y=f;break}++h}y||(y=p+h,s[y]=d),l.push(y+":"+c)}}}"featureMember"!=o&&(a.featureType=l,a.featureNS=s)}if("string"==typeof s){var m=s;s={},s[g]=m}var v={},_=Array.isArray(l)?l:[l];for(var S in s){var x={};for(i=0,n=_.length;i<n;++i){var E=_[i].indexOf(":")===-1?g:_[i].split(":")[0];E===S&&(x[_[i].split(":").pop()]="featureMembers"==o?ol.xml.makeArrayPusher(this.readFeatureElement,this):ol.xml.makeReplacer(this.readFeatureElement,this))}v[s[S]]=x}r="featureMember"==o?ol.xml.pushParseAndPop(void 0,v,e,t):ol.xml.pushParseAndPop([],v,e,t)}return null===r&&(r=[]),r},ol.format.GMLBase.prototype.readGeometryElement=function(e,t){var o=t[0];o.srsName=e.firstElementChild.getAttribute("srsName");var r=ol.xml.pushParseAndPop(null,this.GEOMETRY_PARSERS_,e,t,this);return r?ol.format.Feature.transformWithOptions(r,!1,o):void 0},ol.format.GMLBase.prototype.readFeatureElement=function(e,t){var o,r,i=e.getAttribute("fid")||ol.xml.getAttributeNS(e,ol.format.GMLBase.GMLNS,"id"),n={};for(o=e.firstElementChild;o;o=o.nextElementSibling){var a=o.localName;if(0===o.childNodes.length||1===o.childNodes.length&&(3===o.firstChild.nodeType||4===o.firstChild.nodeType)){var l=ol.xml.getAllTextContent(o,!1);ol.format.GMLBase.ONLY_WHITESPACE_RE_.test(l)&&(l=void 0),n[a]=l}else"boundedBy"!==a&&(r=a),n[a]=this.readGeometryElement(o,t)}var s=new ol.Feature(n);return r&&s.setGeometryName(r),i&&s.setId(i),s},ol.format.GMLBase.prototype.readPoint=function(e,t){var o=this.readFlatCoordinatesFromNode_(e,t);if(o){var r=new ol.geom.Point(null);return r.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,o),r}},ol.format.GMLBase.prototype.readMultiPoint=function(e,t){var o=ol.xml.pushParseAndPop([],this.MULTIPOINT_PARSERS_,e,t,this);return o?new ol.geom.MultiPoint(o):void 0},ol.format.GMLBase.prototype.readMultiLineString=function(e,t){var o=ol.xml.pushParseAndPop([],this.MULTILINESTRING_PARSERS_,e,t,this);if(o){var r=new ol.geom.MultiLineString(null);return r.setLineStrings(o),r}},ol.format.GMLBase.prototype.readMultiPolygon=function(e,t){var o=ol.xml.pushParseAndPop([],this.MULTIPOLYGON_PARSERS_,e,t,this);if(o){var r=new ol.geom.MultiPolygon(null);return r.setPolygons(o),r}},ol.format.GMLBase.prototype.pointMemberParser_=function(e,t){ol.xml.parseNode(this.POINTMEMBER_PARSERS_,e,t,this)},ol.format.GMLBase.prototype.lineStringMemberParser_=function(e,t){ol.xml.parseNode(this.LINESTRINGMEMBER_PARSERS_,e,t,this)},ol.format.GMLBase.prototype.polygonMemberParser_=function(e,t){ol.xml.parseNode(this.POLYGONMEMBER_PARSERS_,e,t,this)},ol.format.GMLBase.prototype.readLineString=function(e,t){var o=this.readFlatCoordinatesFromNode_(e,t);if(o){var r=new ol.geom.LineString(null);return r.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,o),r}},ol.format.GMLBase.prototype.readFlatLinearRing_=function(e,t){var o=ol.xml.pushParseAndPop(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,e,t,this);return o?o:void 0},ol.format.GMLBase.prototype.readLinearRing=function(e,t){var o=this.readFlatCoordinatesFromNode_(e,t);if(o){var r=new ol.geom.LinearRing(null);return r.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,o),r}},ol.format.GMLBase.prototype.readPolygon=function(e,t){var o=ol.xml.pushParseAndPop([null],this.FLAT_LINEAR_RINGS_PARSERS_,e,t,this);if(o&&o[0]){var r,i,n=new ol.geom.Polygon(null),a=o[0],l=[a.length];for(r=1,i=o.length;r<i;++r)ol.array.extend(a,o[r]),l.push(a.length);return n.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,a,l),n}},ol.format.GMLBase.prototype.readFlatCoordinatesFromNode_=function(e,t){return ol.xml.pushParseAndPop(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS_,e,t,this)},ol.format.GMLBase.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml":{pointMember:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.pointMemberParser_),pointMembers:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.pointMemberParser_)}},ol.format.GMLBase.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml":{lineStringMember:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.lineStringMemberParser_),lineStringMembers:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.lineStringMemberParser_)}},ol.format.GMLBase.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml":{polygonMember:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.polygonMemberParser_),polygonMembers:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.polygonMemberParser_)}},ol.format.GMLBase.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml":{Point:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readFlatCoordinatesFromNode_)}},ol.format.GMLBase.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readLineString)}},ol.format.GMLBase.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readPolygon)}},ol.format.GMLBase.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readFlatLinearRing_)}},ol.format.GMLBase.prototype.readGeometryFromNode=function(e,t){var o=this.readGeometryElement(e,[this.getReadOptions(e,t?t:{})]);return o?o:null},ol.format.GMLBase.prototype.readFeatures,ol.format.GMLBase.prototype.readFeaturesFromNode=function(e,t){var o={featureType:this.featureType,featureNS:this.featureNS};t&&ol.obj.assign(o,this.getReadOptions(e,t));var r=this.readFeaturesInternal(e,[o]);return r||[]},ol.format.GMLBase.prototype.readProjectionFromNode=function(e){return ol.proj.get(this.srsName?this.srsName:e.firstElementChild.getAttribute("srsName"))},goog.provide("ol.format.XSD"),goog.require("ol.xml"),goog.require("ol.string"),ol.format.XSD.NAMESPACE_URI="http://www.w3.org/2001/XMLSchema",ol.format.XSD.readBoolean=function(e){var t=ol.xml.getAllTextContent(e,!1);return ol.format.XSD.readBooleanString(t)},ol.format.XSD.readBooleanString=function(e){var t=/^\s*(true|1)|(false|0)\s*$/.exec(e);return t?void 0!==t[1]||!1:void 0},ol.format.XSD.readDateTime=function(e){var t=ol.xml.getAllTextContent(e,!1),o=Date.parse(t);return isNaN(o)?void 0:o/1e3},ol.format.XSD.readDecimal=function(e){var t=ol.xml.getAllTextContent(e,!1);return ol.format.XSD.readDecimalString(t)},ol.format.XSD.readDecimalString=function(e){var t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);return t?parseFloat(t[1]):void 0},ol.format.XSD.readNonNegativeInteger=function(e){var t=ol.xml.getAllTextContent(e,!1);return ol.format.XSD.readNonNegativeIntegerString(t)},ol.format.XSD.readNonNegativeIntegerString=function(e){var t=/^\s*(\d+)\s*$/.exec(e);return t?parseInt(t[1],10):void 0},ol.format.XSD.readString=function(e){return ol.xml.getAllTextContent(e,!1).trim()},ol.format.XSD.writeBooleanTextNode=function(e,t){ol.format.XSD.writeStringTextNode(e,t?"1":"0")},ol.format.XSD.writeCDATASection=function(e,t){e.appendChild(ol.xml.DOCUMENT.createCDATASection(t))},ol.format.XSD.writeDateTimeTextNode=function(e,t){var o=new Date(1e3*t),r=o.getUTCFullYear()+"-"+ol.string.padNumber(o.getUTCMonth()+1,2)+"-"+ol.string.padNumber(o.getUTCDate(),2)+"T"+ol.string.padNumber(o.getUTCHours(),2)+":"+ol.string.padNumber(o.getUTCMinutes(),2)+":"+ol.string.padNumber(o.getUTCSeconds(),2)+"Z";e.appendChild(ol.xml.DOCUMENT.createTextNode(r))},ol.format.XSD.writeDecimalTextNode=function(e,t){var o=t.toPrecision();e.appendChild(ol.xml.DOCUMENT.createTextNode(o))},ol.format.XSD.writeNonNegativeIntegerTextNode=function(e,t){var o=t.toString();e.appendChild(ol.xml.DOCUMENT.createTextNode(o))},ol.format.XSD.writeStringTextNode=function(e,t){e.appendChild(ol.xml.DOCUMENT.createTextNode(t))},goog.provide("ol.format.GML3"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.extent"),goog.require("ol.format.Feature"),goog.require("ol.format.GMLBase"),goog.require("ol.format.XSD"),goog.require("ol.geom.Geometry"),goog.require("ol.geom.GeometryLayout"),goog.require("ol.geom.LineString"),goog.require("ol.geom.MultiLineString"),goog.require("ol.geom.MultiPolygon"),goog.require("ol.geom.Polygon"),goog.require("ol.obj"),goog.require("ol.proj"),goog.require("ol.xml"),ol.format.GML3=function(e){var t=e?e:{};ol.format.GMLBase.call(this,t),this.surface_=void 0!==t.surface&&t.surface,this.curve_=void 0!==t.curve&&t.curve,this.multiCurve_=void 0===t.multiCurve||t.multiCurve,this.multiSurface_=void 0===t.multiSurface||t.multiSurface,this.schemaLocation=t.schemaLocation?t.schemaLocation:ol.format.GML3.schemaLocation_},ol.inherits(ol.format.GML3,ol.format.GMLBase),ol.format.GML3.schemaLocation_=ol.format.GMLBase.GMLNS+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",ol.format.GML3.prototype.readMultiCurve_=function(e,t){var o=ol.xml.pushParseAndPop([],this.MULTICURVE_PARSERS_,e,t,this);if(o){var r=new ol.geom.MultiLineString(null);return r.setLineStrings(o),r}},ol.format.GML3.prototype.readMultiSurface_=function(e,t){var o=ol.xml.pushParseAndPop([],this.MULTISURFACE_PARSERS_,e,t,this);if(o){var r=new ol.geom.MultiPolygon(null);return r.setPolygons(o),r}},ol.format.GML3.prototype.curveMemberParser_=function(e,t){ol.xml.parseNode(this.CURVEMEMBER_PARSERS_,e,t,this)},ol.format.GML3.prototype.surfaceMemberParser_=function(e,t){ol.xml.parseNode(this.SURFACEMEMBER_PARSERS_,e,t,this)},ol.format.GML3.prototype.readPatch_=function(e,t){return ol.xml.pushParseAndPop([null],this.PATCHES_PARSERS_,e,t,this)},ol.format.GML3.prototype.readSegment_=function(e,t){return ol.xml.pushParseAndPop([null],this.SEGMENTS_PARSERS_,e,t,this)},ol.format.GML3.prototype.readPolygonPatch_=function(e,t){return ol.xml.pushParseAndPop([null],this.FLAT_LINEAR_RINGS_PARSERS_,e,t,this)},ol.format.GML3.prototype.readLineStringSegment_=function(e,t){return ol.xml.pushParseAndPop([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS_,e,t,this)},ol.format.GML3.prototype.interiorParser_=function(e,t){var o=ol.xml.pushParseAndPop(void 0,this.RING_PARSERS,e,t,this);if(o){var r=t[t.length-1];r.push(o)}},ol.format.GML3.prototype.exteriorParser_=function(e,t){var o=ol.xml.pushParseAndPop(void 0,this.RING_PARSERS,e,t,this);if(o){var r=t[t.length-1];r[0]=o}},ol.format.GML3.prototype.readSurface_=function(e,t){var o=ol.xml.pushParseAndPop([null],this.SURFACE_PARSERS_,e,t,this);if(o&&o[0]){var r,i,n=new ol.geom.Polygon(null),a=o[0],l=[a.length];for(r=1,i=o.length;r<i;++r)ol.array.extend(a,o[r]),l.push(a.length);return n.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,a,l),n}},ol.format.GML3.prototype.readCurve_=function(e,t){var o=ol.xml.pushParseAndPop([null],this.CURVE_PARSERS_,e,t,this);if(o){var r=new ol.geom.LineString(null);return r.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,o),r}},ol.format.GML3.prototype.readEnvelope_=function(e,t){var o=ol.xml.pushParseAndPop([null],this.ENVELOPE_PARSERS_,e,t,this);return ol.extent.createOrUpdate(o[1][0],o[1][1],o[2][0],o[2][1])},ol.format.GML3.prototype.readFlatPos_=function(e,t){for(var o,r=ol.xml.getAllTextContent(e,!1),i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,n=[];o=i.exec(r);)n.push(parseFloat(o[1])),r=r.substr(o[0].length);if(""===r){var a=t[0],l=a.srsName,s="enu";if(l){var p=ol.proj.get(l);s=p.getAxisOrientation()}if("neu"===s){var g,u;for(g=0,u=n.length;g<u;g+=3){var c=n[g],y=n[g+1];n[g]=y,n[g+1]=c}}var h=n.length;if(2==h&&n.push(0),0!==h)return n}},ol.format.GML3.prototype.readFlatPosList_=function(e,t){var o=ol.xml.getAllTextContent(e,!1).replace(/^\s*|\s*$/g,""),r=t[0],i=r.srsName,n=e.parentNode.getAttribute("srsDimension"),a="enu";if(i){var l=ol.proj.get(i);a=l.getAxisOrientation()}var s=o.split(/\s+/),p=2;e.getAttribute("srsDimension")?p=ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("srsDimension")):e.getAttribute("dimension")?p=ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("dimension")):n&&(p=ol.format.XSD.readNonNegativeIntegerString(n));for(var g,u,c,y=[],h=0,d=s.length;h<d;h+=p)g=parseFloat(s[h]),u=parseFloat(s[h+1]),c=3===p?parseFloat(s[h+2]):0,"en"===a.substr(0,2)?y.push(g,u,c):y.push(u,g,c);return y},ol.format.GML3.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_={"http://www.opengis.net/gml":{pos:ol.xml.makeReplacer(ol.format.GML3.prototype.readFlatPos_),posList:ol.xml.makeReplacer(ol.format.GML3.prototype.readFlatPosList_)}},ol.format.GML3.prototype.FLAT_LINEAR_RINGS_PARSERS_={"http://www.opengis.net/gml":{interior:ol.format.GML3.prototype.interiorParser_,exterior:ol.format.GML3.prototype.exteriorParser_}},ol.format.GML3.prototype.GEOMETRY_PARSERS_={"http://www.opengis.net/gml":{Point:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPoint),MultiPoint:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPoint),LineString:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLineString),MultiLineString:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiLineString),LinearRing:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLinearRing),Polygon:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPolygon),MultiPolygon:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPolygon),Surface:ol.xml.makeReplacer(ol.format.GML3.prototype.readSurface_),MultiSurface:ol.xml.makeReplacer(ol.format.GML3.prototype.readMultiSurface_),Curve:ol.xml.makeReplacer(ol.format.GML3.prototype.readCurve_),MultiCurve:ol.xml.makeReplacer(ol.format.GML3.prototype.readMultiCurve_),Envelope:ol.xml.makeReplacer(ol.format.GML3.prototype.readEnvelope_)}},ol.format.GML3.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml":{curveMember:ol.xml.makeArrayPusher(ol.format.GML3.prototype.curveMemberParser_),curveMembers:ol.xml.makeArrayPusher(ol.format.GML3.prototype.curveMemberParser_)}},ol.format.GML3.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml":{surfaceMember:ol.xml.makeArrayPusher(ol.format.GML3.prototype.surfaceMemberParser_),surfaceMembers:ol.xml.makeArrayPusher(ol.format.GML3.prototype.surfaceMemberParser_)}},ol.format.GML3.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readLineString),Curve:ol.xml.makeArrayPusher(ol.format.GML3.prototype.readCurve_)}},ol.format.GML3.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readPolygon),Surface:ol.xml.makeArrayPusher(ol.format.GML3.prototype.readSurface_)}},ol.format.GML3.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml":{patches:ol.xml.makeReplacer(ol.format.GML3.prototype.readPatch_)}},ol.format.GML3.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml":{segments:ol.xml.makeReplacer(ol.format.GML3.prototype.readSegment_)}},ol.format.GML3.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml":{lowerCorner:ol.xml.makeArrayPusher(ol.format.GML3.prototype.readFlatPosList_),upperCorner:ol.xml.makeArrayPusher(ol.format.GML3.prototype.readFlatPosList_)}},ol.format.GML3.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml":{PolygonPatch:ol.xml.makeReplacer(ol.format.GML3.prototype.readPolygonPatch_)}},ol.format.GML3.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml":{LineStringSegment:ol.xml.makeReplacer(ol.format.GML3.prototype.readLineStringSegment_)}},ol.format.GML3.prototype.writePos_=function(e,t,o){var r=o[o.length-1],i=r.hasZ,n=r.srsName,a="enu";n&&(a=ol.proj.get(n).getAxisOrientation());var l,s=t.getCoordinates();if(l="en"===a.substr(0,2)?s[0]+" "+s[1]:s[1]+" "+s[0],i){var p=s[2]||0;l+=" "+p}ol.format.XSD.writeStringTextNode(e,l)},ol.format.GML3.prototype.getCoords_=function(e,t,o){var r="enu";t&&(r=ol.proj.get(t).getAxisOrientation());var i="en"===r.substr(0,2)?e[0]+" "+e[1]:e[1]+" "+e[0];if(o){var n=e[2]||0;i+=" "+n}return i},ol.format.GML3.prototype.writePosList_=function(e,t,o){for(var r,i=o[o.length-1],n=i.hasZ,a=i.srsName,l=t.getCoordinates(),s=l.length,p=new Array(s),g=0;g<s;++g)r=l[g],p[g]=this.getCoords_(r,a,n);ol.format.XSD.writeStringTextNode(e,p.join(" "))},ol.format.GML3.prototype.writePoint_=function(e,t,o){var r=o[o.length-1],i=r.srsName;i&&e.setAttribute("srsName",i);var n=ol.xml.createElementNS(e.namespaceURI,"pos");e.appendChild(n),this.writePos_(n,t,o)},ol.format.GML3.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),upperCorner:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)}},ol.format.GML3.prototype.writeEnvelope=function(e,t,o){var r=o[o.length-1],i=r.srsName;i&&e.setAttribute("srsName",i);var n=["lowerCorner","upperCorner"],a=[t[0]+" "+t[1],t[2]+" "+t[3]];ol.xml.pushSerializeAndPop({node:e},ol.format.GML3.ENVELOPE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,a,o,n,this)},ol.format.GML3.prototype.writeLinearRing_=function(e,t,o){var r=o[o.length-1],i=r.srsName;i&&e.setAttribute("srsName",i);var n=ol.xml.createElementNS(e.namespaceURI,"posList");e.appendChild(n),this.writePosList_(n,t,o)},ol.format.GML3.prototype.RING_NODE_FACTORY_=function(e,t,o){var r=t[t.length-1],i=r.node,n=r.exteriorWritten;return void 0===n&&(r.exteriorWritten=!0),ol.xml.createElementNS(i.namespaceURI,void 0!==n?"interior":"exterior")},ol.format.GML3.prototype.writeSurfaceOrPolygon_=function(e,t,o){var r=o[o.length-1],i=r.hasZ,n=r.srsName;if("PolygonPatch"!==e.nodeName&&n&&e.setAttribute("srsName",n),"Polygon"===e.nodeName||"PolygonPatch"===e.nodeName){var a=t.getLinearRings();ol.xml.pushSerializeAndPop({node:e,hasZ:i,srsName:n},ol.format.GML3.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,a,o,void 0,this)}else if("Surface"===e.nodeName){var l=ol.xml.createElementNS(e.namespaceURI,"patches");e.appendChild(l),this.writeSurfacePatches_(l,t,o)}},ol.format.GML3.prototype.writeCurveOrLineString_=function(e,t,o){var r=o[o.length-1],i=r.srsName;if("LineStringSegment"!==e.nodeName&&i&&e.setAttribute("srsName",i),"LineString"===e.nodeName||"LineStringSegment"===e.nodeName){var n=ol.xml.createElementNS(e.namespaceURI,"posList");e.appendChild(n),this.writePosList_(n,t,o)}else if("Curve"===e.nodeName){var a=ol.xml.createElementNS(e.namespaceURI,"segments");e.appendChild(a),this.writeCurveSegments_(a,t,o)}},ol.format.GML3.prototype.writeMultiSurfaceOrPolygon_=function(e,t,o){var r=o[o.length-1],i=r.hasZ,n=r.srsName,a=r.surface;n&&e.setAttribute("srsName",n);var l=t.getPolygons();ol.xml.pushSerializeAndPop({node:e,hasZ:i,srsName:n,surface:a},ol.format.GML3.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,o,void 0,this)},ol.format.GML3.prototype.writeMultiPoint_=function(e,t,o){var r=o[o.length-1],i=r.srsName,n=r.hasZ;i&&e.setAttribute("srsName",i);var a=t.getPoints();ol.xml.pushSerializeAndPop({node:e,hasZ:n,srsName:i},ol.format.GML3.POINTMEMBER_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("pointMember"),a,o,void 0,this)},ol.format.GML3.prototype.writeMultiCurveOrLineString_=function(e,t,o){var r=o[o.length-1],i=r.hasZ,n=r.srsName,a=r.curve;n&&e.setAttribute("srsName",n);var l=t.getLineStrings();ol.xml.pushSerializeAndPop({node:e,hasZ:i,srsName:n,curve:a},ol.format.GML3.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,o,void 0,this)};ol.format.GML3.prototype.writeRing_=function(e,t,o){var r=ol.xml.createElementNS(e.namespaceURI,"LinearRing");e.appendChild(r),this.writeLinearRing_(r,t,o)};ol.format.GML3.prototype.writeSurfaceOrPolygonMember_=function(e,t,o){var r=this.GEOMETRY_NODE_FACTORY_(t,o);r&&(e.appendChild(r),this.writeSurfaceOrPolygon_(r,t,o))},ol.format.GML3.prototype.writePointMember_=function(e,t,o){var r=ol.xml.createElementNS(e.namespaceURI,"Point");e.appendChild(r),this.writePoint_(r,t,o)},ol.format.GML3.prototype.writeLineStringOrCurveMember_=function(e,t,o){var r=this.GEOMETRY_NODE_FACTORY_(t,o);r&&(e.appendChild(r),this.writeCurveOrLineString_(r,t,o))},ol.format.GML3.prototype.writeSurfacePatches_=function(e,t,o){var r=ol.xml.createElementNS(e.namespaceURI,"PolygonPatch");e.appendChild(r),this.writeSurfaceOrPolygon_(r,t,o)},ol.format.GML3.prototype.writeCurveSegments_=function(e,t,o){var r=ol.xml.createElementNS(e.namespaceURI,"LineStringSegment");e.appendChild(r),this.writeCurveOrLineString_(r,t,o)},ol.format.GML3.prototype.writeGeometryElement=function(e,t,o){var r=o[o.length-1],i=ol.obj.assign({},r);i.node=e;var n;n=Array.isArray(t)?r.dataProjection?ol.proj.transformExtent(t,r.featureProjection,r.dataProjection):t:ol.format.Feature.transformWithOptions(t,!0,r),ol.xml.pushSerializeAndPop(i,ol.format.GML3.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[n],o,void 0,this)},ol.format.GML3.prototype.writeFeatureElement=function(e,t,o){var r=t.getId();r&&e.setAttribute("fid",r);var i=o[o.length-1],n=i.featureNS,a=t.getGeometryName();i.serializers||(i.serializers={},i.serializers[n]={});var l=t.getProperties(),s=[],p=[];for(var g in l){var u=l[g];null!==u&&(s.push(g),p.push(u),g==a||u instanceof ol.geom.Geometry?g in i.serializers[n]||(i.serializers[n][g]=ol.xml.makeChildAppender(this.writeGeometryElement,this)):g in i.serializers[n]||(i.serializers[n][g]=ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)))}var c=ol.obj.assign({},i);c.node=e,ol.xml.pushSerializeAndPop(c,i.serializers,ol.xml.makeSimpleNodeFactory(void 0,n),p,o,s)},ol.format.GML3.prototype.writeFeatureMembers_=function(e,t,o){var r=o[o.length-1],i=r.featureType,n=r.featureNS,a={};a[n]={},a[n][i]=ol.xml.makeChildAppender(this.writeFeatureElement,this);var l=ol.obj.assign({},r);l.node=e,ol.xml.pushSerializeAndPop(l,a,ol.xml.makeSimpleNodeFactory(i,n),t,o)},ol.format.GML3.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygonMember_),polygonMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygonMember_)}},ol.format.GML3.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writePointMember_)}},ol.format.GML3.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeLineStringOrCurveMember_),curveMember:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeLineStringOrCurveMember_)}},ol.format.GML3.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeRing_),interior:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeRing_)}},ol.format.GML3.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeCurveOrLineString_),MultiCurve:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiCurveOrLineString_),Point:ol.xml.makeChildAppender(ol.format.GML3.prototype.writePoint_),MultiPoint:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiPoint_),LineString:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeCurveOrLineString_),MultiLineString:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiCurveOrLineString_),LinearRing:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeLinearRing_),Polygon:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygon_),MultiPolygon:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiSurfaceOrPolygon_),Surface:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeSurfaceOrPolygon_),MultiSurface:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeMultiSurfaceOrPolygon_),Envelope:ol.xml.makeChildAppender(ol.format.GML3.prototype.writeEnvelope)}},ol.format.GML3.MULTIGEOMETRY_TO_MEMBER_NODENAME_={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},ol.format.GML3.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(e,t,o){var r=t[t.length-1].node;return ol.xml.createElementNS("http://www.opengis.net/gml",ol.format.GML3.MULTIGEOMETRY_TO_MEMBER_NODENAME_[r.nodeName])},ol.format.GML3.prototype.GEOMETRY_NODE_FACTORY_=function(e,t,o){var r,i=t[t.length-1],n=i.multiSurface,a=i.surface,l=i.curve,s=i.multiCurve;return Array.isArray(e)?r="Envelope":(r=e.getType(),"MultiPolygon"===r&&n===!0?r="MultiSurface":"Polygon"===r&&a===!0?r="Surface":"LineString"===r&&l===!0?r="Curve":"MultiLineString"===r&&s===!0&&(r="MultiCurve")),ol.xml.createElementNS("http://www.opengis.net/gml",r)},ol.format.GML3.prototype.writeGeometryNode=function(e,t){t=this.adaptOptions(t);var o=ol.xml.createElementNS("http://www.opengis.net/gml","geom"),r={node:o,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return t&&ol.obj.assign(r,t),this.writeGeometryElement(o,e,[r]),o},ol.format.GML3.prototype.writeFeatures,ol.format.GML3.prototype.writeFeaturesNode=function(e,t){t=this.adaptOptions(t);var o=ol.xml.createElementNS("http://www.opengis.net/gml","featureMembers");ol.xml.setAttributeNS(o,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation);var r={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,
featureNS:this.featureNS,featureType:this.featureType};return t&&ol.obj.assign(r,t),this.writeFeatureMembers_(o,e,[r]),o},goog.provide("ol.format.GML"),goog.require("ol.format.GML3"),ol.format.GML=ol.format.GML3,ol.format.GML.prototype.writeFeatures,ol.format.GML.prototype.writeFeaturesNode,goog.provide("ol.format.GML2"),goog.require("ol"),goog.require("ol.extent"),goog.require("ol.format.Feature"),goog.require("ol.format.GMLBase"),goog.require("ol.format.XSD"),goog.require("ol.geom.Geometry"),goog.require("ol.obj"),goog.require("ol.proj"),goog.require("ol.xml"),ol.format.GML2=function(e){var t=e?e:{};ol.format.GMLBase.call(this,t),this.FEATURE_COLLECTION_PARSERS[ol.format.GMLBase.GMLNS].featureMember=ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readFeaturesInternal),this.schemaLocation=t.schemaLocation?t.schemaLocation:ol.format.GML2.schemaLocation_},ol.inherits(ol.format.GML2,ol.format.GMLBase),ol.format.GML2.schemaLocation_=ol.format.GMLBase.GMLNS+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",ol.format.GML2.prototype.readFlatCoordinates_=function(e,t){var o=ol.xml.getAllTextContent(e,!1).replace(/^\s*|\s*$/g,""),r=t[0],i=r.srsName,n="enu";if(i){var a=ol.proj.get(i);a&&(n=a.getAxisOrientation())}for(var l,s,p,g=o.trim().split(/\s+/),u=[],c=0,y=g.length;c<y;c++){var h=g[c].split(/,+/);l=parseFloat(h[0]),s=parseFloat(h[1]),p=3===h.length?parseFloat(h[2]):0,"en"===n.substr(0,2)?u.push(l,s,p):u.push(s,l,p)}return u},ol.format.GML2.prototype.readBox_=function(e,t){var o=ol.xml.pushParseAndPop([null],this.BOX_PARSERS_,e,t,this);return ol.extent.createOrUpdate(o[1][0],o[1][1],o[1][3],o[1][4])},ol.format.GML2.prototype.innerBoundaryIsParser_=function(e,t){var o=ol.xml.pushParseAndPop(void 0,this.RING_PARSERS,e,t,this);if(o){var r=t[t.length-1];r.push(o)}},ol.format.GML2.prototype.outerBoundaryIsParser_=function(e,t){var o=ol.xml.pushParseAndPop(void 0,this.RING_PARSERS,e,t,this);if(o){var r=t[t.length-1];r[0]=o}},ol.format.GML2.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS_={"http://www.opengis.net/gml":{coordinates:ol.xml.makeReplacer(ol.format.GML2.prototype.readFlatCoordinates_)}},ol.format.GML2.prototype.FLAT_LINEAR_RINGS_PARSERS_={"http://www.opengis.net/gml":{innerBoundaryIs:ol.format.GML2.prototype.innerBoundaryIsParser_,outerBoundaryIs:ol.format.GML2.prototype.outerBoundaryIsParser_}},ol.format.GML2.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:ol.xml.makeArrayPusher(ol.format.GML2.prototype.readFlatCoordinates_)}},ol.format.GML2.prototype.GEOMETRY_PARSERS_={"http://www.opengis.net/gml":{Point:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPoint),MultiPoint:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPoint),LineString:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLineString),MultiLineString:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiLineString),LinearRing:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readLinearRing),Polygon:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readPolygon),MultiPolygon:ol.xml.makeReplacer(ol.format.GMLBase.prototype.readMultiPolygon),Box:ol.xml.makeReplacer(ol.format.GML2.prototype.readBox_)}},ol.format.GML2.prototype.GEOMETRY_NODE_FACTORY_=function(e,t,o){var r,i=t[t.length-1],n=i.multiSurface,a=i.surface,l=i.multiCurve;return Array.isArray(e)?r="Envelope":(r=e.getType(),"MultiPolygon"===r&&n===!0?r="MultiSurface":"Polygon"===r&&a===!0?r="Surface":"MultiLineString"===r&&l===!0&&(r="MultiCurve")),ol.xml.createElementNS("http://www.opengis.net/gml",r)},ol.format.GML2.prototype.writeFeatureElement=function(e,t,o){var r=t.getId();r&&e.setAttribute("fid",r);var i=o[o.length-1],n=i.featureNS,a=t.getGeometryName();i.serializers||(i.serializers={},i.serializers[n]={});var l=t.getProperties(),s=[],p=[];for(var g in l){var u=l[g];null!==u&&(s.push(g),p.push(u),g==a||u instanceof ol.geom.Geometry?g in i.serializers[n]||(i.serializers[n][g]=ol.xml.makeChildAppender(this.writeGeometryElement,this)):g in i.serializers[n]||(i.serializers[n][g]=ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)))}var c=ol.obj.assign({},i);c.node=e,ol.xml.pushSerializeAndPop(c,i.serializers,ol.xml.makeSimpleNodeFactory(void 0,n),p,o,s)},ol.format.GML2.prototype.writeGeometryElement=function(e,t,o){var r=o[o.length-1],i=ol.obj.assign({},r);i.node=e;var n;n=Array.isArray(t)?r.dataProjection?ol.proj.transformExtent(t,r.featureProjection,r.dataProjection):t:ol.format.Feature.transformWithOptions(t,!0,r),ol.xml.pushSerializeAndPop(i,ol.format.GML2.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[n],o,void 0,this)},ol.format.GML2.prototype.writeCurveOrLineString_=function(e,t,o){var r=o[o.length-1],i=r.srsName;if("LineStringSegment"!==e.nodeName&&i&&e.setAttribute("srsName",i),"LineString"===e.nodeName||"LineStringSegment"===e.nodeName){var n=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(n),this.writeCoordinates_(n,t,o)}else if("Curve"===e.nodeName){var a=ol.xml.createElementNS(e.namespaceURI,"segments");e.appendChild(a),this.writeCurveSegments_(a,t,o)}},ol.format.GML2.prototype.createCoordinatesNode_=function(e){var t=ol.xml.createElementNS(e,"coordinates");return t.setAttribute("decimal","."),t.setAttribute("cs",","),t.setAttribute("ts"," "),t},ol.format.GML2.prototype.writeCoordinates_=function(e,t,o){for(var r,i=o[o.length-1],n=i.hasZ,a=i.srsName,l=t.getCoordinates(),s=l.length,p=new Array(s),g=0;g<s;++g)r=l[g],p[g]=this.getCoords_(r,a,n);ol.format.XSD.writeStringTextNode(e,p.join(" "))},ol.format.GML2.prototype.writeCurveSegments_=function(e,t,o){var r=ol.xml.createElementNS(e.namespaceURI,"LineStringSegment");e.appendChild(r),this.writeCurveOrLineString_(r,t,o)},ol.format.GML2.prototype.writeSurfaceOrPolygon_=function(e,t,o){var r=o[o.length-1],i=r.hasZ,n=r.srsName;if("PolygonPatch"!==e.nodeName&&n&&e.setAttribute("srsName",n),"Polygon"===e.nodeName||"PolygonPatch"===e.nodeName){var a=t.getLinearRings();ol.xml.pushSerializeAndPop({node:e,hasZ:i,srsName:n},ol.format.GML2.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,a,o,void 0,this)}else if("Surface"===e.nodeName){var l=ol.xml.createElementNS(e.namespaceURI,"patches");e.appendChild(l),this.writeSurfacePatches_(l,t,o)}},ol.format.GML2.prototype.RING_NODE_FACTORY_=function(e,t,o){var r=t[t.length-1],i=r.node,n=r.exteriorWritten;return void 0===n&&(r.exteriorWritten=!0),ol.xml.createElementNS(i.namespaceURI,void 0!==n?"innerBoundaryIs":"outerBoundaryIs")},ol.format.GML2.prototype.writeSurfacePatches_=function(e,t,o){var r=ol.xml.createElementNS(e.namespaceURI,"PolygonPatch");e.appendChild(r),this.writeSurfaceOrPolygon_(r,t,o)},ol.format.GML2.prototype.writeRing_=function(e,t,o){var r=ol.xml.createElementNS(e.namespaceURI,"LinearRing");e.appendChild(r),this.writeLinearRing_(r,t,o)},ol.format.GML2.prototype.getCoords_=function(e,t,o){var r="enu";t&&(r=ol.proj.get(t).getAxisOrientation());var i="en"===r.substr(0,2)?e[0]+","+e[1]:e[1]+","+e[0];if(o){var n=e[2]||0;i+=","+n}return i},ol.format.GML2.prototype.writeMultiCurveOrLineString_=function(e,t,o){var r=o[o.length-1],i=r.hasZ,n=r.srsName,a=r.curve;n&&e.setAttribute("srsName",n);var l=t.getLineStrings();ol.xml.pushSerializeAndPop({node:e,hasZ:i,srsName:n,curve:a},ol.format.GML2.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,o,void 0,this)},ol.format.GML2.prototype.writePoint_=function(e,t,o){var r=o[o.length-1],i=r.hasZ,n=r.srsName;n&&e.setAttribute("srsName",n);var a=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(a);var l=t.getCoordinates(),s=this.getCoords_(l,n,i);ol.format.XSD.writeStringTextNode(a,s)},ol.format.GML2.prototype.writeMultiPoint_=function(e,t,o){var r=o[o.length-1],i=r.hasZ,n=r.srsName;n&&e.setAttribute("srsName",n);var a=t.getPoints();ol.xml.pushSerializeAndPop({node:e,hasZ:i,srsName:n},ol.format.GML2.POINTMEMBER_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("pointMember"),a,o,void 0,this)},ol.format.GML2.prototype.writePointMember_=function(e,t,o){var r=ol.xml.createElementNS(e.namespaceURI,"Point");e.appendChild(r),this.writePoint_(r,t,o)},ol.format.GML2.prototype.writeLineStringOrCurveMember_=function(e,t,o){var r=this.GEOMETRY_NODE_FACTORY_(t,o);r&&(e.appendChild(r),this.writeCurveOrLineString_(r,t,o))},ol.format.GML2.prototype.writeLinearRing_=function(e,t,o){var r=o[o.length-1],i=r.srsName;i&&e.setAttribute("srsName",i);var n=this.createCoordinatesNode_(e.namespaceURI);e.appendChild(n),this.writeCoordinates_(n,t,o)},ol.format.GML2.prototype.writeMultiSurfaceOrPolygon_=function(e,t,o){var r=o[o.length-1],i=r.hasZ,n=r.srsName,a=r.surface;n&&e.setAttribute("srsName",n);var l=t.getPolygons();ol.xml.pushSerializeAndPop({node:e,hasZ:i,srsName:n,surface:a},ol.format.GML2.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,o,void 0,this)},ol.format.GML2.prototype.writeSurfaceOrPolygonMember_=function(e,t,o){var r=this.GEOMETRY_NODE_FACTORY_(t,o);r&&(e.appendChild(r),this.writeSurfaceOrPolygon_(r,t,o))},ol.format.GML2.prototype.writeEnvelope=function(e,t,o){var r=o[o.length-1],i=r.srsName;i&&e.setAttribute("srsName",i);var n=["lowerCorner","upperCorner"],a=[t[0]+" "+t[1],t[2]+" "+t[3]];ol.xml.pushSerializeAndPop({node:e},ol.format.GML2.ENVELOPE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,a,o,n,this)},ol.format.GML2.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:ol.xml.makeChildAppender(ol.format.GML2.prototype.writeCurveOrLineString_),MultiCurve:ol.xml.makeChildAppender(ol.format.GML2.prototype.writeMultiCurveOrLineString_),Point:ol.xml.makeChildAppender(ol.format.GML2.prototype.writePoint_),MultiPoint:ol.xml.makeChildAppender(ol.format.GML2.prototype.writeMultiPoint_),LineString:ol.xml.makeChildAppender(ol.format.GML2.prototype.writeCurveOrLineString_),MultiLineString:ol.xml.makeChildAppender(ol.format.GML2.prototype.writeMultiCurveOrLineString_),LinearRing:ol.xml.makeChildAppender(ol.format.GML2.prototype.writeLinearRing_),Polygon:ol.xml.makeChildAppender(ol.format.GML2.prototype.writeSurfaceOrPolygon_),MultiPolygon:ol.xml.makeChildAppender(ol.format.GML2.prototype.writeMultiSurfaceOrPolygon_),Surface:ol.xml.makeChildAppender(ol.format.GML2.prototype.writeSurfaceOrPolygon_),MultiSurface:ol.xml.makeChildAppender(ol.format.GML2.prototype.writeMultiSurfaceOrPolygon_),Envelope:ol.xml.makeChildAppender(ol.format.GML2.prototype.writeEnvelope)}},ol.format.GML2.RING_SERIALIZERS_={"http://www.opengis.net/gml":{outerBoundaryIs:ol.xml.makeChildAppender(ol.format.GML2.prototype.writeRing_),innerBoundaryIs:ol.xml.makeChildAppender(ol.format.GML2.prototype.writeRing_)}},ol.format.GML2.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:ol.xml.makeChildAppender(ol.format.GML2.prototype.writePointMember_)}},ol.format.GML2.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:ol.xml.makeChildAppender(ol.format.GML2.prototype.writeLineStringOrCurveMember_),curveMember:ol.xml.makeChildAppender(ol.format.GML2.prototype.writeLineStringOrCurveMember_)}},ol.format.GML2.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(e,t,o){var r=t[t.length-1].node;return ol.xml.createElementNS("http://www.opengis.net/gml",ol.format.GML2.MULTIGEOMETRY_TO_MEMBER_NODENAME_[r.nodeName])},ol.format.GML2.MULTIGEOMETRY_TO_MEMBER_NODENAME_={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},ol.format.GML2.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:ol.xml.makeChildAppender(ol.format.GML2.prototype.writeSurfaceOrPolygonMember_),polygonMember:ol.xml.makeChildAppender(ol.format.GML2.prototype.writeSurfaceOrPolygonMember_)}},ol.format.GML2.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),upperCorner:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)}},goog.provide("ol.format.GPX"),goog.require("ol"),goog.require("ol.Feature"),goog.require("ol.array"),goog.require("ol.format.Feature"),goog.require("ol.format.XMLFeature"),goog.require("ol.format.XSD"),goog.require("ol.geom.GeometryLayout"),goog.require("ol.geom.LineString"),goog.require("ol.geom.MultiLineString"),goog.require("ol.geom.Point"),goog.require("ol.proj"),goog.require("ol.xml"),ol.format.GPX=function(e){var t=e?e:{};ol.format.XMLFeature.call(this),this.defaultDataProjection=ol.proj.get("EPSG:4326"),this.readExtensions_=t.readExtensions},ol.inherits(ol.format.GPX,ol.format.XMLFeature),ol.format.GPX.NAMESPACE_URIS_=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],ol.format.GPX.SCHEMA_LOCATION_="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",ol.format.GPX.appendCoordinate_=function(e,t,o,r){return e.push(parseFloat(o.getAttribute("lon")),parseFloat(o.getAttribute("lat"))),"ele"in r?(e.push(r.ele),delete r.ele,t.hasZ=!0):e.push(0),"time"in r?(e.push(r.time),delete r.time,t.hasM=!0):e.push(0),e},ol.format.GPX.applyLayoutOptions_=function(e,t,o){var r=ol.geom.GeometryLayout.XY,i=2;if(e.hasZ&&e.hasM?(r=ol.geom.GeometryLayout.XYZM,i=4):e.hasZ?(r=ol.geom.GeometryLayout.XYZ,i=3):e.hasM&&(r=ol.geom.GeometryLayout.XYM,i=3),4!==i){var n,a;for(n=0,a=t.length/4;n<a;n++)t[n*i]=t[4*n],t[n*i+1]=t[4*n+1],e.hasZ&&(t[n*i+2]=t[4*n+2]),e.hasM&&(t[n*i+2]=t[4*n+3]);if(t.length=t.length/4*i,o)for(n=0,a=o.length;n<a;n++)o[n]=o[n]/4*i}return r},ol.format.GPX.parseLink_=function(e,t){var o=t[t.length-1],r=e.getAttribute("href");null!==r&&(o.link=r),ol.xml.parseNode(ol.format.GPX.LINK_PARSERS_,e,t)},ol.format.GPX.parseExtensions_=function(e,t){var o=t[t.length-1];o.extensionsNode_=e},ol.format.GPX.parseRtePt_=function(e,t){var o=ol.xml.pushParseAndPop({},ol.format.GPX.RTEPT_PARSERS_,e,t);if(o){var r=t[t.length-1],i=r.flatCoordinates,n=r.layoutOptions;ol.format.GPX.appendCoordinate_(i,n,e,o)}},ol.format.GPX.parseTrkPt_=function(e,t){var o=ol.xml.pushParseAndPop({},ol.format.GPX.TRKPT_PARSERS_,e,t);if(o){var r=t[t.length-1],i=r.flatCoordinates,n=r.layoutOptions;ol.format.GPX.appendCoordinate_(i,n,e,o)}},ol.format.GPX.parseTrkSeg_=function(e,t){var o=t[t.length-1];ol.xml.parseNode(ol.format.GPX.TRKSEG_PARSERS_,e,t);var r=o.flatCoordinates,i=o.ends;i.push(r.length)},ol.format.GPX.readRte_=function(e,t){var o=t[0],r=ol.xml.pushParseAndPop({flatCoordinates:[],layoutOptions:{}},ol.format.GPX.RTE_PARSERS_,e,t);if(r){var i=r.flatCoordinates;delete r.flatCoordinates;var n=r.layoutOptions;delete r.layoutOptions;var a=ol.format.GPX.applyLayoutOptions_(n,i),l=new ol.geom.LineString(null);l.setFlatCoordinates(a,i),ol.format.Feature.transformWithOptions(l,!1,o);var s=new ol.Feature(l);return s.setProperties(r),s}},ol.format.GPX.readTrk_=function(e,t){var o=t[0],r=ol.xml.pushParseAndPop({flatCoordinates:[],ends:[],layoutOptions:{}},ol.format.GPX.TRK_PARSERS_,e,t);if(r){var i=r.flatCoordinates;delete r.flatCoordinates;var n=r.ends;delete r.ends;var a=r.layoutOptions;delete r.layoutOptions;var l=ol.format.GPX.applyLayoutOptions_(a,i,n),s=new ol.geom.MultiLineString(null);s.setFlatCoordinates(l,i,n),ol.format.Feature.transformWithOptions(s,!1,o);var p=new ol.Feature(s);return p.setProperties(r),p}},ol.format.GPX.readWpt_=function(e,t){var o=t[0],r=ol.xml.pushParseAndPop({},ol.format.GPX.WPT_PARSERS_,e,t);if(r){var i={},n=ol.format.GPX.appendCoordinate_([],i,e,r),a=ol.format.GPX.applyLayoutOptions_(i,n),l=new ol.geom.Point(n,a);ol.format.Feature.transformWithOptions(l,!1,o);var s=new ol.Feature(l);return s.setProperties(r),s}},ol.format.GPX.FEATURE_READER_={rte:ol.format.GPX.readRte_,trk:ol.format.GPX.readTrk_,wpt:ol.format.GPX.readWpt_},ol.format.GPX.GPX_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{rte:ol.xml.makeArrayPusher(ol.format.GPX.readRte_),trk:ol.xml.makeArrayPusher(ol.format.GPX.readTrk_),wpt:ol.xml.makeArrayPusher(ol.format.GPX.readWpt_)}),ol.format.GPX.LINK_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{text:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString,"linkText"),type:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString,"linkType")}),ol.format.GPX.RTE_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),cmt:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),desc:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),src:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),link:ol.format.GPX.parseLink_,number:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),extensions:ol.format.GPX.parseExtensions_,type:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),rtept:ol.format.GPX.parseRtePt_}),ol.format.GPX.RTEPT_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{ele:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),time:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDateTime)}),ol.format.GPX.TRK_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),cmt:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),desc:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),src:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),link:ol.format.GPX.parseLink_,number:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),type:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),extensions:ol.format.GPX.parseExtensions_,trkseg:ol.format.GPX.parseTrkSeg_}),ol.format.GPX.TRKSEG_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{trkpt:ol.format.GPX.parseTrkPt_}),ol.format.GPX.TRKPT_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{ele:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),time:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDateTime)}),ol.format.GPX.WPT_PARSERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{ele:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),time:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDateTime),magvar:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),geoidheight:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),cmt:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),desc:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),src:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),link:ol.format.GPX.parseLink_,sym:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),type:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),fix:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),sat:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),hdop:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),vdop:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),pdop:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),ageofdgpsdata:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),dgpsid:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),extensions:ol.format.GPX.parseExtensions_}),ol.format.GPX.prototype.handleReadExtensions_=function(e){e||(e=[]);for(var t=0,o=e.length;t<o;++t){var r=e[t];if(this.readExtensions_){var i=r.get("extensionsNode_")||null;this.readExtensions_(r,i)}r.set("extensionsNode_",void 0)}},ol.format.GPX.prototype.readFeature,ol.format.GPX.prototype.readFeatureFromNode=function(e,t){if(!ol.array.includes(ol.format.GPX.NAMESPACE_URIS_,e.namespaceURI))return null;var o=ol.format.GPX.FEATURE_READER_[e.localName];if(!o)return null;var r=o(e,[this.getReadOptions(e,t)]);return r?(this.handleReadExtensions_([r]),r):null},ol.format.GPX.prototype.readFeatures,ol.format.GPX.prototype.readFeaturesFromNode=function(e,t){if(!ol.array.includes(ol.format.GPX.NAMESPACE_URIS_,e.namespaceURI))return[];if("gpx"==e.localName){var o=ol.xml.pushParseAndPop([],ol.format.GPX.GPX_PARSERS_,e,[this.getReadOptions(e,t)]);return o?(this.handleReadExtensions_(o),o):[]}return[]},ol.format.GPX.prototype.readProjection,ol.format.GPX.writeLink_=function(e,t,o){e.setAttribute("href",t);var r=o[o.length-1],i=r.properties,n=[i.linkText,i.linkType];ol.xml.pushSerializeAndPop({node:e},ol.format.GPX.LINK_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,n,o,ol.format.GPX.LINK_SEQUENCE_)},ol.format.GPX.writeWptType_=function(e,t,o){var r=o[o.length-1],i=r.node,n=i.namespaceURI,a=r.properties;ol.xml.setAttributeNS(e,null,"lat",t[1]),ol.xml.setAttributeNS(e,null,"lon",t[0]);var l=r.geometryLayout;switch(l){case ol.geom.GeometryLayout.XYZM:0!==t[3]&&(a.time=t[3]);case ol.geom.GeometryLayout.XYZ:0!==t[2]&&(a.ele=t[2]);break;case ol.geom.GeometryLayout.XYM:0!==t[2]&&(a.time=t[2])}var s="rtept"==e.nodeName?ol.format.GPX.RTEPT_TYPE_SEQUENCE_[n]:ol.format.GPX.WPT_TYPE_SEQUENCE_[n],p=ol.xml.makeSequence(a,s);ol.xml.pushSerializeAndPop({node:e,properties:a},ol.format.GPX.WPT_TYPE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,p,o,s)},ol.format.GPX.writeRte_=function(e,t,o){var r=o[0],i=t.getProperties(),n={node:e,properties:i},a=t.getGeometry();a&&(a=ol.format.Feature.transformWithOptions(a,!0,r),n.geometryLayout=a.getLayout(),i.rtept=a.getCoordinates());var l=o[o.length-1].node,s=ol.format.GPX.RTE_SEQUENCE_[l.namespaceURI],p=ol.xml.makeSequence(i,s);ol.xml.pushSerializeAndPop(n,ol.format.GPX.RTE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,p,o,s)},ol.format.GPX.writeTrk_=function(e,t,o){var r=o[0],i=t.getProperties(),n={node:e,properties:i},a=t.getGeometry();a&&(a=ol.format.Feature.transformWithOptions(a,!0,r),i.trkseg=a.getLineStrings());var l=o[o.length-1].node,s=ol.format.GPX.TRK_SEQUENCE_[l.namespaceURI],p=ol.xml.makeSequence(i,s);ol.xml.pushSerializeAndPop(n,ol.format.GPX.TRK_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,p,o,s)},ol.format.GPX.writeTrkSeg_=function(e,t,o){var r={node:e,geometryLayout:t.getLayout(),properties:{}};ol.xml.pushSerializeAndPop(r,ol.format.GPX.TRKSEG_SERIALIZERS_,ol.format.GPX.TRKSEG_NODE_FACTORY_,t.getCoordinates(),o)},ol.format.GPX.writeWpt_=function(e,t,o){var r=o[0],i=o[o.length-1];i.properties=t.getProperties();var n=t.getGeometry();n&&(n=ol.format.Feature.transformWithOptions(n,!0,r),i.geometryLayout=n.getLayout(),ol.format.GPX.writeWptType_(e,n.getCoordinates(),o))},ol.format.GPX.LINK_SEQUENCE_=["text","type"],ol.format.GPX.LINK_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{text:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),type:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)}),ol.format.GPX.RTE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,["name","cmt","desc","src","link","number","type","rtept"]),ol.format.GPX.RTE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{name:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),cmt:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),desc:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),src:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),link:ol.xml.makeChildAppender(ol.format.GPX.writeLink_),number:ol.xml.makeChildAppender(ol.format.XSD.writeNonNegativeIntegerTextNode),type:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),rtept:ol.xml.makeArraySerializer(ol.xml.makeChildAppender(ol.format.GPX.writeWptType_))}),ol.format.GPX.RTEPT_TYPE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,["ele","time"]),ol.format.GPX.TRK_SEQUENCE_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,["name","cmt","desc","src","link","number","type","trkseg"]),ol.format.GPX.TRK_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{name:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),cmt:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),desc:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),src:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),link:ol.xml.makeChildAppender(ol.format.GPX.writeLink_),number:ol.xml.makeChildAppender(ol.format.XSD.writeNonNegativeIntegerTextNode),type:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),trkseg:ol.xml.makeArraySerializer(ol.xml.makeChildAppender(ol.format.GPX.writeTrkSeg_))}),ol.format.GPX.TRKSEG_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("trkpt"),ol.format.GPX.TRKSEG_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{trkpt:ol.xml.makeChildAppender(ol.format.GPX.writeWptType_)}),ol.format.GPX.WPT_TYPE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),ol.format.GPX.WPT_TYPE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{ele:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),time:ol.xml.makeChildAppender(ol.format.XSD.writeDateTimeTextNode),magvar:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),geoidheight:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),name:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),cmt:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),desc:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),src:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),link:ol.xml.makeChildAppender(ol.format.GPX.writeLink_),sym:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),type:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),fix:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),sat:ol.xml.makeChildAppender(ol.format.XSD.writeNonNegativeIntegerTextNode),hdop:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),vdop:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),pdop:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),ageofdgpsdata:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),dgpsid:ol.xml.makeChildAppender(ol.format.XSD.writeNonNegativeIntegerTextNode)}),ol.format.GPX.GEOMETRY_TYPE_TO_NODENAME_={Point:"wpt",LineString:"rte",MultiLineString:"trk"},ol.format.GPX.GPX_NODE_FACTORY_=function(e,t,o){var r=e.getGeometry();if(r){var i=ol.format.GPX.GEOMETRY_TYPE_TO_NODENAME_[r.getType()];if(i){var n=t[t.length-1].node;return ol.xml.createElementNS(n.namespaceURI,i)}}},ol.format.GPX.GPX_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.GPX.NAMESPACE_URIS_,{rte:ol.xml.makeChildAppender(ol.format.GPX.writeRte_),trk:ol.xml.makeChildAppender(ol.format.GPX.writeTrk_),wpt:ol.xml.makeChildAppender(ol.format.GPX.writeWpt_)}),ol.format.GPX.prototype.writeFeatures,ol.format.GPX.prototype.writeFeaturesNode=function(e,t){t=this.adaptOptions(t);var o=ol.xml.createElementNS("http://www.topografix.com/GPX/1/1","gpx"),r="http://www.w3.org/2000/xmlns/",i="http://www.w3.org/2001/XMLSchema-instance";return ol.xml.setAttributeNS(o,r,"xmlns:xsi",i),ol.xml.setAttributeNS(o,i,"xsi:schemaLocation",ol.format.GPX.SCHEMA_LOCATION_),o.setAttribute("version","1.1"),o.setAttribute("creator","OpenLayers"),ol.xml.pushSerializeAndPop({node:o},ol.format.GPX.GPX_SERIALIZERS_,ol.format.GPX.GPX_NODE_FACTORY_,e,[t]),o},goog.provide("ol.format.IGCZ"),ol.format.IGCZ={BAROMETRIC:"barometric",GPS:"gps",NONE:"none"},goog.provide("ol.format.TextFeature"),goog.require("ol"),goog.require("ol.format.Feature"),goog.require("ol.format.FormatType"),ol.format.TextFeature=function(){ol.format.Feature.call(this)},ol.inherits(ol.format.TextFeature,ol.format.Feature),ol.format.TextFeature.prototype.getText_=function(e){return"string"==typeof e?e:""},ol.format.TextFeature.prototype.getType=function(){return ol.format.FormatType.TEXT},ol.format.TextFeature.prototype.readFeature=function(e,t){return this.readFeatureFromText(this.getText_(e),this.adaptOptions(t))},ol.format.TextFeature.prototype.readFeatureFromText=function(e,t){},ol.format.TextFeature.prototype.readFeatures=function(e,t){return this.readFeaturesFromText(this.getText_(e),this.adaptOptions(t))},ol.format.TextFeature.prototype.readFeaturesFromText=function(e,t){},ol.format.TextFeature.prototype.readGeometry=function(e,t){return this.readGeometryFromText(this.getText_(e),this.adaptOptions(t))},ol.format.TextFeature.prototype.readGeometryFromText=function(e,t){},ol.format.TextFeature.prototype.readProjection=function(e){return this.readProjectionFromText(this.getText_(e))},ol.format.TextFeature.prototype.readProjectionFromText=function(e){return this.defaultDataProjection},ol.format.TextFeature.prototype.writeFeature=function(e,t){return this.writeFeatureText(e,this.adaptOptions(t))},ol.format.TextFeature.prototype.writeFeatureText=function(e,t){},ol.format.TextFeature.prototype.writeFeatures=function(e,t){return this.writeFeaturesText(e,this.adaptOptions(t))},ol.format.TextFeature.prototype.writeFeaturesText=function(e,t){},ol.format.TextFeature.prototype.writeGeometry=function(e,t){return this.writeGeometryText(e,this.adaptOptions(t))},ol.format.TextFeature.prototype.writeGeometryText=function(e,t){},goog.provide("ol.format.IGC"),goog.require("ol"),goog.require("ol.Feature"),goog.require("ol.format.Feature"),goog.require("ol.format.IGCZ"),goog.require("ol.format.TextFeature"),goog.require("ol.geom.GeometryLayout"),goog.require("ol.geom.LineString"),goog.require("ol.proj"),ol.format.IGC=function(e){var t=e?e:{};ol.format.TextFeature.call(this),this.defaultDataProjection=ol.proj.get("EPSG:4326"),this.altitudeMode_=t.altitudeMode?t.altitudeMode:ol.format.IGCZ.NONE},ol.inherits(ol.format.IGC,ol.format.TextFeature),ol.format.IGC.B_RECORD_RE_=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,ol.format.IGC.H_RECORD_RE_=/^H.([A-Z]{3}).*?:(.*)/,ol.format.IGC.HFDTE_RECORD_RE_=/^HFDTE(\d{2})(\d{2})(\d{2})/,ol.format.IGC.NEWLINE_RE_=/\r\n|\r|\n/,ol.format.IGC.prototype.readFeature,ol.format.IGC.prototype.readFeatureFromText=function(e,t){var o,r,i=this.altitudeMode_,n=e.split(ol.format.IGC.NEWLINE_RE_),a={},l=[],s=2e3,p=0,g=1,u=-1;for(o=0,r=n.length;o<r;++o){var c,y=n[o];if("B"==y.charAt(0)){if(c=ol.format.IGC.B_RECORD_RE_.exec(y)){var h=parseInt(c[1],10),d=parseInt(c[2],10),f=parseInt(c[3],10),m=parseInt(c[4],10)+parseInt(c[5],10)/6e4;"S"==c[6]&&(m=-m);var v=parseInt(c[7],10)+parseInt(c[8],10)/6e4;if("W"==c[9]&&(v=-v),l.push(v,m),i!=ol.format.IGCZ.NONE){var _;_=i==ol.format.IGCZ.GPS?parseInt(c[11],10):i==ol.format.IGCZ.BAROMETRIC?parseInt(c[12],10):0,l.push(_)}var S=Date.UTC(s,p,g,h,d,f);S<u&&(S=Date.UTC(s,p,g+1,h,d,f)),l.push(S/1e3),u=S}}else"H"==y.charAt(0)&&(c=ol.format.IGC.HFDTE_RECORD_RE_.exec(y),c?(g=parseInt(c[1],10),p=parseInt(c[2],10)-1,s=2e3+parseInt(c[3],10)):(c=ol.format.IGC.H_RECORD_RE_.exec(y),c&&(a[c[1]]=c[2].trim())))}if(0===l.length)return null;var x=new ol.geom.LineString(null),E=i==ol.format.IGCZ.NONE?ol.geom.GeometryLayout.XYM:ol.geom.GeometryLayout.XYZM;x.setFlatCoordinates(E,l);var P=new ol.Feature(ol.format.Feature.transformWithOptions(x,!1,t));return P.setProperties(a),P},ol.format.IGC.prototype.readFeatures,ol.format.IGC.prototype.readFeaturesFromText=function(e,t){var o=this.readFeatureFromText(e,t);return o?[o]:[]},ol.format.IGC.prototype.readProjection,ol.format.IGC.prototype.writeFeatureText=function(e,t){},ol.format.IGC.prototype.writeFeaturesText=function(e,t){},ol.format.IGC.prototype.writeGeometryText=function(e,t){},ol.format.IGC.prototype.readGeometryFromText=function(e,t){},goog.provide("ol.style.IconAnchorUnits"),ol.style.IconAnchorUnits={FRACTION:"fraction",PIXELS:"pixels"},goog.provide("ol.style.IconImage"),goog.require("ol"),goog.require("ol.dom"),goog.require("ol.events"),goog.require("ol.events.EventTarget"),goog.require("ol.events.EventType"),goog.require("ol.ImageState"),goog.require("ol.style"),ol.style.IconImage=function(e,t,o,r,i,n){ol.events.EventTarget.call(this),this.hitDetectionImage_=null,this.image_=e?e:new Image,null!==r&&(this.image_.crossOrigin=r),this.canvas_=n?document.createElement("CANVAS"):null,this.color_=n,this.imageListenerKeys_=null,this.imageState_=i,this.size_=o,this.src_=t,this.tainting_=!1,this.imageState_==ol.ImageState.LOADED&&this.determineTainting_()},ol.inherits(ol.style.IconImage,ol.events.EventTarget),
ol.style.IconImage.get=function(e,t,o,r,i,n){var a=ol.style.iconImageCache,l=a.get(t,r,n);return l||(l=new ol.style.IconImage(e,t,o,r,i,n),a.set(t,r,n,l)),l},ol.style.IconImage.prototype.determineTainting_=function(){var e=ol.dom.createCanvasContext2D(1,1);try{e.drawImage(this.image_,0,0),e.getImageData(0,0,1,1)}catch(e){this.tainting_=!0}};ol.style.IconImage.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(ol.events.EventType.CHANGE)};ol.style.IconImage.prototype.handleImageError_=function(){this.imageState_=ol.ImageState.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},ol.style.IconImage.prototype.handleImageLoad_=function(){this.imageState_=ol.ImageState.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.determineTainting_(),this.replaceColor_(),this.dispatchChangeEvent_()},ol.style.IconImage.prototype.getImage=function(e){return this.canvas_?this.canvas_:this.image_},ol.style.IconImage.prototype.getImageState=function(){return this.imageState_},ol.style.IconImage.prototype.getHitDetectionImage=function(e){if(!this.hitDetectionImage_)if(this.tainting_){var t=this.size_[0],o=this.size_[1],r=ol.dom.createCanvasContext2D(t,o);r.fillRect(0,0,t,o),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},ol.style.IconImage.prototype.getSize=function(){return this.size_},ol.style.IconImage.prototype.getSrc=function(){return this.src_},ol.style.IconImage.prototype.load=function(){if(this.imageState_==ol.ImageState.IDLE){this.imageState_=ol.ImageState.LOADING,this.imageListenerKeys_=[ol.events.listenOnce(this.image_,ol.events.EventType.ERROR,this.handleImageError_,this),ol.events.listenOnce(this.image_,ol.events.EventType.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(e){this.handleImageError_()}}},ol.style.IconImage.prototype.replaceColor_=function(){if(!this.tainting_&&null!==this.color_){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var e=this.canvas_.getContext("2d");e.drawImage(this.image_,0,0);for(var t=e.getImageData(0,0,this.image_.width,this.image_.height),o=t.data,r=this.color_[0]/255,i=this.color_[1]/255,n=this.color_[2]/255,a=0,l=o.length;a<l;a+=4)o[a]*=r,o[a+1]*=i,o[a+2]*=n;e.putImageData(t,0,0)}},ol.style.IconImage.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(ol.events.unlistenByKey),this.imageListenerKeys_=null},goog.provide("ol.style.IconOrigin"),ol.style.IconOrigin={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},goog.provide("ol.style.Icon"),goog.require("ol"),goog.require("ol.ImageState"),goog.require("ol.asserts"),goog.require("ol.color"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.style.IconAnchorUnits"),goog.require("ol.style.IconImage"),goog.require("ol.style.IconOrigin"),goog.require("ol.style.Image"),ol.style.Icon=function(e){var t=e||{};this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:ol.style.IconOrigin.TOP_LEFT,this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:ol.style.IconAnchorUnits.FRACTION,this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:ol.style.IconAnchorUnits.FRACTION,this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;var o=void 0!==t.img?t.img:null,r=void 0!==t.imgSize?t.imgSize:null,i=t.src;ol.asserts.assert(!(void 0!==i&&o),4),ol.asserts.assert(!o||o&&r,5),void 0!==i&&0!==i.length||!o||(i=o.src||ol.getUid(o).toString()),ol.asserts.assert(void 0!==i&&i.length>0,6);var n=void 0!==t.src?ol.ImageState.IDLE:ol.ImageState.LOADED;this.color_=void 0!==t.color?ol.color.asArray(t.color):null,this.iconImage_=ol.style.IconImage.get(o,i,r,this.crossOrigin_,n,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:ol.style.IconOrigin.TOP_LEFT,this.origin_=null,this.size_=void 0!==t.size?t.size:null;var a=void 0!==t.opacity?t.opacity:1,l=void 0!==t.rotateWithView&&t.rotateWithView,s=void 0!==t.rotation?t.rotation:0,p=void 0!==t.scale?t.scale:1,g=void 0===t.snapToPixel||t.snapToPixel;ol.style.Image.call(this,{opacity:a,rotation:s,scale:p,snapToPixel:g,rotateWithView:l})},ol.inherits(ol.style.Icon,ol.style.Image),ol.style.Icon.prototype.clone=function(){var e,t=this.getImage(1);if(this.iconImage_.getImageState()===ol.ImageState.LOADED)if("IMG"===t.tagName.toUpperCase())e=t.cloneNode(!0);else{e=document.createElement("canvas");var o=e.getContext("2d");e.width=t.width,e.height=t.height,o.drawImage(t,0,0)}return new ol.style.Icon({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,img:e?e:void 0,imgSize:e?this.iconImage_.getSize().slice():void 0,src:e?void 0:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),snapToPixel:this.getSnapToPixel(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},ol.style.Icon.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var e=this.anchor_,t=this.getSize();if(this.anchorXUnits_==ol.style.IconAnchorUnits.FRACTION||this.anchorYUnits_==ol.style.IconAnchorUnits.FRACTION){if(!t)return null;e=this.anchor_.slice(),this.anchorXUnits_==ol.style.IconAnchorUnits.FRACTION&&(e[0]*=t[0]),this.anchorYUnits_==ol.style.IconAnchorUnits.FRACTION&&(e[1]*=t[1])}if(this.anchorOrigin_!=ol.style.IconOrigin.TOP_LEFT){if(!t)return null;e===this.anchor_&&(e=this.anchor_.slice()),this.anchorOrigin_!=ol.style.IconOrigin.TOP_RIGHT&&this.anchorOrigin_!=ol.style.IconOrigin.BOTTOM_RIGHT||(e[0]=-e[0]+t[0]),this.anchorOrigin_!=ol.style.IconOrigin.BOTTOM_LEFT&&this.anchorOrigin_!=ol.style.IconOrigin.BOTTOM_RIGHT||(e[1]=-e[1]+t[1])}return this.normalizedAnchor_=e,this.normalizedAnchor_},ol.style.Icon.prototype.getColor=function(){return this.color_},ol.style.Icon.prototype.getImage=function(e){return this.iconImage_.getImage(e)},ol.style.Icon.prototype.getImageSize=function(){return this.iconImage_.getSize()},ol.style.Icon.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},ol.style.Icon.prototype.getImageState=function(){return this.iconImage_.getImageState()},ol.style.Icon.prototype.getHitDetectionImage=function(e){return this.iconImage_.getHitDetectionImage(e)},ol.style.Icon.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var e=this.offset_;if(this.offsetOrigin_!=ol.style.IconOrigin.TOP_LEFT){var t=this.getSize(),o=this.iconImage_.getSize();if(!t||!o)return null;e=e.slice(),this.offsetOrigin_!=ol.style.IconOrigin.TOP_RIGHT&&this.offsetOrigin_!=ol.style.IconOrigin.BOTTOM_RIGHT||(e[0]=o[0]-t[0]-e[0]),this.offsetOrigin_!=ol.style.IconOrigin.BOTTOM_LEFT&&this.offsetOrigin_!=ol.style.IconOrigin.BOTTOM_RIGHT||(e[1]=o[1]-t[1]-e[1])}return this.origin_=e,this.origin_},ol.style.Icon.prototype.getSrc=function(){return this.iconImage_.getSrc()},ol.style.Icon.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},ol.style.Icon.prototype.listenImageChange=function(e,t){return ol.events.listen(this.iconImage_,ol.events.EventType.CHANGE,e,t)},ol.style.Icon.prototype.load=function(){this.iconImage_.load()},ol.style.Icon.prototype.unlistenImageChange=function(e,t){ol.events.unlisten(this.iconImage_,ol.events.EventType.CHANGE,e,t)},goog.provide("ol.style.Text"),goog.require("ol.style.Fill"),ol.style.Text=function(e){var t=e||{};this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.text_=t.text,this.textAlign_=t.textAlign,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new ol.style.Fill({color:ol.style.Text.DEFAULT_FILL_COLOR_}),this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0},ol.style.Text.DEFAULT_FILL_COLOR_="#333",ol.style.Text.prototype.clone=function(){return new ol.style.Text({font:this.getFont(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY()})},ol.style.Text.prototype.getFont=function(){return this.font_},ol.style.Text.prototype.getOffsetX=function(){return this.offsetX_},ol.style.Text.prototype.getOffsetY=function(){return this.offsetY_},ol.style.Text.prototype.getFill=function(){return this.fill_},ol.style.Text.prototype.getRotateWithView=function(){return this.rotateWithView_},ol.style.Text.prototype.getRotation=function(){return this.rotation_},ol.style.Text.prototype.getScale=function(){return this.scale_},ol.style.Text.prototype.getStroke=function(){return this.stroke_},ol.style.Text.prototype.getText=function(){return this.text_},ol.style.Text.prototype.getTextAlign=function(){return this.textAlign_},ol.style.Text.prototype.getTextBaseline=function(){return this.textBaseline_},ol.style.Text.prototype.setFont=function(e){this.font_=e},ol.style.Text.prototype.setOffsetX=function(e){this.offsetX_=e},ol.style.Text.prototype.setOffsetY=function(e){this.offsetY_=e},ol.style.Text.prototype.setFill=function(e){this.fill_=e},ol.style.Text.prototype.setRotation=function(e){this.rotation_=e},ol.style.Text.prototype.setScale=function(e){this.scale_=e},ol.style.Text.prototype.setStroke=function(e){this.stroke_=e},ol.style.Text.prototype.setText=function(e){this.text_=e},ol.style.Text.prototype.setTextAlign=function(e){this.textAlign_=e},ol.style.Text.prototype.setTextBaseline=function(e){this.textBaseline_=e},goog.provide("ol.format.KML"),goog.require("ol"),goog.require("ol.Feature"),goog.require("ol.array"),goog.require("ol.asserts"),goog.require("ol.color"),goog.require("ol.format.Feature"),goog.require("ol.format.XMLFeature"),goog.require("ol.format.XSD"),goog.require("ol.geom.GeometryCollection"),goog.require("ol.geom.GeometryLayout"),goog.require("ol.geom.GeometryType"),goog.require("ol.geom.LineString"),goog.require("ol.geom.MultiLineString"),goog.require("ol.geom.MultiPoint"),goog.require("ol.geom.MultiPolygon"),goog.require("ol.geom.Point"),goog.require("ol.geom.Polygon"),goog.require("ol.math"),goog.require("ol.proj"),goog.require("ol.style.Fill"),goog.require("ol.style.Icon"),goog.require("ol.style.IconAnchorUnits"),goog.require("ol.style.IconOrigin"),goog.require("ol.style.Stroke"),goog.require("ol.style.Style"),goog.require("ol.style.Text"),goog.require("ol.xml"),ol.format.KML=function(e){var t=e?e:{};ol.format.XMLFeature.call(this),ol.format.KML.DEFAULT_STYLE_ARRAY_||ol.format.KML.createStyleDefaults_(),this.defaultDataProjection=ol.proj.get("EPSG:4326"),this.defaultStyle_=t.defaultStyle?t.defaultStyle:ol.format.KML.DEFAULT_STYLE_ARRAY_,this.extractStyles_=void 0===t.extractStyles||t.extractStyles,this.writeStyles_=void 0===t.writeStyles||t.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===t.showPointNames||t.showPointNames},ol.inherits(ol.format.KML,ol.format.XMLFeature),ol.format.KML.GX_NAMESPACE_URIS_=["http://www.google.com/kml/ext/2.2"],ol.format.KML.NAMESPACE_URIS_=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],ol.format.KML.SCHEMA_LOCATION_="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",ol.format.KML.createStyleDefaults_=function(){return ol.format.KML.DEFAULT_COLOR_=[255,255,255,1],ol.format.KML.DEFAULT_FILL_STYLE_=new ol.style.Fill({color:ol.format.KML.DEFAULT_COLOR_}),ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_=[20,2],ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_=ol.style.IconAnchorUnits.PIXELS,ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_=ol.style.IconAnchorUnits.PIXELS,ol.format.KML.DEFAULT_IMAGE_STYLE_SIZE_=[64,64],ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",ol.format.KML.DEFAULT_IMAGE_SCALE_MULTIPLIER_=.5,ol.format.KML.DEFAULT_IMAGE_STYLE_=new ol.style.Icon({anchor:ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_,anchorOrigin:ol.style.IconOrigin.BOTTOM_LEFT,anchorXUnits:ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_,anchorYUnits:ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_,crossOrigin:"anonymous",rotation:0,scale:ol.format.KML.DEFAULT_IMAGE_SCALE_MULTIPLIER_,size:ol.format.KML.DEFAULT_IMAGE_STYLE_SIZE_,src:ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_}),ol.format.KML.DEFAULT_NO_IMAGE_STYLE_="NO_IMAGE",ol.format.KML.DEFAULT_STROKE_STYLE_=new ol.style.Stroke({color:ol.format.KML.DEFAULT_COLOR_,width:1}),ol.format.KML.DEFAULT_TEXT_STROKE_STYLE_=new ol.style.Stroke({color:[51,51,51,1],width:2}),ol.format.KML.DEFAULT_TEXT_STYLE_=new ol.style.Text({font:"bold 16px Helvetica",fill:ol.format.KML.DEFAULT_FILL_STYLE_,stroke:ol.format.KML.DEFAULT_TEXT_STROKE_STYLE_,scale:.8}),ol.format.KML.DEFAULT_STYLE_=new ol.style.Style({fill:ol.format.KML.DEFAULT_FILL_STYLE_,image:ol.format.KML.DEFAULT_IMAGE_STYLE_,text:ol.format.KML.DEFAULT_TEXT_STYLE_,stroke:ol.format.KML.DEFAULT_STROKE_STYLE_,zIndex:0}),ol.format.KML.DEFAULT_STYLE_ARRAY_=[ol.format.KML.DEFAULT_STYLE_],ol.format.KML.DEFAULT_STYLE_ARRAY_},ol.format.KML.ICON_ANCHOR_UNITS_MAP_={fraction:ol.style.IconAnchorUnits.FRACTION,pixels:ol.style.IconAnchorUnits.PIXELS,insetPixels:ol.style.IconAnchorUnits.PIXELS},ol.format.KML.createNameStyleFunction_=function(e,t){var o=null,r=[0,0],i="start";if(e.getImage()){var n=e.getImage().getImageSize();if(null===n&&(n=ol.format.KML.DEFAULT_IMAGE_STYLE_SIZE_),2==n.length){var a=e.getImage().getScale();r[0]=a*n[0]/2,r[1]=-a*n[1]/2,i="left"}}if(null!==e.getText()){var l=e.getText();o=l.clone(),o.setFont(l.getFont()||ol.format.KML.DEFAULT_TEXT_STYLE_.getFont()),o.setScale(l.getScale()||ol.format.KML.DEFAULT_TEXT_STYLE_.getScale()),o.setFill(l.getFill()||ol.format.KML.DEFAULT_TEXT_STYLE_.getFill()),o.setStroke(l.getStroke()||ol.format.KML.DEFAULT_TEXT_STROKE_STYLE_)}else o=ol.format.KML.DEFAULT_TEXT_STYLE_.clone();o.setText(t),o.setOffsetX(r[0]),o.setOffsetY(r[1]),o.setTextAlign(i);var s=new ol.style.Style({text:o});return s},ol.format.KML.createFeatureStyleFunction_=function(e,t,o,r,i){return function(n){var a,l=i,s="";if(l&&this.getGeometry()&&(l=this.getGeometry().getType()===ol.geom.GeometryType.POINT),l&&(s=this.get("name"),l=l&&s),e)return l?(a=ol.format.KML.createNameStyleFunction_(e[0],s),e.concat(a)):e;if(t){var p=ol.format.KML.findStyle_(t,o,r);return l?(a=ol.format.KML.createNameStyleFunction_(p[0],s),p.concat(a)):p}return l?(a=ol.format.KML.createNameStyleFunction_(o[0],s),o.concat(a)):o}},ol.format.KML.findStyle_=function(e,t,o){return Array.isArray(e)?e:"string"==typeof e?(!(e in o)&&"#"+e in o&&(e="#"+e),ol.format.KML.findStyle_(o[e],t,o)):t},ol.format.KML.readColor_=function(e){var t=ol.xml.getAllTextContent(e,!1),o=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(t);if(o){var r=o[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}},ol.format.KML.readFlatCoordinates_=function(e){for(var t,o=ol.xml.getAllTextContent(e,!1),r=[],i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;t=i.exec(o);){var n=parseFloat(t[1]),a=parseFloat(t[2]),l=t[3]?parseFloat(t[3]):0;r.push(n,a,l),o=o.substr(t[0].length)}if(""===o)return r},ol.format.KML.readURI_=function(e){var t=ol.xml.getAllTextContent(e,!1).trim();if(e.baseURI&&"about:blank"!==e.baseURI){var o=new URL(t,e.baseURI);return o.href}return t},ol.format.KML.readVec2_=function(e){var t,o=e.getAttribute("xunits"),r=e.getAttribute("yunits");return t="insetPixels"!==o?"insetPixels"!==r?ol.style.IconOrigin.BOTTOM_LEFT:ol.style.IconOrigin.TOP_LEFT:"insetPixels"!==r?ol.style.IconOrigin.BOTTOM_RIGHT:ol.style.IconOrigin.TOP_RIGHT,{x:parseFloat(e.getAttribute("x")),xunits:ol.format.KML.ICON_ANCHOR_UNITS_MAP_[o],y:parseFloat(e.getAttribute("y")),yunits:ol.format.KML.ICON_ANCHOR_UNITS_MAP_[r],origin:t}},ol.format.KML.readScale_=function(e){return ol.format.XSD.readDecimal(e)},ol.format.KML.readStyleMapValue_=function(e,t){return ol.xml.pushParseAndPop(void 0,ol.format.KML.STYLE_MAP_PARSERS_,e,t)},ol.format.KML.IconStyleParser_=function(e,t){var o=ol.xml.pushParseAndPop({},ol.format.KML.ICON_STYLE_PARSERS_,e,t);if(o){var r,i=t[t.length-1],n="Icon"in o?o.Icon:{},a=!("Icon"in o)||Object.keys(n).length>0,l=n.href;l?r=l:a&&(r=ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_);var s,p,g,u=ol.style.IconOrigin.BOTTOM_LEFT,c=o.hotSpot;c?(s=[c.x,c.y],p=c.xunits,g=c.yunits,u=c.origin):r===ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_?(s=ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_,p=ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS_,g=ol.format.KML.DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS_):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(r)&&(s=[.5,0],p=ol.style.IconAnchorUnits.FRACTION,g=ol.style.IconAnchorUnits.FRACTION);var y,h=n.x,d=n.y;void 0!==h&&void 0!==d&&(y=[h,d]);var f,m=n.w,v=n.h;void 0!==m&&void 0!==v&&(f=[m,v]);var _,S=o.heading;void 0!==S&&(_=ol.math.toRadians(S));var x=o.scale;if(a){r==ol.format.KML.DEFAULT_IMAGE_STYLE_SRC_&&(f=ol.format.KML.DEFAULT_IMAGE_STYLE_SIZE_,void 0===x&&(x=ol.format.KML.DEFAULT_IMAGE_SCALE_MULTIPLIER_));var E=new ol.style.Icon({anchor:s,anchorOrigin:u,anchorXUnits:p,anchorYUnits:g,crossOrigin:"anonymous",offset:y,offsetOrigin:ol.style.IconOrigin.BOTTOM_LEFT,rotation:_,scale:x,size:f,src:r});i.imageStyle=E}else i.imageStyle=ol.format.KML.DEFAULT_NO_IMAGE_STYLE_}},ol.format.KML.LabelStyleParser_=function(e,t){var o=ol.xml.pushParseAndPop({},ol.format.KML.LABEL_STYLE_PARSERS_,e,t);if(o){var r=t[t.length-1],i=new ol.style.Text({fill:new ol.style.Fill({color:"color"in o?o.color:ol.format.KML.DEFAULT_COLOR_}),scale:o.scale});r.textStyle=i}},ol.format.KML.LineStyleParser_=function(e,t){var o=ol.xml.pushParseAndPop({},ol.format.KML.LINE_STYLE_PARSERS_,e,t);if(o){var r=t[t.length-1],i=new ol.style.Stroke({color:"color"in o?o.color:ol.format.KML.DEFAULT_COLOR_,width:"width"in o?o.width:1});r.strokeStyle=i}},ol.format.KML.PolyStyleParser_=function(e,t){var o=ol.xml.pushParseAndPop({},ol.format.KML.POLY_STYLE_PARSERS_,e,t);if(o){var r=t[t.length-1],i=new ol.style.Fill({color:"color"in o?o.color:ol.format.KML.DEFAULT_COLOR_});r.fillStyle=i;var n=o.fill;void 0!==n&&(r.fill=n);var a=o.outline;void 0!==a&&(r.outline=a)}},ol.format.KML.readFlatLinearRing_=function(e,t){return ol.xml.pushParseAndPop(null,ol.format.KML.FLAT_LINEAR_RING_PARSERS_,e,t)},ol.format.KML.gxCoordParser_=function(e,t){var o=t[t.length-1],r=o.flatCoordinates,i=ol.xml.getAllTextContent(e,!1),n=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i,a=n.exec(i);if(a){var l=parseFloat(a[1]),s=parseFloat(a[2]),p=parseFloat(a[3]);r.push(l,s,p,0)}else r.push(0,0,0,0)},ol.format.KML.readGxMultiTrack_=function(e,t){var o=ol.xml.pushParseAndPop([],ol.format.KML.GX_MULTITRACK_GEOMETRY_PARSERS_,e,t);if(o){var r=new ol.geom.MultiLineString(null);return r.setLineStrings(o),r}},ol.format.KML.readGxTrack_=function(e,t){var o=ol.xml.pushParseAndPop({flatCoordinates:[],whens:[]},ol.format.KML.GX_TRACK_PARSERS_,e,t);if(o){var r,i,n=o.flatCoordinates,a=o.whens;for(r=0,i=Math.min(n.length,a.length);r<i;++r)n[4*r+3]=a[r];var l=new ol.geom.LineString(null);return l.setFlatCoordinates(ol.geom.GeometryLayout.XYZM,n),l}},ol.format.KML.readIcon_=function(e,t){var o=ol.xml.pushParseAndPop({},ol.format.KML.ICON_PARSERS_,e,t);return o?o:null},ol.format.KML.readFlatCoordinatesFromNode_=function(e,t){return ol.xml.pushParseAndPop(null,ol.format.KML.GEOMETRY_FLAT_COORDINATES_PARSERS_,e,t)},ol.format.KML.readLineString_=function(e,t){var o=ol.xml.pushParseAndPop({},ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,e,t),r=ol.format.KML.readFlatCoordinatesFromNode_(e,t);if(r){var i=new ol.geom.LineString(null);return i.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,r),i.setProperties(o),i}},ol.format.KML.readLinearRing_=function(e,t){var o=ol.xml.pushParseAndPop({},ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,e,t),r=ol.format.KML.readFlatCoordinatesFromNode_(e,t);if(r){var i=new ol.geom.Polygon(null);return i.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,r,[r.length]),i.setProperties(o),i}},ol.format.KML.readMultiGeometry_=function(e,t){var o=ol.xml.pushParseAndPop([],ol.format.KML.MULTI_GEOMETRY_PARSERS_,e,t);if(!o)return null;if(0===o.length)return new ol.geom.GeometryCollection(o);var r,i,n,a,l=!0,s=o[0].getType();for(n=1,a=o.length;n<a;++n)if(i=o[n],i.getType()!=s){l=!1;break}if(l){var p,g;if(s==ol.geom.GeometryType.POINT){var u=o[0];for(p=u.getLayout(),g=u.getFlatCoordinates(),n=1,a=o.length;n<a;++n)i=o[n],ol.array.extend(g,i.getFlatCoordinates());r=new ol.geom.MultiPoint(null),r.setFlatCoordinates(p,g),ol.format.KML.setCommonGeometryProperties_(r,o)}else s==ol.geom.GeometryType.LINE_STRING?(r=new ol.geom.MultiLineString(null),r.setLineStrings(o),ol.format.KML.setCommonGeometryProperties_(r,o)):s==ol.geom.GeometryType.POLYGON?(r=new ol.geom.MultiPolygon(null),r.setPolygons(o),ol.format.KML.setCommonGeometryProperties_(r,o)):s==ol.geom.GeometryType.GEOMETRY_COLLECTION?r=new ol.geom.GeometryCollection(o):ol.asserts.assert(!1,37)}else r=new ol.geom.GeometryCollection(o);return r},ol.format.KML.readPoint_=function(e,t){var o=ol.xml.pushParseAndPop({},ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,e,t),r=ol.format.KML.readFlatCoordinatesFromNode_(e,t);if(r){var i=new ol.geom.Point(null);return i.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,r),i.setProperties(o),i}},ol.format.KML.readPolygon_=function(e,t){var o=ol.xml.pushParseAndPop({},ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_,e,t),r=ol.xml.pushParseAndPop([null],ol.format.KML.FLAT_LINEAR_RINGS_PARSERS_,e,t);if(r&&r[0]){var i,n,a=new ol.geom.Polygon(null),l=r[0],s=[l.length];for(i=1,n=r.length;i<n;++i)ol.array.extend(l,r[i]),s.push(l.length);return a.setFlatCoordinates(ol.geom.GeometryLayout.XYZ,l,s),a.setProperties(o),a}},ol.format.KML.readStyle_=function(e,t){var o=ol.xml.pushParseAndPop({},ol.format.KML.STYLE_PARSERS_,e,t);if(!o)return null;var r="fillStyle"in o?o.fillStyle:ol.format.KML.DEFAULT_FILL_STYLE_,i=o.fill;void 0===i||i||(r=null);var n="imageStyle"in o?o.imageStyle:ol.format.KML.DEFAULT_IMAGE_STYLE_;n==ol.format.KML.DEFAULT_NO_IMAGE_STYLE_&&(n=void 0);var a="textStyle"in o?o.textStyle:ol.format.KML.DEFAULT_TEXT_STYLE_,l="strokeStyle"in o?o.strokeStyle:ol.format.KML.DEFAULT_STROKE_STYLE_,s=o.outline;return void 0===s||s||(l=null),[new ol.style.Style({fill:r,image:n,stroke:l,text:a,zIndex:void 0})]},ol.format.KML.setCommonGeometryProperties_=function(e,t){var o,r,i,n,a=t.length,l=new Array(t.length),s=new Array(t.length);for(i=n=!1,r=0;r<a;++r)o=t[r],l[r]=o.get("extrude"),s[r]=o.get("altitudeMode"),i=i||void 0!==l[r],n=n||s[r];i&&e.set("extrude",l),n&&e.set("altitudeMode",s)},ol.format.KML.DataParser_=function(e,t){var o=e.getAttribute("name");ol.xml.parseNode(ol.format.KML.DATA_PARSERS_,e,t);var r=t[t.length-1];null!==o?r[o]=r.value:null!==r.displayName&&(r[r.displayName]=r.value)},ol.format.KML.ExtendedDataParser_=function(e,t){ol.xml.parseNode(ol.format.KML.EXTENDED_DATA_PARSERS_,e,t)},ol.format.KML.RegionParser_=function(e,t){ol.xml.parseNode(ol.format.KML.REGION_PARSERS_,e,t)},ol.format.KML.PairDataParser_=function(e,t){var o=ol.xml.pushParseAndPop({},ol.format.KML.PAIR_PARSERS_,e,t);if(o){var r=o.key;if(r&&"normal"==r){var i=o.styleUrl;i&&(t[t.length-1]=i);var n=o.Style;n&&(t[t.length-1]=n)}}},ol.format.KML.PlacemarkStyleMapParser_=function(e,t){var o=ol.format.KML.readStyleMapValue_(e,t);if(o){var r=t[t.length-1];Array.isArray(o)?r.Style=o:"string"==typeof o?r.styleUrl=o:ol.asserts.assert(!1,38)}},ol.format.KML.SchemaDataParser_=function(e,t){ol.xml.parseNode(ol.format.KML.SCHEMA_DATA_PARSERS_,e,t)},ol.format.KML.SimpleDataParser_=function(e,t){var o=e.getAttribute("name");if(null!==o){var r=ol.format.XSD.readString(e),i=t[t.length-1];i[o]=r}},ol.format.KML.LatLonAltBoxParser_=function(e,t){var o=ol.xml.pushParseAndPop({},ol.format.KML.LAT_LON_ALT_BOX_PARSERS_,e,t);if(o){var r=t[t.length-1],i=[parseFloat(o.west),parseFloat(o.south),parseFloat(o.east),parseFloat(o.north)];r.extent=i,r.altitudeMode=o.altitudeMode,r.minAltitude=parseFloat(o.minAltitude),r.maxAltitude=parseFloat(o.maxAltitude)}},ol.format.KML.LodParser_=function(e,t){var o=ol.xml.pushParseAndPop({},ol.format.KML.LOD_PARSERS_,e,t);if(o){var r=t[t.length-1];r.minLodPixels=parseFloat(o.minLodPixels),r.maxLodPixels=parseFloat(o.maxLodPixels),r.minFadeExtent=parseFloat(o.minFadeExtent),r.maxFadeExtent=parseFloat(o.maxFadeExtent)}},ol.format.KML.innerBoundaryIsParser_=function(e,t){var o=ol.xml.pushParseAndPop(void 0,ol.format.KML.INNER_BOUNDARY_IS_PARSERS_,e,t);if(o){var r=t[t.length-1];r.push(o)}},ol.format.KML.outerBoundaryIsParser_=function(e,t){var o=ol.xml.pushParseAndPop(void 0,ol.format.KML.OUTER_BOUNDARY_IS_PARSERS_,e,t);if(o){var r=t[t.length-1];r[0]=o}},ol.format.KML.LinkParser_=function(e,t){ol.xml.parseNode(ol.format.KML.LINK_PARSERS_,e,t)},ol.format.KML.whenParser_=function(e,t){var o=t[t.length-1],r=o.whens,i=ol.xml.getAllTextContent(e,!1),n=Date.parse(i);r.push(isNaN(n)?0:n)},ol.format.KML.DATA_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{displayName:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),value:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}),ol.format.KML.EXTENDED_DATA_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Data:ol.format.KML.DataParser_,SchemaData:ol.format.KML.SchemaDataParser_}),ol.format.KML.REGION_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LatLonAltBox:ol.format.KML.LatLonAltBoxParser_,Lod:ol.format.KML.LodParser_}),ol.format.KML.LAT_LON_ALT_BOX_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{altitudeMode:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),minAltitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),maxAltitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),north:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),south:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),east:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),west:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)}),ol.format.KML.LOD_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{minLodPixels:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),maxLodPixels:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),minFadeExtent:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),maxFadeExtent:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)}),ol.format.KML.EXTRUDE_AND_ALTITUDE_MODE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{extrude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),altitudeMode:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}),ol.format.KML.FLAT_LINEAR_RING_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{coordinates:ol.xml.makeReplacer(ol.format.KML.readFlatCoordinates_)}),ol.format.KML.FLAT_LINEAR_RINGS_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{innerBoundaryIs:ol.format.KML.innerBoundaryIsParser_,outerBoundaryIs:ol.format.KML.outerBoundaryIsParser_}),ol.format.KML.GX_TRACK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{when:ol.format.KML.whenParser_},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{coord:ol.format.KML.gxCoordParser_})),ol.format.KML.GEOMETRY_FLAT_COORDINATES_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{coordinates:ol.xml.makeReplacer(ol.format.KML.readFlatCoordinates_)}),ol.format.KML.ICON_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{href:ol.xml.makeObjectPropertySetter(ol.format.KML.readURI_)},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{x:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),y:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),w:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),h:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)})),ol.format.KML.ICON_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Icon:ol.xml.makeObjectPropertySetter(ol.format.KML.readIcon_),heading:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),hotSpot:ol.xml.makeObjectPropertySetter(ol.format.KML.readVec2_),scale:ol.xml.makeObjectPropertySetter(ol.format.KML.readScale_)}),ol.format.KML.INNER_BOUNDARY_IS_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LinearRing:ol.xml.makeReplacer(ol.format.KML.readFlatLinearRing_)}),ol.format.KML.LABEL_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeObjectPropertySetter(ol.format.KML.readColor_),scale:ol.xml.makeObjectPropertySetter(ol.format.KML.readScale_)}),ol.format.KML.LINE_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeObjectPropertySetter(ol.format.KML.readColor_),width:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)}),ol.format.KML.MULTI_GEOMETRY_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LineString:ol.xml.makeArrayPusher(ol.format.KML.readLineString_),LinearRing:ol.xml.makeArrayPusher(ol.format.KML.readLinearRing_),MultiGeometry:ol.xml.makeArrayPusher(ol.format.KML.readMultiGeometry_),Point:ol.xml.makeArrayPusher(ol.format.KML.readPoint_),Polygon:ol.xml.makeArrayPusher(ol.format.KML.readPolygon_)}),ol.format.KML.GX_MULTITRACK_GEOMETRY_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{Track:ol.xml.makeArrayPusher(ol.format.KML.readGxTrack_)}),ol.format.KML.NETWORK_LINK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{ExtendedData:ol.format.KML.ExtendedDataParser_,Region:ol.format.KML.RegionParser_,Link:ol.format.KML.LinkParser_,address:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),description:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),open:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),phoneNumber:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),visibility:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean)}),ol.format.KML.LINK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{href:ol.xml.makeObjectPropertySetter(ol.format.KML.readURI_)}),ol.format.KML.OUTER_BOUNDARY_IS_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LinearRing:ol.xml.makeReplacer(ol.format.KML.readFlatLinearRing_)}),ol.format.KML.PAIR_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Style:ol.xml.makeObjectPropertySetter(ol.format.KML.readStyle_),key:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),styleUrl:ol.xml.makeObjectPropertySetter(ol.format.KML.readURI_)}),ol.format.KML.PLACEMARK_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{ExtendedData:ol.format.KML.ExtendedDataParser_,Region:ol.format.KML.RegionParser_,MultiGeometry:ol.xml.makeObjectPropertySetter(ol.format.KML.readMultiGeometry_,"geometry"),LineString:ol.xml.makeObjectPropertySetter(ol.format.KML.readLineString_,"geometry"),LinearRing:ol.xml.makeObjectPropertySetter(ol.format.KML.readLinearRing_,"geometry"),Point:ol.xml.makeObjectPropertySetter(ol.format.KML.readPoint_,"geometry"),Polygon:ol.xml.makeObjectPropertySetter(ol.format.KML.readPolygon_,"geometry"),Style:ol.xml.makeObjectPropertySetter(ol.format.KML.readStyle_),StyleMap:ol.format.KML.PlacemarkStyleMapParser_,address:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),
description:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),open:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),phoneNumber:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),styleUrl:ol.xml.makeObjectPropertySetter(ol.format.KML.readURI_),visibility:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean)},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{MultiTrack:ol.xml.makeObjectPropertySetter(ol.format.KML.readGxMultiTrack_,"geometry"),Track:ol.xml.makeObjectPropertySetter(ol.format.KML.readGxTrack_,"geometry")})),ol.format.KML.POLY_STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeObjectPropertySetter(ol.format.KML.readColor_),fill:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean),outline:ol.xml.makeObjectPropertySetter(ol.format.XSD.readBoolean)}),ol.format.KML.SCHEMA_DATA_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{SimpleData:ol.format.KML.SimpleDataParser_}),ol.format.KML.STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{IconStyle:ol.format.KML.IconStyleParser_,LabelStyle:ol.format.KML.LabelStyleParser_,LineStyle:ol.format.KML.LineStyleParser_,PolyStyle:ol.format.KML.PolyStyleParser_}),ol.format.KML.STYLE_MAP_PARSERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Pair:ol.format.KML.PairDataParser_}),ol.format.KML.prototype.readDocumentOrFolder_=function(e,t){var o=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Document:ol.xml.makeArrayExtender(this.readDocumentOrFolder_,this),Folder:ol.xml.makeArrayExtender(this.readDocumentOrFolder_,this),Placemark:ol.xml.makeArrayPusher(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),r=ol.xml.pushParseAndPop([],o,e,t,this);return r?r:void 0},ol.format.KML.prototype.readPlacemark_=function(e,t){var o=ol.xml.pushParseAndPop({geometry:null},ol.format.KML.PLACEMARK_PARSERS_,e,t);if(o){var r=new ol.Feature,i=e.getAttribute("id");null!==i&&r.setId(i);var n=t[0],a=o.geometry;if(a&&ol.format.Feature.transformWithOptions(a,!1,n),r.setGeometry(a),delete o.geometry,this.extractStyles_){var l=o.Style,s=o.styleUrl,p=ol.format.KML.createFeatureStyleFunction_(l,s,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);r.setStyle(p)}return delete o.Style,r.setProperties(o),r}},ol.format.KML.prototype.readSharedStyle_=function(e,t){var o=e.getAttribute("id");if(null!==o){var r=ol.format.KML.readStyle_(e,t);if(r){var i;if(e.baseURI&&"about:blank"!==e.baseURI){var n=new URL("#"+o,e.baseURI);i=n.href}else i="#"+o;this.sharedStyles_[i]=r}}},ol.format.KML.prototype.readSharedStyleMap_=function(e,t){var o=e.getAttribute("id");if(null!==o){var r=ol.format.KML.readStyleMapValue_(e,t);if(r){var i;if(e.baseURI&&"about:blank"!==e.baseURI){var n=new URL("#"+o,e.baseURI);i=n.href}else i="#"+o;this.sharedStyles_[i]=r}}},ol.format.KML.prototype.readFeature,ol.format.KML.prototype.readFeatureFromNode=function(e,t){if(!ol.array.includes(ol.format.KML.NAMESPACE_URIS_,e.namespaceURI))return null;var o=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return o?o:null},ol.format.KML.prototype.readFeatures,ol.format.KML.prototype.readFeaturesFromNode=function(e,t){if(!ol.array.includes(ol.format.KML.NAMESPACE_URIS_,e.namespaceURI))return[];var o,r=e.localName;if("Document"==r||"Folder"==r)return o=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),o?o:[];if("Placemark"==r){var i=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return i?[i]:[]}if("kml"==r){o=[];var n;for(n=e.firstElementChild;n;n=n.nextElementSibling){var a=this.readFeaturesFromNode(n,t);a&&ol.array.extend(o,a)}return o}return[]},ol.format.KML.prototype.readName=function(e){if(ol.xml.isDocument(e))return this.readNameFromDocument(e);if(ol.xml.isNode(e))return this.readNameFromNode(e);if("string"==typeof e){var t=ol.xml.parse(e);return this.readNameFromDocument(t)}},ol.format.KML.prototype.readNameFromDocument=function(e){var t;for(t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){var o=this.readNameFromNode(t);if(o)return o}},ol.format.KML.prototype.readNameFromNode=function(e){var t;for(t=e.firstElementChild;t;t=t.nextElementSibling)if(ol.array.includes(ol.format.KML.NAMESPACE_URIS_,t.namespaceURI)&&"name"==t.localName)return ol.format.XSD.readString(t);for(t=e.firstElementChild;t;t=t.nextElementSibling){var o=t.localName;if(ol.array.includes(ol.format.KML.NAMESPACE_URIS_,t.namespaceURI)&&("Document"==o||"Folder"==o||"Placemark"==o||"kml"==o)){var r=this.readNameFromNode(t);if(r)return r}}},ol.format.KML.prototype.readNetworkLinks=function(e){var t=[];if(ol.xml.isDocument(e))ol.array.extend(t,this.readNetworkLinksFromDocument(e));else if(ol.xml.isNode(e))ol.array.extend(t,this.readNetworkLinksFromNode(e));else if("string"==typeof e){var o=ol.xml.parse(e);ol.array.extend(t,this.readNetworkLinksFromDocument(o))}return t},ol.format.KML.prototype.readNetworkLinksFromDocument=function(e){var t,o=[];for(t=e.firstChild;t;t=t.nextSibling)t.nodeType==Node.ELEMENT_NODE&&ol.array.extend(o,this.readNetworkLinksFromNode(t));return o},ol.format.KML.prototype.readNetworkLinksFromNode=function(e){var t,o=[];for(t=e.firstElementChild;t;t=t.nextElementSibling)if(ol.array.includes(ol.format.KML.NAMESPACE_URIS_,t.namespaceURI)&&"NetworkLink"==t.localName){var r=ol.xml.pushParseAndPop({},ol.format.KML.NETWORK_LINK_PARSERS_,t,[]);o.push(r)}for(t=e.firstElementChild;t;t=t.nextElementSibling){var i=t.localName;!ol.array.includes(ol.format.KML.NAMESPACE_URIS_,t.namespaceURI)||"Document"!=i&&"Folder"!=i&&"kml"!=i||ol.array.extend(o,this.readNetworkLinksFromNode(t))}return o},ol.format.KML.prototype.readRegion=function(e){var t=[];if(ol.xml.isDocument(e))ol.array.extend(t,this.readRegionFromDocument(e));else if(ol.xml.isNode(e))ol.array.extend(t,this.readRegionFromNode(e));else if("string"==typeof e){var o=ol.xml.parse(e);ol.array.extend(t,this.readRegionFromDocument(o))}return t},ol.format.KML.prototype.readRegionFromDocument=function(e){var t,o=[];for(t=e.firstChild;t;t=t.nextSibling)t.nodeType==Node.ELEMENT_NODE&&ol.array.extend(o,this.readRegionFromNode(t));return o},ol.format.KML.prototype.readRegionFromNode=function(e){var t,o=[];for(t=e.firstElementChild;t;t=t.nextElementSibling)if(ol.array.includes(ol.format.KML.NAMESPACE_URIS_,t.namespaceURI)&&"Region"==t.localName){var r=ol.xml.pushParseAndPop({},ol.format.KML.REGION_PARSERS_,t,[]);o.push(r)}for(t=e.firstElementChild;t;t=t.nextElementSibling){var i=t.localName;!ol.array.includes(ol.format.KML.NAMESPACE_URIS_,t.namespaceURI)||"Document"!=i&&"Folder"!=i&&"kml"!=i||ol.array.extend(o,this.readRegionFromNode(t))}return o},ol.format.KML.prototype.readProjection,ol.format.KML.writeColorTextNode_=function(e,t){var o,r=ol.color.asArray(t),i=4==r.length?r[3]:1,n=[255*i,r[2],r[1],r[0]];for(o=0;o<4;++o){var a=parseInt(n[o],10).toString(16);n[o]=1==a.length?"0"+a:a}ol.format.XSD.writeStringTextNode(e,n.join(""))},ol.format.KML.writeCoordinatesTextNode_=function(e,t,o){var r,i=o[o.length-1],n=i.layout,a=i.stride;n==ol.geom.GeometryLayout.XY||n==ol.geom.GeometryLayout.XYM?r=2:n==ol.geom.GeometryLayout.XYZ||n==ol.geom.GeometryLayout.XYZM?r=3:ol.asserts.assert(!1,34);var l,s,p=t.length,g="";if(p>0){for(g+=t[0],l=1;l<r;++l)g+=","+t[l];for(s=a;s<p;s+=a)for(g+=" "+t[s],l=1;l<r;++l)g+=","+t[s+l]}ol.format.XSD.writeStringTextNode(e,g)},ol.format.KML.writeDataNode_=function(e,t,o){e.setAttribute("name",t.name);var r={node:e},i=t.value;"object"==typeof i?(null!==i&&i.displayName&&ol.xml.pushSerializeAndPop(r,ol.format.KML.EXTENDEDDATA_NODE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,[i.displayName],o,["displayName"]),null!==i&&i.value&&ol.xml.pushSerializeAndPop(r,ol.format.KML.EXTENDEDDATA_NODE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,[i.value],o,["value"])):ol.xml.pushSerializeAndPop(r,ol.format.KML.EXTENDEDDATA_NODE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,[i],o,["value"])},ol.format.KML.writeDataNodeName_=function(e,t){ol.format.XSD.writeCDATASection(e,t)},ol.format.KML.writeDataNodeValue_=function(e,t){ol.format.XSD.writeStringTextNode(e,t)},ol.format.KML.writeDocument_=function(e,t,o){var r={node:e};ol.xml.pushSerializeAndPop(r,ol.format.KML.DOCUMENT_SERIALIZERS_,ol.format.KML.DOCUMENT_NODE_FACTORY_,t,o,void 0,this)},ol.format.KML.writeExtendedData_=function(e,t,o){for(var r={node:e},i=t.names,n=t.values,a=i.length,l=0;l<a;l++)ol.xml.pushSerializeAndPop(r,ol.format.KML.EXTENDEDDATA_NODE_SERIALIZERS_,ol.format.KML.DATA_NODE_FACTORY_,[{name:i[l],value:n[l]}],o)},ol.format.KML.writeIcon_=function(e,t,o){var r={node:e},i=o[o.length-1].node,n=ol.format.KML.ICON_SEQUENCE_[i.namespaceURI],a=ol.xml.makeSequence(t,n);ol.xml.pushSerializeAndPop(r,ol.format.KML.ICON_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,a,o,n),n=ol.format.KML.ICON_SEQUENCE_[ol.format.KML.GX_NAMESPACE_URIS_[0]],a=ol.xml.makeSequence(t,n),ol.xml.pushSerializeAndPop(r,ol.format.KML.ICON_SERIALIZERS_,ol.format.KML.GX_NODE_FACTORY_,a,o,n)},ol.format.KML.writeIconStyle_=function(e,t,o){var r={node:e},i={},n=t.getSrc(),a=t.getSize(),l=t.getImageSize(),s={href:n};if(a){s.w=a[0],s.h=a[1];var p=t.getAnchor(),g=t.getOrigin();if(g&&l&&0!==g[0]&&g[1]!==a[1]&&(s.x=g[0],s.y=l[1]-(g[1]+a[1])),p&&0!==p[0]&&p[1]!==a[1]){var u={x:p[0],xunits:ol.style.IconAnchorUnits.PIXELS,y:a[1]-p[1],yunits:ol.style.IconAnchorUnits.PIXELS};i.hotSpot=u}}i.Icon=s;var c=t.getScale();1!==c&&(i.scale=c);var y=t.getRotation();0!==y&&(i.heading=y);var h=o[o.length-1].node,d=ol.format.KML.ICON_STYLE_SEQUENCE_[h.namespaceURI],f=ol.xml.makeSequence(i,d);ol.xml.pushSerializeAndPop(r,ol.format.KML.ICON_STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,f,o,d)},ol.format.KML.writeLabelStyle_=function(e,t,o){var r={node:e},i={},n=t.getFill();n&&(i.color=n.getColor());var a=t.getScale();a&&1!==a&&(i.scale=a);var l=o[o.length-1].node,s=ol.format.KML.LABEL_STYLE_SEQUENCE_[l.namespaceURI],p=ol.xml.makeSequence(i,s);ol.xml.pushSerializeAndPop(r,ol.format.KML.LABEL_STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,p,o,s)},ol.format.KML.writeLineStyle_=function(e,t,o){var r={node:e},i={color:t.getColor(),width:t.getWidth()},n=o[o.length-1].node,a=ol.format.KML.LINE_STYLE_SEQUENCE_[n.namespaceURI],l=ol.xml.makeSequence(i,a);ol.xml.pushSerializeAndPop(r,ol.format.KML.LINE_STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,l,o,a)},ol.format.KML.writeMultiGeometry_=function(e,t,o){var r,i,n={node:e},a=t.getType();a==ol.geom.GeometryType.GEOMETRY_COLLECTION?(r=t.getGeometries(),i=ol.format.KML.GEOMETRY_NODE_FACTORY_):a==ol.geom.GeometryType.MULTI_POINT?(r=t.getPoints(),i=ol.format.KML.POINT_NODE_FACTORY_):a==ol.geom.GeometryType.MULTI_LINE_STRING?(r=t.getLineStrings(),i=ol.format.KML.LINE_STRING_NODE_FACTORY_):a==ol.geom.GeometryType.MULTI_POLYGON?(r=t.getPolygons(),i=ol.format.KML.POLYGON_NODE_FACTORY_):ol.asserts.assert(!1,39),ol.xml.pushSerializeAndPop(n,ol.format.KML.MULTI_GEOMETRY_SERIALIZERS_,i,r,o)},ol.format.KML.writeBoundaryIs_=function(e,t,o){var r={node:e};ol.xml.pushSerializeAndPop(r,ol.format.KML.BOUNDARY_IS_SERIALIZERS_,ol.format.KML.LINEAR_RING_NODE_FACTORY_,[t],o)},ol.format.KML.writePlacemark_=function(e,t,o){var r={node:e};t.getId()&&e.setAttribute("id",t.getId());var i=t.getProperties(),n={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};n[t.getGeometryName()]=1;var a=Object.keys(i||{}).sort().filter(function(e){return!n[e]});if(a.length>0){var l=ol.xml.makeSequence(i,a),s={names:a,values:l};ol.xml.pushSerializeAndPop(r,ol.format.KML.PLACEMARK_SERIALIZERS_,ol.format.KML.EXTENDEDDATA_NODE_FACTORY_,[s],o)}var p=t.getStyleFunction();if(p){var g=p.call(t,0);if(g){var u=Array.isArray(g)?g[0]:g;this.writeStyles_&&(i.Style=u);var c=u.getText();c&&(i.name=c.getText())}}var y=o[o.length-1].node,h=ol.format.KML.PLACEMARK_SEQUENCE_[y.namespaceURI],d=ol.xml.makeSequence(i,h);ol.xml.pushSerializeAndPop(r,ol.format.KML.PLACEMARK_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,d,o,h);var f=o[0],m=t.getGeometry();m&&(m=ol.format.Feature.transformWithOptions(m,!0,f)),ol.xml.pushSerializeAndPop(r,ol.format.KML.PLACEMARK_SERIALIZERS_,ol.format.KML.GEOMETRY_NODE_FACTORY_,[m],o)},ol.format.KML.writePrimitiveGeometry_=function(e,t,o){var r=t.getFlatCoordinates(),i={node:e};i.layout=t.getLayout(),i.stride=t.getStride(),ol.xml.pushSerializeAndPop(i,ol.format.KML.PRIMITIVE_GEOMETRY_SERIALIZERS_,ol.format.KML.COORDINATES_NODE_FACTORY_,[r],o)},ol.format.KML.writePolygon_=function(e,t,o){var r=t.getLinearRings(),i=r.shift(),n={node:e};ol.xml.pushSerializeAndPop(n,ol.format.KML.POLYGON_SERIALIZERS_,ol.format.KML.INNER_BOUNDARY_NODE_FACTORY_,r,o),ol.xml.pushSerializeAndPop(n,ol.format.KML.POLYGON_SERIALIZERS_,ol.format.KML.OUTER_BOUNDARY_NODE_FACTORY_,[i],o)},ol.format.KML.writePolyStyle_=function(e,t,o){var r={node:e};ol.xml.pushSerializeAndPop(r,ol.format.KML.POLY_STYLE_SERIALIZERS_,ol.format.KML.COLOR_NODE_FACTORY_,[t.getColor()],o)};ol.format.KML.writeScaleTextNode_=function(e,t){ol.format.XSD.writeDecimalTextNode(e,Math.round(1e6*t)/1e6)};ol.format.KML.writeStyle_=function(e,t,o){var r={node:e},i={},n=t.getFill(),a=t.getStroke(),l=t.getImage(),s=t.getText();l instanceof ol.style.Icon&&(i.IconStyle=l),s&&(i.LabelStyle=s),a&&(i.LineStyle=a),n&&(i.PolyStyle=n);var p=o[o.length-1].node,g=ol.format.KML.STYLE_SEQUENCE_[p.namespaceURI],u=ol.xml.makeSequence(i,g);ol.xml.pushSerializeAndPop(r,ol.format.KML.STYLE_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,u,o,g)},ol.format.KML.writeVec2_=function(e,t){e.setAttribute("x",t.x),e.setAttribute("y",t.y),e.setAttribute("xunits",t.xunits),e.setAttribute("yunits",t.yunits)},ol.format.KML.KML_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["Document","Placemark"]),ol.format.KML.KML_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Document:ol.xml.makeChildAppender(ol.format.KML.writeDocument_),Placemark:ol.xml.makeChildAppender(ol.format.KML.writePlacemark_)}),ol.format.KML.DOCUMENT_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Placemark:ol.xml.makeChildAppender(ol.format.KML.writePlacemark_)}),ol.format.KML.EXTENDEDDATA_NODE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Data:ol.xml.makeChildAppender(ol.format.KML.writeDataNode_),value:ol.xml.makeChildAppender(ol.format.KML.writeDataNodeValue_),displayName:ol.xml.makeChildAppender(ol.format.KML.writeDataNodeName_)}),ol.format.KML.GEOMETRY_TYPE_TO_NODENAME_={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},ol.format.KML.ICON_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["href"],ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,["x","y","w","h"])),ol.format.KML.ICON_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{href:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)},ol.xml.makeStructureNS(ol.format.KML.GX_NAMESPACE_URIS_,{x:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),y:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),w:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),h:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode)})),ol.format.KML.ICON_STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["scale","heading","Icon","hotSpot"]),ol.format.KML.ICON_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{Icon:ol.xml.makeChildAppender(ol.format.KML.writeIcon_),heading:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode),hotSpot:ol.xml.makeChildAppender(ol.format.KML.writeVec2_),scale:ol.xml.makeChildAppender(ol.format.KML.writeScaleTextNode_)}),ol.format.KML.LABEL_STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["color","scale"]),ol.format.KML.LABEL_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeChildAppender(ol.format.KML.writeColorTextNode_),scale:ol.xml.makeChildAppender(ol.format.KML.writeScaleTextNode_)}),ol.format.KML.LINE_STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["color","width"]),ol.format.KML.LINE_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeChildAppender(ol.format.KML.writeColorTextNode_),width:ol.xml.makeChildAppender(ol.format.XSD.writeDecimalTextNode)}),ol.format.KML.BOUNDARY_IS_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LinearRing:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_)}),ol.format.KML.MULTI_GEOMETRY_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{LineString:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),Point:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),Polygon:ol.xml.makeChildAppender(ol.format.KML.writePolygon_),GeometryCollection:ol.xml.makeChildAppender(ol.format.KML.writeMultiGeometry_)}),ol.format.KML.PLACEMARK_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),ol.format.KML.PLACEMARK_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{ExtendedData:ol.xml.makeChildAppender(ol.format.KML.writeExtendedData_),MultiGeometry:ol.xml.makeChildAppender(ol.format.KML.writeMultiGeometry_),LineString:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),LinearRing:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),Point:ol.xml.makeChildAppender(ol.format.KML.writePrimitiveGeometry_),Polygon:ol.xml.makeChildAppender(ol.format.KML.writePolygon_),Style:ol.xml.makeChildAppender(ol.format.KML.writeStyle_),address:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),description:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),name:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),open:ol.xml.makeChildAppender(ol.format.XSD.writeBooleanTextNode),phoneNumber:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),styleUrl:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode),visibility:ol.xml.makeChildAppender(ol.format.XSD.writeBooleanTextNode)}),ol.format.KML.PRIMITIVE_GEOMETRY_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{coordinates:ol.xml.makeChildAppender(ol.format.KML.writeCoordinatesTextNode_)}),ol.format.KML.POLYGON_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{outerBoundaryIs:ol.xml.makeChildAppender(ol.format.KML.writeBoundaryIs_),innerBoundaryIs:ol.xml.makeChildAppender(ol.format.KML.writeBoundaryIs_)}),ol.format.KML.POLY_STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{color:ol.xml.makeChildAppender(ol.format.KML.writeColorTextNode_)}),ol.format.KML.STYLE_SEQUENCE_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),ol.format.KML.STYLE_SERIALIZERS_=ol.xml.makeStructureNS(ol.format.KML.NAMESPACE_URIS_,{IconStyle:ol.xml.makeChildAppender(ol.format.KML.writeIconStyle_),LabelStyle:ol.xml.makeChildAppender(ol.format.KML.writeLabelStyle_),LineStyle:ol.xml.makeChildAppender(ol.format.KML.writeLineStyle_),PolyStyle:ol.xml.makeChildAppender(ol.format.KML.writePolyStyle_)}),ol.format.KML.GX_NODE_FACTORY_=function(e,t,o){return ol.xml.createElementNS(ol.format.KML.GX_NAMESPACE_URIS_[0],"gx:"+o)},ol.format.KML.DOCUMENT_NODE_FACTORY_=function(e,t,o){var r=t[t.length-1].node;return ol.xml.createElementNS(r.namespaceURI,"Placemark")},ol.format.KML.GEOMETRY_NODE_FACTORY_=function(e,t,o){if(e){var r=t[t.length-1].node;return ol.xml.createElementNS(r.namespaceURI,ol.format.KML.GEOMETRY_TYPE_TO_NODENAME_[e.getType()])}},ol.format.KML.COLOR_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("color"),ol.format.KML.COORDINATES_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("coordinates"),ol.format.KML.DATA_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("Data"),ol.format.KML.EXTENDEDDATA_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("ExtendedData"),ol.format.KML.INNER_BOUNDARY_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("innerBoundaryIs"),ol.format.KML.POINT_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("Point"),ol.format.KML.LINE_STRING_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("LineString"),ol.format.KML.LINEAR_RING_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("LinearRing"),ol.format.KML.POLYGON_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("Polygon"),ol.format.KML.OUTER_BOUNDARY_NODE_FACTORY_=ol.xml.makeSimpleNodeFactory("outerBoundaryIs"),ol.format.KML.prototype.writeFeatures,ol.format.KML.prototype.writeFeaturesNode=function(e,t){t=this.adaptOptions(t);var o=ol.xml.createElementNS(ol.format.KML.NAMESPACE_URIS_[4],"kml"),r="http://www.w3.org/2000/xmlns/",i="http://www.w3.org/2001/XMLSchema-instance";ol.xml.setAttributeNS(o,r,"xmlns:gx",ol.format.KML.GX_NAMESPACE_URIS_[0]),ol.xml.setAttributeNS(o,r,"xmlns:xsi",i),ol.xml.setAttributeNS(o,i,"xsi:schemaLocation",ol.format.KML.SCHEMA_LOCATION_);var n={node:o},a={};e.length>1?a.Document=e:1==e.length&&(a.Placemark=e[0]);var l=ol.format.KML.KML_SEQUENCE_[o.namespaceURI],s=ol.xml.makeSequence(a,l);return ol.xml.pushSerializeAndPop(n,ol.format.KML.KML_SERIALIZERS_,ol.xml.OBJECT_PROPERTY_NODE_FACTORY,s,[t],l,this),o},goog.provide("ol.ext.PBF"),ol.ext.PBF=function(){},function(){!function(e){"use strict";function t(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}function o(e,t,o){var r,n,a=o.buf;if(n=a[o.pos++],r=(112&n)>>4,n<128)return i(e,r,t);if(n=a[o.pos++],r|=(127&n)<<3,n<128)return i(e,r,t);if(n=a[o.pos++],r|=(127&n)<<10,n<128)return i(e,r,t);if(n=a[o.pos++],r|=(127&n)<<17,n<128)return i(e,r,t);if(n=a[o.pos++],r|=(127&n)<<24,n<128)return i(e,r,t);if(n=a[o.pos++],r|=(1&n)<<31,n<128)return i(e,r,t);throw new Error("Expected varint not more than 10 bytes")}function r(e){return e.type===t.Bytes?e.readVarint()+e.pos:e.pos+1}function i(e,t,o){return o?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function n(e,t){var o,r;if(e>=0?(o=e%4294967296|0,r=e/4294967296|0):(o=~(-e%4294967296),r=~(-e/4294967296),4294967295^o?o=o+1|0:(o=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),a(o,r,t),l(r,t)}function a(e,t,o){o.buf[o.pos++]=127&e|128,e>>>=7,o.buf[o.pos++]=127&e|128,e>>>=7,o.buf[o.pos++]=127&e|128,e>>>=7,o.buf[o.pos++]=127&e|128,e>>>=7,o.buf[o.pos]=127&e}function l(e,t){var o=(7&e)<<4;t.buf[t.pos++]|=o|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}function s(e,t,o){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));o.realloc(r);for(var i=o.pos-1;i>=e;i--)o.buf[i+r]=o.buf[i]}function p(e,t){for(var o=0;o<e.length;o++)t.writeVarint(e[o])}function g(e,t){for(var o=0;o<e.length;o++)t.writeSVarint(e[o])}function u(e,t){for(var o=0;o<e.length;o++)t.writeFloat(e[o])}function c(e,t){for(var o=0;o<e.length;o++)t.writeDouble(e[o])}function y(e,t){for(var o=0;o<e.length;o++)t.writeBoolean(e[o])}function h(e,t){for(var o=0;o<e.length;o++)t.writeFixed32(e[o])}function d(e,t){for(var o=0;o<e.length;o++)t.writeSFixed32(e[o])}function f(e,t){for(var o=0;o<e.length;o++)t.writeFixed64(e[o])}function m(e,t){for(var o=0;o<e.length;o++)t.writeSFixed64(e[o])}function v(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function _(e,t,o){e[o]=t,e[o+1]=t>>>8,e[o+2]=t>>>16,e[o+3]=t>>>24}function S(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function x(e,t,o){for(var r="",i=t;i<o;){var n=e[i],a=null,l=n>239?4:n>223?3:n>191?2:1;if(i+l>o)break;var s,p,g;1===l?n<128&&(a=n):2===l?(s=e[i+1],128===(192&s)&&(a=(31&n)<<6|63&s,a<=127&&(a=null))):3===l?(s=e[i+1],p=e[i+2],128===(192&s)&&128===(192&p)&&(a=(15&n)<<12|(63&s)<<6|63&p,(a<=2047||a>=55296&&a<=57343)&&(a=null))):4===l&&(s=e[i+1],p=e[i+2],g=e[i+3],128===(192&s)&&128===(192&p)&&128===(192&g)&&(a=(15&n)<<18|(63&s)<<12|(63&p)<<6|63&g,(a<=65535||a>=1114112)&&(a=null))),null===a?(a=65533,l=1):a>65535&&(a-=65536,r+=String.fromCharCode(a>>>10&1023|55296),a=56320|1023&a),r+=String.fromCharCode(a),i+=l}return r}function E(e,t,o){for(var r,i,n=0;n<t.length;n++){if(r=t.charCodeAt(n),r>55295&&r<57344){if(!i){r>56319||n+1===t.length?(e[o++]=239,e[o++]=191,e[o++]=189):i=r;continue}if(r<56320){e[o++]=239,e[o++]=191,e[o++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[o++]=239,e[o++]=191,e[o++]=189,i=null);r<128?e[o++]=r:(r<2048?e[o++]=r>>6|192:(r<65536?e[o++]=r>>12|224:(e[o++]=r>>18|240,e[o++]=r>>12&63|128),e[o++]=r>>6&63|128),e[o++]=63&r|128)}return o}var P=function(e,t,o,r,i){var n,a,l=8*i-r-1,s=(1<<l)-1,p=s>>1,g=-7,u=o?i-1:0,c=o?-1:1,y=e[t+u];for(u+=c,n=y&(1<<-g)-1,y>>=-g,g+=l;g>0;n=256*n+e[t+u],u+=c,g-=8);for(a=n&(1<<-g)-1,n>>=-g,g+=r;g>0;a=256*a+e[t+u],u+=c,g-=8);if(0===n)n=1-p;else{if(n===s)return a?NaN:(y?-1:1)*(1/0);a+=Math.pow(2,r),n-=p}return(y?-1:1)*a*Math.pow(2,n-r)},T=function(e,t,o,r,i,n){var a,l,s,p=8*n-i-1,g=(1<<p)-1,u=g>>1,c=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:n-1,h=r?1:-1,d=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,a=g):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),t+=a+u>=1?c/s:c*Math.pow(2,1-u),t*s>=2&&(a++,s/=2),a+u>=g?(l=0,a=g):a+u>=1?(l=(t*s-1)*Math.pow(2,i),a+=u):(l=t*Math.pow(2,u-1)*Math.pow(2,i),a=0));i>=8;e[o+y]=255&l,y+=h,l/=256,i-=8);for(a=a<<i|l,p+=i;p>0;e[o+y]=255&a,y+=h,a/=256,p-=8);e[o+y-h]|=128*d},R={read:P,write:T},L=t;t.Varint=0,t.Fixed64=1,t.Bytes=2,t.Fixed32=5;var M=4294967296,C=1/M;t.prototype={destroy:function(){this.buf=null},readFields:function(e,t,o){for(o=o||this.length;this.pos<o;){var r=this.readVarint(),i=r>>3,n=this.pos;this.type=7&r,e(i,t,this),this.pos===n&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=v(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=S(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=v(this.buf,this.pos)+v(this.buf,this.pos+4)*M;return this.pos+=8,e},readSFixed64:function(){var e=v(this.buf,this.pos)+S(this.buf,this.pos+4)*M;return this.pos+=8,e},readFloat:function(){var e=R.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=R.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,r,i=this.buf;return r=i[this.pos++],t=127&r,r<128?t:(r=i[this.pos++],t|=(127&r)<<7,r<128?t:(r=i[this.pos++],t|=(127&r)<<14,r<128?t:(r=i[this.pos++],t|=(127&r)<<21,r<128?t:(r=i[this.pos],t|=(15&r)<<28,o(t,e,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=x(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var o=r(this);for(e=e||[];this.pos<o;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var o=7&e;if(o===t.Varint)for(;this.buf[this.pos++]>127;);else if(o===t.Bytes)this.pos=this.readVarint()+this.pos;else if(o===t.Fixed32)this.pos+=4;else{if(o!==t.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var o=new Uint8Array(t);o.set(this.buf),this.buf=o,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),_(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),_(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),_(this.buf,e&-1,this.pos),_(this.buf,Math.floor(e*C),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),_(this.buf,e&-1,this.pos),_(this.buf,Math.floor(e*C),this.pos+4),this.pos+=8},writeVarint:function(e){return e=+e||0,e>268435455||e<0?void n(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),void(e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127)))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=E(this.buf,e,this.pos);var o=this.pos-t;o>=128&&s(t,o,this),this.pos=t-1,this.writeVarint(o),this.pos+=o},writeFloat:function(e){this.realloc(4),R.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),R.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var o=0;o<t;o++)this.buf[this.pos++]=e[o]},writeRawMessage:function(e,t){this.pos++;var o=this.pos;e(t,this);var r=this.pos-o;r>=128&&s(o,r,this),this.pos=o-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,o,r){this.writeTag(e,t.Bytes),this.writeRawMessage(o,r)},writePackedVarint:function(e,t){this.writeMessage(e,p,t)},writePackedSVarint:function(e,t){this.writeMessage(e,g,t)},writePackedBoolean:function(e,t){this.writeMessage(e,y,t)},writePackedFloat:function(e,t){this.writeMessage(e,u,t)},writePackedDouble:function(e,t){this.writeMessage(e,c,t)},writePackedFixed32:function(e,t){this.writeMessage(e,h,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,d,t)},writePackedFixed64:function(e,t){this.writeMessage(e,f,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,m,t)},writeBytesField:function(e,o){this.writeTag(e,t.Bytes),this.writeBytes(o)},writeFixed32Field:function(e,o){this.writeTag(e,t.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(e,o){this.writeTag(e,t.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(e,o){this.writeTag(e,t.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(e,o){this.writeTag(e,t.Fixed64),this.writeSFixed64(o)},writeVarintField:function(e,o){this.writeTag(e,t.Varint),this.writeVarint(o)},writeSVarintField:function(e,o){this.writeTag(e,t.Varint),this.writeSVarint(o)},writeStringField:function(e,o){this.writeTag(e,t.Bytes),this.writeString(o)},writeFloatField:function(e,o){this.writeTag(e,t.Fixed32),this.writeFloat(o)},writeDoubleField:function(e,o){this.writeTag(e,t.Fixed64),this.writeDouble(o)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}},e.default=L}(this.PBF=this.PBF||{})}.call(ol.ext),ol.ext.PBF=ol.ext.PBF.default,goog.provide("ol.ext.vectortile.VectorTile"),ol.ext.vectortile.VectorTile=function(){},function(){!function(e){"use strict";function t(e,t){this.x=e,this.y=t}function o(e,t,o,i,n){this.properties={},this.extent=o,this.type=0,this._pbf=e,this._geometry=-1,this._keys=i,this._values=n,
e.readFields(r,this,t)}function r(e,t,o){1==e?t.id=o.readVarint():2==e?i(o,t):3==e?t.type=o.readVarint():4==e&&(t._geometry=o.pos)}function i(e,t){for(var o=e.readVarint()+e.pos;e.pos<o;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}function n(e){var t=e.length;if(t<=1)return[e];for(var o,r,i=[],n=0;n<t;n++){var l=a(e[n]);0!==l&&(void 0===r&&(r=l<0),r===l<0?(o&&i.push(o),o=[e[n]]):o.push(e[n]))}return o&&i.push(o),i}function a(e){for(var t,o,r=0,i=0,n=e.length,a=n-1;i<n;a=i++)t=e[i],o=e[a],r+=(o.x-t.x)*(t.y+o.y);return r}function l(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(s,this,t),this.length=this._features.length}function s(e,t,o){15===e?t.version=o.readVarint():1===e?t.name=o.readString():5===e?t.extent=o.readVarint():2===e?t._features.push(o.pos):3===e?t._keys.push(o.readString()):4===e&&t._values.push(p(o))}function p(e){for(var t=null,o=e.readVarint()+e.pos;e.pos<o;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}function g(e,t){this.layers=e.readFields(u,{},t)}function u(e,t,o){if(3===e){var r=new h(o,o.readVarint()+o.pos);r.length&&(t[r.name]=r)}}var c=t;t.prototype={clone:function(){return new t(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,o=e.y-this.y;return t*t+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,o=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=o,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),o=Math.sin(e),r=t*this.x-o*this.y,i=o*this.x+t*this.y;return this.x=r,this.y=i,this},_rotateAround:function(e,t){var o=Math.cos(e),r=Math.sin(e),i=t.x+o*(this.x-t.x)-r*(this.y-t.y),n=t.y+r*(this.x-t.x)+o*(this.y-t.y);return this.x=i,this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},t.convert=function(e){return e instanceof t?e:Array.isArray(e)?new t(e[0],e[1]):e};var y=o;o.types=["Unknown","Point","LineString","Polygon"],o.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,o=e.readVarint()+e.pos,r=1,i=0,n=0,a=0,l=[];e.pos<o;){if(!i){var s=e.readVarint();r=7&s,i=s>>3}if(i--,1===r||2===r)n+=e.readSVarint(),a+=e.readSVarint(),1===r&&(t&&l.push(t),t=[]),t.push(new c(n,a));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&l.push(t),l},o.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,o=1,r=0,i=0,n=0,a=1/0,l=-(1/0),s=1/0,p=-(1/0);e.pos<t;){if(!r){var g=e.readVarint();o=7&g,r=g>>3}if(r--,1===o||2===o)i+=e.readSVarint(),n+=e.readSVarint(),i<a&&(a=i),i>l&&(l=i),n<s&&(s=n),n>p&&(p=n);else if(7!==o)throw new Error("unknown command "+o)}return[a,s,l,p]},o.prototype.toGeoJSON=function(e,t,r){function i(e){for(var t=0;t<e.length;t++){var o=e[t],r=180-360*(o.y+g)/s;e[t]=[360*(o.x+p)/s-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}var a,l,s=this.extent*Math.pow(2,r),p=this.extent*e,g=this.extent*t,u=this.loadGeometry(),c=o.types[this.type];switch(this.type){case 1:var y=[];for(a=0;a<u.length;a++)y[a]=u[a][0];u=y,i(u);break;case 2:for(a=0;a<u.length;a++)i(u[a]);break;case 3:for(u=n(u),a=0;a<u.length;a++)for(l=0;l<u[a].length;l++)i(u[a][l])}1===u.length?u=u[0]:c="Multi"+c;var h={type:"Feature",geometry:{type:c,coordinates:u},properties:this.properties};return"id"in this&&(h.id=this.id),h};var h=l;l.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new y(this._pbf,t,this.extent,this._keys,this._values)};var d=g,f=d,m=y,v=h,_={VectorTile:f,VectorTileFeature:m,VectorTileLayer:v};e.default=_,e.VectorTile=f,e.VectorTileFeature=m,e.VectorTileLayer=v}(this.vectortile=this.vectortile||{})}.call(ol.ext),goog.provide("ol.render.Feature"),goog.require("ol"),goog.require("ol.extent"),goog.require("ol.geom.GeometryType"),ol.render.Feature=function(e,t,o,r,i){this.extent_,this.id_=i,this.type_=e,this.flatCoordinates_=t,this.ends_=o,this.properties_=r},ol.render.Feature.prototype.get=function(e){return this.properties_[e]},ol.render.Feature.prototype.getEnds=function(){return this.ends_},ol.render.Feature.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===ol.geom.GeometryType.POINT?ol.extent.createOrUpdateFromCoordinate(this.flatCoordinates_):ol.extent.createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},ol.render.Feature.prototype.getId=function(){return this.id_},ol.render.Feature.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},ol.render.Feature.prototype.getFlatCoordinates=ol.render.Feature.prototype.getOrientedFlatCoordinates,ol.render.Feature.prototype.getGeometry=function(){return this},ol.render.Feature.prototype.getProperties=function(){return this.properties_},ol.render.Feature.prototype.getSimplifiedGeometry=ol.render.Feature.prototype.getGeometry,ol.render.Feature.prototype.getStride=function(){return 2},ol.render.Feature.prototype.getStyleFunction=ol.nullFunction,ol.render.Feature.prototype.getType=function(){return this.type_},goog.provide("ol.format.MVT"),goog.require("ol"),goog.require("ol.ext.PBF"),goog.require("ol.ext.vectortile.VectorTile"),goog.require("ol.format.Feature"),goog.require("ol.format.FormatType"),goog.require("ol.geom.GeometryLayout"),goog.require("ol.geom.GeometryType"),goog.require("ol.geom.LineString"),goog.require("ol.geom.MultiLineString"),goog.require("ol.geom.MultiPoint"),goog.require("ol.geom.Point"),goog.require("ol.geom.Polygon"),goog.require("ol.proj.Projection"),goog.require("ol.proj.Units"),goog.require("ol.render.Feature"),ol.format.MVT=function(e){ol.format.Feature.call(this);var t=e?e:{};this.defaultDataProjection=new ol.proj.Projection({code:"",units:ol.proj.Units.TILE_PIXELS}),this.featureClass_=t.featureClass?t.featureClass:ol.render.Feature,this.geometryName_=t.geometryName,this.layerName_=t.layerName?t.layerName:"layer",this.layers_=t.layers?t.layers:null},ol.inherits(ol.format.MVT,ol.format.Feature),ol.format.MVT.prototype.getType=function(){return ol.format.FormatType.ARRAY_BUFFER},ol.format.MVT.prototype.readFeature_=function(e,t,o){var r=new this.featureClass_,i=e.id,n=e.properties;n[this.layerName_]=t,this.geometryName_&&r.setGeometryName(this.geometryName_);var a=ol.format.Feature.transformWithOptions(ol.format.MVT.readGeometry_(e),!1,this.adaptOptions(o));return r.setGeometry(a),r.setId(i),r.setProperties(n),r},ol.format.MVT.prototype.readRenderFeature_=function(e,t){var o=e.loadGeometry(),r=[],i=[];ol.format.MVT.calculateFlatCoordinates_(o,i,r);var n,a=e.type;1===a?n=1===o.length?ol.geom.GeometryType.POINT:ol.geom.GeometryType.MULTI_POINT:2===a?n=1===o.length?ol.geom.GeometryType.LINE_STRING:ol.geom.GeometryType.MULTI_LINE_STRING:3===a&&(n=ol.geom.GeometryType.POLYGON);var l=e.properties;l[this.layerName_]=t;var s=e.id;return new this.featureClass_(n,i,r,l,s)},ol.format.MVT.prototype.readFeatures=function(e,t){var o,r,i=this.layers_,n=new ol.ext.PBF(e),a=new ol.ext.vectortile.VectorTile(n),l=[],s=this.featureClass_;for(var p in a.layers)if(!i||i.indexOf(p)!=-1){o=a.layers[p];for(var g=0,u=o.length;g<u;++g)r=s===ol.render.Feature?this.readRenderFeature_(o.feature(g),p):this.readFeature_(o.feature(g),p,t),l.push(r)}return l},ol.format.MVT.prototype.readProjection=function(e){return this.defaultDataProjection},ol.format.MVT.prototype.setLayers=function(e){this.layers_=e},ol.format.MVT.calculateFlatCoordinates_=function(e,t,o){for(var r=0,i=0,n=e.length;i<n;++i){var a,l,s=e[i];for(a=0,l=s.length;a<l;++a){var p=s[a];t.push(p.x,p.y)}r+=2*a,o.push(r)}},ol.format.MVT.readGeometry_=function(e){var t=e.type;if(0===t)return null;var o=e.loadGeometry(),r=[],i=[];ol.format.MVT.calculateFlatCoordinates_(o,i,r);var n;return 1===t?n=1===o.length?new ol.geom.Point(null):new ol.geom.MultiPoint(null):2===t?n=1===o.length?new ol.geom.LineString(null):new ol.geom.MultiLineString(null):3===t&&(n=new ol.geom.Polygon(null)),n.setFlatCoordinates(ol.geom.GeometryLayout.XY,i,r),n},ol.format.MVT.prototype.readFeature=function(){},ol.format.MVT.prototype.readGeometry=function(){},ol.format.MVT.prototype.writeFeature=function(){},ol.format.MVT.prototype.writeGeometry=function(){},ol.format.MVT.prototype.writeFeatures=function(){},goog.provide("ol.format.OSMXML"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.Feature"),goog.require("ol.format.Feature"),goog.require("ol.format.XMLFeature"),goog.require("ol.geom.GeometryLayout"),goog.require("ol.geom.LineString"),goog.require("ol.geom.Point"),goog.require("ol.geom.Polygon"),goog.require("ol.obj"),goog.require("ol.proj"),goog.require("ol.xml"),ol.format.OSMXML=function(){ol.format.XMLFeature.call(this),this.defaultDataProjection=ol.proj.get("EPSG:4326")},ol.inherits(ol.format.OSMXML,ol.format.XMLFeature),ol.format.OSMXML.readNode_=function(e,t){var o=t[0],r=t[t.length-1],i=e.getAttribute("id"),n=[parseFloat(e.getAttribute("lon")),parseFloat(e.getAttribute("lat"))];r.nodes[i]=n;var a=ol.xml.pushParseAndPop({tags:{}},ol.format.OSMXML.NODE_PARSERS_,e,t);if(!ol.obj.isEmpty(a.tags)){var l=new ol.geom.Point(n);ol.format.Feature.transformWithOptions(l,!1,o);var s=new ol.Feature(l);s.setId(i),s.setProperties(a.tags),r.features.push(s)}},ol.format.OSMXML.readWay_=function(e,t){for(var o=t[0],r=e.getAttribute("id"),i=ol.xml.pushParseAndPop({ndrefs:[],tags:{}},ol.format.OSMXML.WAY_PARSERS_,e,t),n=t[t.length-1],a=[],l=0,s=i.ndrefs.length;l<s;l++){var p=n.nodes[i.ndrefs[l]];ol.array.extend(a,p)}var g;i.ndrefs[0]==i.ndrefs[i.ndrefs.length-1]?(g=new ol.geom.Polygon(null),g.setFlatCoordinates(ol.geom.GeometryLayout.XY,a,[a.length])):(g=new ol.geom.LineString(null),g.setFlatCoordinates(ol.geom.GeometryLayout.XY,a)),ol.format.Feature.transformWithOptions(g,!1,o);var u=new ol.Feature(g);u.setId(r),u.setProperties(i.tags),n.features.push(u)},ol.format.OSMXML.readNd_=function(e,t){var o=t[t.length-1];o.ndrefs.push(e.getAttribute("ref"))},ol.format.OSMXML.readTag_=function(e,t){var o=t[t.length-1];o.tags[e.getAttribute("k")]=e.getAttribute("v")},ol.format.OSMXML.NAMESPACE_URIS_=[null],ol.format.OSMXML.WAY_PARSERS_=ol.xml.makeStructureNS(ol.format.OSMXML.NAMESPACE_URIS_,{nd:ol.format.OSMXML.readNd_,tag:ol.format.OSMXML.readTag_}),ol.format.OSMXML.PARSERS_=ol.xml.makeStructureNS(ol.format.OSMXML.NAMESPACE_URIS_,{node:ol.format.OSMXML.readNode_,way:ol.format.OSMXML.readWay_}),ol.format.OSMXML.NODE_PARSERS_=ol.xml.makeStructureNS(ol.format.OSMXML.NAMESPACE_URIS_,{tag:ol.format.OSMXML.readTag_}),ol.format.OSMXML.prototype.readFeatures,ol.format.OSMXML.prototype.readFeaturesFromNode=function(e,t){var o=this.getReadOptions(e,t);if("osm"==e.localName){var r=ol.xml.pushParseAndPop({nodes:{},features:[]},ol.format.OSMXML.PARSERS_,e,[o]);if(r.features)return r.features}return[]},ol.format.OSMXML.prototype.readProjection,ol.format.OSMXML.prototype.writeFeatureNode=function(e,t){},ol.format.OSMXML.prototype.writeFeaturesNode=function(e,t){},ol.format.OSMXML.prototype.writeGeometryNode=function(e,t){},goog.provide("ol.format.XLink"),ol.format.XLink.NAMESPACE_URI="http://www.w3.org/1999/xlink",ol.format.XLink.readHref=function(e){return e.getAttributeNS(ol.format.XLink.NAMESPACE_URI,"href")},goog.provide("ol.format.XML"),goog.require("ol.xml"),ol.format.XML=function(){},ol.format.XML.prototype.read=function(e){if(ol.xml.isDocument(e))return this.readFromDocument(e);if(ol.xml.isNode(e))return this.readFromNode(e);if("string"==typeof e){var t=ol.xml.parse(e);return this.readFromDocument(t)}return null},ol.format.XML.prototype.readFromDocument=function(e){},ol.format.XML.prototype.readFromNode=function(e){},goog.provide("ol.format.OWS"),goog.require("ol"),goog.require("ol.format.XLink"),goog.require("ol.format.XML"),goog.require("ol.format.XSD"),goog.require("ol.xml"),ol.format.OWS=function(){ol.format.XML.call(this)},ol.inherits(ol.format.OWS,ol.format.XML),ol.format.OWS.prototype.readFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null},ol.format.OWS.prototype.readFromNode=function(e){var t=ol.xml.pushParseAndPop({},ol.format.OWS.PARSERS_,e,[]);return t?t:null},ol.format.OWS.readAddress_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.OWS.ADDRESS_PARSERS_,e,t)},ol.format.OWS.readAllowedValues_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.OWS.ALLOWED_VALUES_PARSERS_,e,t)},ol.format.OWS.readConstraint_=function(e,t){var o=e.getAttribute("name");if(o)return ol.xml.pushParseAndPop({name:o},ol.format.OWS.CONSTRAINT_PARSERS_,e,t)},ol.format.OWS.readContactInfo_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.OWS.CONTACT_INFO_PARSERS_,e,t)},ol.format.OWS.readDcp_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.OWS.DCP_PARSERS_,e,t)},ol.format.OWS.readGet_=function(e,t){var o=ol.format.XLink.readHref(e);if(o)return ol.xml.pushParseAndPop({href:o},ol.format.OWS.REQUEST_METHOD_PARSERS_,e,t)},ol.format.OWS.readHttp_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.OWS.HTTP_PARSERS_,e,t)},ol.format.OWS.readOperation_=function(e,t){var o=e.getAttribute("name"),r=ol.xml.pushParseAndPop({},ol.format.OWS.OPERATION_PARSERS_,e,t);if(r){var i=t[t.length-1];i[o]=r}},ol.format.OWS.readOperationsMetadata_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.OWS.OPERATIONS_METADATA_PARSERS_,e,t)},ol.format.OWS.readPhone_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.OWS.PHONE_PARSERS_,e,t)},ol.format.OWS.readServiceIdentification_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.OWS.SERVICE_IDENTIFICATION_PARSERS_,e,t)},ol.format.OWS.readServiceContact_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.OWS.SERVICE_CONTACT_PARSERS_,e,t)},ol.format.OWS.readServiceProvider_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.OWS.SERVICE_PROVIDER_PARSERS_,e,t)},ol.format.OWS.readValue_=function(e,t){return ol.format.XSD.readString(e)},ol.format.OWS.NAMESPACE_URIS_=[null,"http://www.opengis.net/ows/1.1"],ol.format.OWS.PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{ServiceIdentification:ol.xml.makeObjectPropertySetter(ol.format.OWS.readServiceIdentification_),ServiceProvider:ol.xml.makeObjectPropertySetter(ol.format.OWS.readServiceProvider_),OperationsMetadata:ol.xml.makeObjectPropertySetter(ol.format.OWS.readOperationsMetadata_)}),ol.format.OWS.ADDRESS_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{DeliveryPoint:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),City:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),AdministrativeArea:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),PostalCode:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Country:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ElectronicMailAddress:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}),ol.format.OWS.ALLOWED_VALUES_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Value:ol.xml.makeObjectPropertyPusher(ol.format.OWS.readValue_)}),ol.format.OWS.CONSTRAINT_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{AllowedValues:ol.xml.makeObjectPropertySetter(ol.format.OWS.readAllowedValues_)}),ol.format.OWS.CONTACT_INFO_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Phone:ol.xml.makeObjectPropertySetter(ol.format.OWS.readPhone_),Address:ol.xml.makeObjectPropertySetter(ol.format.OWS.readAddress_)}),ol.format.OWS.DCP_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{HTTP:ol.xml.makeObjectPropertySetter(ol.format.OWS.readHttp_)}),ol.format.OWS.HTTP_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Get:ol.xml.makeObjectPropertyPusher(ol.format.OWS.readGet_),Post:void 0}),ol.format.OWS.OPERATION_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{DCP:ol.xml.makeObjectPropertySetter(ol.format.OWS.readDcp_)}),ol.format.OWS.OPERATIONS_METADATA_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Operation:ol.format.OWS.readOperation_}),ol.format.OWS.PHONE_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Voice:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Facsimile:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}),ol.format.OWS.REQUEST_METHOD_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Constraint:ol.xml.makeObjectPropertyPusher(ol.format.OWS.readConstraint_)}),ol.format.OWS.SERVICE_CONTACT_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{IndividualName:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),PositionName:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactInfo:ol.xml.makeObjectPropertySetter(ol.format.OWS.readContactInfo_)}),ol.format.OWS.SERVICE_IDENTIFICATION_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ServiceTypeVersion:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ServiceType:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}),ol.format.OWS.SERVICE_PROVIDER_PARSERS_=ol.xml.makeStructureNS(ol.format.OWS.NAMESPACE_URIS_,{ProviderName:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ProviderSite:ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref),ServiceContact:ol.xml.makeObjectPropertySetter(ol.format.OWS.readServiceContact_)}),goog.provide("ol.geom.flat.flip"),ol.geom.flat.flip.flipXY=function(e,t,o,r,i,n){var a,l;void 0!==i?(a=i,l=void 0!==n?n:0):(a=[],l=0);for(var s=t;s<o;){var p=e[s++];a[l++]=e[s++],a[l++]=p;for(var g=2;g<r;++g)a[l++]=e[s++]}return a.length=l,a},goog.provide("ol.format.Polyline"),goog.require("ol"),goog.require("ol.asserts"),goog.require("ol.Feature"),goog.require("ol.format.Feature"),goog.require("ol.format.TextFeature"),goog.require("ol.geom.GeometryLayout"),goog.require("ol.geom.LineString"),goog.require("ol.geom.SimpleGeometry"),goog.require("ol.geom.flat.flip"),goog.require("ol.geom.flat.inflate"),goog.require("ol.proj"),ol.format.Polyline=function(e){var t=e?e:{};ol.format.TextFeature.call(this),this.defaultDataProjection=ol.proj.get("EPSG:4326"),this.factor_=t.factor?t.factor:1e5,this.geometryLayout_=t.geometryLayout?t.geometryLayout:ol.geom.GeometryLayout.XY},ol.inherits(ol.format.Polyline,ol.format.TextFeature),ol.format.Polyline.encodeDeltas=function(e,t,o){var r,i=o?o:1e5,n=new Array(t);for(r=0;r<t;++r)n[r]=0;var a,l;for(a=0,l=e.length;a<l;)for(r=0;r<t;++r,++a){var s=e[a],p=s-n[r];n[r]=s,e[a]=p}return ol.format.Polyline.encodeFloats(e,i)},ol.format.Polyline.decodeDeltas=function(e,t,o){var r,i=o?o:1e5,n=new Array(t);for(r=0;r<t;++r)n[r]=0;var a,l,s=ol.format.Polyline.decodeFloats(e,i);for(a=0,l=s.length;a<l;)for(r=0;r<t;++r,++a)n[r]+=s[a],s[a]=n[r];return s},ol.format.Polyline.encodeFloats=function(e,t){var o,r,i=t?t:1e5;for(o=0,r=e.length;o<r;++o)e[o]=Math.round(e[o]*i);return ol.format.Polyline.encodeSignedIntegers(e)},ol.format.Polyline.decodeFloats=function(e,t){var o,r,i=t?t:1e5,n=ol.format.Polyline.decodeSignedIntegers(e);for(o=0,r=n.length;o<r;++o)n[o]/=i;return n},ol.format.Polyline.encodeSignedIntegers=function(e){var t,o;for(t=0,o=e.length;t<o;++t){var r=e[t];e[t]=r<0?~(r<<1):r<<1}return ol.format.Polyline.encodeUnsignedIntegers(e)},ol.format.Polyline.decodeSignedIntegers=function(e){var t,o,r=ol.format.Polyline.decodeUnsignedIntegers(e);for(t=0,o=r.length;t<o;++t){var i=r[t];r[t]=1&i?~(i>>1):i>>1}return r},ol.format.Polyline.encodeUnsignedIntegers=function(e){var t,o,r="";for(t=0,o=e.length;t<o;++t)r+=ol.format.Polyline.encodeUnsignedInteger(e[t]);return r},ol.format.Polyline.decodeUnsignedIntegers=function(e){var t,o,r=[],i=0,n=0;for(t=0,o=e.length;t<o;++t){var a=e.charCodeAt(t)-63;i|=(31&a)<<n,a<32?(r.push(i),i=0,n=0):n+=5}return r},ol.format.Polyline.encodeUnsignedInteger=function(e){for(var t,o="";e>=32;)t=(32|31&e)+63,o+=String.fromCharCode(t),e>>=5;return t=e+63,o+=String.fromCharCode(t)},ol.format.Polyline.prototype.readFeature,ol.format.Polyline.prototype.readFeatureFromText=function(e,t){var o=this.readGeometryFromText(e,t);return new ol.Feature(o)},ol.format.Polyline.prototype.readFeatures,ol.format.Polyline.prototype.readFeaturesFromText=function(e,t){var o=this.readFeatureFromText(e,t);return[o]};ol.format.Polyline.prototype.readGeometry;ol.format.Polyline.prototype.readGeometryFromText=function(e,t){var o=ol.geom.SimpleGeometry.getStrideForLayout(this.geometryLayout_),r=ol.format.Polyline.decodeDeltas(e,o,this.factor_);ol.geom.flat.flip.flipXY(r,0,r.length,o,r);var i=ol.geom.flat.inflate.coordinates(r,0,r.length,o);return ol.format.Feature.transformWithOptions(new ol.geom.LineString(i,this.geometryLayout_),!1,this.adaptOptions(t))},ol.format.Polyline.prototype.readProjection,ol.format.Polyline.prototype.writeFeatureText=function(e,t){var o=e.getGeometry();return o?this.writeGeometryText(o,t):(ol.asserts.assert(!1,40),"")},ol.format.Polyline.prototype.writeFeaturesText=function(e,t){return this.writeFeatureText(e[0],t)},ol.format.Polyline.prototype.writeGeometry,ol.format.Polyline.prototype.writeGeometryText=function(e,t){e=ol.format.Feature.transformWithOptions(e,!0,this.adaptOptions(t));var o=e.getFlatCoordinates(),r=e.getStride();return ol.geom.flat.flip.flipXY(o,0,o.length,r,o),ol.format.Polyline.encodeDeltas(o,r,this.factor_)},goog.provide("ol.format.TopoJSON"),goog.require("ol"),goog.require("ol.Feature"),goog.require("ol.format.Feature"),goog.require("ol.format.JSONFeature"),goog.require("ol.geom.LineString"),goog.require("ol.geom.MultiLineString"),goog.require("ol.geom.MultiPoint"),goog.require("ol.geom.MultiPolygon"),goog.require("ol.geom.Point"),goog.require("ol.geom.Polygon"),goog.require("ol.proj"),ol.format.TopoJSON=function(e){var t=e?e:{};ol.format.JSONFeature.call(this),this.layerName_=t.layerName,this.layers_=t.layers?t.layers:null,this.defaultDataProjection=ol.proj.get(t.defaultDataProjection?t.defaultDataProjection:"EPSG:4326")},ol.inherits(ol.format.TopoJSON,ol.format.JSONFeature),ol.format.TopoJSON.concatenateArcs_=function(e,t){var o,r,i,n,a,l,s=[];for(i=0,n=e.length;i<n;++i)o=e[i],i>0&&s.pop(),r=o>=0?t[o]:t[~o].slice().reverse(),s.push.apply(s,r);for(a=0,l=s.length;a<l;++a)s[a]=s[a].slice();return s},ol.format.TopoJSON.readPointGeometry_=function(e,t,o){var r=e.coordinates;return t&&o&&ol.format.TopoJSON.transformVertex_(r,t,o),new ol.geom.Point(r)},ol.format.TopoJSON.readMultiPointGeometry_=function(e,t,o){var r,i,n=e.coordinates;if(t&&o)for(r=0,i=n.length;r<i;++r)ol.format.TopoJSON.transformVertex_(n[r],t,o);return new ol.geom.MultiPoint(n)},ol.format.TopoJSON.readLineStringGeometry_=function(e,t){var o=ol.format.TopoJSON.concatenateArcs_(e.arcs,t);return new ol.geom.LineString(o)},ol.format.TopoJSON.readMultiLineStringGeometry_=function(e,t){var o,r,i=[];for(o=0,r=e.arcs.length;o<r;++o)i[o]=ol.format.TopoJSON.concatenateArcs_(e.arcs[o],t);return new ol.geom.MultiLineString(i)},ol.format.TopoJSON.readPolygonGeometry_=function(e,t){var o,r,i=[];for(o=0,r=e.arcs.length;o<r;++o)i[o]=ol.format.TopoJSON.concatenateArcs_(e.arcs[o],t);return new ol.geom.Polygon(i)},ol.format.TopoJSON.readMultiPolygonGeometry_=function(e,t){var o,r,i,n,a,l,s=[];for(a=0,l=e.arcs.length;a<l;++a){for(o=e.arcs[a],r=[],i=0,n=o.length;i<n;++i)r[i]=ol.format.TopoJSON.concatenateArcs_(o[i],t);s[a]=r}return new ol.geom.MultiPolygon(s)},ol.format.TopoJSON.readFeaturesFromGeometryCollection_=function(e,t,o,r,i,n,a){var l,s,p=e.geometries,g=[];for(l=0,s=p.length;l<s;++l)g[l]=ol.format.TopoJSON.readFeatureFromGeometry_(p[l],t,o,r,i,n,a);return g},ol.format.TopoJSON.readFeatureFromGeometry_=function(e,t,o,r,i,n,a){var l,s=e.type,p=ol.format.TopoJSON.GEOMETRY_READERS_[s];l="Point"===s||"MultiPoint"===s?p(e,o,r):p(e,t);var g=new ol.Feature;g.setGeometry(ol.format.Feature.transformWithOptions(l,!1,a)),void 0!==e.id&&g.setId(e.id);var u=e.properties;return i&&(u||(u={}),u[i]=n),u&&g.setProperties(u),g},ol.format.TopoJSON.prototype.readFeatures,ol.format.TopoJSON.prototype.readFeaturesFromObject=function(e,t){if("Topology"==e.type){var o,r=e,i=null,n=null;r.transform&&(o=r.transform,i=o.scale,n=o.translate);var a=r.arcs;o&&ol.format.TopoJSON.transformArcs_(a,i,n);var l,s,p=[],g=r.objects,u=this.layerName_;for(l in g)this.layers_&&this.layers_.indexOf(l)==-1||("GeometryCollection"===g[l].type?(s=g[l],p.push.apply(p,ol.format.TopoJSON.readFeaturesFromGeometryCollection_(s,a,i,n,u,l,t))):(s=g[l],p.push(ol.format.TopoJSON.readFeatureFromGeometry_(s,a,i,n,u,l,t))));return p}return[]},ol.format.TopoJSON.transformArcs_=function(e,t,o){var r,i;for(r=0,i=e.length;r<i;++r)ol.format.TopoJSON.transformArc_(e[r],t,o)},ol.format.TopoJSON.transformArc_=function(e,t,o){var r,i,n,a=0,l=0;for(i=0,n=e.length;i<n;++i)r=e[i],a+=r[0],l+=r[1],r[0]=a,r[1]=l,ol.format.TopoJSON.transformVertex_(r,t,o)},ol.format.TopoJSON.transformVertex_=function(e,t,o){e[0]=e[0]*t[0]+o[0],e[1]=e[1]*t[1]+o[1]},ol.format.TopoJSON.prototype.readProjection,ol.format.TopoJSON.prototype.readProjectionFromObject=function(e){return this.defaultDataProjection},ol.format.TopoJSON.GEOMETRY_READERS_={Point:ol.format.TopoJSON.readPointGeometry_,LineString:ol.format.TopoJSON.readLineStringGeometry_,Polygon:ol.format.TopoJSON.readPolygonGeometry_,MultiPoint:ol.format.TopoJSON.readMultiPointGeometry_,MultiLineString:ol.format.TopoJSON.readMultiLineStringGeometry_,MultiPolygon:ol.format.TopoJSON.readMultiPolygonGeometry_},ol.format.TopoJSON.prototype.writeFeatureObject=function(e,t){},ol.format.TopoJSON.prototype.writeFeaturesObject=function(e,t){},ol.format.TopoJSON.prototype.writeGeometryObject=function(e,t){},ol.format.TopoJSON.prototype.readGeometryFromObject=function(){},ol.format.TopoJSON.prototype.readFeatureFromObject=function(){},goog.provide("ol.format.WFS"),goog.require("ol"),goog.require("ol.asserts"),goog.require("ol.format.GML2"),goog.require("ol.format.GML3"),goog.require("ol.format.GMLBase"),goog.require("ol.format.filter"),goog.require("ol.format.XMLFeature"),goog.require("ol.format.XSD"),goog.require("ol.geom.Geometry"),goog.require("ol.obj"),goog.require("ol.proj"),goog.require("ol.xml"),ol.format.WFS=function(e){var t=e?e:{};this.featureType_=t.featureType,this.featureNS_=t.featureNS,this.gmlFormat_=t.gmlFormat?t.gmlFormat:new ol.format.GML3,this.schemaLocation_=t.schemaLocation?t.schemaLocation:ol.format.WFS.SCHEMA_LOCATIONS[ol.format.WFS.DEFAULT_VERSION],ol.format.XMLFeature.call(this)},ol.inherits(ol.format.WFS,ol.format.XMLFeature),ol.format.WFS.FEATURE_PREFIX="feature",ol.format.WFS.XMLNS="http://www.w3.org/2000/xmlns/",ol.format.WFS.OGCNS="http://www.opengis.net/ogc",ol.format.WFS.WFSNS="http://www.opengis.net/wfs",ol.format.WFS.FESNS="http://www.opengis.net/fes",ol.format.WFS.SCHEMA_LOCATIONS={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},ol.format.WFS.DEFAULT_VERSION="1.1.0",ol.format.WFS.prototype.readFeatures,ol.format.WFS.prototype.readFeaturesFromNode=function(e,t){var o={featureType:this.featureType_,featureNS:this.featureNS_};ol.obj.assign(o,this.getReadOptions(e,t?t:{}));var r=[o];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[ol.format.GMLBase.GMLNS].featureMember=ol.xml.makeArrayPusher(ol.format.GMLBase.prototype.readFeaturesInternal);var i=ol.xml.pushParseAndPop([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,e,r,this.gmlFormat_);return i||(i=[]),i},ol.format.WFS.prototype.readTransactionResponse=function(e){if(ol.xml.isDocument(e))return this.readTransactionResponseFromDocument(e);if(ol.xml.isNode(e))return this.readTransactionResponseFromNode(e);if("string"==typeof e){var t=ol.xml.parse(e);return this.readTransactionResponseFromDocument(t)}},ol.format.WFS.prototype.readFeatureCollectionMetadata=function(e){if(ol.xml.isDocument(e))return this.readFeatureCollectionMetadataFromDocument(e);if(ol.xml.isNode(e))return this.readFeatureCollectionMetadataFromNode(e);if("string"==typeof e){var t=ol.xml.parse(e);return this.readFeatureCollectionMetadataFromDocument(t)}},ol.format.WFS.prototype.readFeatureCollectionMetadataFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(t)},ol.format.WFS.FEATURE_COLLECTION_PARSERS_={"http://www.opengis.net/gml":{boundedBy:ol.xml.makeObjectPropertySetter(ol.format.GMLBase.prototype.readGeometryElement,"bounds")}},ol.format.WFS.prototype.readFeatureCollectionMetadataFromNode=function(e){var t={},o=ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("numberOfFeatures"));return t.numberOfFeatures=o,ol.xml.pushParseAndPop(t,ol.format.WFS.FEATURE_COLLECTION_PARSERS_,e,[],this.gmlFormat_)},ol.format.WFS.TRANSACTION_SUMMARY_PARSERS_={"http://www.opengis.net/wfs":{totalInserted:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),totalUpdated:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),totalDeleted:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger)}},ol.format.WFS.readTransactionSummary_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WFS.TRANSACTION_SUMMARY_PARSERS_,e,t)},ol.format.WFS.OGC_FID_PARSERS_={"http://www.opengis.net/ogc":{FeatureId:ol.xml.makeArrayPusher(function(e,t){return e.getAttribute("fid")})}},ol.format.WFS.fidParser_=function(e,t){ol.xml.parseNode(ol.format.WFS.OGC_FID_PARSERS_,e,t)},ol.format.WFS.INSERT_RESULTS_PARSERS_={"http://www.opengis.net/wfs":{Feature:ol.format.WFS.fidParser_}},ol.format.WFS.readInsertResults_=function(e,t){return ol.xml.pushParseAndPop([],ol.format.WFS.INSERT_RESULTS_PARSERS_,e,t)},ol.format.WFS.TRANSACTION_RESPONSE_PARSERS_={"http://www.opengis.net/wfs":{TransactionSummary:ol.xml.makeObjectPropertySetter(ol.format.WFS.readTransactionSummary_,"transactionSummary"),InsertResults:ol.xml.makeObjectPropertySetter(ol.format.WFS.readInsertResults_,"insertIds")}},ol.format.WFS.prototype.readTransactionResponseFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(t)},ol.format.WFS.prototype.readTransactionResponseFromNode=function(e){return ol.xml.pushParseAndPop({},ol.format.WFS.TRANSACTION_RESPONSE_PARSERS_,e,[])},ol.format.WFS.QUERY_SERIALIZERS_={"http://www.opengis.net/wfs":{
PropertyName:ol.xml.makeChildAppender(ol.format.XSD.writeStringTextNode)}},ol.format.WFS.writeFeature_=function(e,t,o){var r=o[o.length-1],i=r.featureType,n=r.featureNS,a=r.gmlVersion,l=ol.xml.createElementNS(n,i);e.appendChild(l),2===a?ol.format.GML2.prototype.writeFeatureElement(l,t,o):ol.format.GML3.prototype.writeFeatureElement(l,t,o)},ol.format.WFS.writeOgcFidFilter_=function(e,t,o){var r=ol.xml.createElementNS(ol.format.WFS.OGCNS,"Filter"),i=ol.xml.createElementNS(ol.format.WFS.OGCNS,"FeatureId");r.appendChild(i),i.setAttribute("fid",t),e.appendChild(r)},ol.format.WFS.getTypeName_=function(e,t){e=e?e:ol.format.WFS.FEATURE_PREFIX;var o=e+":";return 0===t.indexOf(o)?t:o+t},ol.format.WFS.writeDelete_=function(e,t,o){var r=o[o.length-1];ol.asserts.assert(void 0!==t.getId(),26);var i=r.featureType,n=r.featurePrefix,a=r.featureNS,l=ol.format.WFS.getTypeName_(n,i);e.setAttribute("typeName",l),ol.xml.setAttributeNS(e,ol.format.WFS.XMLNS,"xmlns:"+n,a);var s=t.getId();void 0!==s&&ol.format.WFS.writeOgcFidFilter_(e,s,o)},ol.format.WFS.writeUpdate_=function(e,t,o){var r=o[o.length-1];ol.asserts.assert(void 0!==t.getId(),27);var i=r.featureType,n=r.featurePrefix,a=r.featureNS,l=ol.format.WFS.getTypeName_(n,i);e.setAttribute("typeName",l),ol.xml.setAttributeNS(e,ol.format.WFS.XMLNS,"xmlns:"+n,a);var s=t.getId();if(void 0!==s){for(var p=t.getKeys(),g=[],u=0,c=p.length;u<c;u++){var y=t.get(p[u]);void 0!==y&&g.push({name:p[u],value:y})}ol.xml.pushSerializeAndPop({gmlVersion:r.gmlVersion,node:e,hasZ:r.hasZ,srsName:r.srsName},ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Property"),g,o),ol.format.WFS.writeOgcFidFilter_(e,s,o)}},ol.format.WFS.writeProperty_=function(e,t,o){var r=ol.xml.createElementNS(ol.format.WFS.WFSNS,"Name"),i=o[o.length-1],n=i.gmlVersion;if(e.appendChild(r),ol.format.XSD.writeStringTextNode(r,t.name),void 0!==t.value&&null!==t.value){var a=ol.xml.createElementNS(ol.format.WFS.WFSNS,"Value");e.appendChild(a),t.value instanceof ol.geom.Geometry?2===n?ol.format.GML2.prototype.writeGeometryElement(a,t.value,o):ol.format.GML3.prototype.writeGeometryElement(a,t.value,o):ol.format.XSD.writeStringTextNode(a,t.value)}},ol.format.WFS.writeNative_=function(e,t,o){t.vendorId&&e.setAttribute("vendorId",t.vendorId),void 0!==t.safeToIgnore&&e.setAttribute("safeToIgnore",t.safeToIgnore),void 0!==t.value&&ol.format.XSD.writeStringTextNode(e,t.value)},ol.format.WFS.TRANSACTION_SERIALIZERS_={"http://www.opengis.net/wfs":{Insert:ol.xml.makeChildAppender(ol.format.WFS.writeFeature_),Update:ol.xml.makeChildAppender(ol.format.WFS.writeUpdate_),Delete:ol.xml.makeChildAppender(ol.format.WFS.writeDelete_),Property:ol.xml.makeChildAppender(ol.format.WFS.writeProperty_),Native:ol.xml.makeChildAppender(ol.format.WFS.writeNative_)}},ol.format.WFS.writeQuery_=function(e,t,o){var r,i=o[o.length-1],n=i.featurePrefix,a=i.featureNS,l=i.propertyNames,s=i.srsName;r=n?ol.format.WFS.getTypeName_(n,t):t,e.setAttribute("typeName",r),s&&e.setAttribute("srsName",s),a&&ol.xml.setAttributeNS(e,ol.format.WFS.XMLNS,"xmlns:"+n,a);var p=ol.obj.assign({},i);p.node=e,ol.xml.pushSerializeAndPop(p,ol.format.WFS.QUERY_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("PropertyName"),l,o);var g=i.filter;if(g){var u=ol.xml.createElementNS(ol.format.WFS.OGCNS,"Filter");e.appendChild(u),ol.format.WFS.writeFilterCondition_(u,g,o)}},ol.format.WFS.writeFilterCondition_=function(e,t,o){var r={node:e};ol.xml.pushSerializeAndPop(r,ol.format.WFS.GETFEATURE_SERIALIZERS_,ol.xml.makeSimpleNodeFactory(t.getTagName()),[t],o)},ol.format.WFS.writeBboxFilter_=function(e,t,o){var r=o[o.length-1];r.srsName=t.srsName,ol.format.WFS.writeOgcPropertyName_(e,t.geometryName),ol.format.GML3.prototype.writeGeometryElement(e,t.extent,o)},ol.format.WFS.writeIntersectsFilter_=function(e,t,o){var r=o[o.length-1];r.srsName=t.srsName,ol.format.WFS.writeOgcPropertyName_(e,t.geometryName),ol.format.GML3.prototype.writeGeometryElement(e,t.geometry,o)},ol.format.WFS.writeWithinFilter_=function(e,t,o){var r=o[o.length-1];r.srsName=t.srsName,ol.format.WFS.writeOgcPropertyName_(e,t.geometryName),ol.format.GML3.prototype.writeGeometryElement(e,t.geometry,o)},ol.format.WFS.writeDuringFilter_=function(e,t,o){var r=ol.xml.createElementNS(ol.format.WFS.FESNS,"ValueReference");ol.format.XSD.writeStringTextNode(r,t.propertyName),e.appendChild(r);var i=ol.xml.createElementNS(ol.format.GMLBase.GMLNS,"TimePeriod");e.appendChild(i);var n=ol.xml.createElementNS(ol.format.GMLBase.GMLNS,"begin");i.appendChild(n),ol.format.WFS.writeTimeInstant_(n,t.begin);var a=ol.xml.createElementNS(ol.format.GMLBase.GMLNS,"end");i.appendChild(a),ol.format.WFS.writeTimeInstant_(a,t.end)},ol.format.WFS.writeLogicalFilter_=function(e,t,o){var r={node:e};t.conditions.forEach(function(e){ol.xml.pushSerializeAndPop(r,ol.format.WFS.GETFEATURE_SERIALIZERS_,ol.xml.makeSimpleNodeFactory(e.getTagName()),[e],o)})},ol.format.WFS.writeNotFilter_=function(e,t,o){var r={node:e},i=t.condition;ol.xml.pushSerializeAndPop(r,ol.format.WFS.GETFEATURE_SERIALIZERS_,ol.xml.makeSimpleNodeFactory(i.getTagName()),[i],o)},ol.format.WFS.writeComparisonFilter_=function(e,t,o){void 0!==t.matchCase&&e.setAttribute("matchCase",t.matchCase.toString()),ol.format.WFS.writeOgcPropertyName_(e,t.propertyName),ol.format.WFS.writeOgcLiteral_(e,""+t.expression)},ol.format.WFS.writeIsNullFilter_=function(e,t,o){ol.format.WFS.writeOgcPropertyName_(e,t.propertyName)},ol.format.WFS.writeIsBetweenFilter_=function(e,t,o){ol.format.WFS.writeOgcPropertyName_(e,t.propertyName);var r=ol.xml.createElementNS(ol.format.WFS.OGCNS,"LowerBoundary");e.appendChild(r),ol.format.WFS.writeOgcLiteral_(r,""+t.lowerBoundary);var i=ol.xml.createElementNS(ol.format.WFS.OGCNS,"UpperBoundary");e.appendChild(i),ol.format.WFS.writeOgcLiteral_(i,""+t.upperBoundary)},ol.format.WFS.writeIsLikeFilter_=function(e,t,o){e.setAttribute("wildCard",t.wildCard),e.setAttribute("singleChar",t.singleChar),e.setAttribute("escapeChar",t.escapeChar),void 0!==t.matchCase&&e.setAttribute("matchCase",t.matchCase.toString()),ol.format.WFS.writeOgcPropertyName_(e,t.propertyName),ol.format.WFS.writeOgcLiteral_(e,""+t.pattern)},ol.format.WFS.writeOgcExpression_=function(e,t,o){var r=ol.xml.createElementNS(ol.format.WFS.OGCNS,e);ol.format.XSD.writeStringTextNode(r,o),t.appendChild(r)},ol.format.WFS.writeOgcPropertyName_=function(e,t){ol.format.WFS.writeOgcExpression_("PropertyName",e,t)},ol.format.WFS.writeOgcLiteral_=function(e,t){ol.format.WFS.writeOgcExpression_("Literal",e,t)},ol.format.WFS.writeTimeInstant_=function(e,t){var o=ol.xml.createElementNS(ol.format.GMLBase.GMLNS,"TimeInstant");e.appendChild(o);var r=ol.xml.createElementNS(ol.format.GMLBase.GMLNS,"timePosition");o.appendChild(r),ol.format.XSD.writeStringTextNode(r,t)},ol.format.WFS.GETFEATURE_SERIALIZERS_={"http://www.opengis.net/wfs":{Query:ol.xml.makeChildAppender(ol.format.WFS.writeQuery_)},"http://www.opengis.net/ogc":{During:ol.xml.makeChildAppender(ol.format.WFS.writeDuringFilter_),And:ol.xml.makeChildAppender(ol.format.WFS.writeLogicalFilter_),Or:ol.xml.makeChildAppender(ol.format.WFS.writeLogicalFilter_),Not:ol.xml.makeChildAppender(ol.format.WFS.writeNotFilter_),BBOX:ol.xml.makeChildAppender(ol.format.WFS.writeBboxFilter_),Intersects:ol.xml.makeChildAppender(ol.format.WFS.writeIntersectsFilter_),Within:ol.xml.makeChildAppender(ol.format.WFS.writeWithinFilter_),PropertyIsEqualTo:ol.xml.makeChildAppender(ol.format.WFS.writeComparisonFilter_),PropertyIsNotEqualTo:ol.xml.makeChildAppender(ol.format.WFS.writeComparisonFilter_),PropertyIsLessThan:ol.xml.makeChildAppender(ol.format.WFS.writeComparisonFilter_),PropertyIsLessThanOrEqualTo:ol.xml.makeChildAppender(ol.format.WFS.writeComparisonFilter_),PropertyIsGreaterThan:ol.xml.makeChildAppender(ol.format.WFS.writeComparisonFilter_),PropertyIsGreaterThanOrEqualTo:ol.xml.makeChildAppender(ol.format.WFS.writeComparisonFilter_),PropertyIsNull:ol.xml.makeChildAppender(ol.format.WFS.writeIsNullFilter_),PropertyIsBetween:ol.xml.makeChildAppender(ol.format.WFS.writeIsBetweenFilter_),PropertyIsLike:ol.xml.makeChildAppender(ol.format.WFS.writeIsLikeFilter_)}},ol.format.WFS.writeFilter=function(e){var t=ol.xml.createElementNS(ol.format.WFS.OGCNS,"Filter");return ol.format.WFS.writeFilterCondition_(t,e,[]),t},ol.format.WFS.writeGetFeature_=function(e,t,o){var r=o[o.length-1],i=ol.obj.assign({},r);i.node=e,ol.xml.pushSerializeAndPop(i,ol.format.WFS.GETFEATURE_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Query"),t,o)},ol.format.WFS.prototype.writeGetFeature=function(e){var t=ol.xml.createElementNS(ol.format.WFS.WFSNS,"GetFeature");t.setAttribute("service","WFS"),t.setAttribute("version","1.1.0");var o;if(e&&(e.handle&&t.setAttribute("handle",e.handle),e.outputFormat&&t.setAttribute("outputFormat",e.outputFormat),void 0!==e.maxFeatures&&t.setAttribute("maxFeatures",e.maxFeatures),e.resultType&&t.setAttribute("resultType",e.resultType),void 0!==e.startIndex&&t.setAttribute("startIndex",e.startIndex),void 0!==e.count&&t.setAttribute("count",e.count),o=e.filter,e.bbox)){ol.asserts.assert(e.geometryName,12);var r=ol.format.filter.bbox(e.geometryName,e.bbox,e.srsName);o=o?ol.format.filter.and(o,r):r}ol.xml.setAttributeNS(t,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation_);var i={node:t,srsName:e.srsName,featureNS:e.featureNS?e.featureNS:this.featureNS_,featurePrefix:e.featurePrefix,geometryName:e.geometryName,filter:o,propertyNames:e.propertyNames?e.propertyNames:[]};return ol.asserts.assert(Array.isArray(e.featureTypes),11),ol.format.WFS.writeGetFeature_(t,e.featureTypes,[i]),t},ol.format.WFS.prototype.writeTransaction=function(e,t,o,r){var i=[],n=ol.xml.createElementNS(ol.format.WFS.WFSNS,"Transaction"),a=r.version?r.version:ol.format.WFS.DEFAULT_VERSION,l="1.0.0"===a?2:3;n.setAttribute("service","WFS"),n.setAttribute("version",a);var s,p;r&&(s=r.gmlOptions?r.gmlOptions:{},r.handle&&n.setAttribute("handle",r.handle));var g=ol.format.WFS.SCHEMA_LOCATIONS[a];return ol.xml.setAttributeNS(n,"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",g),e&&(p={node:n,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:r.featurePrefix,gmlVersion:l,hasZ:r.hasZ,srsName:r.srsName},ol.obj.assign(p,s),ol.xml.pushSerializeAndPop(p,ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Insert"),e,i)),t&&(p={node:n,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:r.featurePrefix,gmlVersion:l,hasZ:r.hasZ,srsName:r.srsName},ol.obj.assign(p,s),ol.xml.pushSerializeAndPop(p,ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Update"),t,i)),o&&ol.xml.pushSerializeAndPop({node:n,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:r.featurePrefix,gmlVersion:l,srsName:r.srsName},ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Delete"),o,i),r.nativeElements&&ol.xml.pushSerializeAndPop({node:n,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:r.featurePrefix,gmlVersion:l,srsName:r.srsName},ol.format.WFS.TRANSACTION_SERIALIZERS_,ol.xml.makeSimpleNodeFactory("Native"),r.nativeElements,i),n},ol.format.WFS.prototype.readProjection,ol.format.WFS.prototype.readProjectionFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(t);return null},ol.format.WFS.prototype.readProjectionFromNode=function(e){if(e.firstElementChild&&e.firstElementChild.firstElementChild){e=e.firstElementChild.firstElementChild;for(var t=e.firstElementChild;t;t=t.nextElementSibling)if(0!==t.childNodes.length&&(1!==t.childNodes.length||3!==t.firstChild.nodeType)){var o=[{}];return this.gmlFormat_.readGeometryElement(t,o),ol.proj.get(o.pop().srsName)}}return null},goog.provide("ol.format.WKT"),goog.require("ol"),goog.require("ol.Feature"),goog.require("ol.format.Feature"),goog.require("ol.format.TextFeature"),goog.require("ol.geom.GeometryCollection"),goog.require("ol.geom.GeometryType"),goog.require("ol.geom.GeometryLayout"),goog.require("ol.geom.LineString"),goog.require("ol.geom.MultiLineString"),goog.require("ol.geom.MultiPoint"),goog.require("ol.geom.MultiPolygon"),goog.require("ol.geom.Point"),goog.require("ol.geom.Polygon"),goog.require("ol.geom.SimpleGeometry"),ol.format.WKT=function(e){var t=e?e:{};ol.format.TextFeature.call(this),this.splitCollection_=void 0!==t.splitCollection&&t.splitCollection},ol.inherits(ol.format.WKT,ol.format.TextFeature),ol.format.WKT.EMPTY="EMPTY",ol.format.WKT.Z="Z",ol.format.WKT.M="M",ol.format.WKT.ZM="ZM",ol.format.WKT.encodePointGeometry_=function(e){var t=e.getCoordinates();return 0===t.length?"":t.join(" ")},ol.format.WKT.encodeMultiPointGeometry_=function(e){for(var t=[],o=e.getPoints(),r=0,i=o.length;r<i;++r)t.push("("+ol.format.WKT.encodePointGeometry_(o[r])+")");return t.join(",")},ol.format.WKT.encodeGeometryCollectionGeometry_=function(e){for(var t=[],o=e.getGeometries(),r=0,i=o.length;r<i;++r)t.push(ol.format.WKT.encode_(o[r]));return t.join(",")},ol.format.WKT.encodeLineStringGeometry_=function(e){for(var t=e.getCoordinates(),o=[],r=0,i=t.length;r<i;++r)o.push(t[r].join(" "));return o.join(",")},ol.format.WKT.encodeMultiLineStringGeometry_=function(e){for(var t=[],o=e.getLineStrings(),r=0,i=o.length;r<i;++r)t.push("("+ol.format.WKT.encodeLineStringGeometry_(o[r])+")");return t.join(",")},ol.format.WKT.encodePolygonGeometry_=function(e){for(var t=[],o=e.getLinearRings(),r=0,i=o.length;r<i;++r)t.push("("+ol.format.WKT.encodeLineStringGeometry_(o[r])+")");return t.join(",")},ol.format.WKT.encodeMultiPolygonGeometry_=function(e){for(var t=[],o=e.getPolygons(),r=0,i=o.length;r<i;++r)t.push("("+ol.format.WKT.encodePolygonGeometry_(o[r])+")");return t.join(",")},ol.format.WKT.encodeGeometryLayout_=function(e){var t=e.getLayout(),o="";return t!==ol.geom.GeometryLayout.XYZ&&t!==ol.geom.GeometryLayout.XYZM||(o+=ol.format.WKT.Z),t!==ol.geom.GeometryLayout.XYM&&t!==ol.geom.GeometryLayout.XYZM||(o+=ol.format.WKT.M),o},ol.format.WKT.encode_=function(e){var t=e.getType(),o=ol.format.WKT.GeometryEncoder_[t],r=o(e);if(t=t.toUpperCase(),e instanceof ol.geom.SimpleGeometry){var i=ol.format.WKT.encodeGeometryLayout_(e);i.length>0&&(t+=" "+i)}return 0===r.length?t+" "+ol.format.WKT.EMPTY:t+"("+r+")"},ol.format.WKT.GeometryEncoder_={Point:ol.format.WKT.encodePointGeometry_,LineString:ol.format.WKT.encodeLineStringGeometry_,Polygon:ol.format.WKT.encodePolygonGeometry_,MultiPoint:ol.format.WKT.encodeMultiPointGeometry_,MultiLineString:ol.format.WKT.encodeMultiLineStringGeometry_,MultiPolygon:ol.format.WKT.encodeMultiPolygonGeometry_,GeometryCollection:ol.format.WKT.encodeGeometryCollectionGeometry_},ol.format.WKT.prototype.parse_=function(e){var t=new ol.format.WKT.Lexer(e),o=new ol.format.WKT.Parser(t);return o.parse()},ol.format.WKT.prototype.readFeature,ol.format.WKT.prototype.readFeatureFromText=function(e,t){var o=this.readGeometryFromText(e,t);if(o){var r=new ol.Feature;return r.setGeometry(o),r}return null},ol.format.WKT.prototype.readFeatures,ol.format.WKT.prototype.readFeaturesFromText=function(e,t){var o=[],r=this.readGeometryFromText(e,t);o=this.splitCollection_&&r.getType()==ol.geom.GeometryType.GEOMETRY_COLLECTION?r.getGeometriesArray():[r];for(var i,n=[],a=0,l=o.length;a<l;++a)i=new ol.Feature,i.setGeometry(o[a]),n.push(i);return n},ol.format.WKT.prototype.readGeometry,ol.format.WKT.prototype.readGeometryFromText=function(e,t){var o=this.parse_(e);return o?ol.format.Feature.transformWithOptions(o,!1,t):null},ol.format.WKT.prototype.writeFeature,ol.format.WKT.prototype.writeFeatureText=function(e,t){var o=e.getGeometry();return o?this.writeGeometryText(o,t):""},ol.format.WKT.prototype.writeFeatures,ol.format.WKT.prototype.writeFeaturesText=function(e,t){if(1==e.length)return this.writeFeatureText(e[0],t);for(var o=[],r=0,i=e.length;r<i;++r)o.push(e[r].getGeometry());var n=new ol.geom.GeometryCollection(o);return this.writeGeometryText(n,t)},ol.format.WKT.prototype.writeGeometry,ol.format.WKT.prototype.writeGeometryText=function(e,t){return ol.format.WKT.encode_(ol.format.Feature.transformWithOptions(e,!0,t))},ol.format.WKT.TokenType_={TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},ol.format.WKT.Lexer=function(e){this.wkt=e,this.index_=-1},ol.format.WKT.Lexer.prototype.isAlpha_=function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"},ol.format.WKT.Lexer.prototype.isNumeric_=function(e,t){var o=void 0!==t&&t;return e>="0"&&e<="9"||"."==e&&!o},ol.format.WKT.Lexer.prototype.isWhiteSpace_=function(e){return" "==e||"\t"==e||"\r"==e||"\n"==e},ol.format.WKT.Lexer.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},ol.format.WKT.Lexer.prototype.nextToken=function(){var e=this.nextChar_(),t={position:this.index_,value:e};if("("==e)t.type=ol.format.WKT.TokenType_.LEFT_PAREN;else if(","==e)t.type=ol.format.WKT.TokenType_.COMMA;else if(")"==e)t.type=ol.format.WKT.TokenType_.RIGHT_PAREN;else if(this.isNumeric_(e)||"-"==e)t.type=ol.format.WKT.TokenType_.NUMBER,t.value=this.readNumber_();else if(this.isAlpha_(e))t.type=ol.format.WKT.TokenType_.TEXT,t.value=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t.type=ol.format.WKT.TokenType_.EOF}return t},ol.format.WKT.Lexer.prototype.readNumber_=function(){var e,t=this.index_,o=!1,r=!1;do"."==e?o=!0:"e"!=e&&"E"!=e||(r=!0),e=this.nextChar_();while(this.isNumeric_(e,o)||!r&&("e"==e||"E"==e)||r&&("-"==e||"+"==e));return parseFloat(this.wkt.substring(t,this.index_--))},ol.format.WKT.Lexer.prototype.readText_=function(){var e,t=this.index_;do e=this.nextChar_();while(this.isAlpha_(e));return this.wkt.substring(t,this.index_--).toUpperCase()},ol.format.WKT.Parser=function(e){this.lexer_=e,this.token_,this.layout_=ol.geom.GeometryLayout.XY},ol.format.WKT.Parser.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},ol.format.WKT.Parser.prototype.isTokenType=function(e){var t=this.token_.type==e;return t},ol.format.WKT.Parser.prototype.match=function(e){var t=this.isTokenType(e);return t&&this.consume_(),t},ol.format.WKT.Parser.prototype.parse=function(){this.consume_();var e=this.parseGeometry_();return e},ol.format.WKT.Parser.prototype.parseGeometryLayout_=function(){var e=ol.geom.GeometryLayout.XY,t=this.token_;if(this.isTokenType(ol.format.WKT.TokenType_.TEXT)){var o=t.value;o===ol.format.WKT.Z?e=ol.geom.GeometryLayout.XYZ:o===ol.format.WKT.M?e=ol.geom.GeometryLayout.XYM:o===ol.format.WKT.ZM&&(e=ol.geom.GeometryLayout.XYZM),e!==ol.geom.GeometryLayout.XY&&this.consume_()}return e},ol.format.WKT.Parser.prototype.parseGeometry_=function(){var e=this.token_;if(this.match(ol.format.WKT.TokenType_.TEXT)){var t=e.value;if(this.layout_=this.parseGeometryLayout_(),t==ol.geom.GeometryType.GEOMETRY_COLLECTION.toUpperCase()){var o=this.parseGeometryCollectionText_();return new ol.geom.GeometryCollection(o)}var r=ol.format.WKT.Parser.GeometryParser_[t],i=ol.format.WKT.Parser.GeometryConstructor_[t];if(!r||!i)throw new Error("Invalid geometry type: "+t);var n=r.call(this);return new i(n,this.layout_)}throw new Error(this.formatErrorMessage_())},ol.format.WKT.Parser.prototype.parseGeometryCollectionText_=function(){if(this.match(ol.format.WKT.TokenType_.LEFT_PAREN)){var e=[];do e.push(this.parseGeometry_());while(this.match(ol.format.WKT.TokenType_.COMMA));if(this.match(ol.format.WKT.TokenType_.RIGHT_PAREN))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},ol.format.WKT.Parser.prototype.parsePointText_=function(){if(this.match(ol.format.WKT.TokenType_.LEFT_PAREN)){var e=this.parsePoint_();if(this.match(ol.format.WKT.TokenType_.RIGHT_PAREN))return e}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())},ol.format.WKT.Parser.prototype.parseLineStringText_=function(){if(this.match(ol.format.WKT.TokenType_.LEFT_PAREN)){var e=this.parsePointList_();if(this.match(ol.format.WKT.TokenType_.RIGHT_PAREN))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},ol.format.WKT.Parser.prototype.parsePolygonText_=function(){if(this.match(ol.format.WKT.TokenType_.LEFT_PAREN)){var e=this.parseLineStringTextList_();if(this.match(ol.format.WKT.TokenType_.RIGHT_PAREN))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},ol.format.WKT.Parser.prototype.parseMultiPointText_=function(){if(this.match(ol.format.WKT.TokenType_.LEFT_PAREN)){var e;if(e=this.token_.type==ol.format.WKT.TokenType_.LEFT_PAREN?this.parsePointTextList_():this.parsePointList_(),this.match(ol.format.WKT.TokenType_.RIGHT_PAREN))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},ol.format.WKT.Parser.prototype.parseMultiLineStringText_=function(){if(this.match(ol.format.WKT.TokenType_.LEFT_PAREN)){var e=this.parseLineStringTextList_();if(this.match(ol.format.WKT.TokenType_.RIGHT_PAREN))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},ol.format.WKT.Parser.prototype.parseMultiPolygonText_=function(){if(this.match(ol.format.WKT.TokenType_.LEFT_PAREN)){var e=this.parsePolygonTextList_();if(this.match(ol.format.WKT.TokenType_.RIGHT_PAREN))return e}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},ol.format.WKT.Parser.prototype.parsePoint_=function(){for(var e=[],t=this.layout_.length,o=0;o<t;++o){var r=this.token_;if(!this.match(ol.format.WKT.TokenType_.NUMBER))break;e.push(r.value)}if(e.length==t)return e;throw new Error(this.formatErrorMessage_())},ol.format.WKT.Parser.prototype.parsePointList_=function(){for(var e=[this.parsePoint_()];this.match(ol.format.WKT.TokenType_.COMMA);)e.push(this.parsePoint_());return e},ol.format.WKT.Parser.prototype.parsePointTextList_=function(){for(var e=[this.parsePointText_()];this.match(ol.format.WKT.TokenType_.COMMA);)e.push(this.parsePointText_());return e},ol.format.WKT.Parser.prototype.parseLineStringTextList_=function(){for(var e=[this.parseLineStringText_()];this.match(ol.format.WKT.TokenType_.COMMA);)e.push(this.parseLineStringText_());return e},ol.format.WKT.Parser.prototype.parsePolygonTextList_=function(){for(var e=[this.parsePolygonText_()];this.match(ol.format.WKT.TokenType_.COMMA);)e.push(this.parsePolygonText_());return e},ol.format.WKT.Parser.prototype.isEmptyGeometry_=function(){var e=this.isTokenType(ol.format.WKT.TokenType_.TEXT)&&this.token_.value==ol.format.WKT.EMPTY;return e&&this.consume_(),e},ol.format.WKT.Parser.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},ol.format.WKT.Parser.GeometryConstructor_={POINT:ol.geom.Point,LINESTRING:ol.geom.LineString,POLYGON:ol.geom.Polygon,MULTIPOINT:ol.geom.MultiPoint,MULTILINESTRING:ol.geom.MultiLineString,MULTIPOLYGON:ol.geom.MultiPolygon},ol.format.WKT.Parser.GeometryParser_={POINT:ol.format.WKT.Parser.prototype.parsePointText_,LINESTRING:ol.format.WKT.Parser.prototype.parseLineStringText_,POLYGON:ol.format.WKT.Parser.prototype.parsePolygonText_,MULTIPOINT:ol.format.WKT.Parser.prototype.parseMultiPointText_,MULTILINESTRING:ol.format.WKT.Parser.prototype.parseMultiLineStringText_,MULTIPOLYGON:ol.format.WKT.Parser.prototype.parseMultiPolygonText_},goog.provide("ol.format.WMSCapabilities"),goog.require("ol"),goog.require("ol.format.XLink"),goog.require("ol.format.XML"),goog.require("ol.format.XSD"),goog.require("ol.xml"),ol.format.WMSCapabilities=function(){ol.format.XML.call(this),this.version=void 0},ol.inherits(ol.format.WMSCapabilities,ol.format.XML),ol.format.WMSCapabilities.prototype.read,ol.format.WMSCapabilities.prototype.readFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null},ol.format.WMSCapabilities.prototype.readFromNode=function(e){this.version=e.getAttribute("version").trim();var t=ol.xml.pushParseAndPop({version:this.version},ol.format.WMSCapabilities.PARSERS_,e,[]);return t?t:null};ol.format.WMSCapabilities.readAttribution_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.ATTRIBUTION_PARSERS_,e,t)};ol.format.WMSCapabilities.readBoundingBox_=function(e,t){var o=[ol.format.XSD.readDecimalString(e.getAttribute("minx")),ol.format.XSD.readDecimalString(e.getAttribute("miny")),ol.format.XSD.readDecimalString(e.getAttribute("maxx")),ol.format.XSD.readDecimalString(e.getAttribute("maxy"))],r=[ol.format.XSD.readDecimalString(e.getAttribute("resx")),ol.format.XSD.readDecimalString(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS"),extent:o,res:r}},ol.format.WMSCapabilities.readEXGeographicBoundingBox_=function(e,t){var o=ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS_,e,t);if(o){var r=o.westBoundLongitude,i=o.southBoundLatitude,n=o.eastBoundLongitude,a=o.northBoundLatitude;if(void 0!==r&&void 0!==i&&void 0!==n&&void 0!==a)return[r,i,n,a]}},ol.format.WMSCapabilities.readCapability_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CAPABILITY_PARSERS_,e,t)},ol.format.WMSCapabilities.readService_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.SERVICE_PARSERS_,e,t)},ol.format.WMSCapabilities.readContactInformation_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CONTACT_INFORMATION_PARSERS_,e,t)},ol.format.WMSCapabilities.readContactPersonPrimary_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CONTACT_PERSON_PARSERS_,e,t)},ol.format.WMSCapabilities.readContactAddress_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.CONTACT_ADDRESS_PARSERS_,e,t)},ol.format.WMSCapabilities.readException_=function(e,t){return ol.xml.pushParseAndPop([],ol.format.WMSCapabilities.EXCEPTION_PARSERS_,e,t)},ol.format.WMSCapabilities.readCapabilityLayer_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.LAYER_PARSERS_,e,t)},ol.format.WMSCapabilities.readLayer_=function(e,t){var o=t[t.length-1],r=ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.LAYER_PARSERS_,e,t);if(r){var i=ol.format.XSD.readBooleanString(e.getAttribute("queryable"));void 0===i&&(i=o.queryable),r.queryable=void 0!==i&&i;var n=ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("cascaded"));void 0===n&&(n=o.cascaded),r.cascaded=n;var a=ol.format.XSD.readBooleanString(e.getAttribute("opaque"));void 0===a&&(a=o.opaque),r.opaque=void 0!==a&&a;var l=ol.format.XSD.readBooleanString(e.getAttribute("noSubsets"));void 0===l&&(l=o.noSubsets),r.noSubsets=void 0!==l&&l;var s=ol.format.XSD.readDecimalString(e.getAttribute("fixedWidth"));s||(s=o.fixedWidth),r.fixedWidth=s;var p=ol.format.XSD.readDecimalString(e.getAttribute("fixedHeight"));p||(p=o.fixedHeight),r.fixedHeight=p;var g=["Style","CRS","AuthorityURL"];g.forEach(function(e){if(e in o){var t=r[e]||[];r[e]=t.concat(o[e])}});var u=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];return u.forEach(function(e){if(!(e in r)){var t=o[e];r[e]=t}}),r}},ol.format.WMSCapabilities.readDimension_=function(e,t){var o={name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:ol.format.XSD.readBooleanString(e.getAttribute("multipleValues")),nearestValue:ol.format.XSD.readBooleanString(e.getAttribute("nearestValue")),current:ol.format.XSD.readBooleanString(e.getAttribute("current")),values:ol.format.XSD.readString(e)};return o},ol.format.WMSCapabilities.readFormatOnlineresource_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.FORMAT_ONLINERESOURCE_PARSERS_,e,t)},ol.format.WMSCapabilities.readRequest_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.REQUEST_PARSERS_,e,t)},ol.format.WMSCapabilities.readDCPType_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.DCPTYPE_PARSERS_,e,t)},ol.format.WMSCapabilities.readHTTP_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.HTTP_PARSERS_,e,t)},ol.format.WMSCapabilities.readOperationType_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.OPERATIONTYPE_PARSERS_,e,t)},ol.format.WMSCapabilities.readSizedFormatOnlineresource_=function(e,t){var o=ol.format.WMSCapabilities.readFormatOnlineresource_(e,t);if(o){var r=[ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("width")),ol.format.XSD.readNonNegativeIntegerString(e.getAttribute("height"))];return o.size=r,o}},ol.format.WMSCapabilities.readAuthorityURL_=function(e,t){var o=ol.format.WMSCapabilities.readFormatOnlineresource_(e,t);if(o)return o.name=e.getAttribute("name"),o},ol.format.WMSCapabilities.readMetadataURL_=function(e,t){var o=ol.format.WMSCapabilities.readFormatOnlineresource_(e,t);if(o)return o.type=e.getAttribute("type"),o},ol.format.WMSCapabilities.readStyle_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMSCapabilities.STYLE_PARSERS_,e,t)},ol.format.WMSCapabilities.readKeywordList_=function(e,t){return ol.xml.pushParseAndPop([],ol.format.WMSCapabilities.KEYWORDLIST_PARSERS_,e,t)},ol.format.WMSCapabilities.NAMESPACE_URIS_=[null,"http://www.opengis.net/wms"],ol.format.WMSCapabilities.PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Service:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readService_),Capability:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readCapability_)}),ol.format.WMSCapabilities.CAPABILITY_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Request:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readRequest_),Exception:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readException_),Layer:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readCapabilityLayer_)}),ol.format.WMSCapabilities.SERVICE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Abstract:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),KeywordList:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readKeywordList_),OnlineResource:ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref),ContactInformation:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readContactInformation_),Fees:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),AccessConstraints:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),LayerLimit:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MaxWidth:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MaxHeight:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger)}),ol.format.WMSCapabilities.CONTACT_INFORMATION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{ContactPersonPrimary:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readContactPersonPrimary_),ContactPosition:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactAddress:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readContactAddress_),ContactVoiceTelephone:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactFacsimileTelephone:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactElectronicMailAddress:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}),ol.format.WMSCapabilities.CONTACT_PERSON_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{ContactPerson:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),ContactOrganization:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}),ol.format.WMSCapabilities.CONTACT_ADDRESS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{AddressType:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Address:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),
City:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),StateOrProvince:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),PostCode:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Country:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)}),ol.format.WMSCapabilities.EXCEPTION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Format:ol.xml.makeArrayPusher(ol.format.XSD.readString)}),ol.format.WMSCapabilities.LAYER_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Abstract:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),KeywordList:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readKeywordList_),CRS:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),EX_GeographicBoundingBox:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readEXGeographicBoundingBox_),BoundingBox:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readBoundingBox_),Dimension:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readDimension_),Attribution:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readAttribution_),AuthorityURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readAuthorityURL_),Identifier:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),MetadataURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readMetadataURL_),DataURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readFormatOnlineresource_),FeatureListURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readFormatOnlineresource_),Style:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readStyle_),MinScaleDenominator:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),MaxScaleDenominator:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),Layer:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readLayer_)}),ol.format.WMSCapabilities.ATTRIBUTION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),OnlineResource:ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref),LogoURL:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readSizedFormatOnlineresource_)}),ol.format.WMSCapabilities.EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{westBoundLongitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),eastBoundLongitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),southBoundLatitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),northBoundLatitude:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal)}),ol.format.WMSCapabilities.REQUEST_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{GetCapabilities:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readOperationType_),GetMap:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readOperationType_),GetFeatureInfo:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readOperationType_)}),ol.format.WMSCapabilities.OPERATIONTYPE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Format:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),DCPType:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readDCPType_)}),ol.format.WMSCapabilities.DCPTYPE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{HTTP:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readHTTP_)}),ol.format.WMSCapabilities.HTTP_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Get:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_),Post:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_)}),ol.format.WMSCapabilities.STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Name:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Abstract:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),LegendURL:ol.xml.makeObjectPropertyPusher(ol.format.WMSCapabilities.readSizedFormatOnlineresource_),StyleSheetURL:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_),StyleURL:ol.xml.makeObjectPropertySetter(ol.format.WMSCapabilities.readFormatOnlineresource_)}),ol.format.WMSCapabilities.FORMAT_ONLINERESOURCE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Format:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),OnlineResource:ol.xml.makeObjectPropertySetter(ol.format.XLink.readHref)}),ol.format.WMSCapabilities.KEYWORDLIST_PARSERS_=ol.xml.makeStructureNS(ol.format.WMSCapabilities.NAMESPACE_URIS_,{Keyword:ol.xml.makeArrayPusher(ol.format.XSD.readString)}),goog.provide("ol.format.WMSGetFeatureInfo"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.format.GML2"),goog.require("ol.format.XMLFeature"),goog.require("ol.obj"),goog.require("ol.xml"),ol.format.WMSGetFeatureInfo=function(e){var t=e?e:{};this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new ol.format.GML2,this.layers_=t.layers?t.layers:null,ol.format.XMLFeature.call(this)},ol.inherits(ol.format.WMSGetFeatureInfo,ol.format.XMLFeature),ol.format.WMSGetFeatureInfo.featureIdentifier_="_feature",ol.format.WMSGetFeatureInfo.layerIdentifier_="_layer",ol.format.WMSGetFeatureInfo.prototype.readFeatures_=function(e,t){e.setAttribute("namespaceURI",this.featureNS_);var o=e.localName,r=[];if(0===e.childNodes.length)return r;if("msGMLOutput"==o)for(var i=0,n=e.childNodes.length;i<n;i++){var a=e.childNodes[i];if(a.nodeType===Node.ELEMENT_NODE){var l=t[0],s=ol.format.WMSGetFeatureInfo.layerIdentifier_,p=a.localName.replace(s,"");if(!this.layers_||ol.array.includes(this.layers_,p)){var g=p+ol.format.WMSGetFeatureInfo.featureIdentifier_;l.featureType=g,l.featureNS=this.featureNS_;var u={};u[g]=ol.xml.makeArrayPusher(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var c=ol.xml.makeStructureNS([l.featureNS,null],u);a.setAttribute("namespaceURI",this.featureNS_);var y=ol.xml.pushParseAndPop([],c,a,t,this.gmlFormat_);y&&ol.array.extend(r,y)}}}if("FeatureCollection"==o){var h=ol.xml.pushParseAndPop([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,e,[{}],this.gmlFormat_);h&&(r=h)}return r},ol.format.WMSGetFeatureInfo.prototype.readFeatures,ol.format.WMSGetFeatureInfo.prototype.readFeaturesFromNode=function(e,t){var o={};return t&&ol.obj.assign(o,this.getReadOptions(e,t)),this.readFeatures_(e,[o])},ol.format.WMSGetFeatureInfo.prototype.writeFeatureNode=function(e,t){},ol.format.WMSGetFeatureInfo.prototype.writeFeaturesNode=function(e,t){},ol.format.WMSGetFeatureInfo.prototype.writeGeometryNode=function(e,t){},goog.provide("ol.format.WMTSCapabilities"),goog.require("ol"),goog.require("ol.extent"),goog.require("ol.format.OWS"),goog.require("ol.format.XLink"),goog.require("ol.format.XML"),goog.require("ol.format.XSD"),goog.require("ol.xml"),ol.format.WMTSCapabilities=function(){ol.format.XML.call(this),this.owsParser_=new ol.format.OWS},ol.inherits(ol.format.WMTSCapabilities,ol.format.XML),ol.format.WMTSCapabilities.prototype.read,ol.format.WMTSCapabilities.prototype.readFromDocument=function(e){for(var t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null},ol.format.WMTSCapabilities.prototype.readFromNode=function(e){var t=e.getAttribute("version").trim(),o=this.owsParser_.readFromNode(e);return o?(o.version=t,o=ol.xml.pushParseAndPop(o,ol.format.WMTSCapabilities.PARSERS_,e,[]),o?o:null):null},ol.format.WMTSCapabilities.readContents_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.CONTENTS_PARSERS_,e,t)},ol.format.WMTSCapabilities.readLayer_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.LAYER_PARSERS_,e,t)},ol.format.WMTSCapabilities.readTileMatrixSet_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.TMS_PARSERS_,e,t)},ol.format.WMTSCapabilities.readStyle_=function(e,t){var o=ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.STYLE_PARSERS_,e,t);if(o){var r="true"===e.getAttribute("isDefault");return o.isDefault=r,o}},ol.format.WMTSCapabilities.readTileMatrixSetLink_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.TMS_LINKS_PARSERS_,e,t)},ol.format.WMTSCapabilities.readDimensions_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.DIMENSION_PARSERS_,e,t)},ol.format.WMTSCapabilities.readResourceUrl_=function(e,t){var o=e.getAttribute("format"),r=e.getAttribute("template"),i=e.getAttribute("resourceType"),n={};return o&&(n.format=o),r&&(n.template=r),i&&(n.resourceType=i),n},ol.format.WMTSCapabilities.readWgs84BoundingBox_=function(e,t){var o=ol.xml.pushParseAndPop([],ol.format.WMTSCapabilities.WGS84_BBOX_READERS_,e,t);if(2==o.length)return ol.extent.boundingExtent(o)},ol.format.WMTSCapabilities.readLegendUrl_=function(e,t){var o={};return o.format=e.getAttribute("format"),o.href=ol.format.XLink.readHref(e),o},ol.format.WMTSCapabilities.readCoordinates_=function(e,t){var o=ol.format.XSD.readString(e).split(" ");if(o&&2==o.length){var r=+o[0],i=+o[1];if(!isNaN(r)&&!isNaN(i))return[r,i]}},ol.format.WMTSCapabilities.readTileMatrix_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.TM_PARSERS_,e,t)},ol.format.WMTSCapabilities.readTileMatrixLimitsList_=function(e,t){return ol.xml.pushParseAndPop([],ol.format.WMTSCapabilities.TMS_LIMITS_LIST_PARSERS_,e,t)},ol.format.WMTSCapabilities.readTileMatrixLimits_=function(e,t){return ol.xml.pushParseAndPop({},ol.format.WMTSCapabilities.TMS_LIMITS_PARSERS_,e,t)},ol.format.WMTSCapabilities.NAMESPACE_URIS_=[null,"http://www.opengis.net/wmts/1.0"],ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_=[null,"http://www.opengis.net/ows/1.1"],ol.format.WMTSCapabilities.PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{Contents:ol.xml.makeObjectPropertySetter(ol.format.WMTSCapabilities.readContents_)}),ol.format.WMTSCapabilities.CONTENTS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{Layer:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readLayer_),TileMatrixSet:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readTileMatrixSet_)}),ol.format.WMTSCapabilities.LAYER_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{Style:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readStyle_),Format:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString),TileMatrixSetLink:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readTileMatrixSetLink_),Dimension:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readDimensions_),ResourceURL:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readResourceUrl_)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Abstract:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),WGS84BoundingBox:ol.xml.makeObjectPropertySetter(ol.format.WMTSCapabilities.readWgs84BoundingBox_),Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)})),ol.format.WMTSCapabilities.STYLE_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{LegendURL:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readLegendUrl_)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{Title:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)})),ol.format.WMTSCapabilities.TMS_LINKS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{TileMatrixSet:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),TileMatrixSetLimits:ol.xml.makeObjectPropertySetter(ol.format.WMTSCapabilities.readTileMatrixLimitsList_)}),ol.format.WMTSCapabilities.TMS_LIMITS_LIST_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{TileMatrixLimits:ol.xml.makeArrayPusher(ol.format.WMTSCapabilities.readTileMatrixLimits_)}),ol.format.WMTSCapabilities.TMS_LIMITS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{TileMatrix:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),MinTileRow:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MaxTileRow:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MinTileCol:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MaxTileCol:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger)}),ol.format.WMTSCapabilities.DIMENSION_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{Default:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Value:ol.xml.makeObjectPropertyPusher(ol.format.XSD.readString)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)})),ol.format.WMTSCapabilities.WGS84_BBOX_READERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{LowerCorner:ol.xml.makeArrayPusher(ol.format.WMTSCapabilities.readCoordinates_),UpperCorner:ol.xml.makeArrayPusher(ol.format.WMTSCapabilities.readCoordinates_)}),ol.format.WMTSCapabilities.TMS_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{WellKnownScaleSet:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),TileMatrix:ol.xml.makeObjectPropertyPusher(ol.format.WMTSCapabilities.readTileMatrix_)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{SupportedCRS:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString),Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)})),ol.format.WMTSCapabilities.TM_PARSERS_=ol.xml.makeStructureNS(ol.format.WMTSCapabilities.NAMESPACE_URIS_,{TopLeftCorner:ol.xml.makeObjectPropertySetter(ol.format.WMTSCapabilities.readCoordinates_),ScaleDenominator:ol.xml.makeObjectPropertySetter(ol.format.XSD.readDecimal),TileWidth:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),TileHeight:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MatrixWidth:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger),MatrixHeight:ol.xml.makeObjectPropertySetter(ol.format.XSD.readNonNegativeInteger)},ol.xml.makeStructureNS(ol.format.WMTSCapabilities.OWS_NAMESPACE_URIS_,{Identifier:ol.xml.makeObjectPropertySetter(ol.format.XSD.readString)})),goog.provide("ol.GeolocationProperty"),ol.GeolocationProperty={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},goog.provide("ol.Geolocation"),goog.require("ol"),goog.require("ol.Object"),goog.require("ol.GeolocationProperty"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.geom.Polygon"),goog.require("ol.has"),goog.require("ol.math"),goog.require("ol.proj"),goog.require("ol.sphere.WGS84"),ol.Geolocation=function(e){ol.Object.call(this);var t=e||{};this.position_=null,this.transform_=ol.proj.identityTransform,this.watchId_=void 0,ol.events.listen(this,ol.Object.getChangeEventType(ol.GeolocationProperty.PROJECTION),this.handleProjectionChanged_,this),ol.events.listen(this,ol.Object.getChangeEventType(ol.GeolocationProperty.TRACKING),this.handleTrackingChanged_,this),void 0!==t.projection&&this.setProjection(t.projection),void 0!==t.trackingOptions&&this.setTrackingOptions(t.trackingOptions),this.setTracking(void 0!==t.tracking&&t.tracking)},ol.inherits(ol.Geolocation,ol.Object),ol.Geolocation.prototype.disposeInternal=function(){this.setTracking(!1),ol.Object.prototype.disposeInternal.call(this)},ol.Geolocation.prototype.handleProjectionChanged_=function(){var e=this.getProjection();e&&(this.transform_=ol.proj.getTransformFromProjections(ol.proj.get("EPSG:4326"),e),this.position_&&this.set(ol.GeolocationProperty.POSITION,this.transform_(this.position_)))},ol.Geolocation.prototype.handleTrackingChanged_=function(){if(ol.has.GEOLOCATION){var e=this.getTracking();e&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):e||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},ol.Geolocation.prototype.positionChange_=function(e){var t=e.coords;this.set(ol.GeolocationProperty.ACCURACY,t.accuracy),this.set(ol.GeolocationProperty.ALTITUDE,null===t.altitude?void 0:t.altitude),this.set(ol.GeolocationProperty.ALTITUDE_ACCURACY,null===t.altitudeAccuracy?void 0:t.altitudeAccuracy),this.set(ol.GeolocationProperty.HEADING,null===t.heading?void 0:ol.math.toRadians(t.heading)),this.position_?(this.position_[0]=t.longitude,this.position_[1]=t.latitude):this.position_=[t.longitude,t.latitude];var o=this.transform_(this.position_);this.set(ol.GeolocationProperty.POSITION,o),this.set(ol.GeolocationProperty.SPEED,null===t.speed?void 0:t.speed);var r=ol.geom.Polygon.circular(ol.sphere.WGS84,this.position_,t.accuracy);r.applyTransform(this.transform_),this.set(ol.GeolocationProperty.ACCURACY_GEOMETRY,r),this.changed()},ol.Geolocation.prototype.positionError_=function(e){e.type=ol.events.EventType.ERROR,this.setTracking(!1),this.dispatchEvent(e)},ol.Geolocation.prototype.getAccuracy=function(){return this.get(ol.GeolocationProperty.ACCURACY)},ol.Geolocation.prototype.getAccuracyGeometry=function(){return this.get(ol.GeolocationProperty.ACCURACY_GEOMETRY)||null},ol.Geolocation.prototype.getAltitude=function(){return this.get(ol.GeolocationProperty.ALTITUDE)},ol.Geolocation.prototype.getAltitudeAccuracy=function(){return this.get(ol.GeolocationProperty.ALTITUDE_ACCURACY)},ol.Geolocation.prototype.getHeading=function(){return this.get(ol.GeolocationProperty.HEADING)},ol.Geolocation.prototype.getPosition=function(){return this.get(ol.GeolocationProperty.POSITION)},ol.Geolocation.prototype.getProjection=function(){return this.get(ol.GeolocationProperty.PROJECTION)},ol.Geolocation.prototype.getSpeed=function(){return this.get(ol.GeolocationProperty.SPEED)},ol.Geolocation.prototype.getTracking=function(){return this.get(ol.GeolocationProperty.TRACKING)},ol.Geolocation.prototype.getTrackingOptions=function(){return this.get(ol.GeolocationProperty.TRACKING_OPTIONS)},ol.Geolocation.prototype.setProjection=function(e){this.set(ol.GeolocationProperty.PROJECTION,ol.proj.get(e))},ol.Geolocation.prototype.setTracking=function(e){this.set(ol.GeolocationProperty.TRACKING,e)},ol.Geolocation.prototype.setTrackingOptions=function(e){this.set(ol.GeolocationProperty.TRACKING_OPTIONS,e)},goog.provide("ol.geom.Circle"),goog.require("ol"),goog.require("ol.extent"),goog.require("ol.geom.GeometryLayout"),goog.require("ol.geom.GeometryType"),goog.require("ol.geom.SimpleGeometry"),goog.require("ol.geom.flat.deflate"),ol.geom.Circle=function(e,t,o){ol.geom.SimpleGeometry.call(this);var r=t?t:0;this.setCenterAndRadius(e,r,o)},ol.inherits(ol.geom.Circle,ol.geom.SimpleGeometry),ol.geom.Circle.prototype.clone=function(){var e=new ol.geom.Circle(null);return e.setFlatCoordinates(this.layout,this.flatCoordinates.slice()),e},ol.geom.Circle.prototype.closestPointXY=function(e,t,o,r){var i=this.flatCoordinates,n=e-i[0],a=t-i[1],l=n*n+a*a;if(l<r){var s;if(0===l)for(s=0;s<this.stride;++s)o[s]=i[s];else{var p=this.getRadius()/Math.sqrt(l);for(o[0]=i[0]+p*n,o[1]=i[1]+p*a,s=2;s<this.stride;++s)o[s]=i[s]}return o.length=this.stride,l}return r},ol.geom.Circle.prototype.containsXY=function(e,t){var o=this.flatCoordinates,r=e-o[0],i=t-o[1];return r*r+i*i<=this.getRadiusSquared_()},ol.geom.Circle.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},ol.geom.Circle.prototype.computeExtent=function(e){var t=this.flatCoordinates,o=t[this.stride]-t[0];return ol.extent.createOrUpdate(t[0]-o,t[1]-o,t[0]+o,t[1]+o,e)},ol.geom.Circle.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},ol.geom.Circle.prototype.getRadiusSquared_=function(){var e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t},ol.geom.Circle.prototype.getType=function(){return ol.geom.GeometryType.CIRCLE},ol.geom.Circle.prototype.intersectsExtent=function(e){var t=this.getExtent();if(ol.extent.intersects(e,t)){var o=this.getCenter();return e[0]<=o[0]&&e[2]>=o[0]||(e[1]<=o[1]&&e[3]>=o[1]||ol.extent.forEachCorner(e,this.intersectsCoordinate,this))}return!1},ol.geom.Circle.prototype.setCenter=function(e){var t=this.stride,o=this.flatCoordinates[t]-this.flatCoordinates[0],r=e.slice();r[t]=r[0]+o;var i;for(i=1;i<t;++i)r[t+i]=e[i];this.setFlatCoordinates(this.layout,r)},ol.geom.Circle.prototype.setCenterAndRadius=function(e,t,o){if(e){this.setLayout(o,e,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,i=ol.geom.flat.deflate.coordinate(r,0,e,this.stride);r[i++]=r[0]+t;var n,a;for(n=1,a=this.stride;n<a;++n)r[i++]=r[n];r.length=i,this.changed()}else this.setFlatCoordinates(ol.geom.GeometryLayout.XY,null)},ol.geom.Circle.prototype.getCoordinates=function(){},ol.geom.Circle.prototype.setCoordinates=function(e,t){},ol.geom.Circle.prototype.setFlatCoordinates=function(e,t){this.setFlatCoordinatesInternal(e,t),this.changed()},ol.geom.Circle.prototype.setRadius=function(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()},ol.geom.Circle.prototype.transform,goog.provide("ol.geom.flat.geodesic"),goog.require("ol.math"),goog.require("ol.proj"),ol.geom.flat.geodesic.line_=function(e,t,o){for(var r,i,n,a,l,s,p=[],g=e(0),u=e(1),c=t(g),y=t(u),h=[u,g],d=[y,c],f=[1,0],m={},v=1e5;--v>0&&f.length>0;)n=f.pop(),g=h.pop(),c=d.pop(),s=n.toString(),s in m||(p.push(c[0],c[1]),m[s]=!0),a=f.pop(),u=h.pop(),y=d.pop(),l=(n+a)/2,r=e(l),i=t(r),ol.math.squaredSegmentDistance(i[0],i[1],c[0],c[1],y[0],y[1])<o?(p.push(y[0],y[1]),s=a.toString(),m[s]=!0):(f.push(a,l,l,n),d.push(y,i,i,c),h.push(u,r,r,g));return p},ol.geom.flat.geodesic.greatCircleArc=function(e,t,o,r,i,n){var a=ol.proj.get("EPSG:4326"),l=Math.cos(ol.math.toRadians(t)),s=Math.sin(ol.math.toRadians(t)),p=Math.cos(ol.math.toRadians(r)),g=Math.sin(ol.math.toRadians(r)),u=Math.cos(ol.math.toRadians(o-e)),c=Math.sin(ol.math.toRadians(o-e)),y=s*g+l*p*u;return ol.geom.flat.geodesic.line_(function(t){if(1<=y)return[o,r];var i=t*Math.acos(y),n=Math.cos(i),a=Math.sin(i),h=c*p,d=l*g-s*p*u,f=Math.atan2(h,d),m=Math.asin(s*n+l*a*Math.cos(f)),v=ol.math.toRadians(e)+Math.atan2(Math.sin(f)*a*l,n-s*Math.sin(m));return[ol.math.toDegrees(v),ol.math.toDegrees(m)]},ol.proj.getTransform(a,i),n)},ol.geom.flat.geodesic.meridian=function(e,t,o,r,i){var n=ol.proj.get("EPSG:4326");return ol.geom.flat.geodesic.line_(function(r){return[e,t+(o-t)*r]},ol.proj.getTransform(n,r),i)},ol.geom.flat.geodesic.parallel=function(e,t,o,r,i){var n=ol.proj.get("EPSG:4326");return ol.geom.flat.geodesic.line_(function(r){return[t+(o-t)*r,e]},ol.proj.getTransform(n,r),i)},goog.provide("ol.Graticule"),goog.require("ol.coordinate"),goog.require("ol.extent"),goog.require("ol.geom.GeometryLayout"),goog.require("ol.geom.LineString"),goog.require("ol.geom.Point"),goog.require("ol.geom.flat.geodesic"),goog.require("ol.math"),goog.require("ol.proj"),goog.require("ol.render.EventType"),goog.require("ol.style.Fill"),goog.require("ol.style.Stroke"),goog.require("ol.style.Text"),ol.Graticule=function(e){var t=e||{};if(this.map_=null,this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-(1/0),this.minLon_=-(1/0),this.maxLatP_=1/0,this.maxLonP_=1/0,this.minLatP_=-(1/0),this.minLonP_=-(1/0),this.targetSize_=void 0!==t.targetSize?t.targetSize:100,this.maxLines_=void 0!==t.maxLines?t.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=void 0!==t.strokeStyle?t.strokeStyle:ol.Graticule.DEFAULT_STROKE_STYLE_,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,1==t.showLabels){var o=ol.coordinate.degreesToStringHDMS;this.lonLabelFormatter_=void 0==t.lonLabelFormatter?o.bind(this,"EW"):t.lonLabelFormatter,this.latLabelFormatter_=void 0==t.latLabelFormatter?o.bind(this,"NS"):t.latLabelFormatter,this.lonLabelPosition_=void 0==t.lonLabelPosition?0:t.lonLabelPosition,this.latLabelPosition_=void 0==t.latLabelPosition?1:t.latLabelPosition,this.lonLabelStyle_=void 0!==t.lonLabelStyle?t.lonLabelStyle:new ol.style.Text({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new ol.style.Fill({color:"rgba(0,0,0,1)"}),stroke:new ol.style.Stroke({color:"rgba(255,255,255,1)",width:3})}),this.latLabelStyle_=void 0!==t.latLabelStyle?t.latLabelStyle:new ol.style.Text({font:"12px Calibri,sans-serif",textAlign:"end",fill:new ol.style.Fill({color:"rgba(0,0,0,1)"}),stroke:new ol.style.Stroke({color:"rgba(255,255,255,1)",width:3})}),this.meridiansLabels_=[],this.parallelsLabels_=[]}this.setMap(void 0!==t.map?t.map:null)},ol.Graticule.DEFAULT_STROKE_STYLE_=new ol.style.Stroke({color:"rgba(0,0,0,0.2)"}),ol.Graticule.intervals_=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],ol.Graticule.prototype.addMeridian_=function(e,t,o,r,i,n){var a=this.getMeridian_(e,t,o,r,n);if(ol.extent.intersects(a.getExtent(),i)){if(this.meridiansLabels_){var l=this.getMeridianPoint_(a,i,n);this.meridiansLabels_[n]={geom:l,text:this.lonLabelFormatter_(e)}}this.meridians_[n++]=a}return n},ol.Graticule.prototype.getMeridianPoint_=function(e,t,o){var r=e.getFlatCoordinates(),i=Math.max(t[1],r[1]),n=Math.min(t[3],r[r.length-1]),a=ol.math.clamp(t[1]+Math.abs(t[1]-t[3])*this.lonLabelPosition_,i,n),l=[r[0],a],s=void 0!==this.meridiansLabels_[o]?this.meridiansLabels_[o].geom:new ol.geom.Point(null);return s.setCoordinates(l),s},ol.Graticule.prototype.addParallel_=function(e,t,o,r,i,n){var a=this.getParallel_(e,t,o,r,n);if(ol.extent.intersects(a.getExtent(),i)){if(this.parallelsLabels_){var l=this.getParallelPoint_(a,i,n);this.parallelsLabels_[n]={geom:l,text:this.latLabelFormatter_(e)}}this.parallels_[n++]=a}return n},ol.Graticule.prototype.getParallelPoint_=function(e,t,o){var r=e.getFlatCoordinates(),i=Math.max(t[0],r[0]),n=Math.min(t[2],r[r.length-2]),a=ol.math.clamp(t[0]+Math.abs(t[0]-t[2])*this.latLabelPosition_,i,n),l=[a,r[1]],s=void 0!==this.parallelsLabels_[o]?this.parallelsLabels_[o].geom:new ol.geom.Point(null);return s.setCoordinates(l),s},ol.Graticule.prototype.createGraticule_=function(e,t,o,r){var i=this.getInterval_(o);if(i==-1)return this.meridians_.length=this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var n,a,l,s,p=this.toLonLatTransform_(t),g=p[0],u=p[1],c=this.maxLines_,y=[Math.max(e[0],this.minLonP_),Math.max(e[1],this.minLatP_),Math.min(e[2],this.maxLonP_),Math.min(e[3],this.maxLatP_)];y=ol.proj.transformExtent(y,this.projection_,"EPSG:4326");var h=y[3],d=y[2],f=y[1],m=y[0];for(g=Math.floor(g/i)*i,s=ol.math.clamp(g,this.minLon_,this.maxLon_),a=this.addMeridian_(s,f,h,r,e,0),n=0;s!=this.minLon_&&n++<c;)s=Math.max(s-i,this.minLon_),a=this.addMeridian_(s,f,h,r,e,a);for(s=ol.math.clamp(g,this.minLon_,this.maxLon_),n=0;s!=this.maxLon_&&n++<c;)s=Math.min(s+i,this.maxLon_),a=this.addMeridian_(s,f,h,r,e,a);for(this.meridians_.length=a,this.meridiansLabels_&&(this.meridiansLabels_.length=a),u=Math.floor(u/i)*i,l=ol.math.clamp(u,this.minLat_,this.maxLat_),a=this.addParallel_(l,m,d,r,e,0),n=0;l!=this.minLat_&&n++<c;)l=Math.max(l-i,this.minLat_),a=this.addParallel_(l,m,d,r,e,a);for(l=ol.math.clamp(u,this.minLat_,this.maxLat_),n=0;l!=this.maxLat_&&n++<c;)l=Math.min(l+i,this.maxLat_),a=this.addParallel_(l,m,d,r,e,a);this.parallels_.length=a,this.parallelsLabels_&&(this.parallelsLabels_.length=a)},ol.Graticule.prototype.getInterval_=function(e){var t,o,r,i,n=this.projectionCenterLonLat_[0],a=this.projectionCenterLonLat_[1],l=-1,s=Math.pow(this.targetSize_*e,2),p=[],g=[];for(t=0,o=ol.Graticule.intervals_.length;t<o&&(r=ol.Graticule.intervals_[t]/2,p[0]=n-r,p[1]=a-r,g[0]=n+r,g[1]=a+r,this.fromLonLatTransform_(p,p),this.fromLonLatTransform_(g,g),i=Math.pow(g[0]-p[0],2)+Math.pow(g[1]-p[1],2),!(i<=s));++t)l=ol.Graticule.intervals_[t];return l},ol.Graticule.prototype.getMap=function(){return this.map_},ol.Graticule.prototype.getMeridian_=function(e,t,o,r,i){var n=ol.geom.flat.geodesic.meridian(e,t,o,this.projection_,r),a=void 0!==this.meridians_[i]?this.meridians_[i]:new ol.geom.LineString(null);return a.setFlatCoordinates(ol.geom.GeometryLayout.XY,n),a},ol.Graticule.prototype.getMeridians=function(){return this.meridians_},ol.Graticule.prototype.getParallel_=function(e,t,o,r,i){var n=ol.geom.flat.geodesic.parallel(e,this.minLon_,this.maxLon_,this.projection_,r),a=void 0!==this.parallels_[i]?this.parallels_[i]:new ol.geom.LineString(null);return a.setFlatCoordinates(ol.geom.GeometryLayout.XY,n),a},ol.Graticule.prototype.getParallels=function(){return this.parallels_},ol.Graticule.prototype.handlePostCompose_=function(e){var t=e.vectorContext,o=e.frameState,r=o.extent,i=o.viewState,n=i.center,a=i.projection,l=i.resolution,s=o.pixelRatio,p=l*l/(4*s*s),g=!this.projection_||!ol.proj.equivalent(this.projection_,a);g&&this.updateProjectionInfo_(a);var u=0;if(a.canWrapX()){var c=a.getExtent(),y=ol.extent.getWidth(c),h=o.focus[0];if(h<c[0]||h>c[2]){var d=Math.ceil((c[0]-h)/y);u=y*d,r=[r[0]+u,r[1],r[2]+u,r[3]]}}this.createGraticule_(r,n,l,p),t.setFillStrokeStyle(null,this.strokeStyle_);var f,m,v;for(f=0,m=this.meridians_.length;f<m;++f)v=this.meridians_[f],t.drawGeometry(v);for(f=0,m=this.parallels_.length;f<m;++f)v=this.parallels_[f],t.drawGeometry(v);var _;if(this.meridiansLabels_)for(f=0,m=this.meridiansLabels_.length;f<m;++f)_=this.meridiansLabels_[f],this.lonLabelStyle_.setText(_.text),t.setTextStyle(this.lonLabelStyle_),t.drawGeometry(_.geom);if(this.parallelsLabels_)for(f=0,m=this.parallelsLabels_.length;f<m;++f)_=this.parallelsLabels_[f],this.latLabelStyle_.setText(_.text),t.setTextStyle(this.latLabelStyle_),t.drawGeometry(_.geom)},ol.Graticule.prototype.updateProjectionInfo_=function(e){var t=ol.proj.get("EPSG:4326"),o=e.getExtent(),r=e.getWorldExtent(),i=ol.proj.transformExtent(r,t,e),n=r[3],a=r[2],l=r[1],s=r[0],p=i[3],g=i[2],u=i[1],c=i[0];this.maxLat_=n,this.maxLon_=a,this.minLat_=l,this.minLon_=s,this.maxLatP_=p,this.maxLonP_=g,this.minLatP_=u,this.minLonP_=c,this.fromLonLatTransform_=ol.proj.getTransform(t,e),this.toLonLatTransform_=ol.proj.getTransform(e,t),this.projectionCenterLonLat_=this.toLonLatTransform_(ol.extent.getCenter(o)),this.projection_=e},ol.Graticule.prototype.setMap=function(e){this.map_&&(this.map_.un(ol.render.EventType.POSTCOMPOSE,this.handlePostCompose_,this),this.map_.render()),e&&(e.on(ol.render.EventType.POSTCOMPOSE,this.handlePostCompose_,this),e.render()),this.map_=e},goog.provide("ol.ImageBase"),goog.require("ol"),goog.require("ol.events.EventTarget"),goog.require("ol.events.EventType"),ol.ImageBase=function(e,t,o,r,i){ol.events.EventTarget.call(this),this.attributions_=i,this.extent=e,this.pixelRatio_=o,this.resolution=t,this.state=r},ol.inherits(ol.ImageBase,ol.events.EventTarget),ol.ImageBase.prototype.changed=function(){this.dispatchEvent(ol.events.EventType.CHANGE)},ol.ImageBase.prototype.getAttributions=function(){return this.attributions_},ol.ImageBase.prototype.getExtent=function(){return this.extent},ol.ImageBase.prototype.getImage=function(e){};ol.ImageBase.prototype.getPixelRatio=function(){return this.pixelRatio_};ol.ImageBase.prototype.getResolution=function(){return this.resolution},ol.ImageBase.prototype.getState=function(){return this.state;
},ol.ImageBase.prototype.load=function(){},goog.provide("ol.Image"),goog.require("ol"),goog.require("ol.ImageBase"),goog.require("ol.ImageState"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.extent"),goog.require("ol.obj"),ol.Image=function(e,t,o,r,i,n,a){ol.ImageBase.call(this,e,t,o,ol.ImageState.IDLE,r),this.src_=i,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.imageByContext_={},this.imageListenerKeys_=null,this.state=ol.ImageState.IDLE,this.imageLoadFunction_=a},ol.inherits(ol.Image,ol.ImageBase),ol.Image.prototype.getImage=function(e){if(void 0!==e){var t,o=ol.getUid(e);return o in this.imageByContext_?this.imageByContext_[o]:(t=ol.obj.isEmpty(this.imageByContext_)?this.image_:this.image_.cloneNode(!1),this.imageByContext_[o]=t,t)}return this.image_},ol.Image.prototype.handleImageError_=function(){this.state=ol.ImageState.ERROR,this.unlistenImage_(),this.changed()},ol.Image.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=ol.extent.getHeight(this.extent)/this.image_.height),this.state=ol.ImageState.LOADED,this.unlistenImage_(),this.changed()},ol.Image.prototype.load=function(){this.state!=ol.ImageState.IDLE&&this.state!=ol.ImageState.ERROR||(this.state=ol.ImageState.LOADING,this.changed(),this.imageListenerKeys_=[ol.events.listenOnce(this.image_,ol.events.EventType.ERROR,this.handleImageError_,this),ol.events.listenOnce(this.image_,ol.events.EventType.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},ol.Image.prototype.setImage=function(e){this.image_=e},ol.Image.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(ol.events.unlistenByKey),this.imageListenerKeys_=null},goog.provide("ol.ImageCanvas"),goog.require("ol"),goog.require("ol.ImageBase"),goog.require("ol.ImageState"),ol.ImageCanvas=function(e,t,o,r,i,n){this.loader_=void 0!==n?n:null;var a=void 0!==n?ol.ImageState.IDLE:ol.ImageState.LOADED;ol.ImageBase.call(this,e,t,o,a,r),this.canvas_=i,this.error_=null},ol.inherits(ol.ImageCanvas,ol.ImageBase),ol.ImageCanvas.prototype.getError=function(){return this.error_},ol.ImageCanvas.prototype.handleLoad_=function(e){e?(this.error_=e,this.state=ol.ImageState.ERROR):this.state=ol.ImageState.LOADED,this.changed()},ol.ImageCanvas.prototype.load=function(){this.state==ol.ImageState.IDLE&&(this.state=ol.ImageState.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},ol.ImageCanvas.prototype.getImage=function(e){return this.canvas_},goog.provide("ol.Tile"),goog.require("ol"),goog.require("ol.TileState"),goog.require("ol.events.EventTarget"),goog.require("ol.events.EventType"),ol.Tile=function(e,t){ol.events.EventTarget.call(this),this.tileCoord=e,this.state=t,this.interimTile=null,this.key=""},ol.inherits(ol.Tile,ol.events.EventTarget),ol.Tile.prototype.changed=function(){this.dispatchEvent(ol.events.EventType.CHANGE)},ol.Tile.prototype.getKey=function(){return this.key+"/"+this.tileCoord},ol.Tile.prototype.getInterimTile=function(){if(!this.interimTile)return this;var e=this.interimTile;do{if(e.getState()==ol.TileState.LOADED)return e;e=e.interimTile}while(e);return this},ol.Tile.prototype.refreshInterimChain=function(){if(this.interimTile){var e=this.interimTile,t=this;do{if(e.getState()==ol.TileState.LOADED){e.interimTile=null;break}e.getState()==ol.TileState.LOADING?t=e:e.getState()==ol.TileState.IDLE?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}},ol.Tile.prototype.getTileCoord=function(){return this.tileCoord},ol.Tile.prototype.getState=function(){return this.state},ol.Tile.prototype.setState=function(e){this.state=e,this.changed()},ol.Tile.prototype.load=function(){},goog.provide("ol.ImageTile"),goog.require("ol"),goog.require("ol.Tile"),goog.require("ol.TileState"),goog.require("ol.events"),goog.require("ol.events.EventType"),ol.ImageTile=function(e,t,o,r,i){ol.Tile.call(this,e,t),this.src_=o,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.imageListenerKeys_=null,this.tileLoadFunction_=i},ol.inherits(ol.ImageTile,ol.Tile),ol.ImageTile.prototype.disposeInternal=function(){this.state==ol.TileState.LOADING&&this.unlistenImage_(),this.interimTile&&this.interimTile.dispose(),this.state=ol.TileState.ABORT,this.changed(),ol.Tile.prototype.disposeInternal.call(this)},ol.ImageTile.prototype.getImage=function(){return this.image_},ol.ImageTile.prototype.getKey=function(){return this.src_},ol.ImageTile.prototype.handleImageError_=function(){this.state=ol.TileState.ERROR,this.image_=ol.ImageTile.blankImage,this.unlistenImage_(),this.changed()},ol.ImageTile.prototype.handleImageLoad_=function(){this.image_.naturalWidth&&this.image_.naturalHeight?this.state=ol.TileState.LOADED:this.state=ol.TileState.EMPTY,this.unlistenImage_(),this.changed()},ol.ImageTile.prototype.load=function(){this.state!=ol.TileState.IDLE&&this.state!=ol.TileState.ERROR||(this.state=ol.TileState.LOADING,this.changed(),this.imageListenerKeys_=[ol.events.listenOnce(this.image_,ol.events.EventType.ERROR,this.handleImageError_,this),ol.events.listenOnce(this.image_,ol.events.EventType.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},ol.ImageTile.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(ol.events.unlistenByKey),this.imageListenerKeys_=null},ol.ImageTile.blankImage=new Image,ol.ImageTile.blankImage.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",goog.provide("ol.interaction.DragAndDrop"),goog.require("ol"),goog.require("ol.functions"),goog.require("ol.events"),goog.require("ol.events.Event"),goog.require("ol.events.EventType"),goog.require("ol.interaction.Interaction"),goog.require("ol.proj"),ol.interaction.DragAndDrop=function(e){var t=e?e:{};ol.interaction.Interaction.call(this,{handleEvent:ol.interaction.DragAndDrop.handleEvent}),this.formatConstructors_=t.formatConstructors?t.formatConstructors:[],this.projection_=t.projection?ol.proj.get(t.projection):null,this.dropListenKeys_=null,this.target=t.target?t.target:null},ol.inherits(ol.interaction.DragAndDrop,ol.interaction.Interaction),ol.interaction.DragAndDrop.handleDrop_=function(e){var t,o,r,i=e.dataTransfer.files;for(t=0,o=i.length;t<o;++t){r=i.item(t);var n=new FileReader;n.addEventListener(ol.events.EventType.LOAD,this.handleResult_.bind(this,r)),n.readAsText(r)}},ol.interaction.DragAndDrop.handleStop_=function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},ol.interaction.DragAndDrop.prototype.handleResult_=function(e,t){var o=t.target.result,r=this.getMap(),i=this.projection_;if(!i){var n=r.getView();i=n.getProjection()}var a,l,s=this.formatConstructors_,p=[];for(a=0,l=s.length;a<l;++a){var g=s[a],u=new g;if(p=this.tryReadFeatures_(u,o,{featureProjection:i}),p&&p.length>0)break}this.dispatchEvent(new ol.interaction.DragAndDrop.Event(ol.interaction.DragAndDrop.EventType_.ADD_FEATURES,e,p,i))},ol.interaction.DragAndDrop.handleEvent=ol.functions.TRUE,ol.interaction.DragAndDrop.prototype.registerListeners_=function(){var e=this.getMap();if(e){var t=this.target?this.target:e.getViewport();this.dropListenKeys_=[ol.events.listen(t,ol.events.EventType.DROP,ol.interaction.DragAndDrop.handleDrop_,this),ol.events.listen(t,ol.events.EventType.DRAGENTER,ol.interaction.DragAndDrop.handleStop_,this),ol.events.listen(t,ol.events.EventType.DRAGOVER,ol.interaction.DragAndDrop.handleStop_,this),ol.events.listen(t,ol.events.EventType.DROP,ol.interaction.DragAndDrop.handleStop_,this)]}},ol.interaction.DragAndDrop.prototype.setActive=function(e){ol.interaction.Interaction.prototype.setActive.call(this,e),e?this.registerListeners_():this.unregisterListeners_()},ol.interaction.DragAndDrop.prototype.setMap=function(e){this.unregisterListeners_(),ol.interaction.Interaction.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},ol.interaction.DragAndDrop.prototype.tryReadFeatures_=function(e,t,o){try{return e.readFeatures(t,o)}catch(e){return null}},ol.interaction.DragAndDrop.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(ol.events.unlistenByKey),this.dropListenKeys_=null)},ol.interaction.DragAndDrop.EventType_={ADD_FEATURES:"addfeatures"},ol.interaction.DragAndDrop.Event=function(e,t,o,r){ol.events.Event.call(this,e),this.features=o,this.file=t,this.projection=r},ol.inherits(ol.interaction.DragAndDrop.Event,ol.events.Event),goog.provide("ol.interaction.DragRotateAndZoom"),goog.require("ol"),goog.require("ol.RotationConstraint"),goog.require("ol.ViewHint"),goog.require("ol.events.condition"),goog.require("ol.interaction.Interaction"),goog.require("ol.interaction.Pointer"),ol.interaction.DragRotateAndZoom=function(e){var t=e?e:{};ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.DragRotateAndZoom.handleDownEvent_,handleDragEvent:ol.interaction.DragRotateAndZoom.handleDragEvent_,handleUpEvent:ol.interaction.DragRotateAndZoom.handleUpEvent_}),this.condition_=t.condition?t.condition:ol.events.condition.shiftKeyOnly,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==t.duration?t.duration:400},ol.inherits(ol.interaction.DragRotateAndZoom,ol.interaction.Pointer),ol.interaction.DragRotateAndZoom.handleDragEvent_=function(e){if(ol.events.condition.mouseOnly(e)){var t=e.map,o=t.getSize(),r=e.pixel,i=r[0]-o[0]/2,n=o[1]/2-r[1],a=Math.atan2(n,i),l=Math.sqrt(i*i+n*n),s=t.getView();if(s.getConstraints().rotation!==ol.RotationConstraint.disable&&void 0!==this.lastAngle_){var p=a-this.lastAngle_;ol.interaction.Interaction.rotateWithoutConstraints(s,s.getRotation()-p)}if(this.lastAngle_=a,void 0!==this.lastMagnitude_){var g=this.lastMagnitude_*(s.getResolution()/l);ol.interaction.Interaction.zoomWithoutConstraints(s,g)}void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/l),this.lastMagnitude_=l}},ol.interaction.DragRotateAndZoom.handleUpEvent_=function(e){if(!ol.events.condition.mouseOnly(e))return!0;var t=e.map,o=t.getView();o.setHint(ol.ViewHint.INTERACTING,-1);var r=this.lastScaleDelta_-1;return ol.interaction.Interaction.rotate(o,o.getRotation()),ol.interaction.Interaction.zoom(o,o.getResolution(),void 0,this.duration_,r),this.lastScaleDelta_=0,!1},ol.interaction.DragRotateAndZoom.handleDownEvent_=function(e){return!!ol.events.condition.mouseOnly(e)&&(!!this.condition_(e)&&(e.map.getView().setHint(ol.ViewHint.INTERACTING,1),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))},goog.provide("ol.interaction.DrawEventType"),ol.interaction.DrawEventType={DRAWSTART:"drawstart",DRAWEND:"drawend"},goog.provide("ol.render.canvas.Instruction"),ol.render.canvas.Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,DRAW_IMAGE:4,DRAW_TEXT:5,END_GEOMETRY:6,FILL:7,MOVE_TO_LINE_TO:8,SET_FILL_STYLE:9,SET_STROKE_STYLE:10,SET_TEXT_STYLE:11,STROKE:12},goog.provide("ol.render.canvas.Replay"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.extent"),goog.require("ol.extent.Relationship"),goog.require("ol.geom.flat.transform"),goog.require("ol.has"),goog.require("ol.obj"),goog.require("ol.render.VectorContext"),goog.require("ol.render.canvas.Instruction"),goog.require("ol.transform"),ol.render.canvas.Replay=function(e,t,o,r){ol.render.VectorContext.call(this),this.tolerance=e,this.maxExtent=t,this.overlaps=r,this.maxLineWidth=0,this.resolution=o,this.fillOrigin_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.instructions=[],this.coordinates=[],this.renderedTransform_=ol.transform.create(),this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.tmpLocalTransform_=ol.transform.create(),this.resetTransform_=ol.transform.create()},ol.inherits(ol.render.canvas.Replay,ol.render.VectorContext),ol.render.canvas.Replay.prototype.appendFlatCoordinates=function(e,t,o,r,i,n){var a=this.coordinates.length,l=this.getBufferedMaxExtent();n&&(t+=r);var s,p,g,u=[e[t],e[t+1]],c=[NaN,NaN],y=!0;for(s=t+r;s<o;s+=r)c[0]=e[s],c[1]=e[s+1],g=ol.extent.coordinateRelationship(l,c),g!==p?(y&&(this.coordinates[a++]=u[0],this.coordinates[a++]=u[1]),this.coordinates[a++]=c[0],this.coordinates[a++]=c[1],y=!1):g===ol.extent.Relationship.INTERSECTING?(this.coordinates[a++]=c[0],this.coordinates[a++]=c[1],y=!1):y=!0,u[0]=c[0],u[1]=c[1],p=g;return(i&&y||s===t+r)&&(this.coordinates[a++]=u[0],this.coordinates[a++]=u[1]),a},ol.render.canvas.Replay.prototype.beginGeometry=function(e,t){this.beginGeometryInstruction1_=[ol.render.canvas.Instruction.BEGIN_GEOMETRY,t,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[ol.render.canvas.Instruction.BEGIN_GEOMETRY,t,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},ol.render.canvas.Replay.prototype.fill_=function(e,t){if(this.fillOrigin_){var o=ol.transform.apply(this.renderedTransform_,this.fillOrigin_.slice());e.translate(o[0],o[1]),e.rotate(t)}e.fill(),this.fillOrigin_&&e.setTransform.apply(e,this.resetTransform_)},ol.render.canvas.Replay.prototype.replay_=function(e,t,o,r,i,n,a,l){var s;this.pixelCoordinates_&&ol.array.equals(o,this.renderedTransform_)?s=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),s=ol.geom.flat.transform.transform2D(this.coordinates,0,this.coordinates.length,2,o,this.pixelCoordinates_),ol.transform.setFromArray(this.renderedTransform_,o));for(var p,g,u,c,y,h=!ol.obj.isEmpty(i),d=0,f=n.length,m=0,v=this.tmpLocalTransform_,_=this.resetTransform_,S=0,x=0,E=this.instructions!=n||this.overlaps?0:200;d<f;){var P,T,R,L,M,C,b=n[d],I=b[0];switch(I){case ol.render.canvas.Instruction.BEGIN_GEOMETRY:P=b[1],h&&i[ol.getUid(P).toString()]||!P.getGeometry()?d=b[2]:void 0===l||ol.extent.intersects(l,P.getGeometry().getExtent())?++d:d=b[2]+1;break;case ol.render.canvas.Instruction.BEGIN_PATH:S>E&&(this.fill_(e,r),S=0),x>E&&(e.stroke(),x=0),S||x||(e.beginPath(),g=u=NaN),++d;break;case ol.render.canvas.Instruction.CIRCLE:m=b[1];var A=s[m],w=s[m+1],O=s[m+2],F=s[m+3],N=O-A,G=F-w,D=Math.sqrt(N*N+G*G);e.moveTo(A+D,w),e.arc(A,w,D,0,2*Math.PI,!0),++d;break;case ol.render.canvas.Instruction.CLOSE_PATH:e.closePath(),++d;break;case ol.render.canvas.Instruction.DRAW_IMAGE:m=b[1],p=b[2];var k=b[3],j=b[4]*t,q=b[5]*t,U=b[6],B=b[7],V=b[8],W=b[9],X=b[10],K=b[11],Y=b[12],Z=b[13],H=b[14];for(X&&(K+=r);m<p;m+=2){if(M=s[m]-j,C=s[m+1]-q,Z&&(M=Math.round(M),C=Math.round(C)),1!=Y||0!==K){var z=M+j,J=C+q;ol.transform.compose(v,z,J,Y,Y,K,-z,-J),e.setTransform.apply(e,v)}var Q=e.globalAlpha;1!=B&&(e.globalAlpha=Q*B);var $=H+V>k.width?k.width-V:H,ee=U+W>k.height?k.height-W:U;e.drawImage(k,V,W,$,ee,M,C,$*t,ee*t),1!=B&&(e.globalAlpha=Q),1==Y&&0===K||e.setTransform.apply(e,_)}++d;break;case ol.render.canvas.Instruction.DRAW_TEXT:m=b[1],p=b[2],L=b[3];var te=b[4]*t,oe=b[5]*t;for(K=b[6],Y=b[7]*t,T=b[8],R=b[9],X=b[10],X&&(K+=r);m<p;m+=2){M=s[m]+te,C=s[m+1]+oe,1==Y&&0===K||(ol.transform.compose(v,M,C,Y,Y,K,-M,-C),e.setTransform.apply(e,v));var re,ie,ne=L.split("\n"),ae=ne.length;ae>1?(re=Math.round(1.5*e.measureText("M").width),ie=C-(ae-1)/2*re):(re=0,ie=C);for(var le=0;le<ae;le++){var se=ne[le];R&&e.strokeText(se,M,ie),T&&e.fillText(se,M,ie),ie+=re}1==Y&&0===K||e.setTransform.apply(e,_)}++d;break;case ol.render.canvas.Instruction.END_GEOMETRY:if(void 0!==a){P=b[1];var pe=a(P);if(pe)return pe}++d;break;case ol.render.canvas.Instruction.FILL:E?S++:this.fill_(e,r),++d;break;case ol.render.canvas.Instruction.MOVE_TO_LINE_TO:for(m=b[1],p=b[2],M=s[m],C=s[m+1],c=M+.5|0,y=C+.5|0,c===g&&y===u||(e.moveTo(M,C),g=c,u=y),m+=2;m<p;m+=2)M=s[m],C=s[m+1],c=M+.5|0,y=C+.5|0,m!=p-2&&c===g&&y===u||(e.lineTo(M,C),g=c,u=y);++d;break;case ol.render.canvas.Instruction.SET_FILL_STYLE:this.fillOrigin_=b[2],S&&(this.fill_(e,r),S=0,x&&(e.stroke(),x=0)),e.fillStyle=b[1],++d;break;case ol.render.canvas.Instruction.SET_STROKE_STYLE:var ge=void 0===b[8]||b[8],ue=b[9],ce=b[2];if(x&&(e.stroke(),x=0),e.strokeStyle=b[1],e.lineWidth=ge?ce*t:ce,e.lineCap=b[3],e.lineJoin=b[4],e.miterLimit=b[5],ol.has.CANVAS_LINE_DASH){var ye=b[6],he=b[7];ge&&t!==ue&&(ye=ye.map(function(e){return e*t/ue}),he*=t/ue,b[6]=ye,b[7]=he,b[9]=t),e.lineDashOffset=he,e.setLineDash(ye)}++d;break;case ol.render.canvas.Instruction.SET_TEXT_STYLE:e.font=b[1],e.textAlign=b[2],e.textBaseline=b[3],++d;break;case ol.render.canvas.Instruction.STROKE:E?x++:e.stroke(),++d;break;default:++d}}S&&this.fill_(e,r),x&&e.stroke()},ol.render.canvas.Replay.prototype.replay=function(e,t,o,r,i){var n=this.instructions;this.replay_(e,t,o,r,i,n,void 0,void 0)},ol.render.canvas.Replay.prototype.replayHitDetection=function(e,t,o,r,i,n){var a=this.hitDetectionInstructions;return this.replay_(e,1,t,o,r,a,i,n)},ol.render.canvas.Replay.prototype.reverseHitDetectionInstructions=function(){var e=this.hitDetectionInstructions;e.reverse();var t,o,r,i=e.length,n=-1;for(t=0;t<i;++t)o=e[t],r=o[0],r==ol.render.canvas.Instruction.END_GEOMETRY?n=t:r==ol.render.canvas.Instruction.BEGIN_GEOMETRY&&(o[2]=t,ol.array.reverseSubArray(this.hitDetectionInstructions,n,t),n=-1)},ol.render.canvas.Replay.prototype.endGeometry=function(e,t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var o=[ol.render.canvas.Instruction.END_GEOMETRY,t];this.instructions.push(o),this.hitDetectionInstructions.push(o)},ol.render.canvas.Replay.prototype.finish=ol.nullFunction,ol.render.canvas.Replay.prototype.getBufferedMaxExtent=function(){return this.maxExtent},goog.provide("ol.render.canvas.ImageReplay"),goog.require("ol"),goog.require("ol.render.canvas.Instruction"),goog.require("ol.render.canvas.Replay"),ol.render.canvas.ImageReplay=function(e,t,o,r){ol.render.canvas.Replay.call(this,e,t,o,r),this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.snapToPixel_=void 0,this.width_=void 0},ol.inherits(ol.render.canvas.ImageReplay,ol.render.canvas.Replay),ol.render.canvas.ImageReplay.prototype.drawCoordinates_=function(e,t,o,r){return this.appendFlatCoordinates(e,t,o,r,!1,!1)},ol.render.canvas.ImageReplay.prototype.drawPoint=function(e,t){if(this.image_){this.beginGeometry(e,t);var o=e.getFlatCoordinates(),r=e.getStride(),i=this.coordinates.length,n=this.drawCoordinates_(o,0,o.length,r);this.instructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,i,n,this.image_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,i,n,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(e,t)}},ol.render.canvas.ImageReplay.prototype.drawMultiPoint=function(e,t){if(this.image_){this.beginGeometry(e,t);var o=e.getFlatCoordinates(),r=e.getStride(),i=this.coordinates.length,n=this.drawCoordinates_(o,0,o.length,r);this.instructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,i,n,this.image_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.hitDetectionInstructions.push([ol.render.canvas.Instruction.DRAW_IMAGE,i,n,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.snapToPixel_,this.width_]),this.endGeometry(e,t)}},ol.render.canvas.ImageReplay.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.snapToPixel_=void 0,this.width_=void 0},ol.render.canvas.ImageReplay.prototype.setImageStyle=function(e){var t=e.getAnchor(),o=e.getSize(),r=e.getHitDetectionImage(1),i=e.getImage(1),n=e.getOrigin();this.anchorX_=t[0],this.anchorY_=t[1],this.hitDetectionImage_=r,this.image_=i,this.height_=o[1],this.opacity_=e.getOpacity(),this.originX_=n[0],this.originY_=n[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScale(),this.snapToPixel_=e.getSnapToPixel(),this.width_=o[0]},goog.provide("ol.render.canvas.LineStringReplay"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.colorlike"),goog.require("ol.extent"),goog.require("ol.render.canvas"),goog.require("ol.render.canvas.Instruction"),goog.require("ol.render.canvas.Replay"),ol.render.canvas.LineStringReplay=function(e,t,o,r){ol.render.canvas.Replay.call(this,e,t,o,r),this.bufferedMaxExtent_=null,this.state_={currentStrokeStyle:void 0,currentLineCap:void 0,currentLineDash:null,currentLineDashOffset:void 0,currentLineJoin:void 0,currentLineWidth:void 0,currentMiterLimit:void 0,lastStroke:0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}},ol.inherits(ol.render.canvas.LineStringReplay,ol.render.canvas.Replay),ol.render.canvas.LineStringReplay.prototype.drawFlatCoordinates_=function(e,t,o,r){var i=this.coordinates.length,n=this.appendFlatCoordinates(e,t,o,r,!1,!1),a=[ol.render.canvas.Instruction.MOVE_TO_LINE_TO,i,n];return this.instructions.push(a),this.hitDetectionInstructions.push(a),o},ol.render.canvas.LineStringReplay.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=ol.extent.clone(this.maxExtent),this.maxLineWidth>0)){var e=this.resolution*(this.maxLineWidth+1)/2;ol.extent.buffer(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},ol.render.canvas.LineStringReplay.prototype.setStrokeStyle_=function(){var e=this.state_,t=e.strokeStyle,o=e.lineCap,r=e.lineDash,i=e.lineDashOffset,n=e.lineJoin,a=e.lineWidth,l=e.miterLimit;e.currentStrokeStyle==t&&e.currentLineCap==o&&ol.array.equals(e.currentLineDash,r)&&e.currentLineDashOffset==i&&e.currentLineJoin==n&&e.currentLineWidth==a&&e.currentMiterLimit==l||(e.lastStroke!=this.coordinates.length&&(this.instructions.push([ol.render.canvas.Instruction.STROKE]),e.lastStroke=this.coordinates.length),this.instructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,t,a,o,n,l,r,i,!0,1],[ol.render.canvas.Instruction.BEGIN_PATH]),e.currentStrokeStyle=t,e.currentLineCap=o,e.currentLineDash=r,e.currentLineDashOffset=i,e.currentLineJoin=n,e.currentLineWidth=a,e.currentMiterLimit=l)},ol.render.canvas.LineStringReplay.prototype.drawLineString=function(e,t){var o=this.state_,r=o.strokeStyle,i=o.lineWidth;if(void 0!==r&&void 0!==i){this.setStrokeStyle_(),this.beginGeometry(e,t),this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset,!0,1],[ol.render.canvas.Instruction.BEGIN_PATH]);var n=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(n,0,n.length,a),this.hitDetectionInstructions.push([ol.render.canvas.Instruction.STROKE]),this.endGeometry(e,t)}},ol.render.canvas.LineStringReplay.prototype.drawMultiLineString=function(e,t){var o=this.state_,r=o.strokeStyle,i=o.lineWidth;if(void 0!==r&&void 0!==i){this.setStrokeStyle_(),this.beginGeometry(e,t),this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset,!0,1],[ol.render.canvas.Instruction.BEGIN_PATH]);var n,a,l=e.getEnds(),s=e.getFlatCoordinates(),p=e.getStride(),g=0;for(n=0,a=l.length;n<a;++n)g=this.drawFlatCoordinates_(s,g,l[n],p);this.hitDetectionInstructions.push([ol.render.canvas.Instruction.STROKE]),this.endGeometry(e,t)}},ol.render.canvas.LineStringReplay.prototype.finish=function(){var e=this.state_;e.lastStroke!=this.coordinates.length&&this.instructions.push([ol.render.canvas.Instruction.STROKE]),this.reverseHitDetectionInstructions(),this.state_=null},ol.render.canvas.LineStringReplay.prototype.setFillStrokeStyle=function(e,t){var o=t.getColor();this.state_.strokeStyle=ol.colorlike.asColorLike(o?o:ol.render.canvas.defaultStrokeStyle);var r=t.getLineCap();this.state_.lineCap=void 0!==r?r:ol.render.canvas.defaultLineCap;var i=t.getLineDash();this.state_.lineDash=i?i:ol.render.canvas.defaultLineDash;var n=t.getLineDashOffset();this.state_.lineDashOffset=n?n:ol.render.canvas.defaultLineDashOffset;var a=t.getLineJoin();this.state_.lineJoin=void 0!==a?a:ol.render.canvas.defaultLineJoin;var l=t.getWidth();this.state_.lineWidth=void 0!==l?l:ol.render.canvas.defaultLineWidth;var s=t.getMiterLimit();this.state_.miterLimit=void 0!==s?s:ol.render.canvas.defaultMiterLimit,this.state_.lineWidth>this.maxLineWidth&&(this.maxLineWidth=this.state_.lineWidth,this.bufferedMaxExtent_=null)},goog.provide("ol.render.canvas.PolygonReplay"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.color"),goog.require("ol.colorlike"),goog.require("ol.extent"),goog.require("ol.geom.flat.simplify"),goog.require("ol.render.canvas"),goog.require("ol.render.canvas.Instruction"),goog.require("ol.render.canvas.Replay"),ol.render.canvas.PolygonReplay=function(e,t,o,r){ol.render.canvas.Replay.call(this,e,t,o,r),this.bufferedMaxExtent_=null,this.state_={currentFillStyle:void 0,currentStrokeStyle:void 0,currentLineCap:void 0,currentLineDash:null,currentLineDashOffset:void 0,currentLineJoin:void 0,currentLineWidth:void 0,currentMiterLimit:void 0,fillStyle:void 0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}},ol.inherits(ol.render.canvas.PolygonReplay,ol.render.canvas.Replay),ol.render.canvas.PolygonReplay.prototype.drawFlatCoordinatess_=function(e,t,o,r){var i=this.state_,n=void 0!==i.fillStyle,a=void 0!=i.strokeStyle,l=o.length,s=[ol.render.canvas.Instruction.BEGIN_PATH];this.instructions.push(s),this.hitDetectionInstructions.push(s);for(var p=0;p<l;++p){var g=o[p],u=this.coordinates.length,c=this.appendFlatCoordinates(e,t,g,r,!0,!a),y=[ol.render.canvas.Instruction.MOVE_TO_LINE_TO,u,c];if(this.instructions.push(y),this.hitDetectionInstructions.push(y),a){var h=[ol.render.canvas.Instruction.CLOSE_PATH];this.instructions.push(h),this.hitDetectionInstructions.push(h)}t=g}var d=[ol.render.canvas.Instruction.FILL];if(this.hitDetectionInstructions.push(d),n&&this.instructions.push(d),a){var f=[ol.render.canvas.Instruction.STROKE];this.instructions.push(f),this.hitDetectionInstructions.push(f)}return t},ol.render.canvas.PolygonReplay.prototype.drawCircle=function(e,t){var o=this.state_,r=o.fillStyle,i=o.strokeStyle;if(void 0!==r||void 0!==i){this.setFillStrokeStyles_(e),this.beginGeometry(e,t),this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,ol.color.asString(ol.render.canvas.defaultFillStyle)]),void 0!==o.strokeStyle&&this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset,!0,1]);var n=e.getFlatCoordinates(),a=e.getStride(),l=this.coordinates.length;this.appendFlatCoordinates(n,0,n.length,a,!1,!1);var s=[ol.render.canvas.Instruction.BEGIN_PATH],p=[ol.render.canvas.Instruction.CIRCLE,l];this.instructions.push(s,p),this.hitDetectionInstructions.push(s,p);var g=[ol.render.canvas.Instruction.FILL];if(this.hitDetectionInstructions.push(g),void 0!==o.fillStyle&&this.instructions.push(g),void 0!==o.strokeStyle){var u=[ol.render.canvas.Instruction.STROKE];this.instructions.push(u),this.hitDetectionInstructions.push(u)}this.endGeometry(e,t)}},ol.render.canvas.PolygonReplay.prototype.drawPolygon=function(e,t){var o=this.state_;this.setFillStrokeStyles_(e),this.beginGeometry(e,t),this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,ol.color.asString(ol.render.canvas.defaultFillStyle)]),void 0!==o.strokeStyle&&this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset,!0,1]);var r=e.getEnds(),i=e.getOrientedFlatCoordinates(),n=e.getStride();this.drawFlatCoordinatess_(i,0,r,n),this.endGeometry(e,t)},ol.render.canvas.PolygonReplay.prototype.drawMultiPolygon=function(e,t){var o=this.state_,r=o.fillStyle,i=o.strokeStyle;if(void 0!==r||void 0!==i){this.setFillStrokeStyles_(e),this.beginGeometry(e,t),this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_FILL_STYLE,ol.color.asString(ol.render.canvas.defaultFillStyle)]),void 0!==o.strokeStyle&&this.hitDetectionInstructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset,!0,1]);var n,a,l=e.getEndss(),s=e.getOrientedFlatCoordinates(),p=e.getStride(),g=0;for(n=0,a=l.length;n<a;++n)g=this.drawFlatCoordinatess_(s,g,l[n],p);this.endGeometry(e,t)}},ol.render.canvas.PolygonReplay.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state_=null;var e=this.tolerance;if(0!==e){var t,o,r=this.coordinates;for(t=0,o=r.length;t<o;++t)r[t]=ol.geom.flat.simplify.snap(r[t],e)}},ol.render.canvas.PolygonReplay.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=ol.extent.clone(this.maxExtent),this.maxLineWidth>0)){var e=this.resolution*(this.maxLineWidth+1)/2;ol.extent.buffer(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},ol.render.canvas.PolygonReplay.prototype.setFillStrokeStyle=function(e,t){var o=this.state_;if(e){var r=e.getColor();o.fillStyle=ol.colorlike.asColorLike(r?r:ol.render.canvas.defaultFillStyle)}else o.fillStyle=void 0;if(t){var i=t.getColor();o.strokeStyle=ol.colorlike.asColorLike(i?i:ol.render.canvas.defaultStrokeStyle);var n=t.getLineCap();o.lineCap=void 0!==n?n:ol.render.canvas.defaultLineCap;var a=t.getLineDash();o.lineDash=a?a.slice():ol.render.canvas.defaultLineDash;var l=t.getLineDashOffset();o.lineDashOffset=l?l:ol.render.canvas.defaultLineDashOffset;var s=t.getLineJoin();o.lineJoin=void 0!==s?s:ol.render.canvas.defaultLineJoin;var p=t.getWidth();o.lineWidth=void 0!==p?p:ol.render.canvas.defaultLineWidth;var g=t.getMiterLimit();o.miterLimit=void 0!==g?g:ol.render.canvas.defaultMiterLimit,o.lineWidth>this.maxLineWidth&&(this.maxLineWidth=o.lineWidth,this.bufferedMaxExtent_=null)}else o.strokeStyle=void 0,o.lineCap=void 0,o.lineDash=null,o.lineDashOffset=void 0,o.lineJoin=void 0,o.lineWidth=void 0,o.miterLimit=void 0},ol.render.canvas.PolygonReplay.prototype.setFillStrokeStyles_=function(e){var t=this.state_,o=t.fillStyle,r=t.strokeStyle,i=t.lineCap,n=t.lineDash,a=t.lineDashOffset,l=t.lineJoin,s=t.lineWidth,p=t.miterLimit;if(void 0!==o&&("string"!=typeof o||t.currentFillStyle!=o)){var g=[ol.render.canvas.Instruction.SET_FILL_STYLE,o];if("string"!=typeof o){var u=e.getExtent();g.push([u[0],u[3]])}this.instructions.push(g),t.currentFillStyle=t.fillStyle}void 0!==r&&(t.currentStrokeStyle==r&&t.currentLineCap==i&&ol.array.equals(t.currentLineDash,n)&&t.currentLineDashOffset==a&&t.currentLineJoin==l&&t.currentLineWidth==s&&t.currentMiterLimit==p||(this.instructions.push([ol.render.canvas.Instruction.SET_STROKE_STYLE,r,s,i,l,p,n,a,!0,1]),t.currentStrokeStyle=r,t.currentLineCap=i,t.currentLineDash=n,t.currentLineDashOffset=a,t.currentLineJoin=l,t.currentLineWidth=s,t.currentMiterLimit=p))},goog.provide("ol.render.canvas.TextReplay"),goog.require("ol"),goog.require("ol.colorlike"),goog.require("ol.render.canvas"),goog.require("ol.render.canvas.Instruction"),goog.require("ol.render.canvas.Replay"),ol.render.canvas.TextReplay=function(e,t,o,r){ol.render.canvas.Replay.call(this,e,t,o,r),
this.replayFillState_=null,this.replayStrokeState_=null,this.replayTextState_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null},ol.inherits(ol.render.canvas.TextReplay,ol.render.canvas.Replay),ol.render.canvas.TextReplay.prototype.drawText=function(e,t,o,r,i,n){if(""!==this.text_&&this.textState_&&(this.textFillState_||this.textStrokeState_)){this.textFillState_&&this.setReplayFillState_(this.textFillState_),this.textStrokeState_&&this.setReplayStrokeState_(this.textStrokeState_),this.setReplayTextState_(this.textState_),this.beginGeometry(i,n);var a=this.coordinates.length,l=this.appendFlatCoordinates(e,t,o,r,!1,!1),s=!!this.textFillState_,p=!!this.textStrokeState_,g=[ol.render.canvas.Instruction.DRAW_TEXT,a,l,this.text_,this.textOffsetX_,this.textOffsetY_,this.textRotation_,this.textScale_,s,p,this.textRotateWithView_];this.instructions.push(g),this.hitDetectionInstructions.push(g),this.endGeometry(i,n)}},ol.render.canvas.TextReplay.prototype.setReplayFillState_=function(e){var t=this.replayFillState_;if(!t||t.fillStyle!=e.fillStyle){var o=[ol.render.canvas.Instruction.SET_FILL_STYLE,e.fillStyle];this.instructions.push(o),this.hitDetectionInstructions.push(o),t?t.fillStyle=e.fillStyle:this.replayFillState_={fillStyle:e.fillStyle}}},ol.render.canvas.TextReplay.prototype.setReplayStrokeState_=function(e){var t=this.replayStrokeState_;if(!t||t.lineCap!=e.lineCap||t.lineDash!=e.lineDash||t.lineDashOffset!=e.lineDashOffset||t.lineJoin!=e.lineJoin||t.lineWidth!=e.lineWidth||t.miterLimit!=e.miterLimit||t.strokeStyle!=e.strokeStyle){var o=[ol.render.canvas.Instruction.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset,!1,1];this.instructions.push(o),this.hitDetectionInstructions.push(o),t?(t.lineCap=e.lineCap,t.lineDash=e.lineDash,t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle):this.replayStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle}}},ol.render.canvas.TextReplay.prototype.setReplayTextState_=function(e){var t=this.replayTextState_;if(!t||t.font!=e.font||t.textAlign!=e.textAlign||t.textBaseline!=e.textBaseline){var o=[ol.render.canvas.Instruction.SET_TEXT_STYLE,e.font,e.textAlign,e.textBaseline];this.instructions.push(o),this.hitDetectionInstructions.push(o),t?(t.font=e.font,t.textAlign=e.textAlign,t.textBaseline=e.textBaseline):this.replayTextState_={font:e.font,textAlign:e.textAlign,textBaseline:e.textBaseline}}},ol.render.canvas.TextReplay.prototype.setTextStyle=function(e){if(e){var t=e.getFill();if(t){var o=t.getColor(),r=ol.colorlike.asColorLike(o?o:ol.render.canvas.defaultFillStyle);if(this.textFillState_){var i=this.textFillState_;i.fillStyle=r}else this.textFillState_={fillStyle:r}}else this.textFillState_=null;var n=e.getStroke();if(n){var a=n.getColor(),l=n.getLineCap(),s=n.getLineDash(),p=n.getLineDashOffset(),g=n.getLineJoin(),u=n.getWidth(),c=n.getMiterLimit(),y=void 0!==l?l:ol.render.canvas.defaultLineCap,h=s?s.slice():ol.render.canvas.defaultLineDash,d=void 0!==p?p:ol.render.canvas.defaultLineDashOffset,f=void 0!==g?g:ol.render.canvas.defaultLineJoin,m=void 0!==u?u:ol.render.canvas.defaultLineWidth,v=void 0!==c?c:ol.render.canvas.defaultMiterLimit,_=ol.colorlike.asColorLike(a?a:ol.render.canvas.defaultStrokeStyle);if(this.textStrokeState_){var S=this.textStrokeState_;S.lineCap=y,S.lineDash=h,S.lineDashOffset=d,S.lineJoin=f,S.lineWidth=m,S.miterLimit=v,S.strokeStyle=_}else this.textStrokeState_={lineCap:y,lineDash:h,lineDashOffset:d,lineJoin:f,lineWidth:m,miterLimit:v,strokeStyle:_}}else this.textStrokeState_=null;var x=e.getFont(),E=e.getOffsetX(),P=e.getOffsetY(),T=e.getRotateWithView(),R=e.getRotation(),L=e.getScale(),M=e.getText(),C=e.getTextAlign(),b=e.getTextBaseline(),I=void 0!==x?x:ol.render.canvas.defaultFont,A=void 0!==C?C:ol.render.canvas.defaultTextAlign,w=void 0!==b?b:ol.render.canvas.defaultTextBaseline;if(this.textState_){var O=this.textState_;O.font=I,O.textAlign=A,O.textBaseline=w}else this.textState_={font:I,textAlign:A,textBaseline:w};this.text_=void 0!==M?M:"",this.textOffsetX_=void 0!==E?E:0,this.textOffsetY_=void 0!==P?P:0,this.textRotateWithView_=void 0!==T&&T,this.textRotation_=void 0!==R?R:0,this.textScale_=void 0!==L?L:1}else this.text_=""},goog.provide("ol.render.canvas.ReplayGroup"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.dom"),goog.require("ol.extent"),goog.require("ol.geom.flat.transform"),goog.require("ol.obj"),goog.require("ol.render.ReplayGroup"),goog.require("ol.render.canvas.ImageReplay"),goog.require("ol.render.canvas.LineStringReplay"),goog.require("ol.render.canvas.PolygonReplay"),goog.require("ol.render.canvas.TextReplay"),goog.require("ol.render.replay"),goog.require("ol.transform"),ol.render.canvas.ReplayGroup=function(e,t,o,r,i){ol.render.ReplayGroup.call(this),this.tolerance_=e,this.maxExtent_=t,this.overlaps_=r,this.resolution_=o,this.renderBuffer_=i,this.replaysByZIndex_={},this.hitDetectionContext_=ol.dom.createCanvasContext2D(1,1),this.hitDetectionTransform_=ol.transform.create()},ol.inherits(ol.render.canvas.ReplayGroup,ol.render.ReplayGroup),ol.render.canvas.ReplayGroup.circleArrayCache_={0:[[!0]]};ol.render.canvas.ReplayGroup.fillCircleArrayRowToMiddle_=function(e,t,o){var r,i=Math.floor(e.length/2);if(t>=i)for(r=i;r<t;r++)e[r][o]=!0;else if(t<i)for(r=t+1;r<i;r++)e[r][o]=!0};ol.render.canvas.ReplayGroup.getCircleArray_=function(e){if(void 0!==ol.render.canvas.ReplayGroup.circleArrayCache_[e])return ol.render.canvas.ReplayGroup.circleArrayCache_[e];for(var t=2*e+1,o=new Array(t),r=0;r<t;r++)o[r]=new Array(t);for(var i=e,n=0,a=0;i>=n;)ol.render.canvas.ReplayGroup.fillCircleArrayRowToMiddle_(o,e+i,e+n),ol.render.canvas.ReplayGroup.fillCircleArrayRowToMiddle_(o,e+n,e+i),ol.render.canvas.ReplayGroup.fillCircleArrayRowToMiddle_(o,e-n,e+i),ol.render.canvas.ReplayGroup.fillCircleArrayRowToMiddle_(o,e-i,e+n),ol.render.canvas.ReplayGroup.fillCircleArrayRowToMiddle_(o,e-i,e-n),ol.render.canvas.ReplayGroup.fillCircleArrayRowToMiddle_(o,e-n,e-i),ol.render.canvas.ReplayGroup.fillCircleArrayRowToMiddle_(o,e+n,e-i),ol.render.canvas.ReplayGroup.fillCircleArrayRowToMiddle_(o,e+i,e-n),n++,a+=1+2*n,2*(a-i)+1>0&&(i-=1,a+=1-2*i);return ol.render.canvas.ReplayGroup.circleArrayCache_[e]=o,o},ol.render.canvas.ReplayGroup.prototype.finish=function(){var e;for(e in this.replaysByZIndex_){var t,o=this.replaysByZIndex_[e];for(t in o)o[t].finish()}},ol.render.canvas.ReplayGroup.prototype.forEachFeatureAtCoordinate=function(e,t,o,r,i,n){r=Math.round(r);var a=2*r+1,l=ol.transform.compose(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-o,-e[0],-e[1]),s=this.hitDetectionContext_;s.canvas.width!==a||s.canvas.height!==a?(s.canvas.width=a,s.canvas.height=a):s.clearRect(0,0,a,a);var p;void 0!==this.renderBuffer_&&(p=ol.extent.createEmpty(),ol.extent.extendCoordinate(p,e),ol.extent.buffer(p,t*(this.renderBuffer_+r),p));var g=ol.render.canvas.ReplayGroup.getCircleArray_(r);return this.replayHitDetection_(s,l,o,i,function(e){for(var t=s.getImageData(0,0,a,a).data,o=0;o<a;o++)for(var r=0;r<a;r++)if(g[o][r]&&t[4*(r*a+o)+3]>0){var i=n(e);return i?i:void s.clearRect(0,0,a,a)}},p)},ol.render.canvas.ReplayGroup.prototype.getClipCoords=function(e){var t=this.maxExtent_,o=t[0],r=t[1],i=t[2],n=t[3],a=[o,r,o,n,i,n,i,r];return ol.geom.flat.transform.transform2D(a,0,8,2,e,a),a},ol.render.canvas.ReplayGroup.prototype.getReplay=function(e,t){var o=void 0!==e?e.toString():"0",r=this.replaysByZIndex_[o];void 0===r&&(r={},this.replaysByZIndex_[o]=r);var i=r[t];if(void 0===i){var n=ol.render.canvas.ReplayGroup.BATCH_CONSTRUCTORS_[t];i=new n(this.tolerance_,this.maxExtent_,this.resolution_,this.overlaps_),r[t]=i}return i},ol.render.canvas.ReplayGroup.prototype.isEmpty=function(){return ol.obj.isEmpty(this.replaysByZIndex_)},ol.render.canvas.ReplayGroup.prototype.replay=function(e,t,o,r,i,n){var a=Object.keys(this.replaysByZIndex_).map(Number);a.sort(ol.array.numberSafeCompareFunction);var l=this.getClipCoords(o);e.save(),e.beginPath(),e.moveTo(l[0],l[1]),e.lineTo(l[2],l[3]),e.lineTo(l[4],l[5]),e.lineTo(l[6],l[7]),e.clip();var s,p,g,u,c,y,h=n?n:ol.render.replay.ORDER;for(s=0,p=a.length;s<p;++s)for(c=this.replaysByZIndex_[a[s].toString()],g=0,u=h.length;g<u;++g)y=c[h[g]],void 0!==y&&y.replay(e,t,o,r,i);e.restore()},ol.render.canvas.ReplayGroup.prototype.replayHitDetection_=function(e,t,o,r,i,n){var a=Object.keys(this.replaysByZIndex_).map(Number);a.sort(function(e,t){return t-e});var l,s,p,g,u,c;for(l=0,s=a.length;l<s;++l)for(g=this.replaysByZIndex_[a[l].toString()],p=ol.render.replay.ORDER.length-1;p>=0;--p)if(u=g[ol.render.replay.ORDER[p]],void 0!==u&&(c=u.replayHitDetection(e,t,o,r,i,n)))return c},ol.render.canvas.ReplayGroup.BATCH_CONSTRUCTORS_={Circle:ol.render.canvas.PolygonReplay,Image:ol.render.canvas.ImageReplay,LineString:ol.render.canvas.LineStringReplay,Polygon:ol.render.canvas.PolygonReplay,Text:ol.render.canvas.TextReplay},goog.provide("ol.renderer.Layer"),goog.require("ol"),goog.require("ol.ImageState"),goog.require("ol.Observable"),goog.require("ol.TileState"),goog.require("ol.asserts"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.functions"),goog.require("ol.source.State"),ol.renderer.Layer=function(e){ol.Observable.call(this),this.layer_=e},ol.inherits(ol.renderer.Layer,ol.Observable),ol.renderer.Layer.prototype.forEachFeatureAtCoordinate=ol.nullFunction,ol.renderer.Layer.prototype.hasFeatureAtCoordinate=ol.functions.FALSE,ol.renderer.Layer.prototype.createLoadedTileFinder=function(e,t,o){return function(r,i){function n(e){o[r]||(o[r]={}),o[r][e.tileCoord.toString()]=e}return e.forEachLoadedTile(t,r,i,n)}},ol.renderer.Layer.prototype.getLayer=function(){return this.layer_},ol.renderer.Layer.prototype.handleImageChange_=function(e){var t=e.target;t.getState()===ol.ImageState.LOADED&&this.renderIfReadyAndVisible()},ol.renderer.Layer.prototype.loadImage=function(e){var t=e.getState();return t!=ol.ImageState.LOADED&&t!=ol.ImageState.ERROR&&ol.events.listen(e,ol.events.EventType.CHANGE,this.handleImageChange_,this),t==ol.ImageState.IDLE&&(e.load(),t=e.getState()),t==ol.ImageState.LOADED},ol.renderer.Layer.prototype.renderIfReadyAndVisible=function(){var e=this.getLayer();e.getVisible()&&e.getSourceState()==ol.source.State.READY&&this.changed()},ol.renderer.Layer.prototype.scheduleExpireCache=function(e,t){if(t.canExpireCache()){var o=function(e,t,o){var r=ol.getUid(e).toString();e.expireCache(o.viewState.projection,o.usedTiles[r])}.bind(null,t);e.postRenderFunctions.push(o)}},ol.renderer.Layer.prototype.updateAttributions=function(e,t){if(t){var o,r,i;for(r=0,i=t.length;r<i;++r)o=t[r],e[ol.getUid(o).toString()]=o}},ol.renderer.Layer.prototype.updateLogos=function(e,t){var o=t.getLogo();void 0!==o&&("string"==typeof o?e.logos[o]="":o&&(ol.asserts.assert("string"==typeof o.href,44),ol.asserts.assert("string"==typeof o.src,45),e.logos[o.src]=o.href))},ol.renderer.Layer.prototype.updateUsedTiles=function(e,t,o,r){var i=ol.getUid(t).toString(),n=o.toString();i in e?n in e[i]?e[i][n].extend(r):e[i][n]=r:(e[i]={},e[i][n]=r)},ol.renderer.Layer.prototype.manageTilePyramid=function(e,t,o,r,i,n,a,l,s,p){var g=ol.getUid(t).toString();g in e.wantedTiles||(e.wantedTiles[g]={});var u,c,y,h,d,f,m=e.wantedTiles[g],v=e.tileQueue,_=o.getMinZoom();for(f=a;f>=_;--f)for(c=o.getTileRangeForExtentAndZ(n,f,c),y=o.getResolution(f),h=c.minX;h<=c.maxX;++h)for(d=c.minY;d<=c.maxY;++d)a-f<=l?(u=t.getTile(f,h,d,r,i),u.getState()==ol.TileState.IDLE&&(m[u.getKey()]=!0,v.isKeyQueued(u.getKey())||v.enqueue([u,g,o.getTileCoordCenter(u.tileCoord),y])),void 0!==s&&s.call(p,u)):t.useTile(f,h,d,i)},goog.provide("ol.renderer.canvas.Layer"),goog.require("ol"),goog.require("ol.extent"),goog.require("ol.functions"),goog.require("ol.render.Event"),goog.require("ol.render.EventType"),goog.require("ol.render.canvas"),goog.require("ol.render.canvas.Immediate"),goog.require("ol.renderer.Layer"),goog.require("ol.transform"),ol.renderer.canvas.Layer=function(e){ol.renderer.Layer.call(this,e),this.renderedResolution,this.transform_=ol.transform.create()},ol.inherits(ol.renderer.canvas.Layer,ol.renderer.Layer),ol.renderer.canvas.Layer.prototype.clip=function(e,t,o){var r=t.pixelRatio,i=t.size[0]*r,n=t.size[1]*r,a=t.viewState.rotation,l=ol.extent.getTopLeft(o),s=ol.extent.getTopRight(o),p=ol.extent.getBottomRight(o),g=ol.extent.getBottomLeft(o);ol.transform.apply(t.coordinateToPixelTransform,l),ol.transform.apply(t.coordinateToPixelTransform,s),ol.transform.apply(t.coordinateToPixelTransform,p),ol.transform.apply(t.coordinateToPixelTransform,g),e.save(),ol.render.canvas.rotateAtOffset(e,-a,i/2,n/2),e.beginPath(),e.moveTo(l[0]*r,l[1]*r),e.lineTo(s[0]*r,s[1]*r),e.lineTo(p[0]*r,p[1]*r),e.lineTo(g[0]*r,g[1]*r),e.clip(),ol.render.canvas.rotateAtOffset(e,a,i/2,n/2)},ol.renderer.canvas.Layer.prototype.dispatchComposeEvent_=function(e,t,o,r){var i=this.getLayer();if(i.hasListener(e)){var n=o.size[0]*o.pixelRatio,a=o.size[1]*o.pixelRatio,l=o.viewState.rotation;ol.render.canvas.rotateAtOffset(t,-l,n/2,a/2);var s=void 0!==r?r:this.getTransform(o,0),p=new ol.render.canvas.Immediate(t,o.pixelRatio,o.extent,s,o.viewState.rotation),g=new ol.render.Event(e,p,o,t,null);i.dispatchEvent(g),ol.render.canvas.rotateAtOffset(t,l,n/2,a/2)}},ol.renderer.canvas.Layer.prototype.forEachLayerAtCoordinate=function(e,t,o,r){var i=this.forEachFeatureAtCoordinate(e,t,0,ol.functions.TRUE,this);return i?o.call(r,this.getLayer(),null):void 0},ol.renderer.canvas.Layer.prototype.postCompose=function(e,t,o,r){this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,e,t,r)},ol.renderer.canvas.Layer.prototype.preCompose=function(e,t,o){this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,e,t,o)},ol.renderer.canvas.Layer.prototype.dispatchRenderEvent=function(e,t,o){this.dispatchComposeEvent_(ol.render.EventType.RENDER,e,t,o)},ol.renderer.canvas.Layer.prototype.getTransform=function(e,t){var o=e.viewState,r=e.pixelRatio,i=r*e.size[0]/2,n=r*e.size[1]/2,a=r/o.resolution,l=-a,s=-o.rotation,p=-o.center[0]+t,g=-o.center[1];return ol.transform.compose(this.transform_,i,n,a,l,s,p,g)},ol.renderer.canvas.Layer.prototype.composeFrame=function(e,t,o){},ol.renderer.canvas.Layer.prototype.prepareFrame=function(e,t){},goog.provide("ol.renderer.vector"),goog.require("ol"),goog.require("ol.ImageState"),goog.require("ol.render.ReplayType"),ol.renderer.vector.defaultOrder=function(e,t){return ol.getUid(e)-ol.getUid(t)},ol.renderer.vector.getSquaredTolerance=function(e,t){var o=ol.renderer.vector.getTolerance(e,t);return o*o},ol.renderer.vector.getTolerance=function(e,t){return ol.SIMPLIFY_TOLERANCE*e/t},ol.renderer.vector.renderCircleGeometry_=function(e,t,o,r){var i=o.getFill(),n=o.getStroke();if(i||n){var a=e.getReplay(o.getZIndex(),ol.render.ReplayType.CIRCLE);a.setFillStrokeStyle(i,n),a.drawCircle(t,r)}var l=o.getText();if(l){var s=e.getReplay(o.getZIndex(),ol.render.ReplayType.TEXT);s.setTextStyle(l),s.drawText(t.getCenter(),0,2,2,t,r)}},ol.renderer.vector.renderFeature=function(e,t,o,r,i,n){var a,l,s=!1;return a=o.getImage(),a&&(l=a.getImageState(),l==ol.ImageState.LOADED||l==ol.ImageState.ERROR?a.unlistenImageChange(i,n):(l==ol.ImageState.IDLE&&a.load(),l=a.getImageState(),a.listenImageChange(i,n),s=!0)),ol.renderer.vector.renderFeature_(e,t,o,r),s},ol.renderer.vector.renderFeature_=function(e,t,o,r){var i=o.getGeometryFunction()(t);if(i){var n=i.getSimplifiedGeometry(r),a=ol.renderer.vector.GEOMETRY_RENDERERS_[n.getType()];a(e,n,o,t)}},ol.renderer.vector.renderGeometryCollectionGeometry_=function(e,t,o,r){var i,n,a=t.getGeometriesArray();for(i=0,n=a.length;i<n;++i){var l=ol.renderer.vector.GEOMETRY_RENDERERS_[a[i].getType()];l(e,a[i],o,r)}},ol.renderer.vector.renderLineStringGeometry_=function(e,t,o,r){var i=o.getStroke();if(i){var n=e.getReplay(o.getZIndex(),ol.render.ReplayType.LINE_STRING);n.setFillStrokeStyle(null,i),n.drawLineString(t,r)}var a=o.getText();if(a){var l=e.getReplay(o.getZIndex(),ol.render.ReplayType.TEXT);l.setTextStyle(a),l.drawText(t.getFlatMidpoint(),0,2,2,t,r)}},ol.renderer.vector.renderMultiLineStringGeometry_=function(e,t,o,r){var i=o.getStroke();if(i){var n=e.getReplay(o.getZIndex(),ol.render.ReplayType.LINE_STRING);n.setFillStrokeStyle(null,i),n.drawMultiLineString(t,r)}var a=o.getText();if(a){var l=e.getReplay(o.getZIndex(),ol.render.ReplayType.TEXT);l.setTextStyle(a);var s=t.getFlatMidpoints();l.drawText(s,0,s.length,2,t,r)}},ol.renderer.vector.renderMultiPolygonGeometry_=function(e,t,o,r){var i=o.getFill(),n=o.getStroke();if(n||i){var a=e.getReplay(o.getZIndex(),ol.render.ReplayType.POLYGON);a.setFillStrokeStyle(i,n),a.drawMultiPolygon(t,r)}var l=o.getText();if(l){var s=e.getReplay(o.getZIndex(),ol.render.ReplayType.TEXT);s.setTextStyle(l);var p=t.getFlatInteriorPoints();s.drawText(p,0,p.length,2,t,r)}},ol.renderer.vector.renderPointGeometry_=function(e,t,o,r){var i=o.getImage();if(i){if(i.getImageState()!=ol.ImageState.LOADED)return;var n=e.getReplay(o.getZIndex(),ol.render.ReplayType.IMAGE);n.setImageStyle(i),n.drawPoint(t,r)}var a=o.getText();if(a){var l=e.getReplay(o.getZIndex(),ol.render.ReplayType.TEXT);l.setTextStyle(a),l.drawText(t.getFlatCoordinates(),0,2,2,t,r)}},ol.renderer.vector.renderMultiPointGeometry_=function(e,t,o,r){var i=o.getImage();if(i){if(i.getImageState()!=ol.ImageState.LOADED)return;var n=e.getReplay(o.getZIndex(),ol.render.ReplayType.IMAGE);n.setImageStyle(i),n.drawMultiPoint(t,r)}var a=o.getText();if(a){var l=e.getReplay(o.getZIndex(),ol.render.ReplayType.TEXT);l.setTextStyle(a);var s=t.getFlatCoordinates();l.drawText(s,0,s.length,t.getStride(),t,r)}},ol.renderer.vector.renderPolygonGeometry_=function(e,t,o,r){var i=o.getFill(),n=o.getStroke();if(i||n){var a=e.getReplay(o.getZIndex(),ol.render.ReplayType.POLYGON);a.setFillStrokeStyle(i,n),a.drawPolygon(t,r)}var l=o.getText();if(l){var s=e.getReplay(o.getZIndex(),ol.render.ReplayType.TEXT);s.setTextStyle(l),s.drawText(t.getFlatInteriorPoint(),0,2,2,t,r)}},ol.renderer.vector.GEOMETRY_RENDERERS_={Point:ol.renderer.vector.renderPointGeometry_,LineString:ol.renderer.vector.renderLineStringGeometry_,Polygon:ol.renderer.vector.renderPolygonGeometry_,MultiPoint:ol.renderer.vector.renderMultiPointGeometry_,MultiLineString:ol.renderer.vector.renderMultiLineStringGeometry_,MultiPolygon:ol.renderer.vector.renderMultiPolygonGeometry_,GeometryCollection:ol.renderer.vector.renderGeometryCollectionGeometry_,Circle:ol.renderer.vector.renderCircleGeometry_},goog.provide("ol.renderer.canvas.VectorLayer"),goog.require("ol"),goog.require("ol.ViewHint"),goog.require("ol.dom"),goog.require("ol.extent"),goog.require("ol.render.EventType"),goog.require("ol.render.canvas"),goog.require("ol.render.canvas.ReplayGroup"),goog.require("ol.renderer.canvas.Layer"),goog.require("ol.renderer.vector"),ol.renderer.canvas.VectorLayer=function(e){ol.renderer.canvas.Layer.call(this,e),this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=ol.extent.createEmpty(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.context_=ol.dom.createCanvasContext2D()},ol.inherits(ol.renderer.canvas.VectorLayer,ol.renderer.canvas.Layer),ol.renderer.canvas.VectorLayer.prototype.composeFrame=function(e,t,o){var r=e.extent,i=e.pixelRatio,n=t.managed?e.skippedFeatureUids:{},a=e.viewState,l=a.projection,s=a.rotation,p=l.getExtent(),g=this.getLayer().getSource(),u=this.getTransform(e,0);this.preCompose(o,e,u);var c=t.extent,y=void 0!==c;y&&this.clip(o,e,c);var h=this.replayGroup_;if(h&&!h.isEmpty()){var d,f=this.getLayer(),m=0,v=0;if(f.hasListener(ol.render.EventType.RENDER)){var _=o.canvas.width,S=o.canvas.height;if(s){var x=Math.round(Math.sqrt(_*_+S*S));m=(x-_)/2,v=(x-S)/2,_=S=x}this.context_.canvas.width=_,this.context_.canvas.height=S,d=this.context_}else d=o;var E=d.globalAlpha;d.globalAlpha=t.opacity,d!=o&&d.translate(m,v);var P=e.size[0]*i,T=e.size[1]*i;if(ol.render.canvas.rotateAtOffset(d,-s,P/2,T/2),h.replay(d,i,u,s,n),g.getWrapX()&&l.canWrapX()&&!ol.extent.containsExtent(p,r)){for(var R,L=r[0],M=ol.extent.getWidth(p),C=0;L<p[0];)--C,R=M*C,u=this.getTransform(e,R),h.replay(d,i,u,s,n),L+=M;for(C=0,L=r[2];L>p[2];)++C,R=M*C,u=this.getTransform(e,R),h.replay(d,i,u,s,n),L-=M;u=this.getTransform(e,0)}ol.render.canvas.rotateAtOffset(d,s,P/2,T/2),d!=o&&(this.dispatchRenderEvent(d,e,u),o.drawImage(d.canvas,-m,-v),d.translate(-m,-v)),d.globalAlpha=E}y&&o.restore(),this.postCompose(o,e,t,u)},ol.renderer.canvas.VectorLayer.prototype.forEachFeatureAtCoordinate=function(e,t,o,r,i){if(this.replayGroup_){var n=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),s={};return this.replayGroup_.forEachFeatureAtCoordinate(e,n,a,o,{},function(e){var t=ol.getUid(e).toString();if(!(t in s))return s[t]=!0,r.call(i,e,l)})}},ol.renderer.canvas.VectorLayer.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},ol.renderer.canvas.VectorLayer.prototype.prepareFrame=function(e,t){var o=this.getLayer(),r=o.getSource();this.updateAttributions(e.attributions,r.getAttributions()),this.updateLogos(e,r);var i=e.viewHints[ol.ViewHint.ANIMATING],n=e.viewHints[ol.ViewHint.INTERACTING],a=o.getUpdateWhileAnimating(),l=o.getUpdateWhileInteracting();if(!this.dirty_&&!a&&i||!l&&n)return!0;var s=e.extent,p=e.viewState,g=p.projection,u=p.resolution,c=e.pixelRatio,y=o.getRevision(),h=o.getRenderBuffer(),d=o.getRenderOrder();void 0===d&&(d=ol.renderer.vector.defaultOrder);var f=ol.extent.buffer(s,h*u),m=p.projection.getExtent();if(r.getWrapX()&&p.projection.canWrapX()&&!ol.extent.containsExtent(m,e.extent)){var v=ol.extent.getWidth(m),_=Math.max(ol.extent.getWidth(f)/2,v);f[0]=m[0]-_,f[2]=m[2]+_}if(!this.dirty_&&this.renderedResolution_==u&&this.renderedRevision_==y&&this.renderedRenderOrder_==d&&ol.extent.containsExtent(this.renderedExtent_,f))return!0;this.replayGroup_=null,this.dirty_=!1;var S=new ol.render.canvas.ReplayGroup(ol.renderer.vector.getTolerance(u,c),f,u,r.getOverlaps(),o.getRenderBuffer());r.loadFeatures(f,u,g);var x=function(e){var t,r=e.getStyleFunction();if(r?t=r.call(e,u):(r=o.getStyleFunction(),r&&(t=r(e,u))),t){var i=this.renderFeature(e,u,c,t,S);this.dirty_=this.dirty_||i}};if(d){var E=[];r.forEachFeatureInExtent(f,function(e){E.push(e)},this),E.sort(d),E.forEach(x,this)}else r.forEachFeatureInExtent(f,x,this);return S.finish(),this.renderedResolution_=u,this.renderedRevision_=y,this.renderedRenderOrder_=d,this.renderedExtent_=f,this.replayGroup_=S,!0},ol.renderer.canvas.VectorLayer.prototype.renderFeature=function(e,t,o,r,i){if(!r)return!1;var n=!1;if(Array.isArray(r))for(var a=0,l=r.length;a<l;++a)n=ol.renderer.vector.renderFeature(i,e,r[a],ol.renderer.vector.getSquaredTolerance(t,o),this.handleStyleImageChange_,this)||n;else n=ol.renderer.vector.renderFeature(i,e,r,ol.renderer.vector.getSquaredTolerance(t,o),this.handleStyleImageChange_,this)||n;return n},goog.provide("ol.renderer.webgl.defaultmapshader"),goog.require("ol"),goog.require("ol.webgl.Fragment"),goog.require("ol.webgl.Vertex"),ol.ENABLE_WEBGL&&(ol.renderer.webgl.defaultmapshader.Fragment=function(){ol.webgl.Fragment.call(this,ol.renderer.webgl.defaultmapshader.Fragment.SOURCE)},ol.inherits(ol.renderer.webgl.defaultmapshader.Fragment,ol.webgl.Fragment),ol.renderer.webgl.defaultmapshader.Fragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n",ol.renderer.webgl.defaultmapshader.Fragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}",ol.renderer.webgl.defaultmapshader.Fragment.SOURCE=ol.DEBUG_WEBGL?ol.renderer.webgl.defaultmapshader.Fragment.DEBUG_SOURCE:ol.renderer.webgl.defaultmapshader.Fragment.OPTIMIZED_SOURCE,ol.renderer.webgl.defaultmapshader.fragment=new ol.renderer.webgl.defaultmapshader.Fragment,ol.renderer.webgl.defaultmapshader.Vertex=function(){ol.webgl.Vertex.call(this,ol.renderer.webgl.defaultmapshader.Vertex.SOURCE)},ol.inherits(ol.renderer.webgl.defaultmapshader.Vertex,ol.webgl.Vertex),ol.renderer.webgl.defaultmapshader.Vertex.DEBUG_SOURCE="varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n",ol.renderer.webgl.defaultmapshader.Vertex.OPTIMIZED_SOURCE="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}",ol.renderer.webgl.defaultmapshader.Vertex.SOURCE=ol.DEBUG_WEBGL?ol.renderer.webgl.defaultmapshader.Vertex.DEBUG_SOURCE:ol.renderer.webgl.defaultmapshader.Vertex.OPTIMIZED_SOURCE,ol.renderer.webgl.defaultmapshader.vertex=new ol.renderer.webgl.defaultmapshader.Vertex,ol.renderer.webgl.defaultmapshader.Locations=function(e,t){this.u_opacity=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_opacity":"f"),this.u_projectionMatrix=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_projectionMatrix":"e"),this.u_texCoordMatrix=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_texCoordMatrix":"d"),this.u_texture=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_texture":"g"),this.a_position=e.getAttribLocation(t,ol.DEBUG_WEBGL?"a_position":"b"),this.a_texCoord=e.getAttribLocation(t,ol.DEBUG_WEBGL?"a_texCoord":"c")}),goog.provide("ol.renderer.webgl.Layer"),goog.require("ol"),goog.require("ol.render.Event"),goog.require("ol.render.EventType"),goog.require("ol.render.webgl.Immediate"),goog.require("ol.renderer.Layer"),goog.require("ol.renderer.webgl.defaultmapshader"),goog.require("ol.transform"),goog.require("ol.vec.Mat4"),goog.require("ol.webgl"),goog.require("ol.webgl.Buffer"),goog.require("ol.webgl.Context"),ol.ENABLE_WEBGL&&(ol.renderer.webgl.Layer=function(e,t){ol.renderer.Layer.call(this,t),this.mapRenderer=e,this.arrayBuffer_=new ol.webgl.Buffer([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0,this.texCoordMatrix=ol.transform.create(),this.projectionMatrix=ol.transform.create(),this.tmpMat4_=ol.vec.Mat4.create(),this.defaultLocations_=null},ol.inherits(ol.renderer.webgl.Layer,ol.renderer.Layer),ol.renderer.webgl.Layer.prototype.bindFramebuffer=function(e,t){var o=this.mapRenderer.getGL();if(void 0===this.framebufferDimension||this.framebufferDimension!=t){var r=function(e,t,o){e.isContextLost()||(e.deleteFramebuffer(t),e.deleteTexture(o))}.bind(null,o,this.framebuffer,this.texture);e.postRenderFunctions.push(r);var i=ol.webgl.Context.createEmptyTexture(o,t,t),n=o.createFramebuffer();o.bindFramebuffer(ol.webgl.FRAMEBUFFER,n),o.framebufferTexture2D(ol.webgl.FRAMEBUFFER,ol.webgl.COLOR_ATTACHMENT0,ol.webgl.TEXTURE_2D,i,0),this.texture=i,this.framebuffer=n,this.framebufferDimension=t}else o.bindFramebuffer(ol.webgl.FRAMEBUFFER,this.framebuffer)},ol.renderer.webgl.Layer.prototype.composeFrame=function(e,t,o){this.dispatchComposeEvent_(ol.render.EventType.PRECOMPOSE,o,e),o.bindBuffer(ol.webgl.ARRAY_BUFFER,this.arrayBuffer_);var r,i=o.getGL(),n=ol.renderer.webgl.defaultmapshader.fragment,a=ol.renderer.webgl.defaultmapshader.vertex,l=o.getProgram(n,a);this.defaultLocations_?r=this.defaultLocations_:(r=new ol.renderer.webgl.defaultmapshader.Locations(i,l),this.defaultLocations_=r),o.useProgram(l)&&(i.enableVertexAttribArray(r.a_position),i.vertexAttribPointer(r.a_position,2,ol.webgl.FLOAT,!1,16,0),i.enableVertexAttribArray(r.a_texCoord),i.vertexAttribPointer(r.a_texCoord,2,ol.webgl.FLOAT,!1,16,8),i.uniform1i(r.u_texture,0)),i.uniformMatrix4fv(r.u_texCoordMatrix,!1,ol.vec.Mat4.fromTransform(this.tmpMat4_,this.getTexCoordMatrix())),i.uniformMatrix4fv(r.u_projectionMatrix,!1,ol.vec.Mat4.fromTransform(this.tmpMat4_,this.getProjectionMatrix())),i.uniform1f(r.u_opacity,t.opacity),i.bindTexture(ol.webgl.TEXTURE_2D,this.getTexture()),i.drawArrays(ol.webgl.TRIANGLE_STRIP,0,4),this.dispatchComposeEvent_(ol.render.EventType.POSTCOMPOSE,o,e)},ol.renderer.webgl.Layer.prototype.dispatchComposeEvent_=function(e,t,o){var r=this.getLayer();if(r.hasListener(e)){var i=o.viewState,n=i.resolution,a=o.pixelRatio,l=o.extent,s=i.center,p=i.rotation,g=o.size,u=new ol.render.webgl.Immediate(t,s,n,p,g,l,a),c=new ol.render.Event(e,u,o,null,t);r.dispatchEvent(c)}},ol.renderer.webgl.Layer.prototype.getTexCoordMatrix=function(){return this.texCoordMatrix},ol.renderer.webgl.Layer.prototype.getTexture=function(){return this.texture},ol.renderer.webgl.Layer.prototype.getProjectionMatrix=function(){return this.projectionMatrix},ol.renderer.webgl.Layer.prototype.handleWebGLContextLost=function(){this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0},ol.renderer.webgl.Layer.prototype.prepareFrame=function(e,t,o){},ol.renderer.webgl.Layer.prototype.forEachLayerAtPixel=function(e,t,o,r){}),goog.provide("ol.renderer.webgl.VectorLayer"),goog.require("ol"),goog.require("ol.ViewHint"),goog.require("ol.extent"),goog.require("ol.render.webgl.ReplayGroup"),goog.require("ol.renderer.vector"),goog.require("ol.renderer.webgl.Layer"),goog.require("ol.transform"),ol.ENABLE_WEBGL&&(ol.renderer.webgl.VectorLayer=function(e,t){ol.renderer.webgl.Layer.call(this,e,t),this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=ol.extent.createEmpty(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.layerState_=null},ol.inherits(ol.renderer.webgl.VectorLayer,ol.renderer.webgl.Layer),ol.renderer.webgl.VectorLayer.prototype.composeFrame=function(e,t,o){this.layerState_=t;var r=e.viewState,i=this.replayGroup_,n=e.size,a=e.pixelRatio,l=this.mapRenderer.getGL();i&&!i.isEmpty()&&(l.enable(l.SCISSOR_TEST),l.scissor(0,0,n[0]*a,n[1]*a),i.replay(o,r.center,r.resolution,r.rotation,n,a,t.opacity,t.managed?e.skippedFeatureUids:{}),l.disable(l.SCISSOR_TEST))},ol.renderer.webgl.VectorLayer.prototype.disposeInternal=function(){var e=this.replayGroup_;if(e){var t=this.mapRenderer.getContext();e.getDeleteResourcesFunction(t)(),this.replayGroup_=null}ol.renderer.webgl.Layer.prototype.disposeInternal.call(this)},ol.renderer.webgl.VectorLayer.prototype.forEachFeatureAtCoordinate=function(e,t,o,r,i){if(this.replayGroup_&&this.layerState_){var n=this.mapRenderer.getContext(),a=t.viewState,l=this.getLayer(),s=this.layerState_,p={};return this.replayGroup_.forEachFeatureAtCoordinate(e,n,a.center,a.resolution,a.rotation,t.size,t.pixelRatio,s.opacity,{},function(e){var t=ol.getUid(e).toString();if(!(t in p))return p[t]=!0,r.call(i,e,l)})}},ol.renderer.webgl.VectorLayer.prototype.hasFeatureAtCoordinate=function(e,t){if(this.replayGroup_&&this.layerState_){var o=this.mapRenderer.getContext(),r=t.viewState,i=this.layerState_;return this.replayGroup_.hasFeatureAtCoordinate(e,o,r.center,r.resolution,r.rotation,t.size,t.pixelRatio,i.opacity,t.skippedFeatureUids)}return!1},ol.renderer.webgl.VectorLayer.prototype.forEachLayerAtPixel=function(e,t,o,r){var i=ol.transform.apply(t.pixelToCoordinateTransform,e.slice()),n=this.hasFeatureAtCoordinate(i,t);return n?o.call(r,this.getLayer(),null):void 0},ol.renderer.webgl.VectorLayer.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},ol.renderer.webgl.VectorLayer.prototype.prepareFrame=function(e,t,o){var r=this.getLayer(),i=r.getSource();this.updateAttributions(e.attributions,i.getAttributions()),this.updateLogos(e,i);var n=e.viewHints[ol.ViewHint.ANIMATING],a=e.viewHints[ol.ViewHint.INTERACTING],l=r.getUpdateWhileAnimating(),s=r.getUpdateWhileInteracting();
if(!this.dirty_&&!l&&n||!s&&a)return!0;var p=e.extent,g=e.viewState,u=g.projection,c=g.resolution,y=e.pixelRatio,h=r.getRevision(),d=r.getRenderBuffer(),f=r.getRenderOrder();void 0===f&&(f=ol.renderer.vector.defaultOrder);var m=ol.extent.buffer(p,d*c);if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==h&&this.renderedRenderOrder_==f&&ol.extent.containsExtent(this.renderedExtent_,m))return!0;this.replayGroup_&&e.postRenderFunctions.push(this.replayGroup_.getDeleteResourcesFunction(o)),this.dirty_=!1;var v=new ol.render.webgl.ReplayGroup(ol.renderer.vector.getTolerance(c,y),m,r.getRenderBuffer());i.loadFeatures(m,c,u);var _=function(e){var t,o=e.getStyleFunction();if(o?t=o.call(e,c):(o=r.getStyleFunction(),o&&(t=o(e,c))),t){var i=this.renderFeature(e,c,y,t,v);this.dirty_=this.dirty_||i}};if(f){var S=[];i.forEachFeatureInExtent(m,function(e){S.push(e)},this),S.sort(f),S.forEach(_,this)}else i.forEachFeatureInExtent(m,_,this);return v.finish(o),this.renderedResolution_=c,this.renderedRevision_=h,this.renderedRenderOrder_=f,this.renderedExtent_=m,this.replayGroup_=v,!0},ol.renderer.webgl.VectorLayer.prototype.renderFeature=function(e,t,o,r,i){if(!r)return!1;var n=!1;if(Array.isArray(r))for(var a=r.length-1,l=0;a>=l;--a)n=ol.renderer.vector.renderFeature(i,e,r[a],ol.renderer.vector.getSquaredTolerance(t,o),this.handleStyleImageChange_,this)||n;else n=ol.renderer.vector.renderFeature(i,e,r,ol.renderer.vector.getSquaredTolerance(t,o),this.handleStyleImageChange_,this)||n;return n}),goog.provide("ol.layer.Vector"),goog.require("ol"),goog.require("ol.layer.Layer"),goog.require("ol.obj"),goog.require("ol.renderer.Type"),goog.require("ol.renderer.canvas.VectorLayer"),goog.require("ol.renderer.webgl.VectorLayer"),goog.require("ol.style.Style"),ol.layer.Vector=function(e){var t=e?e:{},o=ol.obj.assign({},t);delete o.style,delete o.renderBuffer,delete o.updateWhileAnimating,delete o.updateWhileInteracting,ol.layer.Layer.call(this,o),this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting},ol.inherits(ol.layer.Vector,ol.layer.Layer),ol.layer.Vector.prototype.createRenderer=function(e){var t=null,o=e.getType();return ol.ENABLE_CANVAS&&o===ol.renderer.Type.CANVAS?t=new ol.renderer.canvas.VectorLayer(this):ol.ENABLE_WEBGL&&o===ol.renderer.Type.WEBGL&&(t=new ol.renderer.webgl.VectorLayer(e,this)),t},ol.layer.Vector.prototype.getRenderBuffer=function(){return this.renderBuffer_},ol.layer.Vector.prototype.getRenderOrder=function(){return this.get(ol.layer.Vector.Property_.RENDER_ORDER)},ol.layer.Vector.prototype.getSource,ol.layer.Vector.prototype.getStyle=function(){return this.style_},ol.layer.Vector.prototype.getStyleFunction=function(){return this.styleFunction_},ol.layer.Vector.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},ol.layer.Vector.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},ol.layer.Vector.prototype.setRenderOrder=function(e){this.set(ol.layer.Vector.Property_.RENDER_ORDER,e)},ol.layer.Vector.prototype.setStyle=function(e){this.style_=void 0!==e?e:ol.style.Style.defaultFunction,this.styleFunction_=null===e?void 0:ol.style.Style.createFunction(this.style_),this.changed()},ol.layer.Vector.Property_={RENDER_ORDER:"renderOrder"},goog.provide("ol.loadingstrategy"),ol.loadingstrategy.all=function(e,t){return[[-(1/0),-(1/0),1/0,1/0]]},ol.loadingstrategy.bbox=function(e,t){return[e]},ol.loadingstrategy.tile=function(e){return function(t,o){var r=e.getZForResolution(o),i=e.getTileRangeForExtentAndZ(t,r),n=[],a=[r,0,0];for(a[1]=i.minX;a[1]<=i.maxX;++a[1])for(a[2]=i.minY;a[2]<=i.maxY;++a[2])n.push(e.getTileCoordExtent(a));return n}},goog.provide("ol.source.Source"),goog.require("ol"),goog.require("ol.Attribution"),goog.require("ol.Object"),goog.require("ol.proj"),goog.require("ol.source.State"),ol.source.Source=function(e){ol.Object.call(this),this.projection_=ol.proj.get(e.projection),this.attributions_=ol.source.Source.toAttributionsArray_(e.attributions),this.logo_=e.logo,this.state_=void 0!==e.state?e.state:ol.source.State.READY,this.wrapX_=void 0!==e.wrapX&&e.wrapX},ol.inherits(ol.source.Source,ol.Object),ol.source.Source.toAttributionsArray_=function(e){if("string"==typeof e)return[new ol.Attribution({html:e})];if(e instanceof ol.Attribution)return[e];if(Array.isArray(e)){for(var t=e.length,o=new Array(t),r=0;r<t;r++){var i=e[r];"string"==typeof i?o[r]=new ol.Attribution({html:i}):o[r]=i}return o}return null},ol.source.Source.prototype.forEachFeatureAtCoordinate=ol.nullFunction,ol.source.Source.prototype.getAttributions=function(){return this.attributions_},ol.source.Source.prototype.getLogo=function(){return this.logo_},ol.source.Source.prototype.getProjection=function(){return this.projection_},ol.source.Source.prototype.getResolutions=function(){},ol.source.Source.prototype.getState=function(){return this.state_},ol.source.Source.prototype.getWrapX=function(){return this.wrapX_},ol.source.Source.prototype.refresh=function(){this.changed()},ol.source.Source.prototype.setAttributions=function(e){this.attributions_=ol.source.Source.toAttributionsArray_(e),this.changed()},ol.source.Source.prototype.setLogo=function(e){this.logo_=e},ol.source.Source.prototype.setState=function(e){this.state_=e,this.changed()},goog.provide("ol.source.VectorEventType"),ol.source.VectorEventType={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"},goog.provide("ol.source.Vector"),goog.require("ol"),goog.require("ol.Collection"),goog.require("ol.CollectionEventType"),goog.require("ol.ObjectEventType"),goog.require("ol.array"),goog.require("ol.asserts"),goog.require("ol.events"),goog.require("ol.events.Event"),goog.require("ol.events.EventType"),goog.require("ol.extent"),goog.require("ol.featureloader"),goog.require("ol.functions"),goog.require("ol.loadingstrategy"),goog.require("ol.obj"),goog.require("ol.source.Source"),goog.require("ol.source.State"),goog.require("ol.source.VectorEventType"),goog.require("ol.structs.RBush"),ol.source.Vector=function(e){var t=e||{};ol.source.Source.call(this,{attributions:t.attributions,logo:t.logo,projection:void 0,state:ol.source.State.READY,wrapX:void 0===t.wrapX||t.wrapX}),this.loader_=ol.nullFunction,this.format_=t.format,this.overlaps_=void 0==t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&(ol.asserts.assert(this.format_,7),this.loader_=ol.featureloader.xhr(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:ol.loadingstrategy.all;var o=void 0===t.useSpatialIndex||t.useSpatialIndex;this.featuresRtree_=o?new ol.structs.RBush:null,this.loadedExtentsRtree_=new ol.structs.RBush,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;var r,i;t.features instanceof ol.Collection?(r=t.features,i=r.getArray()):Array.isArray(t.features)&&(i=t.features),o||void 0!==r||(r=new ol.Collection(i)),void 0!==i&&this.addFeaturesInternal(i),void 0!==r&&this.bindFeaturesCollection_(r)},ol.inherits(ol.source.Vector,ol.source.Source),ol.source.Vector.prototype.addFeature=function(e){this.addFeatureInternal(e),this.changed()},ol.source.Vector.prototype.addFeatureInternal=function(e){var t=ol.getUid(e).toString();if(this.addToIndex_(t,e)){this.setupChangeEvents_(t,e);var o=e.getGeometry();if(o){var r=o.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new ol.source.Vector.Event(ol.source.VectorEventType.ADDFEATURE,e))}},ol.source.Vector.prototype.setupChangeEvents_=function(e,t){this.featureChangeKeys_[e]=[ol.events.listen(t,ol.events.EventType.CHANGE,this.handleFeatureChange_,this),ol.events.listen(t,ol.ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_,this)]},ol.source.Vector.prototype.addToIndex_=function(e,t){var o=!0,r=t.getId();return void 0!==r?r.toString()in this.idIndex_?o=!1:this.idIndex_[r.toString()]=t:(ol.asserts.assert(!(e in this.undefIdIndex_),30),this.undefIdIndex_[e]=t),o},ol.source.Vector.prototype.addFeatures=function(e){this.addFeaturesInternal(e),this.changed()},ol.source.Vector.prototype.addFeaturesInternal=function(e){var t,o,r,i,n=[],a=[],l=[];for(o=0,r=e.length;o<r;o++)i=e[o],t=ol.getUid(i).toString(),this.addToIndex_(t,i)&&a.push(i);for(o=0,r=a.length;o<r;o++){i=a[o],t=ol.getUid(i).toString(),this.setupChangeEvents_(t,i);var s=i.getGeometry();if(s){var p=s.getExtent();n.push(p),l.push(i)}else this.nullGeometryFeatures_[t]=i}for(this.featuresRtree_&&this.featuresRtree_.load(n,l),o=0,r=a.length;o<r;o++)this.dispatchEvent(new ol.source.Vector.Event(ol.source.VectorEventType.ADDFEATURE,a[o]))},ol.source.Vector.prototype.bindFeaturesCollection_=function(e){var t=!1;ol.events.listen(this,ol.source.VectorEventType.ADDFEATURE,function(o){t||(t=!0,e.push(o.feature),t=!1)}),ol.events.listen(this,ol.source.VectorEventType.REMOVEFEATURE,function(o){t||(t=!0,e.remove(o.feature),t=!1)}),ol.events.listen(e,ol.CollectionEventType.ADD,function(e){t||(t=!0,this.addFeature(e.element),t=!1)},this),ol.events.listen(e,ol.CollectionEventType.REMOVE,function(e){t||(t=!0,this.removeFeature(e.element),t=!1)},this),this.featuresCollection_=e},ol.source.Vector.prototype.clear=function(e){if(e){for(var t in this.featureChangeKeys_){var o=this.featureChangeKeys_[t];o.forEach(ol.events.unlistenByKey)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(this.removeFeatureInternal,this);for(var r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var i=new ol.source.Vector.Event(ol.source.VectorEventType.CLEAR);this.dispatchEvent(i),this.changed()},ol.source.Vector.prototype.forEachFeature=function(e,t){return this.featuresRtree_?this.featuresRtree_.forEach(e,t):this.featuresCollection_?this.featuresCollection_.forEach(e,t):void 0},ol.source.Vector.prototype.forEachFeatureAtCoordinateDirect=function(e,t,o){var r=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(r,function(r){var i=r.getGeometry();return i.intersectsCoordinate(e)?t.call(o,r):void 0})},ol.source.Vector.prototype.forEachFeatureInExtent=function(e,t,o){return this.featuresRtree_?this.featuresRtree_.forEachInExtent(e,t,o):this.featuresCollection_?this.featuresCollection_.forEach(t,o):void 0},ol.source.Vector.prototype.forEachFeatureIntersectingExtent=function(e,t,o){return this.forEachFeatureInExtent(e,function(r){var i=r.getGeometry();if(i.intersectsExtent(e)){var n=t.call(o,r);if(n)return n}})},ol.source.Vector.prototype.getFeaturesCollection=function(){return this.featuresCollection_},ol.source.Vector.prototype.getFeatures=function(){var e;return this.featuresCollection_?e=this.featuresCollection_.getArray():this.featuresRtree_&&(e=this.featuresRtree_.getAll(),ol.obj.isEmpty(this.nullGeometryFeatures_)||ol.array.extend(e,ol.obj.getValues(this.nullGeometryFeatures_))),e},ol.source.Vector.prototype.getFeaturesAtCoordinate=function(e){var t=[];return this.forEachFeatureAtCoordinateDirect(e,function(e){t.push(e)}),t},ol.source.Vector.prototype.getFeaturesInExtent=function(e){return this.featuresRtree_.getInExtent(e)};ol.source.Vector.prototype.getClosestFeatureToCoordinate=function(e,t){var o=e[0],r=e[1],i=null,n=[NaN,NaN],a=1/0,l=[-(1/0),-(1/0),1/0,1/0],s=t?t:ol.functions.TRUE;return this.featuresRtree_.forEachInExtent(l,function(e){if(s(e)){var t=e.getGeometry(),p=a;if(a=t.closestPointXY(o,r,n,a),a<p){i=e;var g=Math.sqrt(a);l[0]=o-g,l[1]=r-g,l[2]=o+g,l[3]=r+g}}}),i};ol.source.Vector.prototype.getExtent=function(e){return this.featuresRtree_.getExtent(e)},ol.source.Vector.prototype.getFeatureById=function(e){var t=this.idIndex_[e.toString()];return void 0!==t?t:null},ol.source.Vector.prototype.getFormat=function(){return this.format_},ol.source.Vector.prototype.getOverlaps=function(){return this.overlaps_},ol.source.Vector.prototype.getResolutions=function(){},ol.source.Vector.prototype.getUrl=function(){return this.url_},ol.source.Vector.prototype.handleFeatureChange_=function(e){var t=e.target,o=ol.getUid(t).toString(),r=t.getGeometry();if(r){var i=r.getExtent();o in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[o],this.featuresRtree_&&this.featuresRtree_.insert(i,t)):this.featuresRtree_&&this.featuresRtree_.update(i,t)}else o in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[o]=t);var n=t.getId();if(void 0!==n){var a=n.toString();o in this.undefIdIndex_?(delete this.undefIdIndex_[o],this.idIndex_[a]=t):this.idIndex_[a]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[a]=t)}else o in this.undefIdIndex_||(this.removeFromIdIndex_(t),this.undefIdIndex_[o]=t);this.changed(),this.dispatchEvent(new ol.source.Vector.Event(ol.source.VectorEventType.CHANGEFEATURE,t))},ol.source.Vector.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&ol.obj.isEmpty(this.nullGeometryFeatures_)},ol.source.Vector.prototype.loadFeatures=function(e,t,o){var r,i,n=this.loadedExtentsRtree_,a=this.strategy_(e,t);for(r=0,i=a.length;r<i;++r){var l=a[r],s=n.forEachInExtent(l,function(e){return ol.extent.containsExtent(e.extent,l)});s||(this.loader_.call(this,l,t,o),n.insert(l,{extent:l.slice()}))}},ol.source.Vector.prototype.removeFeature=function(e){var t=ol.getUid(e).toString();t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e),this.changed()},ol.source.Vector.prototype.removeFeatureInternal=function(e){var t=ol.getUid(e).toString();this.featureChangeKeys_[t].forEach(ol.events.unlistenByKey),delete this.featureChangeKeys_[t];var o=e.getId();void 0!==o?delete this.idIndex_[o.toString()]:delete this.undefIdIndex_[t],this.dispatchEvent(new ol.source.Vector.Event(ol.source.VectorEventType.REMOVEFEATURE,e))},ol.source.Vector.prototype.removeFromIdIndex_=function(e){var t=!1;for(var o in this.idIndex_)if(this.idIndex_[o]===e){delete this.idIndex_[o],t=!0;break}return t},ol.source.Vector.Event=function(e,t){ol.events.Event.call(this,e),this.feature=t},ol.inherits(ol.source.Vector.Event,ol.events.Event),goog.provide("ol.interaction.Draw"),goog.require("ol"),goog.require("ol.Feature"),goog.require("ol.MapBrowserEventType"),goog.require("ol.Object"),goog.require("ol.coordinate"),goog.require("ol.events"),goog.require("ol.events.Event"),goog.require("ol.events.condition"),goog.require("ol.extent"),goog.require("ol.functions"),goog.require("ol.geom.Circle"),goog.require("ol.geom.GeometryType"),goog.require("ol.geom.LineString"),goog.require("ol.geom.MultiLineString"),goog.require("ol.geom.MultiPoint"),goog.require("ol.geom.MultiPolygon"),goog.require("ol.geom.Point"),goog.require("ol.geom.Polygon"),goog.require("ol.interaction.DrawEventType"),goog.require("ol.interaction.Pointer"),goog.require("ol.interaction.Property"),goog.require("ol.layer.Vector"),goog.require("ol.source.Vector"),goog.require("ol.style.Style"),ol.interaction.Draw=function(e){ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.Draw.handleDownEvent_,handleEvent:ol.interaction.Draw.handleEvent,handleUpEvent:ol.interaction.Draw.handleUpEvent_}),this.shouldHandle_=!1,this.downPx_=null,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=ol.interaction.Draw.getMode_(this.type_),this.minPoints_=e.minPoints?e.minPoints:this.mode_===ol.interaction.Draw.Mode_.POLYGON?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:ol.functions.TRUE;var t=e.geometryFunction;if(!t)if(this.type_===ol.geom.GeometryType.CIRCLE)t=function(e,t){var o=t?t:new ol.geom.Circle([NaN,NaN]),r=ol.coordinate.squaredDistance(e[0],e[1]);return o.setCenterAndRadius(e[0],Math.sqrt(r)),o};else{var o,r=this.mode_;r===ol.interaction.Draw.Mode_.POINT?o=ol.geom.Point:r===ol.interaction.Draw.Mode_.LINE_STRING?o=ol.geom.LineString:r===ol.interaction.Draw.Mode_.POLYGON&&(o=ol.geom.Polygon),t=function(e,t){var i=t;return i?r===ol.interaction.Draw.Mode_.POLYGON?i.setCoordinates([e[0].concat([e[0][0]])]):i.setCoordinates(e):i=new o(e),i}}this.geometryFunction_=t,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:ol.interaction.Draw.getDefaultStyleFunction()}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:ol.events.condition.noModifierKeys,this.freehandCondition_,e.freehand?this.freehandCondition_=ol.events.condition.always:this.freehandCondition_=e.freehandCondition?e.freehandCondition:ol.events.condition.shiftKeyOnly,ol.events.listen(this,ol.Object.getChangeEventType(ol.interaction.Property.ACTIVE),this.updateState_,this)},ol.inherits(ol.interaction.Draw,ol.interaction.Pointer),ol.interaction.Draw.getDefaultStyleFunction=function(){var e=ol.style.Style.createDefaultEditing();return function(t,o){return e[t.getGeometry().getType()]}},ol.interaction.Draw.prototype.setMap=function(e){ol.interaction.Pointer.prototype.setMap.call(this,e),this.updateState_()},ol.interaction.Draw.handleEvent=function(e){this.freehand_=this.mode_!==ol.interaction.Draw.Mode_.POINT&&this.freehandCondition_(e);var t=!this.freehand_;return this.freehand_&&e.type===ol.MapBrowserEventType.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e),t=!1):e.type===ol.MapBrowserEventType.POINTERMOVE?t=this.handlePointerMove_(e):e.type===ol.MapBrowserEventType.DBLCLICK&&(t=!1),ol.interaction.Pointer.handleEvent.call(this,e)&&t},ol.interaction.Draw.handleDownEvent_=function(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e),!0):!!this.condition_(e)&&(this.downPx_=e.pixel,!0)},ol.interaction.Draw.handleUpEvent_=function(e){var t=!0;this.handlePointerMove_(e);var o=this.mode_===ol.interaction.Draw.Mode_.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||o?this.finishDrawing():this.atFinish_(e)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e):(this.startDrawing_(e),this.mode_===ol.interaction.Draw.Mode_.POINT&&this.finishDrawing()),t=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),t},ol.interaction.Draw.prototype.handlePointerMove_=function(e){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var t=this.downPx_,o=e.pixel,r=t[0]-o[0],i=t[1]-o[1],n=r*r+i*i;this.shouldHandle_=this.freehand_?n>this.squaredClickTolerance_:n<=this.squaredClickTolerance_}return this.finishCoordinate_?this.modifyDrawing_(e):this.createOrUpdateSketchPoint_(e),!0},ol.interaction.Draw.prototype.atFinish_=function(e){var t=!1;if(this.sketchFeature_){var o=!1,r=[this.finishCoordinate_];if(this.mode_===ol.interaction.Draw.Mode_.LINE_STRING?o=this.sketchCoords_.length>this.minPoints_:this.mode_===ol.interaction.Draw.Mode_.POLYGON&&(o=this.sketchCoords_[0].length>this.minPoints_,r=[this.sketchCoords_[0][0],this.sketchCoords_[0][this.sketchCoords_[0].length-2]]),o)for(var i=e.map,n=0,a=r.length;n<a;n++){var l=r[n],s=i.getPixelFromCoordinate(l),p=e.pixel,g=p[0]-s[0],u=p[1]-s[1],c=this.freehand_?1:this.snapTolerance_;if(t=Math.sqrt(g*g+u*u)<=c){this.finishCoordinate_=l;break}}}return t},ol.interaction.Draw.prototype.createOrUpdateSketchPoint_=function(e){var t=e.coordinate.slice();if(this.sketchPoint_){var o=this.sketchPoint_.getGeometry();o.setCoordinates(t)}else this.sketchPoint_=new ol.Feature(new ol.geom.Point(t)),this.updateSketchFeatures_()},ol.interaction.Draw.prototype.startDrawing_=function(e){var t=e.coordinate;this.finishCoordinate_=t,this.mode_===ol.interaction.Draw.Mode_.POINT?this.sketchCoords_=t.slice():this.mode_===ol.interaction.Draw.Mode_.POLYGON?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):(this.sketchCoords_=[t.slice(),t.slice()],this.mode_===ol.interaction.Draw.Mode_.CIRCLE&&(this.sketchLineCoords_=this.sketchCoords_)),this.sketchLineCoords_&&(this.sketchLine_=new ol.Feature(new ol.geom.LineString(this.sketchLineCoords_)));var o=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new ol.Feature,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(o),this.updateSketchFeatures_(),this.dispatchEvent(new ol.interaction.Draw.Event(ol.interaction.DrawEventType.DRAWSTART,this.sketchFeature_))},ol.interaction.Draw.prototype.modifyDrawing_=function(e){var t,o,r=e.coordinate,i=this.sketchFeature_.getGeometry();if(this.mode_===ol.interaction.Draw.Mode_.POINT?o=this.sketchCoords_:this.mode_===ol.interaction.Draw.Mode_.POLYGON?(t=this.sketchCoords_[0],o=t[t.length-1],this.atFinish_(e)&&(r=this.finishCoordinate_.slice())):(t=this.sketchCoords_,o=t[t.length-1]),o[0]=r[0],o[1]=r[1],this.geometryFunction_(this.sketchCoords_,i),this.sketchPoint_){var n=this.sketchPoint_.getGeometry();n.setCoordinates(r)}var a;if(i instanceof ol.geom.Polygon&&this.mode_!==ol.interaction.Draw.Mode_.POLYGON){this.sketchLine_||(this.sketchLine_=new ol.Feature(new ol.geom.LineString(null)));var l=i.getLinearRing(0);a=this.sketchLine_.getGeometry(),a.setFlatCoordinates(l.getLayout(),l.getFlatCoordinates())}else this.sketchLineCoords_&&(a=this.sketchLine_.getGeometry(),a.setCoordinates(this.sketchLineCoords_));this.updateSketchFeatures_()},ol.interaction.Draw.prototype.addToDrawing_=function(e){var t,o,r=e.coordinate,i=this.sketchFeature_.getGeometry();this.mode_===ol.interaction.Draw.Mode_.LINE_STRING?(this.finishCoordinate_=r.slice(),o=this.sketchCoords_,o.length>=this.maxPoints_&&(this.freehand_?o.pop():t=!0),o.push(r.slice()),this.geometryFunction_(o,i)):this.mode_===ol.interaction.Draw.Mode_.POLYGON&&(o=this.sketchCoords_[0],o.length>=this.maxPoints_&&(this.freehand_?o.pop():t=!0),o.push(r.slice()),t&&(this.finishCoordinate_=o[0]),this.geometryFunction_(this.sketchCoords_,i)),this.updateSketchFeatures_(),t&&this.finishDrawing()},ol.interaction.Draw.prototype.removeLastPoint=function(){if(this.sketchFeature_){var e,t,o=this.sketchFeature_.getGeometry();this.mode_===ol.interaction.Draw.Mode_.LINE_STRING?(e=this.sketchCoords_,e.splice(-2,1),this.geometryFunction_(e,o),e.length>=2&&(this.finishCoordinate_=e[e.length-2].slice())):this.mode_===ol.interaction.Draw.Mode_.POLYGON&&(e=this.sketchCoords_[0],e.splice(-2,1),t=this.sketchLine_.getGeometry(),t.setCoordinates(e),this.geometryFunction_(this.sketchCoords_,o)),0===e.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},ol.interaction.Draw.prototype.finishDrawing=function(){var e=this.abortDrawing_(),t=this.sketchCoords_,o=e.getGeometry();this.mode_===ol.interaction.Draw.Mode_.LINE_STRING?(t.pop(),this.geometryFunction_(t,o)):this.mode_===ol.interaction.Draw.Mode_.POLYGON&&(t[0].pop(),this.geometryFunction_(t,o),t=o.getCoordinates()),this.type_===ol.geom.GeometryType.MULTI_POINT?e.setGeometry(new ol.geom.MultiPoint([t])):this.type_===ol.geom.GeometryType.MULTI_LINE_STRING?e.setGeometry(new ol.geom.MultiLineString([t])):this.type_===ol.geom.GeometryType.MULTI_POLYGON&&e.setGeometry(new ol.geom.MultiPolygon([t])),this.dispatchEvent(new ol.interaction.Draw.Event(ol.interaction.DrawEventType.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)},ol.interaction.Draw.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var e=this.sketchFeature_;return e&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),e},ol.interaction.Draw.prototype.extend=function(e){var t=e.getGeometry(),o=t;this.sketchFeature_=e,this.sketchCoords_=o.getCoordinates();var r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new ol.interaction.Draw.Event(ol.interaction.DrawEventType.DRAWSTART,this.sketchFeature_))},ol.interaction.Draw.prototype.shouldStopEvent=ol.functions.FALSE,ol.interaction.Draw.prototype.updateSketchFeatures_=function(){var e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);var t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)},ol.interaction.Draw.prototype.updateState_=function(){var e=this.getMap(),t=this.getActive();e&&t||this.abortDrawing_(),this.overlay_.setMap(t?e:null)},ol.interaction.Draw.createRegularPolygon=function(e,t){return function(o,r){var i=o[0],n=o[1],a=Math.sqrt(ol.coordinate.squaredDistance(i,n)),l=r?r:ol.geom.Polygon.fromCircle(new ol.geom.Circle(i),e),s=t?t:Math.atan((n[1]-i[1])/(n[0]-i[0]));return ol.geom.Polygon.makeRegular(l,i,a,s),l}},ol.interaction.Draw.createBox=function(){return function(e,t){var o=ol.extent.boundingExtent(e),r=t||new ol.geom.Polygon(null);return r.setCoordinates([[ol.extent.getBottomLeft(o),ol.extent.getBottomRight(o),ol.extent.getTopRight(o),ol.extent.getTopLeft(o),ol.extent.getBottomLeft(o)]]),r}},ol.interaction.Draw.getMode_=function(e){var t;return e===ol.geom.GeometryType.POINT||e===ol.geom.GeometryType.MULTI_POINT?t=ol.interaction.Draw.Mode_.POINT:e===ol.geom.GeometryType.LINE_STRING||e===ol.geom.GeometryType.MULTI_LINE_STRING?t=ol.interaction.Draw.Mode_.LINE_STRING:e===ol.geom.GeometryType.POLYGON||e===ol.geom.GeometryType.MULTI_POLYGON?t=ol.interaction.Draw.Mode_.POLYGON:e===ol.geom.GeometryType.CIRCLE&&(t=ol.interaction.Draw.Mode_.CIRCLE),t},ol.interaction.Draw.Mode_={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},ol.interaction.Draw.Event=function(e,t){ol.events.Event.call(this,e),this.feature=t},ol.inherits(ol.interaction.Draw.Event,ol.events.Event),goog.provide("ol.interaction.Extent"),goog.require("ol"),goog.require("ol.Feature"),goog.require("ol.MapBrowserEventType"),goog.require("ol.MapBrowserPointerEvent"),goog.require("ol.coordinate"),goog.require("ol.events.Event"),goog.require("ol.extent"),goog.require("ol.geom.GeometryType"),goog.require("ol.geom.Point"),goog.require("ol.geom.Polygon"),goog.require("ol.interaction.Pointer"),goog.require("ol.layer.Vector"),goog.require("ol.source.Vector"),goog.require("ol.style.Style"),ol.interaction.Extent=function(e){this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,e||(e={}),e.extent&&this.setExtent(e.extent),ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.Extent.handleDownEvent_,handleDragEvent:ol.interaction.Extent.handleDragEvent_,handleEvent:ol.interaction.Extent.handleEvent_,handleUpEvent:ol.interaction.Extent.handleUpEvent_}),this.extentOverlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:ol.interaction.Extent.getDefaultExtentStyleFunction_(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:ol.interaction.Extent.getDefaultPointerStyleFunction_(),updateWhileAnimating:!0,updateWhileInteracting:!0})},ol.inherits(ol.interaction.Extent,ol.interaction.Pointer),ol.interaction.Extent.handleEvent_=function(e){return!(e instanceof ol.MapBrowserPointerEvent)||(e.type!=ol.MapBrowserEventType.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),ol.interaction.Pointer.handleEvent.call(this,e),!1)},ol.interaction.Extent.handleDownEvent_=function(e){var t=e.pixel,o=e.map,r=this.getExtent(),i=this.snapToVertex_(t,o),n=function(e){var t=null,o=null;return e[0]==r[0]?t=r[2]:e[0]==r[2]&&(t=r[0]),e[1]==r[1]?o=r[3]:e[1]==r[3]&&(o=r[1]),null!==t&&null!==o?[t,o]:null};if(i&&r){var a=i[0]==r[0]||i[0]==r[2]?i[0]:null,l=i[1]==r[1]||i[1]==r[3]?i[1]:null;null!==a&&null!==l?this.pointerHandler_=ol.interaction.Extent.getPointHandler_(n(i)):null!==a?this.pointerHandler_=ol.interaction.Extent.getEdgeHandler_(n([a,r[1]]),n([a,r[3]])):null!==l&&(this.pointerHandler_=ol.interaction.Extent.getEdgeHandler_(n([r[0],l]),n([r[2],l])))}else i=o.getCoordinateFromPixel(t),this.setExtent([i[0],i[1],i[0],i[1]]),this.pointerHandler_=ol.interaction.Extent.getPointHandler_(i);return!0},ol.interaction.Extent.handleDragEvent_=function(e){if(this.pointerHandler_){var t=e.coordinate;this.setExtent(this.pointerHandler_(t)),this.createOrUpdatePointerFeature_(t)}return!0},ol.interaction.Extent.handleUpEvent_=function(e){this.pointerHandler_=null;var t=this.getExtent();return t&&0!==ol.extent.getArea(t)||this.setExtent(null),!1},ol.interaction.Extent.getDefaultExtentStyleFunction_=function(){var e=ol.style.Style.createDefaultEditing();return function(t,o){return e[ol.geom.GeometryType.POLYGON]}},ol.interaction.Extent.getDefaultPointerStyleFunction_=function(){var e=ol.style.Style.createDefaultEditing();return function(t,o){return e[ol.geom.GeometryType.POINT]}},ol.interaction.Extent.getPointHandler_=function(e){return function(t){return ol.extent.boundingExtent([e,t])}},ol.interaction.Extent.getEdgeHandler_=function(e,t){return e[0]==t[0]?function(o){return ol.extent.boundingExtent([e,[o[0],t[1]]])}:e[1]==t[1]?function(o){return ol.extent.boundingExtent([e,[t[0],o[1]]])}:null},ol.interaction.Extent.getSegments_=function(e){return[[[e[0],e[1]],[e[0],e[3]]],[[e[0],e[3]],[e[2],e[3]]],[[e[2],e[3]],[e[2],e[1]]],[[e[2],e[1]],[e[0],e[1]]]]},ol.interaction.Extent.prototype.snapToVertex_=function(e,t){var o=t.getCoordinateFromPixel(e),r=function(e,t){return ol.coordinate.squaredDistanceToSegment(o,e)-ol.coordinate.squaredDistanceToSegment(o,t)},i=this.getExtent();if(i){var n=ol.interaction.Extent.getSegments_(i);n.sort(r);var a=n[0],l=ol.coordinate.closestOnSegment(o,a),s=t.getPixelFromCoordinate(l);if(ol.coordinate.distance(e,s)<=this.pixelTolerance_){var p=t.getPixelFromCoordinate(a[0]),g=t.getPixelFromCoordinate(a[1]),u=ol.coordinate.squaredDistance(s,p),c=ol.coordinate.squaredDistance(s,g),y=Math.sqrt(Math.min(u,c));return this.snappedToVertex_=y<=this.pixelTolerance_,this.snappedToVertex_&&(l=u>c?a[1]:a[0]),l}}return null},ol.interaction.Extent.prototype.handlePointerMove_=function(e){var t=e.pixel,o=e.map,r=this.snapToVertex_(t,o);r||(r=o.getCoordinateFromPixel(t)),this.createOrUpdatePointerFeature_(r)},ol.interaction.Extent.prototype.createOrUpdateExtentFeature_=function(e){var t=this.extentFeature_;return t?e?t.setGeometry(ol.geom.Polygon.fromExtent(e)):t.setGeometry(void 0):(t=e?new ol.Feature(ol.geom.Polygon.fromExtent(e)):new ol.Feature({}),this.extentFeature_=t,this.extentOverlay_.getSource().addFeature(t)),t},ol.interaction.Extent.prototype.createOrUpdatePointerFeature_=function(e){var t=this.vertexFeature_;if(t){var o=t.getGeometry();o.setCoordinates(e)}else t=new ol.Feature(new ol.geom.Point(e)),this.vertexFeature_=t,this.vertexOverlay_.getSource().addFeature(t);return t},ol.interaction.Extent.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),ol.interaction.Pointer.prototype.setMap.call(this,e)},ol.interaction.Extent.prototype.getExtent=function(){return this.extent_},ol.interaction.Extent.prototype.setExtent=function(e){this.extent_=e?e:null,
this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new ol.interaction.Extent.Event(this.extent_))},ol.interaction.Extent.Event=function(e){ol.events.Event.call(this,ol.interaction.Extent.EventType_.EXTENTCHANGED),this.extent_=e},ol.inherits(ol.interaction.Extent.Event,ol.events.Event),ol.interaction.Extent.EventType_={EXTENTCHANGED:"extentchanged"},goog.provide("ol.interaction.ModifyEventType"),ol.interaction.ModifyEventType={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},goog.provide("ol.interaction.Modify"),goog.require("ol"),goog.require("ol.CollectionEventType"),goog.require("ol.Feature"),goog.require("ol.MapBrowserEventType"),goog.require("ol.MapBrowserPointerEvent"),goog.require("ol.ViewHint"),goog.require("ol.array"),goog.require("ol.coordinate"),goog.require("ol.events"),goog.require("ol.events.Event"),goog.require("ol.events.EventType"),goog.require("ol.events.condition"),goog.require("ol.extent"),goog.require("ol.geom.GeometryType"),goog.require("ol.geom.Point"),goog.require("ol.interaction.ModifyEventType"),goog.require("ol.interaction.Pointer"),goog.require("ol.layer.Vector"),goog.require("ol.source.Vector"),goog.require("ol.structs.RBush"),goog.require("ol.style.Style"),ol.interaction.Modify=function(e){ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.Modify.handleDownEvent_,handleDragEvent:ol.interaction.Modify.handleDragEvent_,handleEvent:ol.interaction.Modify.handleEvent,handleUpEvent:ol.interaction.Modify.handleUpEvent_}),this.condition_=e.condition?e.condition:ol.events.condition.primaryAction,this.defaultDeleteCondition_=function(e){return ol.events.condition.noModifierKeys(e)&&ol.events.condition.singleClick(e)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:ol.events.condition.always,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new ol.structs.RBush,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:ol.interaction.Modify.getDefaultStyleFunction(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.features_=e.features,this.features_.forEach(this.addFeature_,this),ol.events.listen(this.features_,ol.CollectionEventType.ADD,this.handleFeatureAdd_,this),ol.events.listen(this.features_,ol.CollectionEventType.REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null},ol.inherits(ol.interaction.Modify,ol.interaction.Pointer),ol.interaction.Modify.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX=0,ol.interaction.Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX=1,ol.interaction.Modify.prototype.addFeature_=function(e){var t=e.getGeometry();t&&t.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[t.getType()].call(this,e,t);var o=this.getMap();o&&o.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,o),ol.events.listen(e,ol.events.EventType.CHANGE,this.handleFeatureChange_,this)},ol.interaction.Modify.prototype.willModifyFeatures_=function(e){this.modified_||(this.modified_=!0,this.dispatchEvent(new ol.interaction.Modify.Event(ol.interaction.ModifyEventType.MODIFYSTART,this.features_,e)))},ol.interaction.Modify.prototype.removeFeature_=function(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),ol.events.unlisten(e,ol.events.EventType.CHANGE,this.handleFeatureChange_,this)},ol.interaction.Modify.prototype.removeFeatureSegmentData_=function(e){var t=this.rBush_,o=[];t.forEach(function(t){e===t.feature&&o.push(t)});for(var r=o.length-1;r>=0;--r)t.remove(o[r])},ol.interaction.Modify.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),ol.interaction.Pointer.prototype.setActive.call(this,e)},ol.interaction.Modify.prototype.setMap=function(e){this.overlay_.setMap(e),ol.interaction.Pointer.prototype.setMap.call(this,e)},ol.interaction.Modify.prototype.handleFeatureAdd_=function(e){this.addFeature_(e.element)},ol.interaction.Modify.prototype.handleFeatureChange_=function(e){if(!this.changingFeature_){var t=e.target;this.removeFeature_(t),this.addFeature_(t)}},ol.interaction.Modify.prototype.handleFeatureRemove_=function(e){var t=e.element;this.removeFeature_(t)},ol.interaction.Modify.prototype.writePointGeometry_=function(e,t){var o=t.getCoordinates(),r={feature:e,geometry:t,segment:[o,o]};this.rBush_.insert(t.getExtent(),r)},ol.interaction.Modify.prototype.writeMultiPointGeometry_=function(e,t){var o,r,i,n,a=t.getCoordinates();for(r=0,i=a.length;r<i;++r)o=a[r],n={feature:e,geometry:t,depth:[r],index:r,segment:[o,o]},this.rBush_.insert(t.getExtent(),n)},ol.interaction.Modify.prototype.writeLineStringGeometry_=function(e,t){var o,r,i,n,a=t.getCoordinates();for(o=0,r=a.length-1;o<r;++o)i=a.slice(o,o+2),n={feature:e,geometry:t,index:o,segment:i},this.rBush_.insert(ol.extent.boundingExtent(i),n)},ol.interaction.Modify.prototype.writeMultiLineStringGeometry_=function(e,t){var o,r,i,n,a,l,s,p=t.getCoordinates();for(n=0,a=p.length;n<a;++n)for(o=p[n],r=0,i=o.length-1;r<i;++r)l=o.slice(r,r+2),s={feature:e,geometry:t,depth:[n],index:r,segment:l},this.rBush_.insert(ol.extent.boundingExtent(l),s)},ol.interaction.Modify.prototype.writePolygonGeometry_=function(e,t){var o,r,i,n,a,l,s,p=t.getCoordinates();for(n=0,a=p.length;n<a;++n)for(o=p[n],r=0,i=o.length-1;r<i;++r)l=o.slice(r,r+2),s={feature:e,geometry:t,depth:[n],index:r,segment:l},this.rBush_.insert(ol.extent.boundingExtent(l),s)},ol.interaction.Modify.prototype.writeMultiPolygonGeometry_=function(e,t){var o,r,i,n,a,l,s,p,g,u,c=t.getCoordinates();for(l=0,s=c.length;l<s;++l)for(p=c[l],n=0,a=p.length;n<a;++n)for(o=p[n],r=0,i=o.length-1;r<i;++r)g=o.slice(r,r+2),u={feature:e,geometry:t,depth:[n,l],index:r,segment:g},this.rBush_.insert(ol.extent.boundingExtent(g),u)},ol.interaction.Modify.prototype.writeCircleGeometry_=function(e,t){var o=t.getCenter(),r={feature:e,geometry:t,index:ol.interaction.Modify.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX,segment:[o,o]},i={feature:e,geometry:t,index:ol.interaction.Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX,segment:[o,o]},n=[r,i];r.featureSegments=i.featureSegments=n,this.rBush_.insert(ol.extent.createOrUpdateFromCoordinate(o),r),this.rBush_.insert(t.getExtent(),i)},ol.interaction.Modify.prototype.writeGeometryCollectionGeometry_=function(e,t){var o,r=t.getGeometriesArray();for(o=0;o<r.length;++o)this.SEGMENT_WRITERS_[r[o].getType()].call(this,e,r[o])},ol.interaction.Modify.prototype.createOrUpdateVertexFeature_=function(e){var t=this.vertexFeature_;if(t){var o=t.getGeometry();o.setCoordinates(e)}else t=new ol.Feature(new ol.geom.Point(e)),this.vertexFeature_=t,this.overlay_.getSource().addFeature(t);return t},ol.interaction.Modify.compareIndexes_=function(e,t){return e.index-t.index},ol.interaction.Modify.handleDownEvent_=function(e){if(!this.condition_(e))return!1;this.handlePointerAtPixel_(e.pixel,e.map);var t=e.map.getCoordinateFromPixel(e.pixel);this.dragSegments_.length=0,this.modified_=!1;var o=this.vertexFeature_;if(o){var r=[],i=o.getGeometry(),n=i.getCoordinates(),a=ol.extent.boundingExtent([n]),l=this.rBush_.getInExtent(a),s={};l.sort(ol.interaction.Modify.compareIndexes_);for(var p=0,g=l.length;p<g;++p){var u=l[p],c=u.segment,y=ol.getUid(u.feature),h=u.depth;if(h&&(y+="-"+h.join("-")),s[y]||(s[y]=new Array(2)),u.geometry.getType()===ol.geom.GeometryType.CIRCLE&&u.index===ol.interaction.Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX){var d=ol.interaction.Modify.closestOnSegmentData_(t,u);ol.coordinate.equals(d,n)&&!s[y][0]&&(this.dragSegments_.push([u,0]),s[y][0]=u)}else if(ol.coordinate.equals(c[0],n)&&!s[y][0])this.dragSegments_.push([u,0]),s[y][0]=u;else if(ol.coordinate.equals(c[1],n)&&!s[y][1]){if((u.geometry.getType()===ol.geom.GeometryType.LINE_STRING||u.geometry.getType()===ol.geom.GeometryType.MULTI_LINE_STRING)&&s[y][0]&&0===s[y][0].index)continue;this.dragSegments_.push([u,1]),s[y][1]=u}else this.insertVertexCondition_(e)&&ol.getUid(c)in this.vertexSegments_&&!s[y][0]&&!s[y][1]&&r.push([u,n])}r.length&&this.willModifyFeatures_(e);for(var f=r.length-1;f>=0;--f)this.insertVertex_.apply(this,r[f])}return!!this.vertexFeature_},ol.interaction.Modify.handleDragEvent_=function(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e);for(var t=e.coordinate,o=0,r=this.dragSegments_.length;o<r;++o){for(var i,n=this.dragSegments_[o],a=n[0],l=a.depth,s=a.geometry,p=a.segment,g=n[1];t.length<s.getStride();)t.push(p[g][t.length]);switch(s.getType()){case ol.geom.GeometryType.POINT:i=t,p[0]=p[1]=t;break;case ol.geom.GeometryType.MULTI_POINT:i=s.getCoordinates(),i[a.index]=t,p[0]=p[1]=t;break;case ol.geom.GeometryType.LINE_STRING:i=s.getCoordinates(),i[a.index+g]=t,p[g]=t;break;case ol.geom.GeometryType.MULTI_LINE_STRING:i=s.getCoordinates(),i[l[0]][a.index+g]=t,p[g]=t;break;case ol.geom.GeometryType.POLYGON:i=s.getCoordinates(),i[l[0]][a.index+g]=t,p[g]=t;break;case ol.geom.GeometryType.MULTI_POLYGON:i=s.getCoordinates(),i[l[1]][l[0]][a.index+g]=t,p[g]=t;break;case ol.geom.GeometryType.CIRCLE:p[0]=p[1]=t,a.index===ol.interaction.Modify.MODIFY_SEGMENT_CIRCLE_CENTER_INDEX?(this.changingFeature_=!0,s.setCenter(t),this.changingFeature_=!1):(this.changingFeature_=!0,s.setRadius(ol.coordinate.distance(s.getCenter(),t)),this.changingFeature_=!1)}i&&this.setGeometryCoordinates_(s,i)}this.createOrUpdateVertexFeature_(t)},ol.interaction.Modify.handleUpEvent_=function(e){for(var t,o,r=this.dragSegments_.length-1;r>=0;--r)if(t=this.dragSegments_[r][0],o=t.geometry,o.getType()===ol.geom.GeometryType.CIRCLE){var i=o.getCenter(),n=t.featureSegments[0],a=t.featureSegments[1];n.segment[0]=n.segment[1]=i,a.segment[0]=a.segment[1]=i,this.rBush_.update(ol.extent.createOrUpdateFromCoordinate(i),n),this.rBush_.update(o.getExtent(),a)}else this.rBush_.update(ol.extent.boundingExtent(t.segment),t);return this.modified_&&(this.dispatchEvent(new ol.interaction.Modify.Event(ol.interaction.ModifyEventType.MODIFYEND,this.features_,e)),this.modified_=!1),!1},ol.interaction.Modify.handleEvent=function(e){if(!(e instanceof ol.MapBrowserPointerEvent))return!0;this.lastPointerEvent_=e;var t;return e.map.getView().getHints()[ol.ViewHint.INTERACTING]||e.type!=ol.MapBrowserEventType.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(t=!(e.type!=ol.MapBrowserEventType.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==ol.MapBrowserEventType.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),ol.interaction.Pointer.handleEvent.call(this,e)&&!t},ol.interaction.Modify.prototype.handlePointerMove_=function(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map)},ol.interaction.Modify.prototype.handlePointerAtPixel_=function(e,t){var o=t.getCoordinateFromPixel(e),r=function(e,t){return ol.interaction.Modify.pointDistanceToSegmentDataSquared_(o,e)-ol.interaction.Modify.pointDistanceToSegmentDataSquared_(o,t)},i=ol.extent.buffer(ol.extent.createOrUpdateFromCoordinate(o),t.getView().getResolution()*this.pixelTolerance_),n=this.rBush_,a=n.getInExtent(i);if(a.length>0){a.sort(r);var l=a[0],s=l.segment,p=ol.interaction.Modify.closestOnSegmentData_(o,l),g=t.getPixelFromCoordinate(p),u=ol.coordinate.distance(e,g);if(u<=this.pixelTolerance_){var c={};if(l.geometry.getType()===ol.geom.GeometryType.CIRCLE&&l.index===ol.interaction.Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(p);else{var y=t.getPixelFromCoordinate(s[0]),h=t.getPixelFromCoordinate(s[1]),d=ol.coordinate.squaredDistance(g,y),f=ol.coordinate.squaredDistance(g,h);u=Math.sqrt(Math.min(d,f)),this.snappedToVertex_=u<=this.pixelTolerance_,this.snappedToVertex_&&(p=d>f?s[1]:s[0]),this.createOrUpdateVertexFeature_(p);for(var m,v=1,_=a.length;v<_&&(m=a[v].segment,ol.coordinate.equals(s[0],m[0])&&ol.coordinate.equals(s[1],m[1])||ol.coordinate.equals(s[0],m[1])&&ol.coordinate.equals(s[1],m[0]));++v)c[ol.getUid(m)]=!0}return c[ol.getUid(s)]=!0,void(this.vertexSegments_=c)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},ol.interaction.Modify.pointDistanceToSegmentDataSquared_=function(e,t){var o=t.geometry;if(o.getType()===ol.geom.GeometryType.CIRCLE){var r=o;if(t.index===ol.interaction.Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX){var i=ol.coordinate.squaredDistance(r.getCenter(),e),n=Math.sqrt(i)-r.getRadius();return n*n}}return ol.coordinate.squaredDistanceToSegment(e,t.segment)},ol.interaction.Modify.closestOnSegmentData_=function(e,t){var o=t.geometry;return o.getType()===ol.geom.GeometryType.CIRCLE&&t.index===ol.interaction.Modify.MODIFY_SEGMENT_CIRCLE_CIRCUMFERENCE_INDEX?o.getClosestPoint(e):ol.coordinate.closestOnSegment(e,t.segment)},ol.interaction.Modify.prototype.insertVertex_=function(e,t){for(var o,r=e.segment,i=e.feature,n=e.geometry,a=e.depth,l=e.index;t.length<n.getStride();)t.push(0);switch(n.getType()){case ol.geom.GeometryType.MULTI_LINE_STRING:o=n.getCoordinates(),o[a[0]].splice(l+1,0,t);break;case ol.geom.GeometryType.POLYGON:o=n.getCoordinates(),o[a[0]].splice(l+1,0,t);break;case ol.geom.GeometryType.MULTI_POLYGON:o=n.getCoordinates(),o[a[1]][a[0]].splice(l+1,0,t);break;case ol.geom.GeometryType.LINE_STRING:o=n.getCoordinates(),o.splice(l+1,0,t);break;default:return}this.setGeometryCoordinates_(n,o);var s=this.rBush_;s.remove(e),this.updateSegmentIndices_(n,l,a,1);var p={segment:[r[0],t],feature:i,geometry:n,depth:a,index:l};s.insert(ol.extent.boundingExtent(p.segment),p),this.dragSegments_.push([p,1]);var g={segment:[t,r[1]],feature:i,geometry:n,depth:a,index:l+1};s.insert(ol.extent.boundingExtent(g.segment),g),this.dragSegments_.push([g,0]),this.ignoreNextSingleClick_=!0},ol.interaction.Modify.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=ol.MapBrowserEventType.POINTERDRAG){var e=this.lastPointerEvent_;return this.willModifyFeatures_(e),this.removeVertex_(),this.dispatchEvent(new ol.interaction.Modify.Event(ol.interaction.ModifyEventType.MODIFYEND,this.features_,e)),this.modified_=!1,!0}return!1},ol.interaction.Modify.prototype.removeVertex_=function(){var e,t,o,r,i,n,a,l,s,p,g,u=this.dragSegments_,c={},y=!1;for(i=u.length-1;i>=0;--i)o=u[i],p=o[0],g=ol.getUid(p.feature),p.depth&&(g+="-"+p.depth.join("-")),g in c||(c[g]={}),0===o[1]?(c[g].right=p,c[g].index=p.index):1==o[1]&&(c[g].left=p,c[g].index=p.index+1);for(g in c){switch(s=c[g].right,a=c[g].left,n=c[g].index,l=n-1,p=void 0!==a?a:s,l<0&&(l=0),r=p.geometry,t=r.getCoordinates(),e=t,y=!1,r.getType()){case ol.geom.GeometryType.MULTI_LINE_STRING:t[p.depth[0]].length>2&&(t[p.depth[0]].splice(n,1),y=!0);break;case ol.geom.GeometryType.LINE_STRING:t.length>2&&(t.splice(n,1),y=!0);break;case ol.geom.GeometryType.MULTI_POLYGON:e=e[p.depth[1]];case ol.geom.GeometryType.POLYGON:e=e[p.depth[0]],e.length>4&&(n==e.length-1&&(n=0),e.splice(n,1),y=!0,0===n&&(e.pop(),e.push(e[0]),l=e.length-1))}if(y){this.setGeometryCoordinates_(r,t);var h=[];if(void 0!==a&&(this.rBush_.remove(a),h.push(a.segment[0])),void 0!==s&&(this.rBush_.remove(s),h.push(s.segment[1])),void 0!==a&&void 0!==s){var d={depth:p.depth,feature:p.feature,geometry:p.geometry,index:l,segment:h};this.rBush_.insert(ol.extent.boundingExtent(d.segment),d)}this.updateSegmentIndices_(r,n,p.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),u.length=0}}return y},ol.interaction.Modify.prototype.setGeometryCoordinates_=function(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1},ol.interaction.Modify.prototype.updateSegmentIndices_=function(e,t,o,r){this.rBush_.forEachInExtent(e.getExtent(),function(i){i.geometry===e&&(void 0===o||void 0===i.depth||ol.array.equals(i.depth,o))&&i.index>t&&(i.index+=r)})},ol.interaction.Modify.getDefaultStyleFunction=function(){var e=ol.style.Style.createDefaultEditing();return function(t,o){return e[ol.geom.GeometryType.POINT]}},ol.interaction.Modify.Event=function(e,t,o){ol.events.Event.call(this,e),this.features=t,this.mapBrowserEvent=o},ol.inherits(ol.interaction.Modify.Event,ol.events.Event),goog.provide("ol.interaction.Select"),goog.require("ol"),goog.require("ol.CollectionEventType"),goog.require("ol.array"),goog.require("ol.events"),goog.require("ol.events.Event"),goog.require("ol.events.condition"),goog.require("ol.functions"),goog.require("ol.geom.GeometryType"),goog.require("ol.interaction.Interaction"),goog.require("ol.layer.Vector"),goog.require("ol.obj"),goog.require("ol.source.Vector"),goog.require("ol.style.Style"),ol.interaction.Select=function(e){ol.interaction.Interaction.call(this,{handleEvent:ol.interaction.Select.handleEvent});var t=e?e:{};this.condition_=t.condition?t.condition:ol.events.condition.singleClick,this.addCondition_=t.addCondition?t.addCondition:ol.events.condition.never,this.removeCondition_=t.removeCondition?t.removeCondition:ol.events.condition.never,this.toggleCondition_=t.toggleCondition?t.toggleCondition:ol.events.condition.shiftKeyOnly,this.multi_=!!t.multi&&t.multi,this.filter_=t.filter?t.filter:ol.functions.TRUE,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0;var o=new ol.layer.Vector({source:new ol.source.Vector({useSpatialIndex:!1,features:t.features,wrapX:t.wrapX}),style:t.style?t.style:ol.interaction.Select.getDefaultStyleFunction(),updateWhileAnimating:!0,updateWhileInteracting:!0});this.featureOverlay_=o;var r;if(t.layers)if("function"==typeof t.layers)r=t.layers;else{var i=t.layers;r=function(e){return ol.array.includes(i,e)}}else r=ol.functions.TRUE;this.layerFilter_=r,this.featureLayerAssociation_={};var n=this.featureOverlay_.getSource().getFeaturesCollection();ol.events.listen(n,ol.CollectionEventType.ADD,this.addFeature_,this),ol.events.listen(n,ol.CollectionEventType.REMOVE,this.removeFeature_,this)},ol.inherits(ol.interaction.Select,ol.interaction.Interaction),ol.interaction.Select.prototype.addFeatureLayerAssociation_=function(e,t){var o=ol.getUid(e);this.featureLayerAssociation_[o]=t},ol.interaction.Select.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},ol.interaction.Select.prototype.getHitTolerance=function(){return this.hitTolerance_},ol.interaction.Select.prototype.getLayer=function(e){var t=ol.getUid(e);return this.featureLayerAssociation_[t]},ol.interaction.Select.handleEvent=function(e){if(!this.condition_(e))return!0;var t=this.addCondition_(e),o=this.removeCondition_(e),r=this.toggleCondition_(e),i=!t&&!o&&!r,n=e.map,a=this.featureOverlay_.getSource().getFeaturesCollection(),l=[],s=[];if(i){ol.obj.clear(this.featureLayerAssociation_),n.forEachFeatureAtPixel(e.pixel,function(e,t){if(this.filter_(e,t))return s.push(e),this.addFeatureLayerAssociation_(e,t),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});var p;for(p=a.getLength()-1;p>=0;--p){var g=a.item(p),u=s.indexOf(g);u>-1?s.splice(u,1):(a.remove(g),l.push(g))}0!==s.length&&a.extend(s)}else{n.forEachFeatureAtPixel(e.pixel,function(e,i){if(this.filter_(e,i))return!t&&!r||ol.array.includes(a.getArray(),e)?(o||r)&&ol.array.includes(a.getArray(),e)&&(l.push(e),this.removeFeatureLayerAssociation_(e)):(s.push(e),this.addFeatureLayerAssociation_(e,i)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});var c;for(c=l.length-1;c>=0;--c)a.remove(l[c]);a.extend(s)}return(s.length>0||l.length>0)&&this.dispatchEvent(new ol.interaction.Select.Event(ol.interaction.Select.EventType_.SELECT,s,l,e)),ol.events.condition.pointerMove(e)},ol.interaction.Select.prototype.setHitTolerance=function(e){this.hitTolerance_=e},ol.interaction.Select.prototype.setMap=function(e){var t=this.getMap(),o=this.featureOverlay_.getSource().getFeaturesCollection();t&&o.forEach(t.unskipFeature,t),ol.interaction.Interaction.prototype.setMap.call(this,e),this.featureOverlay_.setMap(e),e&&o.forEach(e.skipFeature,e)},ol.interaction.Select.getDefaultStyleFunction=function(){var e=ol.style.Style.createDefaultEditing();return ol.array.extend(e[ol.geom.GeometryType.POLYGON],e[ol.geom.GeometryType.LINE_STRING]),ol.array.extend(e[ol.geom.GeometryType.GEOMETRY_COLLECTION],e[ol.geom.GeometryType.LINE_STRING]),function(t,o){return t.getGeometry()?e[t.getGeometry().getType()]:null}},ol.interaction.Select.prototype.addFeature_=function(e){var t=this.getMap();t&&t.skipFeature(e.element)},ol.interaction.Select.prototype.removeFeature_=function(e){var t=this.getMap();t&&t.unskipFeature(e.element)},ol.interaction.Select.prototype.removeFeatureLayerAssociation_=function(e){var t=ol.getUid(e);delete this.featureLayerAssociation_[t]},ol.interaction.Select.Event=function(e,t,o,r){ol.events.Event.call(this,e),this.selected=t,this.deselected=o,this.mapBrowserEvent=r},ol.inherits(ol.interaction.Select.Event,ol.events.Event),ol.interaction.Select.EventType_={SELECT:"select"},goog.provide("ol.interaction.Snap"),goog.require("ol"),goog.require("ol.Collection"),goog.require("ol.CollectionEventType"),goog.require("ol.coordinate"),goog.require("ol.events");goog.require("ol.events.EventType");goog.require("ol.extent"),goog.require("ol.functions"),goog.require("ol.geom.GeometryType"),goog.require("ol.geom.Polygon"),goog.require("ol.interaction.Pointer"),goog.require("ol.obj"),goog.require("ol.source.Vector"),goog.require("ol.source.VectorEventType"),goog.require("ol.structs.RBush"),ol.interaction.Snap=function(e){ol.interaction.Pointer.call(this,{handleEvent:ol.interaction.Snap.handleEvent_,handleDownEvent:ol.functions.TRUE,handleUpEvent:ol.interaction.Snap.handleUpEvent_});var t=e?e:{};this.source_=t.source?t.source:null,this.vertex_=void 0===t.vertex||t.vertex,this.edge_=void 0===t.edge||t.edge,this.features_=t.features?t.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelCoordinate_=null,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.sortByDistance_=ol.interaction.Snap.sortByDistance.bind(this),this.rBush_=new ol.structs.RBush,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}},ol.inherits(ol.interaction.Snap,ol.interaction.Pointer),ol.interaction.Snap.prototype.addFeature=function(e,t){var o=void 0===t||t,r=ol.getUid(e),i=e.getGeometry();if(i){var n=this.SEGMENT_WRITERS_[i.getType()];n&&(this.indexedFeaturesExtents_[r]=i.getExtent(ol.extent.createEmpty()),n.call(this,e,i))}o&&(this.featureChangeListenerKeys_[r]=ol.events.listen(e,ol.events.EventType.CHANGE,this.handleFeatureChange_,this))},ol.interaction.Snap.prototype.forEachFeatureAdd_=function(e){this.addFeature(e)},ol.interaction.Snap.prototype.forEachFeatureRemove_=function(e){this.removeFeature(e)},ol.interaction.Snap.prototype.getFeatures_=function(){var e;return this.features_?e=this.features_:this.source_&&(e=this.source_.getFeatures()),e},ol.interaction.Snap.prototype.handleFeatureAdd_=function(e){var t;e instanceof ol.source.Vector.Event?t=e.feature:e instanceof ol.Collection.Event&&(t=e.element),this.addFeature(t)},ol.interaction.Snap.prototype.handleFeatureRemove_=function(e){var t;e instanceof ol.source.Vector.Event?t=e.feature:e instanceof ol.Collection.Event&&(t=e.element),this.removeFeature(t)},ol.interaction.Snap.prototype.handleFeatureChange_=function(e){var t=e.target;if(this.handlingDownUpSequence){var o=ol.getUid(t);o in this.pendingFeatures_||(this.pendingFeatures_[o]=t)}else this.updateFeature_(t)},ol.interaction.Snap.prototype.removeFeature=function(e,t){var o=void 0===t||t,r=ol.getUid(e),i=this.indexedFeaturesExtents_[r];if(i){var n,a=this.rBush_,l=[];for(a.forEachInExtent(i,function(t){e===t.feature&&l.push(t)}),n=l.length-1;n>=0;--n)a.remove(l[n])}o&&(ol.events.unlistenByKey(this.featureChangeListenerKeys_[r]),delete this.featureChangeListenerKeys_[r])},ol.interaction.Snap.prototype.setMap=function(e){var t=this.getMap(),o=this.featuresListenerKeys_,r=this.getFeatures_();t&&(o.forEach(ol.events.unlistenByKey),o.length=0,r.forEach(this.forEachFeatureRemove_,this)),ol.interaction.Pointer.prototype.setMap.call(this,e),e&&(this.features_?o.push(ol.events.listen(this.features_,ol.CollectionEventType.ADD,this.handleFeatureAdd_,this),ol.events.listen(this.features_,ol.CollectionEventType.REMOVE,this.handleFeatureRemove_,this)):this.source_&&o.push(ol.events.listen(this.source_,ol.source.VectorEventType.ADDFEATURE,this.handleFeatureAdd_,this),ol.events.listen(this.source_,ol.source.VectorEventType.REMOVEFEATURE,this.handleFeatureRemove_,this)),r.forEach(this.forEachFeatureAdd_,this))},ol.interaction.Snap.prototype.shouldStopEvent=ol.functions.FALSE,ol.interaction.Snap.prototype.snapTo=function(e,t,o){var r=o.getCoordinateFromPixel([e[0]-this.pixelTolerance_,e[1]+this.pixelTolerance_]),i=o.getCoordinateFromPixel([e[0]+this.pixelTolerance_,e[1]-this.pixelTolerance_]),n=ol.extent.boundingExtent([r,i]),a=this.rBush_.getInExtent(n);this.vertex_&&!this.edge_&&(a=a.filter(function(e){return e.feature.getGeometry().getType()!==ol.geom.GeometryType.CIRCLE}));var l,s,p,g,u,c=!1,y=!1,h=null,d=null;if(a.length>0){this.pixelCoordinate_=t,a.sort(this.sortByDistance_);var f=a[0].segment,m=a[0].feature.getGeometry().getType()===ol.geom.GeometryType.CIRCLE;this.vertex_&&!this.edge_?(s=o.getPixelFromCoordinate(f[0]),p=o.getPixelFromCoordinate(f[1]),g=ol.coordinate.squaredDistance(e,s),u=ol.coordinate.squaredDistance(e,p),l=Math.sqrt(Math.min(g,u)),c=l<=this.pixelTolerance_,c&&(y=!0,h=g>u?f[1]:f[0],d=o.getPixelFromCoordinate(h))):this.edge_&&(h=m?ol.coordinate.closestOnCircle(t,a[0].feature.getGeometry()):ol.coordinate.closestOnSegment(t,f),d=o.getPixelFromCoordinate(h),ol.coordinate.distance(e,d)<=this.pixelTolerance_&&(y=!0,this.vertex_&&!m&&(s=o.getPixelFromCoordinate(f[0]),p=o.getPixelFromCoordinate(f[1]),g=ol.coordinate.squaredDistance(d,s),u=ol.coordinate.squaredDistance(d,p),l=Math.sqrt(Math.min(g,u)),c=l<=this.pixelTolerance_,c&&(h=g>u?f[1]:f[0],d=o.getPixelFromCoordinate(h))))),y&&(d=[Math.round(d[0]),Math.round(d[1])])}return{snapped:y,vertex:h,vertexPixel:d}},ol.interaction.Snap.prototype.updateFeature_=function(e){this.removeFeature(e,!1),this.addFeature(e,!1)},ol.interaction.Snap.prototype.writeCircleGeometry_=function(e,t){var o,r,i,n,a=ol.geom.Polygon.fromCircle(t),l=a.getCoordinates()[0];for(o=0,r=l.length-1;o<r;++o)i=l.slice(o,o+2),n={feature:e,segment:i},this.rBush_.insert(ol.extent.boundingExtent(i),n)},ol.interaction.Snap.prototype.writeGeometryCollectionGeometry_=function(e,t){var o,r=t.getGeometriesArray();for(o=0;o<r.length;++o){var i=this.SEGMENT_WRITERS_[r[o].getType()];i&&i.call(this,e,r[o])}},ol.interaction.Snap.prototype.writeLineStringGeometry_=function(e,t){var o,r,i,n,a=t.getCoordinates();for(o=0,r=a.length-1;o<r;++o)i=a.slice(o,o+2),n={feature:e,segment:i},this.rBush_.insert(ol.extent.boundingExtent(i),n)},ol.interaction.Snap.prototype.writeMultiLineStringGeometry_=function(e,t){var o,r,i,n,a,l,s,p=t.getCoordinates();for(n=0,a=p.length;n<a;++n)for(o=p[n],r=0,i=o.length-1;r<i;++r)l=o.slice(r,r+2),s={feature:e,segment:l},this.rBush_.insert(ol.extent.boundingExtent(l),s)},ol.interaction.Snap.prototype.writeMultiPointGeometry_=function(e,t){var o,r,i,n,a=t.getCoordinates();for(r=0,i=a.length;r<i;++r)o=a[r],n={feature:e,segment:[o,o]},this.rBush_.insert(t.getExtent(),n)},ol.interaction.Snap.prototype.writeMultiPolygonGeometry_=function(e,t){var o,r,i,n,a,l,s,p,g,u,c=t.getCoordinates();for(l=0,s=c.length;l<s;++l)for(p=c[l],n=0,a=p.length;n<a;++n)for(o=p[n],r=0,i=o.length-1;r<i;++r)g=o.slice(r,r+2),u={feature:e,segment:g},this.rBush_.insert(ol.extent.boundingExtent(g),u)},ol.interaction.Snap.prototype.writePointGeometry_=function(e,t){var o=t.getCoordinates(),r={feature:e,segment:[o,o]};this.rBush_.insert(t.getExtent(),r)},ol.interaction.Snap.prototype.writePolygonGeometry_=function(e,t){var o,r,i,n,a,l,s,p=t.getCoordinates();for(n=0,a=p.length;n<a;++n)for(o=p[n],r=0,i=o.length-1;r<i;++r)l=o.slice(r,r+2),s={feature:e,segment:l},this.rBush_.insert(ol.extent.boundingExtent(l),s)},ol.interaction.Snap.handleEvent_=function(e){var t=this.snapTo(e.pixel,e.coordinate,e.map);return t.snapped&&(e.coordinate=t.vertex.slice(0,2),e.pixel=t.vertexPixel),ol.interaction.Pointer.handleEvent.call(this,e)},ol.interaction.Snap.handleUpEvent_=function(e){var t=ol.obj.getValues(this.pendingFeatures_);return t.length&&(t.forEach(this.updateFeature_,this),this.pendingFeatures_={}),!1},ol.interaction.Snap.sortByDistance=function(e,t){return ol.coordinate.squaredDistanceToSegment(this.pixelCoordinate_,e.segment)-ol.coordinate.squaredDistanceToSegment(this.pixelCoordinate_,t.segment)},goog.provide("ol.interaction.TranslateEventType"),ol.interaction.TranslateEventType={TRANSLATESTART:"translatestart",TRANSLATING:"translating",TRANSLATEEND:"translateend"},goog.provide("ol.interaction.Translate"),goog.require("ol"),goog.require("ol.Collection"),goog.require("ol.Object"),goog.require("ol.events"),goog.require("ol.events.Event"),goog.require("ol.functions"),goog.require("ol.array"),goog.require("ol.interaction.Pointer"),goog.require("ol.interaction.Property"),goog.require("ol.interaction.TranslateEventType"),ol.interaction.Translate=function(e){ol.interaction.Pointer.call(this,{handleDownEvent:ol.interaction.Translate.handleDownEvent_,handleDragEvent:ol.interaction.Translate.handleDragEvent_,handleMoveEvent:ol.interaction.Translate.handleMoveEvent_,handleUpEvent:ol.interaction.Translate.handleUpEvent_});var t=e?e:{};this.lastCoordinate_=null,this.features_=void 0!==t.features?t.features:null;var o;if(t.layers)if("function"==typeof t.layers)o=t.layers;else{var r=t.layers;o=function(e){return ol.array.includes(r,e)}}else o=ol.functions.TRUE;this.layerFilter_=o,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.lastFeature_=null,ol.events.listen(this,ol.Object.getChangeEventType(ol.interaction.Property.ACTIVE),this.handleActiveChanged_,this)},ol.inherits(ol.interaction.Translate,ol.interaction.Pointer),ol.interaction.Translate.handleDownEvent_=function(e){if(this.lastFeature_=this.featuresAtPixel_(e.pixel,e.map),!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=e.coordinate,ol.interaction.Translate.handleMoveEvent_.call(this,e);var t=this.features_||new ol.Collection([this.lastFeature_]);return this.dispatchEvent(new ol.interaction.Translate.Event(ol.interaction.TranslateEventType.TRANSLATESTART,t,e.coordinate)),!0}return!1},ol.interaction.Translate.handleUpEvent_=function(e){if(this.lastCoordinate_){this.lastCoordinate_=null,ol.interaction.Translate.handleMoveEvent_.call(this,e);var t=this.features_||new ol.Collection([this.lastFeature_]);return this.dispatchEvent(new ol.interaction.Translate.Event(ol.interaction.TranslateEventType.TRANSLATEEND,t,e.coordinate)),!0}return!1},ol.interaction.Translate.handleDragEvent_=function(e){if(this.lastCoordinate_){
var t=e.coordinate,o=t[0]-this.lastCoordinate_[0],r=t[1]-this.lastCoordinate_[1],i=this.features_||new ol.Collection([this.lastFeature_]);i.forEach(function(e){var t=e.getGeometry();t.translate(o,r),e.setGeometry(t)}),this.lastCoordinate_=t,this.dispatchEvent(new ol.interaction.Translate.Event(ol.interaction.TranslateEventType.TRANSLATING,i,t))}},ol.interaction.Translate.handleMoveEvent_=function(e){var t=e.map.getViewport();this.featuresAtPixel_(e.pixel,e.map)?(t.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),t.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):t.classList.remove("ol-grab","ol-grabbing")},ol.interaction.Translate.prototype.featuresAtPixel_=function(e,t){return t.forEachFeatureAtPixel(e,function(e){if(!this.features_||ol.array.includes(this.features_.getArray(),e))return e}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},ol.interaction.Translate.prototype.getHitTolerance=function(){return this.hitTolerance_},ol.interaction.Translate.prototype.setHitTolerance=function(e){this.hitTolerance_=e},ol.interaction.Translate.prototype.setMap=function(e){var t=this.getMap();ol.interaction.Pointer.prototype.setMap.call(this,e),this.updateState_(t)},ol.interaction.Translate.prototype.handleActiveChanged_=function(){this.updateState_(null)},ol.interaction.Translate.prototype.updateState_=function(e){var t=this.getMap(),o=this.getActive();if(!t||!o){t||(t=e);var r=t.getViewport();r.classList.remove("ol-grab","ol-grabbing")}},ol.interaction.Translate.Event=function(e,t,o){ol.events.Event.call(this,e),this.features=t,this.coordinate=o},ol.inherits(ol.interaction.Translate.Event,ol.events.Event),goog.provide("ol.layer.Heatmap"),goog.require("ol.events"),goog.require("ol"),goog.require("ol.Object"),goog.require("ol.dom"),goog.require("ol.layer.Vector"),goog.require("ol.math"),goog.require("ol.obj"),goog.require("ol.render.EventType"),goog.require("ol.style.Icon"),goog.require("ol.style.Style"),ol.layer.Heatmap=function(e){var t=e?e:{},o=ol.obj.assign({},t);delete o.gradient,delete o.radius,delete o.blur,delete o.shadow,delete o.weight,ol.layer.Vector.call(this,o),this.gradient_=null,this.shadow_=void 0!==t.shadow?t.shadow:250,this.circleImage_=void 0,this.styleCache_=null,ol.events.listen(this,ol.Object.getChangeEventType(ol.layer.Heatmap.Property_.GRADIENT),this.handleGradientChanged_,this),this.setGradient(t.gradient?t.gradient:ol.layer.Heatmap.DEFAULT_GRADIENT),this.setBlur(void 0!==t.blur?t.blur:15),this.setRadius(void 0!==t.radius?t.radius:8),ol.events.listen(this,ol.Object.getChangeEventType(ol.layer.Heatmap.Property_.BLUR),this.handleStyleChanged_,this),ol.events.listen(this,ol.Object.getChangeEventType(ol.layer.Heatmap.Property_.RADIUS),this.handleStyleChanged_,this),this.handleStyleChanged_();var r,i=t.weight?t.weight:"weight";r="string"==typeof i?function(e){return e.get(i)}:i,this.setStyle(function(e,t){var o=r(e),i=void 0!==o?ol.math.clamp(o,0,1):1,n=255*i|0,a=this.styleCache_[n];return a||(a=[new ol.style.Style({image:new ol.style.Icon({opacity:i,src:this.circleImage_})})],this.styleCache_[n]=a),a}.bind(this)),this.setRenderOrder(null),ol.events.listen(this,ol.render.EventType.RENDER,this.handleRender_,this)},ol.inherits(ol.layer.Heatmap,ol.layer.Vector),ol.layer.Heatmap.DEFAULT_GRADIENT=["#00f","#0ff","#0f0","#ff0","#f00"],ol.layer.Heatmap.createGradient_=function(e){for(var t=1,o=256,r=ol.dom.createCanvasContext2D(t,o),i=r.createLinearGradient(0,0,t,o),n=1/(e.length-1),a=0,l=e.length;a<l;++a)i.addColorStop(a*n,e[a]);return r.fillStyle=i,r.fillRect(0,0,t,o),r.getImageData(0,0,t,o).data},ol.layer.Heatmap.prototype.createCircle_=function(){var e=this.getRadius(),t=this.getBlur(),o=e+t+1,r=2*o,i=ol.dom.createCanvasContext2D(r,r);i.shadowOffsetX=i.shadowOffsetY=this.shadow_,i.shadowBlur=t,i.shadowColor="#000",i.beginPath();var n=o-this.shadow_;return i.arc(n,n,e,0,2*Math.PI,!0),i.fill(),i.canvas.toDataURL()},ol.layer.Heatmap.prototype.getBlur=function(){return this.get(ol.layer.Heatmap.Property_.BLUR)},ol.layer.Heatmap.prototype.getGradient=function(){return this.get(ol.layer.Heatmap.Property_.GRADIENT)},ol.layer.Heatmap.prototype.getRadius=function(){return this.get(ol.layer.Heatmap.Property_.RADIUS)},ol.layer.Heatmap.prototype.handleGradientChanged_=function(){this.gradient_=ol.layer.Heatmap.createGradient_(this.getGradient())},ol.layer.Heatmap.prototype.handleStyleChanged_=function(){this.circleImage_=this.createCircle_(),this.styleCache_=new Array(256),this.changed()},ol.layer.Heatmap.prototype.handleRender_=function(e){var t,o,r,i=e.context,n=i.canvas,a=i.getImageData(0,0,n.width,n.height),l=a.data;for(t=0,o=l.length;t<o;t+=4)r=4*l[t+3],r&&(l[t]=this.gradient_[r],l[t+1]=this.gradient_[r+1],l[t+2]=this.gradient_[r+2]);i.putImageData(a,0,0)},ol.layer.Heatmap.prototype.setBlur=function(e){this.set(ol.layer.Heatmap.Property_.BLUR,e)},ol.layer.Heatmap.prototype.setGradient=function(e){this.set(ol.layer.Heatmap.Property_.GRADIENT,e)},ol.layer.Heatmap.prototype.setRadius=function(e){this.set(ol.layer.Heatmap.Property_.RADIUS,e)},ol.layer.Heatmap.Property_={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},goog.provide("ol.renderer.canvas.IntermediateCanvas"),goog.require("ol"),goog.require("ol.coordinate"),goog.require("ol.dom"),goog.require("ol.extent"),goog.require("ol.renderer.canvas.Layer"),goog.require("ol.transform"),ol.renderer.canvas.IntermediateCanvas=function(e){ol.renderer.canvas.Layer.call(this,e),this.coordinateToCanvasPixelTransform=ol.transform.create(),this.hitCanvasContext_=null},ol.inherits(ol.renderer.canvas.IntermediateCanvas,ol.renderer.canvas.Layer),ol.renderer.canvas.IntermediateCanvas.prototype.composeFrame=function(e,t,o){this.preCompose(o,e);var r=this.getImage();if(r){var i=t.extent,n=void 0!==i&&!ol.extent.containsExtent(i,e.extent)&&ol.extent.intersects(i,e.extent);n&&this.clip(o,e,i);var a=this.getImageTransform(),l=o.globalAlpha;o.globalAlpha=t.opacity;var s=a[4],p=a[5],g=r.width*a[0],u=r.height*a[3];o.drawImage(r,0,0,+r.width,+r.height,Math.round(s),Math.round(p),Math.round(g),Math.round(u)),o.globalAlpha=l,n&&o.restore()}this.postCompose(o,e,t)},ol.renderer.canvas.IntermediateCanvas.prototype.getImage=function(){},ol.renderer.canvas.IntermediateCanvas.prototype.getImageTransform=function(){},ol.renderer.canvas.IntermediateCanvas.prototype.forEachFeatureAtCoordinate=function(e,t,o,r,i){var n=this.getLayer(),a=n.getSource(),l=t.viewState.resolution,s=t.viewState.rotation,p=t.skippedFeatureUids;return a.forEachFeatureAtCoordinate(e,l,s,o,p,function(e){return r.call(i,e,n)})},ol.renderer.canvas.IntermediateCanvas.prototype.forEachLayerAtCoordinate=function(e,t,o,r){if(this.getImage()){if(this.getLayer().getSource().forEachFeatureAtCoordinate!==ol.nullFunction)return ol.renderer.canvas.Layer.prototype.forEachLayerAtCoordinate.apply(this,arguments);var i=ol.transform.apply(this.coordinateToCanvasPixelTransform,e.slice());ol.coordinate.scale(i,t.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=ol.dom.createCanvasContext2D(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),i[0],i[1],1,1,0,0,1,1);var n=this.hitCanvasContext_.getImageData(0,0,1,1).data;return n[3]>0?o.call(r,this.getLayer(),n):void 0}},goog.provide("ol.renderer.canvas.ImageLayer"),goog.require("ol"),goog.require("ol.ViewHint"),goog.require("ol.extent"),goog.require("ol.renderer.canvas.IntermediateCanvas"),goog.require("ol.transform"),ol.renderer.canvas.ImageLayer=function(e){ol.renderer.canvas.IntermediateCanvas.call(this,e),this.image_=null,this.imageTransform_=ol.transform.create()},ol.inherits(ol.renderer.canvas.ImageLayer,ol.renderer.canvas.IntermediateCanvas),ol.renderer.canvas.ImageLayer.prototype.getImage=function(){return this.image_?this.image_.getImage():null},ol.renderer.canvas.ImageLayer.prototype.getImageTransform=function(){return this.imageTransform_},ol.renderer.canvas.ImageLayer.prototype.prepareFrame=function(e,t){var o,r=e.pixelRatio,i=e.size,n=e.viewState,a=n.center,l=n.resolution,s=this.getLayer(),p=s.getSource(),g=e.viewHints,u=e.extent;if(void 0!==t.extent&&(u=ol.extent.getIntersection(u,t.extent)),!g[ol.ViewHint.ANIMATING]&&!g[ol.ViewHint.INTERACTING]&&!ol.extent.isEmpty(u)){var c=n.projection;if(!ol.ENABLE_RASTER_REPROJECTION){var y=p.getProjection();y&&(c=y)}if(o=p.getImage(u,l,r,c)){var h=this.loadImage(o);h&&(this.image_=o)}}if(this.image_){o=this.image_;var d=o.getExtent(),f=o.getResolution(),m=o.getPixelRatio(),v=r*f/(l*m),_=ol.transform.compose(this.imageTransform_,r*i[0]/2,r*i[1]/2,v,v,0,m*(d[0]-a[0])/f,m*(a[1]-d[3])/f);ol.transform.compose(this.coordinateToCanvasPixelTransform,r*i[0]/2-_[4],r*i[1]/2-_[5],r/l,-r/l,0,-a[0],-a[1]),this.updateAttributions(e.attributions,o.getAttributions()),this.updateLogos(e,p),this.renderedResolution=l*r/m}return!!this.image_},goog.provide("ol.reproj"),goog.require("ol.dom"),goog.require("ol.extent"),goog.require("ol.math"),goog.require("ol.proj"),ol.reproj.calculateSourceResolution=function(e,t,o,r){var i=ol.proj.transform(o,t,e),n=ol.proj.getPointResolution(t,r,o),a=t.getMetersPerUnit();void 0!==a&&(n*=a);var l=e.getMetersPerUnit();void 0!==l&&(n/=l);var s=ol.proj.getPointResolution(e,n,i)/n;return isFinite(s)&&s>0&&(n/=s),n},ol.reproj.enlargeClipPoint_=function(e,t,o,r){var i=o-e,n=r-t,a=Math.sqrt(i*i+n*n);return[Math.round(o+i/a),Math.round(r+n/a)]},ol.reproj.render=function(e,t,o,r,i,n,a,l,s,p,g){var u=ol.dom.createCanvasContext2D(Math.round(o*e),Math.round(o*t));if(0===s.length)return u.canvas;u.scale(o,o);var c=ol.extent.createEmpty();s.forEach(function(e,t,o){ol.extent.extend(c,e.extent)});var y=ol.extent.getWidth(c),h=ol.extent.getHeight(c),d=ol.dom.createCanvasContext2D(Math.round(o*y/r),Math.round(o*h/r)),f=o/r;s.forEach(function(e,t,o){var r=e.extent[0]-c[0],i=-(e.extent[3]-c[3]),n=ol.extent.getWidth(e.extent),a=ol.extent.getHeight(e.extent);d.drawImage(e.image,p,p,e.image.width-2*p,e.image.height-2*p,r*f,i*f,n*f,a*f)});var m=ol.extent.getTopLeft(a);return l.getTriangles().forEach(function(e,t,i){var a=e.source,l=e.target,s=a[0][0],p=a[0][1],g=a[1][0],y=a[1][1],h=a[2][0],f=a[2][1],v=(l[0][0]-m[0])/n,_=-(l[0][1]-m[1])/n,S=(l[1][0]-m[0])/n,x=-(l[1][1]-m[1])/n,E=(l[2][0]-m[0])/n,P=-(l[2][1]-m[1])/n,T=s,R=p;s=0,p=0,g-=T,y-=R,h-=T,f-=R;var L=[[g,y,0,0,S-v],[h,f,0,0,E-v],[0,0,g,y,x-_],[0,0,h,f,P-_]],M=ol.math.solveLinearSystem(L);if(M){u.save(),u.beginPath();var C=(v+S+E)/3,b=(_+x+P)/3,I=ol.reproj.enlargeClipPoint_(C,b,v,_),A=ol.reproj.enlargeClipPoint_(C,b,S,x),w=ol.reproj.enlargeClipPoint_(C,b,E,P);u.moveTo(A[0],A[1]),u.lineTo(I[0],I[1]),u.lineTo(w[0],w[1]),u.clip(),u.transform(M[0],M[2],M[1],M[3],v,_),u.translate(c[0]-T,c[3]-R),u.scale(r/o,-r/o),u.drawImage(d.canvas,0,0),u.restore()}}),g&&(u.save(),u.strokeStyle="black",u.lineWidth=1,l.getTriangles().forEach(function(e,t,o){var r=e.target,i=(r[0][0]-m[0])/n,a=-(r[0][1]-m[1])/n,l=(r[1][0]-m[0])/n,s=-(r[1][1]-m[1])/n,p=(r[2][0]-m[0])/n,g=-(r[2][1]-m[1])/n;u.beginPath(),u.moveTo(l,s),u.lineTo(i,a),u.lineTo(p,g),u.closePath(),u.stroke()}),u.restore()),u.canvas},goog.provide("ol.reproj.Triangulation"),goog.require("ol"),goog.require("ol.extent"),goog.require("ol.math"),goog.require("ol.proj"),ol.reproj.Triangulation=function(e,t,o,r,i){this.sourceProj_=e,this.targetProj_=t;var n={},a=ol.proj.getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(e){var t=e[0]+"/"+e[1];return n[t]||(n[t]=a(e)),n[t]},this.maxSourceExtent_=r,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&ol.extent.getWidth(r)==ol.extent.getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ol.extent.getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ol.extent.getWidth(this.targetProj_.getExtent()):null;var l=ol.extent.getTopLeft(o),s=ol.extent.getTopRight(o),p=ol.extent.getBottomRight(o),g=ol.extent.getBottomLeft(o),u=this.transformInv_(l),c=this.transformInv_(s),y=this.transformInv_(p),h=this.transformInv_(g);if(this.addQuad_(l,s,p,g,u,c,y,h,ol.RASTER_REPROJECTION_MAX_SUBDIVISION),this.wrapsXInSource_){var d=1/0;this.triangles_.forEach(function(e,t,o){d=Math.min(d,e.source[0][0],e.source[1][0],e.source[2][0])}),this.triangles_.forEach(function(e){if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-d>this.sourceWorldWidth_/2){var t=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];t[0][0]-d>this.sourceWorldWidth_/2&&(t[0][0]-=this.sourceWorldWidth_),t[1][0]-d>this.sourceWorldWidth_/2&&(t[1][0]-=this.sourceWorldWidth_),t[2][0]-d>this.sourceWorldWidth_/2&&(t[2][0]-=this.sourceWorldWidth_);var o=Math.min(t[0][0],t[1][0],t[2][0]),r=Math.max(t[0][0],t[1][0],t[2][0]);r-o<this.sourceWorldWidth_/2&&(e.source=t)}},this)}n={}},ol.reproj.Triangulation.prototype.addTriangle_=function(e,t,o,r,i,n){this.triangles_.push({source:[r,i,n],target:[e,t,o]})},ol.reproj.Triangulation.prototype.addQuad_=function(e,t,o,r,i,n,a,l,s){var p=ol.extent.boundingExtent([i,n,a,l]),g=this.sourceWorldWidth_?ol.extent.getWidth(p)/this.sourceWorldWidth_:null,u=this.sourceWorldWidth_,c=this.sourceProj_.canWrapX()&&g>.5&&g<1,y=!1;if(s>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var h=ol.extent.boundingExtent([e,t,o,r]),d=ol.extent.getWidth(h)/this.targetWorldWidth_;y|=d>ol.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH}!c&&this.sourceProj_.isGlobal()&&g&&(y|=g>ol.RASTER_REPROJECTION_MAX_TRIANGLE_WIDTH)}if(y||!this.maxSourceExtent_||ol.extent.intersects(p,this.maxSourceExtent_)){if(!(y||isFinite(i[0])&&isFinite(i[1])&&isFinite(n[0])&&isFinite(n[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1]))){if(!(s>0))return;y=!0}if(s>0){if(!y){var f,m=[(e[0]+o[0])/2,(e[1]+o[1])/2],v=this.transformInv_(m);if(c){var _=(ol.math.modulo(i[0],u)+ol.math.modulo(a[0],u))/2;f=_-ol.math.modulo(v[0],u)}else f=(i[0]+a[0])/2-v[0];var S=(i[1]+a[1])/2-v[1],x=f*f+S*S;y=x>this.errorThresholdSquared_}if(y){if(Math.abs(e[0]-o[0])<=Math.abs(e[1]-o[1])){var E=[(t[0]+o[0])/2,(t[1]+o[1])/2],P=this.transformInv_(E),T=[(r[0]+e[0])/2,(r[1]+e[1])/2],R=this.transformInv_(T);this.addQuad_(e,t,E,T,i,n,P,R,s-1),this.addQuad_(T,E,o,r,R,P,a,l,s-1)}else{var L=[(e[0]+t[0])/2,(e[1]+t[1])/2],M=this.transformInv_(L),C=[(o[0]+r[0])/2,(o[1]+r[1])/2],b=this.transformInv_(C);this.addQuad_(e,L,C,r,i,M,b,l,s-1),this.addQuad_(L,t,o,C,M,n,a,b,s-1)}return}}if(c){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(e,o,r,i,a,l),this.addTriangle_(e,t,o,i,n,a)}},ol.reproj.Triangulation.prototype.calculateSourceExtent=function(){var e=ol.extent.createEmpty();return this.triangles_.forEach(function(t,o,r){var i=t.source;ol.extent.extendCoordinate(e,i[0]),ol.extent.extendCoordinate(e,i[1]),ol.extent.extendCoordinate(e,i[2])}),e},ol.reproj.Triangulation.prototype.getTriangles=function(){return this.triangles_},goog.provide("ol.reproj.Image"),goog.require("ol"),goog.require("ol.ImageBase"),goog.require("ol.ImageState"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.extent"),goog.require("ol.reproj"),goog.require("ol.reproj.Triangulation"),ol.reproj.Image=function(e,t,o,r,i,n){this.targetProj_=t,this.maxSourceExtent_=e.getExtent();var a=t.getExtent(),l=a?ol.extent.getIntersection(o,a):o,s=ol.extent.getCenter(l),p=ol.reproj.calculateSourceResolution(e,t,s,r),g=ol.DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD;this.triangulation_=new ol.reproj.Triangulation(e,t,l,this.maxSourceExtent_,p*g),this.targetResolution_=r,this.targetExtent_=o;var u=this.triangulation_.calculateSourceExtent();this.sourceImage_=n(u,p,i),this.sourcePixelRatio_=this.sourceImage_?this.sourceImage_.getPixelRatio():1,this.canvas_=null,this.sourceListenerKey_=null;var c=ol.ImageState.LOADED,y=[];this.sourceImage_&&(c=ol.ImageState.IDLE,y=this.sourceImage_.getAttributions()),ol.ImageBase.call(this,o,r,this.sourcePixelRatio_,c,y)},ol.inherits(ol.reproj.Image,ol.ImageBase),ol.reproj.Image.prototype.disposeInternal=function(){this.state==ol.ImageState.LOADING&&this.unlistenSource_(),ol.ImageBase.prototype.disposeInternal.call(this)},ol.reproj.Image.prototype.getImage=function(e){return this.canvas_},ol.reproj.Image.prototype.getProjection=function(){return this.targetProj_},ol.reproj.Image.prototype.reproject_=function(){var e=this.sourceImage_.getState();if(e==ol.ImageState.LOADED){var t=ol.extent.getWidth(this.targetExtent_)/this.targetResolution_,o=ol.extent.getHeight(this.targetExtent_)/this.targetResolution_;this.canvas_=ol.reproj.render(t,o,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=e,this.changed()},ol.reproj.Image.prototype.load=function(){if(this.state==ol.ImageState.IDLE){this.state=ol.ImageState.LOADING,this.changed();var e=this.sourceImage_.getState();e==ol.ImageState.LOADED||e==ol.ImageState.ERROR?this.reproject_():(this.sourceListenerKey_=ol.events.listen(this.sourceImage_,ol.events.EventType.CHANGE,function(e){var t=this.sourceImage_.getState();t!=ol.ImageState.LOADED&&t!=ol.ImageState.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},ol.reproj.Image.prototype.unlistenSource_=function(){ol.events.unlistenByKey(this.sourceListenerKey_),this.sourceListenerKey_=null},goog.provide("ol.source.Image"),goog.require("ol"),goog.require("ol.ImageState"),goog.require("ol.array"),goog.require("ol.events.Event"),goog.require("ol.extent"),goog.require("ol.proj"),goog.require("ol.reproj.Image"),goog.require("ol.source.Source"),ol.source.Image=function(e){ol.source.Source.call(this,{attributions:e.attributions,extent:e.extent,logo:e.logo,projection:e.projection,state:e.state}),this.resolutions_=void 0!==e.resolutions?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0},ol.inherits(ol.source.Image,ol.source.Source),ol.source.Image.prototype.getResolutions=function(){return this.resolutions_},ol.source.Image.prototype.findNearestResolution=function(e){if(this.resolutions_){var t=ol.array.linearFindNearest(this.resolutions_,e,0);e=this.resolutions_[t]}return e},ol.source.Image.prototype.getImage=function(e,t,o,r){var i=this.getProjection();if(ol.ENABLE_RASTER_REPROJECTION&&i&&r&&!ol.proj.equivalent(i,r)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&ol.proj.equivalent(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==t&&this.reprojectedImage_.getPixelRatio()==o&&ol.extent.equals(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new ol.reproj.Image(i,r,e,t,o,function(e,t,o){return this.getImageInternal(e,t,o,i)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return i&&(r=i),this.getImageInternal(e,t,o,r)},ol.source.Image.prototype.getImageInternal=function(e,t,o,r){},ol.source.Image.prototype.handleImageChange=function(e){var t=e.target;switch(t.getState()){case ol.ImageState.LOADING:this.dispatchEvent(new ol.source.Image.Event(ol.source.Image.EventType_.IMAGELOADSTART,t));break;case ol.ImageState.LOADED:this.dispatchEvent(new ol.source.Image.Event(ol.source.Image.EventType_.IMAGELOADEND,t));break;case ol.ImageState.ERROR:this.dispatchEvent(new ol.source.Image.Event(ol.source.Image.EventType_.IMAGELOADERROR,t))}},ol.source.Image.defaultImageLoadFunction=function(e,t){e.getImage().src=t},ol.source.Image.Event=function(e,t){ol.events.Event.call(this,e),this.image=t},ol.inherits(ol.source.Image.Event,ol.events.Event),ol.source.Image.EventType_={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"},goog.provide("ol.source.ImageCanvas"),goog.require("ol"),goog.require("ol.ImageCanvas"),goog.require("ol.extent"),goog.require("ol.source.Image"),ol.source.ImageCanvas=function(e){ol.source.Image.call(this,{attributions:e.attributions,logo:e.logo,projection:e.projection,resolutions:e.resolutions,state:e.state}),this.canvasFunction_=e.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.5},ol.inherits(ol.source.ImageCanvas,ol.source.Image),ol.source.ImageCanvas.prototype.getImageInternal=function(e,t,o,r){t=this.findNearestResolution(t);var i=this.canvas_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==t&&i.getPixelRatio()==o&&ol.extent.containsExtent(i.getExtent(),e))return i;e=e.slice(),ol.extent.scaleFromCenter(e,this.ratio_);var n=ol.extent.getWidth(e)/t,a=ol.extent.getHeight(e)/t,l=[n*o,a*o],s=this.canvasFunction_(e,t,o,l,r);return s&&(i=new ol.ImageCanvas(e,t,o,this.getAttributions(),s)),this.canvas_=i,this.renderedRevision_=this.getRevision(),i},goog.provide("ol.source.ImageVector"),goog.require("ol"),goog.require("ol.dom"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.extent"),goog.require("ol.render.canvas.ReplayGroup"),goog.require("ol.renderer.vector"),goog.require("ol.source.ImageCanvas"),goog.require("ol.style.Style"),goog.require("ol.transform"),ol.source.ImageVector=function(e){this.source_=e.source,this.transform_=ol.transform.create(),this.canvasContext_=ol.dom.createCanvasContext2D(),this.canvasSize_=[0,0],this.renderBuffer_=void 0==e.renderBuffer?100:e.renderBuffer,this.replayGroup_=null,ol.source.ImageCanvas.call(this,{attributions:e.attributions,canvasFunction:this.canvasFunctionInternal_.bind(this),logo:e.logo,projection:e.projection,ratio:e.ratio,resolutions:e.resolutions,state:this.source_.getState()}),this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),ol.events.listen(this.source_,ol.events.EventType.CHANGE,this.handleSourceChange_,this)},ol.inherits(ol.source.ImageVector,ol.source.ImageCanvas),ol.source.ImageVector.prototype.canvasFunctionInternal_=function(e,t,o,r,i){var n=new ol.render.canvas.ReplayGroup(ol.renderer.vector.getTolerance(t,o),e,t,this.source_.getOverlaps(),this.renderBuffer_);this.source_.loadFeatures(e,t,i);var a=!1;if(this.source_.forEachFeatureInExtent(e,function(e){a=a||this.renderFeature_(e,t,o,n)},this),n.finish(),a)return null;this.canvasSize_[0]!=r[0]||this.canvasSize_[1]!=r[1]?(this.canvasContext_.canvas.width=r[0],this.canvasContext_.canvas.height=r[1],this.canvasSize_[0]=r[0],this.canvasSize_[1]=r[1]):this.canvasContext_.clearRect(0,0,r[0],r[1]);var l=this.getTransform_(ol.extent.getCenter(e),t,o,r);return n.replay(this.canvasContext_,o,l,0,{}),this.replayGroup_=n,this.canvasContext_.canvas},ol.source.ImageVector.prototype.forEachFeatureAtCoordinate=function(e,t,o,r,i,n){if(this.replayGroup_){var a={};return this.replayGroup_.forEachFeatureAtCoordinate(e,t,0,r,i,function(e){var t=ol.getUid(e).toString();if(!(t in a))return a[t]=!0,n(e)})}},ol.source.ImageVector.prototype.getSource=function(){return this.source_},ol.source.ImageVector.prototype.getStyle=function(){return this.style_},ol.source.ImageVector.prototype.getStyleFunction=function(){return this.styleFunction_},ol.source.ImageVector.prototype.getTransform_=function(e,t,o,r){var i=r[0]/2,n=r[1]/2,a=o/t,l=-a,s=-e[0],p=-e[1];return ol.transform.compose(this.transform_,i,n,a,l,0,s,p)},ol.source.ImageVector.prototype.handleImageChange_=function(e){this.changed()},ol.source.ImageVector.prototype.handleSourceChange_=function(){this.setState(this.source_.getState())},ol.source.ImageVector.prototype.renderFeature_=function(e,t,o,r){var i,n=e.getStyleFunction();if(n?i=n.call(e,t):this.styleFunction_&&(i=this.styleFunction_(e,t)),!i)return!1;var a,l,s=!1;for(Array.isArray(i)||(i=[i]),a=0,l=i.length;a<l;++a)s=ol.renderer.vector.renderFeature(r,e,i[a],ol.renderer.vector.getSquaredTolerance(t,o),this.handleImageChange_,this)||s;return s},ol.source.ImageVector.prototype.setStyle=function(e){this.style_=void 0!==e?e:ol.style.Style.defaultFunction,this.styleFunction_=e?ol.style.Style.createFunction(this.style_):void 0,this.changed()},goog.provide("ol.renderer.webgl.ImageLayer"),goog.require("ol");goog.require("ol.ViewHint");goog.require("ol.dom"),goog.require("ol.extent"),goog.require("ol.functions"),goog.require("ol.renderer.webgl.Layer"),goog.require("ol.source.ImageVector"),goog.require("ol.transform"),goog.require("ol.webgl"),goog.require("ol.webgl.Context"),ol.ENABLE_WEBGL&&(ol.renderer.webgl.ImageLayer=function(e,t){ol.renderer.webgl.Layer.call(this,e,t),this.image_=null,this.hitCanvasContext_=null,this.hitTransformationMatrix_=null},ol.inherits(ol.renderer.webgl.ImageLayer,ol.renderer.webgl.Layer),ol.renderer.webgl.ImageLayer.prototype.createTexture_=function(e){var t=e.getImage(),o=this.mapRenderer.getGL();return ol.webgl.Context.createTexture(o,t,ol.webgl.CLAMP_TO_EDGE,ol.webgl.CLAMP_TO_EDGE)},ol.renderer.webgl.ImageLayer.prototype.forEachFeatureAtCoordinate=function(e,t,o,r,i){var n=this.getLayer(),a=n.getSource(),l=t.viewState.resolution,s=t.viewState.rotation,p=t.skippedFeatureUids;return a.forEachFeatureAtCoordinate(e,l,s,o,p,function(e){return r.call(i,e,n)})},ol.renderer.webgl.ImageLayer.prototype.prepareFrame=function(e,t,o){var r=this.mapRenderer.getGL(),i=e.pixelRatio,n=e.viewState,a=n.center,l=n.resolution,s=n.rotation,p=this.image_,g=this.texture,u=this.getLayer(),c=u.getSource(),y=e.viewHints,h=e.extent;if(void 0!==t.extent&&(h=ol.extent.getIntersection(h,t.extent)),!y[ol.ViewHint.ANIMATING]&&!y[ol.ViewHint.INTERACTING]&&!ol.extent.isEmpty(h)){var d=n.projection;if(!ol.ENABLE_RASTER_REPROJECTION){var f=c.getProjection();f&&(d=f)}var m=c.getImage(h,l,i,d);if(m){var v=this.loadImage(m);if(v&&(p=m,g=this.createTexture_(m),this.texture)){var _=function(e,t){e.isContextLost()||e.deleteTexture(t)}.bind(null,r,this.texture);e.postRenderFunctions.push(_)}}}if(p){var S=this.mapRenderer.getContext().getCanvas();this.updateProjectionMatrix_(S.width,S.height,i,a,l,s,p.getExtent()),this.hitTransformationMatrix_=null;var x=this.texCoordMatrix;ol.transform.reset(x),ol.transform.scale(x,1,-1),ol.transform.translate(x,0,-1),this.image_=p,this.texture=g,this.updateAttributions(e.attributions,p.getAttributions()),this.updateLogos(e,c)}return!!p},ol.renderer.webgl.ImageLayer.prototype.updateProjectionMatrix_=function(e,t,o,r,i,n,a){var l=e*i,s=t*i,p=this.projectionMatrix;ol.transform.reset(p),ol.transform.scale(p,2*o/l,2*o/s),ol.transform.rotate(p,-n),ol.transform.translate(p,a[0]-r[0],a[1]-r[1]),ol.transform.scale(p,(a[2]-a[0])/2,(a[3]-a[1])/2),ol.transform.translate(p,1,1)},ol.renderer.webgl.ImageLayer.prototype.hasFeatureAtCoordinate=function(e,t){var o=this.forEachFeatureAtCoordinate(e,t,0,ol.functions.TRUE,this);return void 0!==o},ol.renderer.webgl.ImageLayer.prototype.forEachLayerAtPixel=function(e,t,o,r){if(this.image_&&this.image_.getImage()){if(this.getLayer().getSource()instanceof ol.source.ImageVector){var i=ol.transform.apply(t.pixelToCoordinateTransform,e.slice()),n=this.forEachFeatureAtCoordinate(i,t,0,ol.functions.TRUE,this);return n?o.call(r,this.getLayer(),null):void 0}var a=[this.image_.getImage().width,this.image_.getImage().height];this.hitTransformationMatrix_||(this.hitTransformationMatrix_=this.getHitTransformationMatrix_(t.size,a));var l=ol.transform.apply(this.hitTransformationMatrix_,e.slice());if(!(l[0]<0||l[0]>a[0]||l[1]<0||l[1]>a[1])){this.hitCanvasContext_||(this.hitCanvasContext_=ol.dom.createCanvasContext2D(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.image_.getImage(),l[0],l[1],1,1,0,0,1,1);var s=this.hitCanvasContext_.getImageData(0,0,1,1).data;return s[3]>0?o.call(r,this.getLayer(),s):void 0}}},ol.renderer.webgl.ImageLayer.prototype.getHitTransformationMatrix_=function(e,t){var o=ol.transform.create();ol.transform.translate(o,-1,-1),ol.transform.scale(o,2/e[0],2/e[1]),ol.transform.translate(o,0,e[1]),ol.transform.scale(o,1,-1);var r=ol.transform.invert(this.projectionMatrix.slice()),i=ol.transform.create();return ol.transform.translate(i,0,t[1]),ol.transform.scale(i,1,-1),ol.transform.scale(i,t[0]/2,t[1]/2),ol.transform.translate(i,1,1),ol.transform.multiply(i,r),ol.transform.multiply(i,o),i}),goog.provide("ol.layer.Image"),goog.require("ol"),goog.require("ol.layer.Layer"),goog.require("ol.renderer.Type"),goog.require("ol.renderer.canvas.ImageLayer"),goog.require("ol.renderer.webgl.ImageLayer"),ol.layer.Image=function(e){var t=e?e:{};ol.layer.Layer.call(this,t)},ol.inherits(ol.layer.Image,ol.layer.Layer),ol.layer.Image.prototype.createRenderer=function(e){var t=null,o=e.getType();return ol.ENABLE_CANVAS&&o===ol.renderer.Type.CANVAS?t=new ol.renderer.canvas.ImageLayer(this):ol.ENABLE_WEBGL&&o===ol.renderer.Type.WEBGL&&(t=new ol.renderer.webgl.ImageLayer(e,this)),t},ol.layer.Image.prototype.getSource,goog.provide("ol.layer.TileProperty"),ol.layer.TileProperty={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"},goog.provide("ol.renderer.canvas.TileLayer"),goog.require("ol"),goog.require("ol.TileRange"),goog.require("ol.TileState"),goog.require("ol.ViewHint"),goog.require("ol.array"),goog.require("ol.dom"),goog.require("ol.extent"),goog.require("ol.renderer.canvas.IntermediateCanvas"),goog.require("ol.transform"),ol.renderer.canvas.TileLayer=function(e){ol.renderer.canvas.IntermediateCanvas.call(this,e),this.context=null===this.context?null:ol.dom.createCanvasContext2D(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.tmpExtent=ol.extent.createEmpty(),this.tmpTileRange_=new ol.TileRange(0,0,0,0),this.imageTransform_=ol.transform.create(),this.zDirection=0},ol.inherits(ol.renderer.canvas.TileLayer,ol.renderer.canvas.IntermediateCanvas),ol.renderer.canvas.TileLayer.prototype.isDrawableTile_=function(e){var t=e.getState(),o=this.getLayer().getUseInterimTilesOnError();return t==ol.TileState.LOADED||t==ol.TileState.EMPTY||t==ol.TileState.ERROR&&!o},ol.renderer.canvas.TileLayer.prototype.prepareFrame=function(e,t){var o=e.pixelRatio,r=e.size,i=e.viewState,n=i.projection,a=i.resolution,l=i.center,s=this.getLayer(),p=s.getSource(),g=p.getRevision(),u=p.getTileGridForProjection(n),c=u.getZForResolution(a,this.zDirection),y=u.getResolution(c),h=Math.round(a/y)||1,d=e.extent;if(void 0!==t.extent&&(d=ol.extent.getIntersection(d,t.extent)),ol.extent.isEmpty(d))return!1;var f=u.getTileRangeForExtentAndResolution(d,y),m=u.getTileRangeExtent(c,f),v=p.getTilePixelRatio(o),_={};_[c]={};var S,x,E,P=this.createLoadedTileFinder(p,n,_),T=this.tmpExtent,R=this.tmpTileRange_,L=!1;for(x=f.minX;x<=f.maxX;++x)for(E=f.minY;E<=f.maxY;++E)if(S=p.getTile(c,x,E,o,n),S.getState()!=ol.TileState.ERROR||this.getLayer().getUseInterimTilesOnError()||S.setState(ol.TileState.LOADED),this.isDrawableTile_(S)||(S=S.getInterimTile()),this.isDrawableTile_(S))S.getState()==ol.TileState.LOADED&&(_[c][S.tileCoord.toString()]=S,L||this.renderedTiles.indexOf(S)!=-1||(L=!0));else{var M=u.forEachTileCoordParentTileRange(S.tileCoord,P,null,R,T);if(!M){var C=u.getTileCoordChildTileRange(S.tileCoord,R,T);C&&P(c+1,C)}}var b=y*o/v*h,I=e.viewHints,A=I[ol.ViewHint.ANIMATING]||I[ol.ViewHint.INTERACTING];if(!(this.renderedResolution&&Date.now()-e.time>16&&A)&&(L||!this.renderedExtent_||!ol.extent.containsExtent(this.renderedExtent_,d)||this.renderedRevision!=g||h!=this.oversampling_||!A&&b!=this.renderedResolution)){var w=this.context;if(w){var O=p.getTilePixelSize(c,o,n),F=Math.round(f.getWidth()*O[0]/h),N=Math.round(f.getHeight()*O[1]/h),G=w.canvas;G.width!=F||G.height!=N?(this.oversampling_=h,G.width=F,G.height=N):(w.clearRect(0,0,F,N),h=this.oversampling_)}this.renderedTiles.length=0;var D=Object.keys(_).map(Number);D.sort(ol.array.numberSafeCompareFunction);var k,j,q,U,B,V,W,X,K,Y,Z;for(B=0,V=D.length;B<V;++B){U=D[B],q=p.getTilePixelSize(U,o,n),k=u.getResolution(U),j=k/y,X=v*p.getGutter(n),K=_[U];for(var H in K)S=K[H],
W=u.getTileCoordExtent(S.getTileCoord(),T),x=(W[0]-m[0])/y*v/h,E=(m[3]-W[3])/y*v/h,Y=q[0]*j/h,Z=q[1]*j/h,this.drawTileImage(S,e,t,x,E,Y,Z,X),this.renderedTiles.push(S)}this.renderedRevision=g,this.renderedResolution=y*o/v*h,this.renderedExtent_=m}var z=this.renderedResolution/a,J=ol.transform.compose(this.imageTransform_,o*r[0]/2,o*r[1]/2,z,z,0,(this.renderedExtent_[0]-l[0])/this.renderedResolution*o,(l[1]-this.renderedExtent_[3])/this.renderedResolution*o);return ol.transform.compose(this.coordinateToCanvasPixelTransform,o*r[0]/2-J[4],o*r[1]/2-J[5],o/a,-o/a,0,-l[0],-l[1]),this.updateUsedTiles(e.usedTiles,p,c,f),this.manageTilePyramid(e,p,u,o,n,d,c,s.getPreload()),this.scheduleExpireCache(e,p),this.updateLogos(e,p),this.renderedTiles.length>0},ol.renderer.canvas.TileLayer.prototype.drawTileImage=function(e,t,o,r,i,n,a,l){this.getLayer().getSource().getOpaque(t.viewState.projection)||this.context.clearRect(r,i,n,a);var s=e.getImage();s&&this.context.drawImage(s,l,l,s.width-2*l,s.height-2*l,r,i,n,a)},ol.renderer.canvas.TileLayer.prototype.getImage=function(){var e=this.context;return e?e.canvas:null},ol.renderer.canvas.TileLayer.prototype.getLayer,ol.renderer.canvas.TileLayer.prototype.getImageTransform=function(){return this.imageTransform_},goog.provide("ol.renderer.webgl.tilelayershader"),goog.require("ol"),goog.require("ol.webgl.Fragment"),goog.require("ol.webgl.Vertex"),ol.ENABLE_WEBGL&&(ol.renderer.webgl.tilelayershader.Fragment=function(){ol.webgl.Fragment.call(this,ol.renderer.webgl.tilelayershader.Fragment.SOURCE)},ol.inherits(ol.renderer.webgl.tilelayershader.Fragment,ol.webgl.Fragment),ol.renderer.webgl.tilelayershader.Fragment.DEBUG_SOURCE="precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n",ol.renderer.webgl.tilelayershader.Fragment.OPTIMIZED_SOURCE="precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}",ol.renderer.webgl.tilelayershader.Fragment.SOURCE=ol.DEBUG_WEBGL?ol.renderer.webgl.tilelayershader.Fragment.DEBUG_SOURCE:ol.renderer.webgl.tilelayershader.Fragment.OPTIMIZED_SOURCE,ol.renderer.webgl.tilelayershader.fragment=new ol.renderer.webgl.tilelayershader.Fragment,ol.renderer.webgl.tilelayershader.Vertex=function(){ol.webgl.Vertex.call(this,ol.renderer.webgl.tilelayershader.Vertex.SOURCE)},ol.inherits(ol.renderer.webgl.tilelayershader.Vertex,ol.webgl.Vertex),ol.renderer.webgl.tilelayershader.Vertex.DEBUG_SOURCE="varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n",ol.renderer.webgl.tilelayershader.Vertex.OPTIMIZED_SOURCE="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}",ol.renderer.webgl.tilelayershader.Vertex.SOURCE=ol.DEBUG_WEBGL?ol.renderer.webgl.tilelayershader.Vertex.DEBUG_SOURCE:ol.renderer.webgl.tilelayershader.Vertex.OPTIMIZED_SOURCE,ol.renderer.webgl.tilelayershader.vertex=new ol.renderer.webgl.tilelayershader.Vertex,ol.renderer.webgl.tilelayershader.Locations=function(e,t){this.u_texture=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_texture":"e"),this.u_tileOffset=e.getUniformLocation(t,ol.DEBUG_WEBGL?"u_tileOffset":"d"),this.a_position=e.getAttribLocation(t,ol.DEBUG_WEBGL?"a_position":"b"),this.a_texCoord=e.getAttribLocation(t,ol.DEBUG_WEBGL?"a_texCoord":"c")}),goog.provide("ol.renderer.webgl.TileLayer"),goog.require("ol"),goog.require("ol.TileState"),goog.require("ol.TileRange"),goog.require("ol.array"),goog.require("ol.extent"),goog.require("ol.math"),goog.require("ol.renderer.webgl.Layer"),goog.require("ol.renderer.webgl.tilelayershader"),goog.require("ol.size"),goog.require("ol.transform"),goog.require("ol.webgl"),goog.require("ol.webgl.Buffer"),ol.ENABLE_WEBGL&&(ol.renderer.webgl.TileLayer=function(e,t){ol.renderer.webgl.Layer.call(this,e,t),this.fragmentShader_=ol.renderer.webgl.tilelayershader.fragment,this.vertexShader_=ol.renderer.webgl.tilelayershader.vertex,this.locations_=null,this.renderArrayBuffer_=new ol.webgl.Buffer([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,this.tmpSize_=[0,0]},ol.inherits(ol.renderer.webgl.TileLayer,ol.renderer.webgl.Layer),ol.renderer.webgl.TileLayer.prototype.disposeInternal=function(){var e=this.mapRenderer.getContext();e.deleteBuffer(this.renderArrayBuffer_),ol.renderer.webgl.Layer.prototype.disposeInternal.call(this)},ol.renderer.webgl.TileLayer.prototype.createLoadedTileFinder=function(e,t,o){var r=this.mapRenderer;return function(i,n){function a(e){var t=r.isTileTextureLoaded(e);return t&&(o[i]||(o[i]={}),o[i][e.tileCoord.toString()]=e),t}return e.forEachLoadedTile(t,i,n,a)}},ol.renderer.webgl.TileLayer.prototype.handleWebGLContextLost=function(){ol.renderer.webgl.Layer.prototype.handleWebGLContextLost.call(this),this.locations_=null},ol.renderer.webgl.TileLayer.prototype.prepareFrame=function(e,t,o){var r,i=this.mapRenderer,n=o.getGL(),a=e.viewState,l=a.projection,s=this.getLayer(),p=s.getSource(),g=p.getTileGridForProjection(l),u=g.getZForResolution(a.resolution),c=g.getResolution(u),y=p.getTilePixelSize(u,e.pixelRatio,l),h=y[0]/ol.size.toSize(g.getTileSize(u),this.tmpSize_)[0],d=c/h,f=p.getTilePixelRatio(h)*p.getGutter(l),m=a.center,v=e.extent,_=g.getTileRangeForExtentAndResolution(v,c);if(this.renderedTileRange_&&this.renderedTileRange_.equals(_)&&this.renderedRevision_==p.getRevision())r=this.renderedFramebufferExtent_;else{var S=_.getSize(),x=Math.max(S[0]*y[0],S[1]*y[1]),E=ol.math.roundUpToPowerOfTwo(x),P=d*E,T=g.getOrigin(u),R=T[0]+_.minX*y[0]*d,L=T[1]+_.minY*y[1]*d;r=[R,L,R+P,L+P],this.bindFramebuffer(e,E),n.viewport(0,0,E,E),n.clearColor(0,0,0,0),n.clear(ol.webgl.COLOR_BUFFER_BIT),n.disable(ol.webgl.BLEND);var M=o.getProgram(this.fragmentShader_,this.vertexShader_);o.useProgram(M),this.locations_||(this.locations_=new ol.renderer.webgl.tilelayershader.Locations(n,M)),o.bindBuffer(ol.webgl.ARRAY_BUFFER,this.renderArrayBuffer_),n.enableVertexAttribArray(this.locations_.a_position),n.vertexAttribPointer(this.locations_.a_position,2,ol.webgl.FLOAT,!1,16,0),n.enableVertexAttribArray(this.locations_.a_texCoord),n.vertexAttribPointer(this.locations_.a_texCoord,2,ol.webgl.FLOAT,!1,16,8),n.uniform1i(this.locations_.u_texture,0);var C={};C[u]={};var b,I,A,w,O,F,N,G,D=this.createLoadedTileFinder(p,l,C),k=s.getUseInterimTilesOnError(),j=!0,q=ol.extent.createEmpty(),U=new ol.TileRange(0,0,0,0);for(F=_.minX;F<=_.maxX;++F)for(N=_.minY;N<=_.maxY;++N)if(w=p.getTile(u,F,N,h,l),void 0===t.extent||(G=g.getTileCoordExtent(w.tileCoord,q),ol.extent.intersects(G,t.extent))){if(O=w.getState(),I=O==ol.TileState.LOADED||O==ol.TileState.EMPTY||O==ol.TileState.ERROR&&!k,I||(w=w.getInterimTile()),O=w.getState(),O==ol.TileState.LOADED){if(i.isTileTextureLoaded(w)){C[u][w.tileCoord.toString()]=w;continue}}else if(O==ol.TileState.EMPTY||O==ol.TileState.ERROR&&!k)continue;j=!1,A=g.forEachTileCoordParentTileRange(w.tileCoord,D,null,U,q),A||(b=g.getTileCoordChildTileRange(w.tileCoord,U,q),b&&D(u+1,b))}var B=Object.keys(C).map(Number);B.sort(ol.array.numberSafeCompareFunction);var V,W,X,K,Y=new Float32Array(4);for(V=0,W=B.length;V<W;++V){K=C[B[V]];for(X in K)w=K[X],G=g.getTileCoordExtent(w.tileCoord,q),Y[0]=2*(G[2]-G[0])/P,Y[1]=2*(G[3]-G[1])/P,Y[2]=2*(G[0]-r[0])/P-1,Y[3]=2*(G[1]-r[1])/P-1,n.uniform4fv(this.locations_.u_tileOffset,Y),i.bindTileTexture(w,y,f*h,ol.webgl.LINEAR,ol.webgl.LINEAR),n.drawArrays(ol.webgl.TRIANGLE_STRIP,0,4)}j?(this.renderedTileRange_=_,this.renderedFramebufferExtent_=r,this.renderedRevision_=p.getRevision()):(this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,e.animate=!0)}this.updateUsedTiles(e.usedTiles,p,u,_);var Z=i.getTileTextureQueue();this.manageTilePyramid(e,p,g,h,l,v,u,s.getPreload(),function(e){e.getState()!=ol.TileState.LOADED||i.isTileTextureLoaded(e)||Z.isKeyQueued(e.getKey())||Z.enqueue([e,g.getTileCoordCenter(e.tileCoord),g.getResolution(e.tileCoord[0]),y,f*h])},this),this.scheduleExpireCache(e,p),this.updateLogos(e,p);var H=this.texCoordMatrix;return ol.transform.reset(H),ol.transform.translate(H,(Math.round(m[0]/c)*c-r[0])/(r[2]-r[0]),(Math.round(m[1]/c)*c-r[1])/(r[3]-r[1])),0!==a.rotation&&ol.transform.rotate(H,a.rotation),ol.transform.scale(H,e.size[0]*a.resolution/(r[2]-r[0]),e.size[1]*a.resolution/(r[3]-r[1])),ol.transform.translate(H,-.5,-.5),!0},ol.renderer.webgl.TileLayer.prototype.forEachLayerAtPixel=function(e,t,o,r){if(this.framebuffer){var i=[e[0]/t.size[0],(t.size[1]-e[1])/t.size[1]],n=ol.transform.apply(this.texCoordMatrix,i.slice()),a=[n[0]*this.framebufferDimension,n[1]*this.framebufferDimension],l=this.mapRenderer.getContext().getGL();l.bindFramebuffer(l.FRAMEBUFFER,this.framebuffer);var s=new Uint8Array(4);return l.readPixels(a[0],a[1],1,1,l.RGBA,l.UNSIGNED_BYTE,s),s[3]>0?o.call(r,this.getLayer(),s):void 0}}),goog.provide("ol.layer.Tile"),goog.require("ol"),goog.require("ol.layer.Layer"),goog.require("ol.layer.TileProperty"),goog.require("ol.obj"),goog.require("ol.renderer.Type"),goog.require("ol.renderer.canvas.TileLayer"),goog.require("ol.renderer.webgl.TileLayer"),ol.layer.Tile=function(e){var t=e?e:{},o=ol.obj.assign({},t);delete o.preload,delete o.useInterimTilesOnError,ol.layer.Layer.call(this,o),this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)},ol.inherits(ol.layer.Tile,ol.layer.Layer),ol.layer.Tile.prototype.createRenderer=function(e){var t=null,o=e.getType();return ol.ENABLE_CANVAS&&o===ol.renderer.Type.CANVAS?t=new ol.renderer.canvas.TileLayer(this):ol.ENABLE_WEBGL&&o===ol.renderer.Type.WEBGL&&(t=new ol.renderer.webgl.TileLayer(e,this)),t},ol.layer.Tile.prototype.getPreload=function(){return this.get(ol.layer.TileProperty.PRELOAD)},ol.layer.Tile.prototype.getSource,ol.layer.Tile.prototype.setPreload=function(e){this.set(ol.layer.TileProperty.PRELOAD,e)},ol.layer.Tile.prototype.getUseInterimTilesOnError=function(){return this.get(ol.layer.TileProperty.USE_INTERIM_TILES_ON_ERROR)},ol.layer.Tile.prototype.setUseInterimTilesOnError=function(e){this.set(ol.layer.TileProperty.USE_INTERIM_TILES_ON_ERROR,e)},goog.provide("ol.layer.VectorTileRenderType"),ol.layer.VectorTileRenderType={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"},goog.provide("ol.renderer.canvas.VectorTileLayer"),goog.require("ol"),goog.require("ol.TileState"),goog.require("ol.dom"),goog.require("ol.extent"),goog.require("ol.proj"),goog.require("ol.proj.Units"),goog.require("ol.layer.VectorTileRenderType"),goog.require("ol.render.ReplayType"),goog.require("ol.render.canvas"),goog.require("ol.render.canvas.ReplayGroup"),goog.require("ol.render.replay"),goog.require("ol.renderer.canvas.TileLayer"),goog.require("ol.renderer.vector"),goog.require("ol.transform"),ol.renderer.canvas.VectorTileLayer=function(e){this.context=null,ol.renderer.canvas.TileLayer.call(this,e),this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=ol.transform.create(),this.zDirection=e.getRenderMode()==ol.layer.VectorTileRenderType.VECTOR?1:0},ol.inherits(ol.renderer.canvas.VectorTileLayer,ol.renderer.canvas.TileLayer),ol.renderer.canvas.VectorTileLayer.IMAGE_REPLAYS={image:ol.render.replay.ORDER,hybrid:[ol.render.ReplayType.POLYGON,ol.render.ReplayType.LINE_STRING]},ol.renderer.canvas.VectorTileLayer.VECTOR_REPLAYS={hybrid:[ol.render.ReplayType.IMAGE,ol.render.ReplayType.TEXT],vector:ol.render.replay.ORDER},ol.renderer.canvas.VectorTileLayer.prototype.prepareFrame=function(e,t){var o=this.getLayer(),r=o.getRevision();if(this.renderedLayerRevision_!=r){this.renderedTiles.length=0;var i=o.getRenderMode();this.context||i==ol.layer.VectorTileRenderType.VECTOR||(this.context=ol.dom.createCanvasContext2D()),this.context&&i==ol.layer.VectorTileRenderType.VECTOR&&(this.context=null)}return this.renderedLayerRevision_=r,ol.renderer.canvas.TileLayer.prototype.prepareFrame.apply(this,arguments)},ol.renderer.canvas.VectorTileLayer.prototype.createReplayGroup_=function(e,t){var o=this.getLayer(),r=t.pixelRatio,i=t.viewState.projection,n=o.getRevision(),a=o.getRenderOrder()||null,l=e.getReplayState();if(l.dirty||l.renderedRevision!=n||l.renderedRenderOrder!=a){for(var s=0,p=e.tileKeys.length;s<p;++s){var g=e.getTile(e.tileKeys[s]);g.replayGroup=null,l.dirty=!1;var u,c,y,h=o.getSource(),d=h.getTileGrid(),f=g.tileCoord,m=g.getProjection(),v=h.getTileGridForProjection(i),_=v.getResolution(e.tileCoord[0]),S=d.getResolution(g.tileCoord[0]),x=v.getTileCoordExtent(e.wrappedTileCoord),E=d.getTileCoordExtent(f),P=ol.extent.getIntersection(x,E);if(m.getUnits()==ol.proj.Units.TILE_PIXELS){var T=y=h.getTilePixelRatio(),R=ol.transform.compose(this.tmpTransform_,0,0,1/S*T,-1/S*T,0,-E[0],-E[3]);u=ol.transform.apply(R,[P[0],P[3]]).concat(ol.transform.apply(R,[P[2],P[1]]))}else y=_,u=P,ol.proj.equivalent(i,m)||(c=!0,g.setProjection(i));l.dirty=!1;var L=new ol.render.canvas.ReplayGroup(0,u,y,h.getOverlaps(),o.getRenderBuffer()),M=ol.renderer.vector.getSquaredTolerance(y,r),C=function(e){var t,r=e.getStyleFunction();if(r?t=r.call(e,_):(r=o.getStyleFunction(),r&&(t=r(e,_))),t){Array.isArray(t)||(t=[t]);var i=this.renderFeature(e,M,t,L);this.dirty_=this.dirty_||i,l.dirty=l.dirty||i}},b=g.getFeatures();a&&a!==l.renderedRenderOrder&&b.sort(a);for(var I,A=0,w=b.length;A<w;++A)I=b[A],c&&I.getGeometry().transform(m,i),C.call(this,I);L.finish(),g.setReplayGroup(e.tileCoord.toString(),L)}l.renderedRevision=n,l.renderedRenderOrder=a}},ol.renderer.canvas.VectorTileLayer.prototype.drawTileImage=function(e,t,o,r,i,n,a,l){var s=e;this.createReplayGroup_(s,t),this.context&&(this.renderTileImage_(s,t,o),ol.renderer.canvas.TileLayer.prototype.drawTileImage.apply(this,arguments))},ol.renderer.canvas.VectorTileLayer.prototype.forEachFeatureAtCoordinate=function(e,t,o,r,i){var n=t.viewState.resolution,a=t.viewState.rotation;o=void 0==o?0:o;var l,s,p,g,u,c,y,h,d,f,m,v,_=this.getLayer(),S={},x=this.renderedTiles,E=_.getSource(),P=E.getTileGridForProjection(t.viewState.projection),T=E.getTileGrid();for(g=0,u=x.length;g<u;++g)if(h=x[g],d=h.tileCoord,f=P.getTileCoordExtent(d,this.tmpExtent),l=ol.extent.buffer(f,o*n,l),ol.extent.containsCoordinate(l,e))for(var R=0,L=h.tileKeys.length;R<L;++R){var M=h.getTile(h.tileKeys[R]);if(M.getProjection().getUnits()===ol.proj.Units.TILE_PIXELS){var C=M.tileCoord,b=T.getTileCoordExtent(C,this.tmpExtent);c=ol.extent.getTopLeft(b),m=E.getTilePixelRatio(),v=T.getResolution(C[0])/m,p=[(e[0]-c[0])/v,(c[1]-e[1])/v],n=m}else p=e;y=M.getReplayGroup(h.tileCoord),s=s||y.forEachFeatureAtCoordinate(p,n,a,o,{},function(e){var t=ol.getUid(e).toString();if(!(t in S))return S[t]=!0,r.call(i,e,_)})}return s},ol.renderer.canvas.VectorTileLayer.prototype.getReplayTransform_=function(e,t){if(e.getProjection().getUnits()==ol.proj.Units.TILE_PIXELS){var o=this.getLayer(),r=o.getSource(),i=r.getTileGrid(),n=e.tileCoord,a=i.getResolution(n[0])/r.getTilePixelRatio(),l=t.viewState,s=t.pixelRatio,p=l.resolution/s,g=i.getTileCoordExtent(n,this.tmpExtent),u=l.center,c=ol.extent.getTopLeft(g),y=t.size,h=Math.round(s*y[0]/2),d=Math.round(s*y[1]/2);return ol.transform.compose(this.tmpTransform_,h,d,a/p,a/p,l.rotation,(c[0]-u[0])/a,(u[1]-c[1])/a)}return this.getTransform(t,0)},ol.renderer.canvas.VectorTileLayer.prototype.handleStyleImageChange_=function(e){this.renderIfReadyAndVisible()},ol.renderer.canvas.VectorTileLayer.prototype.postCompose=function(e,t,o){var r=this.getLayer(),i=r.getSource(),n=r.getRenderMode(),a=ol.renderer.canvas.VectorTileLayer.VECTOR_REPLAYS[n];if(a)for(var l=t.pixelRatio,s=t.viewState.rotation,p=t.size,g=Math.round(l*p[0]/2),u=Math.round(l*p[1]/2),c=this.renderedTiles,y=r.getSource().getTilePixelRatio(),h=i.getTileGrid(),d=i.getTileGridForProjection(t.viewState.projection),f=[],m=[],v=c.length-1;v>=0;--v){var _=c[v];if(_.getState()!=ol.TileState.ABORT)for(var S=_.tileCoord,x=d.getTileCoordExtent(S)[0]-d.getTileCoordExtent(_.wrappedTileCoord)[0],E=0,P=_.tileKeys.length;E<P;++E){var T=_.getTile(_.tileKeys[E]),R=T.tileCoord[0],L=h.getResolution(R),M=this.getReplayTransform_(T,t);ol.transform.translate(M,x*y/L,0);var C=T.getReplayGroup(S.toString()),b=C.getClipCoords(M);e.save(),e.globalAlpha=o.opacity,ol.render.canvas.rotateAtOffset(e,-s,g,u);for(var I=0,A=f.length;I<A;++I){var w=f[I];R<m[I]&&(e.beginPath(),e.moveTo(b[0],b[1]),e.lineTo(b[2],b[3]),e.lineTo(b[4],b[5]),e.lineTo(b[6],b[7]),e.moveTo(w[6],w[7]),e.lineTo(w[4],w[5]),e.lineTo(w[2],w[3]),e.lineTo(w[0],w[1]),e.clip())}C.replay(e,l,M,s,{},a),e.restore(),f.push(b),m.push(R)}}ol.renderer.canvas.TileLayer.prototype.postCompose.apply(this,arguments)},ol.renderer.canvas.VectorTileLayer.prototype.renderFeature=function(e,t,o,r){if(!o)return!1;var i=!1;if(Array.isArray(o))for(var n=0,a=o.length;n<a;++n)i=ol.renderer.vector.renderFeature(r,e,o[n],t,this.handleStyleImageChange_,this)||i;else i=ol.renderer.vector.renderFeature(r,e,o,t,this.handleStyleImageChange_,this)||i;return i},ol.renderer.canvas.VectorTileLayer.prototype.renderTileImage_=function(e,t,o){var r=this.getLayer(),i=e.getReplayState(),n=r.getRevision(),a=ol.renderer.canvas.VectorTileLayer.IMAGE_REPLAYS[r.getRenderMode()];if(a&&i.renderedTileRevision!==n){i.renderedTileRevision=n;var l=e.wrappedTileCoord,s=l[0],p=t.pixelRatio,g=r.getSource(),u=g.getTileGrid(),c=g.getTileGridForProjection(t.viewState.projection),y=c.getResolution(s),h=g.getTilePixelRatio(),d=e.getContext(),f=g.getTilePixelSize(s,p,t.viewState.projection);d.canvas.width=f[0],d.canvas.height=f[1];for(var m=c.getTileCoordExtent(l),v=0,_=e.tileKeys.length;v<_;++v){var S=e.getTile(e.tileKeys[v]),x=S.tileCoord,E=p/y,P=ol.transform.reset(this.tmpTransform_);if(S.getProjection().getUnits()==ol.proj.Units.TILE_PIXELS){var T=u.getTileCoordExtent(x,this.tmpExtent),R=u.getResolution(x[0]),L=p/h*R/y;ol.transform.scale(P,L,L);var M=(T[0]-m[0])/R*h,C=(m[3]-T[3])/R*h;ol.transform.translate(P,Math.round(M),Math.round(C))}else ol.transform.scale(P,E,-E),ol.transform.translate(P,-m[0],-m[3]);var b=S.getReplayGroup(e.tileCoord.toString());b.replay(d,p,P,0,{},a)}}},goog.provide("ol.layer.VectorTile"),goog.require("ol"),goog.require("ol.asserts"),goog.require("ol.layer.TileProperty"),goog.require("ol.layer.Vector"),goog.require("ol.layer.VectorTileRenderType"),goog.require("ol.obj"),goog.require("ol.renderer.Type"),goog.require("ol.renderer.canvas.VectorTileLayer"),ol.layer.VectorTile=function(e){var t=e?e:{},o=ol.obj.assign({},t);delete o.preload,delete o.useInterimTilesOnError,ol.layer.Vector.call(this,o),this.setPreload(t.preload?t.preload:0),this.setUseInterimTilesOnError(!t.useInterimTilesOnError||t.useInterimTilesOnError),ol.asserts.assert(void 0==t.renderMode||t.renderMode==ol.layer.VectorTileRenderType.IMAGE||t.renderMode==ol.layer.VectorTileRenderType.HYBRID||t.renderMode==ol.layer.VectorTileRenderType.VECTOR,28),this.renderMode_=t.renderMode||ol.layer.VectorTileRenderType.HYBRID},ol.inherits(ol.layer.VectorTile,ol.layer.Vector),ol.layer.VectorTile.prototype.createRenderer=function(e){var t=null,o=e.getType();return ol.ENABLE_CANVAS&&o===ol.renderer.Type.CANVAS&&(t=new ol.renderer.canvas.VectorTileLayer(this)),t},ol.layer.VectorTile.prototype.getPreload=function(){return this.get(ol.layer.TileProperty.PRELOAD)},ol.layer.VectorTile.prototype.getRenderMode=function(){return this.renderMode_},ol.layer.VectorTile.prototype.getUseInterimTilesOnError=function(){return this.get(ol.layer.TileProperty.USE_INTERIM_TILES_ON_ERROR)},ol.layer.VectorTile.prototype.setPreload=function(e){this.set(ol.layer.TileProperty.PRELOAD,e)},ol.layer.VectorTile.prototype.setUseInterimTilesOnError=function(e){this.set(ol.layer.TileProperty.USE_INTERIM_TILES_ON_ERROR,e)},goog.provide("ol.net"),goog.require("ol"),ol.net.jsonp=function(e,t,o,r){function i(){delete window[a],n.parentNode.removeChild(n)}var n=document.createElement("script"),a="olc_"+ol.getUid(t);n.async=!0,n.src=e+(e.indexOf("?")==-1?"?":"&")+(r||"callback")+"="+a;var l=setTimeout(function(){i(),o&&o()},1e4);window[a]=function(e){clearTimeout(l),i(),t(e)},document.getElementsByTagName("head")[0].appendChild(n)},goog.provide("ol.proj.common"),goog.require("ol.proj"),ol.proj.common.add=ol.proj.addCommon,goog.provide("ol.render"),goog.require("ol.has"),goog.require("ol.transform"),goog.require("ol.render.canvas.Immediate"),ol.render.toContext=function(e,t){var o=e.canvas,r=t?t:{},i=r.pixelRatio||ol.has.DEVICE_PIXEL_RATIO,n=r.size;n&&(o.width=n[0]*i,o.height=n[1]*i,o.style.width=n[0]+"px",o.style.height=n[1]+"px");var a=[0,0,o.width,o.height],l=ol.transform.scale(ol.transform.create(),i,i);return new ol.render.canvas.Immediate(e,i,a,l,0)},goog.provide("ol.reproj.Tile"),goog.require("ol"),goog.require("ol.Tile"),goog.require("ol.TileState"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.extent"),goog.require("ol.math"),goog.require("ol.reproj"),goog.require("ol.reproj.Triangulation"),ol.reproj.Tile=function(e,t,o,r,i,n,a,l,s,p,g){ol.Tile.call(this,i,ol.TileState.IDLE),this.renderEdges_=void 0!==g&&g,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=n?n:i,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var u=r.getTileCoordExtent(this.wrappedTileCoord_),c=this.targetTileGrid_.getExtent(),y=this.sourceTileGrid_.getExtent(),h=c?ol.extent.getIntersection(u,c):u;if(0===ol.extent.getArea(h))return void(this.state=ol.TileState.EMPTY);var d=e.getExtent();d&&(y=y?ol.extent.getIntersection(y,d):d);var f=r.getResolution(this.wrappedTileCoord_[0]),m=ol.extent.getCenter(h),v=ol.reproj.calculateSourceResolution(e,o,m,f);if(!isFinite(v)||v<=0)return void(this.state=ol.TileState.EMPTY);var _=void 0!==p?p:ol.DEFAULT_RASTER_REPROJECTION_ERROR_THRESHOLD;if(this.triangulation_=new ol.reproj.Triangulation(e,o,h,y,v*_),0===this.triangulation_.getTriangles().length)return void(this.state=ol.TileState.EMPTY);this.sourceZ_=t.getZForResolution(v);var S=this.triangulation_.calculateSourceExtent();if(y&&(e.canWrapX()?(S[1]=ol.math.clamp(S[1],y[1],y[3]),S[3]=ol.math.clamp(S[3],y[1],y[3])):S=ol.extent.getIntersection(S,y)),ol.extent.getArea(S)){for(var x=t.getTileRangeForExtentAndZ(S,this.sourceZ_),E=x.minX;E<=x.maxX;E++)for(var P=x.minY;P<=x.maxY;P++){var T=s(this.sourceZ_,E,P,a);T&&this.sourceTiles_.push(T)}0===this.sourceTiles_.length&&(this.state=ol.TileState.EMPTY)}else this.state=ol.TileState.EMPTY},ol.inherits(ol.reproj.Tile,ol.Tile),ol.reproj.Tile.prototype.disposeInternal=function(){this.state==ol.TileState.LOADING&&this.unlistenSources_(),ol.Tile.prototype.disposeInternal.call(this)},ol.reproj.Tile.prototype.getImage=function(){return this.canvas_},ol.reproj.Tile.prototype.reproject_=function(){var e=[];if(this.sourceTiles_.forEach(function(t,o,r){t&&t.getState()==ol.TileState.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})},this),this.sourceTiles_.length=0,0===e.length)this.state=ol.TileState.ERROR;else{var t=this.wrappedTileCoord_[0],o=this.targetTileGrid_.getTileSize(t),r="number"==typeof o?o:o[0],i="number"==typeof o?o:o[1],n=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=ol.reproj.render(r,i,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),n,l,this.triangulation_,e,this.gutter_,this.renderEdges_),this.state=ol.TileState.LOADED}this.changed()},ol.reproj.Tile.prototype.load=function(){if(this.state==ol.TileState.IDLE){this.state=ol.TileState.LOADING,this.changed();var e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(t,o,r){var i=t.getState();if(i==ol.TileState.IDLE||i==ol.TileState.LOADING){e++;var n;n=ol.events.listen(t,ol.events.EventType.CHANGE,function(o){var r=t.getState();r!=ol.TileState.LOADED&&r!=ol.TileState.ERROR&&r!=ol.TileState.EMPTY||(ol.events.unlistenByKey(n),e--,0===e&&(this.unlistenSources_(),this.reproject_()))},this),this.sourcesListenerKeys_.push(n)}},this),this.sourceTiles_.forEach(function(e,t,o){var r=e.getState();r==ol.TileState.IDLE&&e.load()}),0===e&&setTimeout(this.reproject_.bind(this),0)}},ol.reproj.Tile.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(ol.events.unlistenByKey),this.sourcesListenerKeys_=null},goog.provide("ol.TileUrlFunction"),goog.require("ol.asserts"),goog.require("ol.math"),goog.require("ol.tilecoord"),ol.TileUrlFunction.createFromTemplate=function(e,t){var o=/\{z\}/g,r=/\{x\}/g,i=/\{y\}/g,n=/\{-y\}/g;return function(a,l,s){return a?e.replace(o,a[0].toString()).replace(r,a[1].toString()).replace(i,function(){var e=-a[2]-1;return e.toString()}).replace(n,function(){var e=a[0],o=t.getFullTileRange(e);ol.asserts.assert(o,55);var r=o.getHeight()+a[2];return r.toString()}):void 0}},ol.TileUrlFunction.createFromTemplates=function(e,t){for(var o=e.length,r=new Array(o),i=0;i<o;++i)r[i]=ol.TileUrlFunction.createFromTemplate(e[i],t);return ol.TileUrlFunction.createFromTileUrlFunctions(r)},ol.TileUrlFunction.createFromTileUrlFunctions=function(e){return 1===e.length?e[0]:function(t,o,r){if(t){var i=ol.tilecoord.hash(t),n=ol.math.modulo(i,e.length);return e[n](t,o,r)}}},ol.TileUrlFunction.nullTileUrlFunction=function(e,t,o){},ol.TileUrlFunction.expandUrl=function(e){var t=[],o=/\{([a-z])-([a-z])\}/.exec(e);if(o){var r,i=o[1].charCodeAt(0),n=o[2].charCodeAt(0);for(r=i;r<=n;++r)t.push(e.replace(o[0],String.fromCharCode(r)));return t}if(o=o=/\{(\d+)-(\d+)\}/.exec(e)){for(var a=parseInt(o[2],10),l=parseInt(o[1],10);l<=a;l++)t.push(e.replace(o[0],l.toString()));return t}return t.push(e),t},goog.provide("ol.TileCache"),goog.require("ol"),goog.require("ol.structs.LRUCache"),ol.TileCache=function(e){ol.structs.LRUCache.call(this),this.highWaterMark=void 0!==e?e:2048},ol.inherits(ol.TileCache,ol.structs.LRUCache),ol.TileCache.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},ol.TileCache.prototype.expireCache=function(e){for(var t,o;this.canExpireCache()&&(t=this.peekLast(),o=t.tileCoord[0].toString(),!(o in e&&e[o].contains(t.tileCoord)));)this.pop().dispose()},goog.provide("ol.source.Tile"),goog.require("ol"),goog.require("ol.TileCache"),goog.require("ol.TileState"),goog.require("ol.events.Event"),goog.require("ol.proj"),goog.require("ol.size"),goog.require("ol.source.Source"),goog.require("ol.tilecoord"),goog.require("ol.tilegrid"),ol.source.Tile=function(e){ol.source.Source.call(this,{attributions:e.attributions,extent:e.extent,logo:e.logo,projection:e.projection,state:e.state,wrapX:e.wrapX}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileCache=new ol.TileCache(e.cacheSize),this.tmpSize=[0,0],this.key_=""},ol.inherits(ol.source.Tile,ol.source.Source),ol.source.Tile.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},ol.source.Tile.prototype.expireCache=function(e,t){var o=this.getTileCacheForProjection(e);o&&o.expireCache(t)},ol.source.Tile.prototype.forEachLoadedTile=function(e,t,o,r){var i=this.getTileCacheForProjection(e);if(!i)return!1;for(var n,a,l,s=!0,p=o.minX;p<=o.maxX;++p)for(var g=o.minY;g<=o.maxY;++g)a=this.getKeyZXY(t,p,g),l=!1,i.containsKey(a)&&(n=i.get(a),l=n.getState()===ol.TileState.LOADED,l&&(l=r(n)!==!1)),l||(s=!1);return s},ol.source.Tile.prototype.getGutter=function(e){return 0},ol.source.Tile.prototype.getKey=function(){return this.key_},ol.source.Tile.prototype.setKey=function(e){this.key_!==e&&(this.key_=e,this.changed())},ol.source.Tile.prototype.getKeyZXY=ol.tilecoord.getKeyZXY,ol.source.Tile.prototype.getOpaque=function(e){return this.opaque_},ol.source.Tile.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},ol.source.Tile.prototype.getTile=function(e,t,o,r,i){},ol.source.Tile.prototype.getTileGrid=function(){return this.tileGrid},ol.source.Tile.prototype.getTileGridForProjection=function(e){return this.tileGrid?this.tileGrid:ol.tilegrid.getForProjection(e)},ol.source.Tile.prototype.getTileCacheForProjection=function(e){var t=this.getProjection();return t&&!ol.proj.equivalent(t,e)?null:this.tileCache},ol.source.Tile.prototype.getTilePixelRatio=function(e){return this.tilePixelRatio_},ol.source.Tile.prototype.getTilePixelSize=function(e,t,o){var r=this.getTileGridForProjection(o),i=this.getTilePixelRatio(t),n=ol.size.toSize(r.getTileSize(e),this.tmpSize);return 1==i?n:ol.size.scale(n,i,this.tmpSize)},ol.source.Tile.prototype.getTileCoordForTileUrlFunction=function(e,t){var o=void 0!==t?t:this.getProjection(),r=this.getTileGridForProjection(o);return this.getWrapX()&&o.isGlobal()&&(e=ol.tilegrid.wrapX(r,e,o)),ol.tilecoord.withinExtentAndZ(e,r)?e:null},ol.source.Tile.prototype.refresh=function(){this.tileCache.clear(),this.changed()},ol.source.Tile.prototype.useTile=ol.nullFunction,ol.source.Tile.Event=function(e,t){ol.events.Event.call(this,e),this.tile=t},ol.inherits(ol.source.Tile.Event,ol.events.Event),goog.provide("ol.source.TileEventType"),ol.source.TileEventType={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},goog.provide("ol.source.UrlTile");goog.require("ol");goog.require("ol.TileState"),goog.require("ol.TileUrlFunction"),goog.require("ol.source.Tile"),goog.require("ol.source.TileEventType"),ol.source.UrlTile=function(e){ol.source.Tile.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,extent:e.extent,logo:e.logo,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX}),this.tileLoadFunction=e.tileLoadFunction,this.tileUrlFunction=this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):ol.TileUrlFunction.nullTileUrlFunction,this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),e.tileUrlFunction&&this.setTileUrlFunction(e.tileUrlFunction)},ol.inherits(ol.source.UrlTile,ol.source.Tile),ol.source.UrlTile.prototype.fixedTileUrlFunction,ol.source.UrlTile.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},ol.source.UrlTile.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},ol.source.UrlTile.prototype.getUrls=function(){return this.urls},ol.source.UrlTile.prototype.handleTileChange=function(e){var t=e.target;switch(t.getState()){case ol.TileState.LOADING:this.dispatchEvent(new ol.source.Tile.Event(ol.source.TileEventType.TILELOADSTART,t));break;case ol.TileState.LOADED:this.dispatchEvent(new ol.source.Tile.Event(ol.source.TileEventType.TILELOADEND,t));break;case ol.TileState.ERROR:this.dispatchEvent(new ol.source.Tile.Event(ol.source.TileEventType.TILELOADERROR,t))}},ol.source.UrlTile.prototype.setTileLoadFunction=function(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()},ol.source.UrlTile.prototype.setTileUrlFunction=function(e,t){this.tileUrlFunction=e,"undefined"!=typeof t?this.setKey(t):this.changed()},ol.source.UrlTile.prototype.setUrl=function(e){var t=this.urls=ol.TileUrlFunction.expandUrl(e);this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):ol.TileUrlFunction.createFromTemplates(t,this.tileGrid),e)},ol.source.UrlTile.prototype.setUrls=function(e){this.urls=e;var t=e.join("\n");this.setTileUrlFunction(this.fixedTileUrlFunction?this.fixedTileUrlFunction.bind(this):ol.TileUrlFunction.createFromTemplates(e,this.tileGrid),t)},ol.source.UrlTile.prototype.useTile=function(e,t,o){var r=this.getKeyZXY(e,t,o);this.tileCache.containsKey(r)&&this.tileCache.get(r)},goog.provide("ol.source.TileImage"),goog.require("ol"),goog.require("ol.ImageTile"),goog.require("ol.TileCache"),goog.require("ol.TileState"),goog.require("ol.events"),goog.require("ol.events.EventType"),
goog.require("ol.proj"),goog.require("ol.reproj.Tile"),goog.require("ol.source.UrlTile"),goog.require("ol.tilegrid"),ol.source.TileImage=function(e){ol.source.UrlTile.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,extent:e.extent,logo:e.logo,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:ol.source.TileImage.defaultTileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:ol.ImageTile,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1},ol.inherits(ol.source.TileImage,ol.source.UrlTile),ol.source.TileImage.prototype.canExpireCache=function(){if(!ol.ENABLE_RASTER_REPROJECTION)return ol.source.UrlTile.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1},ol.source.TileImage.prototype.expireCache=function(e,t){if(!ol.ENABLE_RASTER_REPROJECTION)return void ol.source.UrlTile.prototype.expireCache.call(this,e,t);var o=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==o?t:{});for(var r in this.tileCacheForProjection){var i=this.tileCacheForProjection[r];i.expireCache(i==o?t:{})}},ol.source.TileImage.prototype.getGutter=function(e){return ol.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&e&&!ol.proj.equivalent(this.getProjection(),e)?0:this.getGutterInternal()},ol.source.TileImage.prototype.getGutterInternal=function(){return 0},ol.source.TileImage.prototype.getOpaque=function(e){return!(ol.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&e&&!ol.proj.equivalent(this.getProjection(),e))&&ol.source.UrlTile.prototype.getOpaque.call(this,e)},ol.source.TileImage.prototype.getTileGridForProjection=function(e){if(!ol.ENABLE_RASTER_REPROJECTION)return ol.source.UrlTile.prototype.getTileGridForProjection.call(this,e);var t=this.getProjection();if(!this.tileGrid||t&&!ol.proj.equivalent(t,e)){var o=ol.getUid(e).toString();return o in this.tileGridForProjection||(this.tileGridForProjection[o]=ol.tilegrid.getForProjection(e)),this.tileGridForProjection[o]}return this.tileGrid},ol.source.TileImage.prototype.getTileCacheForProjection=function(e){if(!ol.ENABLE_RASTER_REPROJECTION)return ol.source.UrlTile.prototype.getTileCacheForProjection.call(this,e);var t=this.getProjection();if(!t||ol.proj.equivalent(t,e))return this.tileCache;var o=ol.getUid(e).toString();return o in this.tileCacheForProjection||(this.tileCacheForProjection[o]=new ol.TileCache(this.tileCache.highWaterMark)),this.tileCacheForProjection[o]},ol.source.TileImage.prototype.createTile_=function(e,t,o,r,i,n){var a=[e,t,o],l=this.getTileCoordForTileUrlFunction(a,i),s=l?this.tileUrlFunction(l,r,i):void 0,p=new this.tileClass(a,void 0!==s?ol.TileState.IDLE:ol.TileState.EMPTY,void 0!==s?s:"",this.crossOrigin,this.tileLoadFunction);return p.key=n,ol.events.listen(p,ol.events.EventType.CHANGE,this.handleTileChange,this),p},ol.source.TileImage.prototype.getTile=function(e,t,o,r,i){if(ol.ENABLE_RASTER_REPROJECTION&&this.getProjection()&&i&&!ol.proj.equivalent(this.getProjection(),i)){var n,a=this.getTileCacheForProjection(i),l=[e,t,o],s=this.getKeyZXY.apply(this,l);a.containsKey(s)&&(n=a.get(s));var p=this.getKey();if(n&&n.key==p)return n;var g=this.getProjection(),u=this.getTileGridForProjection(g),c=this.getTileGridForProjection(i),y=this.getTileCoordForTileUrlFunction(l,i),h=new ol.reproj.Tile(g,u,i,c,l,y,this.getTilePixelRatio(r),this.getGutterInternal(),function(e,t,o,r){return this.getTileInternal(e,t,o,r,g)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return h.key=p,n?(h.interimTile=n,a.replace(s,h)):a.set(s,h),h}return this.getTileInternal(e,t,o,r,i)},ol.source.TileImage.prototype.getTileInternal=function(e,t,o,r,i){var n=null,a=this.getKeyZXY(e,t,o),l=this.getKey();if(this.tileCache.containsKey(a)){if(n=this.tileCache.get(a),n.key!=l){var s=n;n=this.createTile_(e,t,o,r,i,l),s.getState()==ol.TileState.IDLE?n.interimTile=s.interimTile:n.interimTile=s,n.refreshInterimChain(),this.tileCache.replace(a,n)}}else n=this.createTile_(e,t,o,r,i,l),this.tileCache.set(a,n);return n},ol.source.TileImage.prototype.setRenderReprojectionEdges=function(e){if(ol.ENABLE_RASTER_REPROJECTION&&this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(var t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}},ol.source.TileImage.prototype.setTileGridForProjection=function(e,t){if(ol.ENABLE_RASTER_REPROJECTION){var o=ol.proj.get(e);if(o){var r=ol.getUid(o).toString();r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}},ol.source.TileImage.defaultTileLoadFunction=function(e,t){e.getImage().src=t},goog.provide("ol.source.BingMaps"),goog.require("ol"),goog.require("ol.Attribution"),goog.require("ol.TileUrlFunction"),goog.require("ol.extent"),goog.require("ol.net"),goog.require("ol.proj"),goog.require("ol.source.State"),goog.require("ol.source.TileImage"),goog.require("ol.tilecoord"),goog.require("ol.tilegrid"),ol.source.BingMaps=function(e){this.hidpi_=void 0!==e.hidpi&&e.hidpi,ol.source.TileImage.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:ol.proj.get("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:ol.source.State.LOADING,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:this.hidpi_?2:1,wrapX:void 0===e.wrapX||e.wrapX}),this.culture_=void 0!==e.culture?e.culture:"en-us",this.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,this.apiKey_=e.key,this.imagerySet_=e.imagerySet;var t="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_;ol.net.jsonp(t,this.handleImageryMetadataResponse.bind(this),void 0,"jsonp")},ol.inherits(ol.source.BingMaps,ol.source.TileImage),ol.source.BingMaps.TOS_ATTRIBUTION=new ol.Attribution({html:'<a class="ol-attribution-bing-tos" href="http://www.microsoft.com/maps/product/terms.html">Terms of Use</a>'}),ol.source.BingMaps.prototype.getApiKey=function(){return this.apiKey_},ol.source.BingMaps.prototype.getImagerySet=function(){return this.imagerySet_},ol.source.BingMaps.prototype.handleImageryMetadataResponse=function(e){if(200!=e.statusCode||"OK"!=e.statusDescription||"ValidCredentials"!=e.authenticationResultCode||1!=e.resourceSets.length||1!=e.resourceSets[0].resources.length)return void this.setState(ol.source.State.ERROR);var t=e.brandLogoUri;t.indexOf("https")==-1&&(t=t.replace("http","https"));var o=e.resourceSets[0].resources[0],r=this.maxZoom_==-1?o.zoomMax:this.maxZoom_,i=this.getProjection(),n=ol.tilegrid.extentFromProjection(i),a=o.imageWidth==o.imageHeight?o.imageWidth:[o.imageWidth,o.imageHeight],l=ol.tilegrid.createXYZ({extent:n,minZoom:o.zoomMin,maxZoom:r,tileSize:a/this.getTilePixelRatio()});this.tileGrid=l;var s=this.culture_,p=this.hidpi_;if(this.tileUrlFunction=ol.TileUrlFunction.createFromTileUrlFunctions(o.imageUrlSubdomains.map(function(e){var t=[0,0,0],r=o.imageUrl.replace("{subdomain}",e).replace("{culture}",s);return function(e,o,i){if(e){ol.tilecoord.createOrUpdate(e[0],e[1],-e[2]-1,t);var n=r;return p&&(n+="&dpi=d1&device=mobile"),n.replace("{quadkey}",ol.tilecoord.quadKey(t))}}})),o.imageryProviders){var g=ol.proj.getTransformFromProjections(ol.proj.get("EPSG:4326"),this.getProjection()),u=o.imageryProviders.map(function(e){var t=e.attribution,o={};return e.coverageAreas.forEach(function(e){var t,i,n,a=e.zoomMin,s=Math.min(e.zoomMax,r),p=e.bbox,u=[p[1],p[0],p[3],p[2]],c=ol.extent.applyTransform(u,g);for(i=a;i<=s;++i)n=i.toString(),t=l.getTileRangeForExtentAndZ(c,i),n in o?o[n].push(t):o[n]=[t]}),new ol.Attribution({html:t,tileRanges:o})});u.push(ol.source.BingMaps.TOS_ATTRIBUTION),this.setAttributions(u)}this.setLogo(t),this.setState(ol.source.State.READY)},goog.provide("ol.source.XYZ"),goog.require("ol"),goog.require("ol.source.TileImage"),goog.require("ol.tilegrid"),ol.source.XYZ=function(e){var t=e||{},o=void 0!==t.projection?t.projection:"EPSG:3857",r=void 0!==t.tileGrid?t.tileGrid:ol.tilegrid.createXYZ({extent:ol.tilegrid.extentFromProjection(o),maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});ol.source.TileImage.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,opaque:t.opaque,projection:o,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX})},ol.inherits(ol.source.XYZ,ol.source.TileImage),goog.provide("ol.source.CartoDB"),goog.require("ol"),goog.require("ol.obj"),goog.require("ol.source.State"),goog.require("ol.source.XYZ"),ol.source.CartoDB=function(e){this.account_=e.account,this.mapId_=e.map||"",this.config_=e.config||{},this.templateCache_={},ol.source.XYZ.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,logo:e.logo,maxZoom:void 0!==e.maxZoom?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,state:ol.source.State.LOADING,wrapX:e.wrapX}),this.initializeMap_()},ol.inherits(ol.source.CartoDB,ol.source.XYZ),ol.source.CartoDB.prototype.getConfig=function(){return this.config_},ol.source.CartoDB.prototype.updateConfig=function(e){ol.obj.assign(this.config_,e),this.initializeMap_()},ol.source.CartoDB.prototype.setConfig=function(e){this.config_=e||{},this.initializeMap_()},ol.source.CartoDB.prototype.initializeMap_=function(){var e=JSON.stringify(this.config_);if(this.templateCache_[e])return void this.applyTemplate_(this.templateCache_[e]);var t="https://"+this.account_+".cartodb.com/api/v1/map";this.mapId_&&(t+="/named/"+this.mapId_);var o=new XMLHttpRequest;o.addEventListener("load",this.handleInitResponse_.bind(this,e)),o.addEventListener("error",this.handleInitError_.bind(this)),o.open("POST",t),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(this.config_))},ol.source.CartoDB.prototype.handleInitResponse_=function(e,t){var o=t.target;if(!o.status||o.status>=200&&o.status<300){var r;try{r=JSON.parse(o.responseText)}catch(e){return void this.setState(ol.source.State.ERROR)}this.applyTemplate_(r),this.templateCache_[e]=r,this.setState(ol.source.State.READY)}else this.setState(ol.source.State.ERROR)},ol.source.CartoDB.prototype.handleInitError_=function(e){this.setState(ol.source.State.ERROR)},ol.source.CartoDB.prototype.applyTemplate_=function(e){var t="https://"+e.cdn_url.https+"/"+this.account_+"/api/v1/map/"+e.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(t)},goog.provide("ol.source.Cluster"),goog.require("ol"),goog.require("ol.asserts"),goog.require("ol.Feature"),goog.require("ol.coordinate"),goog.require("ol.events.EventType"),goog.require("ol.extent"),goog.require("ol.geom.Point"),goog.require("ol.source.Vector"),ol.source.Cluster=function(e){ol.source.Vector.call(this,{attributions:e.attributions,extent:e.extent,logo:e.logo,projection:e.projection,wrapX:e.wrapX}),this.resolution=void 0,this.distance=void 0!==e.distance?e.distance:20,this.features=[],this.geometryFunction=e.geometryFunction||function(e){var t=e.getGeometry();return ol.asserts.assert(t instanceof ol.geom.Point,10),t},this.source=e.source,this.source.on(ol.events.EventType.CHANGE,ol.source.Cluster.prototype.refresh,this)},ol.inherits(ol.source.Cluster,ol.source.Vector),ol.source.Cluster.prototype.getDistance=function(){return this.distance},ol.source.Cluster.prototype.getSource=function(){return this.source},ol.source.Cluster.prototype.loadFeatures=function(e,t,o){this.source.loadFeatures(e,t,o),t!==this.resolution&&(this.clear(),this.resolution=t,this.cluster(),this.addFeatures(this.features))},ol.source.Cluster.prototype.setDistance=function(e){this.distance=e,this.refresh()},ol.source.Cluster.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features),ol.source.Vector.prototype.refresh.call(this)},ol.source.Cluster.prototype.cluster=function(){if(void 0!==this.resolution){this.features.length=0;for(var e=ol.extent.createEmpty(),t=this.distance*this.resolution,o=this.source.getFeatures(),r={},i=0,n=o.length;i<n;i++){var a=o[i];if(!(ol.getUid(a).toString()in r)){var l=this.geometryFunction(a);if(l){var s=l.getCoordinates();ol.extent.createOrUpdateFromCoordinate(s,e),ol.extent.buffer(e,t,e);var p=this.source.getFeaturesInExtent(e);p=p.filter(function(e){var t=ol.getUid(e).toString();return!(t in r)&&(r[t]=!0,!0)}),this.features.push(this.createCluster(p))}}}}},ol.source.Cluster.prototype.createCluster=function(e){for(var t=[0,0],o=e.length-1;o>=0;--o){var r=this.geometryFunction(e[o]);r?ol.coordinate.add(t,r.getCoordinates()):e.splice(o,1)}ol.coordinate.scale(t,1/e.length);var i=new ol.Feature(new ol.geom.Point(t));return i.set("features",e),i},goog.provide("ol.uri"),ol.uri.appendParams=function(e,t){var o=[];Object.keys(t).forEach(function(e){null!==t[e]&&void 0!==t[e]&&o.push(e+"="+encodeURIComponent(t[e]))});var r=o.join("&");return e=e.replace(/[?&]$/,""),e=e.indexOf("?")===-1?e+"?":e+"&",e+r},goog.provide("ol.source.ImageArcGISRest"),goog.require("ol"),goog.require("ol.Image"),goog.require("ol.asserts"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.extent"),goog.require("ol.obj"),goog.require("ol.source.Image"),goog.require("ol.uri"),ol.source.ImageArcGISRest=function(e){var t=e||{};ol.source.Image.call(this,{attributions:t.attributions,logo:t.logo,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.hidpi_=void 0===t.hidpi||t.hidpi,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:ol.source.Image.defaultImageLoadFunction,this.params_=t.params||{},this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5},ol.inherits(ol.source.ImageArcGISRest,ol.source.Image),ol.source.ImageArcGISRest.prototype.getParams=function(){return this.params_},ol.source.ImageArcGISRest.prototype.getImageInternal=function(e,t,o,r){if(void 0===this.url_)return null;t=this.findNearestResolution(t),o=this.hidpi_?o:1;var i=this.image_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==t&&i.getPixelRatio()==o&&ol.extent.containsExtent(i.getExtent(),e))return i;var n={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};ol.obj.assign(n,this.params_),e=e.slice();var a=(e[0]+e[2])/2,l=(e[1]+e[3])/2;if(1!=this.ratio_){var s=this.ratio_*ol.extent.getWidth(e)/2,p=this.ratio_*ol.extent.getHeight(e)/2;e[0]=a-s,e[1]=l-p,e[2]=a+s,e[3]=l+p}var g=t/o,u=Math.ceil(ol.extent.getWidth(e)/g),c=Math.ceil(ol.extent.getHeight(e)/g);e[0]=a-g*u/2,e[2]=a+g*u/2,e[1]=l-g*c/2,e[3]=l+g*c/2,this.imageSize_[0]=u,this.imageSize_[1]=c;var y=this.getRequestUrl_(e,this.imageSize_,o,r,n);return this.image_=new ol.Image(e,t,o,this.getAttributions(),y,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),ol.events.listen(this.image_,ol.events.EventType.CHANGE,this.handleImageChange,this),this.image_},ol.source.ImageArcGISRest.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},ol.source.ImageArcGISRest.prototype.getRequestUrl_=function(e,t,o,r,i){var n=r.getCode().split(":").pop();i.SIZE=t[0]+","+t[1],i.BBOX=e.join(","),i.BBOXSR=n,i.IMAGESR=n,i.DPI=Math.round(90*o);var a=this.url_,l=a.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return l==a&&ol.asserts.assert(!1,50),ol.uri.appendParams(l,i)},ol.source.ImageArcGISRest.prototype.getUrl=function(){return this.url_},ol.source.ImageArcGISRest.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},ol.source.ImageArcGISRest.prototype.setUrl=function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())},ol.source.ImageArcGISRest.prototype.updateParams=function(e){ol.obj.assign(this.params_,e),this.image_=null,this.changed()},goog.provide("ol.source.ImageMapGuide"),goog.require("ol"),goog.require("ol.Image"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.extent"),goog.require("ol.obj"),goog.require("ol.source.Image"),goog.require("ol.uri"),ol.source.ImageMapGuide=function(e){ol.source.Image.call(this,{projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.displayDpi_=void 0!==e.displayDpi?e.displayDpi:96,this.params_=e.params||{},this.url_=e.url,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:ol.source.Image.defaultImageLoadFunction,this.hidpi_=void 0===e.hidpi||e.hidpi,this.metersPerUnit_=void 0!==e.metersPerUnit?e.metersPerUnit:1,this.ratio_=void 0!==e.ratio?e.ratio:1,this.useOverlay_=void 0!==e.useOverlay&&e.useOverlay,this.image_=null,this.renderedRevision_=0},ol.inherits(ol.source.ImageMapGuide,ol.source.Image),ol.source.ImageMapGuide.prototype.getParams=function(){return this.params_},ol.source.ImageMapGuide.prototype.getImageInternal=function(e,t,o,r){t=this.findNearestResolution(t),o=this.hidpi_?o:1;var i=this.image_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==t&&i.getPixelRatio()==o&&ol.extent.containsExtent(i.getExtent(),e))return i;1!=this.ratio_&&(e=e.slice(),ol.extent.scaleFromCenter(e,this.ratio_));var n=ol.extent.getWidth(e)/t,a=ol.extent.getHeight(e)/t,l=[n*o,a*o];if(void 0!==this.url_){var s=this.getUrl(this.url_,this.params_,e,l,r);i=new ol.Image(e,t,o,this.getAttributions(),s,this.crossOrigin_,this.imageLoadFunction_),ol.events.listen(i,ol.events.EventType.CHANGE,this.handleImageChange,this)}else i=null;return this.image_=i,this.renderedRevision_=this.getRevision(),i},ol.source.ImageMapGuide.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},ol.source.ImageMapGuide.getScale=function(e,t,o,r){var i=ol.extent.getWidth(e),n=ol.extent.getHeight(e),a=t[0],l=t[1],s=.0254/r;return l*i>a*n?i*o/(a*s):n*o/(l*s)},ol.source.ImageMapGuide.prototype.updateParams=function(e){ol.obj.assign(this.params_,e),this.changed()},ol.source.ImageMapGuide.prototype.getUrl=function(e,t,o,r,i){var n=ol.source.ImageMapGuide.getScale(o,r,this.metersPerUnit_,this.displayDpi_),a=ol.extent.getCenter(o),l={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol.source.ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:n,SETVIEWCENTERX:a[0],SETVIEWCENTERY:a[1]};return ol.obj.assign(l,t),ol.uri.appendParams(e,l)},ol.source.ImageMapGuide.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},goog.provide("ol.source.ImageStatic"),goog.require("ol"),goog.require("ol.Image"),goog.require("ol.ImageState"),goog.require("ol.dom"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.extent"),goog.require("ol.proj"),goog.require("ol.source.Image"),ol.source.ImageStatic=function(e){var t=e.imageExtent,o=void 0!==e.crossOrigin?e.crossOrigin:null,r=void 0!==e.imageLoadFunction?e.imageLoadFunction:ol.source.Image.defaultImageLoadFunction;ol.source.Image.call(this,{attributions:e.attributions,logo:e.logo,projection:ol.proj.get(e.projection)}),this.image_=new ol.Image(t,void 0,1,this.getAttributions(),e.url,o,r),this.imageSize_=e.imageSize?e.imageSize:null,ol.events.listen(this.image_,ol.events.EventType.CHANGE,this.handleImageChange,this)},ol.inherits(ol.source.ImageStatic,ol.source.Image),ol.source.ImageStatic.prototype.getImageInternal=function(e,t,o,r){return ol.extent.intersects(e,this.image_.getExtent())?this.image_:null},ol.source.ImageStatic.prototype.handleImageChange=function(e){if(this.image_.getState()==ol.ImageState.LOADED){var t,o,r=this.image_.getExtent(),i=this.image_.getImage();this.imageSize_?(t=this.imageSize_[0],o=this.imageSize_[1]):(t=i.width,o=i.height);var n=ol.extent.getHeight(r)/o,a=Math.ceil(ol.extent.getWidth(r)/n);if(a!=t){var l=ol.dom.createCanvasContext2D(a,o),s=l.canvas;l.drawImage(i,0,0,t,o,0,0,s.width,s.height),this.image_.setImage(s)}}ol.source.Image.prototype.handleImageChange.call(this,e)},goog.provide("ol.source.WMSServerType"),ol.source.WMSServerType={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"},goog.provide("ol.source.ImageWMS"),goog.require("ol"),goog.require("ol.Image"),goog.require("ol.asserts"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.extent"),goog.require("ol.obj"),goog.require("ol.proj"),goog.require("ol.source.Image"),goog.require("ol.source.WMSServerType"),goog.require("ol.string"),goog.require("ol.uri"),ol.source.ImageWMS=function(e){var t=e||{};ol.source.Image.call(this,{attributions:t.attributions,logo:t.logo,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:ol.source.Image.defaultImageLoadFunction,this.params_=t.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5},ol.inherits(ol.source.ImageWMS,ol.source.Image),ol.source.ImageWMS.GETFEATUREINFO_IMAGE_SIZE_=[101,101],ol.source.ImageWMS.prototype.getGetFeatureInfoUrl=function(e,t,o,r){if(void 0!==this.url_){var i=ol.extent.getForViewAndSize(e,t,0,ol.source.ImageWMS.GETFEATUREINFO_IMAGE_SIZE_),n={SERVICE:"WMS",VERSION:ol.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};ol.obj.assign(n,this.params_,r);var a=Math.floor((e[0]-i[0])/t),l=Math.floor((i[3]-e[1])/t);return n[this.v13_?"I":"X"]=a,n[this.v13_?"J":"Y"]=l,this.getRequestUrl_(i,ol.source.ImageWMS.GETFEATUREINFO_IMAGE_SIZE_,1,ol.proj.get(o),n)}},ol.source.ImageWMS.prototype.getParams=function(){return this.params_},ol.source.ImageWMS.prototype.getImageInternal=function(e,t,o,r){if(void 0===this.url_)return null;t=this.findNearestResolution(t),1==o||this.hidpi_&&void 0!==this.serverType_||(o=1);var i=t/o,n=ol.extent.getCenter(e),a=Math.ceil(ol.extent.getWidth(e)/i),l=Math.ceil(ol.extent.getHeight(e)/i),s=ol.extent.getForViewAndSize(n,i,0,[a,l]),p=Math.ceil(this.ratio_*ol.extent.getWidth(e)/i),g=Math.ceil(this.ratio_*ol.extent.getHeight(e)/i),u=ol.extent.getForViewAndSize(n,i,0,[p,g]),c=this.image_;if(c&&this.renderedRevision_==this.getRevision()&&c.getResolution()==t&&c.getPixelRatio()==o&&ol.extent.containsExtent(c.getExtent(),s))return c;var y={SERVICE:"WMS",VERSION:ol.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};ol.obj.assign(y,this.params_),this.imageSize_[0]=Math.round(ol.extent.getWidth(u)/i),this.imageSize_[1]=Math.round(ol.extent.getHeight(u)/i);var h=this.getRequestUrl_(u,this.imageSize_,o,r,y);return this.image_=new ol.Image(u,t,o,this.getAttributions(),h,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),ol.events.listen(this.image_,ol.events.EventType.CHANGE,this.handleImageChange,this),this.image_},ol.source.ImageWMS.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},ol.source.ImageWMS.prototype.getRequestUrl_=function(e,t,o,r,i){if(ol.asserts.assert(void 0!==this.url_,9),i[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(i.STYLES=""),1!=o)switch(this.serverType_){case ol.source.WMSServerType.GEOSERVER:var n=90*o+.5|0;"FORMAT_OPTIONS"in i?i.FORMAT_OPTIONS+=";dpi:"+n:i.FORMAT_OPTIONS="dpi:"+n;break;case ol.source.WMSServerType.MAPSERVER:i.MAP_RESOLUTION=90*o;break;case ol.source.WMSServerType.CARMENTA_SERVER:case ol.source.WMSServerType.QGIS:i.DPI=90*o;break;default:ol.asserts.assert(!1,8)}i.WIDTH=t[0],i.HEIGHT=t[1];var a,l=r.getAxisOrientation();return a=this.v13_&&"ne"==l.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,i.BBOX=a.join(","),ol.uri.appendParams(this.url_,i)},ol.source.ImageWMS.prototype.getUrl=function(){return this.url_},ol.source.ImageWMS.prototype.setImageLoadFunction=function(e){this.image_=null,this.imageLoadFunction_=e,this.changed()},ol.source.ImageWMS.prototype.setUrl=function(e){e!=this.url_&&(this.url_=e,this.image_=null,this.changed())},ol.source.ImageWMS.prototype.updateParams=function(e){ol.obj.assign(this.params_,e),this.updateV13_(),this.image_=null,this.changed()},ol.source.ImageWMS.prototype.updateV13_=function(){var e=this.params_.VERSION||ol.DEFAULT_WMS_VERSION;this.v13_=ol.string.compareVersions(e,"1.3")>=0},goog.provide("ol.source.OSM"),goog.require("ol"),goog.require("ol.Attribution"),goog.require("ol.source.XYZ"),ol.source.OSM=function(e){var t,o=e||{};t=void 0!==o.attributions?o.attributions:[ol.source.OSM.ATTRIBUTION];var r=void 0!==o.crossOrigin?o.crossOrigin:"anonymous",i=void 0!==o.url?o.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";ol.source.XYZ.call(this,{attributions:t,cacheSize:o.cacheSize,crossOrigin:r,opaque:void 0===o.opaque||o.opaque,maxZoom:void 0!==o.maxZoom?o.maxZoom:19,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileLoadFunction:o.tileLoadFunction,url:i,wrapX:o.wrapX})},ol.inherits(ol.source.OSM,ol.source.XYZ),ol.source.OSM.ATTRIBUTION=new ol.Attribution({html:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.'}),goog.provide("ol.ext.pixelworks.Processor"),ol.ext.pixelworks.Processor=function(){},function(){!function(e){"use strict";function t(e,t,o){if(a)return new ImageData(e,t,o);var r=l.createImageData(t,o);return r.data.set(e),r}function o(e){function t(e,t,r){return o?new ImageData(e,t,r):{data:e,width:t,height:r}}var o=!0;try{new ImageData(10,10)}catch(e){o=!1}return function(o){var r,i,n=o.buffers,a=o.meta,l=o.imageOps,s=o.width,p=o.height,g=n.length,u=n[0].byteLength;if(l){var c=new Array(g);for(i=0;i<g;++i)c[i]=t(new Uint8ClampedArray(n[i]),s,p);r=e(c,a).data}else{r=new Uint8ClampedArray(u);var y=new Array(g),h=new Array(g);for(i=0;i<g;++i)y[i]=new Uint8ClampedArray(n[i]),h[i]=[0,0,0,0];for(var d=0;d<u;d+=4){for(var f=0;f<g;++f){var m=y[f];h[f][0]=m[d],h[f][1]=m[d+1],h[f][2]=m[d+2],h[f][3]=m[d+3]}var v=e(h,a);r[d]=v[0],r[d+1]=v[1],r[d+2]=v[2],r[d+3]=v[3]}}return r.buffer}}function r(e,t){var r=Object.keys(e.lib||{}).map(function(t){return"var "+t+" = "+e.lib[t].toString()+";"}),i=r.concat(["var __minion__ = ("+o.toString()+")(",e.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),n=new Blob(i,{type:"text/javascript"}),a=URL.createObjectURL(n),l=new Worker(a);return l.addEventListener("message",t),l}function i(e,t){var r=o(e.operation);return{postMessage:function(e){setTimeout(function(){t({data:{buffer:r(e),meta:e.meta}})},0)}}}function n(e){this._imageOps=!!e.imageOps;var t;t=0===e.threads?0:this._imageOps?1:e.threads||1;var o=[];if(t)for(var n=0;n<t;++n)o[n]=r(e,this._onWorkerMessage.bind(this,n));else o[0]=i(e,this._onWorkerMessage.bind(this,0));this._workers=o,this._queue=[],this._maxQueueLength=e.queue||1/0,this._running=0,this._dataLookup={},this._job=null}var a=!0;try{new ImageData(10,10)}catch(e){a=!1}var l=document.createElement("canvas").getContext("2d"),s=t,p={newImageData:s},g=p.newImageData;n.prototype.process=function(e,t,o){this._enqueue({inputs:e,meta:t,callback:o}),this._dispatch()},n.prototype.destroy=function(){for(var e in this)this[e]=null;this._destroyed=!0},n.prototype._enqueue=function(e){for(this._queue.push(e);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},n.prototype._dispatch=function(){if(0===this._running&&this._queue.length>0){var e=this._job=this._queue.shift(),t=e.inputs[0].width,o=e.inputs[0].height,r=e.inputs.map(function(e){return e.data.buffer}),i=this._workers.length;if(this._running=i,1===i)this._workers[0].postMessage({buffers:r,meta:e.meta,imageOps:this._imageOps,width:t,height:o},r);else for(var n=e.inputs[0].data.length,a=4*Math.ceil(n/4/i),l=0;l<i;++l){for(var s=l*a,p=[],g=0,u=r.length;g<u;++g)p.push(r[l].slice(s,s+a));this._workers[l].postMessage({buffers:p,meta:e.meta,imageOps:this._imageOps,width:t,height:o},p)}}},n.prototype._onWorkerMessage=function(e,t){this._destroyed||(this._dataLookup[e]=t.data,--this._running,0===this._running&&this._resolveJob())},n.prototype._resolveJob=function(){var e,t,o=this._job,r=this._workers.length;if(1===r)e=new Uint8ClampedArray(this._dataLookup[0].buffer),t=this._dataLookup[0].meta;else{var i=o.inputs[0].data.length;e=new Uint8ClampedArray(i),t=new Array(i);for(var n=4*Math.ceil(i/4/r),a=0;a<r;++a){var l=this._dataLookup[a].buffer,s=a*n;e.set(new Uint8ClampedArray(l),s),t[a]=this._dataLookup[a].meta}}this._job=null,this._dataLookup={},o.callback(null,g(e,o.inputs[0].width,o.inputs[0].height),t),this._dispatch()};var u=n,c=u,y={Processor:c};e.default=y,e.Processor=c}(this.pixelworks=this.pixelworks||{})}.call(ol.ext),goog.provide("ol.source.RasterOperationType"),ol.source.RasterOperationType={PIXEL:"pixel",IMAGE:"image"},goog.provide("ol.source.Raster"),goog.require("ol"),goog.require("ol.ImageCanvas"),goog.require("ol.TileQueue"),goog.require("ol.dom"),goog.require("ol.events"),goog.require("ol.events.Event"),goog.require("ol.events.EventType"),goog.require("ol.ext.pixelworks.Processor");goog.require("ol.extent");goog.require("ol.layer.Image"),goog.require("ol.layer.Tile"),goog.require("ol.obj"),goog.require("ol.renderer.canvas.ImageLayer"),goog.require("ol.renderer.canvas.TileLayer"),goog.require("ol.source.Image"),goog.require("ol.source.RasterOperationType"),goog.require("ol.source.State"),goog.require("ol.source.Tile"),goog.require("ol.transform"),ol.source.Raster=function(e){this.worker_=null,this.operationType_=void 0!==e.operationType?e.operationType:ol.source.RasterOperationType.PIXEL,this.threads_=void 0!==e.threads?e.threads:1,this.renderers_=ol.source.Raster.createRenderers_(e.sources);for(var t=0,o=this.renderers_.length;t<o;++t)ol.events.listen(this.renderers_[t],ol.events.EventType.CHANGE,this.changed,this);this.tileQueue_=new ol.TileQueue(function(){return 1},this.changed.bind(this));for(var r=ol.source.Raster.getLayerStatesArray_(this.renderers_),i={},n=0,a=r.length;n<a;++n)i[ol.getUid(r[n].layer)]=r[n];this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,attributions:{},coordinateToPixelTransform:ol.transform.create(),extent:null,focus:null,index:0,layerStates:i,layerStatesArray:r,logos:{},pixelRatio:1,pixelToCoordinateTransform:ol.transform.create(),postRenderFunctions:[],size:[0,0],skippedFeatureUids:{},tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{}},ol.source.Image.call(this,{}),void 0!==e.operation&&this.setOperation(e.operation,e.lib)},ol.inherits(ol.source.Raster,ol.source.Image),ol.source.Raster.prototype.setOperation=function(e,t){this.worker_=new ol.ext.pixelworks.Processor({operation:e,imageOps:this.operationType_===ol.source.RasterOperationType.IMAGE,queue:1,lib:t,threads:this.threads_}),this.changed()},ol.source.Raster.prototype.updateFrameState_=function(e,t,o){var r=ol.obj.assign({},this.frameState_);r.viewState=ol.obj.assign({},r.viewState);var i=ol.extent.getCenter(e);r.extent=e.slice(),r.focus=i,r.size[0]=Math.round(ol.extent.getWidth(e)/t),r.size[1]=Math.round(ol.extent.getHeight(e)/t);var n=r.viewState;return n.center=i,n.projection=o,n.resolution=t,r},ol.source.Raster.prototype.allSourcesReady_=function(){for(var e,t=!0,o=0,r=this.renderers_.length;o<r;++o)if(e=this.renderers_[o].getLayer().getSource(),
e.getState()!==ol.source.State.READY){t=!1;break}return t},ol.source.Raster.prototype.getImage=function(e,t,o,r){if(!this.allSourcesReady_())return null;var i=this.updateFrameState_(e,t,r);if(this.requestedFrameState_=i,i.tileQueue.loadMoreTiles(16,16),this.renderedImageCanvas_){var n=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();t===n&&ol.extent.equals(e,a)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),this.renderedImageCanvas_},ol.source.Raster.prototype.processSources_=function(){for(var e=this.requestedFrameState_,t=this.renderers_.length,o=new Array(t),r=0;r<t;++r){var i=ol.source.Raster.getImageData_(this.renderers_[r],e,e.layerStatesArray[r]);if(!i)return;o[r]=i}var n={};this.dispatchEvent(new ol.source.Raster.Event(ol.source.Raster.EventType_.BEFOREOPERATIONS,e,n)),this.worker_.process(o,n,this.onWorkerComplete_.bind(this,e))},ol.source.Raster.prototype.onWorkerComplete_=function(e,t,o,r){if(!t&&o){var i=e.extent,n=e.viewState.resolution;if(n===this.requestedFrameState_.viewState.resolution&&ol.extent.equals(i,this.requestedFrameState_.extent)){var a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{var l=Math.round(ol.extent.getWidth(i)/n),s=Math.round(ol.extent.getHeight(i)/n);a=ol.dom.createCanvasContext2D(l,s),this.renderedImageCanvas_=new ol.ImageCanvas(i,n,1,this.getAttributions(),a.canvas)}a.putImageData(o,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new ol.source.Raster.Event(ol.source.Raster.EventType_.AFTEROPERATIONS,e,r))}}},ol.source.Raster.getImageData_=function(e,t,o){if(!e.prepareFrame(t,o))return null;var r=t.size[0],i=t.size[1];if(ol.source.Raster.context_){var n=ol.source.Raster.context_.canvas;n.width!==r||n.height!==i?ol.source.Raster.context_=ol.dom.createCanvasContext2D(r,i):ol.source.Raster.context_.clearRect(0,0,r,i)}else ol.source.Raster.context_=ol.dom.createCanvasContext2D(r,i);return e.composeFrame(t,o,ol.source.Raster.context_),ol.source.Raster.context_.getImageData(0,0,r,i)},ol.source.Raster.context_=null,ol.source.Raster.getLayerStatesArray_=function(e){return e.map(function(e){return e.getLayer().getLayerState()})},ol.source.Raster.createRenderers_=function(e){for(var t=e.length,o=new Array(t),r=0;r<t;++r)o[r]=ol.source.Raster.createRenderer_(e[r]);return o},ol.source.Raster.createRenderer_=function(e){var t=null;return e instanceof ol.source.Tile?t=ol.source.Raster.createTileRenderer_(e):e instanceof ol.source.Image&&(t=ol.source.Raster.createImageRenderer_(e)),t},ol.source.Raster.createImageRenderer_=function(e){var t=new ol.layer.Image({source:e});return new ol.renderer.canvas.ImageLayer(t)},ol.source.Raster.createTileRenderer_=function(e){var t=new ol.layer.Tile({source:e});return new ol.renderer.canvas.TileLayer(t)},ol.source.Raster.Event=function(e,t,o){ol.events.Event.call(this,e),this.extent=t.extent,this.resolution=t.viewState.resolution/t.pixelRatio,this.data=o},ol.inherits(ol.source.Raster.Event,ol.events.Event),ol.source.Raster.prototype.getImageInternal=function(){return null},ol.source.Raster.EventType_={BEFOREOPERATIONS:"beforeoperations",AFTEROPERATIONS:"afteroperations"},goog.provide("ol.source.Stamen"),goog.require("ol"),goog.require("ol.Attribution"),goog.require("ol.source.OSM"),goog.require("ol.source.XYZ"),ol.source.Stamen=function(e){var t=e.layer.indexOf("-"),o=t==-1?e.layer:e.layer.slice(0,t),r=ol.source.Stamen.ProviderConfig[o],i=ol.source.Stamen.LayerConfig[e.layer],n=void 0!==e.url?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+i.extension;ol.source.XYZ.call(this,{attributions:ol.source.Stamen.ATTRIBUTIONS,cacheSize:e.cacheSize,crossOrigin:"anonymous",maxZoom:void 0!=e.maxZoom?e.maxZoom:r.maxZoom,minZoom:void 0!=e.minZoom?e.minZoom:r.minZoom,opaque:i.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,url:n,wrapX:e.wrapX})},ol.inherits(ol.source.Stamen,ol.source.XYZ),ol.source.Stamen.ATTRIBUTIONS=[new ol.Attribution({html:'Map tiles by <a href="http://stamen.com/">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.'}),ol.source.OSM.ATTRIBUTION],ol.source.Stamen.LayerConfig={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},ol.source.Stamen.ProviderConfig={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:1,maxZoom:16}},goog.provide("ol.source.TileArcGISRest"),goog.require("ol"),goog.require("ol.extent"),goog.require("ol.math"),goog.require("ol.obj"),goog.require("ol.size"),goog.require("ol.source.TileImage"),goog.require("ol.tilecoord"),goog.require("ol.uri"),ol.source.TileArcGISRest=function(e){var t=e||{};ol.source.TileImage.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX}),this.params_=t.params||{},this.tmpExtent_=ol.extent.createEmpty(),this.setKey(this.getKeyForParams_())},ol.inherits(ol.source.TileArcGISRest,ol.source.TileImage),ol.source.TileArcGISRest.prototype.getKeyForParams_=function(){var e=0,t=[];for(var o in this.params_)t[e++]=o+"-"+this.params_[o];return t.join("/")},ol.source.TileArcGISRest.prototype.getParams=function(){return this.params_},ol.source.TileArcGISRest.prototype.getRequestUrl_=function(e,t,o,r,i,n){var a=this.urls;if(a){var l=i.getCode().split(":").pop();n.SIZE=t[0]+","+t[1],n.BBOX=o.join(","),n.BBOXSR=l,n.IMAGESR=l,n.DPI=Math.round(n.DPI?n.DPI*r:90*r);var s;if(1==a.length)s=a[0];else{var p=ol.math.modulo(ol.tilecoord.hash(e),a.length);s=a[p]}var g=s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return ol.uri.appendParams(g,n)}},ol.source.TileArcGISRest.prototype.getTilePixelRatio=function(e){return e},ol.source.TileArcGISRest.prototype.fixedTileUrlFunction=function(e,t,o){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(o)),!(r.getResolutions().length<=e[0])){var i=r.getTileCoordExtent(e,this.tmpExtent_),n=ol.size.toSize(r.getTileSize(e[0]),this.tmpSize);1!=t&&(n=ol.size.scale(n,t,this.tmpSize));var a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return ol.obj.assign(a,this.params_),this.getRequestUrl_(e,n,i,t,o,a)}},ol.source.TileArcGISRest.prototype.updateParams=function(e){ol.obj.assign(this.params_,e),this.setKey(this.getKeyForParams_())},goog.provide("ol.source.TileDebug"),goog.require("ol"),goog.require("ol.Tile"),goog.require("ol.TileState"),goog.require("ol.dom"),goog.require("ol.size"),goog.require("ol.source.Tile"),ol.source.TileDebug=function(e){ol.source.Tile.call(this,{opaque:!1,projection:e.projection,tileGrid:e.tileGrid,wrapX:void 0===e.wrapX||e.wrapX})},ol.inherits(ol.source.TileDebug,ol.source.Tile),ol.source.TileDebug.prototype.getTile=function(e,t,o){var r=this.getKeyZXY(e,t,o);if(this.tileCache.containsKey(r))return this.tileCache.get(r);var i=ol.size.toSize(this.tileGrid.getTileSize(e)),n=[e,t,o],a=this.getTileCoordForTileUrlFunction(n),l=a?this.getTileCoordForTileUrlFunction(a).toString():"",s=new ol.source.TileDebug.Tile_(n,i,l);return this.tileCache.set(r,s),s},ol.source.TileDebug.Tile_=function(e,t,o){ol.Tile.call(this,e,ol.TileState.LOADED),this.tileSize_=t,this.text_=o,this.canvas_=null},ol.inherits(ol.source.TileDebug.Tile_,ol.Tile),ol.source.TileDebug.Tile_.prototype.getImage=function(){if(this.canvas_)return this.canvas_;var e=this.tileSize_,t=ol.dom.createCanvasContext2D(e[0],e[1]);return t.strokeStyle="black",t.strokeRect(.5,.5,e[0]+.5,e[1]+.5),t.fillStyle="black",t.textAlign="center",t.textBaseline="middle",t.font="24px sans-serif",t.fillText(this.text_,e[0]/2,e[1]/2),this.canvas_=t.canvas,t.canvas},ol.source.TileDebug.Tile_.prototype.load=function(){},goog.provide("ol.source.TileJSON"),goog.require("ol"),goog.require("ol.Attribution"),goog.require("ol.TileUrlFunction"),goog.require("ol.asserts"),goog.require("ol.extent"),goog.require("ol.net"),goog.require("ol.proj"),goog.require("ol.source.State"),goog.require("ol.source.TileImage"),goog.require("ol.tilegrid"),ol.source.TileJSON=function(e){if(this.tileJSON_=null,ol.source.TileImage.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:ol.proj.get("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:ol.source.State.LOADING,tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX}),e.url)if(e.jsonp)ol.net.jsonp(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else e.tileJSON?this.handleTileJSONResponse(e.tileJSON):ol.asserts.assert(!1,51)},ol.inherits(ol.source.TileJSON,ol.source.TileImage),ol.source.TileJSON.prototype.onXHRLoad_=function(e){var t=e.target;if(!t.status||t.status>=200&&t.status<300){var o;try{o=JSON.parse(t.responseText)}catch(e){return void this.handleTileJSONError()}this.handleTileJSONResponse(o)}else this.handleTileJSONError()},ol.source.TileJSON.prototype.onXHRError_=function(e){this.handleTileJSONError()},ol.source.TileJSON.prototype.getTileJSON=function(){return this.tileJSON_},ol.source.TileJSON.prototype.handleTileJSONResponse=function(e){var t,o=ol.proj.get("EPSG:4326"),r=this.getProjection();if(void 0!==e.bounds){var i=ol.proj.getTransformFromProjections(o,r);t=ol.extent.applyTransform(e.bounds,i)}var n=e.minzoom||0,a=e.maxzoom||22,l=ol.tilegrid.createXYZ({extent:ol.tilegrid.extentFromProjection(r),maxZoom:a,minZoom:n});if(this.tileGrid=l,this.tileUrlFunction=ol.TileUrlFunction.createFromTemplates(e.tiles,l),void 0!==e.attribution&&!this.getAttributions()){var s,p,g=void 0!==t?t:o.getExtent(),u={};for(s=n;s<=a;++s)p=s.toString(),u[p]=[l.getTileRangeForExtentAndZ(g,s)];this.setAttributions([new ol.Attribution({html:e.attribution,tileRanges:u})])}this.tileJSON_=e,this.setState(ol.source.State.READY)},ol.source.TileJSON.prototype.handleTileJSONError=function(){this.setState(ol.source.State.ERROR)},goog.provide("ol.source.TileUTFGrid"),goog.require("ol"),goog.require("ol.Attribution"),goog.require("ol.Tile"),goog.require("ol.TileState"),goog.require("ol.TileUrlFunction"),goog.require("ol.asserts"),goog.require("ol.events"),goog.require("ol.events.EventType"),goog.require("ol.extent"),goog.require("ol.net"),goog.require("ol.proj"),goog.require("ol.source.State"),goog.require("ol.source.Tile"),goog.require("ol.tilegrid"),ol.source.TileUTFGrid=function(e){if(ol.source.Tile.call(this,{projection:ol.proj.get("EPSG:3857"),state:ol.source.State.LOADING}),this.preemptive_=void 0===e.preemptive||e.preemptive,this.tileUrlFunction_=ol.TileUrlFunction.nullTileUrlFunction,this.template_=void 0,this.jsonp_=e.jsonp||!1,e.url)if(this.jsonp_)ol.net.jsonp(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else e.tileJSON?this.handleTileJSONResponse(e.tileJSON):ol.asserts.assert(!1,51)},ol.inherits(ol.source.TileUTFGrid,ol.source.Tile),ol.source.TileUTFGrid.prototype.onXHRLoad_=function(e){var t=e.target;if(!t.status||t.status>=200&&t.status<300){var o;try{o=JSON.parse(t.responseText)}catch(e){return void this.handleTileJSONError()}this.handleTileJSONResponse(o)}else this.handleTileJSONError()},ol.source.TileUTFGrid.prototype.onXHRError_=function(e){this.handleTileJSONError()},ol.source.TileUTFGrid.prototype.getTemplate=function(){return this.template_},ol.source.TileUTFGrid.prototype.forDataAtCoordinateAndResolution=function(e,t,o,r,i){if(this.tileGrid){var n=this.tileGrid.getTileCoordForCoordAndResolution(e,t),a=this.getTile(n[0],n[1],n[2],1,this.getProjection());a.forDataAtCoordinate(e,o,r,i)}else i===!0?setTimeout(function(){o.call(r,null)},0):o.call(r,null)},ol.source.TileUTFGrid.prototype.handleTileJSONError=function(){this.setState(ol.source.State.ERROR)},ol.source.TileUTFGrid.prototype.handleTileJSONResponse=function(e){var t,o=ol.proj.get("EPSG:4326"),r=this.getProjection();if(void 0!==e.bounds){var i=ol.proj.getTransformFromProjections(o,r);t=ol.extent.applyTransform(e.bounds,i)}var n=e.minzoom||0,a=e.maxzoom||22,l=ol.tilegrid.createXYZ({extent:ol.tilegrid.extentFromProjection(r),maxZoom:a,minZoom:n});this.tileGrid=l,this.template_=e.template;var s=e.grids;if(!s)return void this.setState(ol.source.State.ERROR);if(this.tileUrlFunction_=ol.TileUrlFunction.createFromTemplates(s,l),void 0!==e.attribution){var p,g,u=void 0!==t?t:o.getExtent(),c={};for(p=n;p<=a;++p)g=p.toString(),c[g]=[l.getTileRangeForExtentAndZ(u,p)];this.setAttributions([new ol.Attribution({html:e.attribution,tileRanges:c})])}this.setState(ol.source.State.READY)},ol.source.TileUTFGrid.prototype.getTile=function(e,t,o,r,i){var n=this.getKeyZXY(e,t,o);if(this.tileCache.containsKey(n))return this.tileCache.get(n);var a=[e,t,o],l=this.getTileCoordForTileUrlFunction(a,i),s=this.tileUrlFunction_(l,r,i),p=new ol.source.TileUTFGrid.Tile_(a,void 0!==s?ol.TileState.IDLE:ol.TileState.EMPTY,void 0!==s?s:"",this.tileGrid.getTileCoordExtent(a),this.preemptive_,this.jsonp_);return this.tileCache.set(n,p),p},ol.source.TileUTFGrid.prototype.useTile=function(e,t,o){var r=this.getKeyZXY(e,t,o);this.tileCache.containsKey(r)&&this.tileCache.get(r)},ol.source.TileUTFGrid.Tile_=function(e,t,o,r,i,n){ol.Tile.call(this,e,t),this.src_=o,this.extent_=r,this.preemptive_=i,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=n},ol.inherits(ol.source.TileUTFGrid.Tile_,ol.Tile),ol.source.TileUTFGrid.Tile_.prototype.getImage=function(){return null},ol.source.TileUTFGrid.Tile_.prototype.getData=function(e){if(!this.grid_||!this.keys_)return null;var t=(e[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),o=(e[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),r=this.grid_[Math.floor((1-o)*this.grid_.length)];if("string"!=typeof r)return null;var i=r.charCodeAt(Math.floor(t*r.length));i>=93&&i--,i>=35&&i--,i-=32;var n=null;if(i in this.keys_){var a=this.keys_[i];n=this.data_&&a in this.data_?this.data_[a]:a}return n},ol.source.TileUTFGrid.Tile_.prototype.forDataAtCoordinate=function(e,t,o,r){this.state==ol.TileState.IDLE&&r===!0?(ol.events.listenOnce(this,ol.events.EventType.CHANGE,function(r){t.call(o,this.getData(e))},this),this.loadInternal_()):r===!0?setTimeout(function(){t.call(o,this.getData(e))}.bind(this),0):t.call(o,this.getData(e))},ol.source.TileUTFGrid.Tile_.prototype.getKey=function(){return this.src_},ol.source.TileUTFGrid.Tile_.prototype.handleError_=function(){this.state=ol.TileState.ERROR,this.changed()},ol.source.TileUTFGrid.Tile_.prototype.handleLoad_=function(e){this.grid_=e.grid,this.keys_=e.keys,this.data_=e.data,this.state=ol.TileState.EMPTY,this.changed()},ol.source.TileUTFGrid.Tile_.prototype.loadInternal_=function(){if(this.state==ol.TileState.IDLE)if(this.state=ol.TileState.LOADING,this.jsonp_)ol.net.jsonp(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",this.src_),e.send()}},ol.source.TileUTFGrid.Tile_.prototype.onXHRLoad_=function(e){var t=e.target;if(!t.status||t.status>=200&&t.status<300){var o;try{o=JSON.parse(t.responseText)}catch(e){return void this.handleError_()}this.handleLoad_(o)}else this.handleError_()},ol.source.TileUTFGrid.Tile_.prototype.onXHRError_=function(e){this.handleError_()},ol.source.TileUTFGrid.Tile_.prototype.load=function(){this.preemptive_&&this.loadInternal_()},goog.provide("ol.source.TileWMS"),goog.require("ol"),goog.require("ol.asserts"),goog.require("ol.extent"),goog.require("ol.obj"),goog.require("ol.math"),goog.require("ol.proj"),goog.require("ol.size"),goog.require("ol.source.TileImage"),goog.require("ol.source.WMSServerType"),goog.require("ol.tilecoord"),goog.require("ol.string"),goog.require("ol.uri"),ol.source.TileWMS=function(e){var t=e||{},o=t.params||{},r=!("TRANSPARENT"in o)||o.TRANSPARENT;ol.source.TileImage.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,opaque:!r,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=o,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.coordKeyPrefix_="",this.resetCoordKeyPrefix_(),this.tmpExtent_=ol.extent.createEmpty(),this.updateV13_(),this.setKey(this.getKeyForParams_())},ol.inherits(ol.source.TileWMS,ol.source.TileImage),ol.source.TileWMS.prototype.getGetFeatureInfoUrl=function(e,t,o,r){var i=ol.proj.get(o),n=this.getTileGrid();n||(n=this.getTileGridForProjection(i));var a=n.getTileCoordForCoordAndResolution(e,t);if(!(n.getResolutions().length<=a[0])){var l=n.getResolution(a[0]),s=n.getTileCoordExtent(a,this.tmpExtent_),p=ol.size.toSize(n.getTileSize(a[0]),this.tmpSize),g=this.gutter_;0!==g&&(p=ol.size.buffer(p,g,this.tmpSize),s=ol.extent.buffer(s,l*g,s));var u={SERVICE:"WMS",VERSION:ol.DEFAULT_WMS_VERSION,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};ol.obj.assign(u,this.params_,r);var c=Math.floor((e[0]-s[0])/l),y=Math.floor((s[3]-e[1])/l);return u[this.v13_?"I":"X"]=c,u[this.v13_?"J":"Y"]=y,this.getRequestUrl_(a,p,s,1,i,u)}},ol.source.TileWMS.prototype.getGutterInternal=function(){return this.gutter_},ol.source.TileWMS.prototype.getKeyZXY=function(e,t,o){return this.coordKeyPrefix_+ol.source.TileImage.prototype.getKeyZXY.call(this,e,t,o)},ol.source.TileWMS.prototype.getParams=function(){return this.params_},ol.source.TileWMS.prototype.getRequestUrl_=function(e,t,o,r,i,n){var a=this.urls;if(a){if(n.WIDTH=t[0],n.HEIGHT=t[1],n[this.v13_?"CRS":"SRS"]=i.getCode(),"STYLES"in this.params_||(n.STYLES=""),1!=r)switch(this.serverType_){case ol.source.WMSServerType.GEOSERVER:var l=90*r+.5|0;"FORMAT_OPTIONS"in n?n.FORMAT_OPTIONS+=";dpi:"+l:n.FORMAT_OPTIONS="dpi:"+l;break;case ol.source.WMSServerType.MAPSERVER:n.MAP_RESOLUTION=90*r;break;case ol.source.WMSServerType.CARMENTA_SERVER:case ol.source.WMSServerType.QGIS:n.DPI=90*r;break;default:ol.asserts.assert(!1,52)}var s=i.getAxisOrientation(),p=o;if(this.v13_&&"ne"==s.substr(0,2)){var g;g=o[0],p[0]=o[1],p[1]=g,g=o[2],p[2]=o[3],p[3]=g}n.BBOX=p.join(",");var u;if(1==a.length)u=a[0];else{var c=ol.math.modulo(ol.tilecoord.hash(e),a.length);u=a[c]}return ol.uri.appendParams(u,n)}},ol.source.TileWMS.prototype.getTilePixelRatio=function(e){return this.hidpi_&&void 0!==this.serverType_?e:1},ol.source.TileWMS.prototype.resetCoordKeyPrefix_=function(){var e=0,t=[];if(this.urls){var o,r;for(o=0,r=this.urls.length;o<r;++o)t[e++]=this.urls[o]}this.coordKeyPrefix_=t.join("#")},ol.source.TileWMS.prototype.getKeyForParams_=function(){var e=0,t=[];for(var o in this.params_)t[e++]=o+"-"+this.params_[o];return t.join("/")},ol.source.TileWMS.prototype.fixedTileUrlFunction=function(e,t,o){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(o)),!(r.getResolutions().length<=e[0])){1==t||this.hidpi_&&void 0!==this.serverType_||(t=1);var i=r.getResolution(e[0]),n=r.getTileCoordExtent(e,this.tmpExtent_),a=ol.size.toSize(r.getTileSize(e[0]),this.tmpSize),l=this.gutter_;0!==l&&(a=ol.size.buffer(a,l,this.tmpSize),n=ol.extent.buffer(n,i*l,n)),1!=t&&(a=ol.size.scale(a,t,this.tmpSize));var s={SERVICE:"WMS",VERSION:ol.DEFAULT_WMS_VERSION,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return ol.obj.assign(s,this.params_),this.getRequestUrl_(e,a,n,t,o,s)}},ol.source.TileWMS.prototype.setUrls=function(e){ol.source.TileImage.prototype.setUrls.call(this,e),this.resetCoordKeyPrefix_()},ol.source.TileWMS.prototype.updateParams=function(e){ol.obj.assign(this.params_,e),this.resetCoordKeyPrefix_(),this.updateV13_(),this.setKey(this.getKeyForParams_())},ol.source.TileWMS.prototype.updateV13_=function(){var e=this.params_.VERSION||ol.DEFAULT_WMS_VERSION;this.v13_=ol.string.compareVersions(e,"1.3")>=0},goog.provide("ol.VectorImageTile"),goog.require("ol"),goog.require("ol.Tile"),goog.require("ol.TileState"),goog.require("ol.array"),goog.require("ol.dom"),goog.require("ol.events"),goog.require("ol.extent"),goog.require("ol.events.EventType"),goog.require("ol.featureloader"),ol.VectorImageTile=function(e,t,o,r,i,n,a,l,s,p,g,u,c,y){if(ol.Tile.call(this,e,t),this.context_=null,this.loader_,this.replayState_={dirty:!1,renderedRenderOrder:null,renderedRevision:-1,renderedTileRevision:-1},this.sourceTiles_=p,this.tileKeys=[],this.src_=o,this.wrappedTileCoord=n,this.loadListenerKeys_=[],this.sourceTileListenerKeys_=[],n){var h=s.getTileCoordExtent(n),d=s.getResolution(e[0]),f=l.getZForResolution(d);l.forEachTileCoord(h,f,function(e){var t=ol.extent.getIntersection(h,l.getTileCoordExtent(e));if(ol.extent.getWidth(t)/d>=.5&&ol.extent.getHeight(t)/d>=.5){var o=e.toString(),n=p[o];if(!n){var s=a(e,g,u);n=p[o]=new c(e,void 0==s?ol.TileState.EMPTY:ol.TileState.IDLE,void 0==s?"":s,r,i),this.sourceTileListenerKeys_.push(ol.events.listen(n,ol.events.EventType.CHANGE,y))}n.consumers++,this.tileKeys.push(o)}}.bind(this))}},ol.inherits(ol.VectorImageTile,ol.Tile),ol.VectorImageTile.prototype.disposeInternal=function(){for(var e=0,t=this.tileKeys.length;e<t;++e){var o=this.tileKeys[e],r=this.getTile(o);r.consumers--,0==r.consumers&&(delete this.sourceTiles_[o],r.dispose())}this.tileKeys.length=0,this.sourceTiles_=null,this.state==ol.TileState.LOADING&&(this.loadListenerKeys_.forEach(ol.events.unlistenByKey),this.loadListenerKeys_.length=0),this.interimTile&&this.interimTile.dispose(),this.state=ol.TileState.ABORT,this.changed(),this.sourceTileListenerKeys_.forEach(ol.events.unlistenByKey),this.sourceTileListenerKeys_.length=0,ol.Tile.prototype.disposeInternal.call(this)},ol.VectorImageTile.prototype.getContext=function(){return this.context_||(this.context_=ol.dom.createCanvasContext2D()),this.context_},ol.VectorImageTile.prototype.getImage=function(){return this.replayState_.renderedTileRevision==-1?null:this.context_.canvas},ol.VectorImageTile.prototype.getReplayState=function(){return this.replayState_},ol.VectorImageTile.prototype.getKey=function(){return this.tileKeys.join("/")+"/"+this.src_},ol.VectorImageTile.prototype.getTile=function(e){return this.sourceTiles_[e]},ol.VectorImageTile.prototype.load=function(){var e=0,t=!1;this.state==ol.TileState.IDLE&&this.setState(ol.TileState.LOADING),this.state==ol.TileState.LOADING&&this.tileKeys.forEach(function(o){var r=this.getTile(o);if(r.state==ol.TileState.IDLE?(r.setLoader(this.loader_),r.load()):r.state==ol.TileState.ERROR?t=!0:r.state==ol.TileState.EMPTY&&ol.array.remove(this.tileKeys,o),r.state==ol.TileState.LOADING){var i=ol.events.listen(r,ol.events.EventType.CHANGE,function(n){var a=r.getState();a!=ol.TileState.LOADED&&a!=ol.TileState.ERROR||(--e,ol.events.unlistenByKey(i),ol.array.remove(this.loadListenerKeys_,i),a==ol.TileState.ERROR&&(ol.array.remove(this.tileKeys,o),t=!0),0==e&&this.setState(this.tileKeys.length>0?ol.TileState.LOADED:ol.TileState.ERROR))}.bind(this));this.loadListenerKeys_.push(i),++e}}.bind(this)),0==e&&setTimeout(function(){this.setState(this.tileKeys.length>0?ol.TileState.LOADED:t?ol.TileState.ERROR:ol.TileState.EMPTY)}.bind(this),0)},ol.VectorImageTile.defaultLoadFunction=function(e,t){var o=ol.featureloader.loadFeaturesXhr(t,e.getFormat(),e.onLoad_.bind(e),e.onError_.bind(e));e.setLoader(o)},goog.provide("ol.VectorTile"),goog.require("ol"),goog.require("ol.Tile"),goog.require("ol.TileState"),ol.VectorTile=function(e,t,o,r,i){ol.Tile.call(this,e,t),this.consumers=0,this.format_=r,this.features_=null,this.loader_,this.projection_,this.replayGroups_={},this.tileLoadFunction_=i,this.url_=o},ol.inherits(ol.VectorTile,ol.Tile),ol.VectorTile.prototype.disposeInternal=function(){this.features_=null,this.replayGroups_={},this.state=ol.TileState.ABORT,this.changed(),ol.Tile.prototype.disposeInternal.call(this)},ol.VectorTile.prototype.getFormat=function(){return this.format_},ol.VectorTile.prototype.getFeatures=function(){return this.features_},ol.VectorTile.prototype.getKey=function(){return this.url_},ol.VectorTile.prototype.getProjection=function(){return this.projection_},ol.VectorTile.prototype.getReplayGroup=function(e){return this.replayGroups_[e]},ol.VectorTile.prototype.load=function(){this.state==ol.TileState.IDLE&&(this.setState(ol.TileState.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_(null,NaN,null))},ol.VectorTile.prototype.onLoad_=function(e,t){this.setProjection(t),this.setFeatures(e)},ol.VectorTile.prototype.onError_=function(){this.setState(ol.TileState.ERROR)},ol.VectorTile.prototype.setFeatures=function(e){this.features_=e,this.setState(ol.TileState.LOADED)},ol.VectorTile.prototype.setProjection=function(e){this.projection_=e},ol.VectorTile.prototype.setReplayGroup=function(e,t){this.replayGroups_[e]=t},ol.VectorTile.prototype.setLoader=function(e){this.loader_=e},goog.provide("ol.source.VectorTile"),goog.require("ol"),goog.require("ol.TileState"),goog.require("ol.VectorImageTile"),goog.require("ol.VectorTile"),goog.require("ol.proj"),goog.require("ol.size"),goog.require("ol.tilegrid"),goog.require("ol.source.UrlTile");ol.source.VectorTile=function(e){ol.source.UrlTile.call(this,{attributions:e.attributions,cacheSize:void 0!==e.cacheSize?e.cacheSize:128,extent:e.extent,logo:e.logo,opaque:!1,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:ol.VectorImageTile.defaultLoadFunction,tileUrlFunction:e.tileUrlFunction,tilePixelRatio:e.tilePixelRatio,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX}),this.format_=e.format?e.format:null,this.sourceTiles_={},this.overlaps_=void 0==e.overlaps||e.overlaps,this.tileClass=e.tileClass?e.tileClass:ol.VectorTile,this.tileGrids_={},this.tileGrid||(this.tileGrid=this.getTileGridForProjection(ol.proj.get(e.projection||"EPSG:3857")))};ol.inherits(ol.source.VectorTile,ol.source.UrlTile),ol.source.VectorTile.prototype.getOverlaps=function(){return this.overlaps_},ol.source.VectorTile.prototype.getTile=function(e,t,o,r,i){var n=this.getKeyZXY(e,t,o);if(this.tileCache.containsKey(n))return this.tileCache.get(n);var a=[e,t,o],l=this.getTileCoordForTileUrlFunction(a,i),s=l?this.tileUrlFunction(l,r,i):void 0,p=new ol.VectorImageTile(a,void 0!==s?ol.TileState.IDLE:ol.TileState.EMPTY,void 0!==s?s:"",this.format_,this.tileLoadFunction,l,this.tileUrlFunction,this.tileGrid,this.getTileGridForProjection(i),this.sourceTiles_,r,i,this.tileClass,this.handleTileChange.bind(this));return this.tileCache.set(n,p),p},ol.source.VectorTile.prototype.getTileGridForProjection=function(e){var t=e.getCode(),o=this.tileGrids_[t];if(!o){var r=this.tileGrid;o=this.tileGrids_[t]=ol.tilegrid.createForProjection(e,void 0,r?r.getTileSize(r.getMinZoom()):void 0)}return o},ol.source.VectorTile.prototype.getTilePixelRatio=function(e){return void 0==e?ol.source.UrlTile.prototype.getTilePixelRatio.call(this,e):e},ol.source.VectorTile.prototype.getTilePixelSize=function(e,t,o){var r=ol.size.toSize(this.getTileGridForProjection(o).getTileSize(e));return[Math.round(r[0]*t),Math.round(r[1]*t)]},goog.provide("ol.source.WMTSRequestEncoding"),ol.source.WMTSRequestEncoding={KVP:"KVP",REST:"REST"},goog.provide("ol.tilegrid.WMTS"),goog.require("ol"),goog.require("ol.array"),goog.require("ol.proj"),goog.require("ol.tilegrid.TileGrid"),ol.tilegrid.WMTS=function(e){this.matrixIds_=e.matrixIds,ol.tilegrid.TileGrid.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})},ol.inherits(ol.tilegrid.WMTS,ol.tilegrid.TileGrid),ol.tilegrid.WMTS.prototype.getMatrixId=function(e){return this.matrixIds_[e]},ol.tilegrid.WMTS.prototype.getMatrixIds=function(){return this.matrixIds_},ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet=function(e,t,o){var r,i=[],n=[],a=[],l=[],s=[],p=void 0!==o?o:[],g="SupportedCRS",u="TileMatrix",c="Identifier",y="ScaleDenominator",h="TopLeftCorner",d="TileWidth",f="TileHeight";r=ol.proj.get(e[g].replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var m=r.getMetersPerUnit(),v="ne"==r.getAxisOrientation().substr(0,2);return e[u].sort(function(e,t){return t[y]-e[y]}),e[u].forEach(function(e,t,o){var r;if(r=!(p.length>0)||ol.array.find(p,function(t,o,r){return e[c]==t[u]})){n.push(e[c]);var g=28e-5*e[y]/m,_=e[d],S=e[f];v?a.push([e[h][1],e[h][0]]):a.push(e[h]),i.push(g),l.push(_==S?_:[_,S]),s.push([e.MatrixWidth,-e.MatrixHeight])}}),new ol.tilegrid.WMTS({extent:t,origins:a,resolutions:i,matrixIds:n,tileSizes:l,sizes:s})},goog.provide("ol.source.WMTS"),goog.require("ol"),goog.require("ol.TileUrlFunction"),goog.require("ol.array"),goog.require("ol.extent"),goog.require("ol.obj"),goog.require("ol.proj"),goog.require("ol.source.TileImage"),goog.require("ol.source.WMTSRequestEncoding"),goog.require("ol.tilegrid.WMTS"),goog.require("ol.uri"),ol.source.WMTS=function(e){function t(e){return e=r==ol.source.WMTSRequestEncoding.KVP?ol.uri.appendParams(e,n):e.replace(/\{(\w+?)\}/g,function(e,t){return t.toLowerCase()in n?n[t.toLowerCase()]:e}),function(t,o,n){if(t){var l={TileMatrix:i.getMatrixId(t[0]),TileCol:t[1],TileRow:-t[2]-1};ol.obj.assign(l,a);var s=e;return s=r==ol.source.WMTSRequestEncoding.KVP?ol.uri.appendParams(s,l):s.replace(/\{(\w+?)\}/g,function(e,t){return l[t]})}}}this.version_=void 0!==e.version?e.version:"1.0.0",this.format_=void 0!==e.format?e.format:"image/jpeg",this.dimensions_=void 0!==e.dimensions?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style;var o=e.urls;void 0===o&&void 0!==e.url&&(o=ol.TileUrlFunction.expandUrl(e.url)),this.requestEncoding_=void 0!==e.requestEncoding?e.requestEncoding:ol.source.WMTSRequestEncoding.KVP;var r=this.requestEncoding_,i=e.tileGrid,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};r==ol.source.WMTSRequestEncoding.KVP&&ol.obj.assign(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_});var a=this.dimensions_,l=o&&o.length>0?ol.TileUrlFunction.createFromTileUrlFunctions(o.map(t)):ol.TileUrlFunction.nullTileUrlFunction;ol.source.TileImage.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,logo:e.logo,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:l,urls:o,wrapX:void 0!==e.wrapX&&e.wrapX}),this.setKey(this.getKeyForDimensions_())},ol.inherits(ol.source.WMTS,ol.source.TileImage),ol.source.WMTS.prototype.getDimensions=function(){return this.dimensions_},ol.source.WMTS.prototype.getFormat=function(){return this.format_},ol.source.WMTS.prototype.getLayer=function(){return this.layer_},ol.source.WMTS.prototype.getMatrixSet=function(){return this.matrixSet_},ol.source.WMTS.prototype.getRequestEncoding=function(){return this.requestEncoding_},ol.source.WMTS.prototype.getStyle=function(){return this.style_},ol.source.WMTS.prototype.getVersion=function(){return this.version_},ol.source.WMTS.prototype.getKeyForDimensions_=function(){
var e=0,t=[];for(var o in this.dimensions_)t[e++]=o+"-"+this.dimensions_[o];return t.join("/")},ol.source.WMTS.prototype.updateDimensions=function(e){ol.obj.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())},ol.source.WMTS.optionsFromCapabilities=function(e,t){var o=e.Contents.Layer,r=ol.array.find(o,function(e,o,r){return e.Identifier==t.layer});if(null===r)return null;var i,n,a,l=e.Contents.TileMatrixSet;i=r.TileMatrixSetLink.length>1?"projection"in t?ol.array.findIndex(r.TileMatrixSetLink,function(e,o,r){var i=ol.array.find(l,function(t){return t.Identifier==e.TileMatrixSet}),n=i.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"),a=ol.proj.get(n),s=ol.proj.get(t.projection);return a&&s?ol.proj.equivalent(a,s):n==t.projection}):ol.array.findIndex(r.TileMatrixSetLink,function(e,o,r){return e.TileMatrixSet==t.matrixSet}):0,i<0&&(i=0),n=r.TileMatrixSetLink[i].TileMatrixSet,a=r.TileMatrixSetLink[i].TileMatrixSetLimits;var s=r.Format[0];"format"in t&&(s=t.format),i=ol.array.findIndex(r.Style,function(e,o,r){return"style"in t?e.Title==t.style:e.isDefault}),i<0&&(i=0);var p=r.Style[i].Identifier,g={};"Dimension"in r&&r.Dimension.forEach(function(e,t,o){var r=e.Identifier,i=e.Default;void 0===i&&(i=e.Value[0]),g[r]=i});var u,c=e.Contents.TileMatrixSet,y=ol.array.find(c,function(e,t,o){return e.Identifier==n});u="projection"in t?ol.proj.get(t.projection):ol.proj.get(y.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var h,d,f=r.WGS84BoundingBox;if(void 0!==f){var m=ol.proj.get("EPSG:4326").getExtent();d=f[0]==m[0]&&f[2]==m[2],h=ol.proj.transformExtent(f,"EPSG:4326",u);var v=u.getExtent();v&&(ol.extent.containsExtent(v,h)||(h=void 0))}var _=ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet(y,h,a),S=[],x=t.requestEncoding;if(x=void 0!==x?x:"","OperationsMetadata"in e&&"GetTile"in e.OperationsMetadata)for(var E=e.OperationsMetadata.GetTile.DCP.HTTP.Get,P=0,T=E.length;P<T;++P){var R=ol.array.find(E[P].Constraint,function(e){return"GetEncoding"==e.name}),L=R.AllowedValues.Value;if(""===x&&(x=L[0]),x!==ol.source.WMTSRequestEncoding.KVP)break;ol.array.includes(L,ol.source.WMTSRequestEncoding.KVP)&&S.push(E[P].href)}return 0===S.length&&(x=ol.source.WMTSRequestEncoding.REST,r.ResourceURL.forEach(function(e){"tile"===e.resourceType&&(s=e.format,S.push(e.template))})),{urls:S,layer:t.layer,matrixSet:n,format:s,projection:u,requestEncoding:x,tileGrid:_,style:p,dimensions:g,wrapX:d,crossOrigin:t.crossOrigin}},goog.provide("ol.source.Zoomify"),goog.require("ol"),goog.require("ol.ImageTile"),goog.require("ol.TileState"),goog.require("ol.TileUrlFunction"),goog.require("ol.asserts"),goog.require("ol.dom"),goog.require("ol.extent"),goog.require("ol.source.TileImage"),goog.require("ol.tilegrid.TileGrid"),ol.source.Zoomify=function(e){function t(e){return function(t,o,r){if(t){var i=t[0],n=t[1],a=-t[2]-1,s=n+a*l[i][0]+h[i],p=s/ol.DEFAULT_TILE_SIZE|0,g={z:i,x:n,y:a,TileGroup:"TileGroup"+p};return e.replace(/\{(\w+?)\}/g,function(e,t){return g[t]})}}}var o=e||{},r=o.size,i=void 0!==o.tierSizeCalculation?o.tierSizeCalculation:ol.source.Zoomify.TierSizeCalculation_.DEFAULT,n=r[0],a=r[1],l=[],s=ol.DEFAULT_TILE_SIZE;switch(i){case ol.source.Zoomify.TierSizeCalculation_.DEFAULT:for(;n>s||a>s;)l.push([Math.ceil(n/s),Math.ceil(a/s)]),s+=s;break;case ol.source.Zoomify.TierSizeCalculation_.TRUNCATED:for(var p=n,g=a;p>s||g>s;)l.push([Math.ceil(p/s),Math.ceil(g/s)]),p>>=1,g>>=1;break;default:ol.asserts.assert(!1,53)}l.push([1,1]),l.reverse();var u,c,y=[1],h=[0];for(u=1,c=l.length;u<c;u++)y.push(1<<u),h.push(l[u-1][0]*l[u-1][1]+h[u-1]);y.reverse();var d=[0,-r[1],r[0],0],f=new ol.tilegrid.TileGrid({extent:d,origin:ol.extent.getTopLeft(d),resolutions:y}),m=o.url;m&&m.indexOf("{TileGroup}")==-1&&(m+="{TileGroup}/{z}-{x}-{y}.jpg");var v=ol.TileUrlFunction.expandUrl(m),_=ol.TileUrlFunction.createFromTileUrlFunctions(v.map(t));ol.source.TileImage.call(this,{attributions:o.attributions,cacheSize:o.cacheSize,crossOrigin:o.crossOrigin,logo:o.logo,projection:o.projection,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileClass:ol.source.Zoomify.Tile_,tileGrid:f,tileUrlFunction:_})},ol.inherits(ol.source.Zoomify,ol.source.TileImage),ol.source.Zoomify.Tile_=function(e,t,o,r,i){ol.ImageTile.call(this,e,t,o,r,i),this.zoomifyImage_=null},ol.inherits(ol.source.Zoomify.Tile_,ol.ImageTile),ol.source.Zoomify.Tile_.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var e=ol.DEFAULT_TILE_SIZE,t=ol.ImageTile.prototype.getImage.call(this);if(this.state==ol.TileState.LOADED){if(t.width==e&&t.height==e)return this.zoomifyImage_=t,t;var o=ol.dom.createCanvasContext2D(e,e);return o.drawImage(t,0,0),this.zoomifyImage_=o.canvas,o.canvas}return t},ol.source.Zoomify.TierSizeCalculation_={DEFAULT:"default",TRUNCATED:"truncated"},goog.provide("ol.style.Atlas"),goog.require("ol.dom"),ol.style.Atlas=function(e,t){this.space_=t,this.emptyBlocks_=[{x:0,y:0,width:e,height:e}],this.entries_={},this.context_=ol.dom.createCanvasContext2D(e,e),this.canvas_=this.context_.canvas},ol.style.Atlas.prototype.get=function(e){return this.entries_[e]||null},ol.style.Atlas.prototype.add=function(e,t,o,r,i){var n,a,l;for(a=0,l=this.emptyBlocks_.length;a<l;++a)if(n=this.emptyBlocks_[a],n.width>=t+this.space_&&n.height>=o+this.space_){var s={offsetX:n.x+this.space_,offsetY:n.y+this.space_,image:this.canvas_};return this.entries_[e]=s,r.call(i,this.context_,n.x+this.space_,n.y+this.space_),this.split_(a,n,t+this.space_,o+this.space_),s}return null},ol.style.Atlas.prototype.split_=function(e,t,o,r){var i,n,a=t.width-o,l=t.height-r;a>l?(i={x:t.x+o,y:t.y,width:t.width-o,height:t.height},n={x:t.x,y:t.y+r,width:o,height:t.height-r},this.updateBlocks_(e,i,n)):(i={x:t.x+o,y:t.y,width:t.width-o,height:r},n={x:t.x,y:t.y+r,width:t.width,height:t.height-r},this.updateBlocks_(e,i,n))},ol.style.Atlas.prototype.updateBlocks_=function(e,t,o){var r=[e,1];t.width>0&&t.height>0&&r.push(t),o.width>0&&o.height>0&&r.push(o),this.emptyBlocks_.splice.apply(this.emptyBlocks_,r)},goog.provide("ol.style.AtlasManager"),goog.require("ol"),goog.require("ol.style.Atlas"),ol.style.AtlasManager=function(e){var t=e||{};this.currentSize_=void 0!==t.initialSize?t.initialSize:ol.INITIAL_ATLAS_SIZE,this.maxSize_=void 0!==t.maxSize?t.maxSize:ol.MAX_ATLAS_SIZE!=-1?ol.MAX_ATLAS_SIZE:void 0!==ol.WEBGL_MAX_TEXTURE_SIZE?ol.WEBGL_MAX_TEXTURE_SIZE:2048,this.space_=void 0!==t.space?t.space:1,this.atlases_=[new ol.style.Atlas(this.currentSize_,this.space_)],this.currentHitSize_=this.currentSize_,this.hitAtlases_=[new ol.style.Atlas(this.currentHitSize_,this.space_)]},ol.style.AtlasManager.prototype.getInfo=function(e){var t=this.getInfo_(this.atlases_,e);if(!t)return null;var o=this.getInfo_(this.hitAtlases_,e);return this.mergeInfos_(t,o)},ol.style.AtlasManager.prototype.getInfo_=function(e,t){var o,r,i,n;for(i=0,n=e.length;i<n;++i)if(o=e[i],r=o.get(t))return r;return null},ol.style.AtlasManager.prototype.mergeInfos_=function(e,t){return{offsetX:e.offsetX,offsetY:e.offsetY,image:e.image,hitImage:t.image}},ol.style.AtlasManager.prototype.add=function(e,t,o,r,i,n){if(t+this.space_>this.maxSize_||o+this.space_>this.maxSize_)return null;var a=this.add_(!1,e,t,o,r,n);if(!a)return null;var l=void 0!==i?i:ol.nullFunction,s=this.add_(!0,e,t,o,l,n);return this.mergeInfos_(a,s)},ol.style.AtlasManager.prototype.add_=function(e,t,o,r,i,n){var a,l,s,p,g=e?this.hitAtlases_:this.atlases_;for(s=0,p=g.length;s<p;++s){if(a=g[s],l=a.add(t,o,r,i,n))return l;if(!l&&s===p-1){var u;e?(u=Math.min(2*this.currentHitSize_,this.maxSize_),this.currentHitSize_=u):(u=Math.min(2*this.currentSize_,this.maxSize_),this.currentSize_=u),a=new ol.style.Atlas(u,this.space_),g.push(a),++p}}return null},goog.addDependency("demos/editor/equationeditor.js",["goog.demos.editor.EquationEditor"],["goog.ui.equation.EquationEditorDialog"]),goog.addDependency("demos/editor/helloworld.js",["goog.demos.editor.HelloWorld"],["goog.dom","goog.dom.TagName","goog.editor.Plugin"]),goog.addDependency("demos/editor/helloworlddialog.js",["goog.demos.editor.HelloWorldDialog","goog.demos.editor.HelloWorldDialog.OkEvent"],["goog.dom.TagName","goog.events.Event","goog.string","goog.ui.editor.AbstractDialog","goog.ui.editor.AbstractDialog.Builder","goog.ui.editor.AbstractDialog.EventType"]),goog.addDependency("demos/editor/helloworlddialogplugin.js",["goog.demos.editor.HelloWorldDialogPlugin","goog.demos.editor.HelloWorldDialogPlugin.Command"],["goog.demos.editor.HelloWorldDialog","goog.dom.TagName","goog.editor.plugins.AbstractDialogPlugin","goog.editor.range","goog.functions","goog.ui.editor.AbstractDialog.EventType"]),goog.require("ol"),goog.require("ol.AssertionError"),goog.require("ol.Attribution"),goog.require("ol.Collection"),goog.require("ol.DeviceOrientation"),goog.require("ol.Feature"),goog.require("ol.Geolocation"),goog.require("ol.Graticule"),goog.require("ol.Image"),goog.require("ol.ImageTile"),goog.require("ol.Kinetic"),goog.require("ol.Map"),goog.require("ol.MapBrowserEvent"),goog.require("ol.MapEvent"),goog.require("ol.Object"),goog.require("ol.Observable"),goog.require("ol.Overlay"),goog.require("ol.Sphere"),goog.require("ol.Tile"),goog.require("ol.VectorTile"),goog.require("ol.View"),goog.require("ol.color"),goog.require("ol.colorlike"),goog.require("ol.control"),goog.require("ol.control.Attribution"),goog.require("ol.control.Control"),goog.require("ol.control.FullScreen"),goog.require("ol.control.MousePosition"),goog.require("ol.control.OverviewMap"),goog.require("ol.control.Rotate"),goog.require("ol.control.ScaleLine"),goog.require("ol.control.Zoom"),goog.require("ol.control.ZoomSlider"),goog.require("ol.control.ZoomToExtent"),goog.require("ol.coordinate"),goog.require("ol.easing"),goog.require("ol.events.Event"),goog.require("ol.events.condition"),goog.require("ol.extent"),goog.require("ol.featureloader"),goog.require("ol.format.EsriJSON"),goog.require("ol.format.Feature"),goog.require("ol.format.GML"),goog.require("ol.format.GML2"),goog.require("ol.format.GML3"),goog.require("ol.format.GMLBase"),goog.require("ol.format.GPX"),goog.require("ol.format.GeoJSON"),goog.require("ol.format.IGC"),goog.require("ol.format.KML"),goog.require("ol.format.MVT"),goog.require("ol.format.OSMXML"),goog.require("ol.format.Polyline"),goog.require("ol.format.TopoJSON"),goog.require("ol.format.WFS"),goog.require("ol.format.WKT"),goog.require("ol.format.WMSCapabilities"),goog.require("ol.format.WMSGetFeatureInfo"),goog.require("ol.format.WMTSCapabilities"),goog.require("ol.format.filter"),goog.require("ol.format.filter.And"),goog.require("ol.format.filter.Bbox"),goog.require("ol.format.filter.Comparison"),goog.require("ol.format.filter.ComparisonBinary"),goog.require("ol.format.filter.During"),goog.require("ol.format.filter.EqualTo"),goog.require("ol.format.filter.Filter"),goog.require("ol.format.filter.GreaterThan"),goog.require("ol.format.filter.GreaterThanOrEqualTo"),goog.require("ol.format.filter.Intersects"),goog.require("ol.format.filter.IsBetween"),goog.require("ol.format.filter.IsLike"),goog.require("ol.format.filter.IsNull"),goog.require("ol.format.filter.LessThan"),goog.require("ol.format.filter.LessThanOrEqualTo"),goog.require("ol.format.filter.Not"),goog.require("ol.format.filter.NotEqualTo"),goog.require("ol.format.filter.Or"),goog.require("ol.format.filter.Spatial"),goog.require("ol.format.filter.Within"),goog.require("ol.geom.Circle"),goog.require("ol.geom.Geometry"),goog.require("ol.geom.GeometryCollection"),goog.require("ol.geom.LineString"),goog.require("ol.geom.LinearRing"),goog.require("ol.geom.MultiLineString"),goog.require("ol.geom.MultiPoint"),goog.require("ol.geom.MultiPolygon"),goog.require("ol.geom.Point"),goog.require("ol.geom.Polygon"),goog.require("ol.geom.SimpleGeometry"),goog.require("ol.has"),goog.require("ol.interaction"),goog.require("ol.interaction.DoubleClickZoom"),goog.require("ol.interaction.DragAndDrop"),goog.require("ol.interaction.DragBox"),goog.require("ol.interaction.DragPan"),goog.require("ol.interaction.DragRotate"),goog.require("ol.interaction.DragRotateAndZoom"),goog.require("ol.interaction.DragZoom"),goog.require("ol.interaction.Draw"),goog.require("ol.interaction.Extent"),goog.require("ol.interaction.Interaction"),goog.require("ol.interaction.KeyboardPan"),goog.require("ol.interaction.KeyboardZoom"),goog.require("ol.interaction.Modify"),goog.require("ol.interaction.MouseWheelZoom"),goog.require("ol.interaction.PinchRotate"),goog.require("ol.interaction.PinchZoom"),goog.require("ol.interaction.Pointer"),goog.require("ol.interaction.Select"),goog.require("ol.interaction.Snap"),goog.require("ol.interaction.Translate"),goog.require("ol.layer.Base"),goog.require("ol.layer.Group"),goog.require("ol.layer.Heatmap"),goog.require("ol.layer.Image"),goog.require("ol.layer.Layer"),goog.require("ol.layer.Tile"),goog.require("ol.layer.Vector"),goog.require("ol.layer.VectorTile"),goog.require("ol.loadingstrategy"),goog.require("ol.proj");goog.require("ol.proj.Projection");goog.require("ol.proj.Units"),goog.require("ol.proj.common"),goog.require("ol.render"),goog.require("ol.render.Event"),goog.require("ol.render.Feature"),goog.require("ol.render.VectorContext"),goog.require("ol.render.canvas.Immediate"),goog.require("ol.render.webgl.Immediate"),goog.require("ol.size"),goog.require("ol.source.BingMaps"),goog.require("ol.source.CartoDB"),goog.require("ol.source.Cluster"),goog.require("ol.source.Image"),goog.require("ol.source.ImageArcGISRest"),goog.require("ol.source.ImageCanvas"),goog.require("ol.source.ImageMapGuide"),goog.require("ol.source.ImageStatic"),goog.require("ol.source.ImageVector"),goog.require("ol.source.ImageWMS"),goog.require("ol.source.OSM"),goog.require("ol.source.Raster"),goog.require("ol.source.Source"),goog.require("ol.source.Stamen"),goog.require("ol.source.Tile"),goog.require("ol.source.TileArcGISRest"),goog.require("ol.source.TileDebug"),goog.require("ol.source.TileImage"),goog.require("ol.source.TileJSON"),goog.require("ol.source.TileUTFGrid"),goog.require("ol.source.TileWMS"),goog.require("ol.source.UrlTile"),goog.require("ol.source.Vector"),goog.require("ol.source.VectorTile"),goog.require("ol.source.WMTS"),goog.require("ol.source.XYZ"),goog.require("ol.source.Zoomify"),goog.require("ol.style.AtlasManager"),goog.require("ol.style.Circle"),goog.require("ol.style.Fill"),goog.require("ol.style.Icon"),goog.require("ol.style.Image"),goog.require("ol.style.RegularShape"),goog.require("ol.style.Stroke"),goog.require("ol.style.Style"),goog.require("ol.style.Text"),goog.require("ol.tilegrid"),goog.require("ol.tilegrid.TileGrid"),goog.require("ol.tilegrid.WMTS"),goog.require("ol.webgl.Context"),goog.require("ol.xml"),goog.exportProperty(ol.AssertionError.prototype,"code",ol.AssertionError.prototype.code),goog.exportSymbol("ol.Attribution",ol.Attribution,OPENLAYERS),goog.exportProperty(ol.Attribution.prototype,"getHTML",ol.Attribution.prototype.getHTML),goog.exportSymbol("ol.Collection",ol.Collection,OPENLAYERS),goog.exportProperty(ol.Collection.prototype,"clear",ol.Collection.prototype.clear),goog.exportProperty(ol.Collection.prototype,"extend",ol.Collection.prototype.extend),goog.exportProperty(ol.Collection.prototype,"forEach",ol.Collection.prototype.forEach),goog.exportProperty(ol.Collection.prototype,"getArray",ol.Collection.prototype.getArray),goog.exportProperty(ol.Collection.prototype,"item",ol.Collection.prototype.item),goog.exportProperty(ol.Collection.prototype,"getLength",ol.Collection.prototype.getLength),goog.exportProperty(ol.Collection.prototype,"insertAt",ol.Collection.prototype.insertAt),goog.exportProperty(ol.Collection.prototype,"pop",ol.Collection.prototype.pop),goog.exportProperty(ol.Collection.prototype,"push",ol.Collection.prototype.push),goog.exportProperty(ol.Collection.prototype,"remove",ol.Collection.prototype.remove),goog.exportProperty(ol.Collection.prototype,"removeAt",ol.Collection.prototype.removeAt),goog.exportProperty(ol.Collection.prototype,"setAt",ol.Collection.prototype.setAt),goog.exportProperty(ol.Collection.Event.prototype,"element",ol.Collection.Event.prototype.element),goog.exportSymbol("ol.color.asArray",ol.color.asArray,OPENLAYERS),goog.exportSymbol("ol.color.asString",ol.color.asString,OPENLAYERS),goog.exportSymbol("ol.colorlike.asColorLike",ol.colorlike.asColorLike,OPENLAYERS),goog.exportSymbol("ol.control.defaults",ol.control.defaults,OPENLAYERS),goog.exportSymbol("ol.coordinate.add",ol.coordinate.add,OPENLAYERS),goog.exportSymbol("ol.coordinate.createStringXY",ol.coordinate.createStringXY,OPENLAYERS),goog.exportSymbol("ol.coordinate.format",ol.coordinate.format,OPENLAYERS),goog.exportSymbol("ol.coordinate.rotate",ol.coordinate.rotate,OPENLAYERS),goog.exportSymbol("ol.coordinate.toStringHDMS",ol.coordinate.toStringHDMS,OPENLAYERS),goog.exportSymbol("ol.coordinate.toStringXY",ol.coordinate.toStringXY,OPENLAYERS),goog.exportSymbol("ol.DeviceOrientation",ol.DeviceOrientation,OPENLAYERS),goog.exportProperty(ol.DeviceOrientation.prototype,"getAlpha",ol.DeviceOrientation.prototype.getAlpha),goog.exportProperty(ol.DeviceOrientation.prototype,"getBeta",ol.DeviceOrientation.prototype.getBeta),goog.exportProperty(ol.DeviceOrientation.prototype,"getGamma",ol.DeviceOrientation.prototype.getGamma),goog.exportProperty(ol.DeviceOrientation.prototype,"getHeading",ol.DeviceOrientation.prototype.getHeading),goog.exportProperty(ol.DeviceOrientation.prototype,"getTracking",ol.DeviceOrientation.prototype.getTracking),goog.exportProperty(ol.DeviceOrientation.prototype,"setTracking",ol.DeviceOrientation.prototype.setTracking),goog.exportSymbol("ol.easing.easeIn",ol.easing.easeIn,OPENLAYERS),goog.exportSymbol("ol.easing.easeOut",ol.easing.easeOut,OPENLAYERS),goog.exportSymbol("ol.easing.inAndOut",ol.easing.inAndOut,OPENLAYERS),goog.exportSymbol("ol.easing.linear",ol.easing.linear,OPENLAYERS),goog.exportSymbol("ol.easing.upAndDown",ol.easing.upAndDown,OPENLAYERS),goog.exportSymbol("ol.extent.boundingExtent",ol.extent.boundingExtent,OPENLAYERS),goog.exportSymbol("ol.extent.buffer",ol.extent.buffer,OPENLAYERS),goog.exportSymbol("ol.extent.containsCoordinate",ol.extent.containsCoordinate,OPENLAYERS),goog.exportSymbol("ol.extent.containsExtent",ol.extent.containsExtent,OPENLAYERS),goog.exportSymbol("ol.extent.containsXY",ol.extent.containsXY,OPENLAYERS),goog.exportSymbol("ol.extent.createEmpty",ol.extent.createEmpty,OPENLAYERS),goog.exportSymbol("ol.extent.equals",ol.extent.equals,OPENLAYERS),goog.exportSymbol("ol.extent.extend",ol.extent.extend,OPENLAYERS),goog.exportSymbol("ol.extent.getArea",ol.extent.getArea,OPENLAYERS),goog.exportSymbol("ol.extent.getBottomLeft",ol.extent.getBottomLeft,OPENLAYERS),goog.exportSymbol("ol.extent.getBottomRight",ol.extent.getBottomRight,OPENLAYERS),goog.exportSymbol("ol.extent.getCenter",ol.extent.getCenter,OPENLAYERS),goog.exportSymbol("ol.extent.getHeight",ol.extent.getHeight,OPENLAYERS),goog.exportSymbol("ol.extent.getIntersection",ol.extent.getIntersection,OPENLAYERS),goog.exportSymbol("ol.extent.getSize",ol.extent.getSize,OPENLAYERS),goog.exportSymbol("ol.extent.getTopLeft",ol.extent.getTopLeft,OPENLAYERS),goog.exportSymbol("ol.extent.getTopRight",ol.extent.getTopRight,OPENLAYERS),goog.exportSymbol("ol.extent.getWidth",ol.extent.getWidth,OPENLAYERS),goog.exportSymbol("ol.extent.intersects",ol.extent.intersects,OPENLAYERS),goog.exportSymbol("ol.extent.isEmpty",ol.extent.isEmpty,OPENLAYERS),goog.exportSymbol("ol.extent.applyTransform",ol.extent.applyTransform,OPENLAYERS),goog.exportSymbol("ol.Feature",ol.Feature,OPENLAYERS),goog.exportProperty(ol.Feature.prototype,"clone",ol.Feature.prototype.clone),goog.exportProperty(ol.Feature.prototype,"getGeometry",ol.Feature.prototype.getGeometry),goog.exportProperty(ol.Feature.prototype,"getId",ol.Feature.prototype.getId),goog.exportProperty(ol.Feature.prototype,"getGeometryName",ol.Feature.prototype.getGeometryName),goog.exportProperty(ol.Feature.prototype,"getStyle",ol.Feature.prototype.getStyle),goog.exportProperty(ol.Feature.prototype,"getStyleFunction",ol.Feature.prototype.getStyleFunction),goog.exportProperty(ol.Feature.prototype,"setGeometry",ol.Feature.prototype.setGeometry),goog.exportProperty(ol.Feature.prototype,"setStyle",ol.Feature.prototype.setStyle),goog.exportProperty(ol.Feature.prototype,"setId",ol.Feature.prototype.setId),goog.exportProperty(ol.Feature.prototype,"setGeometryName",ol.Feature.prototype.setGeometryName),goog.exportSymbol("ol.featureloader.xhr",ol.featureloader.xhr,OPENLAYERS),goog.exportSymbol("ol.Geolocation",ol.Geolocation,OPENLAYERS),goog.exportProperty(ol.Geolocation.prototype,"getAccuracy",ol.Geolocation.prototype.getAccuracy),goog.exportProperty(ol.Geolocation.prototype,"getAccuracyGeometry",ol.Geolocation.prototype.getAccuracyGeometry),goog.exportProperty(ol.Geolocation.prototype,"getAltitude",ol.Geolocation.prototype.getAltitude),goog.exportProperty(ol.Geolocation.prototype,"getAltitudeAccuracy",ol.Geolocation.prototype.getAltitudeAccuracy),goog.exportProperty(ol.Geolocation.prototype,"getHeading",ol.Geolocation.prototype.getHeading),goog.exportProperty(ol.Geolocation.prototype,"getPosition",ol.Geolocation.prototype.getPosition),goog.exportProperty(ol.Geolocation.prototype,"getProjection",ol.Geolocation.prototype.getProjection),goog.exportProperty(ol.Geolocation.prototype,"getSpeed",ol.Geolocation.prototype.getSpeed),goog.exportProperty(ol.Geolocation.prototype,"getTracking",ol.Geolocation.prototype.getTracking),goog.exportProperty(ol.Geolocation.prototype,"getTrackingOptions",ol.Geolocation.prototype.getTrackingOptions),goog.exportProperty(ol.Geolocation.prototype,"setProjection",ol.Geolocation.prototype.setProjection),goog.exportProperty(ol.Geolocation.prototype,"setTracking",ol.Geolocation.prototype.setTracking),goog.exportProperty(ol.Geolocation.prototype,"setTrackingOptions",ol.Geolocation.prototype.setTrackingOptions),goog.exportSymbol("ol.Graticule",ol.Graticule,OPENLAYERS),goog.exportProperty(ol.Graticule.prototype,"getMap",ol.Graticule.prototype.getMap),goog.exportProperty(ol.Graticule.prototype,"getMeridians",ol.Graticule.prototype.getMeridians),goog.exportProperty(ol.Graticule.prototype,"getParallels",ol.Graticule.prototype.getParallels),goog.exportProperty(ol.Graticule.prototype,"setMap",ol.Graticule.prototype.setMap),goog.exportSymbol("ol.has.DEVICE_PIXEL_RATIO",ol.has.DEVICE_PIXEL_RATIO,OPENLAYERS),goog.exportSymbol("ol.has.CANVAS",ol.has.CANVAS,OPENLAYERS),goog.exportSymbol("ol.has.DEVICE_ORIENTATION",ol.has.DEVICE_ORIENTATION,OPENLAYERS),goog.exportSymbol("ol.has.GEOLOCATION",ol.has.GEOLOCATION,OPENLAYERS),goog.exportSymbol("ol.has.TOUCH",ol.has.TOUCH,OPENLAYERS),goog.exportSymbol("ol.has.WEBGL",ol.has.WEBGL,OPENLAYERS),goog.exportProperty(ol.Image.prototype,"getImage",ol.Image.prototype.getImage),goog.exportProperty(ol.Image.prototype,"load",ol.Image.prototype.load),goog.exportProperty(ol.ImageTile.prototype,"getImage",ol.ImageTile.prototype.getImage),goog.exportSymbol("ol.inherits",ol.inherits,OPENLAYERS),goog.exportSymbol("ol.interaction.defaults",ol.interaction.defaults,OPENLAYERS),goog.exportSymbol("ol.Kinetic",ol.Kinetic,OPENLAYERS),goog.exportSymbol("ol.loadingstrategy.all",ol.loadingstrategy.all,OPENLAYERS),goog.exportSymbol("ol.loadingstrategy.bbox",ol.loadingstrategy.bbox,OPENLAYERS),goog.exportSymbol("ol.loadingstrategy.tile",ol.loadingstrategy.tile,OPENLAYERS),goog.exportSymbol("ol.Map",ol.Map,OPENLAYERS),goog.exportProperty(ol.Map.prototype,"addControl",ol.Map.prototype.addControl),goog.exportProperty(ol.Map.prototype,"addInteraction",ol.Map.prototype.addInteraction),goog.exportProperty(ol.Map.prototype,"addLayer",ol.Map.prototype.addLayer),goog.exportProperty(ol.Map.prototype,"addOverlay",ol.Map.prototype.addOverlay),goog.exportProperty(ol.Map.prototype,"forEachFeatureAtPixel",ol.Map.prototype.forEachFeatureAtPixel),goog.exportProperty(ol.Map.prototype,"forEachLayerAtPixel",ol.Map.prototype.forEachLayerAtPixel),goog.exportProperty(ol.Map.prototype,"hasFeatureAtPixel",ol.Map.prototype.hasFeatureAtPixel),goog.exportProperty(ol.Map.prototype,"getEventCoordinate",ol.Map.prototype.getEventCoordinate),goog.exportProperty(ol.Map.prototype,"getEventPixel",ol.Map.prototype.getEventPixel),goog.exportProperty(ol.Map.prototype,"getTarget",ol.Map.prototype.getTarget),goog.exportProperty(ol.Map.prototype,"getTargetElement",ol.Map.prototype.getTargetElement),goog.exportProperty(ol.Map.prototype,"getCoordinateFromPixel",ol.Map.prototype.getCoordinateFromPixel),goog.exportProperty(ol.Map.prototype,"getControls",ol.Map.prototype.getControls),goog.exportProperty(ol.Map.prototype,"getOverlays",ol.Map.prototype.getOverlays),goog.exportProperty(ol.Map.prototype,"getOverlayById",ol.Map.prototype.getOverlayById),goog.exportProperty(ol.Map.prototype,"getInteractions",ol.Map.prototype.getInteractions),goog.exportProperty(ol.Map.prototype,"getLayerGroup",ol.Map.prototype.getLayerGroup),goog.exportProperty(ol.Map.prototype,"getLayers",ol.Map.prototype.getLayers),goog.exportProperty(ol.Map.prototype,"getPixelFromCoordinate",ol.Map.prototype.getPixelFromCoordinate),goog.exportProperty(ol.Map.prototype,"getSize",ol.Map.prototype.getSize),goog.exportProperty(ol.Map.prototype,"getView",ol.Map.prototype.getView),goog.exportProperty(ol.Map.prototype,"getViewport",ol.Map.prototype.getViewport),goog.exportProperty(ol.Map.prototype,"renderSync",ol.Map.prototype.renderSync),goog.exportProperty(ol.Map.prototype,"render",ol.Map.prototype.render),goog.exportProperty(ol.Map.prototype,"removeControl",ol.Map.prototype.removeControl),goog.exportProperty(ol.Map.prototype,"removeInteraction",ol.Map.prototype.removeInteraction),goog.exportProperty(ol.Map.prototype,"removeLayer",ol.Map.prototype.removeLayer),goog.exportProperty(ol.Map.prototype,"removeOverlay",ol.Map.prototype.removeOverlay),goog.exportProperty(ol.Map.prototype,"setLayerGroup",ol.Map.prototype.setLayerGroup),goog.exportProperty(ol.Map.prototype,"setSize",ol.Map.prototype.setSize),goog.exportProperty(ol.Map.prototype,"setTarget",ol.Map.prototype.setTarget),goog.exportProperty(ol.Map.prototype,"setView",ol.Map.prototype.setView),goog.exportProperty(ol.Map.prototype,"updateSize",ol.Map.prototype.updateSize),goog.exportProperty(ol.MapBrowserEvent.prototype,"originalEvent",ol.MapBrowserEvent.prototype.originalEvent),goog.exportProperty(ol.MapBrowserEvent.prototype,"pixel",ol.MapBrowserEvent.prototype.pixel),goog.exportProperty(ol.MapBrowserEvent.prototype,"coordinate",ol.MapBrowserEvent.prototype.coordinate),goog.exportProperty(ol.MapBrowserEvent.prototype,"dragging",ol.MapBrowserEvent.prototype.dragging),goog.exportProperty(ol.MapEvent.prototype,"map",ol.MapEvent.prototype.map),goog.exportProperty(ol.MapEvent.prototype,"frameState",ol.MapEvent.prototype.frameState),goog.exportSymbol("ol.Object",ol.Object,OPENLAYERS),goog.exportProperty(ol.Object.prototype,"get",ol.Object.prototype.get),goog.exportProperty(ol.Object.prototype,"getKeys",ol.Object.prototype.getKeys),goog.exportProperty(ol.Object.prototype,"getProperties",ol.Object.prototype.getProperties);goog.exportProperty(ol.Object.prototype,"set",ol.Object.prototype.set);goog.exportProperty(ol.Object.prototype,"setProperties",ol.Object.prototype.setProperties),goog.exportProperty(ol.Object.prototype,"unset",ol.Object.prototype.unset),goog.exportProperty(ol.Object.Event.prototype,"key",ol.Object.Event.prototype.key),goog.exportProperty(ol.Object.Event.prototype,"oldValue",ol.Object.Event.prototype.oldValue),goog.exportSymbol("ol.Observable",ol.Observable,OPENLAYERS),goog.exportSymbol("ol.Observable.unByKey",ol.Observable.unByKey,OPENLAYERS),goog.exportProperty(ol.Observable.prototype,"changed",ol.Observable.prototype.changed),goog.exportProperty(ol.Observable.prototype,"dispatchEvent",ol.Observable.prototype.dispatchEvent),goog.exportProperty(ol.Observable.prototype,"getRevision",ol.Observable.prototype.getRevision),goog.exportProperty(ol.Observable.prototype,"on",ol.Observable.prototype.on),goog.exportProperty(ol.Observable.prototype,"once",ol.Observable.prototype.once),goog.exportProperty(ol.Observable.prototype,"un",ol.Observable.prototype.un),goog.exportSymbol("ol.Overlay",ol.Overlay,OPENLAYERS),goog.exportProperty(ol.Overlay.prototype,"getElement",ol.Overlay.prototype.getElement),goog.exportProperty(ol.Overlay.prototype,"getId",ol.Overlay.prototype.getId),goog.exportProperty(ol.Overlay.prototype,"getMap",ol.Overlay.prototype.getMap),goog.exportProperty(ol.Overlay.prototype,"getOffset",ol.Overlay.prototype.getOffset),goog.exportProperty(ol.Overlay.prototype,"getPosition",ol.Overlay.prototype.getPosition),goog.exportProperty(ol.Overlay.prototype,"getPositioning",ol.Overlay.prototype.getPositioning),goog.exportProperty(ol.Overlay.prototype,"setElement",ol.Overlay.prototype.setElement),goog.exportProperty(ol.Overlay.prototype,"setMap",ol.Overlay.prototype.setMap),goog.exportProperty(ol.Overlay.prototype,"setOffset",ol.Overlay.prototype.setOffset),goog.exportProperty(ol.Overlay.prototype,"setPosition",ol.Overlay.prototype.setPosition),goog.exportProperty(ol.Overlay.prototype,"setPositioning",ol.Overlay.prototype.setPositioning),goog.exportSymbol("ol.proj.METERS_PER_UNIT",ol.proj.METERS_PER_UNIT,OPENLAYERS),goog.exportSymbol("ol.proj.setProj4",ol.proj.setProj4,OPENLAYERS),goog.exportSymbol("ol.proj.getPointResolution",ol.proj.getPointResolution,OPENLAYERS),goog.exportSymbol("ol.proj.addEquivalentProjections",ol.proj.addEquivalentProjections,OPENLAYERS),goog.exportSymbol("ol.proj.addProjection",ol.proj.addProjection,OPENLAYERS),goog.exportSymbol("ol.proj.addCoordinateTransforms",ol.proj.addCoordinateTransforms,OPENLAYERS),goog.exportSymbol("ol.proj.fromLonLat",ol.proj.fromLonLat,OPENLAYERS),goog.exportSymbol("ol.proj.toLonLat",ol.proj.toLonLat,OPENLAYERS),goog.exportSymbol("ol.proj.get",ol.proj.get,OPENLAYERS),goog.exportSymbol("ol.proj.equivalent",ol.proj.equivalent,OPENLAYERS),goog.exportSymbol("ol.proj.getTransform",ol.proj.getTransform,OPENLAYERS),goog.exportSymbol("ol.proj.transform",ol.proj.transform,OPENLAYERS),goog.exportSymbol("ol.proj.transformExtent",ol.proj.transformExtent,OPENLAYERS),goog.exportSymbol("ol.render.toContext",ol.render.toContext,OPENLAYERS),goog.exportSymbol("ol.size.toSize",ol.size.toSize,OPENLAYERS),goog.exportSymbol("ol.Sphere",ol.Sphere,OPENLAYERS),goog.exportProperty(ol.Sphere.prototype,"geodesicArea",ol.Sphere.prototype.geodesicArea),goog.exportProperty(ol.Sphere.prototype,"haversineDistance",ol.Sphere.prototype.haversineDistance),goog.exportProperty(ol.Tile.prototype,"getTileCoord",ol.Tile.prototype.getTileCoord),goog.exportProperty(ol.Tile.prototype,"load",ol.Tile.prototype.load),goog.exportSymbol("ol.tilegrid.createXYZ",ol.tilegrid.createXYZ,OPENLAYERS),goog.exportProperty(ol.VectorTile.prototype,"getFormat",ol.VectorTile.prototype.getFormat),goog.exportProperty(ol.VectorTile.prototype,"getFeatures",ol.VectorTile.prototype.getFeatures),goog.exportProperty(ol.VectorTile.prototype,"getProjection",ol.VectorTile.prototype.getProjection),goog.exportProperty(ol.VectorTile.prototype,"setFeatures",ol.VectorTile.prototype.setFeatures),goog.exportProperty(ol.VectorTile.prototype,"setProjection",ol.VectorTile.prototype.setProjection),goog.exportProperty(ol.VectorTile.prototype,"setLoader",ol.VectorTile.prototype.setLoader),goog.exportSymbol("ol.View",ol.View,OPENLAYERS),goog.exportProperty(ol.View.prototype,"animate",ol.View.prototype.animate),goog.exportProperty(ol.View.prototype,"getAnimating",ol.View.prototype.getAnimating),goog.exportProperty(ol.View.prototype,"getInteracting",ol.View.prototype.getInteracting),goog.exportProperty(ol.View.prototype,"cancelAnimations",ol.View.prototype.cancelAnimations),goog.exportProperty(ol.View.prototype,"constrainCenter",ol.View.prototype.constrainCenter),goog.exportProperty(ol.View.prototype,"constrainResolution",ol.View.prototype.constrainResolution),goog.exportProperty(ol.View.prototype,"constrainRotation",ol.View.prototype.constrainRotation),goog.exportProperty(ol.View.prototype,"getCenter",ol.View.prototype.getCenter),
goog.exportProperty(ol.View.prototype,"calculateExtent",ol.View.prototype.calculateExtent),goog.exportProperty(ol.View.prototype,"getMaxResolution",ol.View.prototype.getMaxResolution),goog.exportProperty(ol.View.prototype,"getMinResolution",ol.View.prototype.getMinResolution),goog.exportProperty(ol.View.prototype,"getMaxZoom",ol.View.prototype.getMaxZoom),goog.exportProperty(ol.View.prototype,"setMaxZoom",ol.View.prototype.setMaxZoom),goog.exportProperty(ol.View.prototype,"getMinZoom",ol.View.prototype.getMinZoom),goog.exportProperty(ol.View.prototype,"setMinZoom",ol.View.prototype.setMinZoom),goog.exportProperty(ol.View.prototype,"getProjection",ol.View.prototype.getProjection),goog.exportProperty(ol.View.prototype,"getResolution",ol.View.prototype.getResolution),goog.exportProperty(ol.View.prototype,"getResolutions",ol.View.prototype.getResolutions),goog.exportProperty(ol.View.prototype,"getResolutionForExtent",ol.View.prototype.getResolutionForExtent),goog.exportProperty(ol.View.prototype,"getRotation",ol.View.prototype.getRotation),goog.exportProperty(ol.View.prototype,"getZoom",ol.View.prototype.getZoom),goog.exportProperty(ol.View.prototype,"getZoomForResolution",ol.View.prototype.getZoomForResolution),goog.exportProperty(ol.View.prototype,"fit",ol.View.prototype.fit),goog.exportProperty(ol.View.prototype,"centerOn",ol.View.prototype.centerOn),goog.exportProperty(ol.View.prototype,"rotate",ol.View.prototype.rotate),goog.exportProperty(ol.View.prototype,"setCenter",ol.View.prototype.setCenter),goog.exportProperty(ol.View.prototype,"setResolution",ol.View.prototype.setResolution),goog.exportProperty(ol.View.prototype,"setRotation",ol.View.prototype.setRotation),goog.exportProperty(ol.View.prototype,"setZoom",ol.View.prototype.setZoom),goog.exportSymbol("ol.xml.getAllTextContent",ol.xml.getAllTextContent,OPENLAYERS),goog.exportSymbol("ol.xml.parse",ol.xml.parse,OPENLAYERS),goog.exportProperty(ol.webgl.Context.prototype,"getGL",ol.webgl.Context.prototype.getGL),goog.exportProperty(ol.webgl.Context.prototype,"useProgram",ol.webgl.Context.prototype.useProgram),goog.exportSymbol("ol.tilegrid.TileGrid",ol.tilegrid.TileGrid,OPENLAYERS),goog.exportProperty(ol.tilegrid.TileGrid.prototype,"forEachTileCoord",ol.tilegrid.TileGrid.prototype.forEachTileCoord),goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getMaxZoom",ol.tilegrid.TileGrid.prototype.getMaxZoom),goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getMinZoom",ol.tilegrid.TileGrid.prototype.getMinZoom),goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getOrigin",ol.tilegrid.TileGrid.prototype.getOrigin),goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getResolution",ol.tilegrid.TileGrid.prototype.getResolution),goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getResolutions",ol.tilegrid.TileGrid.prototype.getResolutions),goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getTileCoordExtent",ol.tilegrid.TileGrid.prototype.getTileCoordExtent),goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getTileCoordForCoordAndResolution",ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndResolution),goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getTileCoordForCoordAndZ",ol.tilegrid.TileGrid.prototype.getTileCoordForCoordAndZ),goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getTileSize",ol.tilegrid.TileGrid.prototype.getTileSize),goog.exportProperty(ol.tilegrid.TileGrid.prototype,"getZForResolution",ol.tilegrid.TileGrid.prototype.getZForResolution),goog.exportSymbol("ol.tilegrid.WMTS",ol.tilegrid.WMTS,OPENLAYERS),goog.exportProperty(ol.tilegrid.WMTS.prototype,"getMatrixIds",ol.tilegrid.WMTS.prototype.getMatrixIds),goog.exportSymbol("ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet",ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet,OPENLAYERS),goog.exportSymbol("ol.style.AtlasManager",ol.style.AtlasManager,OPENLAYERS),goog.exportSymbol("ol.style.Circle",ol.style.Circle,OPENLAYERS),goog.exportProperty(ol.style.Circle.prototype,"setRadius",ol.style.Circle.prototype.setRadius),goog.exportSymbol("ol.style.Fill",ol.style.Fill,OPENLAYERS),goog.exportProperty(ol.style.Fill.prototype,"clone",ol.style.Fill.prototype.clone),goog.exportProperty(ol.style.Fill.prototype,"getColor",ol.style.Fill.prototype.getColor),goog.exportProperty(ol.style.Fill.prototype,"setColor",ol.style.Fill.prototype.setColor),goog.exportSymbol("ol.style.Icon",ol.style.Icon,OPENLAYERS),goog.exportProperty(ol.style.Icon.prototype,"clone",ol.style.Icon.prototype.clone),goog.exportProperty(ol.style.Icon.prototype,"getAnchor",ol.style.Icon.prototype.getAnchor),goog.exportProperty(ol.style.Icon.prototype,"getColor",ol.style.Icon.prototype.getColor),goog.exportProperty(ol.style.Icon.prototype,"getImage",ol.style.Icon.prototype.getImage),goog.exportProperty(ol.style.Icon.prototype,"getOrigin",ol.style.Icon.prototype.getOrigin),goog.exportProperty(ol.style.Icon.prototype,"getSrc",ol.style.Icon.prototype.getSrc),goog.exportProperty(ol.style.Icon.prototype,"getSize",ol.style.Icon.prototype.getSize),goog.exportProperty(ol.style.Icon.prototype,"load",ol.style.Icon.prototype.load),goog.exportSymbol("ol.style.Image",ol.style.Image,OPENLAYERS),goog.exportProperty(ol.style.Image.prototype,"getOpacity",ol.style.Image.prototype.getOpacity),goog.exportProperty(ol.style.Image.prototype,"getRotateWithView",ol.style.Image.prototype.getRotateWithView),goog.exportProperty(ol.style.Image.prototype,"getRotation",ol.style.Image.prototype.getRotation),goog.exportProperty(ol.style.Image.prototype,"getScale",ol.style.Image.prototype.getScale),goog.exportProperty(ol.style.Image.prototype,"getSnapToPixel",ol.style.Image.prototype.getSnapToPixel),goog.exportProperty(ol.style.Image.prototype,"setOpacity",ol.style.Image.prototype.setOpacity),goog.exportProperty(ol.style.Image.prototype,"setRotation",ol.style.Image.prototype.setRotation),goog.exportProperty(ol.style.Image.prototype,"setScale",ol.style.Image.prototype.setScale),goog.exportSymbol("ol.style.RegularShape",ol.style.RegularShape,OPENLAYERS),goog.exportProperty(ol.style.RegularShape.prototype,"clone",ol.style.RegularShape.prototype.clone),goog.exportProperty(ol.style.RegularShape.prototype,"getAnchor",ol.style.RegularShape.prototype.getAnchor),goog.exportProperty(ol.style.RegularShape.prototype,"getAngle",ol.style.RegularShape.prototype.getAngle),goog.exportProperty(ol.style.RegularShape.prototype,"getFill",ol.style.RegularShape.prototype.getFill),goog.exportProperty(ol.style.RegularShape.prototype,"getImage",ol.style.RegularShape.prototype.getImage),goog.exportProperty(ol.style.RegularShape.prototype,"getOrigin",ol.style.RegularShape.prototype.getOrigin),goog.exportProperty(ol.style.RegularShape.prototype,"getPoints",ol.style.RegularShape.prototype.getPoints),goog.exportProperty(ol.style.RegularShape.prototype,"getRadius",ol.style.RegularShape.prototype.getRadius),goog.exportProperty(ol.style.RegularShape.prototype,"getRadius2",ol.style.RegularShape.prototype.getRadius2),goog.exportProperty(ol.style.RegularShape.prototype,"getSize",ol.style.RegularShape.prototype.getSize),goog.exportProperty(ol.style.RegularShape.prototype,"getStroke",ol.style.RegularShape.prototype.getStroke),goog.exportSymbol("ol.style.Stroke",ol.style.Stroke,OPENLAYERS),goog.exportProperty(ol.style.Stroke.prototype,"clone",ol.style.Stroke.prototype.clone),goog.exportProperty(ol.style.Stroke.prototype,"getColor",ol.style.Stroke.prototype.getColor),goog.exportProperty(ol.style.Stroke.prototype,"getLineCap",ol.style.Stroke.prototype.getLineCap),goog.exportProperty(ol.style.Stroke.prototype,"getLineDash",ol.style.Stroke.prototype.getLineDash),goog.exportProperty(ol.style.Stroke.prototype,"getLineDashOffset",ol.style.Stroke.prototype.getLineDashOffset),goog.exportProperty(ol.style.Stroke.prototype,"getLineJoin",ol.style.Stroke.prototype.getLineJoin),goog.exportProperty(ol.style.Stroke.prototype,"getMiterLimit",ol.style.Stroke.prototype.getMiterLimit),goog.exportProperty(ol.style.Stroke.prototype,"getWidth",ol.style.Stroke.prototype.getWidth),goog.exportProperty(ol.style.Stroke.prototype,"setColor",ol.style.Stroke.prototype.setColor),goog.exportProperty(ol.style.Stroke.prototype,"setLineCap",ol.style.Stroke.prototype.setLineCap),goog.exportProperty(ol.style.Stroke.prototype,"setLineDash",ol.style.Stroke.prototype.setLineDash),goog.exportProperty(ol.style.Stroke.prototype,"setLineDashOffset",ol.style.Stroke.prototype.setLineDashOffset),goog.exportProperty(ol.style.Stroke.prototype,"setLineJoin",ol.style.Stroke.prototype.setLineJoin),goog.exportProperty(ol.style.Stroke.prototype,"setMiterLimit",ol.style.Stroke.prototype.setMiterLimit),goog.exportProperty(ol.style.Stroke.prototype,"setWidth",ol.style.Stroke.prototype.setWidth),goog.exportSymbol("ol.style.Style",ol.style.Style,OPENLAYERS),goog.exportProperty(ol.style.Style.prototype,"clone",ol.style.Style.prototype.clone),goog.exportProperty(ol.style.Style.prototype,"getGeometry",ol.style.Style.prototype.getGeometry),goog.exportProperty(ol.style.Style.prototype,"getGeometryFunction",ol.style.Style.prototype.getGeometryFunction),goog.exportProperty(ol.style.Style.prototype,"getFill",ol.style.Style.prototype.getFill),goog.exportProperty(ol.style.Style.prototype,"setFill",ol.style.Style.prototype.setFill),goog.exportProperty(ol.style.Style.prototype,"getImage",ol.style.Style.prototype.getImage),goog.exportProperty(ol.style.Style.prototype,"setImage",ol.style.Style.prototype.setImage),goog.exportProperty(ol.style.Style.prototype,"getStroke",ol.style.Style.prototype.getStroke),goog.exportProperty(ol.style.Style.prototype,"setStroke",ol.style.Style.prototype.setStroke),goog.exportProperty(ol.style.Style.prototype,"getText",ol.style.Style.prototype.getText),goog.exportProperty(ol.style.Style.prototype,"setText",ol.style.Style.prototype.setText),goog.exportProperty(ol.style.Style.prototype,"getZIndex",ol.style.Style.prototype.getZIndex),goog.exportProperty(ol.style.Style.prototype,"setGeometry",ol.style.Style.prototype.setGeometry),goog.exportProperty(ol.style.Style.prototype,"setZIndex",ol.style.Style.prototype.setZIndex),goog.exportSymbol("ol.style.Text",ol.style.Text,OPENLAYERS),goog.exportProperty(ol.style.Text.prototype,"clone",ol.style.Text.prototype.clone),goog.exportProperty(ol.style.Text.prototype,"getFont",ol.style.Text.prototype.getFont),goog.exportProperty(ol.style.Text.prototype,"getOffsetX",ol.style.Text.prototype.getOffsetX),goog.exportProperty(ol.style.Text.prototype,"getOffsetY",ol.style.Text.prototype.getOffsetY),goog.exportProperty(ol.style.Text.prototype,"getFill",ol.style.Text.prototype.getFill),goog.exportProperty(ol.style.Text.prototype,"getRotateWithView",ol.style.Text.prototype.getRotateWithView),goog.exportProperty(ol.style.Text.prototype,"getRotation",ol.style.Text.prototype.getRotation),goog.exportProperty(ol.style.Text.prototype,"getScale",ol.style.Text.prototype.getScale),goog.exportProperty(ol.style.Text.prototype,"getStroke",ol.style.Text.prototype.getStroke),goog.exportProperty(ol.style.Text.prototype,"getText",ol.style.Text.prototype.getText),goog.exportProperty(ol.style.Text.prototype,"getTextAlign",ol.style.Text.prototype.getTextAlign),goog.exportProperty(ol.style.Text.prototype,"getTextBaseline",ol.style.Text.prototype.getTextBaseline),goog.exportProperty(ol.style.Text.prototype,"setFont",ol.style.Text.prototype.setFont),goog.exportProperty(ol.style.Text.prototype,"setOffsetX",ol.style.Text.prototype.setOffsetX),goog.exportProperty(ol.style.Text.prototype,"setOffsetY",ol.style.Text.prototype.setOffsetY),goog.exportProperty(ol.style.Text.prototype,"setFill",ol.style.Text.prototype.setFill),goog.exportProperty(ol.style.Text.prototype,"setRotation",ol.style.Text.prototype.setRotation),goog.exportProperty(ol.style.Text.prototype,"setScale",ol.style.Text.prototype.setScale),goog.exportProperty(ol.style.Text.prototype,"setStroke",ol.style.Text.prototype.setStroke),goog.exportProperty(ol.style.Text.prototype,"setText",ol.style.Text.prototype.setText),goog.exportProperty(ol.style.Text.prototype,"setTextAlign",ol.style.Text.prototype.setTextAlign),goog.exportProperty(ol.style.Text.prototype,"setTextBaseline",ol.style.Text.prototype.setTextBaseline),goog.exportSymbol("ol.source.BingMaps",ol.source.BingMaps,OPENLAYERS),goog.exportSymbol("ol.source.BingMaps.TOS_ATTRIBUTION",ol.source.BingMaps.TOS_ATTRIBUTION,OPENLAYERS),goog.exportProperty(ol.source.BingMaps.prototype,"getApiKey",ol.source.BingMaps.prototype.getApiKey),goog.exportProperty(ol.source.BingMaps.prototype,"getImagerySet",ol.source.BingMaps.prototype.getImagerySet),goog.exportSymbol("ol.source.CartoDB",ol.source.CartoDB,OPENLAYERS),goog.exportProperty(ol.source.CartoDB.prototype,"getConfig",ol.source.CartoDB.prototype.getConfig),goog.exportProperty(ol.source.CartoDB.prototype,"updateConfig",ol.source.CartoDB.prototype.updateConfig),goog.exportProperty(ol.source.CartoDB.prototype,"setConfig",ol.source.CartoDB.prototype.setConfig),goog.exportSymbol("ol.source.Cluster",ol.source.Cluster,OPENLAYERS);goog.exportProperty(ol.source.Cluster.prototype,"getDistance",ol.source.Cluster.prototype.getDistance);goog.exportProperty(ol.source.Cluster.prototype,"getSource",ol.source.Cluster.prototype.getSource),goog.exportProperty(ol.source.Cluster.prototype,"setDistance",ol.source.Cluster.prototype.setDistance),goog.exportSymbol("ol.source.Image",ol.source.Image,OPENLAYERS),goog.exportProperty(ol.source.Image.Event.prototype,"image",ol.source.Image.Event.prototype.image),goog.exportSymbol("ol.source.ImageArcGISRest",ol.source.ImageArcGISRest,OPENLAYERS),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"getParams",ol.source.ImageArcGISRest.prototype.getParams),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"getImageLoadFunction",ol.source.ImageArcGISRest.prototype.getImageLoadFunction),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"getUrl",ol.source.ImageArcGISRest.prototype.getUrl),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"setImageLoadFunction",ol.source.ImageArcGISRest.prototype.setImageLoadFunction),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"setUrl",ol.source.ImageArcGISRest.prototype.setUrl),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"updateParams",ol.source.ImageArcGISRest.prototype.updateParams),goog.exportSymbol("ol.source.ImageCanvas",ol.source.ImageCanvas,OPENLAYERS),goog.exportSymbol("ol.source.ImageMapGuide",ol.source.ImageMapGuide,OPENLAYERS),goog.exportProperty(ol.source.ImageMapGuide.prototype,"getParams",ol.source.ImageMapGuide.prototype.getParams),goog.exportProperty(ol.source.ImageMapGuide.prototype,"getImageLoadFunction",ol.source.ImageMapGuide.prototype.getImageLoadFunction),goog.exportProperty(ol.source.ImageMapGuide.prototype,"updateParams",ol.source.ImageMapGuide.prototype.updateParams),goog.exportProperty(ol.source.ImageMapGuide.prototype,"setImageLoadFunction",ol.source.ImageMapGuide.prototype.setImageLoadFunction),goog.exportSymbol("ol.source.ImageStatic",ol.source.ImageStatic,OPENLAYERS),goog.exportSymbol("ol.source.ImageVector",ol.source.ImageVector,OPENLAYERS),goog.exportProperty(ol.source.ImageVector.prototype,"getSource",ol.source.ImageVector.prototype.getSource),goog.exportProperty(ol.source.ImageVector.prototype,"getStyle",ol.source.ImageVector.prototype.getStyle),goog.exportProperty(ol.source.ImageVector.prototype,"getStyleFunction",ol.source.ImageVector.prototype.getStyleFunction),goog.exportProperty(ol.source.ImageVector.prototype,"setStyle",ol.source.ImageVector.prototype.setStyle),goog.exportSymbol("ol.source.ImageWMS",ol.source.ImageWMS,OPENLAYERS),goog.exportProperty(ol.source.ImageWMS.prototype,"getGetFeatureInfoUrl",ol.source.ImageWMS.prototype.getGetFeatureInfoUrl),goog.exportProperty(ol.source.ImageWMS.prototype,"getParams",ol.source.ImageWMS.prototype.getParams),goog.exportProperty(ol.source.ImageWMS.prototype,"getImageLoadFunction",ol.source.ImageWMS.prototype.getImageLoadFunction),goog.exportProperty(ol.source.ImageWMS.prototype,"getUrl",ol.source.ImageWMS.prototype.getUrl),goog.exportProperty(ol.source.ImageWMS.prototype,"setImageLoadFunction",ol.source.ImageWMS.prototype.setImageLoadFunction),goog.exportProperty(ol.source.ImageWMS.prototype,"setUrl",ol.source.ImageWMS.prototype.setUrl),goog.exportProperty(ol.source.ImageWMS.prototype,"updateParams",ol.source.ImageWMS.prototype.updateParams),goog.exportSymbol("ol.source.OSM",ol.source.OSM,OPENLAYERS),goog.exportSymbol("ol.source.OSM.ATTRIBUTION",ol.source.OSM.ATTRIBUTION,OPENLAYERS),goog.exportSymbol("ol.source.Raster",ol.source.Raster,OPENLAYERS),goog.exportProperty(ol.source.Raster.prototype,"setOperation",ol.source.Raster.prototype.setOperation),goog.exportProperty(ol.source.Raster.Event.prototype,"extent",ol.source.Raster.Event.prototype.extent),goog.exportProperty(ol.source.Raster.Event.prototype,"resolution",ol.source.Raster.Event.prototype.resolution),goog.exportProperty(ol.source.Raster.Event.prototype,"data",ol.source.Raster.Event.prototype.data),goog.exportSymbol("ol.source.Source",ol.source.Source,OPENLAYERS),goog.exportProperty(ol.source.Source.prototype,"getAttributions",ol.source.Source.prototype.getAttributions),goog.exportProperty(ol.source.Source.prototype,"getLogo",ol.source.Source.prototype.getLogo),goog.exportProperty(ol.source.Source.prototype,"getProjection",ol.source.Source.prototype.getProjection),goog.exportProperty(ol.source.Source.prototype,"getState",ol.source.Source.prototype.getState),goog.exportProperty(ol.source.Source.prototype,"refresh",ol.source.Source.prototype.refresh),goog.exportProperty(ol.source.Source.prototype,"setAttributions",ol.source.Source.prototype.setAttributions),goog.exportSymbol("ol.source.Stamen",ol.source.Stamen,OPENLAYERS),goog.exportSymbol("ol.source.Tile",ol.source.Tile,OPENLAYERS),goog.exportProperty(ol.source.Tile.prototype,"getTileGrid",ol.source.Tile.prototype.getTileGrid),goog.exportProperty(ol.source.Tile.Event.prototype,"tile",ol.source.Tile.Event.prototype.tile),goog.exportSymbol("ol.source.TileArcGISRest",ol.source.TileArcGISRest,OPENLAYERS),goog.exportProperty(ol.source.TileArcGISRest.prototype,"getParams",ol.source.TileArcGISRest.prototype.getParams),goog.exportProperty(ol.source.TileArcGISRest.prototype,"updateParams",ol.source.TileArcGISRest.prototype.updateParams),goog.exportSymbol("ol.source.TileDebug",ol.source.TileDebug,OPENLAYERS),goog.exportSymbol("ol.source.TileImage",ol.source.TileImage,OPENLAYERS),goog.exportProperty(ol.source.TileImage.prototype,"setRenderReprojectionEdges",ol.source.TileImage.prototype.setRenderReprojectionEdges),goog.exportProperty(ol.source.TileImage.prototype,"setTileGridForProjection",ol.source.TileImage.prototype.setTileGridForProjection),goog.exportSymbol("ol.source.TileJSON",ol.source.TileJSON,OPENLAYERS),goog.exportProperty(ol.source.TileJSON.prototype,"getTileJSON",ol.source.TileJSON.prototype.getTileJSON),goog.exportSymbol("ol.source.TileUTFGrid",ol.source.TileUTFGrid,OPENLAYERS),goog.exportProperty(ol.source.TileUTFGrid.prototype,"getTemplate",ol.source.TileUTFGrid.prototype.getTemplate),goog.exportProperty(ol.source.TileUTFGrid.prototype,"forDataAtCoordinateAndResolution",ol.source.TileUTFGrid.prototype.forDataAtCoordinateAndResolution),goog.exportSymbol("ol.source.TileWMS",ol.source.TileWMS,OPENLAYERS),goog.exportProperty(ol.source.TileWMS.prototype,"getGetFeatureInfoUrl",ol.source.TileWMS.prototype.getGetFeatureInfoUrl),goog.exportProperty(ol.source.TileWMS.prototype,"getParams",ol.source.TileWMS.prototype.getParams),goog.exportProperty(ol.source.TileWMS.prototype,"updateParams",ol.source.TileWMS.prototype.updateParams),goog.exportProperty(ol.source.UrlTile.prototype,"getTileLoadFunction",ol.source.UrlTile.prototype.getTileLoadFunction),goog.exportProperty(ol.source.UrlTile.prototype,"getTileUrlFunction",ol.source.UrlTile.prototype.getTileUrlFunction),goog.exportProperty(ol.source.UrlTile.prototype,"getUrls",ol.source.UrlTile.prototype.getUrls),goog.exportProperty(ol.source.UrlTile.prototype,"setTileLoadFunction",ol.source.UrlTile.prototype.setTileLoadFunction),goog.exportProperty(ol.source.UrlTile.prototype,"setTileUrlFunction",ol.source.UrlTile.prototype.setTileUrlFunction),goog.exportProperty(ol.source.UrlTile.prototype,"setUrl",ol.source.UrlTile.prototype.setUrl),goog.exportProperty(ol.source.UrlTile.prototype,"setUrls",ol.source.UrlTile.prototype.setUrls),goog.exportSymbol("ol.source.Vector",ol.source.Vector,OPENLAYERS),goog.exportProperty(ol.source.Vector.prototype,"addFeature",ol.source.Vector.prototype.addFeature),goog.exportProperty(ol.source.Vector.prototype,"addFeatures",ol.source.Vector.prototype.addFeatures),goog.exportProperty(ol.source.Vector.prototype,"clear",ol.source.Vector.prototype.clear),goog.exportProperty(ol.source.Vector.prototype,"forEachFeature",ol.source.Vector.prototype.forEachFeature),goog.exportProperty(ol.source.Vector.prototype,"forEachFeatureInExtent",ol.source.Vector.prototype.forEachFeatureInExtent),goog.exportProperty(ol.source.Vector.prototype,"forEachFeatureIntersectingExtent",ol.source.Vector.prototype.forEachFeatureIntersectingExtent),goog.exportProperty(ol.source.Vector.prototype,"getFeaturesCollection",ol.source.Vector.prototype.getFeaturesCollection),goog.exportProperty(ol.source.Vector.prototype,"getFeatures",ol.source.Vector.prototype.getFeatures),goog.exportProperty(ol.source.Vector.prototype,"getFeaturesAtCoordinate",ol.source.Vector.prototype.getFeaturesAtCoordinate),goog.exportProperty(ol.source.Vector.prototype,"getFeaturesInExtent",ol.source.Vector.prototype.getFeaturesInExtent),goog.exportProperty(ol.source.Vector.prototype,"getClosestFeatureToCoordinate",ol.source.Vector.prototype.getClosestFeatureToCoordinate),goog.exportProperty(ol.source.Vector.prototype,"getExtent",ol.source.Vector.prototype.getExtent),goog.exportProperty(ol.source.Vector.prototype,"getFeatureById",ol.source.Vector.prototype.getFeatureById),goog.exportProperty(ol.source.Vector.prototype,"getFormat",ol.source.Vector.prototype.getFormat),goog.exportProperty(ol.source.Vector.prototype,"getUrl",ol.source.Vector.prototype.getUrl),goog.exportProperty(ol.source.Vector.prototype,"removeFeature",ol.source.Vector.prototype.removeFeature),goog.exportProperty(ol.source.Vector.Event.prototype,"feature",ol.source.Vector.Event.prototype.feature),goog.exportSymbol("ol.source.VectorTile",ol.source.VectorTile,OPENLAYERS),goog.exportSymbol("ol.source.WMTS",ol.source.WMTS,OPENLAYERS),goog.exportProperty(ol.source.WMTS.prototype,"getDimensions",ol.source.WMTS.prototype.getDimensions),goog.exportProperty(ol.source.WMTS.prototype,"getFormat",ol.source.WMTS.prototype.getFormat),goog.exportProperty(ol.source.WMTS.prototype,"getLayer",ol.source.WMTS.prototype.getLayer),goog.exportProperty(ol.source.WMTS.prototype,"getMatrixSet",ol.source.WMTS.prototype.getMatrixSet),goog.exportProperty(ol.source.WMTS.prototype,"getRequestEncoding",ol.source.WMTS.prototype.getRequestEncoding),goog.exportProperty(ol.source.WMTS.prototype,"getStyle",ol.source.WMTS.prototype.getStyle),goog.exportProperty(ol.source.WMTS.prototype,"getVersion",ol.source.WMTS.prototype.getVersion),goog.exportProperty(ol.source.WMTS.prototype,"updateDimensions",ol.source.WMTS.prototype.updateDimensions),goog.exportSymbol("ol.source.WMTS.optionsFromCapabilities",ol.source.WMTS.optionsFromCapabilities,OPENLAYERS),goog.exportSymbol("ol.source.XYZ",ol.source.XYZ,OPENLAYERS),goog.exportSymbol("ol.source.Zoomify",ol.source.Zoomify,OPENLAYERS),goog.exportProperty(ol.render.Event.prototype,"vectorContext",ol.render.Event.prototype.vectorContext),goog.exportProperty(ol.render.Event.prototype,"frameState",ol.render.Event.prototype.frameState),goog.exportProperty(ol.render.Event.prototype,"context",ol.render.Event.prototype.context),goog.exportProperty(ol.render.Event.prototype,"glContext",ol.render.Event.prototype.glContext),goog.exportProperty(ol.render.Feature.prototype,"get",ol.render.Feature.prototype.get),goog.exportProperty(ol.render.Feature.prototype,"getExtent",ol.render.Feature.prototype.getExtent),goog.exportProperty(ol.render.Feature.prototype,"getId",ol.render.Feature.prototype.getId),goog.exportProperty(ol.render.Feature.prototype,"getGeometry",ol.render.Feature.prototype.getGeometry),goog.exportProperty(ol.render.Feature.prototype,"getProperties",ol.render.Feature.prototype.getProperties),goog.exportProperty(ol.render.Feature.prototype,"getType",ol.render.Feature.prototype.getType),goog.exportSymbol("ol.render.VectorContext",ol.render.VectorContext,OPENLAYERS),goog.exportProperty(ol.render.webgl.Immediate.prototype,"setStyle",ol.render.webgl.Immediate.prototype.setStyle),goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawGeometry",ol.render.webgl.Immediate.prototype.drawGeometry),goog.exportProperty(ol.render.webgl.Immediate.prototype,"drawFeature",ol.render.webgl.Immediate.prototype.drawFeature),goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawCircle",ol.render.canvas.Immediate.prototype.drawCircle),goog.exportProperty(ol.render.canvas.Immediate.prototype,"setStyle",ol.render.canvas.Immediate.prototype.setStyle),goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawGeometry",ol.render.canvas.Immediate.prototype.drawGeometry),goog.exportProperty(ol.render.canvas.Immediate.prototype,"drawFeature",ol.render.canvas.Immediate.prototype.drawFeature),goog.exportSymbol("ol.proj.common.add",ol.proj.common.add,OPENLAYERS),goog.exportSymbol("ol.proj.Projection",ol.proj.Projection,OPENLAYERS),goog.exportProperty(ol.proj.Projection.prototype,"getCode",ol.proj.Projection.prototype.getCode),goog.exportProperty(ol.proj.Projection.prototype,"getExtent",ol.proj.Projection.prototype.getExtent),goog.exportProperty(ol.proj.Projection.prototype,"getUnits",ol.proj.Projection.prototype.getUnits),goog.exportProperty(ol.proj.Projection.prototype,"getMetersPerUnit",ol.proj.Projection.prototype.getMetersPerUnit),goog.exportProperty(ol.proj.Projection.prototype,"getWorldExtent",ol.proj.Projection.prototype.getWorldExtent),goog.exportProperty(ol.proj.Projection.prototype,"isGlobal",ol.proj.Projection.prototype.isGlobal),goog.exportProperty(ol.proj.Projection.prototype,"setGlobal",ol.proj.Projection.prototype.setGlobal),goog.exportProperty(ol.proj.Projection.prototype,"setExtent",ol.proj.Projection.prototype.setExtent),goog.exportProperty(ol.proj.Projection.prototype,"setWorldExtent",ol.proj.Projection.prototype.setWorldExtent),goog.exportProperty(ol.proj.Projection.prototype,"setGetPointResolution",ol.proj.Projection.prototype.setGetPointResolution),goog.exportSymbol("ol.proj.Units.METERS_PER_UNIT",ol.proj.Units.METERS_PER_UNIT,OPENLAYERS),goog.exportSymbol("ol.layer.Base",ol.layer.Base,OPENLAYERS),goog.exportProperty(ol.layer.Base.prototype,"getExtent",ol.layer.Base.prototype.getExtent),goog.exportProperty(ol.layer.Base.prototype,"getMaxResolution",ol.layer.Base.prototype.getMaxResolution),goog.exportProperty(ol.layer.Base.prototype,"getMinResolution",ol.layer.Base.prototype.getMinResolution),goog.exportProperty(ol.layer.Base.prototype,"getOpacity",ol.layer.Base.prototype.getOpacity),goog.exportProperty(ol.layer.Base.prototype,"getVisible",ol.layer.Base.prototype.getVisible),goog.exportProperty(ol.layer.Base.prototype,"getZIndex",ol.layer.Base.prototype.getZIndex),goog.exportProperty(ol.layer.Base.prototype,"setExtent",ol.layer.Base.prototype.setExtent),goog.exportProperty(ol.layer.Base.prototype,"setMaxResolution",ol.layer.Base.prototype.setMaxResolution),goog.exportProperty(ol.layer.Base.prototype,"setMinResolution",ol.layer.Base.prototype.setMinResolution),goog.exportProperty(ol.layer.Base.prototype,"setOpacity",ol.layer.Base.prototype.setOpacity),goog.exportProperty(ol.layer.Base.prototype,"setVisible",ol.layer.Base.prototype.setVisible),goog.exportProperty(ol.layer.Base.prototype,"setZIndex",ol.layer.Base.prototype.setZIndex),goog.exportSymbol("ol.layer.Group",ol.layer.Group,OPENLAYERS),goog.exportProperty(ol.layer.Group.prototype,"getLayers",ol.layer.Group.prototype.getLayers),goog.exportProperty(ol.layer.Group.prototype,"setLayers",ol.layer.Group.prototype.setLayers),goog.exportSymbol("ol.layer.Heatmap",ol.layer.Heatmap,OPENLAYERS),goog.exportProperty(ol.layer.Heatmap.prototype,"getBlur",ol.layer.Heatmap.prototype.getBlur),goog.exportProperty(ol.layer.Heatmap.prototype,"getGradient",ol.layer.Heatmap.prototype.getGradient),goog.exportProperty(ol.layer.Heatmap.prototype,"getRadius",ol.layer.Heatmap.prototype.getRadius),goog.exportProperty(ol.layer.Heatmap.prototype,"setBlur",ol.layer.Heatmap.prototype.setBlur),goog.exportProperty(ol.layer.Heatmap.prototype,"setGradient",ol.layer.Heatmap.prototype.setGradient),goog.exportProperty(ol.layer.Heatmap.prototype,"setRadius",ol.layer.Heatmap.prototype.setRadius),goog.exportSymbol("ol.layer.Image",ol.layer.Image,OPENLAYERS),goog.exportProperty(ol.layer.Image.prototype,"getSource",ol.layer.Image.prototype.getSource),goog.exportSymbol("ol.layer.Layer",ol.layer.Layer,OPENLAYERS),goog.exportProperty(ol.layer.Layer.prototype,"getSource",ol.layer.Layer.prototype.getSource),goog.exportProperty(ol.layer.Layer.prototype,"setMap",ol.layer.Layer.prototype.setMap),goog.exportProperty(ol.layer.Layer.prototype,"setSource",ol.layer.Layer.prototype.setSource),goog.exportSymbol("ol.layer.Tile",ol.layer.Tile,OPENLAYERS),goog.exportProperty(ol.layer.Tile.prototype,"getPreload",ol.layer.Tile.prototype.getPreload),goog.exportProperty(ol.layer.Tile.prototype,"getSource",ol.layer.Tile.prototype.getSource),goog.exportProperty(ol.layer.Tile.prototype,"setPreload",ol.layer.Tile.prototype.setPreload),goog.exportProperty(ol.layer.Tile.prototype,"getUseInterimTilesOnError",ol.layer.Tile.prototype.getUseInterimTilesOnError),goog.exportProperty(ol.layer.Tile.prototype,"setUseInterimTilesOnError",ol.layer.Tile.prototype.setUseInterimTilesOnError),goog.exportSymbol("ol.layer.Vector",ol.layer.Vector,OPENLAYERS),goog.exportProperty(ol.layer.Vector.prototype,"getSource",ol.layer.Vector.prototype.getSource),goog.exportProperty(ol.layer.Vector.prototype,"getStyle",ol.layer.Vector.prototype.getStyle),goog.exportProperty(ol.layer.Vector.prototype,"getStyleFunction",ol.layer.Vector.prototype.getStyleFunction),goog.exportProperty(ol.layer.Vector.prototype,"setStyle",ol.layer.Vector.prototype.setStyle),goog.exportSymbol("ol.layer.VectorTile",ol.layer.VectorTile,OPENLAYERS),goog.exportProperty(ol.layer.VectorTile.prototype,"getPreload",ol.layer.VectorTile.prototype.getPreload),goog.exportProperty(ol.layer.VectorTile.prototype,"getUseInterimTilesOnError",ol.layer.VectorTile.prototype.getUseInterimTilesOnError),goog.exportProperty(ol.layer.VectorTile.prototype,"setPreload",ol.layer.VectorTile.prototype.setPreload),goog.exportProperty(ol.layer.VectorTile.prototype,"setUseInterimTilesOnError",ol.layer.VectorTile.prototype.setUseInterimTilesOnError),goog.exportSymbol("ol.interaction.DoubleClickZoom",ol.interaction.DoubleClickZoom,OPENLAYERS),goog.exportSymbol("ol.interaction.DoubleClickZoom.handleEvent",ol.interaction.DoubleClickZoom.handleEvent,OPENLAYERS),goog.exportSymbol("ol.interaction.DragAndDrop",ol.interaction.DragAndDrop,OPENLAYERS),goog.exportSymbol("ol.interaction.DragAndDrop.handleEvent",ol.interaction.DragAndDrop.handleEvent,OPENLAYERS),goog.exportProperty(ol.interaction.DragAndDrop.Event.prototype,"features",ol.interaction.DragAndDrop.Event.prototype.features),goog.exportProperty(ol.interaction.DragAndDrop.Event.prototype,"file",ol.interaction.DragAndDrop.Event.prototype.file),goog.exportProperty(ol.interaction.DragAndDrop.Event.prototype,"projection",ol.interaction.DragAndDrop.Event.prototype.projection),goog.exportSymbol("ol.interaction.DragBox",ol.interaction.DragBox,OPENLAYERS),goog.exportProperty(ol.interaction.DragBox.prototype,"getGeometry",ol.interaction.DragBox.prototype.getGeometry),goog.exportProperty(ol.interaction.DragBox.Event.prototype,"coordinate",ol.interaction.DragBox.Event.prototype.coordinate),goog.exportProperty(ol.interaction.DragBox.Event.prototype,"mapBrowserEvent",ol.interaction.DragBox.Event.prototype.mapBrowserEvent),
goog.exportSymbol("ol.interaction.DragPan",ol.interaction.DragPan,OPENLAYERS),goog.exportSymbol("ol.interaction.DragRotate",ol.interaction.DragRotate,OPENLAYERS),goog.exportSymbol("ol.interaction.DragRotateAndZoom",ol.interaction.DragRotateAndZoom,OPENLAYERS),goog.exportSymbol("ol.interaction.DragZoom",ol.interaction.DragZoom,OPENLAYERS),goog.exportSymbol("ol.interaction.Draw",ol.interaction.Draw,OPENLAYERS),goog.exportSymbol("ol.interaction.Draw.handleEvent",ol.interaction.Draw.handleEvent,OPENLAYERS),goog.exportProperty(ol.interaction.Draw.prototype,"removeLastPoint",ol.interaction.Draw.prototype.removeLastPoint),goog.exportProperty(ol.interaction.Draw.prototype,"finishDrawing",ol.interaction.Draw.prototype.finishDrawing),goog.exportProperty(ol.interaction.Draw.prototype,"extend",ol.interaction.Draw.prototype.extend),goog.exportSymbol("ol.interaction.Draw.createRegularPolygon",ol.interaction.Draw.createRegularPolygon,OPENLAYERS);goog.exportSymbol("ol.interaction.Draw.createBox",ol.interaction.Draw.createBox,OPENLAYERS);goog.exportProperty(ol.interaction.Draw.Event.prototype,"feature",ol.interaction.Draw.Event.prototype.feature),goog.exportSymbol("ol.interaction.Extent",ol.interaction.Extent,OPENLAYERS),goog.exportProperty(ol.interaction.Extent.prototype,"getExtent",ol.interaction.Extent.prototype.getExtent),goog.exportProperty(ol.interaction.Extent.prototype,"setExtent",ol.interaction.Extent.prototype.setExtent),goog.exportProperty(ol.interaction.Extent.Event.prototype,"extent_",ol.interaction.Extent.Event.prototype.extent_),goog.exportSymbol("ol.interaction.Interaction",ol.interaction.Interaction,OPENLAYERS),goog.exportProperty(ol.interaction.Interaction.prototype,"getActive",ol.interaction.Interaction.prototype.getActive),goog.exportProperty(ol.interaction.Interaction.prototype,"getMap",ol.interaction.Interaction.prototype.getMap),goog.exportProperty(ol.interaction.Interaction.prototype,"setActive",ol.interaction.Interaction.prototype.setActive),goog.exportSymbol("ol.interaction.KeyboardPan",ol.interaction.KeyboardPan,OPENLAYERS),goog.exportSymbol("ol.interaction.KeyboardPan.handleEvent",ol.interaction.KeyboardPan.handleEvent,OPENLAYERS),goog.exportSymbol("ol.interaction.KeyboardZoom",ol.interaction.KeyboardZoom,OPENLAYERS),goog.exportSymbol("ol.interaction.KeyboardZoom.handleEvent",ol.interaction.KeyboardZoom.handleEvent,OPENLAYERS),goog.exportSymbol("ol.interaction.Modify",ol.interaction.Modify,OPENLAYERS),goog.exportSymbol("ol.interaction.Modify.handleEvent",ol.interaction.Modify.handleEvent,OPENLAYERS),goog.exportProperty(ol.interaction.Modify.prototype,"removePoint",ol.interaction.Modify.prototype.removePoint),goog.exportProperty(ol.interaction.Modify.Event.prototype,"features",ol.interaction.Modify.Event.prototype.features),goog.exportProperty(ol.interaction.Modify.Event.prototype,"mapBrowserEvent",ol.interaction.Modify.Event.prototype.mapBrowserEvent),goog.exportSymbol("ol.interaction.MouseWheelZoom",ol.interaction.MouseWheelZoom,OPENLAYERS),goog.exportSymbol("ol.interaction.MouseWheelZoom.handleEvent",ol.interaction.MouseWheelZoom.handleEvent,OPENLAYERS),goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"setMouseAnchor",ol.interaction.MouseWheelZoom.prototype.setMouseAnchor),goog.exportSymbol("ol.interaction.PinchRotate",ol.interaction.PinchRotate,OPENLAYERS),goog.exportSymbol("ol.interaction.PinchZoom",ol.interaction.PinchZoom,OPENLAYERS),goog.exportSymbol("ol.interaction.Pointer",ol.interaction.Pointer,OPENLAYERS),goog.exportSymbol("ol.interaction.Pointer.handleEvent",ol.interaction.Pointer.handleEvent,OPENLAYERS),goog.exportSymbol("ol.interaction.Select",ol.interaction.Select,OPENLAYERS),goog.exportProperty(ol.interaction.Select.prototype,"getFeatures",ol.interaction.Select.prototype.getFeatures),goog.exportProperty(ol.interaction.Select.prototype,"getHitTolerance",ol.interaction.Select.prototype.getHitTolerance),goog.exportProperty(ol.interaction.Select.prototype,"getLayer",ol.interaction.Select.prototype.getLayer),goog.exportSymbol("ol.interaction.Select.handleEvent",ol.interaction.Select.handleEvent,OPENLAYERS),goog.exportProperty(ol.interaction.Select.prototype,"setHitTolerance",ol.interaction.Select.prototype.setHitTolerance),goog.exportProperty(ol.interaction.Select.prototype,"setMap",ol.interaction.Select.prototype.setMap),goog.exportProperty(ol.interaction.Select.Event.prototype,"selected",ol.interaction.Select.Event.prototype.selected),goog.exportProperty(ol.interaction.Select.Event.prototype,"deselected",ol.interaction.Select.Event.prototype.deselected),goog.exportProperty(ol.interaction.Select.Event.prototype,"mapBrowserEvent",ol.interaction.Select.Event.prototype.mapBrowserEvent),goog.exportSymbol("ol.interaction.Snap",ol.interaction.Snap,OPENLAYERS),goog.exportProperty(ol.interaction.Snap.prototype,"addFeature",ol.interaction.Snap.prototype.addFeature),goog.exportProperty(ol.interaction.Snap.prototype,"removeFeature",ol.interaction.Snap.prototype.removeFeature),goog.exportSymbol("ol.interaction.Translate",ol.interaction.Translate,OPENLAYERS),goog.exportProperty(ol.interaction.Translate.prototype,"getHitTolerance",ol.interaction.Translate.prototype.getHitTolerance),goog.exportProperty(ol.interaction.Translate.prototype,"setHitTolerance",ol.interaction.Translate.prototype.setHitTolerance),goog.exportProperty(ol.interaction.Translate.Event.prototype,"features",ol.interaction.Translate.Event.prototype.features),goog.exportProperty(ol.interaction.Translate.Event.prototype,"coordinate",ol.interaction.Translate.Event.prototype.coordinate),goog.exportSymbol("ol.geom.Circle",ol.geom.Circle,OPENLAYERS),goog.exportProperty(ol.geom.Circle.prototype,"clone",ol.geom.Circle.prototype.clone),goog.exportProperty(ol.geom.Circle.prototype,"getCenter",ol.geom.Circle.prototype.getCenter),goog.exportProperty(ol.geom.Circle.prototype,"getRadius",ol.geom.Circle.prototype.getRadius),goog.exportProperty(ol.geom.Circle.prototype,"getType",ol.geom.Circle.prototype.getType),goog.exportProperty(ol.geom.Circle.prototype,"intersectsExtent",ol.geom.Circle.prototype.intersectsExtent),goog.exportProperty(ol.geom.Circle.prototype,"setCenter",ol.geom.Circle.prototype.setCenter),goog.exportProperty(ol.geom.Circle.prototype,"setCenterAndRadius",ol.geom.Circle.prototype.setCenterAndRadius),goog.exportProperty(ol.geom.Circle.prototype,"setRadius",ol.geom.Circle.prototype.setRadius),goog.exportProperty(ol.geom.Circle.prototype,"transform",ol.geom.Circle.prototype.transform),goog.exportSymbol("ol.geom.Geometry",ol.geom.Geometry,OPENLAYERS),goog.exportProperty(ol.geom.Geometry.prototype,"getClosestPoint",ol.geom.Geometry.prototype.getClosestPoint),goog.exportProperty(ol.geom.Geometry.prototype,"intersectsCoordinate",ol.geom.Geometry.prototype.intersectsCoordinate),goog.exportProperty(ol.geom.Geometry.prototype,"getExtent",ol.geom.Geometry.prototype.getExtent),goog.exportProperty(ol.geom.Geometry.prototype,"rotate",ol.geom.Geometry.prototype.rotate),goog.exportProperty(ol.geom.Geometry.prototype,"scale",ol.geom.Geometry.prototype.scale),goog.exportProperty(ol.geom.Geometry.prototype,"simplify",ol.geom.Geometry.prototype.simplify),goog.exportProperty(ol.geom.Geometry.prototype,"transform",ol.geom.Geometry.prototype.transform),goog.exportSymbol("ol.geom.GeometryCollection",ol.geom.GeometryCollection,OPENLAYERS),goog.exportProperty(ol.geom.GeometryCollection.prototype,"clone",ol.geom.GeometryCollection.prototype.clone),goog.exportProperty(ol.geom.GeometryCollection.prototype,"getGeometries",ol.geom.GeometryCollection.prototype.getGeometries),goog.exportProperty(ol.geom.GeometryCollection.prototype,"getType",ol.geom.GeometryCollection.prototype.getType),goog.exportProperty(ol.geom.GeometryCollection.prototype,"intersectsExtent",ol.geom.GeometryCollection.prototype.intersectsExtent),goog.exportProperty(ol.geom.GeometryCollection.prototype,"setGeometries",ol.geom.GeometryCollection.prototype.setGeometries),goog.exportProperty(ol.geom.GeometryCollection.prototype,"applyTransform",ol.geom.GeometryCollection.prototype.applyTransform),goog.exportProperty(ol.geom.GeometryCollection.prototype,"translate",ol.geom.GeometryCollection.prototype.translate),goog.exportSymbol("ol.geom.LinearRing",ol.geom.LinearRing,OPENLAYERS),goog.exportProperty(ol.geom.LinearRing.prototype,"clone",ol.geom.LinearRing.prototype.clone),goog.exportProperty(ol.geom.LinearRing.prototype,"getArea",ol.geom.LinearRing.prototype.getArea),goog.exportProperty(ol.geom.LinearRing.prototype,"getCoordinates",ol.geom.LinearRing.prototype.getCoordinates),goog.exportProperty(ol.geom.LinearRing.prototype,"getType",ol.geom.LinearRing.prototype.getType),goog.exportProperty(ol.geom.LinearRing.prototype,"setCoordinates",ol.geom.LinearRing.prototype.setCoordinates),goog.exportSymbol("ol.geom.LineString",ol.geom.LineString,OPENLAYERS),goog.exportProperty(ol.geom.LineString.prototype,"appendCoordinate",ol.geom.LineString.prototype.appendCoordinate),goog.exportProperty(ol.geom.LineString.prototype,"clone",ol.geom.LineString.prototype.clone),goog.exportProperty(ol.geom.LineString.prototype,"forEachSegment",ol.geom.LineString.prototype.forEachSegment),goog.exportProperty(ol.geom.LineString.prototype,"getCoordinateAtM",ol.geom.LineString.prototype.getCoordinateAtM),goog.exportProperty(ol.geom.LineString.prototype,"getCoordinates",ol.geom.LineString.prototype.getCoordinates),goog.exportProperty(ol.geom.LineString.prototype,"getCoordinateAt",ol.geom.LineString.prototype.getCoordinateAt),goog.exportProperty(ol.geom.LineString.prototype,"getLength",ol.geom.LineString.prototype.getLength),goog.exportProperty(ol.geom.LineString.prototype,"getType",ol.geom.LineString.prototype.getType),goog.exportProperty(ol.geom.LineString.prototype,"intersectsExtent",ol.geom.LineString.prototype.intersectsExtent),goog.exportProperty(ol.geom.LineString.prototype,"setCoordinates",ol.geom.LineString.prototype.setCoordinates),goog.exportSymbol("ol.geom.MultiLineString",ol.geom.MultiLineString,OPENLAYERS),goog.exportProperty(ol.geom.MultiLineString.prototype,"appendLineString",ol.geom.MultiLineString.prototype.appendLineString),goog.exportProperty(ol.geom.MultiLineString.prototype,"clone",ol.geom.MultiLineString.prototype.clone),goog.exportProperty(ol.geom.MultiLineString.prototype,"getCoordinateAtM",ol.geom.MultiLineString.prototype.getCoordinateAtM),goog.exportProperty(ol.geom.MultiLineString.prototype,"getCoordinates",ol.geom.MultiLineString.prototype.getCoordinates),goog.exportProperty(ol.geom.MultiLineString.prototype,"getLineString",ol.geom.MultiLineString.prototype.getLineString),goog.exportProperty(ol.geom.MultiLineString.prototype,"getLineStrings",ol.geom.MultiLineString.prototype.getLineStrings),goog.exportProperty(ol.geom.MultiLineString.prototype,"getType",ol.geom.MultiLineString.prototype.getType),goog.exportProperty(ol.geom.MultiLineString.prototype,"intersectsExtent",ol.geom.MultiLineString.prototype.intersectsExtent),goog.exportProperty(ol.geom.MultiLineString.prototype,"setCoordinates",ol.geom.MultiLineString.prototype.setCoordinates),goog.exportSymbol("ol.geom.MultiPoint",ol.geom.MultiPoint,OPENLAYERS),goog.exportProperty(ol.geom.MultiPoint.prototype,"appendPoint",ol.geom.MultiPoint.prototype.appendPoint),goog.exportProperty(ol.geom.MultiPoint.prototype,"clone",ol.geom.MultiPoint.prototype.clone),goog.exportProperty(ol.geom.MultiPoint.prototype,"getCoordinates",ol.geom.MultiPoint.prototype.getCoordinates),goog.exportProperty(ol.geom.MultiPoint.prototype,"getPoint",ol.geom.MultiPoint.prototype.getPoint),goog.exportProperty(ol.geom.MultiPoint.prototype,"getPoints",ol.geom.MultiPoint.prototype.getPoints),goog.exportProperty(ol.geom.MultiPoint.prototype,"getType",ol.geom.MultiPoint.prototype.getType),goog.exportProperty(ol.geom.MultiPoint.prototype,"intersectsExtent",ol.geom.MultiPoint.prototype.intersectsExtent),goog.exportProperty(ol.geom.MultiPoint.prototype,"setCoordinates",ol.geom.MultiPoint.prototype.setCoordinates),goog.exportSymbol("ol.geom.MultiPolygon",ol.geom.MultiPolygon,OPENLAYERS),goog.exportProperty(ol.geom.MultiPolygon.prototype,"appendPolygon",ol.geom.MultiPolygon.prototype.appendPolygon),goog.exportProperty(ol.geom.MultiPolygon.prototype,"clone",ol.geom.MultiPolygon.prototype.clone),goog.exportProperty(ol.geom.MultiPolygon.prototype,"getArea",ol.geom.MultiPolygon.prototype.getArea),goog.exportProperty(ol.geom.MultiPolygon.prototype,"getCoordinates",ol.geom.MultiPolygon.prototype.getCoordinates),goog.exportProperty(ol.geom.MultiPolygon.prototype,"getInteriorPoints",ol.geom.MultiPolygon.prototype.getInteriorPoints),goog.exportProperty(ol.geom.MultiPolygon.prototype,"getPolygon",ol.geom.MultiPolygon.prototype.getPolygon),goog.exportProperty(ol.geom.MultiPolygon.prototype,"getPolygons",ol.geom.MultiPolygon.prototype.getPolygons),goog.exportProperty(ol.geom.MultiPolygon.prototype,"getType",ol.geom.MultiPolygon.prototype.getType),goog.exportProperty(ol.geom.MultiPolygon.prototype,"intersectsExtent",ol.geom.MultiPolygon.prototype.intersectsExtent),goog.exportProperty(ol.geom.MultiPolygon.prototype,"setCoordinates",ol.geom.MultiPolygon.prototype.setCoordinates),goog.exportSymbol("ol.geom.Point",ol.geom.Point,OPENLAYERS),goog.exportProperty(ol.geom.Point.prototype,"clone",ol.geom.Point.prototype.clone),goog.exportProperty(ol.geom.Point.prototype,"getCoordinates",ol.geom.Point.prototype.getCoordinates),goog.exportProperty(ol.geom.Point.prototype,"getType",ol.geom.Point.prototype.getType),goog.exportProperty(ol.geom.Point.prototype,"intersectsExtent",ol.geom.Point.prototype.intersectsExtent),goog.exportProperty(ol.geom.Point.prototype,"setCoordinates",ol.geom.Point.prototype.setCoordinates),goog.exportSymbol("ol.geom.Polygon",ol.geom.Polygon,OPENLAYERS),goog.exportProperty(ol.geom.Polygon.prototype,"appendLinearRing",ol.geom.Polygon.prototype.appendLinearRing),goog.exportProperty(ol.geom.Polygon.prototype,"clone",ol.geom.Polygon.prototype.clone),goog.exportProperty(ol.geom.Polygon.prototype,"getArea",ol.geom.Polygon.prototype.getArea),goog.exportProperty(ol.geom.Polygon.prototype,"getCoordinates",ol.geom.Polygon.prototype.getCoordinates),goog.exportProperty(ol.geom.Polygon.prototype,"getInteriorPoint",ol.geom.Polygon.prototype.getInteriorPoint),goog.exportProperty(ol.geom.Polygon.prototype,"getLinearRingCount",ol.geom.Polygon.prototype.getLinearRingCount),goog.exportProperty(ol.geom.Polygon.prototype,"getLinearRing",ol.geom.Polygon.prototype.getLinearRing),goog.exportProperty(ol.geom.Polygon.prototype,"getLinearRings",ol.geom.Polygon.prototype.getLinearRings),goog.exportProperty(ol.geom.Polygon.prototype,"getType",ol.geom.Polygon.prototype.getType),goog.exportProperty(ol.geom.Polygon.prototype,"intersectsExtent",ol.geom.Polygon.prototype.intersectsExtent),goog.exportProperty(ol.geom.Polygon.prototype,"setCoordinates",ol.geom.Polygon.prototype.setCoordinates),goog.exportSymbol("ol.geom.Polygon.circular",ol.geom.Polygon.circular,OPENLAYERS),goog.exportSymbol("ol.geom.Polygon.fromExtent",ol.geom.Polygon.fromExtent,OPENLAYERS),goog.exportSymbol("ol.geom.Polygon.fromCircle",ol.geom.Polygon.fromCircle,OPENLAYERS),goog.exportSymbol("ol.geom.SimpleGeometry",ol.geom.SimpleGeometry,OPENLAYERS),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getFirstCoordinate",ol.geom.SimpleGeometry.prototype.getFirstCoordinate),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getLastCoordinate",ol.geom.SimpleGeometry.prototype.getLastCoordinate),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getLayout",ol.geom.SimpleGeometry.prototype.getLayout),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"applyTransform",ol.geom.SimpleGeometry.prototype.applyTransform),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"translate",ol.geom.SimpleGeometry.prototype.translate),goog.exportSymbol("ol.format.EsriJSON",ol.format.EsriJSON,OPENLAYERS),goog.exportProperty(ol.format.EsriJSON.prototype,"readFeature",ol.format.EsriJSON.prototype.readFeature),goog.exportProperty(ol.format.EsriJSON.prototype,"readFeatures",ol.format.EsriJSON.prototype.readFeatures),goog.exportProperty(ol.format.EsriJSON.prototype,"readGeometry",ol.format.EsriJSON.prototype.readGeometry),goog.exportProperty(ol.format.EsriJSON.prototype,"readProjection",ol.format.EsriJSON.prototype.readProjection),goog.exportProperty(ol.format.EsriJSON.prototype,"writeGeometry",ol.format.EsriJSON.prototype.writeGeometry),goog.exportProperty(ol.format.EsriJSON.prototype,"writeGeometryObject",ol.format.EsriJSON.prototype.writeGeometryObject),goog.exportProperty(ol.format.EsriJSON.prototype,"writeFeature",ol.format.EsriJSON.prototype.writeFeature),goog.exportProperty(ol.format.EsriJSON.prototype,"writeFeatureObject",ol.format.EsriJSON.prototype.writeFeatureObject),goog.exportProperty(ol.format.EsriJSON.prototype,"writeFeatures",ol.format.EsriJSON.prototype.writeFeatures),goog.exportProperty(ol.format.EsriJSON.prototype,"writeFeaturesObject",ol.format.EsriJSON.prototype.writeFeaturesObject),goog.exportSymbol("ol.format.Feature",ol.format.Feature,OPENLAYERS),goog.exportSymbol("ol.format.filter.and",ol.format.filter.and,OPENLAYERS),goog.exportSymbol("ol.format.filter.or",ol.format.filter.or,OPENLAYERS),goog.exportSymbol("ol.format.filter.not",ol.format.filter.not,OPENLAYERS),goog.exportSymbol("ol.format.filter.bbox",ol.format.filter.bbox,OPENLAYERS),goog.exportSymbol("ol.format.filter.intersects",ol.format.filter.intersects,OPENLAYERS),goog.exportSymbol("ol.format.filter.within",ol.format.filter.within,OPENLAYERS),goog.exportSymbol("ol.format.filter.equalTo",ol.format.filter.equalTo,OPENLAYERS),goog.exportSymbol("ol.format.filter.notEqualTo",ol.format.filter.notEqualTo,OPENLAYERS),goog.exportSymbol("ol.format.filter.lessThan",ol.format.filter.lessThan,OPENLAYERS),goog.exportSymbol("ol.format.filter.lessThanOrEqualTo",ol.format.filter.lessThanOrEqualTo,OPENLAYERS),goog.exportSymbol("ol.format.filter.greaterThan",ol.format.filter.greaterThan,OPENLAYERS),goog.exportSymbol("ol.format.filter.greaterThanOrEqualTo",ol.format.filter.greaterThanOrEqualTo,OPENLAYERS),goog.exportSymbol("ol.format.filter.isNull",ol.format.filter.isNull,OPENLAYERS),goog.exportSymbol("ol.format.filter.between",ol.format.filter.between,OPENLAYERS),goog.exportSymbol("ol.format.filter.like",ol.format.filter.like,OPENLAYERS),goog.exportSymbol("ol.format.filter.during",ol.format.filter.during,OPENLAYERS),goog.exportSymbol("ol.format.GeoJSON",ol.format.GeoJSON,OPENLAYERS),goog.exportProperty(ol.format.GeoJSON.prototype,"readFeature",ol.format.GeoJSON.prototype.readFeature),goog.exportProperty(ol.format.GeoJSON.prototype,"readFeatures",ol.format.GeoJSON.prototype.readFeatures),goog.exportProperty(ol.format.GeoJSON.prototype,"readGeometry",ol.format.GeoJSON.prototype.readGeometry),goog.exportProperty(ol.format.GeoJSON.prototype,"readProjection",ol.format.GeoJSON.prototype.readProjection),goog.exportProperty(ol.format.GeoJSON.prototype,"writeFeature",ol.format.GeoJSON.prototype.writeFeature),goog.exportProperty(ol.format.GeoJSON.prototype,"writeFeatureObject",ol.format.GeoJSON.prototype.writeFeatureObject),goog.exportProperty(ol.format.GeoJSON.prototype,"writeFeatures",ol.format.GeoJSON.prototype.writeFeatures),goog.exportProperty(ol.format.GeoJSON.prototype,"writeFeaturesObject",ol.format.GeoJSON.prototype.writeFeaturesObject),goog.exportProperty(ol.format.GeoJSON.prototype,"writeGeometry",ol.format.GeoJSON.prototype.writeGeometry),goog.exportProperty(ol.format.GeoJSON.prototype,"writeGeometryObject",ol.format.GeoJSON.prototype.writeGeometryObject),goog.exportSymbol("ol.format.GML",ol.format.GML,OPENLAYERS),goog.exportProperty(ol.format.GML.prototype,"writeFeatures",ol.format.GML.prototype.writeFeatures),goog.exportProperty(ol.format.GML.prototype,"writeFeaturesNode",ol.format.GML.prototype.writeFeaturesNode),goog.exportSymbol("ol.format.GML2",ol.format.GML2,OPENLAYERS),goog.exportSymbol("ol.format.GML3",ol.format.GML3,OPENLAYERS),goog.exportProperty(ol.format.GML3.prototype,"writeGeometryNode",ol.format.GML3.prototype.writeGeometryNode),goog.exportProperty(ol.format.GML3.prototype,"writeFeatures",ol.format.GML3.prototype.writeFeatures),goog.exportProperty(ol.format.GML3.prototype,"writeFeaturesNode",ol.format.GML3.prototype.writeFeaturesNode),goog.exportProperty(ol.format.GMLBase.prototype,"readFeatures",ol.format.GMLBase.prototype.readFeatures),goog.exportSymbol("ol.format.GPX",ol.format.GPX,OPENLAYERS),goog.exportProperty(ol.format.GPX.prototype,"readFeature",ol.format.GPX.prototype.readFeature),goog.exportProperty(ol.format.GPX.prototype,"readFeatures",ol.format.GPX.prototype.readFeatures),goog.exportProperty(ol.format.GPX.prototype,"readProjection",ol.format.GPX.prototype.readProjection),goog.exportProperty(ol.format.GPX.prototype,"writeFeatures",ol.format.GPX.prototype.writeFeatures),goog.exportProperty(ol.format.GPX.prototype,"writeFeaturesNode",ol.format.GPX.prototype.writeFeaturesNode),goog.exportSymbol("ol.format.IGC",ol.format.IGC,OPENLAYERS),goog.exportProperty(ol.format.IGC.prototype,"readFeature",ol.format.IGC.prototype.readFeature),goog.exportProperty(ol.format.IGC.prototype,"readFeatures",ol.format.IGC.prototype.readFeatures);goog.exportProperty(ol.format.IGC.prototype,"readProjection",ol.format.IGC.prototype.readProjection);goog.exportSymbol("ol.format.KML",ol.format.KML,OPENLAYERS),goog.exportProperty(ol.format.KML.prototype,"readFeature",ol.format.KML.prototype.readFeature),goog.exportProperty(ol.format.KML.prototype,"readFeatures",ol.format.KML.prototype.readFeatures),goog.exportProperty(ol.format.KML.prototype,"readName",ol.format.KML.prototype.readName),goog.exportProperty(ol.format.KML.prototype,"readNetworkLinks",ol.format.KML.prototype.readNetworkLinks),goog.exportProperty(ol.format.KML.prototype,"readRegion",ol.format.KML.prototype.readRegion),goog.exportProperty(ol.format.KML.prototype,"readRegionFromNode",ol.format.KML.prototype.readRegionFromNode),goog.exportProperty(ol.format.KML.prototype,"readProjection",ol.format.KML.prototype.readProjection),goog.exportProperty(ol.format.KML.prototype,"writeFeatures",ol.format.KML.prototype.writeFeatures),goog.exportProperty(ol.format.KML.prototype,"writeFeaturesNode",ol.format.KML.prototype.writeFeaturesNode),goog.exportSymbol("ol.format.MVT",ol.format.MVT,OPENLAYERS),goog.exportProperty(ol.format.MVT.prototype,"readFeatures",ol.format.MVT.prototype.readFeatures),goog.exportProperty(ol.format.MVT.prototype,"readProjection",ol.format.MVT.prototype.readProjection),goog.exportProperty(ol.format.MVT.prototype,"setLayers",ol.format.MVT.prototype.setLayers),goog.exportSymbol("ol.format.OSMXML",ol.format.OSMXML,OPENLAYERS),goog.exportProperty(ol.format.OSMXML.prototype,"readFeatures",ol.format.OSMXML.prototype.readFeatures),goog.exportProperty(ol.format.OSMXML.prototype,"readProjection",ol.format.OSMXML.prototype.readProjection),goog.exportSymbol("ol.format.Polyline",ol.format.Polyline,OPENLAYERS),goog.exportSymbol("ol.format.Polyline.encodeDeltas",ol.format.Polyline.encodeDeltas,OPENLAYERS),goog.exportSymbol("ol.format.Polyline.decodeDeltas",ol.format.Polyline.decodeDeltas,OPENLAYERS),goog.exportSymbol("ol.format.Polyline.encodeFloats",ol.format.Polyline.encodeFloats,OPENLAYERS),goog.exportSymbol("ol.format.Polyline.decodeFloats",ol.format.Polyline.decodeFloats,OPENLAYERS),goog.exportProperty(ol.format.Polyline.prototype,"readFeature",ol.format.Polyline.prototype.readFeature),goog.exportProperty(ol.format.Polyline.prototype,"readFeatures",ol.format.Polyline.prototype.readFeatures),goog.exportProperty(ol.format.Polyline.prototype,"readGeometry",ol.format.Polyline.prototype.readGeometry),goog.exportProperty(ol.format.Polyline.prototype,"readProjection",ol.format.Polyline.prototype.readProjection),goog.exportProperty(ol.format.Polyline.prototype,"writeGeometry",ol.format.Polyline.prototype.writeGeometry),goog.exportSymbol("ol.format.TopoJSON",ol.format.TopoJSON,OPENLAYERS),goog.exportProperty(ol.format.TopoJSON.prototype,"readFeatures",ol.format.TopoJSON.prototype.readFeatures),goog.exportProperty(ol.format.TopoJSON.prototype,"readProjection",ol.format.TopoJSON.prototype.readProjection),goog.exportSymbol("ol.format.WFS",ol.format.WFS,OPENLAYERS),goog.exportProperty(ol.format.WFS.prototype,"readFeatures",ol.format.WFS.prototype.readFeatures),goog.exportProperty(ol.format.WFS.prototype,"readTransactionResponse",ol.format.WFS.prototype.readTransactionResponse),goog.exportProperty(ol.format.WFS.prototype,"readFeatureCollectionMetadata",ol.format.WFS.prototype.readFeatureCollectionMetadata),goog.exportSymbol("ol.format.WFS.writeFilter",ol.format.WFS.writeFilter,OPENLAYERS),goog.exportProperty(ol.format.WFS.prototype,"writeGetFeature",ol.format.WFS.prototype.writeGetFeature),goog.exportProperty(ol.format.WFS.prototype,"writeTransaction",ol.format.WFS.prototype.writeTransaction),goog.exportProperty(ol.format.WFS.prototype,"readProjection",ol.format.WFS.prototype.readProjection),goog.exportSymbol("ol.format.WKT",ol.format.WKT,OPENLAYERS),goog.exportProperty(ol.format.WKT.prototype,"readFeature",ol.format.WKT.prototype.readFeature),goog.exportProperty(ol.format.WKT.prototype,"readFeatures",ol.format.WKT.prototype.readFeatures),goog.exportProperty(ol.format.WKT.prototype,"readGeometry",ol.format.WKT.prototype.readGeometry),goog.exportProperty(ol.format.WKT.prototype,"writeFeature",ol.format.WKT.prototype.writeFeature),goog.exportProperty(ol.format.WKT.prototype,"writeFeatures",ol.format.WKT.prototype.writeFeatures),goog.exportProperty(ol.format.WKT.prototype,"writeGeometry",ol.format.WKT.prototype.writeGeometry),goog.exportSymbol("ol.format.WMSCapabilities",ol.format.WMSCapabilities,OPENLAYERS),goog.exportProperty(ol.format.WMSCapabilities.prototype,"read",ol.format.WMSCapabilities.prototype.read),goog.exportSymbol("ol.format.WMSGetFeatureInfo",ol.format.WMSGetFeatureInfo,OPENLAYERS),goog.exportProperty(ol.format.WMSGetFeatureInfo.prototype,"readFeatures",ol.format.WMSGetFeatureInfo.prototype.readFeatures),goog.exportSymbol("ol.format.WMTSCapabilities",ol.format.WMTSCapabilities,OPENLAYERS),goog.exportProperty(ol.format.WMTSCapabilities.prototype,"read",ol.format.WMTSCapabilities.prototype.read),goog.exportSymbol("ol.format.filter.And",ol.format.filter.And,OPENLAYERS),goog.exportSymbol("ol.format.filter.Bbox",ol.format.filter.Bbox,OPENLAYERS),goog.exportSymbol("ol.format.filter.Comparison",ol.format.filter.Comparison,OPENLAYERS),goog.exportSymbol("ol.format.filter.ComparisonBinary",ol.format.filter.ComparisonBinary,OPENLAYERS),goog.exportSymbol("ol.format.filter.During",ol.format.filter.During,OPENLAYERS),goog.exportSymbol("ol.format.filter.EqualTo",ol.format.filter.EqualTo,OPENLAYERS),goog.exportSymbol("ol.format.filter.Filter",ol.format.filter.Filter,OPENLAYERS),goog.exportSymbol("ol.format.filter.GreaterThan",ol.format.filter.GreaterThan,OPENLAYERS),goog.exportSymbol("ol.format.filter.GreaterThanOrEqualTo",ol.format.filter.GreaterThanOrEqualTo,OPENLAYERS),goog.exportSymbol("ol.format.filter.Intersects",ol.format.filter.Intersects,OPENLAYERS),goog.exportSymbol("ol.format.filter.IsBetween",ol.format.filter.IsBetween,OPENLAYERS),goog.exportSymbol("ol.format.filter.IsLike",ol.format.filter.IsLike,OPENLAYERS),goog.exportSymbol("ol.format.filter.IsNull",ol.format.filter.IsNull,OPENLAYERS),goog.exportSymbol("ol.format.filter.LessThan",ol.format.filter.LessThan,OPENLAYERS),goog.exportSymbol("ol.format.filter.LessThanOrEqualTo",ol.format.filter.LessThanOrEqualTo,OPENLAYERS),goog.exportSymbol("ol.format.filter.Not",ol.format.filter.Not,OPENLAYERS),goog.exportSymbol("ol.format.filter.NotEqualTo",ol.format.filter.NotEqualTo,OPENLAYERS),goog.exportSymbol("ol.format.filter.Or",ol.format.filter.Or,OPENLAYERS),goog.exportSymbol("ol.format.filter.Spatial",ol.format.filter.Spatial,OPENLAYERS),goog.exportSymbol("ol.format.filter.Within",ol.format.filter.Within,OPENLAYERS),goog.exportSymbol("ol.events.condition.altKeyOnly",ol.events.condition.altKeyOnly,OPENLAYERS),goog.exportSymbol("ol.events.condition.altShiftKeysOnly",ol.events.condition.altShiftKeysOnly,OPENLAYERS),goog.exportSymbol("ol.events.condition.always",ol.events.condition.always,OPENLAYERS),goog.exportSymbol("ol.events.condition.click",ol.events.condition.click,OPENLAYERS),goog.exportSymbol("ol.events.condition.never",ol.events.condition.never,OPENLAYERS),goog.exportSymbol("ol.events.condition.pointerMove",ol.events.condition.pointerMove,OPENLAYERS),goog.exportSymbol("ol.events.condition.singleClick",ol.events.condition.singleClick,OPENLAYERS),goog.exportSymbol("ol.events.condition.doubleClick",ol.events.condition.doubleClick,OPENLAYERS),goog.exportSymbol("ol.events.condition.noModifierKeys",ol.events.condition.noModifierKeys,OPENLAYERS),goog.exportSymbol("ol.events.condition.platformModifierKeyOnly",ol.events.condition.platformModifierKeyOnly,OPENLAYERS),goog.exportSymbol("ol.events.condition.shiftKeyOnly",ol.events.condition.shiftKeyOnly,OPENLAYERS),goog.exportSymbol("ol.events.condition.targetNotEditable",ol.events.condition.targetNotEditable,OPENLAYERS),goog.exportSymbol("ol.events.condition.mouseOnly",ol.events.condition.mouseOnly,OPENLAYERS),goog.exportSymbol("ol.events.condition.primaryAction",ol.events.condition.primaryAction,OPENLAYERS),goog.exportProperty(ol.events.Event.prototype,"type",ol.events.Event.prototype.type),goog.exportProperty(ol.events.Event.prototype,"target",ol.events.Event.prototype.target),goog.exportProperty(ol.events.Event.prototype,"preventDefault",ol.events.Event.prototype.preventDefault),goog.exportProperty(ol.events.Event.prototype,"stopPropagation",ol.events.Event.prototype.stopPropagation),goog.exportSymbol("ol.control.Attribution",ol.control.Attribution,OPENLAYERS),goog.exportSymbol("ol.control.Attribution.render",ol.control.Attribution.render,OPENLAYERS),goog.exportProperty(ol.control.Attribution.prototype,"getCollapsible",ol.control.Attribution.prototype.getCollapsible),goog.exportProperty(ol.control.Attribution.prototype,"setCollapsible",ol.control.Attribution.prototype.setCollapsible),goog.exportProperty(ol.control.Attribution.prototype,"setCollapsed",ol.control.Attribution.prototype.setCollapsed),goog.exportProperty(ol.control.Attribution.prototype,"getCollapsed",ol.control.Attribution.prototype.getCollapsed),goog.exportSymbol("ol.control.Control",ol.control.Control,OPENLAYERS),goog.exportProperty(ol.control.Control.prototype,"getMap",ol.control.Control.prototype.getMap),goog.exportProperty(ol.control.Control.prototype,"setMap",ol.control.Control.prototype.setMap),goog.exportProperty(ol.control.Control.prototype,"setTarget",ol.control.Control.prototype.setTarget),goog.exportSymbol("ol.control.FullScreen",ol.control.FullScreen,OPENLAYERS),goog.exportSymbol("ol.control.MousePosition",ol.control.MousePosition,OPENLAYERS),goog.exportSymbol("ol.control.MousePosition.render",ol.control.MousePosition.render,OPENLAYERS),goog.exportProperty(ol.control.MousePosition.prototype,"getCoordinateFormat",ol.control.MousePosition.prototype.getCoordinateFormat),goog.exportProperty(ol.control.MousePosition.prototype,"getProjection",ol.control.MousePosition.prototype.getProjection),goog.exportProperty(ol.control.MousePosition.prototype,"setCoordinateFormat",ol.control.MousePosition.prototype.setCoordinateFormat),goog.exportProperty(ol.control.MousePosition.prototype,"setProjection",ol.control.MousePosition.prototype.setProjection),goog.exportSymbol("ol.control.OverviewMap",ol.control.OverviewMap,OPENLAYERS),goog.exportSymbol("ol.control.OverviewMap.render",ol.control.OverviewMap.render,OPENLAYERS),goog.exportProperty(ol.control.OverviewMap.prototype,"getCollapsible",ol.control.OverviewMap.prototype.getCollapsible),goog.exportProperty(ol.control.OverviewMap.prototype,"setCollapsible",ol.control.OverviewMap.prototype.setCollapsible),goog.exportProperty(ol.control.OverviewMap.prototype,"setCollapsed",ol.control.OverviewMap.prototype.setCollapsed),goog.exportProperty(ol.control.OverviewMap.prototype,"getCollapsed",ol.control.OverviewMap.prototype.getCollapsed),
goog.exportProperty(ol.control.OverviewMap.prototype,"getOverviewMap",ol.control.OverviewMap.prototype.getOverviewMap),goog.exportSymbol("ol.control.Rotate",ol.control.Rotate,OPENLAYERS),goog.exportSymbol("ol.control.Rotate.render",ol.control.Rotate.render,OPENLAYERS),goog.exportSymbol("ol.control.ScaleLine",ol.control.ScaleLine,OPENLAYERS),goog.exportProperty(ol.control.ScaleLine.prototype,"getUnits",ol.control.ScaleLine.prototype.getUnits),goog.exportSymbol("ol.control.ScaleLine.render",ol.control.ScaleLine.render,OPENLAYERS),goog.exportProperty(ol.control.ScaleLine.prototype,"setUnits",ol.control.ScaleLine.prototype.setUnits),goog.exportSymbol("ol.control.Zoom",ol.control.Zoom,OPENLAYERS),goog.exportSymbol("ol.control.ZoomSlider",ol.control.ZoomSlider,OPENLAYERS),goog.exportSymbol("ol.control.ZoomSlider.render",ol.control.ZoomSlider.render,OPENLAYERS),goog.exportSymbol("ol.control.ZoomToExtent",ol.control.ZoomToExtent,OPENLAYERS),goog.exportProperty(ol.Object.prototype,"changed",ol.Object.prototype.changed),goog.exportProperty(ol.Object.prototype,"dispatchEvent",ol.Object.prototype.dispatchEvent),goog.exportProperty(ol.Object.prototype,"getRevision",ol.Object.prototype.getRevision),goog.exportProperty(ol.Object.prototype,"on",ol.Object.prototype.on),goog.exportProperty(ol.Object.prototype,"once",ol.Object.prototype.once),goog.exportProperty(ol.Object.prototype,"un",ol.Object.prototype.un),goog.exportProperty(ol.Collection.prototype,"get",ol.Collection.prototype.get),goog.exportProperty(ol.Collection.prototype,"getKeys",ol.Collection.prototype.getKeys),goog.exportProperty(ol.Collection.prototype,"getProperties",ol.Collection.prototype.getProperties),goog.exportProperty(ol.Collection.prototype,"set",ol.Collection.prototype.set),goog.exportProperty(ol.Collection.prototype,"setProperties",ol.Collection.prototype.setProperties),goog.exportProperty(ol.Collection.prototype,"unset",ol.Collection.prototype.unset),goog.exportProperty(ol.Collection.prototype,"changed",ol.Collection.prototype.changed),goog.exportProperty(ol.Collection.prototype,"dispatchEvent",ol.Collection.prototype.dispatchEvent),goog.exportProperty(ol.Collection.prototype,"getRevision",ol.Collection.prototype.getRevision),goog.exportProperty(ol.Collection.prototype,"on",ol.Collection.prototype.on),goog.exportProperty(ol.Collection.prototype,"once",ol.Collection.prototype.once),goog.exportProperty(ol.Collection.prototype,"un",ol.Collection.prototype.un),goog.exportProperty(ol.Collection.Event.prototype,"type",ol.Collection.Event.prototype.type),goog.exportProperty(ol.Collection.Event.prototype,"target",ol.Collection.Event.prototype.target),goog.exportProperty(ol.Collection.Event.prototype,"preventDefault",ol.Collection.Event.prototype.preventDefault),goog.exportProperty(ol.Collection.Event.prototype,"stopPropagation",ol.Collection.Event.prototype.stopPropagation),goog.exportProperty(ol.DeviceOrientation.prototype,"get",ol.DeviceOrientation.prototype.get),goog.exportProperty(ol.DeviceOrientation.prototype,"getKeys",ol.DeviceOrientation.prototype.getKeys),goog.exportProperty(ol.DeviceOrientation.prototype,"getProperties",ol.DeviceOrientation.prototype.getProperties),goog.exportProperty(ol.DeviceOrientation.prototype,"set",ol.DeviceOrientation.prototype.set),goog.exportProperty(ol.DeviceOrientation.prototype,"setProperties",ol.DeviceOrientation.prototype.setProperties),goog.exportProperty(ol.DeviceOrientation.prototype,"unset",ol.DeviceOrientation.prototype.unset),goog.exportProperty(ol.DeviceOrientation.prototype,"changed",ol.DeviceOrientation.prototype.changed),goog.exportProperty(ol.DeviceOrientation.prototype,"dispatchEvent",ol.DeviceOrientation.prototype.dispatchEvent),goog.exportProperty(ol.DeviceOrientation.prototype,"getRevision",ol.DeviceOrientation.prototype.getRevision),goog.exportProperty(ol.DeviceOrientation.prototype,"on",ol.DeviceOrientation.prototype.on),goog.exportProperty(ol.DeviceOrientation.prototype,"once",ol.DeviceOrientation.prototype.once),goog.exportProperty(ol.DeviceOrientation.prototype,"un",ol.DeviceOrientation.prototype.un),goog.exportProperty(ol.Feature.prototype,"get",ol.Feature.prototype.get),goog.exportProperty(ol.Feature.prototype,"getKeys",ol.Feature.prototype.getKeys),goog.exportProperty(ol.Feature.prototype,"getProperties",ol.Feature.prototype.getProperties),goog.exportProperty(ol.Feature.prototype,"set",ol.Feature.prototype.set),goog.exportProperty(ol.Feature.prototype,"setProperties",ol.Feature.prototype.setProperties),goog.exportProperty(ol.Feature.prototype,"unset",ol.Feature.prototype.unset),goog.exportProperty(ol.Feature.prototype,"changed",ol.Feature.prototype.changed),goog.exportProperty(ol.Feature.prototype,"dispatchEvent",ol.Feature.prototype.dispatchEvent),goog.exportProperty(ol.Feature.prototype,"getRevision",ol.Feature.prototype.getRevision),goog.exportProperty(ol.Feature.prototype,"on",ol.Feature.prototype.on),goog.exportProperty(ol.Feature.prototype,"once",ol.Feature.prototype.once),goog.exportProperty(ol.Feature.prototype,"un",ol.Feature.prototype.un),goog.exportProperty(ol.Geolocation.prototype,"get",ol.Geolocation.prototype.get),goog.exportProperty(ol.Geolocation.prototype,"getKeys",ol.Geolocation.prototype.getKeys),goog.exportProperty(ol.Geolocation.prototype,"getProperties",ol.Geolocation.prototype.getProperties),goog.exportProperty(ol.Geolocation.prototype,"set",ol.Geolocation.prototype.set),goog.exportProperty(ol.Geolocation.prototype,"setProperties",ol.Geolocation.prototype.setProperties),goog.exportProperty(ol.Geolocation.prototype,"unset",ol.Geolocation.prototype.unset),goog.exportProperty(ol.Geolocation.prototype,"changed",ol.Geolocation.prototype.changed),goog.exportProperty(ol.Geolocation.prototype,"dispatchEvent",ol.Geolocation.prototype.dispatchEvent),goog.exportProperty(ol.Geolocation.prototype,"getRevision",ol.Geolocation.prototype.getRevision),goog.exportProperty(ol.Geolocation.prototype,"on",ol.Geolocation.prototype.on),goog.exportProperty(ol.Geolocation.prototype,"once",ol.Geolocation.prototype.once),goog.exportProperty(ol.Geolocation.prototype,"un",ol.Geolocation.prototype.un),goog.exportProperty(ol.ImageTile.prototype,"getTileCoord",ol.ImageTile.prototype.getTileCoord),goog.exportProperty(ol.ImageTile.prototype,"load",ol.ImageTile.prototype.load),goog.exportProperty(ol.Map.prototype,"get",ol.Map.prototype.get),goog.exportProperty(ol.Map.prototype,"getKeys",ol.Map.prototype.getKeys),goog.exportProperty(ol.Map.prototype,"getProperties",ol.Map.prototype.getProperties),goog.exportProperty(ol.Map.prototype,"set",ol.Map.prototype.set),goog.exportProperty(ol.Map.prototype,"setProperties",ol.Map.prototype.setProperties),goog.exportProperty(ol.Map.prototype,"unset",ol.Map.prototype.unset),goog.exportProperty(ol.Map.prototype,"changed",ol.Map.prototype.changed),goog.exportProperty(ol.Map.prototype,"dispatchEvent",ol.Map.prototype.dispatchEvent),goog.exportProperty(ol.Map.prototype,"getRevision",ol.Map.prototype.getRevision),goog.exportProperty(ol.Map.prototype,"on",ol.Map.prototype.on),goog.exportProperty(ol.Map.prototype,"once",ol.Map.prototype.once),goog.exportProperty(ol.Map.prototype,"un",ol.Map.prototype.un),goog.exportProperty(ol.MapEvent.prototype,"type",ol.MapEvent.prototype.type),goog.exportProperty(ol.MapEvent.prototype,"target",ol.MapEvent.prototype.target),goog.exportProperty(ol.MapEvent.prototype,"preventDefault",ol.MapEvent.prototype.preventDefault),goog.exportProperty(ol.MapEvent.prototype,"stopPropagation",ol.MapEvent.prototype.stopPropagation),goog.exportProperty(ol.MapBrowserEvent.prototype,"map",ol.MapBrowserEvent.prototype.map);goog.exportProperty(ol.MapBrowserEvent.prototype,"frameState",ol.MapBrowserEvent.prototype.frameState);goog.exportProperty(ol.MapBrowserEvent.prototype,"type",ol.MapBrowserEvent.prototype.type),goog.exportProperty(ol.MapBrowserEvent.prototype,"target",ol.MapBrowserEvent.prototype.target),goog.exportProperty(ol.MapBrowserEvent.prototype,"preventDefault",ol.MapBrowserEvent.prototype.preventDefault),goog.exportProperty(ol.MapBrowserEvent.prototype,"stopPropagation",ol.MapBrowserEvent.prototype.stopPropagation),goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"originalEvent",ol.MapBrowserPointerEvent.prototype.originalEvent),goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"pixel",ol.MapBrowserPointerEvent.prototype.pixel),goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"coordinate",ol.MapBrowserPointerEvent.prototype.coordinate),goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"dragging",ol.MapBrowserPointerEvent.prototype.dragging),goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"preventDefault",ol.MapBrowserPointerEvent.prototype.preventDefault),goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"stopPropagation",ol.MapBrowserPointerEvent.prototype.stopPropagation),goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"map",ol.MapBrowserPointerEvent.prototype.map),goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"frameState",ol.MapBrowserPointerEvent.prototype.frameState),goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"type",ol.MapBrowserPointerEvent.prototype.type),goog.exportProperty(ol.MapBrowserPointerEvent.prototype,"target",ol.MapBrowserPointerEvent.prototype.target),goog.exportProperty(ol.Object.Event.prototype,"type",ol.Object.Event.prototype.type),goog.exportProperty(ol.Object.Event.prototype,"target",ol.Object.Event.prototype.target),goog.exportProperty(ol.Object.Event.prototype,"preventDefault",ol.Object.Event.prototype.preventDefault),goog.exportProperty(ol.Object.Event.prototype,"stopPropagation",ol.Object.Event.prototype.stopPropagation),goog.exportProperty(ol.Overlay.prototype,"get",ol.Overlay.prototype.get),goog.exportProperty(ol.Overlay.prototype,"getKeys",ol.Overlay.prototype.getKeys),goog.exportProperty(ol.Overlay.prototype,"getProperties",ol.Overlay.prototype.getProperties),goog.exportProperty(ol.Overlay.prototype,"set",ol.Overlay.prototype.set),goog.exportProperty(ol.Overlay.prototype,"setProperties",ol.Overlay.prototype.setProperties),goog.exportProperty(ol.Overlay.prototype,"unset",ol.Overlay.prototype.unset),goog.exportProperty(ol.Overlay.prototype,"changed",ol.Overlay.prototype.changed),goog.exportProperty(ol.Overlay.prototype,"dispatchEvent",ol.Overlay.prototype.dispatchEvent),goog.exportProperty(ol.Overlay.prototype,"getRevision",ol.Overlay.prototype.getRevision),goog.exportProperty(ol.Overlay.prototype,"on",ol.Overlay.prototype.on),goog.exportProperty(ol.Overlay.prototype,"once",ol.Overlay.prototype.once),goog.exportProperty(ol.Overlay.prototype,"un",ol.Overlay.prototype.un),goog.exportProperty(ol.VectorImageTile.prototype,"getTileCoord",ol.VectorImageTile.prototype.getTileCoord),goog.exportProperty(ol.VectorImageTile.prototype,"load",ol.VectorImageTile.prototype.load),goog.exportProperty(ol.VectorTile.prototype,"getTileCoord",ol.VectorTile.prototype.getTileCoord),goog.exportProperty(ol.VectorTile.prototype,"load",ol.VectorTile.prototype.load),goog.exportProperty(ol.View.prototype,"get",ol.View.prototype.get),goog.exportProperty(ol.View.prototype,"getKeys",ol.View.prototype.getKeys),goog.exportProperty(ol.View.prototype,"getProperties",ol.View.prototype.getProperties),goog.exportProperty(ol.View.prototype,"set",ol.View.prototype.set),goog.exportProperty(ol.View.prototype,"setProperties",ol.View.prototype.setProperties),goog.exportProperty(ol.View.prototype,"unset",ol.View.prototype.unset),goog.exportProperty(ol.View.prototype,"changed",ol.View.prototype.changed),goog.exportProperty(ol.View.prototype,"dispatchEvent",ol.View.prototype.dispatchEvent),goog.exportProperty(ol.View.prototype,"getRevision",ol.View.prototype.getRevision),goog.exportProperty(ol.View.prototype,"on",ol.View.prototype.on),goog.exportProperty(ol.View.prototype,"once",ol.View.prototype.once),goog.exportProperty(ol.View.prototype,"un",ol.View.prototype.un),goog.exportProperty(ol.tilegrid.WMTS.prototype,"forEachTileCoord",ol.tilegrid.WMTS.prototype.forEachTileCoord),goog.exportProperty(ol.tilegrid.WMTS.prototype,"getMaxZoom",ol.tilegrid.WMTS.prototype.getMaxZoom),goog.exportProperty(ol.tilegrid.WMTS.prototype,"getMinZoom",ol.tilegrid.WMTS.prototype.getMinZoom),goog.exportProperty(ol.tilegrid.WMTS.prototype,"getOrigin",ol.tilegrid.WMTS.prototype.getOrigin),goog.exportProperty(ol.tilegrid.WMTS.prototype,"getResolution",ol.tilegrid.WMTS.prototype.getResolution),goog.exportProperty(ol.tilegrid.WMTS.prototype,"getResolutions",ol.tilegrid.WMTS.prototype.getResolutions),goog.exportProperty(ol.tilegrid.WMTS.prototype,"getTileCoordExtent",ol.tilegrid.WMTS.prototype.getTileCoordExtent),goog.exportProperty(ol.tilegrid.WMTS.prototype,"getTileCoordForCoordAndResolution",ol.tilegrid.WMTS.prototype.getTileCoordForCoordAndResolution),goog.exportProperty(ol.tilegrid.WMTS.prototype,"getTileCoordForCoordAndZ",ol.tilegrid.WMTS.prototype.getTileCoordForCoordAndZ),goog.exportProperty(ol.tilegrid.WMTS.prototype,"getTileSize",ol.tilegrid.WMTS.prototype.getTileSize),goog.exportProperty(ol.tilegrid.WMTS.prototype,"getZForResolution",ol.tilegrid.WMTS.prototype.getZForResolution),goog.exportProperty(ol.style.RegularShape.prototype,"getOpacity",ol.style.RegularShape.prototype.getOpacity),goog.exportProperty(ol.style.RegularShape.prototype,"getRotateWithView",ol.style.RegularShape.prototype.getRotateWithView),goog.exportProperty(ol.style.RegularShape.prototype,"getRotation",ol.style.RegularShape.prototype.getRotation),goog.exportProperty(ol.style.RegularShape.prototype,"getScale",ol.style.RegularShape.prototype.getScale),goog.exportProperty(ol.style.RegularShape.prototype,"getSnapToPixel",ol.style.RegularShape.prototype.getSnapToPixel),goog.exportProperty(ol.style.RegularShape.prototype,"setOpacity",ol.style.RegularShape.prototype.setOpacity),goog.exportProperty(ol.style.RegularShape.prototype,"setRotation",ol.style.RegularShape.prototype.setRotation),goog.exportProperty(ol.style.RegularShape.prototype,"setScale",ol.style.RegularShape.prototype.setScale),goog.exportProperty(ol.style.Circle.prototype,"clone",ol.style.Circle.prototype.clone),goog.exportProperty(ol.style.Circle.prototype,"getAngle",ol.style.Circle.prototype.getAngle),goog.exportProperty(ol.style.Circle.prototype,"getFill",ol.style.Circle.prototype.getFill),goog.exportProperty(ol.style.Circle.prototype,"getPoints",ol.style.Circle.prototype.getPoints),goog.exportProperty(ol.style.Circle.prototype,"getRadius",ol.style.Circle.prototype.getRadius),goog.exportProperty(ol.style.Circle.prototype,"getRadius2",ol.style.Circle.prototype.getRadius2),goog.exportProperty(ol.style.Circle.prototype,"getStroke",ol.style.Circle.prototype.getStroke),goog.exportProperty(ol.style.Circle.prototype,"getOpacity",ol.style.Circle.prototype.getOpacity),goog.exportProperty(ol.style.Circle.prototype,"getRotateWithView",ol.style.Circle.prototype.getRotateWithView),goog.exportProperty(ol.style.Circle.prototype,"getRotation",ol.style.Circle.prototype.getRotation),goog.exportProperty(ol.style.Circle.prototype,"getScale",ol.style.Circle.prototype.getScale),goog.exportProperty(ol.style.Circle.prototype,"getSnapToPixel",ol.style.Circle.prototype.getSnapToPixel),goog.exportProperty(ol.style.Circle.prototype,"setOpacity",ol.style.Circle.prototype.setOpacity),goog.exportProperty(ol.style.Circle.prototype,"setRotation",ol.style.Circle.prototype.setRotation),goog.exportProperty(ol.style.Circle.prototype,"setScale",ol.style.Circle.prototype.setScale),goog.exportProperty(ol.style.Icon.prototype,"getOpacity",ol.style.Icon.prototype.getOpacity),goog.exportProperty(ol.style.Icon.prototype,"getRotateWithView",ol.style.Icon.prototype.getRotateWithView),goog.exportProperty(ol.style.Icon.prototype,"getRotation",ol.style.Icon.prototype.getRotation),goog.exportProperty(ol.style.Icon.prototype,"getScale",ol.style.Icon.prototype.getScale),goog.exportProperty(ol.style.Icon.prototype,"getSnapToPixel",ol.style.Icon.prototype.getSnapToPixel),goog.exportProperty(ol.style.Icon.prototype,"setOpacity",ol.style.Icon.prototype.setOpacity),goog.exportProperty(ol.style.Icon.prototype,"setRotation",ol.style.Icon.prototype.setRotation),goog.exportProperty(ol.style.Icon.prototype,"setScale",ol.style.Icon.prototype.setScale),goog.exportProperty(ol.source.Source.prototype,"get",ol.source.Source.prototype.get),goog.exportProperty(ol.source.Source.prototype,"getKeys",ol.source.Source.prototype.getKeys),goog.exportProperty(ol.source.Source.prototype,"getProperties",ol.source.Source.prototype.getProperties),goog.exportProperty(ol.source.Source.prototype,"set",ol.source.Source.prototype.set),goog.exportProperty(ol.source.Source.prototype,"setProperties",ol.source.Source.prototype.setProperties),goog.exportProperty(ol.source.Source.prototype,"unset",ol.source.Source.prototype.unset),goog.exportProperty(ol.source.Source.prototype,"changed",ol.source.Source.prototype.changed),goog.exportProperty(ol.source.Source.prototype,"dispatchEvent",ol.source.Source.prototype.dispatchEvent),goog.exportProperty(ol.source.Source.prototype,"getRevision",ol.source.Source.prototype.getRevision),goog.exportProperty(ol.source.Source.prototype,"on",ol.source.Source.prototype.on),goog.exportProperty(ol.source.Source.prototype,"once",ol.source.Source.prototype.once),goog.exportProperty(ol.source.Source.prototype,"un",ol.source.Source.prototype.un),goog.exportProperty(ol.source.Tile.prototype,"getAttributions",ol.source.Tile.prototype.getAttributions),goog.exportProperty(ol.source.Tile.prototype,"getLogo",ol.source.Tile.prototype.getLogo),goog.exportProperty(ol.source.Tile.prototype,"getProjection",ol.source.Tile.prototype.getProjection),goog.exportProperty(ol.source.Tile.prototype,"getState",ol.source.Tile.prototype.getState),goog.exportProperty(ol.source.Tile.prototype,"refresh",ol.source.Tile.prototype.refresh),goog.exportProperty(ol.source.Tile.prototype,"setAttributions",ol.source.Tile.prototype.setAttributions),goog.exportProperty(ol.source.Tile.prototype,"get",ol.source.Tile.prototype.get),goog.exportProperty(ol.source.Tile.prototype,"getKeys",ol.source.Tile.prototype.getKeys),goog.exportProperty(ol.source.Tile.prototype,"getProperties",ol.source.Tile.prototype.getProperties),goog.exportProperty(ol.source.Tile.prototype,"set",ol.source.Tile.prototype.set),goog.exportProperty(ol.source.Tile.prototype,"setProperties",ol.source.Tile.prototype.setProperties),goog.exportProperty(ol.source.Tile.prototype,"unset",ol.source.Tile.prototype.unset),goog.exportProperty(ol.source.Tile.prototype,"changed",ol.source.Tile.prototype.changed),goog.exportProperty(ol.source.Tile.prototype,"dispatchEvent",ol.source.Tile.prototype.dispatchEvent),goog.exportProperty(ol.source.Tile.prototype,"getRevision",ol.source.Tile.prototype.getRevision),goog.exportProperty(ol.source.Tile.prototype,"on",ol.source.Tile.prototype.on),goog.exportProperty(ol.source.Tile.prototype,"once",ol.source.Tile.prototype.once),goog.exportProperty(ol.source.Tile.prototype,"un",ol.source.Tile.prototype.un),goog.exportProperty(ol.source.UrlTile.prototype,"getTileGrid",ol.source.UrlTile.prototype.getTileGrid),goog.exportProperty(ol.source.UrlTile.prototype,"refresh",ol.source.UrlTile.prototype.refresh),goog.exportProperty(ol.source.UrlTile.prototype,"getAttributions",ol.source.UrlTile.prototype.getAttributions),goog.exportProperty(ol.source.UrlTile.prototype,"getLogo",ol.source.UrlTile.prototype.getLogo),goog.exportProperty(ol.source.UrlTile.prototype,"getProjection",ol.source.UrlTile.prototype.getProjection),goog.exportProperty(ol.source.UrlTile.prototype,"getState",ol.source.UrlTile.prototype.getState),goog.exportProperty(ol.source.UrlTile.prototype,"setAttributions",ol.source.UrlTile.prototype.setAttributions),goog.exportProperty(ol.source.UrlTile.prototype,"get",ol.source.UrlTile.prototype.get),goog.exportProperty(ol.source.UrlTile.prototype,"getKeys",ol.source.UrlTile.prototype.getKeys),goog.exportProperty(ol.source.UrlTile.prototype,"getProperties",ol.source.UrlTile.prototype.getProperties),goog.exportProperty(ol.source.UrlTile.prototype,"set",ol.source.UrlTile.prototype.set),goog.exportProperty(ol.source.UrlTile.prototype,"setProperties",ol.source.UrlTile.prototype.setProperties),goog.exportProperty(ol.source.UrlTile.prototype,"unset",ol.source.UrlTile.prototype.unset),goog.exportProperty(ol.source.UrlTile.prototype,"changed",ol.source.UrlTile.prototype.changed),goog.exportProperty(ol.source.UrlTile.prototype,"dispatchEvent",ol.source.UrlTile.prototype.dispatchEvent),goog.exportProperty(ol.source.UrlTile.prototype,"getRevision",ol.source.UrlTile.prototype.getRevision),goog.exportProperty(ol.source.UrlTile.prototype,"on",ol.source.UrlTile.prototype.on),goog.exportProperty(ol.source.UrlTile.prototype,"once",ol.source.UrlTile.prototype.once),goog.exportProperty(ol.source.UrlTile.prototype,"un",ol.source.UrlTile.prototype.un),goog.exportProperty(ol.source.TileImage.prototype,"getTileLoadFunction",ol.source.TileImage.prototype.getTileLoadFunction),goog.exportProperty(ol.source.TileImage.prototype,"getTileUrlFunction",ol.source.TileImage.prototype.getTileUrlFunction),goog.exportProperty(ol.source.TileImage.prototype,"getUrls",ol.source.TileImage.prototype.getUrls),goog.exportProperty(ol.source.TileImage.prototype,"setTileLoadFunction",ol.source.TileImage.prototype.setTileLoadFunction),goog.exportProperty(ol.source.TileImage.prototype,"setTileUrlFunction",ol.source.TileImage.prototype.setTileUrlFunction),goog.exportProperty(ol.source.TileImage.prototype,"setUrl",ol.source.TileImage.prototype.setUrl),goog.exportProperty(ol.source.TileImage.prototype,"setUrls",ol.source.TileImage.prototype.setUrls),goog.exportProperty(ol.source.TileImage.prototype,"getTileGrid",ol.source.TileImage.prototype.getTileGrid),goog.exportProperty(ol.source.TileImage.prototype,"refresh",ol.source.TileImage.prototype.refresh),goog.exportProperty(ol.source.TileImage.prototype,"getAttributions",ol.source.TileImage.prototype.getAttributions),goog.exportProperty(ol.source.TileImage.prototype,"getLogo",ol.source.TileImage.prototype.getLogo),goog.exportProperty(ol.source.TileImage.prototype,"getProjection",ol.source.TileImage.prototype.getProjection),goog.exportProperty(ol.source.TileImage.prototype,"getState",ol.source.TileImage.prototype.getState),goog.exportProperty(ol.source.TileImage.prototype,"setAttributions",ol.source.TileImage.prototype.setAttributions),goog.exportProperty(ol.source.TileImage.prototype,"get",ol.source.TileImage.prototype.get),goog.exportProperty(ol.source.TileImage.prototype,"getKeys",ol.source.TileImage.prototype.getKeys),goog.exportProperty(ol.source.TileImage.prototype,"getProperties",ol.source.TileImage.prototype.getProperties),goog.exportProperty(ol.source.TileImage.prototype,"set",ol.source.TileImage.prototype.set),goog.exportProperty(ol.source.TileImage.prototype,"setProperties",ol.source.TileImage.prototype.setProperties),goog.exportProperty(ol.source.TileImage.prototype,"unset",ol.source.TileImage.prototype.unset),goog.exportProperty(ol.source.TileImage.prototype,"changed",ol.source.TileImage.prototype.changed),goog.exportProperty(ol.source.TileImage.prototype,"dispatchEvent",ol.source.TileImage.prototype.dispatchEvent),goog.exportProperty(ol.source.TileImage.prototype,"getRevision",ol.source.TileImage.prototype.getRevision),goog.exportProperty(ol.source.TileImage.prototype,"on",ol.source.TileImage.prototype.on),goog.exportProperty(ol.source.TileImage.prototype,"once",ol.source.TileImage.prototype.once),goog.exportProperty(ol.source.TileImage.prototype,"un",ol.source.TileImage.prototype.un),goog.exportProperty(ol.source.BingMaps.prototype,"setRenderReprojectionEdges",ol.source.BingMaps.prototype.setRenderReprojectionEdges),goog.exportProperty(ol.source.BingMaps.prototype,"setTileGridForProjection",ol.source.BingMaps.prototype.setTileGridForProjection),goog.exportProperty(ol.source.BingMaps.prototype,"getTileLoadFunction",ol.source.BingMaps.prototype.getTileLoadFunction),goog.exportProperty(ol.source.BingMaps.prototype,"getTileUrlFunction",ol.source.BingMaps.prototype.getTileUrlFunction),goog.exportProperty(ol.source.BingMaps.prototype,"getUrls",ol.source.BingMaps.prototype.getUrls),goog.exportProperty(ol.source.BingMaps.prototype,"setTileLoadFunction",ol.source.BingMaps.prototype.setTileLoadFunction),goog.exportProperty(ol.source.BingMaps.prototype,"setTileUrlFunction",ol.source.BingMaps.prototype.setTileUrlFunction),goog.exportProperty(ol.source.BingMaps.prototype,"setUrl",ol.source.BingMaps.prototype.setUrl),goog.exportProperty(ol.source.BingMaps.prototype,"setUrls",ol.source.BingMaps.prototype.setUrls),goog.exportProperty(ol.source.BingMaps.prototype,"getTileGrid",ol.source.BingMaps.prototype.getTileGrid),goog.exportProperty(ol.source.BingMaps.prototype,"refresh",ol.source.BingMaps.prototype.refresh),goog.exportProperty(ol.source.BingMaps.prototype,"getAttributions",ol.source.BingMaps.prototype.getAttributions),goog.exportProperty(ol.source.BingMaps.prototype,"getLogo",ol.source.BingMaps.prototype.getLogo),goog.exportProperty(ol.source.BingMaps.prototype,"getProjection",ol.source.BingMaps.prototype.getProjection),goog.exportProperty(ol.source.BingMaps.prototype,"getState",ol.source.BingMaps.prototype.getState),goog.exportProperty(ol.source.BingMaps.prototype,"setAttributions",ol.source.BingMaps.prototype.setAttributions),goog.exportProperty(ol.source.BingMaps.prototype,"get",ol.source.BingMaps.prototype.get),goog.exportProperty(ol.source.BingMaps.prototype,"getKeys",ol.source.BingMaps.prototype.getKeys),goog.exportProperty(ol.source.BingMaps.prototype,"getProperties",ol.source.BingMaps.prototype.getProperties),goog.exportProperty(ol.source.BingMaps.prototype,"set",ol.source.BingMaps.prototype.set),goog.exportProperty(ol.source.BingMaps.prototype,"setProperties",ol.source.BingMaps.prototype.setProperties),goog.exportProperty(ol.source.BingMaps.prototype,"unset",ol.source.BingMaps.prototype.unset),goog.exportProperty(ol.source.BingMaps.prototype,"changed",ol.source.BingMaps.prototype.changed),goog.exportProperty(ol.source.BingMaps.prototype,"dispatchEvent",ol.source.BingMaps.prototype.dispatchEvent),goog.exportProperty(ol.source.BingMaps.prototype,"getRevision",ol.source.BingMaps.prototype.getRevision),goog.exportProperty(ol.source.BingMaps.prototype,"on",ol.source.BingMaps.prototype.on),goog.exportProperty(ol.source.BingMaps.prototype,"once",ol.source.BingMaps.prototype.once),goog.exportProperty(ol.source.BingMaps.prototype,"un",ol.source.BingMaps.prototype.un),goog.exportProperty(ol.source.XYZ.prototype,"setRenderReprojectionEdges",ol.source.XYZ.prototype.setRenderReprojectionEdges),goog.exportProperty(ol.source.XYZ.prototype,"setTileGridForProjection",ol.source.XYZ.prototype.setTileGridForProjection),goog.exportProperty(ol.source.XYZ.prototype,"getTileLoadFunction",ol.source.XYZ.prototype.getTileLoadFunction),goog.exportProperty(ol.source.XYZ.prototype,"getTileUrlFunction",ol.source.XYZ.prototype.getTileUrlFunction),goog.exportProperty(ol.source.XYZ.prototype,"getUrls",ol.source.XYZ.prototype.getUrls),goog.exportProperty(ol.source.XYZ.prototype,"setTileLoadFunction",ol.source.XYZ.prototype.setTileLoadFunction),goog.exportProperty(ol.source.XYZ.prototype,"setTileUrlFunction",ol.source.XYZ.prototype.setTileUrlFunction),goog.exportProperty(ol.source.XYZ.prototype,"setUrl",ol.source.XYZ.prototype.setUrl),goog.exportProperty(ol.source.XYZ.prototype,"setUrls",ol.source.XYZ.prototype.setUrls);goog.exportProperty(ol.source.XYZ.prototype,"getTileGrid",ol.source.XYZ.prototype.getTileGrid);goog.exportProperty(ol.source.XYZ.prototype,"refresh",ol.source.XYZ.prototype.refresh),goog.exportProperty(ol.source.XYZ.prototype,"getAttributions",ol.source.XYZ.prototype.getAttributions),goog.exportProperty(ol.source.XYZ.prototype,"getLogo",ol.source.XYZ.prototype.getLogo),goog.exportProperty(ol.source.XYZ.prototype,"getProjection",ol.source.XYZ.prototype.getProjection),goog.exportProperty(ol.source.XYZ.prototype,"getState",ol.source.XYZ.prototype.getState),goog.exportProperty(ol.source.XYZ.prototype,"setAttributions",ol.source.XYZ.prototype.setAttributions),goog.exportProperty(ol.source.XYZ.prototype,"get",ol.source.XYZ.prototype.get),goog.exportProperty(ol.source.XYZ.prototype,"getKeys",ol.source.XYZ.prototype.getKeys),goog.exportProperty(ol.source.XYZ.prototype,"getProperties",ol.source.XYZ.prototype.getProperties),goog.exportProperty(ol.source.XYZ.prototype,"set",ol.source.XYZ.prototype.set),goog.exportProperty(ol.source.XYZ.prototype,"setProperties",ol.source.XYZ.prototype.setProperties),goog.exportProperty(ol.source.XYZ.prototype,"unset",ol.source.XYZ.prototype.unset),goog.exportProperty(ol.source.XYZ.prototype,"changed",ol.source.XYZ.prototype.changed),goog.exportProperty(ol.source.XYZ.prototype,"dispatchEvent",ol.source.XYZ.prototype.dispatchEvent),goog.exportProperty(ol.source.XYZ.prototype,"getRevision",ol.source.XYZ.prototype.getRevision),goog.exportProperty(ol.source.XYZ.prototype,"on",ol.source.XYZ.prototype.on),goog.exportProperty(ol.source.XYZ.prototype,"once",ol.source.XYZ.prototype.once),goog.exportProperty(ol.source.XYZ.prototype,"un",ol.source.XYZ.prototype.un),goog.exportProperty(ol.source.CartoDB.prototype,"setRenderReprojectionEdges",ol.source.CartoDB.prototype.setRenderReprojectionEdges),goog.exportProperty(ol.source.CartoDB.prototype,"setTileGridForProjection",ol.source.CartoDB.prototype.setTileGridForProjection),goog.exportProperty(ol.source.CartoDB.prototype,"getTileLoadFunction",ol.source.CartoDB.prototype.getTileLoadFunction),goog.exportProperty(ol.source.CartoDB.prototype,"getTileUrlFunction",ol.source.CartoDB.prototype.getTileUrlFunction),goog.exportProperty(ol.source.CartoDB.prototype,"getUrls",ol.source.CartoDB.prototype.getUrls),goog.exportProperty(ol.source.CartoDB.prototype,"setTileLoadFunction",ol.source.CartoDB.prototype.setTileLoadFunction),goog.exportProperty(ol.source.CartoDB.prototype,"setTileUrlFunction",ol.source.CartoDB.prototype.setTileUrlFunction),goog.exportProperty(ol.source.CartoDB.prototype,"setUrl",ol.source.CartoDB.prototype.setUrl),goog.exportProperty(ol.source.CartoDB.prototype,"setUrls",ol.source.CartoDB.prototype.setUrls),goog.exportProperty(ol.source.CartoDB.prototype,"getTileGrid",ol.source.CartoDB.prototype.getTileGrid),goog.exportProperty(ol.source.CartoDB.prototype,"refresh",ol.source.CartoDB.prototype.refresh),goog.exportProperty(ol.source.CartoDB.prototype,"getAttributions",ol.source.CartoDB.prototype.getAttributions),goog.exportProperty(ol.source.CartoDB.prototype,"getLogo",ol.source.CartoDB.prototype.getLogo),goog.exportProperty(ol.source.CartoDB.prototype,"getProjection",ol.source.CartoDB.prototype.getProjection),goog.exportProperty(ol.source.CartoDB.prototype,"getState",ol.source.CartoDB.prototype.getState),goog.exportProperty(ol.source.CartoDB.prototype,"setAttributions",ol.source.CartoDB.prototype.setAttributions),goog.exportProperty(ol.source.CartoDB.prototype,"get",ol.source.CartoDB.prototype.get),goog.exportProperty(ol.source.CartoDB.prototype,"getKeys",ol.source.CartoDB.prototype.getKeys),goog.exportProperty(ol.source.CartoDB.prototype,"getProperties",ol.source.CartoDB.prototype.getProperties),goog.exportProperty(ol.source.CartoDB.prototype,"set",ol.source.CartoDB.prototype.set),goog.exportProperty(ol.source.CartoDB.prototype,"setProperties",ol.source.CartoDB.prototype.setProperties),goog.exportProperty(ol.source.CartoDB.prototype,"unset",ol.source.CartoDB.prototype.unset),goog.exportProperty(ol.source.CartoDB.prototype,"changed",ol.source.CartoDB.prototype.changed),goog.exportProperty(ol.source.CartoDB.prototype,"dispatchEvent",ol.source.CartoDB.prototype.dispatchEvent),goog.exportProperty(ol.source.CartoDB.prototype,"getRevision",ol.source.CartoDB.prototype.getRevision),goog.exportProperty(ol.source.CartoDB.prototype,"on",ol.source.CartoDB.prototype.on),goog.exportProperty(ol.source.CartoDB.prototype,"once",ol.source.CartoDB.prototype.once),goog.exportProperty(ol.source.CartoDB.prototype,"un",ol.source.CartoDB.prototype.un),
goog.exportProperty(ol.source.Vector.prototype,"getAttributions",ol.source.Vector.prototype.getAttributions),goog.exportProperty(ol.source.Vector.prototype,"getLogo",ol.source.Vector.prototype.getLogo),goog.exportProperty(ol.source.Vector.prototype,"getProjection",ol.source.Vector.prototype.getProjection),goog.exportProperty(ol.source.Vector.prototype,"getState",ol.source.Vector.prototype.getState),goog.exportProperty(ol.source.Vector.prototype,"refresh",ol.source.Vector.prototype.refresh),goog.exportProperty(ol.source.Vector.prototype,"setAttributions",ol.source.Vector.prototype.setAttributions),goog.exportProperty(ol.source.Vector.prototype,"get",ol.source.Vector.prototype.get),goog.exportProperty(ol.source.Vector.prototype,"getKeys",ol.source.Vector.prototype.getKeys),goog.exportProperty(ol.source.Vector.prototype,"getProperties",ol.source.Vector.prototype.getProperties),goog.exportProperty(ol.source.Vector.prototype,"set",ol.source.Vector.prototype.set),goog.exportProperty(ol.source.Vector.prototype,"setProperties",ol.source.Vector.prototype.setProperties),goog.exportProperty(ol.source.Vector.prototype,"unset",ol.source.Vector.prototype.unset),goog.exportProperty(ol.source.Vector.prototype,"changed",ol.source.Vector.prototype.changed),goog.exportProperty(ol.source.Vector.prototype,"dispatchEvent",ol.source.Vector.prototype.dispatchEvent),goog.exportProperty(ol.source.Vector.prototype,"getRevision",ol.source.Vector.prototype.getRevision),goog.exportProperty(ol.source.Vector.prototype,"on",ol.source.Vector.prototype.on),goog.exportProperty(ol.source.Vector.prototype,"once",ol.source.Vector.prototype.once),goog.exportProperty(ol.source.Vector.prototype,"un",ol.source.Vector.prototype.un),goog.exportProperty(ol.source.Cluster.prototype,"addFeature",ol.source.Cluster.prototype.addFeature),goog.exportProperty(ol.source.Cluster.prototype,"addFeatures",ol.source.Cluster.prototype.addFeatures),goog.exportProperty(ol.source.Cluster.prototype,"clear",ol.source.Cluster.prototype.clear),goog.exportProperty(ol.source.Cluster.prototype,"forEachFeature",ol.source.Cluster.prototype.forEachFeature),goog.exportProperty(ol.source.Cluster.prototype,"forEachFeatureInExtent",ol.source.Cluster.prototype.forEachFeatureInExtent),goog.exportProperty(ol.source.Cluster.prototype,"forEachFeatureIntersectingExtent",ol.source.Cluster.prototype.forEachFeatureIntersectingExtent),goog.exportProperty(ol.source.Cluster.prototype,"getFeaturesCollection",ol.source.Cluster.prototype.getFeaturesCollection),goog.exportProperty(ol.source.Cluster.prototype,"getFeatures",ol.source.Cluster.prototype.getFeatures),goog.exportProperty(ol.source.Cluster.prototype,"getFeaturesAtCoordinate",ol.source.Cluster.prototype.getFeaturesAtCoordinate),goog.exportProperty(ol.source.Cluster.prototype,"getFeaturesInExtent",ol.source.Cluster.prototype.getFeaturesInExtent),goog.exportProperty(ol.source.Cluster.prototype,"getClosestFeatureToCoordinate",ol.source.Cluster.prototype.getClosestFeatureToCoordinate),goog.exportProperty(ol.source.Cluster.prototype,"getExtent",ol.source.Cluster.prototype.getExtent),goog.exportProperty(ol.source.Cluster.prototype,"getFeatureById",ol.source.Cluster.prototype.getFeatureById),goog.exportProperty(ol.source.Cluster.prototype,"getFormat",ol.source.Cluster.prototype.getFormat),goog.exportProperty(ol.source.Cluster.prototype,"getUrl",ol.source.Cluster.prototype.getUrl),goog.exportProperty(ol.source.Cluster.prototype,"removeFeature",ol.source.Cluster.prototype.removeFeature),goog.exportProperty(ol.source.Cluster.prototype,"getAttributions",ol.source.Cluster.prototype.getAttributions),goog.exportProperty(ol.source.Cluster.prototype,"getLogo",ol.source.Cluster.prototype.getLogo),goog.exportProperty(ol.source.Cluster.prototype,"getProjection",ol.source.Cluster.prototype.getProjection),goog.exportProperty(ol.source.Cluster.prototype,"getState",ol.source.Cluster.prototype.getState),goog.exportProperty(ol.source.Cluster.prototype,"refresh",ol.source.Cluster.prototype.refresh),goog.exportProperty(ol.source.Cluster.prototype,"setAttributions",ol.source.Cluster.prototype.setAttributions),goog.exportProperty(ol.source.Cluster.prototype,"get",ol.source.Cluster.prototype.get),goog.exportProperty(ol.source.Cluster.prototype,"getKeys",ol.source.Cluster.prototype.getKeys),goog.exportProperty(ol.source.Cluster.prototype,"getProperties",ol.source.Cluster.prototype.getProperties),goog.exportProperty(ol.source.Cluster.prototype,"set",ol.source.Cluster.prototype.set),goog.exportProperty(ol.source.Cluster.prototype,"setProperties",ol.source.Cluster.prototype.setProperties),goog.exportProperty(ol.source.Cluster.prototype,"unset",ol.source.Cluster.prototype.unset),goog.exportProperty(ol.source.Cluster.prototype,"changed",ol.source.Cluster.prototype.changed),goog.exportProperty(ol.source.Cluster.prototype,"dispatchEvent",ol.source.Cluster.prototype.dispatchEvent),goog.exportProperty(ol.source.Cluster.prototype,"getRevision",ol.source.Cluster.prototype.getRevision),goog.exportProperty(ol.source.Cluster.prototype,"on",ol.source.Cluster.prototype.on),goog.exportProperty(ol.source.Cluster.prototype,"once",ol.source.Cluster.prototype.once),goog.exportProperty(ol.source.Cluster.prototype,"un",ol.source.Cluster.prototype.un),goog.exportProperty(ol.source.Image.prototype,"getAttributions",ol.source.Image.prototype.getAttributions),goog.exportProperty(ol.source.Image.prototype,"getLogo",ol.source.Image.prototype.getLogo),goog.exportProperty(ol.source.Image.prototype,"getProjection",ol.source.Image.prototype.getProjection),goog.exportProperty(ol.source.Image.prototype,"getState",ol.source.Image.prototype.getState),goog.exportProperty(ol.source.Image.prototype,"refresh",ol.source.Image.prototype.refresh),goog.exportProperty(ol.source.Image.prototype,"setAttributions",ol.source.Image.prototype.setAttributions),goog.exportProperty(ol.source.Image.prototype,"get",ol.source.Image.prototype.get),goog.exportProperty(ol.source.Image.prototype,"getKeys",ol.source.Image.prototype.getKeys),goog.exportProperty(ol.source.Image.prototype,"getProperties",ol.source.Image.prototype.getProperties),goog.exportProperty(ol.source.Image.prototype,"set",ol.source.Image.prototype.set),goog.exportProperty(ol.source.Image.prototype,"setProperties",ol.source.Image.prototype.setProperties),goog.exportProperty(ol.source.Image.prototype,"unset",ol.source.Image.prototype.unset),goog.exportProperty(ol.source.Image.prototype,"changed",ol.source.Image.prototype.changed),goog.exportProperty(ol.source.Image.prototype,"dispatchEvent",ol.source.Image.prototype.dispatchEvent),goog.exportProperty(ol.source.Image.prototype,"getRevision",ol.source.Image.prototype.getRevision),goog.exportProperty(ol.source.Image.prototype,"on",ol.source.Image.prototype.on),goog.exportProperty(ol.source.Image.prototype,"once",ol.source.Image.prototype.once),goog.exportProperty(ol.source.Image.prototype,"un",ol.source.Image.prototype.un),goog.exportProperty(ol.source.Image.Event.prototype,"type",ol.source.Image.Event.prototype.type),goog.exportProperty(ol.source.Image.Event.prototype,"target",ol.source.Image.Event.prototype.target),goog.exportProperty(ol.source.Image.Event.prototype,"preventDefault",ol.source.Image.Event.prototype.preventDefault),goog.exportProperty(ol.source.Image.Event.prototype,"stopPropagation",ol.source.Image.Event.prototype.stopPropagation),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"getAttributions",ol.source.ImageArcGISRest.prototype.getAttributions),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"getLogo",ol.source.ImageArcGISRest.prototype.getLogo),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"getProjection",ol.source.ImageArcGISRest.prototype.getProjection),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"getState",ol.source.ImageArcGISRest.prototype.getState),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"refresh",ol.source.ImageArcGISRest.prototype.refresh),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"setAttributions",ol.source.ImageArcGISRest.prototype.setAttributions),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"get",ol.source.ImageArcGISRest.prototype.get),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"getKeys",ol.source.ImageArcGISRest.prototype.getKeys),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"getProperties",ol.source.ImageArcGISRest.prototype.getProperties),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"set",ol.source.ImageArcGISRest.prototype.set),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"setProperties",ol.source.ImageArcGISRest.prototype.setProperties),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"unset",ol.source.ImageArcGISRest.prototype.unset),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"changed",ol.source.ImageArcGISRest.prototype.changed),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"dispatchEvent",ol.source.ImageArcGISRest.prototype.dispatchEvent),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"getRevision",ol.source.ImageArcGISRest.prototype.getRevision),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"on",ol.source.ImageArcGISRest.prototype.on),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"once",ol.source.ImageArcGISRest.prototype.once),goog.exportProperty(ol.source.ImageArcGISRest.prototype,"un",ol.source.ImageArcGISRest.prototype.un),goog.exportProperty(ol.source.ImageCanvas.prototype,"getAttributions",ol.source.ImageCanvas.prototype.getAttributions),goog.exportProperty(ol.source.ImageCanvas.prototype,"getLogo",ol.source.ImageCanvas.prototype.getLogo),goog.exportProperty(ol.source.ImageCanvas.prototype,"getProjection",ol.source.ImageCanvas.prototype.getProjection),goog.exportProperty(ol.source.ImageCanvas.prototype,"getState",ol.source.ImageCanvas.prototype.getState),goog.exportProperty(ol.source.ImageCanvas.prototype,"refresh",ol.source.ImageCanvas.prototype.refresh),goog.exportProperty(ol.source.ImageCanvas.prototype,"setAttributions",ol.source.ImageCanvas.prototype.setAttributions),goog.exportProperty(ol.source.ImageCanvas.prototype,"get",ol.source.ImageCanvas.prototype.get),goog.exportProperty(ol.source.ImageCanvas.prototype,"getKeys",ol.source.ImageCanvas.prototype.getKeys),goog.exportProperty(ol.source.ImageCanvas.prototype,"getProperties",ol.source.ImageCanvas.prototype.getProperties),goog.exportProperty(ol.source.ImageCanvas.prototype,"set",ol.source.ImageCanvas.prototype.set),goog.exportProperty(ol.source.ImageCanvas.prototype,"setProperties",ol.source.ImageCanvas.prototype.setProperties),goog.exportProperty(ol.source.ImageCanvas.prototype,"unset",ol.source.ImageCanvas.prototype.unset),goog.exportProperty(ol.source.ImageCanvas.prototype,"changed",ol.source.ImageCanvas.prototype.changed),goog.exportProperty(ol.source.ImageCanvas.prototype,"dispatchEvent",ol.source.ImageCanvas.prototype.dispatchEvent),goog.exportProperty(ol.source.ImageCanvas.prototype,"getRevision",ol.source.ImageCanvas.prototype.getRevision),goog.exportProperty(ol.source.ImageCanvas.prototype,"on",ol.source.ImageCanvas.prototype.on),goog.exportProperty(ol.source.ImageCanvas.prototype,"once",ol.source.ImageCanvas.prototype.once),goog.exportProperty(ol.source.ImageCanvas.prototype,"un",ol.source.ImageCanvas.prototype.un),goog.exportProperty(ol.source.ImageMapGuide.prototype,"getAttributions",ol.source.ImageMapGuide.prototype.getAttributions),goog.exportProperty(ol.source.ImageMapGuide.prototype,"getLogo",ol.source.ImageMapGuide.prototype.getLogo),goog.exportProperty(ol.source.ImageMapGuide.prototype,"getProjection",ol.source.ImageMapGuide.prototype.getProjection),goog.exportProperty(ol.source.ImageMapGuide.prototype,"getState",ol.source.ImageMapGuide.prototype.getState),goog.exportProperty(ol.source.ImageMapGuide.prototype,"refresh",ol.source.ImageMapGuide.prototype.refresh),goog.exportProperty(ol.source.ImageMapGuide.prototype,"setAttributions",ol.source.ImageMapGuide.prototype.setAttributions),goog.exportProperty(ol.source.ImageMapGuide.prototype,"get",ol.source.ImageMapGuide.prototype.get),goog.exportProperty(ol.source.ImageMapGuide.prototype,"getKeys",ol.source.ImageMapGuide.prototype.getKeys),goog.exportProperty(ol.source.ImageMapGuide.prototype,"getProperties",ol.source.ImageMapGuide.prototype.getProperties),goog.exportProperty(ol.source.ImageMapGuide.prototype,"set",ol.source.ImageMapGuide.prototype.set),goog.exportProperty(ol.source.ImageMapGuide.prototype,"setProperties",ol.source.ImageMapGuide.prototype.setProperties),goog.exportProperty(ol.source.ImageMapGuide.prototype,"unset",ol.source.ImageMapGuide.prototype.unset),goog.exportProperty(ol.source.ImageMapGuide.prototype,"changed",ol.source.ImageMapGuide.prototype.changed),goog.exportProperty(ol.source.ImageMapGuide.prototype,"dispatchEvent",ol.source.ImageMapGuide.prototype.dispatchEvent),goog.exportProperty(ol.source.ImageMapGuide.prototype,"getRevision",ol.source.ImageMapGuide.prototype.getRevision),goog.exportProperty(ol.source.ImageMapGuide.prototype,"on",ol.source.ImageMapGuide.prototype.on),goog.exportProperty(ol.source.ImageMapGuide.prototype,"once",ol.source.ImageMapGuide.prototype.once),goog.exportProperty(ol.source.ImageMapGuide.prototype,"un",ol.source.ImageMapGuide.prototype.un),goog.exportProperty(ol.source.ImageStatic.prototype,"getAttributions",ol.source.ImageStatic.prototype.getAttributions),goog.exportProperty(ol.source.ImageStatic.prototype,"getLogo",ol.source.ImageStatic.prototype.getLogo),goog.exportProperty(ol.source.ImageStatic.prototype,"getProjection",ol.source.ImageStatic.prototype.getProjection),goog.exportProperty(ol.source.ImageStatic.prototype,"getState",ol.source.ImageStatic.prototype.getState),goog.exportProperty(ol.source.ImageStatic.prototype,"refresh",ol.source.ImageStatic.prototype.refresh),goog.exportProperty(ol.source.ImageStatic.prototype,"setAttributions",ol.source.ImageStatic.prototype.setAttributions),goog.exportProperty(ol.source.ImageStatic.prototype,"get",ol.source.ImageStatic.prototype.get),goog.exportProperty(ol.source.ImageStatic.prototype,"getKeys",ol.source.ImageStatic.prototype.getKeys),goog.exportProperty(ol.source.ImageStatic.prototype,"getProperties",ol.source.ImageStatic.prototype.getProperties),goog.exportProperty(ol.source.ImageStatic.prototype,"set",ol.source.ImageStatic.prototype.set),goog.exportProperty(ol.source.ImageStatic.prototype,"setProperties",ol.source.ImageStatic.prototype.setProperties),goog.exportProperty(ol.source.ImageStatic.prototype,"unset",ol.source.ImageStatic.prototype.unset),goog.exportProperty(ol.source.ImageStatic.prototype,"changed",ol.source.ImageStatic.prototype.changed),goog.exportProperty(ol.source.ImageStatic.prototype,"dispatchEvent",ol.source.ImageStatic.prototype.dispatchEvent),goog.exportProperty(ol.source.ImageStatic.prototype,"getRevision",ol.source.ImageStatic.prototype.getRevision),goog.exportProperty(ol.source.ImageStatic.prototype,"on",ol.source.ImageStatic.prototype.on),goog.exportProperty(ol.source.ImageStatic.prototype,"once",ol.source.ImageStatic.prototype.once),goog.exportProperty(ol.source.ImageStatic.prototype,"un",ol.source.ImageStatic.prototype.un),goog.exportProperty(ol.source.ImageVector.prototype,"getAttributions",ol.source.ImageVector.prototype.getAttributions),goog.exportProperty(ol.source.ImageVector.prototype,"getLogo",ol.source.ImageVector.prototype.getLogo),goog.exportProperty(ol.source.ImageVector.prototype,"getProjection",ol.source.ImageVector.prototype.getProjection),goog.exportProperty(ol.source.ImageVector.prototype,"getState",ol.source.ImageVector.prototype.getState),goog.exportProperty(ol.source.ImageVector.prototype,"refresh",ol.source.ImageVector.prototype.refresh),goog.exportProperty(ol.source.ImageVector.prototype,"setAttributions",ol.source.ImageVector.prototype.setAttributions),goog.exportProperty(ol.source.ImageVector.prototype,"get",ol.source.ImageVector.prototype.get),goog.exportProperty(ol.source.ImageVector.prototype,"getKeys",ol.source.ImageVector.prototype.getKeys);goog.exportProperty(ol.source.ImageVector.prototype,"getProperties",ol.source.ImageVector.prototype.getProperties);goog.exportProperty(ol.source.ImageVector.prototype,"set",ol.source.ImageVector.prototype.set),goog.exportProperty(ol.source.ImageVector.prototype,"setProperties",ol.source.ImageVector.prototype.setProperties),goog.exportProperty(ol.source.ImageVector.prototype,"unset",ol.source.ImageVector.prototype.unset),goog.exportProperty(ol.source.ImageVector.prototype,"changed",ol.source.ImageVector.prototype.changed),goog.exportProperty(ol.source.ImageVector.prototype,"dispatchEvent",ol.source.ImageVector.prototype.dispatchEvent),goog.exportProperty(ol.source.ImageVector.prototype,"getRevision",ol.source.ImageVector.prototype.getRevision),goog.exportProperty(ol.source.ImageVector.prototype,"on",ol.source.ImageVector.prototype.on),goog.exportProperty(ol.source.ImageVector.prototype,"once",ol.source.ImageVector.prototype.once),goog.exportProperty(ol.source.ImageVector.prototype,"un",ol.source.ImageVector.prototype.un),goog.exportProperty(ol.source.ImageWMS.prototype,"getAttributions",ol.source.ImageWMS.prototype.getAttributions),goog.exportProperty(ol.source.ImageWMS.prototype,"getLogo",ol.source.ImageWMS.prototype.getLogo),goog.exportProperty(ol.source.ImageWMS.prototype,"getProjection",ol.source.ImageWMS.prototype.getProjection),goog.exportProperty(ol.source.ImageWMS.prototype,"getState",ol.source.ImageWMS.prototype.getState),goog.exportProperty(ol.source.ImageWMS.prototype,"refresh",ol.source.ImageWMS.prototype.refresh),goog.exportProperty(ol.source.ImageWMS.prototype,"setAttributions",ol.source.ImageWMS.prototype.setAttributions),goog.exportProperty(ol.source.ImageWMS.prototype,"get",ol.source.ImageWMS.prototype.get),goog.exportProperty(ol.source.ImageWMS.prototype,"getKeys",ol.source.ImageWMS.prototype.getKeys),goog.exportProperty(ol.source.ImageWMS.prototype,"getProperties",ol.source.ImageWMS.prototype.getProperties),goog.exportProperty(ol.source.ImageWMS.prototype,"set",ol.source.ImageWMS.prototype.set),goog.exportProperty(ol.source.ImageWMS.prototype,"setProperties",ol.source.ImageWMS.prototype.setProperties),goog.exportProperty(ol.source.ImageWMS.prototype,"unset",ol.source.ImageWMS.prototype.unset),goog.exportProperty(ol.source.ImageWMS.prototype,"changed",ol.source.ImageWMS.prototype.changed),goog.exportProperty(ol.source.ImageWMS.prototype,"dispatchEvent",ol.source.ImageWMS.prototype.dispatchEvent),goog.exportProperty(ol.source.ImageWMS.prototype,"getRevision",ol.source.ImageWMS.prototype.getRevision),goog.exportProperty(ol.source.ImageWMS.prototype,"on",ol.source.ImageWMS.prototype.on),goog.exportProperty(ol.source.ImageWMS.prototype,"once",ol.source.ImageWMS.prototype.once),goog.exportProperty(ol.source.ImageWMS.prototype,"un",ol.source.ImageWMS.prototype.un),goog.exportProperty(ol.source.OSM.prototype,"setRenderReprojectionEdges",ol.source.OSM.prototype.setRenderReprojectionEdges),goog.exportProperty(ol.source.OSM.prototype,"setTileGridForProjection",ol.source.OSM.prototype.setTileGridForProjection),goog.exportProperty(ol.source.OSM.prototype,"getTileLoadFunction",ol.source.OSM.prototype.getTileLoadFunction),goog.exportProperty(ol.source.OSM.prototype,"getTileUrlFunction",ol.source.OSM.prototype.getTileUrlFunction),goog.exportProperty(ol.source.OSM.prototype,"getUrls",ol.source.OSM.prototype.getUrls),goog.exportProperty(ol.source.OSM.prototype,"setTileLoadFunction",ol.source.OSM.prototype.setTileLoadFunction),goog.exportProperty(ol.source.OSM.prototype,"setTileUrlFunction",ol.source.OSM.prototype.setTileUrlFunction),goog.exportProperty(ol.source.OSM.prototype,"setUrl",ol.source.OSM.prototype.setUrl),goog.exportProperty(ol.source.OSM.prototype,"setUrls",ol.source.OSM.prototype.setUrls),goog.exportProperty(ol.source.OSM.prototype,"getTileGrid",ol.source.OSM.prototype.getTileGrid),goog.exportProperty(ol.source.OSM.prototype,"refresh",ol.source.OSM.prototype.refresh),goog.exportProperty(ol.source.OSM.prototype,"getAttributions",ol.source.OSM.prototype.getAttributions),goog.exportProperty(ol.source.OSM.prototype,"getLogo",ol.source.OSM.prototype.getLogo),goog.exportProperty(ol.source.OSM.prototype,"getProjection",ol.source.OSM.prototype.getProjection),goog.exportProperty(ol.source.OSM.prototype,"getState",ol.source.OSM.prototype.getState),goog.exportProperty(ol.source.OSM.prototype,"setAttributions",ol.source.OSM.prototype.setAttributions),goog.exportProperty(ol.source.OSM.prototype,"get",ol.source.OSM.prototype.get),goog.exportProperty(ol.source.OSM.prototype,"getKeys",ol.source.OSM.prototype.getKeys),goog.exportProperty(ol.source.OSM.prototype,"getProperties",ol.source.OSM.prototype.getProperties),goog.exportProperty(ol.source.OSM.prototype,"set",ol.source.OSM.prototype.set),goog.exportProperty(ol.source.OSM.prototype,"setProperties",ol.source.OSM.prototype.setProperties),goog.exportProperty(ol.source.OSM.prototype,"unset",ol.source.OSM.prototype.unset),goog.exportProperty(ol.source.OSM.prototype,"changed",ol.source.OSM.prototype.changed),goog.exportProperty(ol.source.OSM.prototype,"dispatchEvent",ol.source.OSM.prototype.dispatchEvent),goog.exportProperty(ol.source.OSM.prototype,"getRevision",ol.source.OSM.prototype.getRevision),goog.exportProperty(ol.source.OSM.prototype,"on",ol.source.OSM.prototype.on),goog.exportProperty(ol.source.OSM.prototype,"once",ol.source.OSM.prototype.once),goog.exportProperty(ol.source.OSM.prototype,"un",ol.source.OSM.prototype.un),goog.exportProperty(ol.source.Raster.prototype,"getAttributions",ol.source.Raster.prototype.getAttributions),goog.exportProperty(ol.source.Raster.prototype,"getLogo",ol.source.Raster.prototype.getLogo),goog.exportProperty(ol.source.Raster.prototype,"getProjection",ol.source.Raster.prototype.getProjection),goog.exportProperty(ol.source.Raster.prototype,"getState",ol.source.Raster.prototype.getState),goog.exportProperty(ol.source.Raster.prototype,"refresh",ol.source.Raster.prototype.refresh),goog.exportProperty(ol.source.Raster.prototype,"setAttributions",ol.source.Raster.prototype.setAttributions),goog.exportProperty(ol.source.Raster.prototype,"get",ol.source.Raster.prototype.get),goog.exportProperty(ol.source.Raster.prototype,"getKeys",ol.source.Raster.prototype.getKeys),goog.exportProperty(ol.source.Raster.prototype,"getProperties",ol.source.Raster.prototype.getProperties),goog.exportProperty(ol.source.Raster.prototype,"set",ol.source.Raster.prototype.set),goog.exportProperty(ol.source.Raster.prototype,"setProperties",ol.source.Raster.prototype.setProperties),goog.exportProperty(ol.source.Raster.prototype,"unset",ol.source.Raster.prototype.unset),goog.exportProperty(ol.source.Raster.prototype,"changed",ol.source.Raster.prototype.changed),goog.exportProperty(ol.source.Raster.prototype,"dispatchEvent",ol.source.Raster.prototype.dispatchEvent),goog.exportProperty(ol.source.Raster.prototype,"getRevision",ol.source.Raster.prototype.getRevision),goog.exportProperty(ol.source.Raster.prototype,"on",ol.source.Raster.prototype.on),goog.exportProperty(ol.source.Raster.prototype,"once",ol.source.Raster.prototype.once),goog.exportProperty(ol.source.Raster.prototype,"un",ol.source.Raster.prototype.un),goog.exportProperty(ol.source.Raster.Event.prototype,"type",ol.source.Raster.Event.prototype.type),goog.exportProperty(ol.source.Raster.Event.prototype,"target",ol.source.Raster.Event.prototype.target),goog.exportProperty(ol.source.Raster.Event.prototype,"preventDefault",ol.source.Raster.Event.prototype.preventDefault),goog.exportProperty(ol.source.Raster.Event.prototype,"stopPropagation",ol.source.Raster.Event.prototype.stopPropagation),goog.exportProperty(ol.source.Stamen.prototype,"setRenderReprojectionEdges",ol.source.Stamen.prototype.setRenderReprojectionEdges),goog.exportProperty(ol.source.Stamen.prototype,"setTileGridForProjection",ol.source.Stamen.prototype.setTileGridForProjection),goog.exportProperty(ol.source.Stamen.prototype,"getTileLoadFunction",ol.source.Stamen.prototype.getTileLoadFunction),goog.exportProperty(ol.source.Stamen.prototype,"getTileUrlFunction",ol.source.Stamen.prototype.getTileUrlFunction),goog.exportProperty(ol.source.Stamen.prototype,"getUrls",ol.source.Stamen.prototype.getUrls),goog.exportProperty(ol.source.Stamen.prototype,"setTileLoadFunction",ol.source.Stamen.prototype.setTileLoadFunction),goog.exportProperty(ol.source.Stamen.prototype,"setTileUrlFunction",ol.source.Stamen.prototype.setTileUrlFunction),goog.exportProperty(ol.source.Stamen.prototype,"setUrl",ol.source.Stamen.prototype.setUrl),goog.exportProperty(ol.source.Stamen.prototype,"setUrls",ol.source.Stamen.prototype.setUrls),goog.exportProperty(ol.source.Stamen.prototype,"getTileGrid",ol.source.Stamen.prototype.getTileGrid),goog.exportProperty(ol.source.Stamen.prototype,"refresh",ol.source.Stamen.prototype.refresh),goog.exportProperty(ol.source.Stamen.prototype,"getAttributions",ol.source.Stamen.prototype.getAttributions),goog.exportProperty(ol.source.Stamen.prototype,"getLogo",ol.source.Stamen.prototype.getLogo),goog.exportProperty(ol.source.Stamen.prototype,"getProjection",ol.source.Stamen.prototype.getProjection),goog.exportProperty(ol.source.Stamen.prototype,"getState",ol.source.Stamen.prototype.getState),goog.exportProperty(ol.source.Stamen.prototype,"setAttributions",ol.source.Stamen.prototype.setAttributions),goog.exportProperty(ol.source.Stamen.prototype,"get",ol.source.Stamen.prototype.get),goog.exportProperty(ol.source.Stamen.prototype,"getKeys",ol.source.Stamen.prototype.getKeys),goog.exportProperty(ol.source.Stamen.prototype,"getProperties",ol.source.Stamen.prototype.getProperties),goog.exportProperty(ol.source.Stamen.prototype,"set",ol.source.Stamen.prototype.set),goog.exportProperty(ol.source.Stamen.prototype,"setProperties",ol.source.Stamen.prototype.setProperties),goog.exportProperty(ol.source.Stamen.prototype,"unset",ol.source.Stamen.prototype.unset),goog.exportProperty(ol.source.Stamen.prototype,"changed",ol.source.Stamen.prototype.changed),goog.exportProperty(ol.source.Stamen.prototype,"dispatchEvent",ol.source.Stamen.prototype.dispatchEvent),goog.exportProperty(ol.source.Stamen.prototype,"getRevision",ol.source.Stamen.prototype.getRevision),goog.exportProperty(ol.source.Stamen.prototype,"on",ol.source.Stamen.prototype.on),goog.exportProperty(ol.source.Stamen.prototype,"once",ol.source.Stamen.prototype.once),goog.exportProperty(ol.source.Stamen.prototype,"un",ol.source.Stamen.prototype.un),goog.exportProperty(ol.source.Tile.Event.prototype,"type",ol.source.Tile.Event.prototype.type),goog.exportProperty(ol.source.Tile.Event.prototype,"target",ol.source.Tile.Event.prototype.target),goog.exportProperty(ol.source.Tile.Event.prototype,"preventDefault",ol.source.Tile.Event.prototype.preventDefault),goog.exportProperty(ol.source.Tile.Event.prototype,"stopPropagation",ol.source.Tile.Event.prototype.stopPropagation),goog.exportProperty(ol.source.TileArcGISRest.prototype,"setRenderReprojectionEdges",ol.source.TileArcGISRest.prototype.setRenderReprojectionEdges),goog.exportProperty(ol.source.TileArcGISRest.prototype,"setTileGridForProjection",ol.source.TileArcGISRest.prototype.setTileGridForProjection),goog.exportProperty(ol.source.TileArcGISRest.prototype,"getTileLoadFunction",ol.source.TileArcGISRest.prototype.getTileLoadFunction),goog.exportProperty(ol.source.TileArcGISRest.prototype,"getTileUrlFunction",ol.source.TileArcGISRest.prototype.getTileUrlFunction),goog.exportProperty(ol.source.TileArcGISRest.prototype,"getUrls",ol.source.TileArcGISRest.prototype.getUrls),goog.exportProperty(ol.source.TileArcGISRest.prototype,"setTileLoadFunction",ol.source.TileArcGISRest.prototype.setTileLoadFunction),goog.exportProperty(ol.source.TileArcGISRest.prototype,"setTileUrlFunction",ol.source.TileArcGISRest.prototype.setTileUrlFunction),goog.exportProperty(ol.source.TileArcGISRest.prototype,"setUrl",ol.source.TileArcGISRest.prototype.setUrl),goog.exportProperty(ol.source.TileArcGISRest.prototype,"setUrls",ol.source.TileArcGISRest.prototype.setUrls),goog.exportProperty(ol.source.TileArcGISRest.prototype,"getTileGrid",ol.source.TileArcGISRest.prototype.getTileGrid),goog.exportProperty(ol.source.TileArcGISRest.prototype,"refresh",ol.source.TileArcGISRest.prototype.refresh),goog.exportProperty(ol.source.TileArcGISRest.prototype,"getAttributions",ol.source.TileArcGISRest.prototype.getAttributions),goog.exportProperty(ol.source.TileArcGISRest.prototype,"getLogo",ol.source.TileArcGISRest.prototype.getLogo),goog.exportProperty(ol.source.TileArcGISRest.prototype,"getProjection",ol.source.TileArcGISRest.prototype.getProjection),goog.exportProperty(ol.source.TileArcGISRest.prototype,"getState",ol.source.TileArcGISRest.prototype.getState),goog.exportProperty(ol.source.TileArcGISRest.prototype,"setAttributions",ol.source.TileArcGISRest.prototype.setAttributions),goog.exportProperty(ol.source.TileArcGISRest.prototype,"get",ol.source.TileArcGISRest.prototype.get),goog.exportProperty(ol.source.TileArcGISRest.prototype,"getKeys",ol.source.TileArcGISRest.prototype.getKeys),goog.exportProperty(ol.source.TileArcGISRest.prototype,"getProperties",ol.source.TileArcGISRest.prototype.getProperties),goog.exportProperty(ol.source.TileArcGISRest.prototype,"set",ol.source.TileArcGISRest.prototype.set),goog.exportProperty(ol.source.TileArcGISRest.prototype,"setProperties",ol.source.TileArcGISRest.prototype.setProperties),goog.exportProperty(ol.source.TileArcGISRest.prototype,"unset",ol.source.TileArcGISRest.prototype.unset),goog.exportProperty(ol.source.TileArcGISRest.prototype,"changed",ol.source.TileArcGISRest.prototype.changed),goog.exportProperty(ol.source.TileArcGISRest.prototype,"dispatchEvent",ol.source.TileArcGISRest.prototype.dispatchEvent),goog.exportProperty(ol.source.TileArcGISRest.prototype,"getRevision",ol.source.TileArcGISRest.prototype.getRevision),goog.exportProperty(ol.source.TileArcGISRest.prototype,"on",ol.source.TileArcGISRest.prototype.on),goog.exportProperty(ol.source.TileArcGISRest.prototype,"once",ol.source.TileArcGISRest.prototype.once),goog.exportProperty(ol.source.TileArcGISRest.prototype,"un",ol.source.TileArcGISRest.prototype.un),goog.exportProperty(ol.source.TileDebug.prototype,"getTileGrid",ol.source.TileDebug.prototype.getTileGrid),goog.exportProperty(ol.source.TileDebug.prototype,"refresh",ol.source.TileDebug.prototype.refresh),goog.exportProperty(ol.source.TileDebug.prototype,"getAttributions",ol.source.TileDebug.prototype.getAttributions),goog.exportProperty(ol.source.TileDebug.prototype,"getLogo",ol.source.TileDebug.prototype.getLogo),goog.exportProperty(ol.source.TileDebug.prototype,"getProjection",ol.source.TileDebug.prototype.getProjection),goog.exportProperty(ol.source.TileDebug.prototype,"getState",ol.source.TileDebug.prototype.getState),goog.exportProperty(ol.source.TileDebug.prototype,"setAttributions",ol.source.TileDebug.prototype.setAttributions),goog.exportProperty(ol.source.TileDebug.prototype,"get",ol.source.TileDebug.prototype.get),goog.exportProperty(ol.source.TileDebug.prototype,"getKeys",ol.source.TileDebug.prototype.getKeys),goog.exportProperty(ol.source.TileDebug.prototype,"getProperties",ol.source.TileDebug.prototype.getProperties),goog.exportProperty(ol.source.TileDebug.prototype,"set",ol.source.TileDebug.prototype.set),goog.exportProperty(ol.source.TileDebug.prototype,"setProperties",ol.source.TileDebug.prototype.setProperties),goog.exportProperty(ol.source.TileDebug.prototype,"unset",ol.source.TileDebug.prototype.unset),goog.exportProperty(ol.source.TileDebug.prototype,"changed",ol.source.TileDebug.prototype.changed),goog.exportProperty(ol.source.TileDebug.prototype,"dispatchEvent",ol.source.TileDebug.prototype.dispatchEvent),goog.exportProperty(ol.source.TileDebug.prototype,"getRevision",ol.source.TileDebug.prototype.getRevision),goog.exportProperty(ol.source.TileDebug.prototype,"on",ol.source.TileDebug.prototype.on),goog.exportProperty(ol.source.TileDebug.prototype,"once",ol.source.TileDebug.prototype.once),
goog.exportProperty(ol.source.TileDebug.prototype,"un",ol.source.TileDebug.prototype.un),goog.exportProperty(ol.source.TileJSON.prototype,"setRenderReprojectionEdges",ol.source.TileJSON.prototype.setRenderReprojectionEdges),goog.exportProperty(ol.source.TileJSON.prototype,"setTileGridForProjection",ol.source.TileJSON.prototype.setTileGridForProjection),goog.exportProperty(ol.source.TileJSON.prototype,"getTileLoadFunction",ol.source.TileJSON.prototype.getTileLoadFunction),goog.exportProperty(ol.source.TileJSON.prototype,"getTileUrlFunction",ol.source.TileJSON.prototype.getTileUrlFunction),goog.exportProperty(ol.source.TileJSON.prototype,"getUrls",ol.source.TileJSON.prototype.getUrls),goog.exportProperty(ol.source.TileJSON.prototype,"setTileLoadFunction",ol.source.TileJSON.prototype.setTileLoadFunction),goog.exportProperty(ol.source.TileJSON.prototype,"setTileUrlFunction",ol.source.TileJSON.prototype.setTileUrlFunction),goog.exportProperty(ol.source.TileJSON.prototype,"setUrl",ol.source.TileJSON.prototype.setUrl),goog.exportProperty(ol.source.TileJSON.prototype,"setUrls",ol.source.TileJSON.prototype.setUrls),goog.exportProperty(ol.source.TileJSON.prototype,"getTileGrid",ol.source.TileJSON.prototype.getTileGrid),goog.exportProperty(ol.source.TileJSON.prototype,"refresh",ol.source.TileJSON.prototype.refresh),goog.exportProperty(ol.source.TileJSON.prototype,"getAttributions",ol.source.TileJSON.prototype.getAttributions),goog.exportProperty(ol.source.TileJSON.prototype,"getLogo",ol.source.TileJSON.prototype.getLogo),goog.exportProperty(ol.source.TileJSON.prototype,"getProjection",ol.source.TileJSON.prototype.getProjection),goog.exportProperty(ol.source.TileJSON.prototype,"getState",ol.source.TileJSON.prototype.getState),goog.exportProperty(ol.source.TileJSON.prototype,"setAttributions",ol.source.TileJSON.prototype.setAttributions),goog.exportProperty(ol.source.TileJSON.prototype,"get",ol.source.TileJSON.prototype.get),goog.exportProperty(ol.source.TileJSON.prototype,"getKeys",ol.source.TileJSON.prototype.getKeys),goog.exportProperty(ol.source.TileJSON.prototype,"getProperties",ol.source.TileJSON.prototype.getProperties),goog.exportProperty(ol.source.TileJSON.prototype,"set",ol.source.TileJSON.prototype.set),goog.exportProperty(ol.source.TileJSON.prototype,"setProperties",ol.source.TileJSON.prototype.setProperties),goog.exportProperty(ol.source.TileJSON.prototype,"unset",ol.source.TileJSON.prototype.unset),goog.exportProperty(ol.source.TileJSON.prototype,"changed",ol.source.TileJSON.prototype.changed),goog.exportProperty(ol.source.TileJSON.prototype,"dispatchEvent",ol.source.TileJSON.prototype.dispatchEvent),goog.exportProperty(ol.source.TileJSON.prototype,"getRevision",ol.source.TileJSON.prototype.getRevision),goog.exportProperty(ol.source.TileJSON.prototype,"on",ol.source.TileJSON.prototype.on),goog.exportProperty(ol.source.TileJSON.prototype,"once",ol.source.TileJSON.prototype.once),goog.exportProperty(ol.source.TileJSON.prototype,"un",ol.source.TileJSON.prototype.un),goog.exportProperty(ol.source.TileUTFGrid.prototype,"getTileGrid",ol.source.TileUTFGrid.prototype.getTileGrid),goog.exportProperty(ol.source.TileUTFGrid.prototype,"refresh",ol.source.TileUTFGrid.prototype.refresh),goog.exportProperty(ol.source.TileUTFGrid.prototype,"getAttributions",ol.source.TileUTFGrid.prototype.getAttributions),goog.exportProperty(ol.source.TileUTFGrid.prototype,"getLogo",ol.source.TileUTFGrid.prototype.getLogo),goog.exportProperty(ol.source.TileUTFGrid.prototype,"getProjection",ol.source.TileUTFGrid.prototype.getProjection),goog.exportProperty(ol.source.TileUTFGrid.prototype,"getState",ol.source.TileUTFGrid.prototype.getState),goog.exportProperty(ol.source.TileUTFGrid.prototype,"setAttributions",ol.source.TileUTFGrid.prototype.setAttributions),goog.exportProperty(ol.source.TileUTFGrid.prototype,"get",ol.source.TileUTFGrid.prototype.get),goog.exportProperty(ol.source.TileUTFGrid.prototype,"getKeys",ol.source.TileUTFGrid.prototype.getKeys),goog.exportProperty(ol.source.TileUTFGrid.prototype,"getProperties",ol.source.TileUTFGrid.prototype.getProperties),goog.exportProperty(ol.source.TileUTFGrid.prototype,"set",ol.source.TileUTFGrid.prototype.set),goog.exportProperty(ol.source.TileUTFGrid.prototype,"setProperties",ol.source.TileUTFGrid.prototype.setProperties),goog.exportProperty(ol.source.TileUTFGrid.prototype,"unset",ol.source.TileUTFGrid.prototype.unset),goog.exportProperty(ol.source.TileUTFGrid.prototype,"changed",ol.source.TileUTFGrid.prototype.changed),goog.exportProperty(ol.source.TileUTFGrid.prototype,"dispatchEvent",ol.source.TileUTFGrid.prototype.dispatchEvent),goog.exportProperty(ol.source.TileUTFGrid.prototype,"getRevision",ol.source.TileUTFGrid.prototype.getRevision);goog.exportProperty(ol.source.TileUTFGrid.prototype,"on",ol.source.TileUTFGrid.prototype.on);return goog.exportProperty(ol.source.TileUTFGrid.prototype,"once",ol.source.TileUTFGrid.prototype.once),goog.exportProperty(ol.source.TileUTFGrid.prototype,"un",ol.source.TileUTFGrid.prototype.un),goog.exportProperty(ol.source.TileWMS.prototype,"setRenderReprojectionEdges",ol.source.TileWMS.prototype.setRenderReprojectionEdges),goog.exportProperty(ol.source.TileWMS.prototype,"setTileGridForProjection",ol.source.TileWMS.prototype.setTileGridForProjection),goog.exportProperty(ol.source.TileWMS.prototype,"getTileLoadFunction",ol.source.TileWMS.prototype.getTileLoadFunction),goog.exportProperty(ol.source.TileWMS.prototype,"getTileUrlFunction",ol.source.TileWMS.prototype.getTileUrlFunction),goog.exportProperty(ol.source.TileWMS.prototype,"getUrls",ol.source.TileWMS.prototype.getUrls),goog.exportProperty(ol.source.TileWMS.prototype,"setTileLoadFunction",ol.source.TileWMS.prototype.setTileLoadFunction),goog.exportProperty(ol.source.TileWMS.prototype,"setTileUrlFunction",ol.source.TileWMS.prototype.setTileUrlFunction),goog.exportProperty(ol.source.TileWMS.prototype,"setUrl",ol.source.TileWMS.prototype.setUrl),goog.exportProperty(ol.source.TileWMS.prototype,"setUrls",ol.source.TileWMS.prototype.setUrls),goog.exportProperty(ol.source.TileWMS.prototype,"getTileGrid",ol.source.TileWMS.prototype.getTileGrid),goog.exportProperty(ol.source.TileWMS.prototype,"refresh",ol.source.TileWMS.prototype.refresh),goog.exportProperty(ol.source.TileWMS.prototype,"getAttributions",ol.source.TileWMS.prototype.getAttributions),goog.exportProperty(ol.source.TileWMS.prototype,"getLogo",ol.source.TileWMS.prototype.getLogo),goog.exportProperty(ol.source.TileWMS.prototype,"getProjection",ol.source.TileWMS.prototype.getProjection),goog.exportProperty(ol.source.TileWMS.prototype,"getState",ol.source.TileWMS.prototype.getState),goog.exportProperty(ol.source.TileWMS.prototype,"setAttributions",ol.source.TileWMS.prototype.setAttributions),goog.exportProperty(ol.source.TileWMS.prototype,"get",ol.source.TileWMS.prototype.get),goog.exportProperty(ol.source.TileWMS.prototype,"getKeys",ol.source.TileWMS.prototype.getKeys),goog.exportProperty(ol.source.TileWMS.prototype,"getProperties",ol.source.TileWMS.prototype.getProperties),goog.exportProperty(ol.source.TileWMS.prototype,"set",ol.source.TileWMS.prototype.set),goog.exportProperty(ol.source.TileWMS.prototype,"setProperties",ol.source.TileWMS.prototype.setProperties),goog.exportProperty(ol.source.TileWMS.prototype,"unset",ol.source.TileWMS.prototype.unset),goog.exportProperty(ol.source.TileWMS.prototype,"changed",ol.source.TileWMS.prototype.changed),goog.exportProperty(ol.source.TileWMS.prototype,"dispatchEvent",ol.source.TileWMS.prototype.dispatchEvent),goog.exportProperty(ol.source.TileWMS.prototype,"getRevision",ol.source.TileWMS.prototype.getRevision),goog.exportProperty(ol.source.TileWMS.prototype,"on",ol.source.TileWMS.prototype.on),goog.exportProperty(ol.source.TileWMS.prototype,"once",ol.source.TileWMS.prototype.once),goog.exportProperty(ol.source.TileWMS.prototype,"un",ol.source.TileWMS.prototype.un),goog.exportProperty(ol.source.Vector.Event.prototype,"type",ol.source.Vector.Event.prototype.type),goog.exportProperty(ol.source.Vector.Event.prototype,"target",ol.source.Vector.Event.prototype.target),goog.exportProperty(ol.source.Vector.Event.prototype,"preventDefault",ol.source.Vector.Event.prototype.preventDefault),goog.exportProperty(ol.source.Vector.Event.prototype,"stopPropagation",ol.source.Vector.Event.prototype.stopPropagation),goog.exportProperty(ol.source.VectorTile.prototype,"getTileLoadFunction",ol.source.VectorTile.prototype.getTileLoadFunction),goog.exportProperty(ol.source.VectorTile.prototype,"getTileUrlFunction",ol.source.VectorTile.prototype.getTileUrlFunction),goog.exportProperty(ol.source.VectorTile.prototype,"getUrls",ol.source.VectorTile.prototype.getUrls),goog.exportProperty(ol.source.VectorTile.prototype,"setTileLoadFunction",ol.source.VectorTile.prototype.setTileLoadFunction),goog.exportProperty(ol.source.VectorTile.prototype,"setTileUrlFunction",ol.source.VectorTile.prototype.setTileUrlFunction),goog.exportProperty(ol.source.VectorTile.prototype,"setUrl",ol.source.VectorTile.prototype.setUrl),goog.exportProperty(ol.source.VectorTile.prototype,"setUrls",ol.source.VectorTile.prototype.setUrls),goog.exportProperty(ol.source.VectorTile.prototype,"getTileGrid",ol.source.VectorTile.prototype.getTileGrid),goog.exportProperty(ol.source.VectorTile.prototype,"refresh",ol.source.VectorTile.prototype.refresh),goog.exportProperty(ol.source.VectorTile.prototype,"getAttributions",ol.source.VectorTile.prototype.getAttributions),goog.exportProperty(ol.source.VectorTile.prototype,"getLogo",ol.source.VectorTile.prototype.getLogo),goog.exportProperty(ol.source.VectorTile.prototype,"getProjection",ol.source.VectorTile.prototype.getProjection),goog.exportProperty(ol.source.VectorTile.prototype,"getState",ol.source.VectorTile.prototype.getState),goog.exportProperty(ol.source.VectorTile.prototype,"setAttributions",ol.source.VectorTile.prototype.setAttributions),goog.exportProperty(ol.source.VectorTile.prototype,"get",ol.source.VectorTile.prototype.get),goog.exportProperty(ol.source.VectorTile.prototype,"getKeys",ol.source.VectorTile.prototype.getKeys),goog.exportProperty(ol.source.VectorTile.prototype,"getProperties",ol.source.VectorTile.prototype.getProperties),goog.exportProperty(ol.source.VectorTile.prototype,"set",ol.source.VectorTile.prototype.set),goog.exportProperty(ol.source.VectorTile.prototype,"setProperties",ol.source.VectorTile.prototype.setProperties),goog.exportProperty(ol.source.VectorTile.prototype,"unset",ol.source.VectorTile.prototype.unset),goog.exportProperty(ol.source.VectorTile.prototype,"changed",ol.source.VectorTile.prototype.changed),goog.exportProperty(ol.source.VectorTile.prototype,"dispatchEvent",ol.source.VectorTile.prototype.dispatchEvent),goog.exportProperty(ol.source.VectorTile.prototype,"getRevision",ol.source.VectorTile.prototype.getRevision),goog.exportProperty(ol.source.VectorTile.prototype,"on",ol.source.VectorTile.prototype.on),goog.exportProperty(ol.source.VectorTile.prototype,"once",ol.source.VectorTile.prototype.once),goog.exportProperty(ol.source.VectorTile.prototype,"un",ol.source.VectorTile.prototype.un),goog.exportProperty(ol.source.WMTS.prototype,"setRenderReprojectionEdges",ol.source.WMTS.prototype.setRenderReprojectionEdges),goog.exportProperty(ol.source.WMTS.prototype,"setTileGridForProjection",ol.source.WMTS.prototype.setTileGridForProjection),goog.exportProperty(ol.source.WMTS.prototype,"getTileLoadFunction",ol.source.WMTS.prototype.getTileLoadFunction),goog.exportProperty(ol.source.WMTS.prototype,"getTileUrlFunction",ol.source.WMTS.prototype.getTileUrlFunction),goog.exportProperty(ol.source.WMTS.prototype,"getUrls",ol.source.WMTS.prototype.getUrls),goog.exportProperty(ol.source.WMTS.prototype,"setTileLoadFunction",ol.source.WMTS.prototype.setTileLoadFunction),goog.exportProperty(ol.source.WMTS.prototype,"setTileUrlFunction",ol.source.WMTS.prototype.setTileUrlFunction),goog.exportProperty(ol.source.WMTS.prototype,"setUrl",ol.source.WMTS.prototype.setUrl),goog.exportProperty(ol.source.WMTS.prototype,"setUrls",ol.source.WMTS.prototype.setUrls),goog.exportProperty(ol.source.WMTS.prototype,"getTileGrid",ol.source.WMTS.prototype.getTileGrid),goog.exportProperty(ol.source.WMTS.prototype,"refresh",ol.source.WMTS.prototype.refresh),goog.exportProperty(ol.source.WMTS.prototype,"getAttributions",ol.source.WMTS.prototype.getAttributions),goog.exportProperty(ol.source.WMTS.prototype,"getLogo",ol.source.WMTS.prototype.getLogo),goog.exportProperty(ol.source.WMTS.prototype,"getProjection",ol.source.WMTS.prototype.getProjection),goog.exportProperty(ol.source.WMTS.prototype,"getState",ol.source.WMTS.prototype.getState),goog.exportProperty(ol.source.WMTS.prototype,"setAttributions",ol.source.WMTS.prototype.setAttributions),goog.exportProperty(ol.source.WMTS.prototype,"get",ol.source.WMTS.prototype.get),goog.exportProperty(ol.source.WMTS.prototype,"getKeys",ol.source.WMTS.prototype.getKeys),goog.exportProperty(ol.source.WMTS.prototype,"getProperties",ol.source.WMTS.prototype.getProperties),goog.exportProperty(ol.source.WMTS.prototype,"set",ol.source.WMTS.prototype.set),goog.exportProperty(ol.source.WMTS.prototype,"setProperties",ol.source.WMTS.prototype.setProperties),goog.exportProperty(ol.source.WMTS.prototype,"unset",ol.source.WMTS.prototype.unset),goog.exportProperty(ol.source.WMTS.prototype,"changed",ol.source.WMTS.prototype.changed),goog.exportProperty(ol.source.WMTS.prototype,"dispatchEvent",ol.source.WMTS.prototype.dispatchEvent),goog.exportProperty(ol.source.WMTS.prototype,"getRevision",ol.source.WMTS.prototype.getRevision),goog.exportProperty(ol.source.WMTS.prototype,"on",ol.source.WMTS.prototype.on),goog.exportProperty(ol.source.WMTS.prototype,"once",ol.source.WMTS.prototype.once),goog.exportProperty(ol.source.WMTS.prototype,"un",ol.source.WMTS.prototype.un),goog.exportProperty(ol.source.Zoomify.prototype,"setRenderReprojectionEdges",ol.source.Zoomify.prototype.setRenderReprojectionEdges),goog.exportProperty(ol.source.Zoomify.prototype,"setTileGridForProjection",ol.source.Zoomify.prototype.setTileGridForProjection),goog.exportProperty(ol.source.Zoomify.prototype,"getTileLoadFunction",ol.source.Zoomify.prototype.getTileLoadFunction),goog.exportProperty(ol.source.Zoomify.prototype,"getTileUrlFunction",ol.source.Zoomify.prototype.getTileUrlFunction),goog.exportProperty(ol.source.Zoomify.prototype,"getUrls",ol.source.Zoomify.prototype.getUrls),goog.exportProperty(ol.source.Zoomify.prototype,"setTileLoadFunction",ol.source.Zoomify.prototype.setTileLoadFunction),goog.exportProperty(ol.source.Zoomify.prototype,"setTileUrlFunction",ol.source.Zoomify.prototype.setTileUrlFunction),goog.exportProperty(ol.source.Zoomify.prototype,"setUrl",ol.source.Zoomify.prototype.setUrl),goog.exportProperty(ol.source.Zoomify.prototype,"setUrls",ol.source.Zoomify.prototype.setUrls),goog.exportProperty(ol.source.Zoomify.prototype,"getTileGrid",ol.source.Zoomify.prototype.getTileGrid),goog.exportProperty(ol.source.Zoomify.prototype,"refresh",ol.source.Zoomify.prototype.refresh),goog.exportProperty(ol.source.Zoomify.prototype,"getAttributions",ol.source.Zoomify.prototype.getAttributions),goog.exportProperty(ol.source.Zoomify.prototype,"getLogo",ol.source.Zoomify.prototype.getLogo),goog.exportProperty(ol.source.Zoomify.prototype,"getProjection",ol.source.Zoomify.prototype.getProjection),goog.exportProperty(ol.source.Zoomify.prototype,"getState",ol.source.Zoomify.prototype.getState),goog.exportProperty(ol.source.Zoomify.prototype,"setAttributions",ol.source.Zoomify.prototype.setAttributions),goog.exportProperty(ol.source.Zoomify.prototype,"get",ol.source.Zoomify.prototype.get),goog.exportProperty(ol.source.Zoomify.prototype,"getKeys",ol.source.Zoomify.prototype.getKeys),goog.exportProperty(ol.source.Zoomify.prototype,"getProperties",ol.source.Zoomify.prototype.getProperties),goog.exportProperty(ol.source.Zoomify.prototype,"set",ol.source.Zoomify.prototype.set),goog.exportProperty(ol.source.Zoomify.prototype,"setProperties",ol.source.Zoomify.prototype.setProperties),goog.exportProperty(ol.source.Zoomify.prototype,"unset",ol.source.Zoomify.prototype.unset),goog.exportProperty(ol.source.Zoomify.prototype,"changed",ol.source.Zoomify.prototype.changed),goog.exportProperty(ol.source.Zoomify.prototype,"dispatchEvent",ol.source.Zoomify.prototype.dispatchEvent),goog.exportProperty(ol.source.Zoomify.prototype,"getRevision",ol.source.Zoomify.prototype.getRevision),goog.exportProperty(ol.source.Zoomify.prototype,"on",ol.source.Zoomify.prototype.on),goog.exportProperty(ol.source.Zoomify.prototype,"once",ol.source.Zoomify.prototype.once),goog.exportProperty(ol.source.Zoomify.prototype,"un",ol.source.Zoomify.prototype.un),goog.exportProperty(ol.reproj.Tile.prototype,"getTileCoord",ol.reproj.Tile.prototype.getTileCoord),goog.exportProperty(ol.reproj.Tile.prototype,"load",ol.reproj.Tile.prototype.load),goog.exportProperty(ol.renderer.Layer.prototype,"changed",ol.renderer.Layer.prototype.changed),goog.exportProperty(ol.renderer.Layer.prototype,"dispatchEvent",ol.renderer.Layer.prototype.dispatchEvent),goog.exportProperty(ol.renderer.Layer.prototype,"getRevision",ol.renderer.Layer.prototype.getRevision),goog.exportProperty(ol.renderer.Layer.prototype,"on",ol.renderer.Layer.prototype.on),goog.exportProperty(ol.renderer.Layer.prototype,"once",ol.renderer.Layer.prototype.once),goog.exportProperty(ol.renderer.Layer.prototype,"un",ol.renderer.Layer.prototype.un),goog.exportProperty(ol.renderer.webgl.Layer.prototype,"changed",ol.renderer.webgl.Layer.prototype.changed),goog.exportProperty(ol.renderer.webgl.Layer.prototype,"dispatchEvent",ol.renderer.webgl.Layer.prototype.dispatchEvent),goog.exportProperty(ol.renderer.webgl.Layer.prototype,"getRevision",ol.renderer.webgl.Layer.prototype.getRevision),goog.exportProperty(ol.renderer.webgl.Layer.prototype,"on",ol.renderer.webgl.Layer.prototype.on),goog.exportProperty(ol.renderer.webgl.Layer.prototype,"once",ol.renderer.webgl.Layer.prototype.once),goog.exportProperty(ol.renderer.webgl.Layer.prototype,"un",ol.renderer.webgl.Layer.prototype.un),goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"changed",ol.renderer.webgl.ImageLayer.prototype.changed),goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"dispatchEvent",ol.renderer.webgl.ImageLayer.prototype.dispatchEvent),goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"getRevision",ol.renderer.webgl.ImageLayer.prototype.getRevision),goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"on",ol.renderer.webgl.ImageLayer.prototype.on),goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"once",ol.renderer.webgl.ImageLayer.prototype.once),goog.exportProperty(ol.renderer.webgl.ImageLayer.prototype,"un",ol.renderer.webgl.ImageLayer.prototype.un),goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"changed",ol.renderer.webgl.TileLayer.prototype.changed),goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"dispatchEvent",ol.renderer.webgl.TileLayer.prototype.dispatchEvent),goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"getRevision",ol.renderer.webgl.TileLayer.prototype.getRevision),goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"on",ol.renderer.webgl.TileLayer.prototype.on),goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"once",ol.renderer.webgl.TileLayer.prototype.once),goog.exportProperty(ol.renderer.webgl.TileLayer.prototype,"un",ol.renderer.webgl.TileLayer.prototype.un),goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"changed",ol.renderer.webgl.VectorLayer.prototype.changed),goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"dispatchEvent",ol.renderer.webgl.VectorLayer.prototype.dispatchEvent),goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"getRevision",ol.renderer.webgl.VectorLayer.prototype.getRevision),goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"on",ol.renderer.webgl.VectorLayer.prototype.on),goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"once",ol.renderer.webgl.VectorLayer.prototype.once),goog.exportProperty(ol.renderer.webgl.VectorLayer.prototype,"un",ol.renderer.webgl.VectorLayer.prototype.un),goog.exportProperty(ol.renderer.canvas.Layer.prototype,"changed",ol.renderer.canvas.Layer.prototype.changed),goog.exportProperty(ol.renderer.canvas.Layer.prototype,"dispatchEvent",ol.renderer.canvas.Layer.prototype.dispatchEvent),goog.exportProperty(ol.renderer.canvas.Layer.prototype,"getRevision",ol.renderer.canvas.Layer.prototype.getRevision),goog.exportProperty(ol.renderer.canvas.Layer.prototype,"on",ol.renderer.canvas.Layer.prototype.on),goog.exportProperty(ol.renderer.canvas.Layer.prototype,"once",ol.renderer.canvas.Layer.prototype.once),goog.exportProperty(ol.renderer.canvas.Layer.prototype,"un",ol.renderer.canvas.Layer.prototype.un),goog.exportProperty(ol.renderer.canvas.IntermediateCanvas.prototype,"changed",ol.renderer.canvas.IntermediateCanvas.prototype.changed),goog.exportProperty(ol.renderer.canvas.IntermediateCanvas.prototype,"dispatchEvent",ol.renderer.canvas.IntermediateCanvas.prototype.dispatchEvent),goog.exportProperty(ol.renderer.canvas.IntermediateCanvas.prototype,"getRevision",ol.renderer.canvas.IntermediateCanvas.prototype.getRevision),goog.exportProperty(ol.renderer.canvas.IntermediateCanvas.prototype,"on",ol.renderer.canvas.IntermediateCanvas.prototype.on),goog.exportProperty(ol.renderer.canvas.IntermediateCanvas.prototype,"once",ol.renderer.canvas.IntermediateCanvas.prototype.once),goog.exportProperty(ol.renderer.canvas.IntermediateCanvas.prototype,"un",ol.renderer.canvas.IntermediateCanvas.prototype.un),goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"changed",ol.renderer.canvas.ImageLayer.prototype.changed),goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"dispatchEvent",ol.renderer.canvas.ImageLayer.prototype.dispatchEvent),goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"getRevision",ol.renderer.canvas.ImageLayer.prototype.getRevision),goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"on",ol.renderer.canvas.ImageLayer.prototype.on),goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"once",ol.renderer.canvas.ImageLayer.prototype.once),goog.exportProperty(ol.renderer.canvas.ImageLayer.prototype,"un",ol.renderer.canvas.ImageLayer.prototype.un),goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"changed",ol.renderer.canvas.TileLayer.prototype.changed),goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"dispatchEvent",ol.renderer.canvas.TileLayer.prototype.dispatchEvent),goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"getRevision",ol.renderer.canvas.TileLayer.prototype.getRevision),goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"on",ol.renderer.canvas.TileLayer.prototype.on),goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"once",ol.renderer.canvas.TileLayer.prototype.once),goog.exportProperty(ol.renderer.canvas.TileLayer.prototype,"un",ol.renderer.canvas.TileLayer.prototype.un),goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"changed",ol.renderer.canvas.VectorLayer.prototype.changed),goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"dispatchEvent",ol.renderer.canvas.VectorLayer.prototype.dispatchEvent),goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"getRevision",ol.renderer.canvas.VectorLayer.prototype.getRevision),goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"on",ol.renderer.canvas.VectorLayer.prototype.on),goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"once",ol.renderer.canvas.VectorLayer.prototype.once),goog.exportProperty(ol.renderer.canvas.VectorLayer.prototype,"un",ol.renderer.canvas.VectorLayer.prototype.un),goog.exportProperty(ol.renderer.canvas.VectorTileLayer.prototype,"changed",ol.renderer.canvas.VectorTileLayer.prototype.changed),goog.exportProperty(ol.renderer.canvas.VectorTileLayer.prototype,"dispatchEvent",ol.renderer.canvas.VectorTileLayer.prototype.dispatchEvent),goog.exportProperty(ol.renderer.canvas.VectorTileLayer.prototype,"getRevision",ol.renderer.canvas.VectorTileLayer.prototype.getRevision),goog.exportProperty(ol.renderer.canvas.VectorTileLayer.prototype,"on",ol.renderer.canvas.VectorTileLayer.prototype.on),goog.exportProperty(ol.renderer.canvas.VectorTileLayer.prototype,"once",ol.renderer.canvas.VectorTileLayer.prototype.once),goog.exportProperty(ol.renderer.canvas.VectorTileLayer.prototype,"un",ol.renderer.canvas.VectorTileLayer.prototype.un),goog.exportProperty(ol.render.Event.prototype,"type",ol.render.Event.prototype.type),goog.exportProperty(ol.render.Event.prototype,"target",ol.render.Event.prototype.target),goog.exportProperty(ol.render.Event.prototype,"preventDefault",ol.render.Event.prototype.preventDefault),goog.exportProperty(ol.render.Event.prototype,"stopPropagation",ol.render.Event.prototype.stopPropagation),goog.exportProperty(ol.pointer.PointerEvent.prototype,"type",ol.pointer.PointerEvent.prototype.type),goog.exportProperty(ol.pointer.PointerEvent.prototype,"target",ol.pointer.PointerEvent.prototype.target),goog.exportProperty(ol.pointer.PointerEvent.prototype,"preventDefault",ol.pointer.PointerEvent.prototype.preventDefault),goog.exportProperty(ol.pointer.PointerEvent.prototype,"stopPropagation",ol.pointer.PointerEvent.prototype.stopPropagation),goog.exportProperty(ol.layer.Base.prototype,"get",ol.layer.Base.prototype.get),goog.exportProperty(ol.layer.Base.prototype,"getKeys",ol.layer.Base.prototype.getKeys),goog.exportProperty(ol.layer.Base.prototype,"getProperties",ol.layer.Base.prototype.getProperties),goog.exportProperty(ol.layer.Base.prototype,"set",ol.layer.Base.prototype.set),goog.exportProperty(ol.layer.Base.prototype,"setProperties",ol.layer.Base.prototype.setProperties),goog.exportProperty(ol.layer.Base.prototype,"unset",ol.layer.Base.prototype.unset),goog.exportProperty(ol.layer.Base.prototype,"changed",ol.layer.Base.prototype.changed),goog.exportProperty(ol.layer.Base.prototype,"dispatchEvent",ol.layer.Base.prototype.dispatchEvent),goog.exportProperty(ol.layer.Base.prototype,"getRevision",ol.layer.Base.prototype.getRevision),goog.exportProperty(ol.layer.Base.prototype,"on",ol.layer.Base.prototype.on),goog.exportProperty(ol.layer.Base.prototype,"once",ol.layer.Base.prototype.once),goog.exportProperty(ol.layer.Base.prototype,"un",ol.layer.Base.prototype.un),goog.exportProperty(ol.layer.Group.prototype,"getExtent",ol.layer.Group.prototype.getExtent),goog.exportProperty(ol.layer.Group.prototype,"getMaxResolution",ol.layer.Group.prototype.getMaxResolution),goog.exportProperty(ol.layer.Group.prototype,"getMinResolution",ol.layer.Group.prototype.getMinResolution),goog.exportProperty(ol.layer.Group.prototype,"getOpacity",ol.layer.Group.prototype.getOpacity),goog.exportProperty(ol.layer.Group.prototype,"getVisible",ol.layer.Group.prototype.getVisible),goog.exportProperty(ol.layer.Group.prototype,"getZIndex",ol.layer.Group.prototype.getZIndex),goog.exportProperty(ol.layer.Group.prototype,"setExtent",ol.layer.Group.prototype.setExtent),goog.exportProperty(ol.layer.Group.prototype,"setMaxResolution",ol.layer.Group.prototype.setMaxResolution),goog.exportProperty(ol.layer.Group.prototype,"setMinResolution",ol.layer.Group.prototype.setMinResolution),goog.exportProperty(ol.layer.Group.prototype,"setOpacity",ol.layer.Group.prototype.setOpacity),goog.exportProperty(ol.layer.Group.prototype,"setVisible",ol.layer.Group.prototype.setVisible),goog.exportProperty(ol.layer.Group.prototype,"setZIndex",ol.layer.Group.prototype.setZIndex),goog.exportProperty(ol.layer.Group.prototype,"get",ol.layer.Group.prototype.get),goog.exportProperty(ol.layer.Group.prototype,"getKeys",ol.layer.Group.prototype.getKeys),goog.exportProperty(ol.layer.Group.prototype,"getProperties",ol.layer.Group.prototype.getProperties),goog.exportProperty(ol.layer.Group.prototype,"set",ol.layer.Group.prototype.set),goog.exportProperty(ol.layer.Group.prototype,"setProperties",ol.layer.Group.prototype.setProperties),goog.exportProperty(ol.layer.Group.prototype,"unset",ol.layer.Group.prototype.unset),goog.exportProperty(ol.layer.Group.prototype,"changed",ol.layer.Group.prototype.changed),goog.exportProperty(ol.layer.Group.prototype,"dispatchEvent",ol.layer.Group.prototype.dispatchEvent),goog.exportProperty(ol.layer.Group.prototype,"getRevision",ol.layer.Group.prototype.getRevision),goog.exportProperty(ol.layer.Group.prototype,"on",ol.layer.Group.prototype.on),goog.exportProperty(ol.layer.Group.prototype,"once",ol.layer.Group.prototype.once),goog.exportProperty(ol.layer.Group.prototype,"un",ol.layer.Group.prototype.un),goog.exportProperty(ol.layer.Layer.prototype,"getExtent",ol.layer.Layer.prototype.getExtent),goog.exportProperty(ol.layer.Layer.prototype,"getMaxResolution",ol.layer.Layer.prototype.getMaxResolution),goog.exportProperty(ol.layer.Layer.prototype,"getMinResolution",ol.layer.Layer.prototype.getMinResolution),goog.exportProperty(ol.layer.Layer.prototype,"getOpacity",ol.layer.Layer.prototype.getOpacity),goog.exportProperty(ol.layer.Layer.prototype,"getVisible",ol.layer.Layer.prototype.getVisible),goog.exportProperty(ol.layer.Layer.prototype,"getZIndex",ol.layer.Layer.prototype.getZIndex),goog.exportProperty(ol.layer.Layer.prototype,"setExtent",ol.layer.Layer.prototype.setExtent),goog.exportProperty(ol.layer.Layer.prototype,"setMaxResolution",ol.layer.Layer.prototype.setMaxResolution),goog.exportProperty(ol.layer.Layer.prototype,"setMinResolution",ol.layer.Layer.prototype.setMinResolution),goog.exportProperty(ol.layer.Layer.prototype,"setOpacity",ol.layer.Layer.prototype.setOpacity),goog.exportProperty(ol.layer.Layer.prototype,"setVisible",ol.layer.Layer.prototype.setVisible),goog.exportProperty(ol.layer.Layer.prototype,"setZIndex",ol.layer.Layer.prototype.setZIndex),goog.exportProperty(ol.layer.Layer.prototype,"get",ol.layer.Layer.prototype.get),goog.exportProperty(ol.layer.Layer.prototype,"getKeys",ol.layer.Layer.prototype.getKeys),goog.exportProperty(ol.layer.Layer.prototype,"getProperties",ol.layer.Layer.prototype.getProperties),goog.exportProperty(ol.layer.Layer.prototype,"set",ol.layer.Layer.prototype.set),goog.exportProperty(ol.layer.Layer.prototype,"setProperties",ol.layer.Layer.prototype.setProperties),goog.exportProperty(ol.layer.Layer.prototype,"unset",ol.layer.Layer.prototype.unset),goog.exportProperty(ol.layer.Layer.prototype,"changed",ol.layer.Layer.prototype.changed),goog.exportProperty(ol.layer.Layer.prototype,"dispatchEvent",ol.layer.Layer.prototype.dispatchEvent),goog.exportProperty(ol.layer.Layer.prototype,"getRevision",ol.layer.Layer.prototype.getRevision),goog.exportProperty(ol.layer.Layer.prototype,"on",ol.layer.Layer.prototype.on),goog.exportProperty(ol.layer.Layer.prototype,"once",ol.layer.Layer.prototype.once),goog.exportProperty(ol.layer.Layer.prototype,"un",ol.layer.Layer.prototype.un),goog.exportProperty(ol.layer.Vector.prototype,"setMap",ol.layer.Vector.prototype.setMap),goog.exportProperty(ol.layer.Vector.prototype,"setSource",ol.layer.Vector.prototype.setSource),goog.exportProperty(ol.layer.Vector.prototype,"getExtent",ol.layer.Vector.prototype.getExtent),goog.exportProperty(ol.layer.Vector.prototype,"getMaxResolution",ol.layer.Vector.prototype.getMaxResolution),goog.exportProperty(ol.layer.Vector.prototype,"getMinResolution",ol.layer.Vector.prototype.getMinResolution),goog.exportProperty(ol.layer.Vector.prototype,"getOpacity",ol.layer.Vector.prototype.getOpacity),goog.exportProperty(ol.layer.Vector.prototype,"getVisible",ol.layer.Vector.prototype.getVisible),goog.exportProperty(ol.layer.Vector.prototype,"getZIndex",ol.layer.Vector.prototype.getZIndex),goog.exportProperty(ol.layer.Vector.prototype,"setExtent",ol.layer.Vector.prototype.setExtent),goog.exportProperty(ol.layer.Vector.prototype,"setMaxResolution",ol.layer.Vector.prototype.setMaxResolution),goog.exportProperty(ol.layer.Vector.prototype,"setMinResolution",ol.layer.Vector.prototype.setMinResolution),goog.exportProperty(ol.layer.Vector.prototype,"setOpacity",ol.layer.Vector.prototype.setOpacity),
goog.exportProperty(ol.layer.Vector.prototype,"setVisible",ol.layer.Vector.prototype.setVisible),goog.exportProperty(ol.layer.Vector.prototype,"setZIndex",ol.layer.Vector.prototype.setZIndex),goog.exportProperty(ol.layer.Vector.prototype,"get",ol.layer.Vector.prototype.get),goog.exportProperty(ol.layer.Vector.prototype,"getKeys",ol.layer.Vector.prototype.getKeys),goog.exportProperty(ol.layer.Vector.prototype,"getProperties",ol.layer.Vector.prototype.getProperties),goog.exportProperty(ol.layer.Vector.prototype,"set",ol.layer.Vector.prototype.set),goog.exportProperty(ol.layer.Vector.prototype,"setProperties",ol.layer.Vector.prototype.setProperties),goog.exportProperty(ol.layer.Vector.prototype,"unset",ol.layer.Vector.prototype.unset),goog.exportProperty(ol.layer.Vector.prototype,"changed",ol.layer.Vector.prototype.changed),goog.exportProperty(ol.layer.Vector.prototype,"dispatchEvent",ol.layer.Vector.prototype.dispatchEvent),goog.exportProperty(ol.layer.Vector.prototype,"getRevision",ol.layer.Vector.prototype.getRevision),goog.exportProperty(ol.layer.Vector.prototype,"on",ol.layer.Vector.prototype.on),goog.exportProperty(ol.layer.Vector.prototype,"once",ol.layer.Vector.prototype.once),goog.exportProperty(ol.layer.Vector.prototype,"un",ol.layer.Vector.prototype.un),goog.exportProperty(ol.layer.Heatmap.prototype,"getSource",ol.layer.Heatmap.prototype.getSource),goog.exportProperty(ol.layer.Heatmap.prototype,"getStyle",ol.layer.Heatmap.prototype.getStyle),goog.exportProperty(ol.layer.Heatmap.prototype,"getStyleFunction",ol.layer.Heatmap.prototype.getStyleFunction),goog.exportProperty(ol.layer.Heatmap.prototype,"setStyle",ol.layer.Heatmap.prototype.setStyle),goog.exportProperty(ol.layer.Heatmap.prototype,"setMap",ol.layer.Heatmap.prototype.setMap),goog.exportProperty(ol.layer.Heatmap.prototype,"setSource",ol.layer.Heatmap.prototype.setSource),goog.exportProperty(ol.layer.Heatmap.prototype,"getExtent",ol.layer.Heatmap.prototype.getExtent),goog.exportProperty(ol.layer.Heatmap.prototype,"getMaxResolution",ol.layer.Heatmap.prototype.getMaxResolution),goog.exportProperty(ol.layer.Heatmap.prototype,"getMinResolution",ol.layer.Heatmap.prototype.getMinResolution),goog.exportProperty(ol.layer.Heatmap.prototype,"getOpacity",ol.layer.Heatmap.prototype.getOpacity),goog.exportProperty(ol.layer.Heatmap.prototype,"getVisible",ol.layer.Heatmap.prototype.getVisible),goog.exportProperty(ol.layer.Heatmap.prototype,"getZIndex",ol.layer.Heatmap.prototype.getZIndex),goog.exportProperty(ol.layer.Heatmap.prototype,"setExtent",ol.layer.Heatmap.prototype.setExtent),goog.exportProperty(ol.layer.Heatmap.prototype,"setMaxResolution",ol.layer.Heatmap.prototype.setMaxResolution),goog.exportProperty(ol.layer.Heatmap.prototype,"setMinResolution",ol.layer.Heatmap.prototype.setMinResolution),goog.exportProperty(ol.layer.Heatmap.prototype,"setOpacity",ol.layer.Heatmap.prototype.setOpacity),goog.exportProperty(ol.layer.Heatmap.prototype,"setVisible",ol.layer.Heatmap.prototype.setVisible),goog.exportProperty(ol.layer.Heatmap.prototype,"setZIndex",ol.layer.Heatmap.prototype.setZIndex),goog.exportProperty(ol.layer.Heatmap.prototype,"get",ol.layer.Heatmap.prototype.get),goog.exportProperty(ol.layer.Heatmap.prototype,"getKeys",ol.layer.Heatmap.prototype.getKeys),goog.exportProperty(ol.layer.Heatmap.prototype,"getProperties",ol.layer.Heatmap.prototype.getProperties),goog.exportProperty(ol.layer.Heatmap.prototype,"set",ol.layer.Heatmap.prototype.set),goog.exportProperty(ol.layer.Heatmap.prototype,"setProperties",ol.layer.Heatmap.prototype.setProperties),goog.exportProperty(ol.layer.Heatmap.prototype,"unset",ol.layer.Heatmap.prototype.unset),goog.exportProperty(ol.layer.Heatmap.prototype,"changed",ol.layer.Heatmap.prototype.changed),goog.exportProperty(ol.layer.Heatmap.prototype,"dispatchEvent",ol.layer.Heatmap.prototype.dispatchEvent),goog.exportProperty(ol.layer.Heatmap.prototype,"getRevision",ol.layer.Heatmap.prototype.getRevision),goog.exportProperty(ol.layer.Heatmap.prototype,"on",ol.layer.Heatmap.prototype.on),goog.exportProperty(ol.layer.Heatmap.prototype,"once",ol.layer.Heatmap.prototype.once),goog.exportProperty(ol.layer.Heatmap.prototype,"un",ol.layer.Heatmap.prototype.un),goog.exportProperty(ol.layer.Image.prototype,"setMap",ol.layer.Image.prototype.setMap),goog.exportProperty(ol.layer.Image.prototype,"setSource",ol.layer.Image.prototype.setSource),goog.exportProperty(ol.layer.Image.prototype,"getExtent",ol.layer.Image.prototype.getExtent),goog.exportProperty(ol.layer.Image.prototype,"getMaxResolution",ol.layer.Image.prototype.getMaxResolution),goog.exportProperty(ol.layer.Image.prototype,"getMinResolution",ol.layer.Image.prototype.getMinResolution),goog.exportProperty(ol.layer.Image.prototype,"getOpacity",ol.layer.Image.prototype.getOpacity),goog.exportProperty(ol.layer.Image.prototype,"getVisible",ol.layer.Image.prototype.getVisible),goog.exportProperty(ol.layer.Image.prototype,"getZIndex",ol.layer.Image.prototype.getZIndex),goog.exportProperty(ol.layer.Image.prototype,"setExtent",ol.layer.Image.prototype.setExtent),goog.exportProperty(ol.layer.Image.prototype,"setMaxResolution",ol.layer.Image.prototype.setMaxResolution),goog.exportProperty(ol.layer.Image.prototype,"setMinResolution",ol.layer.Image.prototype.setMinResolution),goog.exportProperty(ol.layer.Image.prototype,"setOpacity",ol.layer.Image.prototype.setOpacity),goog.exportProperty(ol.layer.Image.prototype,"setVisible",ol.layer.Image.prototype.setVisible),goog.exportProperty(ol.layer.Image.prototype,"setZIndex",ol.layer.Image.prototype.setZIndex),goog.exportProperty(ol.layer.Image.prototype,"get",ol.layer.Image.prototype.get),goog.exportProperty(ol.layer.Image.prototype,"getKeys",ol.layer.Image.prototype.getKeys),goog.exportProperty(ol.layer.Image.prototype,"getProperties",ol.layer.Image.prototype.getProperties),goog.exportProperty(ol.layer.Image.prototype,"set",ol.layer.Image.prototype.set),goog.exportProperty(ol.layer.Image.prototype,"setProperties",ol.layer.Image.prototype.setProperties),goog.exportProperty(ol.layer.Image.prototype,"unset",ol.layer.Image.prototype.unset),goog.exportProperty(ol.layer.Image.prototype,"changed",ol.layer.Image.prototype.changed),goog.exportProperty(ol.layer.Image.prototype,"dispatchEvent",ol.layer.Image.prototype.dispatchEvent),goog.exportProperty(ol.layer.Image.prototype,"getRevision",ol.layer.Image.prototype.getRevision),goog.exportProperty(ol.layer.Image.prototype,"on",ol.layer.Image.prototype.on),goog.exportProperty(ol.layer.Image.prototype,"once",ol.layer.Image.prototype.once),goog.exportProperty(ol.layer.Image.prototype,"un",ol.layer.Image.prototype.un),goog.exportProperty(ol.layer.Tile.prototype,"setMap",ol.layer.Tile.prototype.setMap),goog.exportProperty(ol.layer.Tile.prototype,"setSource",ol.layer.Tile.prototype.setSource),goog.exportProperty(ol.layer.Tile.prototype,"getExtent",ol.layer.Tile.prototype.getExtent),goog.exportProperty(ol.layer.Tile.prototype,"getMaxResolution",ol.layer.Tile.prototype.getMaxResolution),goog.exportProperty(ol.layer.Tile.prototype,"getMinResolution",ol.layer.Tile.prototype.getMinResolution),goog.exportProperty(ol.layer.Tile.prototype,"getOpacity",ol.layer.Tile.prototype.getOpacity),goog.exportProperty(ol.layer.Tile.prototype,"getVisible",ol.layer.Tile.prototype.getVisible),goog.exportProperty(ol.layer.Tile.prototype,"getZIndex",ol.layer.Tile.prototype.getZIndex),goog.exportProperty(ol.layer.Tile.prototype,"setExtent",ol.layer.Tile.prototype.setExtent),goog.exportProperty(ol.layer.Tile.prototype,"setMaxResolution",ol.layer.Tile.prototype.setMaxResolution),goog.exportProperty(ol.layer.Tile.prototype,"setMinResolution",ol.layer.Tile.prototype.setMinResolution),goog.exportProperty(ol.layer.Tile.prototype,"setOpacity",ol.layer.Tile.prototype.setOpacity),goog.exportProperty(ol.layer.Tile.prototype,"setVisible",ol.layer.Tile.prototype.setVisible),goog.exportProperty(ol.layer.Tile.prototype,"setZIndex",ol.layer.Tile.prototype.setZIndex),goog.exportProperty(ol.layer.Tile.prototype,"get",ol.layer.Tile.prototype.get),goog.exportProperty(ol.layer.Tile.prototype,"getKeys",ol.layer.Tile.prototype.getKeys),goog.exportProperty(ol.layer.Tile.prototype,"getProperties",ol.layer.Tile.prototype.getProperties),goog.exportProperty(ol.layer.Tile.prototype,"set",ol.layer.Tile.prototype.set),goog.exportProperty(ol.layer.Tile.prototype,"setProperties",ol.layer.Tile.prototype.setProperties),goog.exportProperty(ol.layer.Tile.prototype,"unset",ol.layer.Tile.prototype.unset),goog.exportProperty(ol.layer.Tile.prototype,"changed",ol.layer.Tile.prototype.changed),goog.exportProperty(ol.layer.Tile.prototype,"dispatchEvent",ol.layer.Tile.prototype.dispatchEvent),goog.exportProperty(ol.layer.Tile.prototype,"getRevision",ol.layer.Tile.prototype.getRevision),goog.exportProperty(ol.layer.Tile.prototype,"on",ol.layer.Tile.prototype.on),goog.exportProperty(ol.layer.Tile.prototype,"once",ol.layer.Tile.prototype.once),goog.exportProperty(ol.layer.Tile.prototype,"un",ol.layer.Tile.prototype.un),goog.exportProperty(ol.layer.VectorTile.prototype,"getSource",ol.layer.VectorTile.prototype.getSource),goog.exportProperty(ol.layer.VectorTile.prototype,"getStyle",ol.layer.VectorTile.prototype.getStyle),goog.exportProperty(ol.layer.VectorTile.prototype,"getStyleFunction",ol.layer.VectorTile.prototype.getStyleFunction),goog.exportProperty(ol.layer.VectorTile.prototype,"setStyle",ol.layer.VectorTile.prototype.setStyle),goog.exportProperty(ol.layer.VectorTile.prototype,"setMap",ol.layer.VectorTile.prototype.setMap),goog.exportProperty(ol.layer.VectorTile.prototype,"setSource",ol.layer.VectorTile.prototype.setSource),goog.exportProperty(ol.layer.VectorTile.prototype,"getExtent",ol.layer.VectorTile.prototype.getExtent),goog.exportProperty(ol.layer.VectorTile.prototype,"getMaxResolution",ol.layer.VectorTile.prototype.getMaxResolution),goog.exportProperty(ol.layer.VectorTile.prototype,"getMinResolution",ol.layer.VectorTile.prototype.getMinResolution),goog.exportProperty(ol.layer.VectorTile.prototype,"getOpacity",ol.layer.VectorTile.prototype.getOpacity),goog.exportProperty(ol.layer.VectorTile.prototype,"getVisible",ol.layer.VectorTile.prototype.getVisible),goog.exportProperty(ol.layer.VectorTile.prototype,"getZIndex",ol.layer.VectorTile.prototype.getZIndex),goog.exportProperty(ol.layer.VectorTile.prototype,"setExtent",ol.layer.VectorTile.prototype.setExtent),goog.exportProperty(ol.layer.VectorTile.prototype,"setMaxResolution",ol.layer.VectorTile.prototype.setMaxResolution),goog.exportProperty(ol.layer.VectorTile.prototype,"setMinResolution",ol.layer.VectorTile.prototype.setMinResolution),goog.exportProperty(ol.layer.VectorTile.prototype,"setOpacity",ol.layer.VectorTile.prototype.setOpacity),goog.exportProperty(ol.layer.VectorTile.prototype,"setVisible",ol.layer.VectorTile.prototype.setVisible),goog.exportProperty(ol.layer.VectorTile.prototype,"setZIndex",ol.layer.VectorTile.prototype.setZIndex),goog.exportProperty(ol.layer.VectorTile.prototype,"get",ol.layer.VectorTile.prototype.get),goog.exportProperty(ol.layer.VectorTile.prototype,"getKeys",ol.layer.VectorTile.prototype.getKeys),goog.exportProperty(ol.layer.VectorTile.prototype,"getProperties",ol.layer.VectorTile.prototype.getProperties),goog.exportProperty(ol.layer.VectorTile.prototype,"set",ol.layer.VectorTile.prototype.set),goog.exportProperty(ol.layer.VectorTile.prototype,"setProperties",ol.layer.VectorTile.prototype.setProperties),goog.exportProperty(ol.layer.VectorTile.prototype,"unset",ol.layer.VectorTile.prototype.unset),goog.exportProperty(ol.layer.VectorTile.prototype,"changed",ol.layer.VectorTile.prototype.changed),goog.exportProperty(ol.layer.VectorTile.prototype,"dispatchEvent",ol.layer.VectorTile.prototype.dispatchEvent),goog.exportProperty(ol.layer.VectorTile.prototype,"getRevision",ol.layer.VectorTile.prototype.getRevision),goog.exportProperty(ol.layer.VectorTile.prototype,"on",ol.layer.VectorTile.prototype.on),goog.exportProperty(ol.layer.VectorTile.prototype,"once",ol.layer.VectorTile.prototype.once),goog.exportProperty(ol.layer.VectorTile.prototype,"un",ol.layer.VectorTile.prototype.un),goog.exportProperty(ol.interaction.Interaction.prototype,"get",ol.interaction.Interaction.prototype.get),goog.exportProperty(ol.interaction.Interaction.prototype,"getKeys",ol.interaction.Interaction.prototype.getKeys),goog.exportProperty(ol.interaction.Interaction.prototype,"getProperties",ol.interaction.Interaction.prototype.getProperties),goog.exportProperty(ol.interaction.Interaction.prototype,"set",ol.interaction.Interaction.prototype.set),goog.exportProperty(ol.interaction.Interaction.prototype,"setProperties",ol.interaction.Interaction.prototype.setProperties),goog.exportProperty(ol.interaction.Interaction.prototype,"unset",ol.interaction.Interaction.prototype.unset),goog.exportProperty(ol.interaction.Interaction.prototype,"changed",ol.interaction.Interaction.prototype.changed),goog.exportProperty(ol.interaction.Interaction.prototype,"dispatchEvent",ol.interaction.Interaction.prototype.dispatchEvent),goog.exportProperty(ol.interaction.Interaction.prototype,"getRevision",ol.interaction.Interaction.prototype.getRevision),goog.exportProperty(ol.interaction.Interaction.prototype,"on",ol.interaction.Interaction.prototype.on),goog.exportProperty(ol.interaction.Interaction.prototype,"once",ol.interaction.Interaction.prototype.once),goog.exportProperty(ol.interaction.Interaction.prototype,"un",ol.interaction.Interaction.prototype.un),goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"getActive",ol.interaction.DoubleClickZoom.prototype.getActive),goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"getMap",ol.interaction.DoubleClickZoom.prototype.getMap),goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"setActive",ol.interaction.DoubleClickZoom.prototype.setActive),goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"get",ol.interaction.DoubleClickZoom.prototype.get),goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"getKeys",ol.interaction.DoubleClickZoom.prototype.getKeys),goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"getProperties",ol.interaction.DoubleClickZoom.prototype.getProperties),goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"set",ol.interaction.DoubleClickZoom.prototype.set),goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"setProperties",ol.interaction.DoubleClickZoom.prototype.setProperties),goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"unset",ol.interaction.DoubleClickZoom.prototype.unset),goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"changed",ol.interaction.DoubleClickZoom.prototype.changed),goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"dispatchEvent",ol.interaction.DoubleClickZoom.prototype.dispatchEvent),goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"getRevision",ol.interaction.DoubleClickZoom.prototype.getRevision),goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"on",ol.interaction.DoubleClickZoom.prototype.on),goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"once",ol.interaction.DoubleClickZoom.prototype.once),goog.exportProperty(ol.interaction.DoubleClickZoom.prototype,"un",ol.interaction.DoubleClickZoom.prototype.un),goog.exportProperty(ol.interaction.DragAndDrop.prototype,"getActive",ol.interaction.DragAndDrop.prototype.getActive),goog.exportProperty(ol.interaction.DragAndDrop.prototype,"getMap",ol.interaction.DragAndDrop.prototype.getMap),goog.exportProperty(ol.interaction.DragAndDrop.prototype,"setActive",ol.interaction.DragAndDrop.prototype.setActive),goog.exportProperty(ol.interaction.DragAndDrop.prototype,"get",ol.interaction.DragAndDrop.prototype.get),goog.exportProperty(ol.interaction.DragAndDrop.prototype,"getKeys",ol.interaction.DragAndDrop.prototype.getKeys),goog.exportProperty(ol.interaction.DragAndDrop.prototype,"getProperties",ol.interaction.DragAndDrop.prototype.getProperties),goog.exportProperty(ol.interaction.DragAndDrop.prototype,"set",ol.interaction.DragAndDrop.prototype.set),goog.exportProperty(ol.interaction.DragAndDrop.prototype,"setProperties",ol.interaction.DragAndDrop.prototype.setProperties),goog.exportProperty(ol.interaction.DragAndDrop.prototype,"unset",ol.interaction.DragAndDrop.prototype.unset),goog.exportProperty(ol.interaction.DragAndDrop.prototype,"changed",ol.interaction.DragAndDrop.prototype.changed),goog.exportProperty(ol.interaction.DragAndDrop.prototype,"dispatchEvent",ol.interaction.DragAndDrop.prototype.dispatchEvent),goog.exportProperty(ol.interaction.DragAndDrop.prototype,"getRevision",ol.interaction.DragAndDrop.prototype.getRevision),goog.exportProperty(ol.interaction.DragAndDrop.prototype,"on",ol.interaction.DragAndDrop.prototype.on),goog.exportProperty(ol.interaction.DragAndDrop.prototype,"once",ol.interaction.DragAndDrop.prototype.once),goog.exportProperty(ol.interaction.DragAndDrop.prototype,"un",ol.interaction.DragAndDrop.prototype.un),goog.exportProperty(ol.interaction.DragAndDrop.Event.prototype,"type",ol.interaction.DragAndDrop.Event.prototype.type),goog.exportProperty(ol.interaction.DragAndDrop.Event.prototype,"target",ol.interaction.DragAndDrop.Event.prototype.target),goog.exportProperty(ol.interaction.DragAndDrop.Event.prototype,"preventDefault",ol.interaction.DragAndDrop.Event.prototype.preventDefault),goog.exportProperty(ol.interaction.DragAndDrop.Event.prototype,"stopPropagation",ol.interaction.DragAndDrop.Event.prototype.stopPropagation),goog.exportProperty(ol.interaction.Pointer.prototype,"getActive",ol.interaction.Pointer.prototype.getActive),goog.exportProperty(ol.interaction.Pointer.prototype,"getMap",ol.interaction.Pointer.prototype.getMap),goog.exportProperty(ol.interaction.Pointer.prototype,"setActive",ol.interaction.Pointer.prototype.setActive),goog.exportProperty(ol.interaction.Pointer.prototype,"get",ol.interaction.Pointer.prototype.get),goog.exportProperty(ol.interaction.Pointer.prototype,"getKeys",ol.interaction.Pointer.prototype.getKeys),goog.exportProperty(ol.interaction.Pointer.prototype,"getProperties",ol.interaction.Pointer.prototype.getProperties),goog.exportProperty(ol.interaction.Pointer.prototype,"set",ol.interaction.Pointer.prototype.set),goog.exportProperty(ol.interaction.Pointer.prototype,"setProperties",ol.interaction.Pointer.prototype.setProperties),goog.exportProperty(ol.interaction.Pointer.prototype,"unset",ol.interaction.Pointer.prototype.unset),goog.exportProperty(ol.interaction.Pointer.prototype,"changed",ol.interaction.Pointer.prototype.changed),goog.exportProperty(ol.interaction.Pointer.prototype,"dispatchEvent",ol.interaction.Pointer.prototype.dispatchEvent),goog.exportProperty(ol.interaction.Pointer.prototype,"getRevision",ol.interaction.Pointer.prototype.getRevision),goog.exportProperty(ol.interaction.Pointer.prototype,"on",ol.interaction.Pointer.prototype.on),goog.exportProperty(ol.interaction.Pointer.prototype,"once",ol.interaction.Pointer.prototype.once),goog.exportProperty(ol.interaction.Pointer.prototype,"un",ol.interaction.Pointer.prototype.un),goog.exportProperty(ol.interaction.DragBox.prototype,"getActive",ol.interaction.DragBox.prototype.getActive),goog.exportProperty(ol.interaction.DragBox.prototype,"getMap",ol.interaction.DragBox.prototype.getMap),goog.exportProperty(ol.interaction.DragBox.prototype,"setActive",ol.interaction.DragBox.prototype.setActive),goog.exportProperty(ol.interaction.DragBox.prototype,"get",ol.interaction.DragBox.prototype.get),goog.exportProperty(ol.interaction.DragBox.prototype,"getKeys",ol.interaction.DragBox.prototype.getKeys),goog.exportProperty(ol.interaction.DragBox.prototype,"getProperties",ol.interaction.DragBox.prototype.getProperties),goog.exportProperty(ol.interaction.DragBox.prototype,"set",ol.interaction.DragBox.prototype.set),goog.exportProperty(ol.interaction.DragBox.prototype,"setProperties",ol.interaction.DragBox.prototype.setProperties),goog.exportProperty(ol.interaction.DragBox.prototype,"unset",ol.interaction.DragBox.prototype.unset),goog.exportProperty(ol.interaction.DragBox.prototype,"changed",ol.interaction.DragBox.prototype.changed),goog.exportProperty(ol.interaction.DragBox.prototype,"dispatchEvent",ol.interaction.DragBox.prototype.dispatchEvent),goog.exportProperty(ol.interaction.DragBox.prototype,"getRevision",ol.interaction.DragBox.prototype.getRevision),goog.exportProperty(ol.interaction.DragBox.prototype,"on",ol.interaction.DragBox.prototype.on),goog.exportProperty(ol.interaction.DragBox.prototype,"once",ol.interaction.DragBox.prototype.once),goog.exportProperty(ol.interaction.DragBox.prototype,"un",ol.interaction.DragBox.prototype.un),goog.exportProperty(ol.interaction.DragBox.Event.prototype,"type",ol.interaction.DragBox.Event.prototype.type),goog.exportProperty(ol.interaction.DragBox.Event.prototype,"target",ol.interaction.DragBox.Event.prototype.target),goog.exportProperty(ol.interaction.DragBox.Event.prototype,"preventDefault",ol.interaction.DragBox.Event.prototype.preventDefault),goog.exportProperty(ol.interaction.DragBox.Event.prototype,"stopPropagation",ol.interaction.DragBox.Event.prototype.stopPropagation),goog.exportProperty(ol.interaction.DragPan.prototype,"getActive",ol.interaction.DragPan.prototype.getActive),goog.exportProperty(ol.interaction.DragPan.prototype,"getMap",ol.interaction.DragPan.prototype.getMap),goog.exportProperty(ol.interaction.DragPan.prototype,"setActive",ol.interaction.DragPan.prototype.setActive),goog.exportProperty(ol.interaction.DragPan.prototype,"get",ol.interaction.DragPan.prototype.get),goog.exportProperty(ol.interaction.DragPan.prototype,"getKeys",ol.interaction.DragPan.prototype.getKeys),goog.exportProperty(ol.interaction.DragPan.prototype,"getProperties",ol.interaction.DragPan.prototype.getProperties),goog.exportProperty(ol.interaction.DragPan.prototype,"set",ol.interaction.DragPan.prototype.set),goog.exportProperty(ol.interaction.DragPan.prototype,"setProperties",ol.interaction.DragPan.prototype.setProperties),goog.exportProperty(ol.interaction.DragPan.prototype,"unset",ol.interaction.DragPan.prototype.unset),goog.exportProperty(ol.interaction.DragPan.prototype,"changed",ol.interaction.DragPan.prototype.changed),goog.exportProperty(ol.interaction.DragPan.prototype,"dispatchEvent",ol.interaction.DragPan.prototype.dispatchEvent),goog.exportProperty(ol.interaction.DragPan.prototype,"getRevision",ol.interaction.DragPan.prototype.getRevision),goog.exportProperty(ol.interaction.DragPan.prototype,"on",ol.interaction.DragPan.prototype.on),goog.exportProperty(ol.interaction.DragPan.prototype,"once",ol.interaction.DragPan.prototype.once),goog.exportProperty(ol.interaction.DragPan.prototype,"un",ol.interaction.DragPan.prototype.un),goog.exportProperty(ol.interaction.DragRotate.prototype,"getActive",ol.interaction.DragRotate.prototype.getActive),goog.exportProperty(ol.interaction.DragRotate.prototype,"getMap",ol.interaction.DragRotate.prototype.getMap),goog.exportProperty(ol.interaction.DragRotate.prototype,"setActive",ol.interaction.DragRotate.prototype.setActive),goog.exportProperty(ol.interaction.DragRotate.prototype,"get",ol.interaction.DragRotate.prototype.get),goog.exportProperty(ol.interaction.DragRotate.prototype,"getKeys",ol.interaction.DragRotate.prototype.getKeys),goog.exportProperty(ol.interaction.DragRotate.prototype,"getProperties",ol.interaction.DragRotate.prototype.getProperties),goog.exportProperty(ol.interaction.DragRotate.prototype,"set",ol.interaction.DragRotate.prototype.set),goog.exportProperty(ol.interaction.DragRotate.prototype,"setProperties",ol.interaction.DragRotate.prototype.setProperties),goog.exportProperty(ol.interaction.DragRotate.prototype,"unset",ol.interaction.DragRotate.prototype.unset),goog.exportProperty(ol.interaction.DragRotate.prototype,"changed",ol.interaction.DragRotate.prototype.changed),goog.exportProperty(ol.interaction.DragRotate.prototype,"dispatchEvent",ol.interaction.DragRotate.prototype.dispatchEvent),goog.exportProperty(ol.interaction.DragRotate.prototype,"getRevision",ol.interaction.DragRotate.prototype.getRevision),goog.exportProperty(ol.interaction.DragRotate.prototype,"on",ol.interaction.DragRotate.prototype.on),goog.exportProperty(ol.interaction.DragRotate.prototype,"once",ol.interaction.DragRotate.prototype.once),goog.exportProperty(ol.interaction.DragRotate.prototype,"un",ol.interaction.DragRotate.prototype.un),goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"getActive",ol.interaction.DragRotateAndZoom.prototype.getActive),goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"getMap",ol.interaction.DragRotateAndZoom.prototype.getMap),goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"setActive",ol.interaction.DragRotateAndZoom.prototype.setActive),goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"get",ol.interaction.DragRotateAndZoom.prototype.get),goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"getKeys",ol.interaction.DragRotateAndZoom.prototype.getKeys),goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"getProperties",ol.interaction.DragRotateAndZoom.prototype.getProperties),goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"set",ol.interaction.DragRotateAndZoom.prototype.set),goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"setProperties",ol.interaction.DragRotateAndZoom.prototype.setProperties),goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"unset",ol.interaction.DragRotateAndZoom.prototype.unset),goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"changed",ol.interaction.DragRotateAndZoom.prototype.changed),goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"dispatchEvent",ol.interaction.DragRotateAndZoom.prototype.dispatchEvent),goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"getRevision",ol.interaction.DragRotateAndZoom.prototype.getRevision),goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"on",ol.interaction.DragRotateAndZoom.prototype.on),goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"once",ol.interaction.DragRotateAndZoom.prototype.once),goog.exportProperty(ol.interaction.DragRotateAndZoom.prototype,"un",ol.interaction.DragRotateAndZoom.prototype.un),goog.exportProperty(ol.interaction.DragZoom.prototype,"getGeometry",ol.interaction.DragZoom.prototype.getGeometry),goog.exportProperty(ol.interaction.DragZoom.prototype,"getActive",ol.interaction.DragZoom.prototype.getActive),goog.exportProperty(ol.interaction.DragZoom.prototype,"getMap",ol.interaction.DragZoom.prototype.getMap),goog.exportProperty(ol.interaction.DragZoom.prototype,"setActive",ol.interaction.DragZoom.prototype.setActive),goog.exportProperty(ol.interaction.DragZoom.prototype,"get",ol.interaction.DragZoom.prototype.get),goog.exportProperty(ol.interaction.DragZoom.prototype,"getKeys",ol.interaction.DragZoom.prototype.getKeys),goog.exportProperty(ol.interaction.DragZoom.prototype,"getProperties",ol.interaction.DragZoom.prototype.getProperties),goog.exportProperty(ol.interaction.DragZoom.prototype,"set",ol.interaction.DragZoom.prototype.set),goog.exportProperty(ol.interaction.DragZoom.prototype,"setProperties",ol.interaction.DragZoom.prototype.setProperties),goog.exportProperty(ol.interaction.DragZoom.prototype,"unset",ol.interaction.DragZoom.prototype.unset),goog.exportProperty(ol.interaction.DragZoom.prototype,"changed",ol.interaction.DragZoom.prototype.changed),goog.exportProperty(ol.interaction.DragZoom.prototype,"dispatchEvent",ol.interaction.DragZoom.prototype.dispatchEvent),goog.exportProperty(ol.interaction.DragZoom.prototype,"getRevision",ol.interaction.DragZoom.prototype.getRevision),goog.exportProperty(ol.interaction.DragZoom.prototype,"on",ol.interaction.DragZoom.prototype.on),goog.exportProperty(ol.interaction.DragZoom.prototype,"once",ol.interaction.DragZoom.prototype.once),goog.exportProperty(ol.interaction.DragZoom.prototype,"un",ol.interaction.DragZoom.prototype.un),goog.exportProperty(ol.interaction.Draw.prototype,"getActive",ol.interaction.Draw.prototype.getActive),goog.exportProperty(ol.interaction.Draw.prototype,"getMap",ol.interaction.Draw.prototype.getMap),goog.exportProperty(ol.interaction.Draw.prototype,"setActive",ol.interaction.Draw.prototype.setActive),goog.exportProperty(ol.interaction.Draw.prototype,"get",ol.interaction.Draw.prototype.get),goog.exportProperty(ol.interaction.Draw.prototype,"getKeys",ol.interaction.Draw.prototype.getKeys),goog.exportProperty(ol.interaction.Draw.prototype,"getProperties",ol.interaction.Draw.prototype.getProperties),goog.exportProperty(ol.interaction.Draw.prototype,"set",ol.interaction.Draw.prototype.set),goog.exportProperty(ol.interaction.Draw.prototype,"setProperties",ol.interaction.Draw.prototype.setProperties),goog.exportProperty(ol.interaction.Draw.prototype,"unset",ol.interaction.Draw.prototype.unset),goog.exportProperty(ol.interaction.Draw.prototype,"changed",ol.interaction.Draw.prototype.changed),goog.exportProperty(ol.interaction.Draw.prototype,"dispatchEvent",ol.interaction.Draw.prototype.dispatchEvent),goog.exportProperty(ol.interaction.Draw.prototype,"getRevision",ol.interaction.Draw.prototype.getRevision),goog.exportProperty(ol.interaction.Draw.prototype,"on",ol.interaction.Draw.prototype.on),goog.exportProperty(ol.interaction.Draw.prototype,"once",ol.interaction.Draw.prototype.once),goog.exportProperty(ol.interaction.Draw.prototype,"un",ol.interaction.Draw.prototype.un),goog.exportProperty(ol.interaction.Draw.Event.prototype,"type",ol.interaction.Draw.Event.prototype.type),goog.exportProperty(ol.interaction.Draw.Event.prototype,"target",ol.interaction.Draw.Event.prototype.target),goog.exportProperty(ol.interaction.Draw.Event.prototype,"preventDefault",ol.interaction.Draw.Event.prototype.preventDefault),goog.exportProperty(ol.interaction.Draw.Event.prototype,"stopPropagation",ol.interaction.Draw.Event.prototype.stopPropagation),goog.exportProperty(ol.interaction.Extent.prototype,"getActive",ol.interaction.Extent.prototype.getActive),goog.exportProperty(ol.interaction.Extent.prototype,"getMap",ol.interaction.Extent.prototype.getMap),goog.exportProperty(ol.interaction.Extent.prototype,"setActive",ol.interaction.Extent.prototype.setActive),goog.exportProperty(ol.interaction.Extent.prototype,"get",ol.interaction.Extent.prototype.get),goog.exportProperty(ol.interaction.Extent.prototype,"getKeys",ol.interaction.Extent.prototype.getKeys),goog.exportProperty(ol.interaction.Extent.prototype,"getProperties",ol.interaction.Extent.prototype.getProperties),goog.exportProperty(ol.interaction.Extent.prototype,"set",ol.interaction.Extent.prototype.set),goog.exportProperty(ol.interaction.Extent.prototype,"setProperties",ol.interaction.Extent.prototype.setProperties),goog.exportProperty(ol.interaction.Extent.prototype,"unset",ol.interaction.Extent.prototype.unset),goog.exportProperty(ol.interaction.Extent.prototype,"changed",ol.interaction.Extent.prototype.changed),goog.exportProperty(ol.interaction.Extent.prototype,"dispatchEvent",ol.interaction.Extent.prototype.dispatchEvent),goog.exportProperty(ol.interaction.Extent.prototype,"getRevision",ol.interaction.Extent.prototype.getRevision),goog.exportProperty(ol.interaction.Extent.prototype,"on",ol.interaction.Extent.prototype.on),goog.exportProperty(ol.interaction.Extent.prototype,"once",ol.interaction.Extent.prototype.once),goog.exportProperty(ol.interaction.Extent.prototype,"un",ol.interaction.Extent.prototype.un),goog.exportProperty(ol.interaction.Extent.Event.prototype,"type",ol.interaction.Extent.Event.prototype.type),goog.exportProperty(ol.interaction.Extent.Event.prototype,"target",ol.interaction.Extent.Event.prototype.target),goog.exportProperty(ol.interaction.Extent.Event.prototype,"preventDefault",ol.interaction.Extent.Event.prototype.preventDefault),goog.exportProperty(ol.interaction.Extent.Event.prototype,"stopPropagation",ol.interaction.Extent.Event.prototype.stopPropagation),goog.exportProperty(ol.interaction.KeyboardPan.prototype,"getActive",ol.interaction.KeyboardPan.prototype.getActive),
goog.exportProperty(ol.interaction.KeyboardPan.prototype,"getMap",ol.interaction.KeyboardPan.prototype.getMap),goog.exportProperty(ol.interaction.KeyboardPan.prototype,"setActive",ol.interaction.KeyboardPan.prototype.setActive),goog.exportProperty(ol.interaction.KeyboardPan.prototype,"get",ol.interaction.KeyboardPan.prototype.get),goog.exportProperty(ol.interaction.KeyboardPan.prototype,"getKeys",ol.interaction.KeyboardPan.prototype.getKeys),goog.exportProperty(ol.interaction.KeyboardPan.prototype,"getProperties",ol.interaction.KeyboardPan.prototype.getProperties),goog.exportProperty(ol.interaction.KeyboardPan.prototype,"set",ol.interaction.KeyboardPan.prototype.set),goog.exportProperty(ol.interaction.KeyboardPan.prototype,"setProperties",ol.interaction.KeyboardPan.prototype.setProperties),goog.exportProperty(ol.interaction.KeyboardPan.prototype,"unset",ol.interaction.KeyboardPan.prototype.unset),goog.exportProperty(ol.interaction.KeyboardPan.prototype,"changed",ol.interaction.KeyboardPan.prototype.changed),goog.exportProperty(ol.interaction.KeyboardPan.prototype,"dispatchEvent",ol.interaction.KeyboardPan.prototype.dispatchEvent),goog.exportProperty(ol.interaction.KeyboardPan.prototype,"getRevision",ol.interaction.KeyboardPan.prototype.getRevision),goog.exportProperty(ol.interaction.KeyboardPan.prototype,"on",ol.interaction.KeyboardPan.prototype.on),goog.exportProperty(ol.interaction.KeyboardPan.prototype,"once",ol.interaction.KeyboardPan.prototype.once),goog.exportProperty(ol.interaction.KeyboardPan.prototype,"un",ol.interaction.KeyboardPan.prototype.un),goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"getActive",ol.interaction.KeyboardZoom.prototype.getActive),goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"getMap",ol.interaction.KeyboardZoom.prototype.getMap),goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"setActive",ol.interaction.KeyboardZoom.prototype.setActive),goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"get",ol.interaction.KeyboardZoom.prototype.get),goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"getKeys",ol.interaction.KeyboardZoom.prototype.getKeys),goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"getProperties",ol.interaction.KeyboardZoom.prototype.getProperties),goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"set",ol.interaction.KeyboardZoom.prototype.set),goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"setProperties",ol.interaction.KeyboardZoom.prototype.setProperties),goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"unset",ol.interaction.KeyboardZoom.prototype.unset),goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"changed",ol.interaction.KeyboardZoom.prototype.changed),goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"dispatchEvent",ol.interaction.KeyboardZoom.prototype.dispatchEvent),goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"getRevision",ol.interaction.KeyboardZoom.prototype.getRevision),goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"on",ol.interaction.KeyboardZoom.prototype.on),goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"once",ol.interaction.KeyboardZoom.prototype.once),goog.exportProperty(ol.interaction.KeyboardZoom.prototype,"un",ol.interaction.KeyboardZoom.prototype.un),goog.exportProperty(ol.interaction.Modify.prototype,"getActive",ol.interaction.Modify.prototype.getActive),goog.exportProperty(ol.interaction.Modify.prototype,"getMap",ol.interaction.Modify.prototype.getMap),goog.exportProperty(ol.interaction.Modify.prototype,"setActive",ol.interaction.Modify.prototype.setActive),goog.exportProperty(ol.interaction.Modify.prototype,"get",ol.interaction.Modify.prototype.get),goog.exportProperty(ol.interaction.Modify.prototype,"getKeys",ol.interaction.Modify.prototype.getKeys),goog.exportProperty(ol.interaction.Modify.prototype,"getProperties",ol.interaction.Modify.prototype.getProperties),goog.exportProperty(ol.interaction.Modify.prototype,"set",ol.interaction.Modify.prototype.set),goog.exportProperty(ol.interaction.Modify.prototype,"setProperties",ol.interaction.Modify.prototype.setProperties),goog.exportProperty(ol.interaction.Modify.prototype,"unset",ol.interaction.Modify.prototype.unset),goog.exportProperty(ol.interaction.Modify.prototype,"changed",ol.interaction.Modify.prototype.changed),goog.exportProperty(ol.interaction.Modify.prototype,"dispatchEvent",ol.interaction.Modify.prototype.dispatchEvent),goog.exportProperty(ol.interaction.Modify.prototype,"getRevision",ol.interaction.Modify.prototype.getRevision),goog.exportProperty(ol.interaction.Modify.prototype,"on",ol.interaction.Modify.prototype.on),goog.exportProperty(ol.interaction.Modify.prototype,"once",ol.interaction.Modify.prototype.once),goog.exportProperty(ol.interaction.Modify.prototype,"un",ol.interaction.Modify.prototype.un),goog.exportProperty(ol.interaction.Modify.Event.prototype,"type",ol.interaction.Modify.Event.prototype.type),goog.exportProperty(ol.interaction.Modify.Event.prototype,"target",ol.interaction.Modify.Event.prototype.target),goog.exportProperty(ol.interaction.Modify.Event.prototype,"preventDefault",ol.interaction.Modify.Event.prototype.preventDefault),goog.exportProperty(ol.interaction.Modify.Event.prototype,"stopPropagation",ol.interaction.Modify.Event.prototype.stopPropagation),goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"getActive",ol.interaction.MouseWheelZoom.prototype.getActive),goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"getMap",ol.interaction.MouseWheelZoom.prototype.getMap),goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"setActive",ol.interaction.MouseWheelZoom.prototype.setActive),goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"get",ol.interaction.MouseWheelZoom.prototype.get),goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"getKeys",ol.interaction.MouseWheelZoom.prototype.getKeys),goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"getProperties",ol.interaction.MouseWheelZoom.prototype.getProperties),goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"set",ol.interaction.MouseWheelZoom.prototype.set),goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"setProperties",ol.interaction.MouseWheelZoom.prototype.setProperties),goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"unset",ol.interaction.MouseWheelZoom.prototype.unset),goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"changed",ol.interaction.MouseWheelZoom.prototype.changed),goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"dispatchEvent",ol.interaction.MouseWheelZoom.prototype.dispatchEvent),goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"getRevision",ol.interaction.MouseWheelZoom.prototype.getRevision),goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"on",ol.interaction.MouseWheelZoom.prototype.on),goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"once",ol.interaction.MouseWheelZoom.prototype.once),goog.exportProperty(ol.interaction.MouseWheelZoom.prototype,"un",ol.interaction.MouseWheelZoom.prototype.un),goog.exportProperty(ol.interaction.PinchRotate.prototype,"getActive",ol.interaction.PinchRotate.prototype.getActive),goog.exportProperty(ol.interaction.PinchRotate.prototype,"getMap",ol.interaction.PinchRotate.prototype.getMap),goog.exportProperty(ol.interaction.PinchRotate.prototype,"setActive",ol.interaction.PinchRotate.prototype.setActive),goog.exportProperty(ol.interaction.PinchRotate.prototype,"get",ol.interaction.PinchRotate.prototype.get),goog.exportProperty(ol.interaction.PinchRotate.prototype,"getKeys",ol.interaction.PinchRotate.prototype.getKeys),goog.exportProperty(ol.interaction.PinchRotate.prototype,"getProperties",ol.interaction.PinchRotate.prototype.getProperties),goog.exportProperty(ol.interaction.PinchRotate.prototype,"set",ol.interaction.PinchRotate.prototype.set),goog.exportProperty(ol.interaction.PinchRotate.prototype,"setProperties",ol.interaction.PinchRotate.prototype.setProperties),goog.exportProperty(ol.interaction.PinchRotate.prototype,"unset",ol.interaction.PinchRotate.prototype.unset),goog.exportProperty(ol.interaction.PinchRotate.prototype,"changed",ol.interaction.PinchRotate.prototype.changed),goog.exportProperty(ol.interaction.PinchRotate.prototype,"dispatchEvent",ol.interaction.PinchRotate.prototype.dispatchEvent),goog.exportProperty(ol.interaction.PinchRotate.prototype,"getRevision",ol.interaction.PinchRotate.prototype.getRevision),goog.exportProperty(ol.interaction.PinchRotate.prototype,"on",ol.interaction.PinchRotate.prototype.on),goog.exportProperty(ol.interaction.PinchRotate.prototype,"once",ol.interaction.PinchRotate.prototype.once),goog.exportProperty(ol.interaction.PinchRotate.prototype,"un",ol.interaction.PinchRotate.prototype.un),goog.exportProperty(ol.interaction.PinchZoom.prototype,"getActive",ol.interaction.PinchZoom.prototype.getActive),goog.exportProperty(ol.interaction.PinchZoom.prototype,"getMap",ol.interaction.PinchZoom.prototype.getMap),goog.exportProperty(ol.interaction.PinchZoom.prototype,"setActive",ol.interaction.PinchZoom.prototype.setActive),goog.exportProperty(ol.interaction.PinchZoom.prototype,"get",ol.interaction.PinchZoom.prototype.get),goog.exportProperty(ol.interaction.PinchZoom.prototype,"getKeys",ol.interaction.PinchZoom.prototype.getKeys),goog.exportProperty(ol.interaction.PinchZoom.prototype,"getProperties",ol.interaction.PinchZoom.prototype.getProperties),goog.exportProperty(ol.interaction.PinchZoom.prototype,"set",ol.interaction.PinchZoom.prototype.set),goog.exportProperty(ol.interaction.PinchZoom.prototype,"setProperties",ol.interaction.PinchZoom.prototype.setProperties),goog.exportProperty(ol.interaction.PinchZoom.prototype,"unset",ol.interaction.PinchZoom.prototype.unset),goog.exportProperty(ol.interaction.PinchZoom.prototype,"changed",ol.interaction.PinchZoom.prototype.changed),goog.exportProperty(ol.interaction.PinchZoom.prototype,"dispatchEvent",ol.interaction.PinchZoom.prototype.dispatchEvent),goog.exportProperty(ol.interaction.PinchZoom.prototype,"getRevision",ol.interaction.PinchZoom.prototype.getRevision),goog.exportProperty(ol.interaction.PinchZoom.prototype,"on",ol.interaction.PinchZoom.prototype.on),goog.exportProperty(ol.interaction.PinchZoom.prototype,"once",ol.interaction.PinchZoom.prototype.once),goog.exportProperty(ol.interaction.PinchZoom.prototype,"un",ol.interaction.PinchZoom.prototype.un),goog.exportProperty(ol.interaction.Select.prototype,"getActive",ol.interaction.Select.prototype.getActive),goog.exportProperty(ol.interaction.Select.prototype,"getMap",ol.interaction.Select.prototype.getMap),goog.exportProperty(ol.interaction.Select.prototype,"setActive",ol.interaction.Select.prototype.setActive),goog.exportProperty(ol.interaction.Select.prototype,"get",ol.interaction.Select.prototype.get),goog.exportProperty(ol.interaction.Select.prototype,"getKeys",ol.interaction.Select.prototype.getKeys),goog.exportProperty(ol.interaction.Select.prototype,"getProperties",ol.interaction.Select.prototype.getProperties),goog.exportProperty(ol.interaction.Select.prototype,"set",ol.interaction.Select.prototype.set),goog.exportProperty(ol.interaction.Select.prototype,"setProperties",ol.interaction.Select.prototype.setProperties),goog.exportProperty(ol.interaction.Select.prototype,"unset",ol.interaction.Select.prototype.unset),goog.exportProperty(ol.interaction.Select.prototype,"changed",ol.interaction.Select.prototype.changed),goog.exportProperty(ol.interaction.Select.prototype,"dispatchEvent",ol.interaction.Select.prototype.dispatchEvent),goog.exportProperty(ol.interaction.Select.prototype,"getRevision",ol.interaction.Select.prototype.getRevision),goog.exportProperty(ol.interaction.Select.prototype,"on",ol.interaction.Select.prototype.on),goog.exportProperty(ol.interaction.Select.prototype,"once",ol.interaction.Select.prototype.once),goog.exportProperty(ol.interaction.Select.prototype,"un",ol.interaction.Select.prototype.un),goog.exportProperty(ol.interaction.Select.Event.prototype,"type",ol.interaction.Select.Event.prototype.type),goog.exportProperty(ol.interaction.Select.Event.prototype,"target",ol.interaction.Select.Event.prototype.target),goog.exportProperty(ol.interaction.Select.Event.prototype,"preventDefault",ol.interaction.Select.Event.prototype.preventDefault),goog.exportProperty(ol.interaction.Select.Event.prototype,"stopPropagation",ol.interaction.Select.Event.prototype.stopPropagation),goog.exportProperty(ol.interaction.Snap.prototype,"getActive",ol.interaction.Snap.prototype.getActive),goog.exportProperty(ol.interaction.Snap.prototype,"getMap",ol.interaction.Snap.prototype.getMap),goog.exportProperty(ol.interaction.Snap.prototype,"setActive",ol.interaction.Snap.prototype.setActive),goog.exportProperty(ol.interaction.Snap.prototype,"get",ol.interaction.Snap.prototype.get),goog.exportProperty(ol.interaction.Snap.prototype,"getKeys",ol.interaction.Snap.prototype.getKeys),goog.exportProperty(ol.interaction.Snap.prototype,"getProperties",ol.interaction.Snap.prototype.getProperties),goog.exportProperty(ol.interaction.Snap.prototype,"set",ol.interaction.Snap.prototype.set),goog.exportProperty(ol.interaction.Snap.prototype,"setProperties",ol.interaction.Snap.prototype.setProperties),goog.exportProperty(ol.interaction.Snap.prototype,"unset",ol.interaction.Snap.prototype.unset),goog.exportProperty(ol.interaction.Snap.prototype,"changed",ol.interaction.Snap.prototype.changed),goog.exportProperty(ol.interaction.Snap.prototype,"dispatchEvent",ol.interaction.Snap.prototype.dispatchEvent),goog.exportProperty(ol.interaction.Snap.prototype,"getRevision",ol.interaction.Snap.prototype.getRevision),goog.exportProperty(ol.interaction.Snap.prototype,"on",ol.interaction.Snap.prototype.on),goog.exportProperty(ol.interaction.Snap.prototype,"once",ol.interaction.Snap.prototype.once),goog.exportProperty(ol.interaction.Snap.prototype,"un",ol.interaction.Snap.prototype.un),goog.exportProperty(ol.interaction.Translate.prototype,"getActive",ol.interaction.Translate.prototype.getActive),goog.exportProperty(ol.interaction.Translate.prototype,"getMap",ol.interaction.Translate.prototype.getMap),goog.exportProperty(ol.interaction.Translate.prototype,"setActive",ol.interaction.Translate.prototype.setActive),goog.exportProperty(ol.interaction.Translate.prototype,"get",ol.interaction.Translate.prototype.get),goog.exportProperty(ol.interaction.Translate.prototype,"getKeys",ol.interaction.Translate.prototype.getKeys),goog.exportProperty(ol.interaction.Translate.prototype,"getProperties",ol.interaction.Translate.prototype.getProperties),goog.exportProperty(ol.interaction.Translate.prototype,"set",ol.interaction.Translate.prototype.set),goog.exportProperty(ol.interaction.Translate.prototype,"setProperties",ol.interaction.Translate.prototype.setProperties),goog.exportProperty(ol.interaction.Translate.prototype,"unset",ol.interaction.Translate.prototype.unset),goog.exportProperty(ol.interaction.Translate.prototype,"changed",ol.interaction.Translate.prototype.changed),goog.exportProperty(ol.interaction.Translate.prototype,"dispatchEvent",ol.interaction.Translate.prototype.dispatchEvent),goog.exportProperty(ol.interaction.Translate.prototype,"getRevision",ol.interaction.Translate.prototype.getRevision),goog.exportProperty(ol.interaction.Translate.prototype,"on",ol.interaction.Translate.prototype.on),goog.exportProperty(ol.interaction.Translate.prototype,"once",ol.interaction.Translate.prototype.once),goog.exportProperty(ol.interaction.Translate.prototype,"un",ol.interaction.Translate.prototype.un),goog.exportProperty(ol.interaction.Translate.Event.prototype,"type",ol.interaction.Translate.Event.prototype.type),goog.exportProperty(ol.interaction.Translate.Event.prototype,"target",ol.interaction.Translate.Event.prototype.target),goog.exportProperty(ol.interaction.Translate.Event.prototype,"preventDefault",ol.interaction.Translate.Event.prototype.preventDefault),goog.exportProperty(ol.interaction.Translate.Event.prototype,"stopPropagation",ol.interaction.Translate.Event.prototype.stopPropagation),goog.exportProperty(ol.geom.Geometry.prototype,"get",ol.geom.Geometry.prototype.get),goog.exportProperty(ol.geom.Geometry.prototype,"getKeys",ol.geom.Geometry.prototype.getKeys),goog.exportProperty(ol.geom.Geometry.prototype,"getProperties",ol.geom.Geometry.prototype.getProperties),goog.exportProperty(ol.geom.Geometry.prototype,"set",ol.geom.Geometry.prototype.set),goog.exportProperty(ol.geom.Geometry.prototype,"setProperties",ol.geom.Geometry.prototype.setProperties),goog.exportProperty(ol.geom.Geometry.prototype,"unset",ol.geom.Geometry.prototype.unset),goog.exportProperty(ol.geom.Geometry.prototype,"changed",ol.geom.Geometry.prototype.changed),goog.exportProperty(ol.geom.Geometry.prototype,"dispatchEvent",ol.geom.Geometry.prototype.dispatchEvent),goog.exportProperty(ol.geom.Geometry.prototype,"getRevision",ol.geom.Geometry.prototype.getRevision),goog.exportProperty(ol.geom.Geometry.prototype,"on",ol.geom.Geometry.prototype.on),goog.exportProperty(ol.geom.Geometry.prototype,"once",ol.geom.Geometry.prototype.once),goog.exportProperty(ol.geom.Geometry.prototype,"un",ol.geom.Geometry.prototype.un),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getClosestPoint",ol.geom.SimpleGeometry.prototype.getClosestPoint),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"intersectsCoordinate",ol.geom.SimpleGeometry.prototype.intersectsCoordinate),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getExtent",ol.geom.SimpleGeometry.prototype.getExtent),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"rotate",ol.geom.SimpleGeometry.prototype.rotate),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"scale",ol.geom.SimpleGeometry.prototype.scale),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"simplify",ol.geom.SimpleGeometry.prototype.simplify),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"transform",ol.geom.SimpleGeometry.prototype.transform),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"get",ol.geom.SimpleGeometry.prototype.get),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getKeys",ol.geom.SimpleGeometry.prototype.getKeys),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getProperties",ol.geom.SimpleGeometry.prototype.getProperties),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"set",ol.geom.SimpleGeometry.prototype.set),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"setProperties",ol.geom.SimpleGeometry.prototype.setProperties),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"unset",ol.geom.SimpleGeometry.prototype.unset),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"changed",ol.geom.SimpleGeometry.prototype.changed),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"dispatchEvent",ol.geom.SimpleGeometry.prototype.dispatchEvent),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"getRevision",ol.geom.SimpleGeometry.prototype.getRevision),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"on",ol.geom.SimpleGeometry.prototype.on),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"once",ol.geom.SimpleGeometry.prototype.once),goog.exportProperty(ol.geom.SimpleGeometry.prototype,"un",ol.geom.SimpleGeometry.prototype.un),goog.exportProperty(ol.geom.Circle.prototype,"getFirstCoordinate",ol.geom.Circle.prototype.getFirstCoordinate),goog.exportProperty(ol.geom.Circle.prototype,"getLastCoordinate",ol.geom.Circle.prototype.getLastCoordinate),goog.exportProperty(ol.geom.Circle.prototype,"getLayout",ol.geom.Circle.prototype.getLayout),goog.exportProperty(ol.geom.Circle.prototype,"rotate",ol.geom.Circle.prototype.rotate),goog.exportProperty(ol.geom.Circle.prototype,"scale",ol.geom.Circle.prototype.scale),goog.exportProperty(ol.geom.Circle.prototype,"getClosestPoint",ol.geom.Circle.prototype.getClosestPoint),goog.exportProperty(ol.geom.Circle.prototype,"intersectsCoordinate",ol.geom.Circle.prototype.intersectsCoordinate),goog.exportProperty(ol.geom.Circle.prototype,"getExtent",ol.geom.Circle.prototype.getExtent),goog.exportProperty(ol.geom.Circle.prototype,"simplify",ol.geom.Circle.prototype.simplify),goog.exportProperty(ol.geom.Circle.prototype,"get",ol.geom.Circle.prototype.get),goog.exportProperty(ol.geom.Circle.prototype,"getKeys",ol.geom.Circle.prototype.getKeys),goog.exportProperty(ol.geom.Circle.prototype,"getProperties",ol.geom.Circle.prototype.getProperties),goog.exportProperty(ol.geom.Circle.prototype,"set",ol.geom.Circle.prototype.set),goog.exportProperty(ol.geom.Circle.prototype,"setProperties",ol.geom.Circle.prototype.setProperties),goog.exportProperty(ol.geom.Circle.prototype,"unset",ol.geom.Circle.prototype.unset),goog.exportProperty(ol.geom.Circle.prototype,"changed",ol.geom.Circle.prototype.changed),goog.exportProperty(ol.geom.Circle.prototype,"dispatchEvent",ol.geom.Circle.prototype.dispatchEvent),goog.exportProperty(ol.geom.Circle.prototype,"getRevision",ol.geom.Circle.prototype.getRevision),goog.exportProperty(ol.geom.Circle.prototype,"on",ol.geom.Circle.prototype.on),goog.exportProperty(ol.geom.Circle.prototype,"once",ol.geom.Circle.prototype.once),goog.exportProperty(ol.geom.Circle.prototype,"un",ol.geom.Circle.prototype.un),goog.exportProperty(ol.geom.GeometryCollection.prototype,"getClosestPoint",ol.geom.GeometryCollection.prototype.getClosestPoint),goog.exportProperty(ol.geom.GeometryCollection.prototype,"intersectsCoordinate",ol.geom.GeometryCollection.prototype.intersectsCoordinate),goog.exportProperty(ol.geom.GeometryCollection.prototype,"getExtent",ol.geom.GeometryCollection.prototype.getExtent),goog.exportProperty(ol.geom.GeometryCollection.prototype,"rotate",ol.geom.GeometryCollection.prototype.rotate),goog.exportProperty(ol.geom.GeometryCollection.prototype,"scale",ol.geom.GeometryCollection.prototype.scale),goog.exportProperty(ol.geom.GeometryCollection.prototype,"simplify",ol.geom.GeometryCollection.prototype.simplify),goog.exportProperty(ol.geom.GeometryCollection.prototype,"transform",ol.geom.GeometryCollection.prototype.transform),goog.exportProperty(ol.geom.GeometryCollection.prototype,"get",ol.geom.GeometryCollection.prototype.get),goog.exportProperty(ol.geom.GeometryCollection.prototype,"getKeys",ol.geom.GeometryCollection.prototype.getKeys),goog.exportProperty(ol.geom.GeometryCollection.prototype,"getProperties",ol.geom.GeometryCollection.prototype.getProperties),goog.exportProperty(ol.geom.GeometryCollection.prototype,"set",ol.geom.GeometryCollection.prototype.set),goog.exportProperty(ol.geom.GeometryCollection.prototype,"setProperties",ol.geom.GeometryCollection.prototype.setProperties),goog.exportProperty(ol.geom.GeometryCollection.prototype,"unset",ol.geom.GeometryCollection.prototype.unset),goog.exportProperty(ol.geom.GeometryCollection.prototype,"changed",ol.geom.GeometryCollection.prototype.changed),goog.exportProperty(ol.geom.GeometryCollection.prototype,"dispatchEvent",ol.geom.GeometryCollection.prototype.dispatchEvent),goog.exportProperty(ol.geom.GeometryCollection.prototype,"getRevision",ol.geom.GeometryCollection.prototype.getRevision),goog.exportProperty(ol.geom.GeometryCollection.prototype,"on",ol.geom.GeometryCollection.prototype.on),goog.exportProperty(ol.geom.GeometryCollection.prototype,"once",ol.geom.GeometryCollection.prototype.once),goog.exportProperty(ol.geom.GeometryCollection.prototype,"un",ol.geom.GeometryCollection.prototype.un),goog.exportProperty(ol.geom.LinearRing.prototype,"getFirstCoordinate",ol.geom.LinearRing.prototype.getFirstCoordinate),goog.exportProperty(ol.geom.LinearRing.prototype,"getLastCoordinate",ol.geom.LinearRing.prototype.getLastCoordinate),goog.exportProperty(ol.geom.LinearRing.prototype,"getLayout",ol.geom.LinearRing.prototype.getLayout),goog.exportProperty(ol.geom.LinearRing.prototype,"rotate",ol.geom.LinearRing.prototype.rotate),goog.exportProperty(ol.geom.LinearRing.prototype,"scale",ol.geom.LinearRing.prototype.scale),goog.exportProperty(ol.geom.LinearRing.prototype,"getClosestPoint",ol.geom.LinearRing.prototype.getClosestPoint),goog.exportProperty(ol.geom.LinearRing.prototype,"intersectsCoordinate",ol.geom.LinearRing.prototype.intersectsCoordinate),goog.exportProperty(ol.geom.LinearRing.prototype,"getExtent",ol.geom.LinearRing.prototype.getExtent),goog.exportProperty(ol.geom.LinearRing.prototype,"simplify",ol.geom.LinearRing.prototype.simplify),goog.exportProperty(ol.geom.LinearRing.prototype,"transform",ol.geom.LinearRing.prototype.transform),goog.exportProperty(ol.geom.LinearRing.prototype,"get",ol.geom.LinearRing.prototype.get),goog.exportProperty(ol.geom.LinearRing.prototype,"getKeys",ol.geom.LinearRing.prototype.getKeys),goog.exportProperty(ol.geom.LinearRing.prototype,"getProperties",ol.geom.LinearRing.prototype.getProperties),goog.exportProperty(ol.geom.LinearRing.prototype,"set",ol.geom.LinearRing.prototype.set),goog.exportProperty(ol.geom.LinearRing.prototype,"setProperties",ol.geom.LinearRing.prototype.setProperties),goog.exportProperty(ol.geom.LinearRing.prototype,"unset",ol.geom.LinearRing.prototype.unset),goog.exportProperty(ol.geom.LinearRing.prototype,"changed",ol.geom.LinearRing.prototype.changed),goog.exportProperty(ol.geom.LinearRing.prototype,"dispatchEvent",ol.geom.LinearRing.prototype.dispatchEvent),goog.exportProperty(ol.geom.LinearRing.prototype,"getRevision",ol.geom.LinearRing.prototype.getRevision),goog.exportProperty(ol.geom.LinearRing.prototype,"on",ol.geom.LinearRing.prototype.on),goog.exportProperty(ol.geom.LinearRing.prototype,"once",ol.geom.LinearRing.prototype.once),goog.exportProperty(ol.geom.LinearRing.prototype,"un",ol.geom.LinearRing.prototype.un),goog.exportProperty(ol.geom.LineString.prototype,"getFirstCoordinate",ol.geom.LineString.prototype.getFirstCoordinate),goog.exportProperty(ol.geom.LineString.prototype,"getLastCoordinate",ol.geom.LineString.prototype.getLastCoordinate),goog.exportProperty(ol.geom.LineString.prototype,"getLayout",ol.geom.LineString.prototype.getLayout),goog.exportProperty(ol.geom.LineString.prototype,"rotate",ol.geom.LineString.prototype.rotate),goog.exportProperty(ol.geom.LineString.prototype,"scale",ol.geom.LineString.prototype.scale),goog.exportProperty(ol.geom.LineString.prototype,"getClosestPoint",ol.geom.LineString.prototype.getClosestPoint),goog.exportProperty(ol.geom.LineString.prototype,"intersectsCoordinate",ol.geom.LineString.prototype.intersectsCoordinate),goog.exportProperty(ol.geom.LineString.prototype,"getExtent",ol.geom.LineString.prototype.getExtent),goog.exportProperty(ol.geom.LineString.prototype,"simplify",ol.geom.LineString.prototype.simplify),goog.exportProperty(ol.geom.LineString.prototype,"transform",ol.geom.LineString.prototype.transform),goog.exportProperty(ol.geom.LineString.prototype,"get",ol.geom.LineString.prototype.get),goog.exportProperty(ol.geom.LineString.prototype,"getKeys",ol.geom.LineString.prototype.getKeys),goog.exportProperty(ol.geom.LineString.prototype,"getProperties",ol.geom.LineString.prototype.getProperties),goog.exportProperty(ol.geom.LineString.prototype,"set",ol.geom.LineString.prototype.set),goog.exportProperty(ol.geom.LineString.prototype,"setProperties",ol.geom.LineString.prototype.setProperties),goog.exportProperty(ol.geom.LineString.prototype,"unset",ol.geom.LineString.prototype.unset),goog.exportProperty(ol.geom.LineString.prototype,"changed",ol.geom.LineString.prototype.changed),goog.exportProperty(ol.geom.LineString.prototype,"dispatchEvent",ol.geom.LineString.prototype.dispatchEvent),goog.exportProperty(ol.geom.LineString.prototype,"getRevision",ol.geom.LineString.prototype.getRevision),goog.exportProperty(ol.geom.LineString.prototype,"on",ol.geom.LineString.prototype.on),goog.exportProperty(ol.geom.LineString.prototype,"once",ol.geom.LineString.prototype.once),goog.exportProperty(ol.geom.LineString.prototype,"un",ol.geom.LineString.prototype.un),goog.exportProperty(ol.geom.MultiLineString.prototype,"getFirstCoordinate",ol.geom.MultiLineString.prototype.getFirstCoordinate),goog.exportProperty(ol.geom.MultiLineString.prototype,"getLastCoordinate",ol.geom.MultiLineString.prototype.getLastCoordinate),goog.exportProperty(ol.geom.MultiLineString.prototype,"getLayout",ol.geom.MultiLineString.prototype.getLayout),goog.exportProperty(ol.geom.MultiLineString.prototype,"rotate",ol.geom.MultiLineString.prototype.rotate),goog.exportProperty(ol.geom.MultiLineString.prototype,"scale",ol.geom.MultiLineString.prototype.scale),goog.exportProperty(ol.geom.MultiLineString.prototype,"getClosestPoint",ol.geom.MultiLineString.prototype.getClosestPoint),goog.exportProperty(ol.geom.MultiLineString.prototype,"intersectsCoordinate",ol.geom.MultiLineString.prototype.intersectsCoordinate),goog.exportProperty(ol.geom.MultiLineString.prototype,"getExtent",ol.geom.MultiLineString.prototype.getExtent),goog.exportProperty(ol.geom.MultiLineString.prototype,"simplify",ol.geom.MultiLineString.prototype.simplify),goog.exportProperty(ol.geom.MultiLineString.prototype,"transform",ol.geom.MultiLineString.prototype.transform),goog.exportProperty(ol.geom.MultiLineString.prototype,"get",ol.geom.MultiLineString.prototype.get),goog.exportProperty(ol.geom.MultiLineString.prototype,"getKeys",ol.geom.MultiLineString.prototype.getKeys),goog.exportProperty(ol.geom.MultiLineString.prototype,"getProperties",ol.geom.MultiLineString.prototype.getProperties),goog.exportProperty(ol.geom.MultiLineString.prototype,"set",ol.geom.MultiLineString.prototype.set),goog.exportProperty(ol.geom.MultiLineString.prototype,"setProperties",ol.geom.MultiLineString.prototype.setProperties),goog.exportProperty(ol.geom.MultiLineString.prototype,"unset",ol.geom.MultiLineString.prototype.unset),goog.exportProperty(ol.geom.MultiLineString.prototype,"changed",ol.geom.MultiLineString.prototype.changed),goog.exportProperty(ol.geom.MultiLineString.prototype,"dispatchEvent",ol.geom.MultiLineString.prototype.dispatchEvent),goog.exportProperty(ol.geom.MultiLineString.prototype,"getRevision",ol.geom.MultiLineString.prototype.getRevision),goog.exportProperty(ol.geom.MultiLineString.prototype,"on",ol.geom.MultiLineString.prototype.on),goog.exportProperty(ol.geom.MultiLineString.prototype,"once",ol.geom.MultiLineString.prototype.once),goog.exportProperty(ol.geom.MultiLineString.prototype,"un",ol.geom.MultiLineString.prototype.un),goog.exportProperty(ol.geom.MultiPoint.prototype,"getFirstCoordinate",ol.geom.MultiPoint.prototype.getFirstCoordinate),goog.exportProperty(ol.geom.MultiPoint.prototype,"getLastCoordinate",ol.geom.MultiPoint.prototype.getLastCoordinate),goog.exportProperty(ol.geom.MultiPoint.prototype,"getLayout",ol.geom.MultiPoint.prototype.getLayout),goog.exportProperty(ol.geom.MultiPoint.prototype,"rotate",ol.geom.MultiPoint.prototype.rotate),goog.exportProperty(ol.geom.MultiPoint.prototype,"scale",ol.geom.MultiPoint.prototype.scale),goog.exportProperty(ol.geom.MultiPoint.prototype,"getClosestPoint",ol.geom.MultiPoint.prototype.getClosestPoint),goog.exportProperty(ol.geom.MultiPoint.prototype,"intersectsCoordinate",ol.geom.MultiPoint.prototype.intersectsCoordinate),goog.exportProperty(ol.geom.MultiPoint.prototype,"getExtent",ol.geom.MultiPoint.prototype.getExtent),goog.exportProperty(ol.geom.MultiPoint.prototype,"simplify",ol.geom.MultiPoint.prototype.simplify),goog.exportProperty(ol.geom.MultiPoint.prototype,"transform",ol.geom.MultiPoint.prototype.transform),goog.exportProperty(ol.geom.MultiPoint.prototype,"get",ol.geom.MultiPoint.prototype.get),goog.exportProperty(ol.geom.MultiPoint.prototype,"getKeys",ol.geom.MultiPoint.prototype.getKeys),goog.exportProperty(ol.geom.MultiPoint.prototype,"getProperties",ol.geom.MultiPoint.prototype.getProperties),goog.exportProperty(ol.geom.MultiPoint.prototype,"set",ol.geom.MultiPoint.prototype.set),goog.exportProperty(ol.geom.MultiPoint.prototype,"setProperties",ol.geom.MultiPoint.prototype.setProperties),goog.exportProperty(ol.geom.MultiPoint.prototype,"unset",ol.geom.MultiPoint.prototype.unset),goog.exportProperty(ol.geom.MultiPoint.prototype,"changed",ol.geom.MultiPoint.prototype.changed),
goog.exportProperty(ol.geom.MultiPoint.prototype,"dispatchEvent",ol.geom.MultiPoint.prototype.dispatchEvent),goog.exportProperty(ol.geom.MultiPoint.prototype,"getRevision",ol.geom.MultiPoint.prototype.getRevision),goog.exportProperty(ol.geom.MultiPoint.prototype,"on",ol.geom.MultiPoint.prototype.on),goog.exportProperty(ol.geom.MultiPoint.prototype,"once",ol.geom.MultiPoint.prototype.once),goog.exportProperty(ol.geom.MultiPoint.prototype,"un",ol.geom.MultiPoint.prototype.un),goog.exportProperty(ol.geom.MultiPolygon.prototype,"getFirstCoordinate",ol.geom.MultiPolygon.prototype.getFirstCoordinate),goog.exportProperty(ol.geom.MultiPolygon.prototype,"getLastCoordinate",ol.geom.MultiPolygon.prototype.getLastCoordinate),goog.exportProperty(ol.geom.MultiPolygon.prototype,"getLayout",ol.geom.MultiPolygon.prototype.getLayout),goog.exportProperty(ol.geom.MultiPolygon.prototype,"rotate",ol.geom.MultiPolygon.prototype.rotate),goog.exportProperty(ol.geom.MultiPolygon.prototype,"scale",ol.geom.MultiPolygon.prototype.scale),goog.exportProperty(ol.geom.MultiPolygon.prototype,"getClosestPoint",ol.geom.MultiPolygon.prototype.getClosestPoint),goog.exportProperty(ol.geom.MultiPolygon.prototype,"intersectsCoordinate",ol.geom.MultiPolygon.prototype.intersectsCoordinate),goog.exportProperty(ol.geom.MultiPolygon.prototype,"getExtent",ol.geom.MultiPolygon.prototype.getExtent),goog.exportProperty(ol.geom.MultiPolygon.prototype,"simplify",ol.geom.MultiPolygon.prototype.simplify),goog.exportProperty(ol.geom.MultiPolygon.prototype,"transform",ol.geom.MultiPolygon.prototype.transform),goog.exportProperty(ol.geom.MultiPolygon.prototype,"get",ol.geom.MultiPolygon.prototype.get),goog.exportProperty(ol.geom.MultiPolygon.prototype,"getKeys",ol.geom.MultiPolygon.prototype.getKeys),goog.exportProperty(ol.geom.MultiPolygon.prototype,"getProperties",ol.geom.MultiPolygon.prototype.getProperties),goog.exportProperty(ol.geom.MultiPolygon.prototype,"set",ol.geom.MultiPolygon.prototype.set),goog.exportProperty(ol.geom.MultiPolygon.prototype,"setProperties",ol.geom.MultiPolygon.prototype.setProperties),goog.exportProperty(ol.geom.MultiPolygon.prototype,"unset",ol.geom.MultiPolygon.prototype.unset),goog.exportProperty(ol.geom.MultiPolygon.prototype,"changed",ol.geom.MultiPolygon.prototype.changed),goog.exportProperty(ol.geom.MultiPolygon.prototype,"dispatchEvent",ol.geom.MultiPolygon.prototype.dispatchEvent),goog.exportProperty(ol.geom.MultiPolygon.prototype,"getRevision",ol.geom.MultiPolygon.prototype.getRevision),goog.exportProperty(ol.geom.MultiPolygon.prototype,"on",ol.geom.MultiPolygon.prototype.on),goog.exportProperty(ol.geom.MultiPolygon.prototype,"once",ol.geom.MultiPolygon.prototype.once),goog.exportProperty(ol.geom.MultiPolygon.prototype,"un",ol.geom.MultiPolygon.prototype.un),goog.exportProperty(ol.geom.Point.prototype,"getFirstCoordinate",ol.geom.Point.prototype.getFirstCoordinate),goog.exportProperty(ol.geom.Point.prototype,"getLastCoordinate",ol.geom.Point.prototype.getLastCoordinate),goog.exportProperty(ol.geom.Point.prototype,"getLayout",ol.geom.Point.prototype.getLayout),goog.exportProperty(ol.geom.Point.prototype,"rotate",ol.geom.Point.prototype.rotate),goog.exportProperty(ol.geom.Point.prototype,"scale",ol.geom.Point.prototype.scale),goog.exportProperty(ol.geom.Point.prototype,"getClosestPoint",ol.geom.Point.prototype.getClosestPoint),goog.exportProperty(ol.geom.Point.prototype,"intersectsCoordinate",ol.geom.Point.prototype.intersectsCoordinate),goog.exportProperty(ol.geom.Point.prototype,"getExtent",ol.geom.Point.prototype.getExtent),goog.exportProperty(ol.geom.Point.prototype,"simplify",ol.geom.Point.prototype.simplify),goog.exportProperty(ol.geom.Point.prototype,"transform",ol.geom.Point.prototype.transform),goog.exportProperty(ol.geom.Point.prototype,"get",ol.geom.Point.prototype.get),goog.exportProperty(ol.geom.Point.prototype,"getKeys",ol.geom.Point.prototype.getKeys),goog.exportProperty(ol.geom.Point.prototype,"getProperties",ol.geom.Point.prototype.getProperties),goog.exportProperty(ol.geom.Point.prototype,"set",ol.geom.Point.prototype.set),goog.exportProperty(ol.geom.Point.prototype,"setProperties",ol.geom.Point.prototype.setProperties),goog.exportProperty(ol.geom.Point.prototype,"unset",ol.geom.Point.prototype.unset),goog.exportProperty(ol.geom.Point.prototype,"changed",ol.geom.Point.prototype.changed),goog.exportProperty(ol.geom.Point.prototype,"dispatchEvent",ol.geom.Point.prototype.dispatchEvent),goog.exportProperty(ol.geom.Point.prototype,"getRevision",ol.geom.Point.prototype.getRevision),goog.exportProperty(ol.geom.Point.prototype,"on",ol.geom.Point.prototype.on),goog.exportProperty(ol.geom.Point.prototype,"once",ol.geom.Point.prototype.once),goog.exportProperty(ol.geom.Point.prototype,"un",ol.geom.Point.prototype.un),goog.exportProperty(ol.geom.Polygon.prototype,"getFirstCoordinate",ol.geom.Polygon.prototype.getFirstCoordinate),goog.exportProperty(ol.geom.Polygon.prototype,"getLastCoordinate",ol.geom.Polygon.prototype.getLastCoordinate),goog.exportProperty(ol.geom.Polygon.prototype,"getLayout",ol.geom.Polygon.prototype.getLayout),goog.exportProperty(ol.geom.Polygon.prototype,"rotate",ol.geom.Polygon.prototype.rotate),goog.exportProperty(ol.geom.Polygon.prototype,"scale",ol.geom.Polygon.prototype.scale),goog.exportProperty(ol.geom.Polygon.prototype,"getClosestPoint",ol.geom.Polygon.prototype.getClosestPoint),goog.exportProperty(ol.geom.Polygon.prototype,"intersectsCoordinate",ol.geom.Polygon.prototype.intersectsCoordinate),goog.exportProperty(ol.geom.Polygon.prototype,"getExtent",ol.geom.Polygon.prototype.getExtent),goog.exportProperty(ol.geom.Polygon.prototype,"simplify",ol.geom.Polygon.prototype.simplify),goog.exportProperty(ol.geom.Polygon.prototype,"transform",ol.geom.Polygon.prototype.transform),goog.exportProperty(ol.geom.Polygon.prototype,"get",ol.geom.Polygon.prototype.get),goog.exportProperty(ol.geom.Polygon.prototype,"getKeys",ol.geom.Polygon.prototype.getKeys),goog.exportProperty(ol.geom.Polygon.prototype,"getProperties",ol.geom.Polygon.prototype.getProperties),goog.exportProperty(ol.geom.Polygon.prototype,"set",ol.geom.Polygon.prototype.set),goog.exportProperty(ol.geom.Polygon.prototype,"setProperties",ol.geom.Polygon.prototype.setProperties),goog.exportProperty(ol.geom.Polygon.prototype,"unset",ol.geom.Polygon.prototype.unset),goog.exportProperty(ol.geom.Polygon.prototype,"changed",ol.geom.Polygon.prototype.changed),goog.exportProperty(ol.geom.Polygon.prototype,"dispatchEvent",ol.geom.Polygon.prototype.dispatchEvent),goog.exportProperty(ol.geom.Polygon.prototype,"getRevision",ol.geom.Polygon.prototype.getRevision),goog.exportProperty(ol.geom.Polygon.prototype,"on",ol.geom.Polygon.prototype.on),goog.exportProperty(ol.geom.Polygon.prototype,"once",ol.geom.Polygon.prototype.once),goog.exportProperty(ol.geom.Polygon.prototype,"un",ol.geom.Polygon.prototype.un),goog.exportProperty(ol.format.GML.prototype,"readFeatures",ol.format.GML.prototype.readFeatures),goog.exportProperty(ol.format.GML2.prototype,"readFeatures",ol.format.GML2.prototype.readFeatures),goog.exportProperty(ol.format.GML3.prototype,"readFeatures",ol.format.GML3.prototype.readFeatures),goog.exportProperty(ol.control.Control.prototype,"get",ol.control.Control.prototype.get),goog.exportProperty(ol.control.Control.prototype,"getKeys",ol.control.Control.prototype.getKeys),goog.exportProperty(ol.control.Control.prototype,"getProperties",ol.control.Control.prototype.getProperties),goog.exportProperty(ol.control.Control.prototype,"set",ol.control.Control.prototype.set),goog.exportProperty(ol.control.Control.prototype,"setProperties",ol.control.Control.prototype.setProperties),goog.exportProperty(ol.control.Control.prototype,"unset",ol.control.Control.prototype.unset),goog.exportProperty(ol.control.Control.prototype,"changed",ol.control.Control.prototype.changed),goog.exportProperty(ol.control.Control.prototype,"dispatchEvent",ol.control.Control.prototype.dispatchEvent),goog.exportProperty(ol.control.Control.prototype,"getRevision",ol.control.Control.prototype.getRevision),goog.exportProperty(ol.control.Control.prototype,"on",ol.control.Control.prototype.on),goog.exportProperty(ol.control.Control.prototype,"once",ol.control.Control.prototype.once),goog.exportProperty(ol.control.Control.prototype,"un",ol.control.Control.prototype.un),goog.exportProperty(ol.control.Attribution.prototype,"getMap",ol.control.Attribution.prototype.getMap),goog.exportProperty(ol.control.Attribution.prototype,"setMap",ol.control.Attribution.prototype.setMap),goog.exportProperty(ol.control.Attribution.prototype,"setTarget",ol.control.Attribution.prototype.setTarget),goog.exportProperty(ol.control.Attribution.prototype,"get",ol.control.Attribution.prototype.get),goog.exportProperty(ol.control.Attribution.prototype,"getKeys",ol.control.Attribution.prototype.getKeys),goog.exportProperty(ol.control.Attribution.prototype,"getProperties",ol.control.Attribution.prototype.getProperties),goog.exportProperty(ol.control.Attribution.prototype,"set",ol.control.Attribution.prototype.set),goog.exportProperty(ol.control.Attribution.prototype,"setProperties",ol.control.Attribution.prototype.setProperties),goog.exportProperty(ol.control.Attribution.prototype,"unset",ol.control.Attribution.prototype.unset),goog.exportProperty(ol.control.Attribution.prototype,"changed",ol.control.Attribution.prototype.changed),goog.exportProperty(ol.control.Attribution.prototype,"dispatchEvent",ol.control.Attribution.prototype.dispatchEvent),goog.exportProperty(ol.control.Attribution.prototype,"getRevision",ol.control.Attribution.prototype.getRevision),goog.exportProperty(ol.control.Attribution.prototype,"on",ol.control.Attribution.prototype.on),goog.exportProperty(ol.control.Attribution.prototype,"once",ol.control.Attribution.prototype.once),goog.exportProperty(ol.control.Attribution.prototype,"un",ol.control.Attribution.prototype.un),goog.exportProperty(ol.control.FullScreen.prototype,"getMap",ol.control.FullScreen.prototype.getMap),goog.exportProperty(ol.control.FullScreen.prototype,"setMap",ol.control.FullScreen.prototype.setMap),goog.exportProperty(ol.control.FullScreen.prototype,"setTarget",ol.control.FullScreen.prototype.setTarget),goog.exportProperty(ol.control.FullScreen.prototype,"get",ol.control.FullScreen.prototype.get),goog.exportProperty(ol.control.FullScreen.prototype,"getKeys",ol.control.FullScreen.prototype.getKeys),goog.exportProperty(ol.control.FullScreen.prototype,"getProperties",ol.control.FullScreen.prototype.getProperties),goog.exportProperty(ol.control.FullScreen.prototype,"set",ol.control.FullScreen.prototype.set),goog.exportProperty(ol.control.FullScreen.prototype,"setProperties",ol.control.FullScreen.prototype.setProperties),goog.exportProperty(ol.control.FullScreen.prototype,"unset",ol.control.FullScreen.prototype.unset),goog.exportProperty(ol.control.FullScreen.prototype,"changed",ol.control.FullScreen.prototype.changed),goog.exportProperty(ol.control.FullScreen.prototype,"dispatchEvent",ol.control.FullScreen.prototype.dispatchEvent),goog.exportProperty(ol.control.FullScreen.prototype,"getRevision",ol.control.FullScreen.prototype.getRevision),goog.exportProperty(ol.control.FullScreen.prototype,"on",ol.control.FullScreen.prototype.on),goog.exportProperty(ol.control.FullScreen.prototype,"once",ol.control.FullScreen.prototype.once),goog.exportProperty(ol.control.FullScreen.prototype,"un",ol.control.FullScreen.prototype.un),goog.exportProperty(ol.control.MousePosition.prototype,"getMap",ol.control.MousePosition.prototype.getMap),goog.exportProperty(ol.control.MousePosition.prototype,"setMap",ol.control.MousePosition.prototype.setMap),goog.exportProperty(ol.control.MousePosition.prototype,"setTarget",ol.control.MousePosition.prototype.setTarget),goog.exportProperty(ol.control.MousePosition.prototype,"get",ol.control.MousePosition.prototype.get),goog.exportProperty(ol.control.MousePosition.prototype,"getKeys",ol.control.MousePosition.prototype.getKeys),goog.exportProperty(ol.control.MousePosition.prototype,"getProperties",ol.control.MousePosition.prototype.getProperties),goog.exportProperty(ol.control.MousePosition.prototype,"set",ol.control.MousePosition.prototype.set),goog.exportProperty(ol.control.MousePosition.prototype,"setProperties",ol.control.MousePosition.prototype.setProperties),goog.exportProperty(ol.control.MousePosition.prototype,"unset",ol.control.MousePosition.prototype.unset),goog.exportProperty(ol.control.MousePosition.prototype,"changed",ol.control.MousePosition.prototype.changed),goog.exportProperty(ol.control.MousePosition.prototype,"dispatchEvent",ol.control.MousePosition.prototype.dispatchEvent),goog.exportProperty(ol.control.MousePosition.prototype,"getRevision",ol.control.MousePosition.prototype.getRevision),goog.exportProperty(ol.control.MousePosition.prototype,"on",ol.control.MousePosition.prototype.on),goog.exportProperty(ol.control.MousePosition.prototype,"once",ol.control.MousePosition.prototype.once),goog.exportProperty(ol.control.MousePosition.prototype,"un",ol.control.MousePosition.prototype.un),goog.exportProperty(ol.control.OverviewMap.prototype,"getMap",ol.control.OverviewMap.prototype.getMap),goog.exportProperty(ol.control.OverviewMap.prototype,"setMap",ol.control.OverviewMap.prototype.setMap),goog.exportProperty(ol.control.OverviewMap.prototype,"setTarget",ol.control.OverviewMap.prototype.setTarget),goog.exportProperty(ol.control.OverviewMap.prototype,"get",ol.control.OverviewMap.prototype.get),goog.exportProperty(ol.control.OverviewMap.prototype,"getKeys",ol.control.OverviewMap.prototype.getKeys),goog.exportProperty(ol.control.OverviewMap.prototype,"getProperties",ol.control.OverviewMap.prototype.getProperties),goog.exportProperty(ol.control.OverviewMap.prototype,"set",ol.control.OverviewMap.prototype.set),goog.exportProperty(ol.control.OverviewMap.prototype,"setProperties",ol.control.OverviewMap.prototype.setProperties),goog.exportProperty(ol.control.OverviewMap.prototype,"unset",ol.control.OverviewMap.prototype.unset),goog.exportProperty(ol.control.OverviewMap.prototype,"changed",ol.control.OverviewMap.prototype.changed),goog.exportProperty(ol.control.OverviewMap.prototype,"dispatchEvent",ol.control.OverviewMap.prototype.dispatchEvent),goog.exportProperty(ol.control.OverviewMap.prototype,"getRevision",ol.control.OverviewMap.prototype.getRevision),goog.exportProperty(ol.control.OverviewMap.prototype,"on",ol.control.OverviewMap.prototype.on),goog.exportProperty(ol.control.OverviewMap.prototype,"once",ol.control.OverviewMap.prototype.once),goog.exportProperty(ol.control.OverviewMap.prototype,"un",ol.control.OverviewMap.prototype.un),goog.exportProperty(ol.control.Rotate.prototype,"getMap",ol.control.Rotate.prototype.getMap),goog.exportProperty(ol.control.Rotate.prototype,"setMap",ol.control.Rotate.prototype.setMap),goog.exportProperty(ol.control.Rotate.prototype,"setTarget",ol.control.Rotate.prototype.setTarget),goog.exportProperty(ol.control.Rotate.prototype,"get",ol.control.Rotate.prototype.get),goog.exportProperty(ol.control.Rotate.prototype,"getKeys",ol.control.Rotate.prototype.getKeys),goog.exportProperty(ol.control.Rotate.prototype,"getProperties",ol.control.Rotate.prototype.getProperties),goog.exportProperty(ol.control.Rotate.prototype,"set",ol.control.Rotate.prototype.set),goog.exportProperty(ol.control.Rotate.prototype,"setProperties",ol.control.Rotate.prototype.setProperties),goog.exportProperty(ol.control.Rotate.prototype,"unset",ol.control.Rotate.prototype.unset),goog.exportProperty(ol.control.Rotate.prototype,"changed",ol.control.Rotate.prototype.changed),goog.exportProperty(ol.control.Rotate.prototype,"dispatchEvent",ol.control.Rotate.prototype.dispatchEvent),goog.exportProperty(ol.control.Rotate.prototype,"getRevision",ol.control.Rotate.prototype.getRevision),goog.exportProperty(ol.control.Rotate.prototype,"on",ol.control.Rotate.prototype.on),goog.exportProperty(ol.control.Rotate.prototype,"once",ol.control.Rotate.prototype.once),goog.exportProperty(ol.control.Rotate.prototype,"un",ol.control.Rotate.prototype.un),goog.exportProperty(ol.control.ScaleLine.prototype,"getMap",ol.control.ScaleLine.prototype.getMap),goog.exportProperty(ol.control.ScaleLine.prototype,"setMap",ol.control.ScaleLine.prototype.setMap),goog.exportProperty(ol.control.ScaleLine.prototype,"setTarget",ol.control.ScaleLine.prototype.setTarget),goog.exportProperty(ol.control.ScaleLine.prototype,"get",ol.control.ScaleLine.prototype.get),goog.exportProperty(ol.control.ScaleLine.prototype,"getKeys",ol.control.ScaleLine.prototype.getKeys),goog.exportProperty(ol.control.ScaleLine.prototype,"getProperties",ol.control.ScaleLine.prototype.getProperties),goog.exportProperty(ol.control.ScaleLine.prototype,"set",ol.control.ScaleLine.prototype.set),goog.exportProperty(ol.control.ScaleLine.prototype,"setProperties",ol.control.ScaleLine.prototype.setProperties),goog.exportProperty(ol.control.ScaleLine.prototype,"unset",ol.control.ScaleLine.prototype.unset),goog.exportProperty(ol.control.ScaleLine.prototype,"changed",ol.control.ScaleLine.prototype.changed),goog.exportProperty(ol.control.ScaleLine.prototype,"dispatchEvent",ol.control.ScaleLine.prototype.dispatchEvent),goog.exportProperty(ol.control.ScaleLine.prototype,"getRevision",ol.control.ScaleLine.prototype.getRevision),goog.exportProperty(ol.control.ScaleLine.prototype,"on",ol.control.ScaleLine.prototype.on),goog.exportProperty(ol.control.ScaleLine.prototype,"once",ol.control.ScaleLine.prototype.once),goog.exportProperty(ol.control.ScaleLine.prototype,"un",ol.control.ScaleLine.prototype.un),goog.exportProperty(ol.control.Zoom.prototype,"getMap",ol.control.Zoom.prototype.getMap),goog.exportProperty(ol.control.Zoom.prototype,"setMap",ol.control.Zoom.prototype.setMap),goog.exportProperty(ol.control.Zoom.prototype,"setTarget",ol.control.Zoom.prototype.setTarget),goog.exportProperty(ol.control.Zoom.prototype,"get",ol.control.Zoom.prototype.get),goog.exportProperty(ol.control.Zoom.prototype,"getKeys",ol.control.Zoom.prototype.getKeys),goog.exportProperty(ol.control.Zoom.prototype,"getProperties",ol.control.Zoom.prototype.getProperties),goog.exportProperty(ol.control.Zoom.prototype,"set",ol.control.Zoom.prototype.set),goog.exportProperty(ol.control.Zoom.prototype,"setProperties",ol.control.Zoom.prototype.setProperties),goog.exportProperty(ol.control.Zoom.prototype,"unset",ol.control.Zoom.prototype.unset),goog.exportProperty(ol.control.Zoom.prototype,"changed",ol.control.Zoom.prototype.changed),goog.exportProperty(ol.control.Zoom.prototype,"dispatchEvent",ol.control.Zoom.prototype.dispatchEvent),goog.exportProperty(ol.control.Zoom.prototype,"getRevision",ol.control.Zoom.prototype.getRevision),goog.exportProperty(ol.control.Zoom.prototype,"on",ol.control.Zoom.prototype.on),goog.exportProperty(ol.control.Zoom.prototype,"once",ol.control.Zoom.prototype.once),goog.exportProperty(ol.control.Zoom.prototype,"un",ol.control.Zoom.prototype.un),goog.exportProperty(ol.control.ZoomSlider.prototype,"getMap",ol.control.ZoomSlider.prototype.getMap),goog.exportProperty(ol.control.ZoomSlider.prototype,"setMap",ol.control.ZoomSlider.prototype.setMap),goog.exportProperty(ol.control.ZoomSlider.prototype,"setTarget",ol.control.ZoomSlider.prototype.setTarget),goog.exportProperty(ol.control.ZoomSlider.prototype,"get",ol.control.ZoomSlider.prototype.get),goog.exportProperty(ol.control.ZoomSlider.prototype,"getKeys",ol.control.ZoomSlider.prototype.getKeys),goog.exportProperty(ol.control.ZoomSlider.prototype,"getProperties",ol.control.ZoomSlider.prototype.getProperties),goog.exportProperty(ol.control.ZoomSlider.prototype,"set",ol.control.ZoomSlider.prototype.set),goog.exportProperty(ol.control.ZoomSlider.prototype,"setProperties",ol.control.ZoomSlider.prototype.setProperties),goog.exportProperty(ol.control.ZoomSlider.prototype,"unset",ol.control.ZoomSlider.prototype.unset),goog.exportProperty(ol.control.ZoomSlider.prototype,"changed",ol.control.ZoomSlider.prototype.changed),goog.exportProperty(ol.control.ZoomSlider.prototype,"dispatchEvent",ol.control.ZoomSlider.prototype.dispatchEvent),goog.exportProperty(ol.control.ZoomSlider.prototype,"getRevision",ol.control.ZoomSlider.prototype.getRevision),goog.exportProperty(ol.control.ZoomSlider.prototype,"on",ol.control.ZoomSlider.prototype.on),goog.exportProperty(ol.control.ZoomSlider.prototype,"once",ol.control.ZoomSlider.prototype.once),goog.exportProperty(ol.control.ZoomSlider.prototype,"un",ol.control.ZoomSlider.prototype.un),goog.exportProperty(ol.control.ZoomToExtent.prototype,"getMap",ol.control.ZoomToExtent.prototype.getMap),goog.exportProperty(ol.control.ZoomToExtent.prototype,"setMap",ol.control.ZoomToExtent.prototype.setMap),goog.exportProperty(ol.control.ZoomToExtent.prototype,"setTarget",ol.control.ZoomToExtent.prototype.setTarget),goog.exportProperty(ol.control.ZoomToExtent.prototype,"get",ol.control.ZoomToExtent.prototype.get),goog.exportProperty(ol.control.ZoomToExtent.prototype,"getKeys",ol.control.ZoomToExtent.prototype.getKeys),goog.exportProperty(ol.control.ZoomToExtent.prototype,"getProperties",ol.control.ZoomToExtent.prototype.getProperties),goog.exportProperty(ol.control.ZoomToExtent.prototype,"set",ol.control.ZoomToExtent.prototype.set),goog.exportProperty(ol.control.ZoomToExtent.prototype,"setProperties",ol.control.ZoomToExtent.prototype.setProperties),goog.exportProperty(ol.control.ZoomToExtent.prototype,"unset",ol.control.ZoomToExtent.prototype.unset),goog.exportProperty(ol.control.ZoomToExtent.prototype,"changed",ol.control.ZoomToExtent.prototype.changed),goog.exportProperty(ol.control.ZoomToExtent.prototype,"dispatchEvent",ol.control.ZoomToExtent.prototype.dispatchEvent),goog.exportProperty(ol.control.ZoomToExtent.prototype,"getRevision",ol.control.ZoomToExtent.prototype.getRevision),goog.exportProperty(ol.control.ZoomToExtent.prototype,"on",ol.control.ZoomToExtent.prototype.on),goog.exportProperty(ol.control.ZoomToExtent.prototype,"once",ol.control.ZoomToExtent.prototype.once),goog.exportProperty(ol.control.ZoomToExtent.prototype,"un",ol.control.ZoomToExtent.prototype.un),ol.VERSION="v4.2.0",OPENLAYERS.ol=ol,OPENLAYERS.ol}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("aigle",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Promise=e()}}(function(){return function e(t,o,r){function i(a,l){if(!o[a]){if(!t[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(n)return n(a,!0);var p=new Error("Cannot find module '"+a+"'");throw p.code="MODULE_NOT_FOUND",p}var g=o[a]={exports:{}};t[a][0].call(g.exports,function(e){var o=t[a][1][e];return i(o?o:e)},g,g.exports,e,t,o,r)}return o[a].exports}for(var n="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,o){"use strict";e("setimmediate"),t.exports=e("./lib/aigle")},{"./lib/aigle":2,setimmediate:68}],2:[function(e,t,o){(function(o){"use strict";function r(e){var t=new E(f);return t._resolve(e),t}function i(e,t){if(2===arguments.length&&"function"==typeof t)return X(e,t);var o=new E(f);return o._reject(e),o}function n(e,t){function o(t){e._resolve(t)}function r(t){e._reject(t)}try{t(o,r)}catch(e){r(e)}}function a(e,t,o){if("function"!=typeof t)return void e._resolve(o);var r=v(t,o);if(r===m)return void e._reject(m.e);if(r instanceof c)switch(r._resolved){case 0:return void r._addReceiver(e,f);case 1:return void e._resolve(r._value);case 2:return void e._reject(r._value)}r&&r.then?r.then(_(e),S(e)):e._resolve(r)}function l(e,t,o){if("function"!=typeof t)return void e._reject(o);var r=v(t,o);if(r===m)return void e._reject(m.e);if(r instanceof c)switch(r._resolved){case 0:return void r._addReceiver(e,f);case 1:return void e._resolve(r._value);case 2:return void e._reject(r._value)}r&&r.then?r.then(_(e),S(e)):e._resolve(r)}function s(e,t,o){return function(r){for(var i=t.length;i--;)if(r instanceof t[i])return void l(e,o,r);e._reject(r)}}function p(e,t){return function(){var o=e._resolved,r=e._value,i=t();if(i instanceof c)switch(i._resolved){case 1:return i._resolved=o,i._value=r,i;case 2:return i}var n=new E(f);return i&&i.then?(1===o?i.then(function(){return n._resolve(r)},S(n)):i.then(function(){return n._reject(r)},S(n)),n):(n._resolved=o,n._value=r,n)}}function g(){for(;x.head;){var e=x.shift(),t=e.promise,o=e.receiver,r=e.onFullfilled,i=e.onRejected,n=t._resolved,s=t._key,p=t._value;1===n?o instanceof c&&o.__PROXY__?o._callResolve(p,s):s===f?o._resolve(p):a(o,r,p):o instanceof c&&o.__PROXY__?o._callReject(p,s):s===f?o._resolve(p):l(o,i,p)}}function u(e,t,o,r){x.head||setImmediate(g),x.push(new h(e,t,o,r))}var c=e("aigle-core"),y=e("./internal/queue"),h=e("./internal/task"),d=e("./internal/util"),f=d.INTERNAL,m=d.errorObj,v=d.call1,_=d.makeResolve,S=d.makeReject,x=new y,E=function(e){function t(t){e.call(this),this._resolved=0,this._value=void 0,this._key=void 0,this._receiver=void 0,this._onFullFilled=void 0,this._onRejected=void 0,this._receivers=void 0,t!==f&&n(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return"[object Promise]"},t.prototype.then=function(e,o){var r=new t(f);return 0===this._resolved?this._addAigle(r,e,o):u(this,r,e,o),r},t.prototype.catch=function(e){var o=arguments,r=new t(f);if(arguments.length>1){var i=arguments.length;e=arguments[--i];for(var n=Array(i);i--;)n[i]=o[i];e=s(r,n,e)}return 0===this._resolved?this._addAigle(r,void 0,e):u(this,r,void 0,e),r},t.prototype.finally=function(e){var o=new t(f);return e="function"!=typeof e?e:p(this,e),0===this._resolved?this._addAigle(o,e,e):u(this,o,e,e),o},t.prototype.spread=function(e){return this.then(function(t){return new Re(t,e)})},t.prototype.all=function(){return this.then(R)},t.prototype.race=function(){return this.then(L)},t.prototype.props=function(){return this.then(C)},t.prototype.parallel=function(){return this.then(b)},t.prototype.each=function(e){return this.then(function(t){return I(t,e)})},t.prototype.forEach=function(e){return this.each(e)},t.prototype.eachSeries=function(e){return this.then(function(t){return A(t,e)})},t.prototype.forEachSeries=function(e){return this.eachSeries(e)},t.prototype.eachLimit=function(e,t){return this.then(function(o){return w(o,e,t)})},t.prototype.forEachLimit=function(e,t){return this.eachLimit(e,t)},t.prototype.map=function(e){return this.then(function(t){return O(t,e)})},t.prototype.mapSeries=function(e){return this.then(function(t){return F(t,e)})},t.prototype.mapLimit=function(e,t){return this.then(function(o){return G(o,e,t)})},t.prototype.mapValues=function(e){return this.then(function(t){return D(t,e)})},t.prototype.mapValuesSeries=function(e){return this.then(function(t){return k(t,e)})},t.prototype.mapValuesLimit=function(e,t){return this.then(function(o){return q(o,e,t)})},t.prototype.filter=function(e){return this.then(function(t){return U(t,e)})},t.prototype.filterSeries=function(e){return this.then(function(t){return B(t,e)})},t.prototype.filterLimit=function(e,t){return this.then(function(o){return W(o,e,t)})},t.prototype.reject=function(e){return this.then(function(t){return X(t,e)})},t.prototype.rejectSeries=function(e){return this.then(function(t){return K(t,e)})},t.prototype.rejectLimit=function(e,t){return this.then(function(o){return Z(o,e,t)})},t.prototype.find=function(e){return this.then(function(t){return H(t,e)})},t.prototype.findSeries=function(e){return this.then(function(t){return z(t,e)})},t.prototype.findLimit=function(e,t){return this.then(function(o){return Q(o,e,t)})},t.prototype.pick=function(e){return this.then(function(t){return $(t,e)})},t.prototype.pickSeries=function(e){return this.then(function(t){return ee(t,e)})},t.prototype.pickLimit=function(e,t){return this.then(function(o){return oe(o,e,t)})},t.prototype.omit=function(e){return this.then(function(t){return re(t,e)})},t.prototype.omitSeries=function(e){return this.then(function(t){return ie(t,e)})},t.prototype.omitLimit=function(e,t){return this.then(function(o){return ae(o,e,t)})},t.prototype.reduce=function(e,t){return this.then(function(o){return le(o,e,t)})},t.prototype.transform=function(e,t){return this.then(function(o){return se(o,e,t)})},t.prototype.transformSeries=function(e,t){return this.then(function(o){return pe(o,e,t)})},t.prototype.transformLimit=function(e,t,o){return this.then(function(r){return ge(r,e,t,o)})},t.prototype.sortBy=function(e){return this.then(function(t){return ue(t,e)})},t.prototype.sortBySeries=function(e){return this.then(function(t){return ce(t,e)})},t.prototype.sortByLimit=function(e,t){return this.then(function(o){return ye(o,e,t)})},t.prototype.some=function(e){return this.then(function(t){return he(t,e)})},t.prototype.someSeries=function(e){return this.then(function(t){return de(t,e)})},t.prototype.someLimit=function(e,t){return this.then(function(o){return fe(o,e,t)})},t.prototype.every=function(e){return this.then(function(t){return me(t,e)})},t.prototype.everySeries=function(e){return this.then(function(t){return ve(t,e)})},t.prototype.everyLimit=function(e,t){return this.then(function(o){return _e(o,e,t)})},t.prototype.concat=function(e){return this.then(function(t){return Se(t,e)})},t.prototype.concatSeries=function(e){return this.then(function(t){return xe(t,e)})},t.prototype.concatLimit=function(e,t){return this.then(function(o){return Ee(o,e,t)})},t.prototype.delay=function(e){var t=new Ce(e);return 0===this._resolved?this._addReceiver(t):u(this,t),t},t.prototype.timeout=function(e,t){var o=new be(e,t);return 0===this._resolved?this._addReceiver(o):u(this,o),o},t.prototype.whilst=function(e,t){return this.then(function(o){return Ae(o,e,t)})},t.prototype.doWhilst=function(e,t){return this.then(function(o){return Oe(o,e,t)})},t.prototype.until=function(e,t){return this.then(function(o){return Ne(o,e,t)})},t.prototype.doUntil=function(e,t){return this.then(function(o){return Ge(o,e,t)})},t.prototype.times=function(e){return this.then(function(t){return ke(t,e)})},t.prototype.timesSeries=function(e){return this.then(function(t){return je(t,e)})},t.prototype.timesLimit=function(e,t){return this.then(function(o){return qe(o,e,t)})},t.prototype._resolve=function(t){if(this._resolved=1,this._value=t,void 0!==this._receiver){var o=this,r=o._receiver,i=o._key;if(this._receiver=void 0,r instanceof e&&r.__PROXY__?r._callResolve(t,i):i===f?r._resolve(t):a(r,this._onFullFilled,t),this._receivers){var n=this,l=n._receivers;for(this._receivers=void 0;l.head;){var s=l.shift(),p=s.receiver,g=s.onFullfilled;a(p,g,t)}}}},t.prototype._reject=function(t){if(this._resolved=2,this._value=t,void 0===this._receiver)return void o.emit("unhandledRejection",t);var r=this,i=r._receiver,n=r._key;if(this._receiver=void 0,i instanceof e&&i.__PROXY__?i._callReject(t):n===f?i._reject(t):l(i,this._onRejected,t),this._receivers){var a=this,s=a._receivers;for(this._receivers=void 0;s.head;){var p=s.shift(),g=p.receiver,u=p.onRejected;l(g,u,t)}}},t.prototype._addAigle=function(e,t,o){return void 0===this._receiver?(this._receiver=e,this._onFullFilled=t,void(this._onRejected=o)):(this._receivers||(this._receivers=new y),void this._receivers.push(new h(void 0,e,t,o)))},t.prototype._addReceiver=function(e,t){this._key=t,this._receiver=e},t}(c),P=function(e){function t(){e.call(this,f),this.__PROXY__=!0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e){this._resolve(e)},t.prototype._callReject=function(e){this._reject(e)},t}(E);t.exports={Aigle:E,AigleProxy:P,push:u};var T=e("./all"),R=T.all,L=e("./race"),M=e("./props"),C=M.props,b=e("./parallel"),I=e("./each"),A=e("./eachSeries"),w=e("./eachLimit"),O=e("./map"),F=e("./mapSeries"),N=e("./mapLimit"),G=N.mapLimit,D=e("./mapValues"),k=e("./mapValuesSeries"),j=e("./mapValuesLimit"),q=j.mapValuesLimit,U=e("./filter"),B=e("./filterSeries"),V=e("./filterLimit"),W=V.filterLimit,X=e("./reject"),K=e("./rejectSeries"),Y=e("./rejectLimit"),Z=Y.rejectLimit,H=e("./find"),z=e("./findSeries"),J=e("./findLimit"),Q=J.findLimit,$=e("./pick"),ee=e("./pickSeries"),te=e("./pickLimit"),oe=te.pickLimit,re=e("./omit"),ie=e("./omitSeries"),ne=e("./omitLimit"),ae=ne.omitLimit,le=e("./reduce"),se=e("./transform"),pe=e("./transformSeries"),ge=e("./transformLimit"),ue=e("./sortBy"),ce=e("./sortBySeries"),ye=e("./sortByLimit"),he=e("./some"),de=e("./someSeries"),fe=e("./someLimit"),me=e("./every"),ve=e("./everySeries"),_e=e("./everyLimit"),Se=e("./concat"),xe=e("./concatSeries"),Ee=e("./concatLimit"),Pe=e("./join"),Te=Pe.join,Re=Pe.Join,Le=e("./delay"),Me=Le.delay,Ce=Le.Delay,be=e("./timeout"),Ie=e("./whilst"),Ae=Ie.whilst,we=e("./doWhilst"),Oe=we.doWhilst,Fe=e("./until"),Ne=Fe.until,Ge=e("./doUntil"),De=e("./retry"),ke=e("./times"),je=e("./timesSeries"),qe=e("./timesLimit");
E.resolve=r,E.reject=i,E.all=R,E.race=L,E.props=C,E.parallel=b,E.each=I,E.eachSeries=A,E.eachLimit=w,E.forEach=I,E.forEachSeries=A,E.forEachLimit=w,E.map=O,E.mapSeries=F,E.mapLimit=G,E.mapValues=D,E.mapValuesSeries=k,E.mapValuesLimit=q,E.filter=U,E.filterSeries=B,E.filterLimit=W,E.rejectSeries=K,E.rejectLimit=Z,E.find=H,E.findSeries=z,E.findLimit=Q,E.detect=H,E.detectSeries=z,E.detectLimit=Q,E.pick=$,E.pickSeries=ee,E.pickLimit=oe,E.omit=re,E.omitSeries=ie,E.omitLimit=ae,E.reduce=le,E.transform=se,E.transformSeries=pe,E.transformLimit=ge,E.sortBy=ue,E.sortBySeries=ce,E.sortByLimit=ye,E.some=he,E.someSeries=de,E.someLimit=fe,E.every=me,E.everySeries=ve,E.everyLimit=_e,E.concat=Se,E.concatSeries=xe,E.concatLimit=Ee,E.times=ke,E.timesSeries=je,E.timesLimit=qe,E.join=Te,E.promisify=e("./promisify"),E.promisifyAll=e("./promisifyAll"),E.delay=Me,E.whilst=Ae,E.doWhilst=Oe,E.until=Ne,E.doUntil=Ge,E.retry=De;var Ue=e("./error"),Be=Ue.TimeoutError;E.TimeoutError=Be,t.exports=E}).call(this,e("_process"))},{"./all":3,"./concat":4,"./concatLimit":5,"./concatSeries":6,"./delay":7,"./doUntil":8,"./doWhilst":9,"./each":10,"./eachLimit":11,"./eachSeries":12,"./error":13,"./every":14,"./everyLimit":15,"./everySeries":16,"./filter":17,"./filterLimit":18,"./filterSeries":19,"./find":20,"./findLimit":21,"./findSeries":22,"./internal/queue":25,"./internal/task":26,"./internal/util":27,"./join":28,"./map":29,"./mapLimit":30,"./mapSeries":31,"./mapValues":32,"./mapValuesLimit":33,"./mapValuesSeries":34,"./omit":35,"./omitLimit":36,"./omitSeries":37,"./parallel":38,"./pick":39,"./pickLimit":40,"./pickSeries":41,"./promisify":42,"./promisifyAll":43,"./props":44,"./race":45,"./reduce":46,"./reject":47,"./rejectLimit":48,"./rejectSeries":49,"./retry":50,"./some":51,"./someLimit":52,"./someSeries":53,"./sortBy":54,"./sortByLimit":55,"./sortBySeries":56,"./timeout":57,"./times":58,"./timesLimit":59,"./timesSeries":60,"./transform":61,"./transformLimit":62,"./transformSeries":63,"./until":64,"./whilst":65,_process:67,"aigle-core":66}],3:[function(e,t,o){"use strict";function r(e){return new s(e)}var i=e("./aigle"),n=i.AigleProxy,a=e("./internal/util"),l=a.promiseArrayEach,s=function(e){function t(t){e.call(this),l(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[t]=e,0===--this._rest&&this._resolve(this._result)},t}(n);t.exports={all:r,AigleAll:s}},{"./aigle":2,"./internal/util":27}],4:[function(e,t,o){"use strict";function r(e,t){return Array.isArray(e)?new p(e,t)._iterate():e&&"object"==typeof e?new g(e,t)._iterate():n.resolve([])}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleEach"),l=a.AigleEachArray,s=a.AigleEachObject,p=function(e){function t(t,o){e.call(this,t,o);var r=this,i=r._rest;0===i?this._value=[]:this._result=[]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e){Array.isArray(e)?(t=this._result).push.apply(t,e):this._result.push(e),0===--this._rest&&this._resolve(this._result);var t},t}(l),g=function(e){function t(t,o){e.call(this,t,o);var r=this,i=r._rest;0===i?this._value=[]:this._result=[]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e){Array.isArray(e)?(t=this._result).push.apply(t,e):this._result.push(e),0===--this._rest&&this._resolve(this._result);var t},t}(s);t.exports=r},{"./aigle":2,"./internal/aigleEach":23}],5:[function(e,t,o){"use strict";function r(e,t,o){return 2===arguments.length&&(o=t,t=l),Array.isArray(e)?new g(e,o,t)._iterate():e&&"object"==typeof e?new u(e,o,t)._iterate():n.resolve([])}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleLimit"),l=a.DEFAULT_LIMIT,s=a.AigleLimitArray,p=a.AigleLimitObject,g=function(e){function t(t,o,r){e.call(this,t,o,r);var i=this,n=i._rest;0===n?this._value=[]:this._result=[]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e){Array.isArray(e)?(t=this._result).push.apply(t,e):this._result.push(e),0===--this._rest?this._resolve(this._result):this._index<this._size&&this._next();var t},t}(s),u=function(e){function t(t,o,r){e.call(this,t,o,r);var i=this,n=i._rest;0===n?this._value=[]:this._result=[]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e){Array.isArray(e)?(t=this._result).push.apply(t,e):this._result.push(e),0===--this._rest?this._resolve(this._result):this._index<this._size&&this._next();var t},t}(p);t.exports=r},{"./aigle":2,"./internal/aigleLimit":24}],6:[function(e,t,o){"use strict";function r(e,t){return i(e,1,t)}var i=e("./concatLimit");t.exports=r},{"./concatLimit":5}],7:[function(e,t,o){"use strict";function r(e,t){var o=new a(e);return o._callResolve(t),o}var i=e("./aigle"),n=i.AigleProxy,a=function(e){function t(t){e.call(this),this._ms=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e){var t=this;setTimeout(function(){return t._resolve(e)},this._ms)},t}(n);t.exports={delay:r,Delay:a}},{"./aigle":2}],8:[function(e,t,o){"use strict";function r(e,t,o){return"function"!=typeof o&&(o=t,t=e,e=void 0),new n(new l(o),t)._iterate(e)}var i=e("./doWhilst"),n=i.DoWhilst,a=e("./until"),l=a.UntilTester;t.exports=r},{"./doWhilst":9,"./until":64}],9:[function(e,t,o){"use strict";function r(e,t,o){return"function"!=typeof o&&(o=t,t=e,e=void 0),new l(new a(o),t)._iterate(e)}var i=e("./whilst"),n=i.AigleWhilst,a=i.WhilstTester,l=function(e){function t(t,o){e.call(this,t,o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._iterate=function(e){return this._next(e),this},t}(n);t.exports={doWhilst:r,DoWhilst:l}},{"./whilst":65}],10:[function(e,t,o){"use strict";function r(e,t){return Array.isArray(e)?new l(e,t)._iterate():e&&"object"==typeof e?new s(e,t)._iterate():n.resolve()}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleEach"),l=a.AigleEachArray,s=a.AigleEachObject;t.exports=r},{"./aigle":2,"./internal/aigleEach":23}],11:[function(e,t,o){"use strict";function r(e,t,o){return 2===arguments.length&&(o=t,t=l),Array.isArray(e)?new s(e,o,t)._iterate():e&&"object"==typeof e?new p(e,o,t)._iterate():n.resolve()}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleLimit"),l=a.DEFAULT_LIMIT,s=a.AigleLimitArray,p=a.AigleLimitObject;t.exports=r},{"./aigle":2,"./internal/aigleLimit":24}],12:[function(e,t,o){"use strict";function r(e,t){return Array.isArray(e)?new l(e,t,1)._iterate():e&&"object"==typeof e?new s(e,t,1)._iterate():n.resolve()}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleLimit"),l=a.AigleLimitArray,s=a.AigleLimitObject;t.exports=r},{"./aigle":2,"./internal/aigleLimit":24}],13:[function(e,t,o){"use strict";for(var r=["TimeoutError"],i=r.length;i--;)o[r[i]]=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error)},{}],14:[function(e,t,o){"use strict";function r(e,t){return Array.isArray(e)?new p(e,t)._iterate():e&&"object"==typeof e?new g(e,t)._iterate():n.resolve(!0)}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleEach"),l=a.AigleEachArray,s=a.AigleEachObject,p=function(e){function t(t,o){e.call(this,t,o),0===this._rest&&(this._value=!0)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e){0===this._resolved&&(e?0===--this._rest&&this._resolve(!0):this._resolve(!1))},t}(l),g=function(e){function t(t,o){e.call(this,t,o),0===this._rest&&(this._value=!0)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e){0===this._resolved&&(e?0===--this._rest&&this._resolve(!0):this._resolve(!1))},t}(s);t.exports=r},{"./aigle":2,"./internal/aigleEach":23}],15:[function(e,t,o){"use strict";function r(e,t,o){return 2===arguments.length&&(o=t,t=l),Array.isArray(e)?new g(e,o,t)._iterate():e&&"object"==typeof e?new u(e,o,t)._iterate():n.resolve(!0)}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleLimit"),l=a.DEFAULT_LIMIT,s=a.AigleLimitArray,p=a.AigleLimitObject,g=function(e){function t(t,o,r){e.call(this,t,o,r),0===this._rest&&(this._value=!0)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e){0===this._resolved&&(e?0===--this._rest?this._resolve(!0):this._index<this._size&&this._next():this._resolve(!1))},t}(s),u=function(e){function t(t,o,r){e.call(this,t,o,r),0===this._rest&&(this._value=!0)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e){0===this._resolved&&(e?0===--this._rest?this._resolve(!0):this._index<this._size&&this._next():this._resolve(!1))},t}(p);t.exports=r},{"./aigle":2,"./internal/aigleLimit":24}],16:[function(e,t,o){"use strict";function r(e,t){return i(e,1,t)}var i=e("./everyLimit");t.exports=r},{"./everyLimit":15}],17:[function(e,t,o){"use strict";function r(e,t){return Array.isArray(e)?new c(e,t)._iterate():e&&"object"==typeof e?new y(e,t)._iterate():n.resolve([])}var i=e("./aigle"),n=i.Aigle,a=e("./internal/util"),l=a.INTERNAL,s=a.compactArray,p=e("./internal/aigleEach"),g=p.AigleEachArray,u=p.AigleEachObject,c=function(e){function t(t,o){e.call(this,t,o);var r=this,i=r._rest;0===i?this._value=[]:this._result=Array(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[t]=e?this._array[t]:l,0===--this._rest&&this._resolve(s(this._result))},t}(g),y=function(e){function t(t,o){e.call(this,t,o);var r=this,i=r._rest;0===i?this._value=[]:this._result=Array(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[t]=e?this._object[this._keys[t]]:l,0===--this._rest&&this._resolve(s(this._result))},t}(u);t.exports=r},{"./aigle":2,"./internal/aigleEach":23,"./internal/util":27}],18:[function(e,t,o){"use strict";function r(e,t,o){return 2===arguments.length&&(o=t,t=g),Array.isArray(e)?new y(e,o,t)._iterate():e&&"object"==typeof e?new h(e,o,t)._iterate():n.resolve([])}var i=e("./aigle"),n=i.Aigle,a=e("./internal/util"),l=a.INTERNAL,s=a.compactArray,p=e("./internal/aigleLimit"),g=p.DEFAULT_LIMIT,u=p.AigleLimitArray,c=p.AigleLimitObject,y=function(e){function t(t,o,r){e.call(this,t,o,r);var i=this,n=i._rest;0===n?this._value=[]:this._result=Array(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[t]=e?this._array[t]:l,0===--this._rest?this._resolve(s(this._result)):this._index<this._size&&this._next()},t}(u),h=function(e){function t(t,o,r){e.call(this,t,o,r);var i=this,n=i._rest;0===n?this._value=[]:this._result=Array(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[t]=e?this._object[this._keys[t]]:l,0===--this._rest?this._resolve(s(this._result)):this._index<this._size&&this._next()},t}(c);t.exports={filterLimit:r,FilterLimitArray:y,FilterLimitObject:h}},{"./aigle":2,"./internal/aigleLimit":24,"./internal/util":27}],19:[function(e,t,o){"use strict";function r(e,t){return Array.isArray(e)?new l(e,t,1)._iterate():e&&"object"==typeof e?new s(e,t,1)._iterate():n.resolve([])}var i=e("./aigle"),n=i.Aigle,a=e("./filterLimit"),l=a.FilterLimitArray,s=a.FilterLimitObject;t.exports=r},{"./aigle":2,"./filterLimit":18}],20:[function(e,t,o){"use strict";function r(e,t){return Array.isArray(e)?new p(e,t)._iterate():e&&"object"==typeof e?new g(e,t)._iterate():n.resolve()}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleEach"),l=a.AigleEachArray,s=a.AigleEachObject,p=function(e){function t(t,o){e.call(this,t,o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){0===this._resolved&&(e?this._resolve(this._array[t]):0===--this._rest&&this._resolve())},t}(l),g=function(e){function t(t,o){e.call(this,t,o)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){0===this._resolved&&(e?this._resolve(this._object[this._keys[t]]):0===--this._rest&&this._resolve())},t}(s);t.exports=r},{"./aigle":2,"./internal/aigleEach":23}],21:[function(e,t,o){"use strict";function r(e,t,o){return 2===arguments.length&&(o=t,t=l),Array.isArray(e)?new g(e,o,t)._iterate():e&&"object"==typeof e?new u(e,o,t)._iterate():n.resolve()}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleLimit"),l=a.DEFAULT_LIMIT,s=a.AigleLimitArray,p=a.AigleLimitObject,g=function(e){function t(t,o,r){e.call(this,t,o,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){0===this._resolved&&(e?this._resolve(this._array[t]):0===--this._rest?this._resolve():this._index<this._size&&this._next())},t}(s),u=function(e){function t(t,o,r){e.call(this,t,o,r)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){0===this._resolved&&(e?this._resolve(this._object[this._keys[t]]):0===--this._rest?this._resolve():this._index<this._size&&this._next())},t}(p);t.exports={findLimit:r,FindLimitArray:g,FindLimitObject:u}},{"./aigle":2,"./internal/aigleLimit":24}],22:[function(e,t,o){"use strict";function r(e,t){return Array.isArray(e)?new l(e,t,1)._iterate():e&&"object"==typeof e?new s(e,t,1)._iterate():n.resolve()}var i=e("./aigle"),n=i.Aigle,a=e("./findLimit"),l=a.FindLimitArray,s=a.FindLimitObject;t.exports=r},{"./aigle":2,"./findLimit":21}],23:[function(e,t,o){"use strict";var r=e("../aigle"),i=r.AigleProxy,n=e("./util"),a=n.call2,l=n.callProxyReciever,s=function(e){function t(t,o){e.call(this);var r=t.length;return this._rest=r,0===r?void this._resolve():(this._array=t,void(this._iterator=o))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._iterate=function(){for(var e=-1,t=this,o=t._rest,r=t._iterator,i=t._array;++e<o&&l(a(r,i[e],e),this,e););return this},t.prototype._callResolve=function(){0===--this._rest&&this._resolve()},t}(i),p=function(e){function t(t,o){e.call(this);var r=Object.keys(t),i=r.length;return this._rest=i,0===i?void this._resolve():(this._keys=r,this._object=t,void(this._iterator=o))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._iterate=function(){for(var e=this,t=-1,o=this,r=o._rest,i=o._iterator,n=o._keys,s=o._object;++t<r;){var p=n[t];if(l(a(i,s[p],p),e,t)===!1)break}return this},t.prototype._callResolve=function(){0===--this._rest&&this._resolve()},t}(i);t.exports={AigleEachArray:s,AigleEachObject:p}},{"../aigle":2,"./util":27}],24:[function(e,t,o){"use strict";var r=e("../aigle"),i=r.AigleProxy,n=e("./util"),a=n.DEFAULT_LIMIT,l=n.call2,s=n.callProxyReciever,p=function(e){function t(t,o,r){e.call(this);var i=t.length;return 0===i||isNaN(r)||r<1?(this._rest=0,this._limit=0,void this._resolve()):(this._limit=r>i?i:r,this._index=0,this._rest=i,this._size=i,this._array=t,void(this._iterator=o))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._iterate=function(){for(var e=this;this._limit--;)e._next();return this},t.prototype._next=function(){var e=this._index++;s(l(this._iterator,this._array[e],e),this,e)},t.prototype._callResolve=function(){0===this._resolved&&(0===--this._rest?this._resolve():this._index<this._size&&this._next())},t}(i),g=function(e){function t(t,o,r){e.call(this);var i=Object.keys(t),n=i.length;return 0===n||isNaN(r)||r<1?(this._rest=0,this._limit=0,void this._resolve()):(this._limit=r>n?n:r,this._index=0,this._keys=i,this._rest=n,this._size=n,this._object=t,void(this._iterator=o))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._iterate=function(){for(var e=this;this._limit--;)e._next();return this},t.prototype._next=function(){var e=this._index++,t=this._keys[e];s(l(this._iterator,this._object[t],t),this,e)},t.prototype._callResolve=function(){0===this._resolved&&(0===--this._rest?this._resolve():this._index<this._size&&this._next())},t}(i);t.exports={DEFAULT_LIMIT:a,AigleLimitArray:p,AigleLimitObject:g}},{"../aigle":2,"./util":27}],25:[function(e,t,o){"use strict";var r=function(){this.tail=void 0,this.head=void 0};r.prototype.push=function(e){var t=this.tail;this.tail=e,t?t.tail=e:this.head=e},r.prototype.unshift=function(e){var t=this.head;this.head=e,t?e.tail=t:this.tail=e},r.prototype.shift=function(){var e=this.head;if(e)return this.head=e.tail,this.head||(this.tail=null),e},t.exports=r},{}],26:[function(e,t,o){"use strict";var r=function(e,t,o,r){this.promise=e,this.receiver=t,this.onFullfilled=o,this.onRejected=r,this.head=void 0,this.tail=void 0};t.exports=r},{}],27:[function(e,t,o){"use strict";function r(){}function i(e){try{return e()}catch(e){return T.e=e,T}}function n(e,t){try{return e(t)}catch(e){return T.e=e,T}}function a(e,t,o){try{return e(t,o)}catch(e){return T.e=e,T}}function l(e,t,o,r){try{return e(t,o,r)}catch(e){return T.e=e,T}}function s(e,t){try{switch(t.length){case 0:return e();case 1:return e(t[0]);case 2:return e(t[0],t[1]);case 3:return e(t[0],t[1],t[2]);default:return e.apply(null,t)}}catch(e){return T.e=e,T}}function p(e,t,o){if(e===T)return t._callReject(T.e),!1;if(e instanceof E)switch(e._resolved){case 0:return e._addReceiver(t,o),!0;case 1:return t._callResolve(e._value,o),!0;case 2:return t._callReject(e._value),!1}return e&&e.then?e.then(c(t,o),y(t)):t._callResolve(e,o),!0}function g(e){return function(t){e._resolve(t)}}function u(e){return function(t){e._reject(t)}}function c(e,t){return function(o){e._callResolve(o,t)}}function y(e){return function(t){e._callReject(t)}}function h(e,t){var o=t.length;if(0===o)return void e._resolve([]);var r=-1;for(e._rest=o,e._result=t;++r<o;){var i=t[r];if(i instanceof E)switch(i._resolved){case 0:i._addReceiver(e,r);continue;case 1:e._callResolve(i._value,r);continue;case 2:return void e._reject(i._value)}i&&i.then?i.then(c(e,r),u(e)):e._callResolve(i,r)}}function d(e,t){if(!t)return void e._resolve({});var o=Object.keys(t),r=o.length;if(0===r)return void e._resolve({});var i=-1;for(e._rest=r,e._result={};++i<r;){var n=o[i],a=t[n];if(a instanceof E)switch(a._resolved){case 0:a._addReceiver(e,n);continue;case 1:e._callResolve(a._value,n);continue;case 2:return void e._reject(a._value)}a&&a.then?a.then(c(e,n),u(e)):e._callResolve(a,n)}}function f(e){for(var t=-1,o=e.length,i=[];++t<o;){var n=e[t];n!==r&&i.push(n)}return i}function m(e){return Array.isArray(e)?v(e):_(e)}function v(e){for(var t=e.length,o=Array(t);t--;)o[t]=e[t];return o}function _(e){for(var t=Object.keys(e),o=t.length,r={};o--;){var i=t[o];r[i]=e[i]}return r}function S(e,t){return e.criteria-t.criteria}function x(e){e.sort(S);for(var t=e.length;t--;)e[t]=e[t].value;return e}var E=e("aigle-core"),P=8,T={e:void 0},R=function(e,t){this._resolved=1,this._key=t,this._value=e};t.exports={DEFAULT_LIMIT:P,DummyPromise:R,INTERNAL:r,errorObj:T,call0:i,call1:n,call2:a,call3:l,callProxyReciever:p,apply:s,makeResolve:g,makeReject:u,promiseArrayEach:h,promiseObjectEach:d,compactArray:f,clone:m,sort:x}},{"aigle-core":66}],28:[function(e,t,o){"use strict";function r(){for(var e=arguments,t=arguments.length,o="function"==typeof arguments[t-1]?arguments[--t]:void 0,r=Array(t);t--;)r[t]=e[t];return new y(r,o)}var i=e("aigle-core"),n=e("./aigle"),a=n.AigleProxy,l=e("./internal/util"),s=l.errorObj,p=l.apply,g=l.makeResolve,u=l.makeReject,c=l.promiseArrayEach,y=function(e){function t(t,o){e.call(this),this._handler=o,c(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._spread=function(){var e=this,t=e._result;if(void 0===this._handler)return this._resolve(t);var o=p(this._handler,t);if(o===s)return this._reject(s.e);if(o instanceof i)switch(o._resolved){case 0:return o._addReceiver(this);case 1:return this._callResolve(o._value);case 2:return this._reject(o._value)}o&&o.then?o.then(g(this),u(this)):this._callResolve(o)},t.prototype._callResolve=function(e,t){return 0===this._rest?this._resolve(e):(this._result[t]=e,void(0===--this._rest&&this._spread()))},t}(a);t.exports={join:r,Join:y}},{"./aigle":2,"./internal/util":27,"aigle-core":66}],29:[function(e,t,o){"use strict";function r(e,t){return Array.isArray(e)?new p(e,t)._iterate():e&&"object"==typeof e?new g(e,t)._iterate():n.resolve([])}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleEach"),l=a.AigleEachArray,s=a.AigleEachObject,p=function(e){function t(t,o){e.call(this,t,o);var r=this,i=r._rest;0===i?this._value=[]:this._result=Array(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[t]=e,0===--this._rest&&this._resolve(this._result)},t}(l),g=function(e){function t(t,o){e.call(this,t,o);var r=this,i=r._rest;0===i?this._value=[]:this._result=Array(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[t]=e,0===--this._rest&&this._resolve(this._result)},t}(s);t.exports=r},{"./aigle":2,"./internal/aigleEach":23}],30:[function(e,t,o){"use strict";function r(e,t,o){return 2===arguments.length&&(o=t,t=l),Array.isArray(e)?new g(e,o,t)._iterate():e&&"object"==typeof e?new u(e,o,t)._iterate():n.resolve([])}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleLimit"),l=a.DEFAULT_LIMIT,s=a.AigleLimitArray,p=a.AigleLimitObject,g=function(e){function t(t,o,r){e.call(this,t,o,r);var i=this,n=i._rest;0===n?this._value=[]:this._result=Array(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[t]=e,0===--this._rest?this._resolve(this._result):this._index<this._size&&this._next()},t}(s),u=function(e){function t(t,o,r){e.call(this,t,o,r);var i=this,n=i._rest;0===n?this._value=[]:this._result=Array(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[t]=e,0===--this._rest?this._resolve(this._result):this._index<this._size&&this._next()},t}(p);t.exports={mapLimit:r,MapLimitArray:g,MapLimitObject:u}},{"./aigle":2,"./internal/aigleLimit":24}],31:[function(e,t,o){"use strict";function r(e,t){return Array.isArray(e)?new l(e,t,1)._iterate():e&&"object"==typeof e?new s(e,t,1)._iterate():n.resolve([])}var i=e("./aigle"),n=i.Aigle,a=e("./mapLimit"),l=a.MapLimitArray,s=a.MapLimitObject;t.exports=r},{"./aigle":2,"./mapLimit":30}],32:[function(e,t,o){"use strict";function r(e,t){return Array.isArray(e)?new p(e,t)._iterate():e&&"object"==typeof e?new g(e,t)._iterate():n.resolve({})}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleEach"),l=a.AigleEachArray,s=a.AigleEachObject,p=function(e){function t(t,o){e.call(this,t,o),0===this._rest?this._value={}:this._result={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[t]=e,0===--this._rest&&this._resolve(this._result)},t}(l),g=function(e){function t(t,o){e.call(this,t,o),0===this._rest?this._value={}:this._result={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[this._keys[t]]=e,0===--this._rest&&this._resolve(this._result)},t}(s);t.exports=r},{"./aigle":2,"./internal/aigleEach":23}],33:[function(e,t,o){"use strict";function r(e,t,o){return 2===arguments.length&&(o=t,t=l),Array.isArray(e)?new g(e,o,t)._iterate():e&&"object"==typeof e?new u(e,o,t)._iterate():n.resolve({})}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleLimit"),l=a.DEFAULT_LIMIT,s=a.AigleLimitArray,p=a.AigleLimitObject,g=function(e){function t(t,o,r){e.call(this,t,o,r),0===this._rest?this._value={}:this._result={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[t]=e,0===--this._rest?this._resolve(this._result):this._index<this._size&&this._next()},t}(s),u=function(e){function t(t,o,r){e.call(this,t,o,r),0===this._rest?this._value={}:this._result={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[this._keys[t]]=e,0===--this._rest?this._resolve(this._result):this._index<this._size&&this._next()},t}(p);t.exports={mapValuesLimit:r,MapValuesLimitArray:g,MapValuesLimitObject:u}},{"./aigle":2,"./internal/aigleLimit":24}],34:[function(e,t,o){"use strict";function r(e,t){return Array.isArray(e)?new l(e,t,1)._iterate():e&&"object"==typeof e?new s(e,t,1)._iterate():n.resolve({})}var i=e("./aigle"),n=i.Aigle,a=e("./mapValuesLimit"),l=a.MapValuesLimitArray,s=a.MapValuesLimitObject;t.exports=r},{"./aigle":2,"./mapValuesLimit":33}],35:[function(e,t,o){"use strict";function r(e,t){return Array.isArray(e)?new p(e,t)._iterate():e&&"object"==typeof e?new g(e,t)._iterate():n.resolve({})}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleEach"),l=a.AigleEachArray,s=a.AigleEachObject,p=function(e){function t(t,o){e.call(this,t,o);var r=this,i=r._rest;0===i?this._value={}:this._result={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){e||(this._result[t]=this._array[t]),0===--this._rest&&this._resolve(this._result)},t}(l),g=function(e){function t(t,o){e.call(this,t,o);var r=this,i=r._rest;0===i?this._value={}:this._result={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){if(!e){var o=this._keys[t];this._result[o]=this._object[o]}0===--this._rest&&this._resolve(this._result)},t}(s);t.exports=r},{"./aigle":2,"./internal/aigleEach":23}],36:[function(e,t,o){"use strict";function r(e,t,o){return 2===arguments.length&&(o=t,t=l),Array.isArray(e)?new g(e,o,t)._iterate():e&&"object"==typeof e?new u(e,o,t)._iterate():n.resolve({})}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleLimit"),l=a.DEFAULT_LIMIT,s=a.AigleLimitArray,p=a.AigleLimitObject,g=function(e){function t(t,o,r){e.call(this,t,o,r);var i=this,n=i._rest;0===n?this._value={}:this._result={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){e||(this._result[t]=this._array[t]),0===--this._rest?this._resolve(this._result):this._index<this._size&&this._next()},t}(s),u=function(e){function t(t,o,r){e.call(this,t,o,r);var i=this,n=i._rest;0===n?this._value={}:this._result={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){if(!e){var o=this._keys[t];this._result[o]=this._object[o]}0===--this._rest?this._resolve(this._result):this._index<this._size&&this._next()},t}(p);t.exports={omitLimit:r,OmitLimitArray:g,OmitLimitObject:u}},{"./aigle":2,"./internal/aigleLimit":24}],37:[function(e,t,o){"use strict";function r(e,t){return Array.isArray(e)?new l(e,t,1)._iterate():e&&"object"==typeof e?new s(e,t,1)._iterate():n.resolve({})}var i=e("./aigle"),n=i.Aigle,a=e("./omitLimit"),l=a.OmitLimitArray,s=a.OmitLimitObject;t.exports=r},{"./aigle":2,"./omitLimit":36}],38:[function(e,t,o){"use strict";function r(e){return Array.isArray(e)?new l(e):e&&"object"==typeof e?new p(e):n.resolve({})}var i=e("./aigle"),n=i.Aigle,a=e("./all"),l=a.AigleAll,s=e("./props"),p=s.AigleProps;t.exports=r},{"./aigle":2,"./all":3,"./props":44}],39:[function(e,t,o){"use strict";function r(e,t){return Array.isArray(e)?new p(e,t)._iterate():e&&"object"==typeof e?new g(e,t)._iterate():n.resolve({})}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleEach"),l=a.AigleEachArray,s=a.AigleEachObject,p=function(e){function t(t,o){e.call(this,t,o);var r=this,i=r._rest;0===i?this._value={}:this._result={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){e&&(this._result[t]=this._array[t]),0===--this._rest&&this._resolve(this._result)},t}(l),g=function(e){function t(t,o){e.call(this,t,o);var r=this,i=r._rest;0===i?this._value={}:this._result={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){if(e){var o=this._keys[t];this._result[o]=this._object[o]}0===--this._rest&&this._resolve(this._result)},t}(s);t.exports=r},{"./aigle":2,"./internal/aigleEach":23}],40:[function(e,t,o){"use strict";function r(e,t,o){return 2===arguments.length&&(o=t,t=l),Array.isArray(e)?new g(e,o,t)._iterate():e&&"object"==typeof e?new u(e,o,t)._iterate():n.resolve({})}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleLimit"),l=a.DEFAULT_LIMIT,s=a.AigleLimitArray,p=a.AigleLimitObject,g=function(e){function t(t,o,r){e.call(this,t,o,r);var i=this,n=i._rest;0===n?this._value={}:this._result={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){e&&(this._result[t]=this._array[t]),0===--this._rest?this._resolve(this._result):this._index<this._size&&this._next()},t}(s),u=function(e){function t(t,o,r){e.call(this,t,o,r);var i=this,n=i._rest;0===n?this._value={}:this._result={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){if(e){var o=this._keys[t];this._result[o]=this._object[o]}0===--this._rest?this._resolve(this._result):this._index<this._size&&this._next()},t}(p);t.exports={pickLimit:r,PickLimitArray:g,PickLimitObject:u}},{"./aigle":2,"./internal/aigleLimit":24}],41:[function(e,t,o){"use strict";function r(e,t){return Array.isArray(e)?new l(e,t,1)._iterate():e&&"object"==typeof e?new s(e,t,1)._iterate():n.resolve({})}var i=e("./aigle"),n=i.Aigle,a=e("./pickLimit"),l=a.PickLimitArray,s=a.PickLimitObject;t.exports=r},{"./aigle":2,"./pickLimit":40}],42:[function(e,t,o){"use strict";function r(e,t){switch(typeof e){case"object":switch(typeof t){case"string":case"number":return n(e,t);default:throw new TypeError("Second argument is invalid")}case"function":var o=t&&void 0!==t.context?t.context:void 0;return a(e,o);default:throw new TypeError("Type of first argument is not function")}}function i(e){return function(t,o){t?e._reject(t):e._resolve(o)}}function n(e,t){function o(o){var r=arguments,n=new s(g),a=i(n),l=arguments.length;switch(l){case 0:e[t](a);break;case 1:e[t](o,a);break;default:for(var p=Array(l);l--;)p[l]=r[l];p[p.length]=a,e[t].apply(e,p)}return n}return o}function a(e,t){function o(o){var r=arguments,n=new s(g),a=i(n),l=arguments.length;switch(l){case 0:t?e.call(t,a):e(a);break;case 1:t?e.call(t,o,a):e(o,a);break;default:for(var p=Array(l);l--;)p[l]=r[l];p[p.length]=a,e.apply(t,p)}return n}return o}var l=e("./aigle"),s=l.Aigle,p=e("./internal/util"),g=p.INTERNAL;t.exports=r},{"./aigle":2,"./internal/util":27}],43:[function(e,t,o){"use strict";function r(e,t){var o=t||{},r=o.suffix;void 0===r&&(r="Async");var a=o.filter;void 0===a&&(a=i);var l=o.depth;return void 0===l&&(l=2),n(r,a,e,void 0,void 0,l),e}function i(e){return/^_/.test(e)}function n(e,t,o,r,i,n){var s={};switch(typeof o){case"function":if(i){var p=""+r+e;if(i[p])throw new TypeError("Cannot promisify an API that has normal methods with '"+e+"'-suffix");i[p]=l(o)}a(e,t,o,o,n,s),
a(e,t,o.prototype,o.prototype,n,s);break;case"object":a(e,t,o,o,n,s),a(e,t,Object.getPrototypeOf(o),o,n,s)}}function a(e,t,o,r,i,a){if(0!==i--&&o&&s!==o&&p!==o&&g!==o&&!Object.isFrozen(o))for(var l=Object.getOwnPropertyNames(o),u=l.length;u--;){var c=l[u];if(a[c]!==!0&&"constructor"!==c&&!t(c)){var y=Object.getOwnPropertyDescriptor(o,c);!y||y.set||y.get||(a[c]=!0,n(e,t,o[c],c,r,i))}}}var l=e("./promisify");t.exports=r;var s=Function.prototype,p=Object.prototype,g=Array.prototype},{"./promisify":42}],44:[function(e,t,o){"use strict";function r(e){return new s(e)}var i=e("./aigle"),n=i.AigleProxy,a=e("./internal/util"),l=a.promiseObjectEach,s=function(e){function t(t){e.call(this),l(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[t]=e,0===--this._rest&&this._resolve(this._result)},t}(n);t.exports={props:r,AigleProps:s}},{"./aigle":2,"./internal/util":27}],45:[function(e,t,o){"use strict";function r(e){return new s(e)}var i=e("./aigle"),n=i.AigleProxy,a=e("./internal/util"),l=a.promiseArrayEach,s=function(e){function t(t){e.call(this),l(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e){0===this._resolved&&this._resolve(e)},t}(n);t.exports=r},{"./aigle":2,"./internal/util":27}],46:[function(e,t,o){"use strict";function r(e,t,o){return void 0===o&&"function"==typeof t&&(o=t,t=void 0),Array.isArray(e)?new g(e,o,t):e&&"object"==typeof e?new u(e,o,t):n.resolve(t)}var i=e("./aigle"),n=i.Aigle,a=i.AigleProxy,l=e("./internal/util"),s=l.call3,p=l.callProxyReciever,g=function(e){function t(t,o,r){e.call(this);var i=t.length;return 0===i?void this._resolve(r):(this._rest=i,this._array=t,this._iterator=o,void(void 0===r?this._callResolve(t[0],0):this._next(0,r)))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._next=function(e,t){p(s(this._iterator,t,this._array[e],e),this,e)},t.prototype._callResolve=function(e,t){0===--this._rest?this._resolve(e):this._next(++t,e)},t}(a),u=function(e){function t(t,o,r){e.call(this);var i=Object.keys(t),n=i.length;return 0===n?void this._resolve(r):(this._rest=n,this._keys=i,this._object=t,this._iterator=o,void(void 0===r?this._callResolve(t[i[0]],0):this._next(0,r)))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._next=function(e,t){var o=this._keys[e];p(s(this._iterator,t,this._object[o],o),this,e)},t.prototype._callResolve=function(e,t){0===--this._rest?this._resolve(e):this._next(++t,e)},t}(a);t.exports=r},{"./aigle":2,"./internal/util":27}],47:[function(e,t,o){"use strict";function r(e,t){return Array.isArray(e)?new c(e,t)._iterate():e&&"object"==typeof e?new y(e,t)._iterate():n.resolve([])}var i=e("./aigle"),n=i.Aigle,a=e("./internal/util"),l=a.INTERNAL,s=a.compactArray,p=e("./internal/aigleEach"),g=p.AigleEachArray,u=p.AigleEachObject,c=function(e){function t(t,o){e.call(this,t,o);var r=this,i=r._rest;0===i?this._value=[]:this._result=Array(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[t]=e?l:this._array[t],0===--this._rest&&this._resolve(s(this._result))},t}(g),y=function(e){function t(t,o){e.call(this,t,o);var r=this,i=r._rest;0===i?this._value=[]:this._result=Array(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[t]=e?l:this._object[this._keys[t]],0===--this._rest&&this._resolve(s(this._result))},t}(u);t.exports=r},{"./aigle":2,"./internal/aigleEach":23,"./internal/util":27}],48:[function(e,t,o){"use strict";function r(e,t,o){return 2===arguments.length&&(o=t,t=g),Array.isArray(e)?new y(e,o,t)._iterate():e&&"object"==typeof e?new h(e,o,t)._iterate():n.resolve([])}var i=e("./aigle"),n=i.Aigle,a=e("./internal/util"),l=a.INTERNAL,s=a.compactArray,p=e("./internal/aigleLimit"),g=p.DEFAULT_LIMIT,u=p.AigleLimitArray,c=p.AigleLimitObject,y=function(e){function t(t,o,r){e.call(this,t,o,r);var i=this,n=i._rest;0===n?this._value=[]:this._result=Array(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[t]=e?l:this._array[t],0===--this._rest?this._resolve(s(this._result)):this._index<this._size&&this._next()},t}(u),h=function(e){function t(t,o,r){e.call(this,t,o,r);var i=this,n=i._rest;0===n?this._value=[]:this._result=Array(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[t]=e?l:this._object[this._keys[t]],0===--this._rest?this._resolve(s(this._result)):this._index<this._size&&this._next()},t}(c);t.exports={rejectLimit:r,RejectLimitArray:y,RejectLimitObject:h}},{"./aigle":2,"./internal/aigleLimit":24,"./internal/util":27}],49:[function(e,t,o){"use strict";function r(e,t){return Array.isArray(e)?new l(e,t,1)._iterate():e&&"object"==typeof e?new s(e,t,1)._iterate():n.resolve([])}var i=e("./aigle"),n=i.Aigle,a=e("./rejectLimit"),l=a.RejectLimitArray,s=a.RejectLimitObject;t.exports=r},{"./aigle":2,"./rejectLimit":48}],50:[function(e,t,o){"use strict";function r(e,t){return"function"==typeof e&&(t=e,e=p),new g(t,e)}var i=e("./aigle"),n=i.AigleProxy,a=e("./internal/util"),l=a.call0,s=a.callProxyReciever,p=5,g=function(e){function t(t,o){e.call(this),this._rest=o,this._handler=t,this._next()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._next=function(){s(l(this._handler),this,void 0)},t.prototype._callReject=function(e){0===--this._rest?this._reject(e):this._next()},t}(n);t.exports=r},{"./aigle":2,"./internal/util":27}],51:[function(e,t,o){"use strict";function r(e,t){return Array.isArray(e)?new p(e,t)._iterate():e&&"object"==typeof e?new g(e,t)._iterate():n.resolve(!1)}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleEach"),l=a.AigleEachArray,s=a.AigleEachObject,p=function(e){function t(t,o){e.call(this,t,o),0===this._rest&&(this._value=!1)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e){0===this._resolved&&(e?this._resolve(!0):0===--this._rest&&this._resolve(!1))},t}(l),g=function(e){function t(t,o){e.call(this,t,o),0===this._rest&&(this._value=!1)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e){0===this._resolved&&(e?this._resolve(!0):0===--this._rest&&this._resolve(!1))},t}(s);t.exports=r},{"./aigle":2,"./internal/aigleEach":23}],52:[function(e,t,o){"use strict";function r(e,t,o){return 2===arguments.length&&(o=t,t=l),Array.isArray(e)?new g(e,o,t)._iterate():e&&"object"==typeof e?new u(e,o,t)._iterate():n.resolve(!1)}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleLimit"),l=a.DEFAULT_LIMIT,s=a.AigleLimitArray,p=a.AigleLimitObject,g=function(e){function t(t,o,r){e.call(this,t,o,r),0===this._rest&&(this._value=!1)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e){0===this._resolved&&(e?this._resolve(!0):0===--this._rest?this._resolve(!1):this._index<this._size&&this._next())},t}(s),u=function(e){function t(t,o,r){e.call(this,t,o,r),0===this._rest&&(this._value=!1)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e){0===this._resolved&&(e?this._resolve(!0):0===--this._rest?this._resolve(!1):this._index<this._size&&this._next())},t}(p);t.exports=r},{"./aigle":2,"./internal/aigleLimit":24}],53:[function(e,t,o){"use strict";function r(e,t){return i(e,1,t)}var i=e("./someLimit");t.exports=r},{"./someLimit":52}],54:[function(e,t,o){"use strict";function r(e,t){return Array.isArray(e)?new u(e,t)._iterate():e&&"object"==typeof e?new c(e,t)._iterate():n.resolve([])}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleEach"),l=a.AigleEachArray,s=a.AigleEachObject,p=e("./internal/util"),g=p.sort,u=function(e){function t(t,o){e.call(this,t,o);var r=this,i=r._rest;0===i?this._value=[]:this._result=Array(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[t]={criteria:e,value:this._array[t]},0===--this._rest&&this._resolve(g(this._result))},t}(l),c=function(e){function t(t,o){e.call(this,t,o);var r=this,i=r._rest;0===i?this._value=[]:this._result=Array(i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[t]={criteria:e,value:this._object[this._keys[t]]},0===--this._rest&&this._resolve(g(this._result))},t}(s);t.exports=r},{"./aigle":2,"./internal/aigleEach":23,"./internal/util":27}],55:[function(e,t,o){"use strict";function r(e,t,o){return 2===arguments.length&&(o=t,t=l),Array.isArray(e)?new c(e,o,t)._iterate():e&&"object"==typeof e?new y(e,o,t)._iterate():n.resolve([])}var i=e("./aigle"),n=i.Aigle,a=e("./internal/aigleLimit"),l=a.DEFAULT_LIMIT,s=a.AigleLimitArray,p=a.AigleLimitObject,g=e("./internal/util"),u=g.sort,c=function(e){function t(t,o,r){e.call(this,t,o,r);var i=this,n=i._rest;0===n?this._value=[]:this._result=Array(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[t]={criteria:e,value:this._array[t]},0===--this._rest?this._resolve(u(this._result)):this._index<this._size&&this._next()},t}(s),y=function(e){function t(t,o,r){e.call(this,t,o,r);var i=this,n=i._rest;0===n?this._value=[]:this._result=Array(n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e,t){this._result[t]={criteria:e,value:this._object[this._keys[t]]},0===--this._rest?this._resolve(u(this._result)):this._index<this._size&&this._next()},t}(p);t.exports=r},{"./aigle":2,"./internal/aigleLimit":24,"./internal/util":27}],56:[function(e,t,o){"use strict";function r(e,t){return i(e,1,t)}var i=e("./sortByLimit");t.exports=r},{"./sortByLimit":55}],57:[function(e,t,o){"use strict";var r=e("./aigle"),i=r.AigleProxy,n=e("./error"),a=n.TimeoutError,l=function(e){function t(t,o){var r=this;e.call(this),this._message=o,this._timer=setTimeout(function(){o instanceof Error?r._reject(o):r._reject(new a("operation timed out"))},t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e){clearTimeout(this._timer),this._resolve(e)},t.prototype._callReject=function(e){clearTimeout(this._timer),this._reject(e)},t}(i);t.exports=l},{"./aigle":2,"./error":13}],58:[function(e,t,o){"use strict";function r(e,t){return new p(+e,t)._iterate()}var i=e("./aigle"),n=i.AigleProxy,a=e("./internal/util"),l=a.callProxyReciever,s=a.call1,p=function(e){function t(t,o){return e.call(this),isNaN(t)||t<1?void this._resolve([]):(this._rest=t,this._result=Array(t),void(this._iterator=o))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._iterate=function(){for(var e=-1,t=this,o=t._rest;++e<o&&l(s(this._iterator,e),this,e););return this},t.prototype._callResolve=function(e,t){this._result[t]=e,0===--this._rest&&this._resolve(this._result)},t}(n);t.exports=r},{"./aigle":2,"./internal/util":27}],59:[function(e,t,o){"use strict";function r(e,t,o){return"function"==typeof t&&(o=t,t=l),new g(+e,o,+t)._iterate()}var i=e("./aigle"),n=i.AigleProxy,a=e("./internal/util"),l=a.DEFAULT_LIMIT,s=a.callProxyReciever,p=a.call1,g=function(e){function t(t,o,r){return e.call(this),isNaN(t)||t<1||isNaN(t)||r<1?(this._limit=0,this._rest=0,void this._resolve([])):(this._index=0,this._limit=r>t?t:r,this._rest=t,this._size=t,this._result=Array(t),void(this._iterator=o))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._iterate=function(){for(var e=this;this._limit--;)e._next();return this},t.prototype._next=function(){var e=this._index++;s(p(this._iterator,e),this,e)},t.prototype._callResolve=function(e,t){0===this._resolved&&(this._result[t]=e,0===--this._rest?this._resolve(this._result):this._index<this._size&&this._next())},t}(n);t.exports=r},{"./aigle":2,"./internal/util":27}],60:[function(e,t,o){"use strict";function r(e,t){return i(e,1,t)}var i=e("./timesLimit");t.exports=r},{"./timesLimit":59}],61:[function(e,t,o){"use strict";function r(e,t,o){return Array.isArray(e)?(void 0===o&&"function"==typeof t&&(o=t,t=[]),new c(e,o,t)):e&&"object"==typeof e?(void 0===o&&"function"==typeof t&&(o=t,t={}),new y(e,o,t)):n.resolve(2===arguments.length?{}:t)}var i=e("./aigle"),n=i.Aigle,a=i.AigleProxy,l=e("./internal/util"),s=l.clone,p=e("./internal/util"),g=p.call3,u=p.callProxyReciever,c=function(e){function t(t,o,r){e.call(this);var i=t.length;return 0===i?void this._resolve(r):(this._rest=i,this._array=t,this._iterator=o,this._result=r,void this._iterate())}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._iterate=function(){for(var e=-1,t=this,o=t._rest,r=t._array,i=t._iterator,n=t._result;++e<o&&u(g(i,n,r[e],e),this,e););},t.prototype._callResolve=function(e){if(e===!1){if(0!==this._resolved)return;this._resolve(s(this._result))}else 0===--this._rest&&this._resolve(this._result)},t}(a),y=function(e){function t(t,o,r){e.call(this);var i=Object.keys(t),n=i.length;return 0===n?void this._resolve(r):(this._rest=n,this._keys=i,this._object=t,this._iterator=o,this._result=r,void this._iterate())}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._iterate=function(){for(var e=this,t=-1,o=this,r=o._rest,i=o._object,n=o._keys,a=o._iterator,l=o._result;++t<r;){var s=n[t];if(u(g(a,l,i[s],s),e,t)===!1)break}},t.prototype._callResolve=function(e){if(e===!1){if(0!==this._resolved)return;this._resolve(s(this._result))}else 0===--this._rest&&this._resolve(this._result)},t}(a);t.exports=r},{"./aigle":2,"./internal/util":27}],62:[function(e,t,o){"use strict";function r(e,t,o,r){void 0===r&&("function"==typeof o?(r=o,o=void 0):"function"==typeof t&&(r=t,o=void 0,t=void 0));var i=Array.isArray(e);return"object"==typeof t&&void 0===o?(o=t,t=s):void 0===t&&(t=s),void 0===o&&(o=i?[]:{}),i?new c(e,r,o,t):e&&"object"==typeof e?new y(e,r,o,t):n.resolve(o)}var i=e("./aigle"),n=i.Aigle,a=i.AigleProxy,l=e("./internal/util"),s=l.DEFAULT_LIMIT,p=l.call3,g=l.callProxyReciever,u=l.clone,c=function(e){function t(t,o,r,i){var n=this;e.call(this);var a=t.length;if(0===a||isNaN(i)||i<1)return void this._resolve(r);for(i=i>a?a:i,this._index=0,this._rest=a,this._size=a,this._array=t,this._iterator=o,this._result=r;i--;)n._next()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._next=function(){var e=this._index++;g(p(this._iterator,this._result,this._array[e],e),this,e)},t.prototype._callResolve=function(e){0===this._resolved&&(e===!1?this._resolve(u(this._result)):0===--this._rest?this._resolve(this._result):this._index<this._size&&this._next())},t}(a),y=function(e){function t(t,o,r,i){var n=this;e.call(this);var a=Object.keys(t),l=a.length;if(0===l||isNaN(i)||i<1)return void this._resolve(r);for(i=i>l?l:i,this._index=0,this._rest=l,this._size=l,this._keys=a,this._object=t,this._iterator=o,this._result=r;i--;)n._next()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._next=function(){var e=this._index++,t=this._keys[e];g(p(this._iterator,this._result,this._object[t],t),this,e)},t.prototype._callResolve=function(e){0===this._resolved&&(e===!1?this._resolve(u(this._result)):0===--this._rest?this._resolve(this._result):this._index<this._size&&this._next())},t}(a);t.exports=r},{"./aigle":2,"./internal/util":27}],63:[function(e,t,o){"use strict";function r(e,t,o){return i(e,1,t,o)}var i=e("./transformLimit");t.exports=r},{"./transformLimit":62}],64:[function(e,t,o){"use strict";function r(e,t,o){return"function"!=typeof o&&(o=t,t=e,e=void 0),new n(new l(t),o)._iterate(e)}var i=e("./whilst"),n=i.AigleWhilst,a=i.WhilstTester,l=function(e){function t(t){e.call(this,t)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._callResolve=function(e){e?this._promise._resolve(this._promiseValue):this._promise._next(this._promiseValue)},t}(a);t.exports={until:r,UntilTester:l}},{"./whilst":65}],65:[function(e,t,o){"use strict";function r(e,t,o){return"function"!=typeof o&&(o=t,t=e,e=void 0),new g(new p(t),o)._iterate(e)}var i=e("./aigle"),n=i.AigleProxy,a=e("./internal/util"),l=a.callProxyReciever,s=a.call1,p=function(e){function t(t){e.call(this),this._tester=t,this._promise=void 0,this._promiseValue=void 0}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._test=function(e){this._promiseValue=e,l(s(this._tester,e),this,void 0)},t.prototype._callResolve=function(e){e?this._promise._next(this._promiseValue):this._promise._resolve(this._promiseValue)},t.prototype._callReject=function(e){this._promise._callReject(e)},t}(n),g=function(e){function t(t,o){e.call(this),t._promise=this,this._tester=t,this._iterator=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._iterate=function(e){return this._callResolve(e),this},t.prototype._next=function(e){l(s(this._iterator,e),this,void 0)},t.prototype._callResolve=function(e){this._tester._test(e)},t}(n);t.exports={whilst:r,AigleWhilst:g,WhilstTester:p}},{"./aigle":2,"./internal/util":27}],66:[function(e,t,o){"use strict";var r=function(){};t.exports=r},{}],67:[function(e,t,o){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function n(e){if(u===setTimeout)return setTimeout(e,0);if((u===r||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function a(e){if(c===clearTimeout)return clearTimeout(e);if((c===i||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}function l(){f&&h&&(f=!1,h.length?d=h.concat(d):m=-1,d.length&&s())}function s(){if(!f){var e=n(l);f=!0;for(var t=d.length;t;){for(h=d,d=[];++m<t;)h&&h[m].run();m=-1,t=d.length}h=null,f=!1,a(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}var u,c,y=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:r}catch(e){u=r}try{c="function"==typeof clearTimeout?clearTimeout:i}catch(e){c=i}}();var h,d=[],f=!1,m=-1;y.nextTick=function(e){var t=arguments,o=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)o[r-1]=t[r];d.push(new p(e,o)),1!==d.length||f||n(s)},p.prototype.run=function(){this.fun.apply(null,this.array)},y.title="browser",y.browser=!0,y.env={},y.argv=[],y.version="",y.versions={},y.on=g,y.addListener=g,y.once=g,y.off=g,y.removeListener=g,y.removeAllListeners=g,y.emit=g,y.binding=function(e){throw new Error("process.binding is not supported")},y.cwd=function(){return"/"},y.chdir=function(e){throw new Error("process.chdir is not supported")},y.umask=function(){return 0}},{}],68:[function(e,t,o){(function(e,t){!function(t,o){"use strict";function r(e){var t=arguments;"function"!=typeof e&&(e=new Function(""+e));for(var o=new Array(arguments.length-1),r=0;r<o.length;r++)o[r]=t[r+1];var i={callback:e,args:o};return d[h]=i,y(h),h++}function i(e){delete d[e]}function n(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(o,r)}}function a(e){if(f)setTimeout(a,0,e);else{var t=d[e];if(t){f=!0;try{n(t)}finally{i(e),f=!1}}}}function l(){y=function(t){e.nextTick(function(){a(t)})}}function s(){if(t.postMessage&&!t.importScripts){var e=!0,o=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=o,e}}function p(){var e="setImmediate$"+Math.random()+"$",o=function(o){o.source===t&&"string"==typeof o.data&&0===o.data.indexOf(e)&&a(+o.data.slice(e.length))};t.addEventListener?t.addEventListener("message",o,!1):t.attachEvent("onmessage",o),y=function(o){t.postMessage(e+o,"*")}}function g(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;a(t)},y=function(t){e.port2.postMessage(t)}}function u(){var e=m.documentElement;y=function(t){var o=m.createElement("script");o.onreadystatechange=function(){a(t),o.onreadystatechange=null,e.removeChild(o),o=null},e.appendChild(o)}}function c(){y=function(e){setTimeout(a,0,e)}}if(!t.setImmediate){var y,h=1,d={},f=!1,m=t.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(t);v=v&&v.setTimeout?v:t,"[object process]"==={}.toString.call(t.process)?l():s()?p():t.MessageChannel?g():m&&"onreadystatechange"in m.createElement("script")?u():c(),v.setImmediate=r,v.clearImmediate=i}}("undefined"==typeof self?"undefined"==typeof t?this:t:self)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:67}]},{},[1])(1)}),define("ol-custom",["ol3","aigle"],function(e,t){e.proj.transformDirect=function(t,o,r){r||(r=o,o=t,t=null);var i=o.getCode?o.getCode():o,n=r.getCode?r.getCode():r,a=e.proj.getTransform(o,r);if(a==e.proj.identityTransform&&i!=n){var l=e.proj.getTransform(o,"EPSG:3857"),s=e.proj.getTransform("EPSG:3857",r);if(l==e.proj.identityTransform&&"EPSG:3857"!=i)throw"Transform of Source projection is not defined.";if(s==e.proj.identityTransform&&"EPSG:3857"!=n)throw"Transform of Distination projection is not defined.";a=function(t){return e.proj.transform(e.proj.transform(t,o,"EPSG:3857"),"EPSG:3857",r)};var p=function(t){return e.proj.transform(e.proj.transform(t,r,"EPSG:3857"),"EPSG:3857",o)};e.proj.addCoordinateTransforms(o,r,a,p)}if(t)return a(t)},e.View.prototype.getDecimalZoom=function(){var e,t=this.getResolution();return e=Math.log(this.maxResolution_/t)/Math.log(2),void 0!==e?this.minZoom_+e:e},e.control.SliderCommon=function(t){var o=t?t:{};this.direction_=e.control.SliderCommon.Direction_.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.previousX_,this.previousY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==o.duration?o.duration:200,this.reverse_=void 0!==o.reverse&&o.reverse;var r=void 0!==o.className?o.className:"ol-slidercommon",i=document.createElement("button");i.setAttribute("type","button"),i.className=r+"-thumb "+e.css.CLASS_UNSELECTABLE;var n=document.createElement("div");n.className=r+" "+e.css.CLASS_UNSELECTABLE+" "+e.css.CLASS_CONTROL,n.appendChild(i),this.dragger_=new e.pointer.PointerEventHandler(n),e.events.listen(this.dragger_,e.pointer.EventType.POINTERDOWN,this.handleDraggerStart_,this),e.events.listen(this.dragger_,e.pointer.EventType.POINTERMOVE,this.handleDraggerDrag_,this),e.events.listen(this.dragger_,e.pointer.EventType.POINTERUP,this.handleDraggerEnd_,this),e.events.listen(i,e.events.EventType.CLICK,e.events.Event.stopPropagation);var a=o.render?o.render:e.control.SliderCommon.render;e.control.Control.call(this,{element:n,render:a}),e.events.listen(this.element,e.events.EventType.MOUSEOUT,this.handleDraggerEnd_,this)},e.inherits(e.control.SliderCommon,e.control.Control),e.control.SliderCommon.prototype.disposeInternal=function(){this.dragger_.dispose(),e.control.Control.prototype.disposeInternal.call(this)},e.control.SliderCommon.Direction_={VERTICAL:0,HORIZONTAL:1},e.control.SliderCommon.prototype.setMap=function(t){e.control.Control.prototype.setMap.call(this,t),t&&t.render()},e.control.SliderCommon.prototype.initSlider_=function(){var t=this.element,o={width:t.offsetWidth,height:t.offsetHeight},r=t.firstElementChild,i=getComputedStyle(r),n=r.offsetWidth+parseFloat(i.marginRight)+parseFloat(i.marginLeft),a=r.offsetHeight+parseFloat(i.marginTop)+parseFloat(i.marginBottom);this.thumbSize_=[n,a],o.width>o.height?(this.direction_=e.control.SliderCommon.Direction_.HORIZONTAL,this.widthLimit_=o.width-n):(this.direction_=e.control.SliderCommon.Direction_.VERTICAL,this.heightLimit_=o.height-a),this.setValue(0),this.sliderInitialized_=!0},e.control.SliderCommon.render=function(e){e.frameState&&(this.sliderInitialized_||this.initSlider_())},e.control.SliderCommon.prototype.handleContainerClick_=function(e){var t=this.getRelativePosition_(e.offsetX-this.thumbSize_[0]/2,e.offsetY-this.thumbSize_[1]/2);this.setThumbPosition_(t)},e.control.SliderCommon.prototype.handleDraggerStart_=function(t){this.dragging_||t.originalEvent.target!==this.element.firstElementChild||this.element.classList.contains("disable")||(this.getMap().getView().setHint(e.ViewHint.INTERACTING,1),this.previousX_=t.clientX,this.previousY_=t.clientY,this.dragging_=!0)},e.control.SliderCommon.prototype.handleDraggerDrag_=function(e){if(this.dragging_){var t=this.element.firstElementChild,o=e.clientX-this.previousX_+(parseInt(t.style.left,10)||0),r=e.clientY-this.previousY_+(parseInt(t.style.top,10)||0),i=this.getRelativePosition_(o,r);this.setThumbPosition_(i),this.previousX_=e.clientX,this.previousY_=e.clientY}},e.control.SliderCommon.prototype.handleDraggerEnd_=function(t){if(this.dragging_){var o=this.getMap().getView();o.setHint(e.ViewHint.INTERACTING,-1),this.dragging_=!1,this.previousX_=void 0,this.previousY_=void 0}},e.control.SliderCommon.prototype.setThumbPosition_=function(t){var o=this.element.firstElementChild;this.direction_==e.control.SliderCommon.Direction_.HORIZONTAL?o.style.left=this.widthLimit_*t+"px":o.style.top=this.heightLimit_*t+"px",this.set("slidervalue",this.reverse_?1-t:t)},e.control.SliderCommon.prototype.getRelativePosition_=function(t,o){var r;return r=this.direction_===e.control.SliderCommon.Direction_.HORIZONTAL?t/this.widthLimit_:o/this.heightLimit_,e.math.clamp(r,0,1)},e.control.SliderCommon.prototype.setValue=function(e){e=this.reverse_?1-e:e,this.setThumbPosition_(e)},e.control.SliderCommon.prototype.setEnable=function(e){var t=this.element;e?t.classList.remove("disable"):t.classList.add("disable")},e.control.CustomControl=function(t){var o=t||{},r=document.createElement("button");r.setAttribute("type","button");var i=document.createElement("span");i.innerHTML=o.character,r.appendChild(i),r.addEventListener("click",o.callback,!1);var n=document.createElement("div");n.className=o.cls+" ol-unselectable ol-control",n.appendChild(r),e.control.Control.call(this,{element:n,target:o.target,render:o.render})},e.inherits(e.control.CustomControl,e.control.Control),e.control.GoHome=function(t){var o=t||{};o.character='<i class="fa fa-home fa-lg"></i>',o.cls="home";var r=this;o.callback=function(){var e=r.getMap().getLayers().item(0).getSource();e.goHome()},e.control.CustomControl.call(this,o)},e.inherits(e.control.GoHome,e.control.CustomControl),e.control.SetGPS=function(t){var o=t||{};o.character='<i class="fa fa-crosshairs fa-lg"></i>',o.cls="gps";var r=this;o.render=function(e){var t=e.frameState;if(t){var o=this.getMap();if(o.geolocation){var i=o.geolocation.getTracking(),n=r.element.classList.contains("receiving_gps");n&&!i?this.element.classList.remove("receiving_gps"):!n&&i&&this.element.classList.add("receiving_gps")}}},o.callback=function(){var e=r.element.classList.contains("receiving_gps"),t=r.getMap();t.handleGPS(!e),e?r.element.classList.remove("receiving_gps"):r.element.classList.add("receiving_gps")},e.control.CustomControl.call(this,o)},e.inherits(e.control.SetGPS,e.control.CustomControl),e.control.CompassRotate=function(t){var o=t||{};o.autoHide=!1;var r=document.createElement("span");r.innerHTML='<i class="fa fa-compass fa-lg ol-compass-fa"></i>',o.label=r,o.render=function(e){var t=e.frameState;if(t){var o=this.getMap().getView(),r=t.viewState.rotation,i=o.getCenter(),n=o.getDecimalZoom();if(r!=this.rotation_||i[0]!=this.center_[0]||i[1]!=this.center_[1]||n!=this.zoom_){var a=this.element.classList.contains("no_rotation");a||0!==r?a&&0!==r&&this.element.classList.remove("no_rotation"):this.element.classList.add("no_rotation");var l=this,s=this.getMap().getLayers().item(0),p=s.getSource?s.getSource():s.getLayers().item(0).getSource();if(!p){var g="rotate(0rad)";return l.label_.style.msTransform=g,l.label_.style.webkitTransform=g,void(l.label_.style.transform=g)}p.size2MercsAsync().then(function(e){var t=p.mercs2MercRotation(e),o="rotate("+t+"rad)";l.label_.style.msTransform=o,l.label_.style.webkitTransform=o,l.label_.style.transform=o})}this.rotation_=r,this.center_=i,this.zoom_=n}},e.control.Rotate.call(this,o),this.center_=[],this.zoom_=void 0},e.inherits(e.control.CompassRotate,e.control.Rotate),e.control.GoHome=function(t){var o=t||{};o.character='<i class="fa fa-home fa-lg"></i>',o.cls="home";var r=this;o.callback=function(){var e=r.getMap().getLayers().item(0).getSource();e.goHome()},e.control.CustomControl.call(this,o)},e.inherits(e.control.GoHome,e.control.CustomControl),e.control.Maplat=function(t){var o=t||{};o.character='<img src="parts/Maplat.png">',o.cls="ol-maplat";o.callback=function(){window.open("https://github.com/code4nara/Maplat/wiki")},e.control.CustomControl.call(this,o)},e.inherits(e.control.Maplat,e.control.CustomControl),e.const=e.const?e.const:{},e.const.MERC_MAX=20037508.342789244,e.const.MERC_CROSSMATRIX=[[0,0],[0,1],[1,0],[0,-1],[-1,0]];var o=new e.style.Style({image:new e.style.Icon({anchor:[.5,.5],anchorXUnits:"fraction",anchorYUnits:"fraction",src:"parts/bluedot.png"})}),r=new e.style.Style({fill:new e.style.Fill({color:[128,128,256,.2]}),stroke:new e.style.Stroke({color:[128,128,256,1],width:3})}),i=new e.style.Style({image:new e.style.Icon({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:"parts/defaultpin.png"})});return e.source.setCustomFunction=function(o){o.prototype.getMap=function(){return this._map},o.prototype.goHome=function(){var t=e.proj.transform(this.home_position,"EPSG:4326","EPSG:3857"),o=this._map,r=o.getView(),i=this.mercsFromGivenZoom(t,this.merc_zoom);this.mercs2SizeAsync(i).then(function(e){r.setCenter(e[0]),r.setZoom(e[1]),r.setRotation(0)})},o.prototype.setGPSMarkerAsync=function(e,o){var r=this,i=r.getMap(),n=i.getView(),a=e?r.mercsFromGPSValue(e.lnglat,e.acc):["dummy"];return t.all(a.map(function(e,t){return 5==t||"dummy"==e?e:r.merc2XyAsync(e)})).then(function(e){var t=null;if("dummy"!=e[0]){if(t={xy:e[0]},!r.insideCheckHistMapCoords(e[0]))return i.handleGPS(!1,!0),!1;var a=e.slice(1);t.rad=a.reduce(function(e,o,r){var i=e+Math.sqrt(Math.pow(o[0]-t.xy[0],2)+Math.pow(o[1]-t.xy[1],2));return 3==r?i/4:i},0),o||n.setCenter(t.xy)}return i.setGPSPosition(t),!0}).catch(function(e){throw e})},o.prototype.setGPSMarker=function(e,t){this.setGPSMarkerAsync(e,t).then(function(){})},o.prototype.getRadius=function(t){var o=Math.floor(Math.min(t[0],t[1])/4),r=this._map.getView().getDecimalZoom();return o*e.const.MERC_MAX/128/Math.pow(2,r)},o.prototype.mercsFromGivenZoom=function(t,o){var r=this._map.getSize(),i=Math.floor(Math.min(r[0],r[1])/4),n=i*e.const.MERC_MAX/128/Math.pow(2,o);return e.const.MERC_CROSSMATRIX.map(function(e){return[e[0]*n+t[0],e[1]*n+t[1]]})},o.prototype.mercsFromGPSValue=function(t,o){var r=e.proj.transform(t,"EPSG:4326","EPSG:3857"),i=t[1]*Math.PI/180,n=o/Math.cos(i);return e.const.MERC_CROSSMATRIX.map(function(e){return[e[0]*n+r[0],e[1]*n+r[1]]})},o.prototype.rotateMatrix=function(e){for(var t=1*this._map.getView().getRotation(),o=[],r=0;r<e.length;r++){var i=e[r],n=i[0]*Math.cos(t)-i[1]*Math.sin(t),a=i[0]*Math.sin(t)+i[1]*Math.cos(t);o.push([n,a])}return o},o.prototype.size2Xys=function(t){t||(t=this._map.getView().getCenter());
var o=this._map.getSize(),r=this.getRadius(o),i=this.rotateMatrix(e.const.MERC_CROSSMATRIX),n=i.map(function(e){return[e[0]*r+t[0],e[1]*r+t[1]]});return n.push(o),n},o.prototype.size2MercsAsync=function(e){var o=this.size2Xys(e),r=this,i=o.map(function(e,t){return 5==t?e:r.xy2MercAsync(e)});return t.all(i).catch(function(e){throw e})},o.prototype.mercs2SizeAsync=function(e){var o=this,r=e.map(function(e,t){return 5==t?e:o.merc2XyAsync(e)});return t.all(r).then(function(e){return o.xys2Size(e)}).catch(function(e){throw e})},o.prototype.xys2Size=function(t){for(var o=t[0],r=t[5],i=t.slice(1,5),n=i.map(function(e){return[e[0]-o[0],e[1]-o[1]]}),a=[[0,1],[1,0],[0,-1],[-1,0]],l=0,s=0,p=0,g=0;g<4;g++){var u=n[g],c=a[g],y=Math.sqrt(Math.pow(u[0],2)+Math.pow(u[1],2));l+=y;var h=u[0]*c[1]-u[1]*c[0],d=Math.acos((u[0]*c[0]+u[1]*c[1])/y),f=h>0?-1*d:d;s+=Math.cos(f),p+=Math.sin(f)}var m=l/4,v=Math.atan2(p,s);r||(r=this._map.getSize());var _=Math.floor(Math.min(r[0],r[1])/4),S=Math.log(_*e.const.MERC_MAX/128/m)/Math.log(2);return[o,S,v]},o.prototype.mercs2MercRotation=function(e){for(var t=e[0],o=e.slice(1,5),r=o.map(function(e){return[e[0]-t[0],e[1]-t[1]]}),i=[[0,1],[1,0],[0,-1],[-1,0]],n=0,a=0,l=0;l<4;l++){var s=r[l],p=i[l],g=Math.sqrt(Math.pow(s[0],2)+Math.pow(s[1],2)),u=s[0]*p[1]-s[1]*p[0],c=Math.acos((s[0]*p[0]+s[1]*p[1])/g),y=u>0?-1*c:c;n+=Math.cos(y),a+=Math.sin(y)}return Math.atan2(a,n)}},e.source.setCustomInitialize=function(e,t){e.sourceID=t.sourceID,e.map_option=t.map_option||{},e.home_position=t.home_position,e.merc_zoom=t.merc_zoom,e.fake_gps=t.fake_gps||!1,e.thumbnail=t.thumbnail||"./tmbs/"+(t.mapID||t.sourceID)+"_menu.jpg",e.label=t.label},e.source.NowMap=function(t){var o=t||{};e.source.OSM.call(this,o),e.source.setCustomInitialize(this,o)},e.inherits(e.source.NowMap,e.source.OSM),e.source.NowMap.createAsync=function(o){return new t(function(t,r){var i=new e.source.NowMap(o);t(i)}).catch(function(e){throw e})},e.source.setCustomFunction(e.source.NowMap),e.source.NowMap.prototype.xy2MercAsync=function(e){return new t(function(t,o){t(e)})},e.source.NowMap.prototype.merc2XyAsync=function(e){return new t(function(t,o){t(e)})},e.source.NowMap.prototype.insideCheckXy=function(e){return!0},e.source.NowMap.prototype.insideCheckHistMapCoords=function(e){return!0},e.source.TmsMap=function(t){var o=t||{};e.source.NowMap.call(this,o)},e.inherits(e.source.TmsMap,e.source.NowMap),e.source.TmsMap.createAsync=function(o){var r=new t(function(t,r){var i=new e.source.TmsMap(o);t(i)});return r.catch(function(e){throw e})},e.MaplatMap=function(t){t=t||{};var o=new e.layer.Vector({source:new e.source.Vector({wrapX:!1})});o.set("name","gps");var r=new e.layer.Vector({source:new e.source.Vector({wrapX:!1})});r.set("name","marker");var i=t.baseLayer?t.baseLayer:new e.layer.Tile({source:t.source});i.set("name","base");var n=this._overlay_group=new e.layer.Group;n.set("name","overlay"),this.sliderCommon=new e.control.SliderCommon({reverse:!0});var a=t.controls?t.controls:t.off_control?[]:[new e.control.Attribution,new e.control.CompassRotate,new e.control.Zoom,new e.control.SetGPS,new e.control.GoHome,this.sliderCommon,new e.control.Maplat],l={controls:a,layers:[i,n,o,r],target:t.div,view:new e.View({center:t.default_center||[0,0],zoom:t.default_zoom||2,rotation:t.default_rotation||0})};t.interactions?l.interactions=t.interactions:t.off_rotation&&(l.interactions=e.interaction.defaults({altShiftDragRotate:!1,pinchRotate:!1})),e.Map.call(this,l);var s=this.getView(),p=this;p.__AvoidFirstMoveStart=!0;var g=function(){p.__AvoidFirstMoveStart||p.dispatchEvent("movestart"),p.__AvoidFirstMoveStart=!1,s.un("propertychange",g)};s.on("propertychange",g),p.on("moveend",function(){s.on("propertychange",g)})},e.inherits(e.MaplatMap,e.Map),e.MaplatMap.prototype.getLayer=function(e){e||(e="base");var t=function(o){var r=o.getArray().map(function(o){return o.get("name")==e?o:o.getLayers?t(o.getLayers()):void 0}).filter(function(e){return e});if(0!=r.length)return r[0]};return t(this.getLayers())},e.MaplatMap.prototype.getSource=function(e){var t=this.getLayer(e);if(t)return t.getSource()},e.MaplatMap.prototype.setGPSPosition=function(t){var i=this.getSource("gps");if(i.clear(),t){var n=new e.Feature({geometry:new e.geom.Point(t.xy)});n.setStyle(o);var a=new e.Feature({geometry:new e.geom.Circle(t.xy,t.rad)});a.setStyle(r),i.addFeature(n),i.addFeature(a)}},e.MaplatMap.prototype.resetMarker=function(){var e=this.getSource("marker");e.clear()},e.MaplatMap.prototype.setMarker=function(t,o,r){var n=this.getSource("marker");o.geometry=new e.geom.Point(t);var a=new e.Feature(o);r?"string"==typeof r&&(r=new e.style.Style({image:new e.style.Icon({anchor:[.5,1],anchorXUnits:"fraction",anchorYUnits:"fraction",src:r})})):r=i,a.setStyle(r),n.addFeature(a)},e.MaplatMap.prototype.setLine=function(t){var o=this.getSource("marker"),r=new e.Feature({geometry:new e.geom.LineString(t),name:"Line"});o.addFeature(r)},e.MaplatMap.prototype.exchangeSource=function(e){var t=this.getLayers(),o=t.item(0);o.setSource(e),e&&(e._map=this)},e.MaplatMap.prototype.setLayer=function(t){var o=this.getLayer("overlay").getLayers();if(o.clear(),t){var r=new e.layer.Tile({source:t});o.push(r)}},e.MaplatMap.prototype.setOpacity=function(t){var o=(100-t)/100,r=this.getSource();r instanceof e.source.NowMap?(this.getLayers().item(0).setOpacity(1),this.getLayers().item(1).setOpacity(o)):this.getLayers().item(0).setOpacity(o)},e.MaplatMap.prototype.handleGPS=function(t,o){if(t)if(this.dispatchEvent("gps_request"),this._first_gps_request=!0,this.geolocation)this.geolocation.setTracking(!0);else{var r=this.geolocation=new e.Geolocation({tracking:!0}),i=this;r.on("change",function(t){var o=i.getLayers().item(0).getSource(),n=r.getPosition(),a=r.getAccuracy();o.fake_gps&&e.MathEx.getDistance(o.home_position,n)>o.fake_gps&&(n=[e.MathEx.randomFromCenter(o.home_position[0],.001),e.MathEx.randomFromCenter(o.home_position[1],.001)],a=e.MathEx.randomFromCenter(15,10));var l={lnglat:n,acc:a};o.setGPSMarkerAsync(l,!i._first_gps_request).then(function(t){t||(l={error:"gps_out"}),i._first_gps_request=!1,i.dispatchEvent(new e.MapEvent("gps_result",i,l))})}),r.on("error",function(t){var o=i.getLayers().item(0).getSource(),r=null;if(o.fake_gps){var n=[e.MathEx.randomFromCenter(o.home_position[0],.001),e.MathEx.randomFromCenter(o.home_position[1],.001)],a=e.MathEx.randomFromCenter(15,10);r={lnglat:n,acc:a}}o.setGPSMarkerAsync(r,!i._first_gps_request).then(function(t){t||(r={error:"gps_out"}),i._first_gps_request=!1,i.dispatchEvent(new e.MapEvent("gps_result",i,r))})})}else{this.geolocation&&this.geolocation.setTracking(!1);var n=this.getLayers().item(0).getSource();n.setGPSMarker(),o||this.dispatchEvent(new e.MapEvent("gps_result",i,{error:"gps_off"}))}},e.MathEx={},e.MathEx.randomFromCenter=function(e,t){return e+(Math.random()-.5)*t},e.MathEx.recursiveRound=function(t,o){if(t instanceof Array)return t.map(function(t){return e.MathEx.recursiveRound(t,o)});var r=Math.pow(10,o);return Math.round(t*r)/r},e.MathEx.getDistance=function(e,t){function o(e){return e*Math.PI/180}return 6378.14*Math.acos(Math.cos(o(e[1]))*Math.cos(o(t[1]))*Math.cos(o(t[0])-o(e[0]))+Math.sin(o(e[1]))*Math.sin(o(t[1])))},e}),define("histmap",["ol-custom","aigle"],function(e,t){for(var o=0;o<9;o++){var r="ZOOM:"+o,i=256*Math.pow(2,o);!function(t,o){var r=new e.proj.Projection({code:t,extent:[0,0,o,o],units:"m"});e.proj.addProjection(r),e.proj.addCoordinateTransforms("EPSG:3857",r,function(t){var r=(t[0]+e.const.MERC_MAX)*o/(2*e.const.MERC_MAX),i=(-t[1]+e.const.MERC_MAX)*o/(2*e.const.MERC_MAX);return[r,i]},function(t){var r=t[0]*(2*e.const.MERC_MAX)/o-e.const.MERC_MAX,i=-1*(t[1]*(2*e.const.MERC_MAX)/o-e.const.MERC_MAX);return[r,i]})}(r,i)}var n,a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAAB3RJTUUH3QgIBToaSbAjlwAAABd0RVh0U29mdHdhcmUAR0xEUE5HIHZlciAzLjRxhaThAAAACHRwTkdHTEQzAAAAAEqAKR8AAAAEZ0FNQQAAsY8L/GEFAAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAAFRJREFUeNrtwQEBAAAAgJD+r+4ICgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgBDwABHHIJwwAAAABJRU5ErkJggg==",l=256,s=function(e){return e},p='<canvas width="'+l+'" height="'+l+'" src="'+a+'"></canvas>',g={osm:{mapID:"osm",label:"OSM(Now)",maptype:"base"},gsi:{mapID:"gsi",label:"GSI Map",attr:"The Geospatial Information Authority of Japan",maptype:"base",url:"https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png",maxZoom:18}},u={"OSM(Now)":{ja:"OSM(現在)"},"The Geospatial Information Authority of Japan":{ja:"国土地理院"},"GSI Map":{ja:"地理院地図"}};return e.source.HistMap=function(t){var o=t||{};o.wrapX=!1,o.imageExtention||(o.imageExtention="jpg"),o.mapID&&(this.mapID=o.mapID,o.url=o.url||"tiles/"+o.mapID+"/{z}/{x}/{y}."+o.imageExtention),o.urls?this._tileUrlFunction=e.TileUrlFunction.createFromTemplates(o.urls):o.url&&(this._tileUrlFunction=e.TileUrlFunction.createFromTemplates(e.TileUrlFunction.expandUrl(o.url))),this.width=o.width,this.height=o.height,this.title=o.title;var r=Math.log2(this.width/l),i=Math.log2(this.height/l);this.maxZoom=o.maxZoom=Math.ceil(Math.max(r,i)),this._maxxy=Math.pow(2,this.maxZoom)*l,o.tileUrlFunction=o.tileUrlFunction||function(e){var t=e[0],o=e[1],r=-1*e[2]-1;return o*l*Math.pow(2,this.maxZoom-t)>=this.width||r*l*Math.pow(2,this.maxZoom-t)>=this.height||o<0||r<0?a:this._tileUrlFunction(e)},e.source.XYZ.call(this,o),e.source.setCustomInitialize(this,o),this.setupTileLoadFunction()},e.inherits(e.source.HistMap,e.source.XYZ),e.source.HistMap.getTransPng=function(){return a},e.source.HistMap.setI18n=function(e,t){n=e,s=t,Object.keys(u).map(function(e){n.addResource("en","translation",e,e);var t=u[e];Object.keys(t).map(function(o){n.addResource(o,"translation",e,t[o])})})},e.source.HistMap.createAsync=function(o,r){if("string"==typeof o&&(o=g[o]),o=Object.assign(o,r),o.maptype||(o.maptype="maplat"),o.algorythm||(o.algorythm="tin"),o.label=s(o.label||o.year),o.attr&&(o.attributions=[new e.Attribution({html:s(o.attr)})]),"base"==o.maptype||"overlay"==o.maptype){o.sourceID=o.mapID;var i="base"==o.maptype?e.source.NowMap:e.source.TmsMap;return i.createAsync(Object.assign({url:o.url,sourceID:o.sourceID,label:o.label},o)).catch(function(e){throw e})}var n=o.algorythm||"tin";return new t(function(e,t){requirejs(["histmap_"+n],e)}).then(function(){return e.source["HistMap_"+n].createAsync(Object.assign({title:o.title||o.era,mapID:o.mapID,width:o.width,height:o.height,maptype:o.maptype,algorythm:o.algorythm,sourceID:o.sourceID||o.mapID+":"+o.maptype+":"+o.algorythm,label:o.label},o)).then(function(e){return new t(function(t,r){(!o.gcps||o.gcps.length<3)&&t(e),e.mapSize2MercSize(t)})}).catch(function(e){throw e})}).catch(function(e){throw e})},e.source.setCustomFunction(e.source.HistMap),e.source.HistMap.prototype.setupTileLoadFunction=function(e){var t=this;this.setTileLoadFunction(function(){var e=0,o=t.getTileLoadFunction();return function(t,r){++e;var i=t.getImage(),n=t.tImage;n||(n=document.createElement("img"),n.crossOrigin="Anonymous",t.tImage=n),n.onload=n.onerror=function(){if(n.width&&n.height)if(n.width!=l||n.height!=l){var a=document.createElement("div");a.innerHTML=p;var s=a.childNodes[0],g=s.getContext("2d");g.drawImage(n,0,0);var u=s.toDataURL();i.crossOrigin=null,o(t,u),s=n=g=null}else i.crossOrigin="Anonymous",o(t,r);--e},n.src=r}}())},e.source.HistMap.prototype.xy2MercAsync=function(e){var t=this.histMapCoords2Xy(e);return this.xy2MercAsync_(t)},e.source.HistMap.prototype.merc2XyAsync=function(e){var t=this;return this.merc2XyAsync_(e).then(function(e){return t.xy2HistMapCoords(e)}).catch(function(e){throw e})},e.source.HistMap.prototype.mapSize2MercSize=function(o){var r=[this.width/2,this.height/2],i=this;t.all([[r[0]-150,r[1]],[r[0]+150,r[1]],[r[0],r[1]-150],[r[0],r[1]+150],[r[0],r[1]]].map(function(e){return i.xy2MercAsync_(e)})).then(function(t){var r=Math.sqrt(Math.pow(t[0][0]-t[1][0],2)+Math.pow(t[0][1]-t[1][1],2)),n=Math.sqrt(Math.pow(t[2][0]-t[3][0],2)+Math.pow(t[2][1]-t[3][1],2)),a=(r+n)/2;i.merc_zoom=Math.log(300*(2*e.const.MERC_MAX)/256/a)/Math.log(2)-3,i.home_position=e.proj.toLonLat(t[4]),o(i)}).catch(function(e){throw e})},e.source.HistMap.prototype.histMapCoords2Xy=function(t){var o=(t[0]+e.const.MERC_MAX)*this._maxxy/(2*e.const.MERC_MAX),r=(-t[1]+e.const.MERC_MAX)*this._maxxy/(2*e.const.MERC_MAX);return[o,r]},e.source.HistMap.prototype.xy2HistMapCoords=function(t){var o=t[0]*(2*e.const.MERC_MAX)/this._maxxy-e.const.MERC_MAX,r=-1*(t[1]*(2*e.const.MERC_MAX)/this._maxxy-e.const.MERC_MAX);return[o,r]},e.source.HistMap.prototype.insideCheckXy=function(e){return!(e[0]<0||e[0]>this.width||e[1]<0||e[1]>this.height)},e.source.HistMap.prototype.insideCheckHistMapCoords=function(e){return this.insideCheckXy(this.histMapCoords2Xy(e))},e});var assert,exports={};exports.Buffer=Buffer,exports.SlowBuffer=Buffer,Buffer.poolSize=8192,exports.INSPECT_MAX_BYTES=50,Buffer.prototype.get=function(e){if(e<0||e>=this.length)throw new Error("oob");return this[e]},Buffer.prototype.set=function(e,t){if(e<0||e>=this.length)throw new Error("oob");return this[e]=t},Buffer.byteLength=function(e,t){switch(t||"utf8"){case"hex":return e.length/2;case"utf8":case"utf-8":return utf8ToBytes(e).length;case"ascii":case"binary":return e.length;case"base64":return base64ToBytes(e).length;default:throw new Error("Unknown encoding")}},Buffer.prototype.utf8Write=function(e,t,o){return Buffer._charsWritten=blitBuffer(utf8ToBytes(e),this,t,o)},Buffer.prototype.asciiWrite=function(e,t,o){return Buffer._charsWritten=blitBuffer(asciiToBytes(e),this,t,o)},Buffer.prototype.binaryWrite=Buffer.prototype.asciiWrite,Buffer.prototype.base64Write=function(e,t,o){return Buffer._charsWritten=blitBuffer(base64ToBytes(e),this,t,o)},Buffer.prototype.base64Slice=function(e,t){var o=Array.prototype.slice.apply(this,arguments);return require("base64-js").fromByteArray(o)},Buffer.prototype.utf8Slice=function(){for(var e=Array.prototype.slice.apply(this,arguments),t="",o="",r=0;r<e.length;)e[r]<=127?(t+=decodeUtf8Char(o)+String.fromCharCode(e[r]),o=""):o+="%"+e[r].toString(16),r++;return t+decodeUtf8Char(o)},Buffer.prototype.asciiSlice=function(){for(var e=Array.prototype.slice.apply(this,arguments),t="",o=0;o<e.length;o++)t+=String.fromCharCode(e[o]);return t},Buffer.prototype.binarySlice=Buffer.prototype.asciiSlice,Buffer.prototype.inspect=function(){for(var e=[],t=this.length,o=0;o<t;o++)if(e[o]=toHex(this[o]),o==exports.INSPECT_MAX_BYTES){e[o+1]="...";break}return"<Buffer "+e.join(" ")+">"},Buffer.prototype.hexSlice=function(e,t){var o=this.length;(!e||e<0)&&(e=0),(!t||t<0||t>o)&&(t=o);for(var r="",i=e;i<t;i++)r+=toHex(this[i]);return r},Buffer.prototype.toString=function(e,t,o){if(e=String(e||"utf8").toLowerCase(),t=+t||0,"undefined"==typeof o&&(o=this.length),+o==t)return"";switch(e){case"hex":return this.hexSlice(t,o);case"utf8":case"utf-8":return this.utf8Slice(t,o);case"ascii":return this.asciiSlice(t,o);case"binary":return this.binarySlice(t,o);case"base64":return this.base64Slice(t,o);case"ucs2":case"ucs-2":return this.ucs2Slice(t,o);default:throw new Error("Unknown encoding")}},Buffer.prototype.hexWrite=function(e,t,o){t=+t||0;var r=this.length-t;o?(o=+o,o>r&&(o=r)):o=r;var i=e.length;if(i%2)throw new Error("Invalid hex string");o>i/2&&(o=i/2);for(var n=0;n<o;n++){var a=parseInt(e.substr(2*n,2),16);if(isNaN(a))throw new Error("Invalid hex string");this[t+n]=a}return Buffer._charsWritten=2*n,n},Buffer.prototype.write=function(e,t,o,r){if(isFinite(t))isFinite(o)||(r=o,o=void 0);else{var i=r;r=t,t=o,o=i}t=+t||0;var n=this.length-t;switch(o?(o=+o,o>n&&(o=n)):o=n,r=String(r||"utf8").toLowerCase()){case"hex":return this.hexWrite(e,t,o);case"utf8":case"utf-8":return this.utf8Write(e,t,o);case"ascii":return this.asciiWrite(e,t,o);case"binary":return this.binaryWrite(e,t,o);case"base64":return this.base64Write(e,t,o);case"ucs2":case"ucs-2":return this.ucs2Write(e,t,o);default:throw new Error("Unknown encoding")}},Buffer.prototype.slice=function(e,t){var o=this.length;return e=clamp(e,o,0),t=clamp(t,o,o),new Buffer(this,t-e,+e)},Buffer.prototype.copy=function(e,t,o,r){var i=this;if(o||(o=0),(void 0===r||isNaN(r))&&(r=this.length),t||(t=0),r<o)throw new Error("sourceEnd < sourceStart");if(r===o)return 0;if(0==e.length||0==i.length)return 0;if(t<0||t>=e.length)throw new Error("targetStart out of bounds");if(o<0||o>=i.length)throw new Error("sourceStart out of bounds");if(r<0||r>i.length)throw new Error("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-o&&(r=e.length-t+o);for(var n=[],a=o;a<r;a++)assert.ok("undefined"!=typeof this[a],"copying undefined buffer bytes!"),n.push(this[a]);for(var a=t;a<t+n.length;a++)e[a]=n[a-t]},Buffer.prototype.fill=function(e,t,o){if(e||(e=0),t||(t=0),o||(o=this.length),"string"==typeof e&&(e=e.charCodeAt(0)),"number"!=typeof e||isNaN(e))throw new Error("value is not a number");if(o<t)throw new Error("end < start");if(o===t)return 0;if(0==this.length)return 0;if(t<0||t>=this.length)throw new Error("start out of bounds");if(o<0||o>this.length)throw new Error("end out of bounds");for(var r=t;r<o;r++)this[r]=e},Buffer.isBuffer=function(e){return e instanceof Buffer},Buffer.concat=function(e,t){if(!isArray(e))throw new Error("Usage: Buffer.concat(list, [totalLength])\n       list should be an Array.");if(0===e.length)return new Buffer(0);if(1===e.length)return e[0];if("number"!=typeof t){t=0;for(var o=0;o<e.length;o++){var r=e[o];t+=r.length}}for(var i=new Buffer(t),n=0,o=0;o<e.length;o++){var r=e[o];r.copy(i,n),n+=r.length}return i},Buffer.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},Buffer.prototype.readUInt8=function(e,t){var o=this;if(t||(assert.ok(void 0!==e&&null!==e,"missing offset"),assert.ok(e<o.length,"Trying to read beyond buffer length")),!(e>=o.length))return o[e]},Buffer.prototype.readUInt16LE=function(e,t){return readUInt16(this,e,!1,t)},Buffer.prototype.readUInt16BE=function(e,t){return readUInt16(this,e,!0,t)},Buffer.prototype.readUInt32LE=function(e,t){return readUInt32(this,e,!1,t)},Buffer.prototype.readUInt32BE=function(e,t){return readUInt32(this,e,!0,t)},Buffer.prototype.readInt8=function(e,t){var o,r=this;if(t||(assert.ok(void 0!==e&&null!==e,"missing offset"),assert.ok(e<r.length,"Trying to read beyond buffer length")),!(e>=r.length))return o=128&r[e],o?(255-r[e]+1)*-1:r[e]},Buffer.prototype.readInt16LE=function(e,t){return readInt16(this,e,!1,t)},Buffer.prototype.readInt16BE=function(e,t){return readInt16(this,e,!0,t)},Buffer.prototype.readInt32LE=function(e,t){return readInt32(this,e,!1,t)},Buffer.prototype.readInt32BE=function(e,t){return readInt32(this,e,!0,t)},Buffer.prototype.readFloatLE=function(e,t){return readFloat(this,e,!1,t)},Buffer.prototype.readFloatBE=function(e,t){return readFloat(this,e,!0,t)},Buffer.prototype.readDoubleLE=function(e,t){return readDouble(this,e,!1,t)},Buffer.prototype.readDoubleBE=function(e,t){return readDouble(this,e,!0,t)},Buffer.prototype.writeUInt8=function(e,t,o){var r=this;o||(assert.ok(void 0!==e&&null!==e,"missing value"),assert.ok(void 0!==t&&null!==t,"missing offset"),assert.ok(t<r.length,"trying to write beyond buffer length"),verifuint(e,255)),t<r.length&&(r[t]=e)},Buffer.prototype.writeUInt16LE=function(e,t,o){writeUInt16(this,e,t,!1,o)},Buffer.prototype.writeUInt16BE=function(e,t,o){writeUInt16(this,e,t,!0,o)},Buffer.prototype.writeUInt32LE=function(e,t,o){writeUInt32(this,e,t,!1,o)},Buffer.prototype.writeUInt32BE=function(e,t,o){writeUInt32(this,e,t,!0,o)},Buffer.prototype.writeInt8=function(e,t,o){var r=this;o||(assert.ok(void 0!==e&&null!==e,"missing value"),assert.ok(void 0!==t&&null!==t,"missing offset"),assert.ok(t<r.length,"Trying to write beyond buffer length"),verifsint(e,127,-128)),e>=0?r.writeUInt8(e,t,o):r.writeUInt8(255+e+1,t,o)},Buffer.prototype.writeInt16LE=function(e,t,o){writeInt16(this,e,t,!1,o)},Buffer.prototype.writeInt16BE=function(e,t,o){writeInt16(this,e,t,!0,o)},Buffer.prototype.writeInt32LE=function(e,t,o){writeInt32(this,e,t,!1,o)},Buffer.prototype.writeInt32BE=function(e,t,o){writeInt32(this,e,t,!0,o)},Buffer.prototype.writeFloatLE=function(e,t,o){writeFloat(this,e,t,!1,o)},Buffer.prototype.writeFloatBE=function(e,t,o){writeFloat(this,e,t,!0,o)},Buffer.prototype.writeDoubleLE=function(e,t,o){writeDouble(this,e,t,!1,o)},Buffer.prototype.writeDoubleBE=function(e,t,o){writeDouble(this,e,t,!0,o)},define("buffer",function(e){return function(){var t;return t||e.exports}}(this)),function(){function e(){this.mx=this.my=1,this.bx=this.by=0}function t(){arguments.length>0&&this.setBounds.apply(this,arguments)}function o(e,t){Ke.isNumber(e)?e=new ArrayBuffer(e):"function"==typeof Qe&&e instanceof Qe&&(e=o.toArrayBuffer(e)),e instanceof ArrayBuffer==0&&i("BinArray constructor takes an integer, ArrayBuffer or Buffer argument"),this._buffer=e,this._bytes=new Uint8Array(e),this._view=new DataView(e),this._idx=0,this._le=t!==!1}function r(e,t){var o,r=t[1],i=t[2],n=t[3]?parseInt(t[3].substr(1)):void 0,a=t[4],l="s"==a,s="x"==a||"X"==a,p="d"==a||"i"==a,g=!l,u="",c=0,y=!1,h=!1;if(l?o=String(e):s?(o=e.toString(16),"X"==a&&(o=o.toUpperCase())):g&&(o=Ke.numToStr(e,p?0:n),"-"==o[0]&&(h=!0,o=o.substr(1)),y=0==parseFloat(o),r.indexOf("'")==-1&&r.indexOf(",")==-1||(o=Ke.addThousandsSep(o)),y||(h?u="−":r.indexOf("+")!=-1&&(u="+"))),i){var d=o.length+u.length,f=parseInt(i,10);if(d<f){c=f-d;var m=r.indexOf("0")==-1?" ":"0",v=Ke.repeatString(m,c)}}return o=0==c?u+o:"0"==m?u+v+o:v+u+o}function i(){Je.error.apply(null,Xe.toArray(arguments))}function n(){Je.stop.apply(null,l(arguments))}function a(e){var t=new Error(e);return t.name="APIError",t}function l(e){var t=Xe.toArray(e);return Je.CURR_CMD&&t.unshift("["+Je.CURR_CMD+"]"),t}function s(){Je.message.apply(null,l(arguments))}function p(){Je.VERBOSE&&Je.logArgs(arguments)}function g(){Je.TRACING&&Je.logArgs(arguments)}function u(e){return e>=0?e:~e}function c(e){return e*et*$e}function y(e,t,o,r,i,n){var a=e-r,l=t-i,s=o-n;return Math.sqrt(a*a+l*l+s*s)}function h(e,t,o,r){var i=e-o,n=t-r;return i*i+n*n}function d(e,t,o,r){var i=e-o,n=t-r;return Math.sqrt(i*i+n*n)}function f(e,t,o,r,i,n){var a=e-r,l=t-i,s=o-n;return a*a+l*l+s*s}function m(e,t,o,r){for(var i,n=-1,a=1/0,l=0,s=2,p=arguments.length;s<p;l++,s+=2)i=h(e,t,arguments[s],arguments[s+1]),i<a&&(a=i,n=l);return n}function v(e,t,o,r,i,n){var a=Math.atan2(t-r,e-o),l=Math.atan2(n-r,i-o),s=Math.abs(a-l);return s>Math.PI&&(s=2*Math.PI-s),s}function _(e){for(var t=2*Math.PI;e<0;)e+=t;for(;e>=t;)e-=t;return e}function S(e,t,o,r,i,n){if(e==o&&t==r||o==i&&r==n)return NaN;var a=e-o,l=t-r,s=i-o,p=n-r,g=a*s+l*p,u=a*p-l*s,c=Math.atan2(u,g);return _(c)}function x(e,t,o,r){var i=Math.PI/180;e*=i,o*=i,t*=i,r*=i;var n=Math.sin(o-e)*Math.cos(r),a=Math.cos(t)*Math.sin(r)-Math.sin(t)*Math.cos(r)*Math.cos(o-e);return Math.atan2(n,a)}function E(e,t,o,r,i,n){if(e==o&&t==r||o==i&&r==n)return NaN;var a=x(o,r,e,t),l=x(o,r,i,n),s=2*Math.PI+a-l;return _(s)}function P(e,t,o,r,i){for(var n=[],a=0,l=e.length;a<l;a++)R(e[a],t[a],n),o[a]=n[0],r[a]=n[1],i[a]=n[2]}function T(e,t,o,r){var i=y(0,0,0,e,t,o),n=Math.asin(o/i)/et,a=Math.atan2(t/i,e/i)/et;r[0]=a,r[1]=n}function R(e,t,o){var r;e*=et,t*=et,r=Math.cos(t),o[0]=Math.cos(e)*r*$e,o[1]=Math.sin(e)*r*$e,o[2]=Math.sin(t)*$e}function L(e,t,o,r){var i=o-e,n=r-t,a=Math.sin(n/2)*Math.sin(n/2)+Math.cos(t)*Math.cos(r)*Math.sin(i/2)*Math.sin(i/2),l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return l}function M(e,t,o,r){var i=Math.PI/180,n=L(e*i,t*i,o*i,r*i);return n*$e}function C(e,t,o,r,i,n){var a,l,s=d(e,t,o,r),p=d(o,r,i,n);return 0===s||0===p?a=0:(l=((e-o)*(i-o)+(t-r)*(n-r))/(s*p),a=l>=1-1e-14?0:l<=-1+1e-14?Math.PI:Math.acos(l)),a}function b(e,t,o,r,i,n,a,l,s){var p,g,u=y(e,t,o,r,i,n),c=y(r,i,n,a,l,s);return 0===u||0===c?p=0:(g=((e-r)*(a-r)+(t-i)*(l-i)+(o-n)*(s-n))/(u*c),p=g>=1?0:g<=-1?Math.PI:Math.acos(g)),p}function I(e,t,o,r,i,n){var a=Math.abs(((t-n)*(o-i)+(r-n)*(i-e))/2);return a}function A(e,t,o,r,i,n){var a=e*r-e*n+o*n-o*t+i*t-i*r;return a*a}function w(e,t,o,r,i,n){var a=d(e,t,o,r)*d(o,r,i,n),l=0;return a>0&&(l=((e-o)*(i-o)+(t-r)*(n-r))/a,l>1?l=1:l<-1&&(l=-1)),l}function O(e,t,o,r,i,n,a,l,s){var p=y(e,t,o,r,i,n)*y(r,i,n,a,l,s),g=0;return p>0&&(g=((e-r)*(a-r)+(t-i)*(l-i)+(o-n)*(s-n))/p,g>1?g=1:g<-1&&(g=-1)),g}function F(e,t,o,r,i,n,a,l,s){var p=.5*Math.sqrt(A(e,t,r,i,a,l)+A(e,o,r,n,a,s)+A(t,o,i,n,l,s));return p}function N(e,t,o){var r;if(0===o)r=e;else if(e>=t+o)r=t;else if(t>=e+o)r=e;else{var i=e+o-t;r=e-i*i/o*.25}return r<0&&(r=0),r}function G(e,t,o,r,i,n){var a=h(e,t,o,r),l=h(e,t,i,n),s=h(o,r,i,n);return N(a,l,s)}function D(e,t,o,r,i,n,a,l,s){var p=f(e,t,o,r,i,n),g=f(e,t,o,a,l,s),u=f(r,i,n,a,l,s);return N(p,g,u)}function k(e,t){return e[0]<=t[0]&&e[2]>=t[2]&&e[1]<=t[1]&&e[3]>=t[3]}function j(e,t){this._i=0,this._n=0,this._inc=1,this._xx=e,this._yy=t,this.i=0,this.x=0,this.y=0}function q(e,t,o){var r=0,i=0,n=1,a=0;this.init=function(e,t,o,l){return r=l||0,o?(i=e,n=1,a=e+t):(i=e+t-1,n=-1,a=e-1),this},this.hasNext=function(){var l=o,s=i,p=s,g=r,u=a,c=n;if(s==u)return!1;do p+=c;while(p!=u&&l[p]<g);return i=p,this.x=e[s],this.y=t[s],this.i=s,!0}}function U(e){this._arcs=e,this._i=0,this._n=0,this.x=0,this.y=0}function B(){function e(e){var t=[],r=[],i=e.map(function(e){for(var o=e?e.length:0,i=0;i<o;i++)t.push(e[i][0]),r.push(e[i][1]);return o});o(i,t,r)}function o(e,t,o){var r=e.length;e instanceof Array&&(e=new Uint32Array(e)),t instanceof Array&&(t=new Float64Array(t)),o instanceof Array&&(o=new Float64Array(o)),c=t,y=o,d=e,f=null,x=0,S=null,h=new Uint32Array(r);for(var a=0,l=0;l<r;l++)h[l]=a,a+=e[l];return a==c.length&&c.length==y.length||i("ArcCollection#initXYData() Counting error"),n(),_=new j(c,y),this}function r(e){e?(e.length!=c.length&&i("ArcCollection#initZData() mismatched arrays"),e instanceof Array&&(e=new Float64Array(e)),f=e,S=new q(c,y,f)):(f=null,x=0,S=null)}function n(){var e=a(c,y,d);m=e.bb,v=e.bounds}function a(e,o,r){for(var i,n,a,l=r.length,s=new Float64Array(4*l),p=new t,g=0,u=0;u<l;u++)i=r[u],i>0&&(n=4*u,a=Je.calcArcBounds(e,o,g,i),s[n++]=a[0],s[n++]=a[1],s[n++]=a[2],s[n]=a[3],g+=i,p.mergeBounds(a));return{bb:s,bounds:p}}function l(){var e=f,t=x;if(!e||!t)return this.getPointCount();for(var o=0,r=0,i=e.length;r<i;r++)e[r]>=t&&o++;return o}function s(){for(var e,t,o=l(),r=d.length,n=new Float64Array(o),a=new Float64Array(o),s=new Float64Array(o),p=new Int32Array(r),g=0,u=0,h=0;h<r;h++){t=0,e=d[h];for(var m=g+e;g<m;g++)f[g]>=x&&(n[u]=c[g],a[u]=y[g],s[u]=f[g],u++,t++);t<2&&i("Collapsed arc"),p[h]=t}return{xx:n,yy:a,zz:s,nn:p}}function p(e){for(var t,i,n=0,a=0,l=Xe.copyElements,s=0,p=e.length;s<p;s++)t=e[s],i=d[s],t>-1&&(l(c,h[s],c,n,i),l(y,h[s],y,n,i),f&&l(f,h[s],f,n,i),d[t]=i,n+=i,a++);o(d.subarray(0,a),c.subarray(0,n),y.subarray(0,n)),f&&r(f.subarray(0,n))}function g(e,t){var o=new Float64Array(t),r=0;return e.forEach(function(e){for(var t=0,i=e.length;t<i;r++,t++)o[r]=e[t]}),r!=t&&i("Mismatched thresholds"),o}var c,y,h,d,f,m,v,_,S,x=0;1==arguments.length?e(arguments[0]):3==arguments.length?o.apply(this,arguments):i("ArcCollection() Invalid arguments"),this.updateVertexData=function(e,t,i,n){o(e,t,i),r(n||null)},this.getVertexData=function(){return{xx:c,yy:y,zz:f,bb:m,nn:d,ii:h}},this.getCopy=function(){var e=new B(new Int32Array(d),new Float64Array(c),new Float64Array(y));return f&&(e.setThresholds(new Float64Array(f)),e.setRetainedInterval(x)),e},this.getFilteredCopy=function(){if(!f||0===x)return this.getCopy();var e=s(),t=new B(e.nn,e.xx,e.yy);return t.setThresholds(e.zz),t},this.toArray=function(){var e=[];return this.forEach(function(t){for(var o=[];t.hasNext();)o.push([t.x,t.y]);e.push(o)}),e},this.toJSON=function(){return this.toArray()},this.forEachArcSegment=function(e,t){for(var o=e>=0,r=o?e:~e,i=this.getRetainedInterval(),n=d[r],a=o?1:-1,l=o?h[r]:h[r]+n-1,s=l,p=0,g=1;g<n;g++)s+=a,(0===i||f[s]>=i)&&(t(l,s,c,y),l=s,p++);return p},this.forEachSegment=function(e){for(var t=0,o=0,r=this.size();o<r;o++)t+=this.forEachArcSegment(o,e);return t},this.transformPoints=function(e){for(var t,o=c,r=y,i=-1,a=0,l=0,s=o.length;l<s;l++,a--){for(;0===a;)a=d[++i];t=e(o[l],r[l],i),t&&(o[l]=t[0],r[l]=t[1])}n()},this.forEach=function(e){for(var t=0,o=this.size();t<o;t++)e(this.getArcIter(t),t)},this.forEach2=function(e){for(var t=0,o=this.size();t<o;t++)e(h[t],d[t],c,y,f,t)},this.forEach3=function(e){for(var t,o,r,i,n,a=0,l=this.size();a<l;a++)t=h[a],o=t+d[a],r=c.subarray(t,o),i=y.subarray(t,o),f&&(n=f.subarray(t,o)),e(r,i,n,a)},this.filter=function(e){for(var t=new Int32Array(this.size()),o=0,r=0,i=0,n=this.size();i<n;i++)e(this.getArcIter(i),i)?(t[i]=o++,r+=d[i]):t[i]=-1;return o===this.size()?null:(p(t),t)},this.dedupCoords=function(){for(var e,t,i=0,n=0,a=0,l=this.size(),s=f;i<l;)e=d[i],t=Je.dedupArcCoords(n,a,e,c,y,s),d[i]=t,n+=e,a+=t,i++;return n>a&&(o(d,c.subarray(0,a),y.subarray(0,a)),s&&r(s.subarray(0,a))),n-a},this.getVertex=function(e,t){var o=this.indexOfVertex(e,t);return{x:c[o],y:y[o]}},this.indexOfVertex=function(e,t){var o=e<0?~e:e,r=d[o];return t<0&&(t=r+t),o!=e&&(t=r-t-1),(t<0||t>=r)&&i("[ArcCollection] out-of-range vertex id"),h[o]+t},this.pointIsEndpoint=function(e){for(var t=h,o=d,r=0,i=t.length;r<i;r++)if(e===t[r]||e===t[r]+o[r]-1)return!0;return!1},this.arcIsClosed=function(e){var t=this.indexOfVertex(e,0),o=this.indexOfVertex(e,-1);return t!=o&&c[t]==c[o]&&y[t]==y[o]},this.arcIsLollipop=function(e){var t,o,r=this.getArcLength(e);return!(r<=2||!this.arcIsClosed(e))&&(t=this.indexOfVertex(e,1),o=this.indexOfVertex(e,-2),c[t]==c[o]&&y[t]==y[o])},this.arcIsDegenerate=function(e){for(var t,o,r=this.getArcIter(e),i=0;r.hasNext();){if(i>0&&(t!=r.x||o!=r.y))return!1;t=r.x,o=r.y,i++}return!0},this.getArcLength=function(e){return d[u(e)]},this.getArcIter=function(e){var t=e>=0,o=t?e:~e,r=f&&x?S:_;return o>=d.length&&i("#getArcId() out-of-range arc id:",e),r.init(h[o],d[o],t,x)},this.getShapeIter=function(e){return new U(this).init(e)},this.setThresholds=function(e){var t=this.getPointCount(),o=null;return e&&(e.length==t?o=e:e.length==this.size()?o=g(e,t):i("Invalid threshold data")),r(o),this},this.flatten=function(){if(x>0){var e=s();this.updateVertexData(e.nn,e.xx,e.yy),x=0}else f=null},this.getRetainedInterval=function(){return x},this.setRetainedInterval=function(e){return x=e,this},this.getRetainedPct=function(){return this.getPctByThreshold(x)},this.setRetainedPct=function(e){return e>=1?x=0:(x=this.getThresholdByPct(e),x=Je.clampIntervalByPct(x,e)),this},this.getRemovableThresholds=function(e){f||i("[arcs] Missing simplification data.");for(var t,o=1|e,r=new Float64Array(Math.ceil(f.length/o)),n=0,a=0,l=this.getPointCount();n<l;n+=o)t=f[n],t!=1/0&&(r[a++]=t);return r.subarray(0,a)},this.getArcThresholds=function(e){e>=0&&e<this.size()||i("[arcs] Invalid arc id:",e);var t=h[e],o=t+d[e];return f.subarray(t,o)},this.getPctByThreshold=function(e){var t,o,r;return e>0?(t=this.getRemovableThresholds(),o=Xe.findRankByValue(t,e),r=t.length>0?1-(o-1)/t.length:1):r=1,r},this.getThresholdByPct=function(e){var t,o,r=this.getRemovableThresholds();return t=0===r.length?0:Math.floor((1-e)*(r.length+2)),o=t<=0?0:t>r.length?1/0:Xe.findValueByRank(r,t)},this.arcIntersectsBBox=function(e,t){var o=m,r=4*e;return o[r]<=t[2]&&o[r+2]>=t[0]&&o[r+3]>=t[1]&&o[r+1]<=t[3]},this.arcIsContained=function(e,t){var o=m,r=4*e;return o[r]>=t[0]&&o[r+2]<=t[2]&&o[r+1]>=t[1]&&o[r+3]<=t[3]},this.arcIsSmaller=function(e,t){var o=m,r=4*e;return o[r+2]-o[r]<t&&o[r+3]-o[r+1]<t},this.isPlanar=function(){return!Je.probablyDecimalDegreeBounds(this.getBounds())},this.size=function(){return h&&h.length||0},this.getPointCount=function(){return c&&c.length||0},this.getBounds=function(){return v.clone()},this.getSimpleShapeBounds=function(e,o){o=o||new t;for(var r=0,i=e.length;r<i;r++)this.mergeArcBounds(e[r],o);return o},this.getSimpleShapeBounds2=function(e,t){
var o=t||[],r=m,i=4*u(e[0]);o[0]=r[i],o[1]=r[++i],o[2]=r[++i],o[3]=r[++i];for(var n=1,a=e.length;n<a;n++)i=4*u(e[n]),r[i]<o[0]&&(o[0]=r[i]),r[++i]<o[1]&&(o[1]=r[i]),r[++i]>o[2]&&(o[2]=r[i]),r[++i]>o[3]&&(o[3]=r[i]);return o},this.getMultiShapeBounds=function(e,o){if(o=o||new t,e)for(var r=0,i=e.length;r<i;r++)this.getSimpleShapeBounds(e[r],o);return o},this.mergeArcBounds=function(e,t){e<0&&(e=~e);var o=4*e;t.mergeBounds(m[o],m[o+1],m[o+2],m[o+3])}}function V(e,t){function o(){var o;return l||(o=Je.findNodeTopology(e,t),l=o.chains,2*g.length!=l.length&&i("[NodeCollection] count error")),l}function r(e,t){var o=e>=0?e:~e,r=t>=0?t:~t,i=g[o];return!(i<2)&&(i==g[r]&&!!(n(e,t,-1)&&n(e,t,1)&&n(e,t,-2)))}function n(t,o,r){var i=e.indexOfVertex(t,r),n=e.indexOfVertex(o,r);return c[i]==c[n]&&y[i]==y[n]}function a(e){var t=e>=0,r=t?e:~e,n=t?2*r+1:2*r,a=o(),l=a[n],s=l>>1,p=l&!0?s:~s;return(l<0||l>=a.length)&&i("out-of-range chain id"),r>=g.length&&i("out-of-range arc id"),a.length<=n&&i("out-of-bounds node id"),p}Xe.isArray(e)&&(e=new B(e));var l,p=e.getVertexData(),g=p.nn,c=p.xx,y=p.yy;Object.defineProperty(this,"arcs",{value:e}),this.toArray=function(){var o=Je.findNodeTopology(e,t),r=new Uint8Array(o.xx.length),i=[];return Xe.forEach(o.chains,function(e,t){if(1!=r[t])for(i.push([o.xx[t],o.yy[t]]);1!=r[e];)r[e]=1,e=o.chains[e]}),i},this.size=function(){return this.toArray().length},this.debugNode=function(t){function o(t){var o=t+": ",r=e.getArcLength(t);if(r>0){var i=e.getVertex(t,-1);if(o+=Xe.format("[%f, %f]",i.x,i.y),r>1){var n=e.getVertex(t,-2);if(o+=Xe.format(", [%f, %f]",n.x,n.y),r>2){var a=e.getVertex(t,0);o+=Xe.format(", [%f, %f]",a.x,a.y)}o+=" len: "+d(i.x,i.y,n.x,n.y)}}else o="[]";s(o)}var r=[t];this.forEachConnectedArc(t,function(e){r.push(e)}),s("node ids:",r),r.forEach(o)},this.forEachConnectedArc=function(e,t){for(var o=a(e),r=0;o!=e;)t(o,r++),o=a(o)},this.getConnectedArcs=function(e){for(var t=[],o=a(e);o!=e;)t.push(o),o=a(o);return t},this.findMatchingArc=function(e){for(var t=a(e),o=e;t!=e;)r(e,t)&&u(t)<u(o)&&(o=t),t=a(t);return o},this.internal={testArcMatch:r,testVertexMatch:n}}function W(e,t,o){function r(e,t,o){var r,i,n,a=c[o],l=0,s=h.xx,y=h.yy;r=o==u?p.length-a:c[o+1]-a;for(var d=0;d<r;d++)i=p[d+a],n=g[d+a],l+=tt.testRayIntersection(e,t,s[i],y[i],s[n],y[n]);return l}function n(e){var t=Math.floor((e-s)/y);return t<0&&(t=0),t>=u&&(t=u-1),t}function a(e){var t=o&&o.buckets>0?o.buckets:e/100;return Math.ceil(t)}function l(){var o,r,l,d,f,m,v,_,S,x,E=h.xx,P=0,T=0,R=-1;for(Je.forEachPathSegment(e,t,function(){P++}),r=new Uint32Array(2*P),v=0,Je.forEachPathSegment(e,t,function(e,t,o,i){r[v++]=e,r[v++]=t}),Je.sortSegmentIds(E,r),p=new Uint32Array(P),g=new Uint32Array(P),u=a(P),c=new Uint32Array(u+1),s=E[r[0]],y=(E[r[r.length-2]]-s)/u,l=0,d=P-1;T<P;){for(_=2*T,f=r[_],m=r[_+1],S=E[f],x=E[m],o=R,R=n(S);R>o;)o++,c[o]=l;x-S>=0==!1&&i("Invalid segment"),n(x)-R>1?(p[d]=f,g[d]=m,d--):(p[l]=f,g[l]=m,l++),T++}c[u]=l,l!=d+1&&i("Segment indexing error")}var s,p,g,u,c,y,h=t.getVertexData(),d=t.getMultiShapeBounds(e);l(),this.pointInPolygon=function(e,t){if(!d.containsPoint(e,t))return!1;var o=n(e),i=r(e,t,o);return o>0&&(i+=r(e,t,o-1)),i+=r(e,t,u),isNaN(i)?-1:i%2==1?1:0}}function X(e,t){function o(e){function o(e,o){var i=t.getSimpleShapeBounds(e),n=i.toArray();n.ids=e,n.bounds=i,n.id=o,r.push(n),i.area()>.02*g&&(n.index=new W([e],t))}var r=[];e.forEach(function(e,t){for(var r=e?e.length:0,i=0;i<r;i++)o(e[i],t)}),p=require("rbush")(),p.load(r)}function r(e,t){var o=!1,r=!1;return t.forEach(function(t){var i=t.index?t.index.pointInPolygon(e[0],e[1]):l(t.ids,t.bounds,e);i==-1?o=!0:1==i&&(r=!r)}),o||r}function i(e){var t,o,r=n(e),i=[];if(r.length>0){r.sort(function(e,t){return e.id-t.id});for(var a=0;a<r.length;a++)o=r[a],0!==a&&o.id==r[a-1].id||i.push(t=[]),t.push(o)}return i}function n(e){var t=e[0],o=e[1];return p.search([t,o,t,o])}function a(e){var o=t.getVertex(e,0),r=t.getVertex(e,1);return[(o.x+r.x)/2,(o.y+r.y)/2]}function l(e,o,r){return o.containsPoint(r[0],r[1])===!1?0:tt.testPointInRing(r[0],r[1],e,t)}function s(e,t){var o=[];return e.forEach(function(e){t.indexOf(e)==-1&&o.push(e)}),t.forEach(function(e){o.indexOf(e)==-1&&o.push(e)}),o}var p,g=Je.getPathBounds(e,t).area();o(e),this.findEnclosingShape=function(e){var t=-1,o=i(e);return o.forEach(function(o){r(e,o)&&(t=o[0].id)}),t},this.pointIsEnclosed=function(e){return r(e,n(e))},this.arcIsEnclosed=function(e){return this.pointIsEnclosed(a(e))},this.pathIsEnclosed=function(e){var t=e[0],o=a(t);return this.pointIsEnclosed(o)},this.findEnclosedPaths=function(e){var o,r=t.getSimpleShapeBounds(e),i=p.search(r.toArray()),n=[];return i.length>6&&(o=new W([e],t)),i.forEach(function(t){var i=a(t.ids[0]),s=o?o.pointInPolygon(i[0],i[1]):l(e,r,i);s&&n.push(t.ids)}),n.length>0?n:null},this.findPathsInsideShape=function(e){var t=[];return e.forEach(function(e){var o=this.findEnclosedPaths(e);o&&(t=s(t,o))},this),t.length>0?t:null}}function K(e,t,o,r,i,n,a,l){var s=ee(e,t,o,r,i,n,a,l),p=null;return s&&(p=H(e,t,o,r,i,n,a,l),p?re(e,t,o,r,i,n,a,l)&&(p=null):p=oe(e,t,o,r,i,n,a,l)),p}function Y(e,t,o,r,i,n,a,l){var s,p,u=Q(o-e,r-t,a-i,l-n),c=1e-18;return 0===u?null:(s=$(i,n,a,l,e,t)/u,u<=c&&u>=-c?(p=Z(e,t,o,r,i,n,a,l),p||(g("[lineIntersection()]"),tt.debugSegmentIntersection([],e,t,o,r,i,n,a,l))):p=[e+s*(o-e),t+s*(r-t)],p)}function Z(e,t,o,r,i,n,a,l){var s=null;return J(e,i,a)||J(t,n,l)?J(o,i,a)||J(r,n,l)?J(i,e,o)||J(n,t,r)?J(a,e,o)||J(l,t,r)||(s=[a,l]):s=[i,n]:s=[o,r]:s=[e,t],s}function H(e,t,o,r,i,n,a,l){var s,p=Y(e,t,o,r,i,n,a,l);return p&&(s=m(p[0],p[1],e,t,o,r,i,n,a,l),1==s?p=Y(o,r,e,t,i,n,a,l):2==s?p=Y(i,n,a,l,e,t,o,r):3==s&&(p=Y(a,l,i,n,e,t,o,r))),p&&z(p,e,t,o,r,i,n,a,l),p}function z(e,t,o,r,i,n,a,l,s){var p=e[0],g=e[1];p=tt.clampToCloseRange(p,t,r),p=tt.clampToCloseRange(p,n,l),g=tt.clampToCloseRange(g,o,i),g=tt.clampToCloseRange(g,a,s),e[0]=p,e[1]=g}function J(e,t,o){var r;return r=t<o?e<t||e>o:t>o?e>t||e<o:e!=t}function Q(e,t,o,r){return e*r-t*o}function $(e,t,o,r,i,n){return Q(e-i,t-n,o-i,r-n)}function ee(e,t,o,r,i,n,a,l){return $(e,t,o,r,i,n)*$(e,t,o,r,a,l)<=0&&$(i,n,a,l,e,t)*$(i,n,a,l,o,r)<=0}function te(e,t,o){return e>t&&e<o}function oe(e,t,o,r,i,n,a,l){var s=Math.min(e,o,i,a),p=Math.max(e,o,i,a),u=Math.min(t,r,n,l),c=Math.max(t,r,n,l),y=c-u>p-s,h=[];return(y?te(t,u,c):te(e,s,p))&&h.push(e,t),(y?te(r,u,c):te(o,s,p))&&h.push(o,r),(y?te(n,u,c):te(i,s,p))&&h.push(i,n),(y?te(l,u,c):te(a,s,p))&&h.push(a,l),2!=h.length&&4!=h.length?(h=null,g("Invalid collinear segment intersection",h)):4==h.length&&h[0]==h[2]&&h[1]==h[3]&&(h=null),h}function re(e,t,o,r,i,n,a,l){return e==i&&t==n||e==a&&t==l||o==i&&r==n||o==a&&r==l}function ie(e,t){function r(e){e.position(0).littleEndian();var t,o={version:e.readInt8(),updateYear:e.readUint8(),updateMonth:e.readUint8(),updateDay:e.readUint8(),recordCount:e.readUint32(),dataOffset:e.readUint16(),recordSize:e.readUint16(),incompleteTransaction:e.skipBytes(2).readUint8(),encrypted:e.readUint8(),mdx:e.skipBytes(12).readUint8(),ldid:e.readUint8()},r=1;for(e.skipBytes(2),o.fields=[];13!=e.peek()&&10!=e.peek()&&e.position()<o.dataOffset-1;)t=a(e),t.columnOffset=r,o.fields.push(t),r+=t.size;return r!=o.recordSize&&i("Record length mismatch; header:",o.recordSize,"detected:",r),13!=e.peek()&&s("Found a non-standard DBF header terminator ("+e.peek()+"). DBF file may be corrupted."),Je.getUniqFieldNames(Xe.pluck(o.fields,"name")).forEach(function(e,t){o.fields[t].name=e}),o}function a(e){return{name:e.readCString(11),type:String.fromCharCode(e.readUint8()),address:e.readUint32(),size:e.readUint8(),decimals:e.readUint8(),id:e.skipBytes(2).readUint8(),position:e.skipBytes(2).readUint8(),indexFlag:e.skipBytes(7).readUint8()}}function l(){return Xe.pluck(v.fields,"name")}function p(e){return v.dataOffset+v.recordSize*e}function g(){return _||(_=d(),_||(_="utf8",n("Unable to auto-detect the text encoding of the DBF file.\n"+ot.ENCODING_PROMPT))),_}function u(){var e=l().map(function(e,t){return JSON.stringify(e)+": arguments["+t+"]"});return new Function("return {"+e.join(",")+"};")}function c(e){var t=e.size()-1;return 26!=e.peek(t)&&t++,t}function y(e){var t=e.map(h),o=c(m),r=u(),i=[];return function(a){for(var l,s,g=p(a),u=0,c=e.length;u<c;u++)s=e[u],l=g+s.columnOffset,l+s.size>o&&n("Invalid DBF file: encountered end-of-file while reading data"),m.position(l),i[u]=t[u](m,s.size);return r.apply(null,i)}}function h(e){var t=e.type,o=null;return"I"==t?o=ot.readInt:"F"==t||"N"==t?o=ot.getNumberReader():"L"==t?o=ot.readBool:"D"==t?o=ot.readDate:"C"==t?o=ot.getStringReader(g()):(s('Field "'+field.name+'" has an unsupported type ('+field.type+") -- converting to null values"),o=function(){return null}),o}function d(){var e,t,o=v.ldid,r=ot.lookupCodePage(o),i=f(50),n=0===i.length;return r&&87!=o?e=r:n&&(e="ascii"),e||(e=Je.detectEncoding(i)),e&&i.length>0&&(t=Je.decodeSamples(e,i),t=Je.formatStringsAsGrid(t.split("\n")),t="\nSample text containing non-ascii characters:"+(t.length>60?"\n":"")+t,t="Detected DBF text encoding: "+e+(e in ot.encodingNames?" ("+ot.encodingNames[e]+")":"")+t,s(t)),e}function f(e){for(var t,o,r,i,n=[],a=v.fields.filter(function(e){return"C"==e.type}),l=new Qe(256),s={},g=0,u=v.recordCount;g<u;g++)for(var c=0,y=a.length;c<y&&!(n.length>=e);c++)t=a[c],m.position(p(g)+t.columnOffset),o=ot.readStringBytes(m,t.size,l),o>0&&ot.bufferContainsHighBit(l,o)&&(r=new Qe(l.slice(0,o)),i=r.toString("hex"),i in s==!1&&(s[i]=!0,n.push(r)));return n}Xe.isString(e)&&i("[DbfReader] Expected a buffer, not a string");var m=new o(e),v=r(m),_=t||null;this.size=function(){return v.recordCount},this.readRow=function(e){return y(v.fields)(e)},this.getFields=l,this.getBuffer=function(){return m.buffer()},this.deleteField=function(e){v.fields=v.fields.filter(function(t){return t.name!=e})},this.readRows=function(){for(var e=y(v.fields),t=[],o=0,r=this.size();o<r;o++)t.push(e(o));return t}}function ne(e){var t;if(Xe.isArray(e))t=e;else if(t=[],Xe.isInteger(e))for(var o=0;o<e;o++)t.push({});else e&&i("Invalid DataTable constructor argument:",e);this.exportAsDbf=function(e){return ot.exportRecords(t,e)},this.getRecords=function(){return t},this.getRecordAt=function(e){return t[e]}}function ae(e,t){Object.keys(t).forEach(function(o){Object.defineProperty(e,o,{get:t[o]})})}function le(e,t,o){var r=!o.planar&&Je.probablyDecimalDegreeBounds(Je.getLayerBounds(e)),i=o.weight?Je.compileValueExpression(o.weight,e):null,a=[];return 0!==Je.countMultiPartFeatures(e.shapes)&&n("Dissolving multi-part points is not supported"),e.shapes.forEach(function(e,o){var n,l=t(o),s=i?i(o):1,p=e&&e[0];p&&(r&&(n=[],R(p[0],p[1],n),p=n),a[l]=se(a[l],p,s))}),a.map(function(e){var t,o;return e?(r?(t=e.centroid,o=[],T(t[0],t[1],t[2],o)):o=e.centroid,e?[o]:null):null})}function se(e,t,o){var r,i,n=t[0],a=t[1];return n==n&&a==a&&o>0&&(e?(r=e.sum+o,i=e.sum/r,e.centroid[0]=i*e.centroid[0]+o*n/r,e.centroid[1]=i*e.centroid[1]+o*a/r,3==t.length&&(e.centroid[2]=i*e.centroid[2]+o*t[2]/r),e.sum=r):e={sum:o,centroid:t.concat()}),e}function pe(e,t){var o=ge(e,t);return ue(o,e,t)}function ge(e,t){function o(e){var t=e.arcId,o=t<0?~t:t,r=y.length,i=u[o];i||(i=[],u[o]=i),i.push(r),e.group=i,y.push(e),3==i.length&&c.push(i)}function r(e,t){for(var o,r,i=0;i<e.length-1;i++){o=y[e[i]];for(var n=i+1;n<e.length;n++)if(r=y[e[n]],t(o,r))return[o.segId,r.segId]}return null}function i(t,o){return ce(t,y,e).arcId===~ce(o,y,e).arcId}function n(t,o){return ye(t,y,e).arcId===~ye(o,y,e).arcId}function a(e,t){return s(e,t)&&i(e,t)&&n(e,t)}function l(e,t){return s(e,t)&&(i(e,t)||n(e,t))}function s(e,t){return e.arcId===~t.arcId&&h[e.shapeId]===h[t.shapeId]}function p(e){e.forEach(function(t){y[t].group=e})}function g(e){var t=r(e,a)||r(e,l)||r(e,s);t&&(e=e.filter(function(e){return!Xe.contains(t,e)}),p(e),p(t),e.length>2&&g(e))}var u=[],c=[],y=[],h=e.map(function(e,o){return t(o)});return Je.traversePaths(e,o),c.forEach(g),y}function ue(e,t,o){function r(e){if(!e.used){var t=s(e);t||a(e)}}function n(e,t){t in p==!1&&(p[t]=[]),p[t].push(e)}function a(e){var t=[e.arcId],r=l(e);for(e.used=!0;r&&r!=e;)t.push(r.arcId),r.used=!0,r=l(r),r&&r!=e&&r.used&&i("buildRing() topology error");r||i("buildRing() traversal error"),e.used=!0,n(t,o(e.shapeId))}function l(o,r){var n,a=ce(o,e,t);return r=r||0,a!=o&&(n=s(a),n&&(r>100&&i("deep recursion -- unhandled topology problem"),a=1==t[n.shapeId][n.partId].length?l(a,r+1):l(n,r+1))),a}function s(t){var r,i,n=o(t.shapeId);return i=Xe.find(t.group,function(r){var i=t,a=e[r];return i!=a&&!a.used&&o(a.shapeId)===n&&i.arcId==~a.arcId}),r=null===i?null:e[i]}var p=[];return e.forEach(r),p}function ce(e,t,o){return he(e,t,o,1)}function ye(e,t,o){return he(e,t,o,-1)}function he(e,t,o,r){var n,a=o[e.shapeId][e.partId],l=a.length,s=(e.i+r)%l;return s<0&&(s+=l),n=t[e.segId-e.i+s],n&&n.shapeId==e.shapeId||i("index error"),n}function de(e,t){function r(t,o){var r,s,c=g-t;return(c<o||c<0)&&i("Tried to read past end-of-file"),!(l&&t>=a&&a+l.length>=t+o)&&(s=Math.max(u,o),c<s&&(s=c),l&&s==l.length||(l=new Qe(s)),n||(n=p.openSync(e,"r")),r=p.readSync(n,l,0,s,t),a=t,r!=s&&i("Error reading file"),!0)}var n,a,l,s,p=require("fs"),g=p.statSync(e).size,u=t&&t.cacheSize||8388608,c=t&&t.bufferSize||16384;this.expandBuffer=function(){return c*=2,this},this.readToBinArray=function(e,t){return r(e,t)&&(s=new o(l)),s.position(e-a),s},this.readSync=function(e,t){return t>0==!1&&(t=c,e+t>g&&(t=g-e),0===t)?new Qe(0):(r(e,t),l.slice(e-a,e-a+t))},this.size=function(){return g},this.close=function(){n&&(p.closeSync(n),n=null,l=null)}}function fe(e){function t(e,t){for(var r=o(e);r;)t(JSON.parse(r.text)),r=o(r.offset)}function o(t){var o,r,i,n,a=123,l=125,s=92,p=34,g=0,u=!1,c=!1,y=e.readSync(t),h=null;for(r=0,i=y.length;r<i;r++){if(n=y[r],u)c?c=!1:n==p?u=!1:n==s&&(c=!0);else if(n==p)u=!0;else if(n==a)0===g&&(o=r),g++;else if(n==l){if(g--,0===g){h={text:y.toString("utf8",o,r+1),offset:t+r+1};break}if(g==-1)break}r==i-1&&(y=e.expandBuffer().readSync(t),i=y.length)}return h}this.readObjects=function(o){var r=300,i=e.findString('"features"',r)||e.findString('"geometries"',r),n=i?i.offset:0;t(n,o)},this.readObject=o}function me(e){var t=new ArrayBuffer(16),o=new Float64Array(t),r=new Uint32Array(t),i=0|e;if(i>0==!1)throw new Error("Invalid size param: "+e);return function(e,t){var n,a=r;return o[0]=e,o[1]=t,n=a[0]^a[1],n=n<<5^n>>7^a[2]^a[3],(2147483647&n)%i}}function ve(e){function t(e,t,o,l,s){for(var p,g,u,c=s(o),y=r(e[o],t[o]),h=i[y];h!=-1;){if(p=a[h][0],g=a[h][1],u=p.length,p[0]===e[l]&&p[u-1]===e[o]&&p[u-2]===e[c]&&g[0]===t[l]&&g[u-1]===t[o]&&g[u-2]===t[c])return h;h=n[h]}return null}var o=Math.floor(.25*e+1),r=me(o),i=new Int32Array(o),n=[],a=[],l=0;Xe.initializeArray(i,-1),this.addArc=function(e,t){var o=e.length-1,s=r(e[o],t[o]),p=i[s],g=a.length;return i[s]=g,a.push([e,t]),l+=e.length,n.push(p),g},this.findMatchingArc=function(e,o,r,i,n,a){var l=t(e,o,r,i,n);return l=null===l?t(e,o,i,r,a):~l},this.getVertexData=function(){for(var e,t,o=new Float64Array(l),r=new Float64Array(l),i=new Uint32Array(a.length),n=0,s=0,p=a.length;s<p;s++)e=a[s],t=e[0].length,Xe.copyElements(e[0],0,o,n,t),Xe.copyElements(e[1],0,r,n,t),i[s]=t,n+=t;return{xx:o,yy:r,nn:i}}}function _e(e,t){for(var o,r,i=e.length,n=Math.floor(1.3*i)||1,a=me(n),l=new Int32Array(n),s=new Int32Array(i),p=0;p<i;p++)o=a(e[p],t[p]),r=l[o]-1,l[o]=p+1,s[p]=r<0?p:r;return s}function Se(e,t){for(var o,r,i,n,a=_e(e,t),l=e.length-1;l>=0;l--)if(r=a[l],!(r>=l)){i=l,n=-1;do o=r,r=a[o],t[o]==t[l]&&e[o]==e[l]?(a[o]=i,i=o):(n>-1&&(a[n]=o),n=o);while(r<o);n>-1&&(a[n]=n),a[l]=i}return a}function xe(e,t){for(var o=new Int32Array(e),r=0,i=0,n=t.length;i<n;i++)for(var a=0,l=t[i];a<l;a++,r++)o[r]=i;return o}function Ee(e){var t=1e4,o=new Float64Array(t),r=new Float64Array(t),i=0;this.endPath=function(){e(o,r,i),i=0},this.addPoint=function(e,n){i>=t&&(t=Math.ceil(1.3*t),o=Xe.extendBuffer(o,t),r=Xe.extendBuffer(r,t)),o[i]=e,r[i]=n,i++}}function Pe(e){function t(e){var t=_<d.length?d[_]:null;t?t!=e&&n("Unable to import mixed-geometry GeoJSON features"):(d[_]=e,f?e!=f&&(f="mixed"):f=e)}function o(e){if(e>g.length){var t=Math.max(e,Math.ceil(1.5*g.length));g=Xe.extendBuffer(g,t,S),u=Xe.extendBuffer(u,t,S)}}function r(e){var t=c[_]||(c[_]=[]);t.push(e)}function i(e){v++,h[v]=e,r([v])}function a(e,t,r){var n,a,l,s,p=0;o(S+r);for(var c=0;c<r;c++)n=e[c],a=t[c],m&&(n=m(n),a=m(a)),c>0&&n==l&&a==s?x++:(g[S]=n,u[S]=a,S++,p++),s=a,l=n;"polygon"==f&&p>0&&(e[0]==e[r-1]&&t[0]==t[r-1]||(o(S+1),g[S]=e[0],u[S]=t[0],E++,S++,p++)),i(p)}var l=e.reserved_points>0?e.reserved_points:2e4,g=new Float64Array(l),u=new Float64Array(l),c=[],y=[],h=[],d=[],f=e.type||null,m=null,v=-1,_=-1,S=0,x=0,E=0;e.precision&&(m=Xe.getRoundingFunction(e.precision)),Xe.extend(this,new Ee(a)),this.startShape=function(e){c[++_]=null,e&&(y[_]=e)},this.importLine=function(e){t("polyline"),this.importPath(e)},this.importPoints=function(e){t("point"),m&&e.forEach(function(e){e[0]=m(e[0]),e[1]=m(e[1])}),e.forEach(r)},this.importRing=function(e,o){var r=tt.getPlanarPathArea2(e);t("polygon"),(o===!0&&r>0||o===!1&&r<0)&&(p("Warning: reversing",o?"a CW hole":"a CCW ring"),e.reverse()),this.importPath(e)},this.importPath=function(e){for(var t,o=0,r=e.length;o<r;o++)t=e[o],this.addPoint(t[0],t[1]);this.endPath()},this.done=function(){var t,o,r={name:""};return x>0&&p(Xe.format("Removed %,d duplicate point%s",x,Xe.pluralSuffix(x))),E>0&&s(Xe.format("Closed %,d open polygon ring%s",E,Xe.pluralSuffix(E))),S>0&&(S<g.length&&(g=g.subarray(0,S),u=u.subarray(0,S)),t=new B(h,g,u),(e.auto_snap||e.snap_interval)&&Je.snapCoords(t,e.snap_interval)),"mixed"==f?o=Je.divideFeaturesByType(c,y,d):(r={geometry_type:f},f&&(r.shapes=c),y.length>0&&(r.data=new ne(y)),o=[r]),o.forEach(function(e){Je.layerHasPaths(e)&&Je.cleanShapes(e.shapes,t,e.geometry_type),e.data&&Je.fixInconsistentFields(e.data.getRecords())}),{arcs:t||null,info:{},layers:o}}}function Te(e){var t=e.id_field||nt.ID_FIELD,o=new Pe(e);this.parseObject=function(e){var r,i;"Feature"==e.type?(r=e.geometry,i=e.properties||{},"id"in e&&(i[t]=e.id)):e.type&&(r=e),o.startShape(i),r&&nt.importGeometry(r,o)},this.done=function(){return o.done()}}function Re(e){var t,o=lt.hasBounds(e),r=lt.isMultiPartType(e),n=lt.isZType(e),a=lt.isMType(e),l=!o,s=l?0:16;if(0===e)return st;t=function(t,o){var n=t.position();return this.id=t.bigEndian().readUint32(),this.type=t.littleEndian().skipBytes(4).readUint32(),0===this.type?new st:((o>0!=!0||this.type!=e&&0!==this.type)&&i("Unable to read a shape -- .shp file may be corrupted"),this.byteLength=o,l?(this.pointCount=1,this.partCount=1):(t.skipBytes(32),this.partCount=r?t.readUint32():1,this.pointCount=t.readUint32()),void(this._data=function(){return t.position(n)}))};var p={_xypos:function(){var e=12;return l||(e+=4),o&&(e+=32),r&&(e+=4*this.partCount+4),e},readCoords:function(){if(0===this.pointCount)return null;var e=this.readPartSizes(),t=this._data().skipBytes(this._xypos());return e.map(function(e){return t.readFloat64Array(2*e)})},readXY:function(){return 0===this.pointCount?new Float64Array(0):this._data().skipBytes(this._xypos()).readFloat64Array(2*this.pointCount)},readPoints:function(){for(var e,t=this.readXY(),o=n?this.readZ():null,r=a&&this.hasM()?this.readM():null,i=[],l=0,s=t.length/2;l<s;l++)e=[t[2*l],t[2*l+1]],o&&e.push(o[l]),r&&e.push(r[l]),i.push(e);return i},readPartSizes:function(){var e,t,o,r=[];if(0===this.pointCount);else if(1==this.partCount)r.push(this.pointCount);else{t=0,o=this._data().skipBytes(56);for(var i=0,n=this.partCount;i<n;i++)e=(i<n-1?o.readUint32():this.pointCount)-t,e>0&&(r.push(e),t+=e)}return r}},g={read:function(){var e=2;return n&&e++,this.hasM()&&e++,this._data().skipBytes(12).readFloat64Array(e)},stream:function(e){var t=this._data().skipBytes(12);e.addPoint(t.readFloat64(),t.readFloat64()),e.endPath()}},u={readBounds:function(){return this._data().skipBytes(12).readFloat64Array(4)},stream:function(e){for(var t,o=this.readPartSizes(),r=this.readXY(),n=0,a=0;n<o.length;){for(t=o[n];t-- >0;)e.addPoint(r[a++],r[a++]);e.endPath(),n++}r.length!=a&&i("Counting error")},read:function(){for(var e=[],t=this.readPartSizes(),o=this.readPoints(),r=0,i=t.length-1;r<i;r++)e.push(o.splice(0,t[r]));return e.push(o),e}},c={_mpos:function(){var e=this._xypos()+16*this.pointCount;return n&&(e+=8*this.pointCount+s),e},readMBounds:function(){return this.hasM()?this._data().skipBytes(this._mpos()).readFloat64Array(2):null},readM:function(){return this.hasM()?this._data().skipBytes(this._mpos()+s).readFloat64Array(this.pointCount):null},hasM:function(){var e=this._mpos(),t=e+8*this.pointCount+s;return this.byteLength!=e&&(this.byteLength==t||void i("#hasM() Counting error"))}},y={_zpos:function(){return this._xypos()+16*this.pointCount},readZBounds:function(){return this._data().skipBytes(this._zpos()).readFloat64Array(2)},readZ:function(){return this._data().skipBytes(this._zpos()+s).readFloat64Array(this.pointCount)}};return l?Xe.extend(p,g):Xe.extend(p,u),n&&Xe.extend(p,y),a&&Xe.extend(p,c),t.prototype=p,p.constructor=t,t}function Le(e){function t(){a=100,p=0,l=1}function o(e){var t={signature:e.bigEndian().readUint32(),byteLength:2*e.skipBytes(20).readUint32(),version:e.littleEndian().readUint32(),type:e.readUint32(),bounds:e.readFloat64Array(4),zbounds:e.readFloat64Array(2),mbounds:e.readFloat64Array(2)};return 9994!=t.signature&&i("Not a valid .shp file"),Je.isSupportedShapefileType(t.type)||i("Unsupported .shp type:",t.type),t.byteLength!=g.size()&&i("File size of .shp doesn't match size in header"),t}function r(e,t){var o,r,i,n,a,l,s,p=null;return e+12<=c&&(s=g.readToBinArray(e,12),i=s.bigEndian().readUint32(),o=2*s.readUint32()+8,r=s.littleEndian().readUint32(),n=i==t,a=e+o<=c&&o>=12,l=0===r||r==u.type,a&&l&&(s=g.readToBinArray(e,o),p=new y(s,o))),p}function n(e,t){for(var o,i,n,a=e,l=null;a+12<=c;){if(o=g.readToBinArray(a,12),i=o.bigEndian().readUint32(),n=o.littleEndian().skipBytes(4).readUint32(),i==t&&(n==u.type||0===n)){l=r(a,t);break}a+=4}return p+=l?a-e:c-e,l}if(this instanceof Le==!1)return new Le(e);var a,l,p,g=Xe.isString(e)?new de(e):new Me(e),u=o(g.readToBinArray(0,100)),c=g.size(),y=new Re(u.type);t(),this.header=function(){return u},this.forEachShape=function(e){for(var t=this.nextShape();t;)e(t),t=this.nextShape()},this.nextShape=function(){var e=r(a,l);if(!e&&a+12<=c&&(e=n(a+4,l)),e){if(a+=e.byteLength,e.id<l)return s("Shapefile record "+e.id+" appears more than once -- possible file corruption."),this.nextShape();l++}else p>0&&s("Skipped "+p+" bytes in .shp file -- possible data loss."),g.close(),t();return e}}function Me(e){var t=new o(e),r=t.size();this.readToBinArray=function(e,o){return r<e+o&&i("Out-of-range error"),t.position(e),t},this.size=function(){return r},this.close=function(){}}function Ce(){this.a=1,this.c=0,this.tx=0,this.b=0,this.d=1,this.ty=0}function be(e){function t(e,t){var o=i.pj_fwd_deg(e,t);return{x:(o.x/t.fr_meter-t.x0)/t.a,y:(o.y/t.fr_meter-t.y0)/t.a}}var o=[],r=Xe.extend({},e),i=require("mproj");return r.addFrame=function(r,i,n,a,l,s,p){var g=new Ce,u=2*e.a,c=t(i,e),y=t(n,e),h=[c.x-a/u,c.y-l/u,c.x+a/u,c.y+l/u];return g.rotate(p*Math.PI/180,c.x,c.y),g.scale(s,s),g.transformXY(c.x,c.y,c),g.translate(y.x-c.x,y.y-c.y),o.push({bbox:h,matrix:g,projection:r}),this},r.fwd=function(t,r){var i,n,a=t.lam,l=t.phi;e.fwd(t,r);for(var s=0,p=o.length;s<p;s++)if(i=o[s],n=i.bbox,r.x>=n[0]&&r.x<=n[2]&&r.y>=n[1]&&r.y<=n[3]){i.projection.fwd({lam:a,phi:l},r),i.matrix.transformXY(r.x,r.y,r);break}},r}function Ie(){var e=require("mproj"),t=e.pj_init("+proj=lcc +lon_0=-96 +lat_0=39 +lat_1=33 +lat_2=45"),o=e.pj_init("+proj=aea +lon_0=-96 +lat_0=37.5 +lat_1=29.5 +lat_2=45.5"),r=new be(o).addFrame(t,{lam:-152,phi:63},{lam:-115,phi:27},6e6,3e6,.31,29.2).addFrame(t,{lam:-157,phi:20.9},{lam:-106.6,phi:28.2},3e6,5e6,.9,40);return r}function Ae(e,t){function o(){return r||(r=new ne(i.readRows()),i=null,e=null),r}var r,i=new ie(e,t),n=!1;this.exportAsDbf=function(e){return i&&!n?i.getBuffer():o().exportAsDbf(e)},this.getRecordAt=function(e){return i?i.readRow(e):r.getRecordAt(e)},this.deleteField=function(e){r?r.deleteField(e):(n=!0,i.deleteField(e))},this.getRecords=function(){return o().getRecords()},this.getFields=function(){return i?i.getFields():r.getFields()},this.size=function(){return i?i.size():r.size()}}function we(e,t){function o(e,t){for(var o,l=0;l<n.length;l++)o=h(n[l][0],n[l][1],e[0],e[1]),o<r&&o<=a*a&&(r=o,i=t)}var r,i,n,a=t.buffer>=0?t.buffer:.001;this.findNearestPointFeature=function(t){return r=1/0,i=-1,n=t||[],Je.forEachPoint(e,o),i}}function Oe(){function e(e){for(var t;e>0&&(t=e-1>>1,!n(e,t));)o(e,t),e=t;return e}function t(e){for(var t=a(e);t>e;)o(e,t),e=t,t=a(e)}function o(e,t){var o=s[e];r(e,s[t]),r(t,o)}function r(e,t){p[t]=e,s[e]=t}function n(e,t){var o=s[e],r=s[t],i=l[o],n=l[r];return i>n||i===n&&o>r}function a(e){var t=2*e+1,o=t+1,r=c;return t<r&&n(e,t)&&(e=t),o<r&&n(e,o)&&(e=o),e}var l,s,p,g=Xe.expandoBuffer(Int32Array),u=Xe.expandoBuffer(Int32Array),c=0;this.init=function(e){var o;for(l=e,c=e.length,s=g(c),p=u(c),o=0;o<c;o++)r(o,o);for(o=c-2>>1;o>=0;o--)t(o)},this.size=function(){return c},this.updateValue=function(o,r){var n=p[o];l[o]=r,n>=0&&n<c||i("Out-of-range heap index."),t(e(n))},this.popValue=function(){return l[this.pop()]},this.pop=function(){var e;return c<=0&&i("Tried to pop from an empty heap."),e=s[0],r(0,s[--c]),t(0),e}}function Fe(){function e(){return p.map(function(e){return e.done()})}var t,o=/^--?([a-z][\w-]*)$/i,r=/^([a-z0-9_+-]+)=(?!\=)(.*)$/i,a="",l=[],p=[],g=null;return this instanceof Fe==!1?new Fe:(this.usage=function(e){return a=e,this},this.note=function(e){return t=e,this},this.default=function(e){g=e},this.example=function(e){l.push(e)},this.command=function(e){var t=new Ne(e);return p.push(t),t},this.section=function(e){return this.command("").title(e)},this.parseArgv=function(t){function a(t){return!!Xe.find(e(),function(e){return t===e.name||t===e.alias})}function l(e){return o.test(e)}function s(e,t,o){var i=r.exec(t),a=i[1],l=Xe.trimQuotes(i[2]),s=f(a,o);s?"flag"==s.type||s.assign_to?n("-"+o.name+" "+a+" option doesn't take a value"):p(e,[a,l],o):e._.push(t)}function p(e,t,o){var i,n=t.shift(),a=f(n,o);return r.test(n)?void s(e,n,o):a?(i=a.alias_to||a.name,i=i.replace(/-/g,"_"),void(a.assign_to?e.options[a.assign_to]=a.name:"flag"==a.type?e.options[i]=!0:e.options[i]=u(t,a))):void e._.push(n)}function u(e,t){return(0===e.length||l(e[0]))&&n("Missing value for "+t.name+" option"),y(e.shift(),t)}function c(e,t){var o=f(t.default,t);e.options[t.default]=u(e._,o)}function y(e,t){var o,r,i=t.type;return o="number"==i?Number(e):"integer"==i?Math.round(Number(e)):"colors"==i?Je.parseColorList(e):"strings"==i?Je.parseStringList(e):"bbox"==i||"numbers"==i?e.split(",").map(parseFloat):"percent"==i?Xe.parsePercent(e):e,o!==o&&(r="Invalid numeric value"),r&&n(r+" for "+t.name+" option"),o}function h(e){var t=o.exec(e[0]);return t?(e.shift(),t[1]):null}function d(e,t){return Xe.find(t,function(t){return t.name===e||t.alias===e})}function f(e,t){return Xe.find(t.options,function(t){return t.name===e||t.alias===e})}var m,v,_,S=e(),x=[],E=Je.cleanArgv(t);for(1==E.length&&a(E[0])?E.unshift("-help"):E.length>0&&!l(E[0])&&g&&E.unshift("-"+g);E.length>0;){for(v=h(E),v||n("Invalid command:",E[0]),_=d(v,S),_||n("Unknown command:",v),m={name:_.name,options:{},_:[]};E.length>0&&!l(E[0]);)p(m,E,_);try{m._.length>0&&_.no_arg&&i("Received one or more unexpected parameters:",m._.join(" ")),m._.length>1&&!_.multi_arg&&i("Command expects a single value. Received:",m._.join(" ")),_.default&&1==m._.length&&c(m,_),_.validate&&_.validate(m)}catch(e){n("["+v+"] "+e.message)}x.push(m)}return x},this.getHelpMessage=function(o){function r(e,t){return Xe.rpad(e,d," ")+h+(t||"")+"\n"}function i(e,t){return e.help=c,e.label?e.help+=e.label:e.name==t.default?e.help+="<"+e.name+">":(e.help+=e.name,e.alias&&(e.help+=", "+e.alias),"flag"==e.type||e.assign_to||(e.help+="=")),e.help.length}var s,p,g="",u="  ",c="  ",y="  ",h="  ",d=0,f=!1;return p=e().filter(function(e){return!!e.describe||e.title}),o&&(s=Xe.find(p,function(e){return e.name==o}),s||n(o,"is not a known command"),f=!0,p=[s]),f||a&&(g+=a+"\n\n"),d=p.reduce(function(e,t){var o=u+(t.name?"-"+t.name:"");return t.alias&&(o+=", -"+t.alias),t.help=o,f&&(e=t.options.reduce(function(e,o){return t.describe&&(e=Math.max(i(o,t),e)),e},e)),Math.max(e,o.length)},0),p.forEach(function(e){!f&&e.title&&(g+=e.title),f&&(g+="\nCommand\n"),g+=r(e.help,e.describe),f&&e.options.length>0&&(g+="\nOptions\n",e.options.forEach(function(e){e.help&&e.describe&&(g+=r(e.help,e.describe))})),f&&e.examples&&(g+="\nExample"+(e.examples.length>1?"s":""),e.examples.forEach(function(e){e.split("\n").forEach(function(e){g+="\n"+y+e}),g+="\n"}))}),f||(l.length>0&&(g+="\nExamples\n",l.forEach(function(e){g+="\n"+e+"\n"})),t&&(g+="\n"+t)),g},void(this.printHelp=function(e){s(this.getHelpMessage(e))}))}function Ne(e){var t={name:e,options:[]};this.default=function(e){return t.default=e,this},this.validate=function(e){return t.validate=e,this},this.describe=function(e){return t.describe=e,this},this.example=function(e){return t.examples||(t.examples=[]),t.examples.push(e),this},this.alias=function(e){return t.alias=e,this},this.title=function(e){return t.title=e,this},this.flag=function(e){return t[e]=!0,this},this.option=function(e,o){return o=o||{},Xe.isString(e)&&e||i("Missing option name"),Xe.isObject(o)||i("Invalid option definition:",o),o.name=e,t.options.push(o),this},this.done=function(){return t}}function Ge(e){var t=e.options,o=e._;"-"==o[0]||"/dev/stdin"==o[0]?t.stdin=!0:o.length>0&&(t.files=ct.expandInputFiles(o)),"precision"in t&&t.precision>0==!1&&i("precision= option should be a positive number"),t.encoding&&(t.encoding=Je.validateEncoding(t.encoding))}function De(e){var t=e.options,o=e._[0];o&&(/^[0-9.]+%?$/.test(o)?t.percentage=Xe.parsePercent(o):i("Unparsable option:",o));var r=t.interval;r&&(t.interval=Number(r),t.interval>=0==!1&&i(Xe.format("Out-of-range interval value: %s",r))),!isNaN(t.interval)||Xe.isNumber(t.percentage)||t.resolution||i("Command requires an interval, percentage or resolution parameter")}function ke(e){var t=e._,o=[];t=t.filter(function(e){return!/^\+[a-z]/i.test(e)||(o.push(e),!1)}),o.length>0?e.options.projection=o.join(" "):t.length>0&&(e.options.projection=t.shift()),t.length>0&&i("Received one or more unexpected parameters: "+t.join(", ")),e.options.projection||e.options.match||e.options.from||n("Missing projection data")}function je(e){var t=e.options;t.cleanup&&(delete t.cleanup,t.remove_slivers=!0),t.source||t.bbox||i("Command requires a source file, layer id or bbox")}function qe(e){var t=e.options;if(1==e._.length){var o=e._[0].split(",");t.cols=parseInt(o[0],10),t.rows=parseInt(o[1],10)||t.cols}}function Ue(e){e.options.expression||i("Command requires a JavaScript expression")}function Be(e){var t=e._,o=e.options,r=t[0]||"",n=Xe.parseLocalPath(r);t.length>1&&i("Command takes one file or directory argument"),"-"==r||"/dev/stdout"==r?o.stdout=!0:r&&!n.extension?(ct.isDirectory(r)||i("Unknown output option:",r),o.directory=r):r&&(n.directory&&(o.directory=n.directory,ct.validateOutputDir(o.directory)),o.file=n.filename,Je.filenameIsUnsupportedOutputType(o.file)&&i("Output file looks like an unsupported file type:",o.file)),o.format&&(o.format=o.format.toLowerCase(),"csv"==o.format?(o.format="dsv",o.delimiter=o.delimiter||","):"tsv"==o.format&&(o.format="dsv",o.delimiter=o.delimiter||"\t"),Je.isSupportedOutputFormat(o.format)||i("Unsupported output format:",o.format)),o.delimiter&&(o.delimiter=o.delimiter.replace(/^["']?\\t["']?$/,"\t"),Je.isSupportedDelimiter(o.delimiter)||i("Unsupported delimiter:",o.delimiter)),o.encoding&&(o.encoding=Je.validateEncoding(o.encoding)),"quantization"in o&&o.quantization>0==!1&&i("quantization= option should be a nonnegative integer"),"topojson_precision"in o&&o.topojson_precision>0==!1&&i("topojson-precision= option should be a positive number");
}function Ve(){function e(e,t){return{layer:e,dataset:t}}function t(e,t){var o=-1;return t.forEach(function(t,r){t.layer==e&&(o=r)}),o}var o,r=[];this.forEachLayer=function(e){var t=0;r.forEach(function(o){o.layers.forEach(function(r){e(r,o,t++)})})},this.deleteLayer=function(e,t){var r,i=this.getDefaultTarget();t.layers.splice(t.layers.indexOf(e),1),0===t.layers.length&&this.removeDataset(t),this.isEmpty()?o=null:i.layers[0]==e?(r=this.findAnotherLayer(e),this.setDefaultTarget([r.layer],r.dataset)):i.layers.indexOf(e)>-1&&(i.layers.splice(i.layers.indexOf(e),1),this.setDefaultTarget(i.layers,i.dataset))},this.findLayer=function(t){var o=null;return this.forEachLayer(function(r,i){r==t&&(o=e(r,i))}),o},this.findCommandTargets=function(e){return e?Je.findCommandTargets(e,this):o?[o]:[]},this.removeDataset=function(e){o&&o.dataset==e&&(o=null),r=r.filter(function(t){return t!=e})},this.getDatasets=function(){return r},this.getLayers=function(){var t=[];return this.forEachLayer(function(o,r){t.push(e(o,r))}),t},this.addDataset=function(e){return this.setDefaultTarget(e.layers,e),this},this.findNextLayer=function(e){var o=this.getLayers(),r=t(e,o);return r>-1?o[(r+1)%o.length]:null},this.findPrevLayer=function(e){var o=this.getLayers(),r=t(e,o);return r>-1?o[(r-1+o.length)%o.length]:null},this.findAnotherLayer=function(e){var t=this.getLayers(),o=null;return t.length>0&&(o=t[0].layer==e?t[1]:t[0]),o},this.isEmpty=function(){return 0===r.length},this.getDefaultTarget=function(){return o||null},this.setDefaultTarget=function(e,t){r.indexOf(t)==-1&&r.push(t),o={layers:e,dataset:t}},this.getActiveLayer=function(){var e=this.getDefaultTarget();return e?{layer:e.layers[0],dataset:e.dataset}:null}}var We="0.4.31",i=function(){var e=Ke.toArray(arguments).join(" ");throw new Error(e)},Xe={getUniqueName:function(e){var t=Ke.__uniqcount||0;return Ke.__uniqcount=t+1,(e||"__id_")+t},isFunction:function(e){return"function"==typeof e},isObject:function(e){return e===Object(e)},clamp:function(e,t,o){return e<t?t:e>o?o:e},interpolate:function(e,t,o){return e*(1-o)+t*o},isArray:function(e){return Array.isArray(e)},isNumber:function(e){return null!=e&&e.constructor==Number},isInteger:function(e){return Ke.isNumber(e)&&(0|e)===e},isString:function(e){return null!=e&&e.toString===String.prototype.toString},isBoolean:function(e){return e===!0||e===!1},toArray:function(e){var t;Ke.isArrayLike(e)||i("Utils.toArray() requires an array-like object");try{t=Array.prototype.slice.call(e,0)}catch(i){t=[];for(var o=0,r=e.length;o<r;o++)t[o]=e[o]}return t},isArrayLike:function(e){return!!e&&(!!Ke.isArray(e)||!Ke.isString(e)&&(0===e.length||e.length>0))},addslashes:function(e){return(e+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},regexEscape:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},defaults:function(e){for(var t=1,o=arguments.length;t<o;t++){var r=arguments[t]||{};for(var i in r)i in e==!1&&r.hasOwnProperty(i)&&(e[i]=r[i])}return e},extend:function(e){var t,o,r,i=e||{},n=arguments.length;for(o=1;o<n;o++){r=arguments[o]||{};for(t in r)r.hasOwnProperty(t)&&(i[t]=r[t])}return i},inherit:function(e,t){var o=function(){this.__super__==o&&(this.__super__=t.prototype.__super__,t.apply(this,arguments),delete this.__super__)};o.prototype=t.prototype||t,e.prototype=Ke.extend(new o,e.prototype),e.prototype.constructor=e,e.prototype.__super__=o},subclass:function(e){var t=function(){this.__super__.apply(this,Ke.toArray(arguments))};Ke.inherit(t,e);for(var o=1;o<arguments.length;o++)Ke.extend(t.prototype,arguments[o]);return t}},Ke=Xe,Ye=(function(){var e="undefined"!=typeof module&&!!module.exports,t="undefined"!=typeof window&&!e,o=t&&!(!window.phantom||!window.phantom.exit),r=t&&/MSIE ([0-9]+)/.exec(navigator.appVersion)&&parseInt(RegExp.$1)||NaN;return{iPhone:t&&!!navigator.userAgent.match(/iPhone/i),iPad:t&&!!navigator.userAgent.match(/iPad/i),canvas:t&&!!document.createElement("canvas").getContext,inNode:e,inPhantom:o,inBrowser:t,ieVersion:r,ie:!isNaN(r)}}(),{stack:[],verbose:!0,start:function(e){Ye.verbose&&e&&p(Ye.prefix()+e),Ye.stack.push(+new Date)},stop:function(e){var t=Ye.stack.pop(),o=+new Date-t;if(Ye.verbose){var r=Ye.prefix()+o+"ms";e&&(r+=" "+e),p(r)}return o},prefix:function(){for(var e="- ",t=this.stack.length;t--;)e="-"+e;return e}});Xe.merge=function(e,t){Xe.isArray(e)&&Xe.isArray(t)||i("Usage: utils.merge(destArray, srcArray);");for(var o=0,r=t.length;o<r;o++)e.push(t[o]);return e},Xe.difference=function(e,t){var o=Xe.arrayToIndex(t);return e.filter(function(e){return!Object.prototype.hasOwnProperty.call(o,e)})},Xe.contains=function(e,t){return Xe.isString(e)?e.indexOf(t)!=-1:Xe.isArrayLike(e)?Xe.indexOf(e,t)!=-1:void i("Expected Array or String argument")},Xe.some=function(e,t){return e.reduce(function(e,o){return e||t(o)},!1)},Xe.every=function(e,t){return e.reduce(function(e,o){return e&&t(o)},!0)},Xe.find=function(e,t,o){var r=e.filter(t,o);return 0===r.length?null:r[0]},Xe.indexOf=function(e,t,o){o&&i("utils.indexOf() No longer supports property argument");for(var r=!(t===t),n=0,a=e.length||0;n<a;n++){if(e[n]===t)return n;if(r&&e[n]!==e[n])return n}return-1},Xe.range=function(e,t,o){for(var r=[],i=void 0===t?0:t,n=void 0===o?1:o;e--;)r.push(i),i+=n;return r},Xe.repeat=function(e,t){for(var o,r=[],i=0;i<e;i++)o=t(i),void 0!==o&&(r[i]=o);return r.length>0?r:void 0},Xe.sum=function(e,t){Xe.isArrayLike(e)||i("utils.sum() expects an array, received:",e);for(var o,r=0,n=0,a=0,l=e.length;a<l;a++)o=e[a],o?r+=o:isNaN(o)&&n++;return t&&(t.nan=n),r},Xe.getArrayBounds=function(e){for(var t,o=1/0,r=-(1/0),i=0,n=0,a=e.length;n<a;n++)t=e[n],t!==t&&i++,t<o&&(o=t),t>r&&(r=t);return{min:o,max:r,nan:i}},Xe.uniq=function(e){var t={};return e.reduce(function(e,o){return o in t==!1&&(t[o]=!0,e.push(o)),e},[])},Xe.pluck=function(e,t){return e.map(function(e){return e[t]})},Xe.countValues=function(e){return e.reduce(function(e,t){return e[t]=t in e?e[t]+1:1,e},{})},Xe.indexOn=function(e,t){return e.reduce(function(e,o){return e[o[t]]=o,e},{})},Xe.groupBy=function(e,t){return e.reduce(function(e,o){var r=o[t];return r in e?e[r].push(o):e[r]=[o],e},{})},Xe.arrayToIndex=function(e,t){var o=arguments.length>1;return e.reduce(function(e,r){return e[r]=!o||t,e},{})},Xe.forEach=function(e,t,o){if(!Xe.isArrayLike(e))throw new Error("#forEach() takes an array-like argument. "+e);for(var r=0,i=e.length;r<i;r++)t.call(o,e[r],r)},Xe.forEachProperty=function(e,t,o){Object.keys(e).forEach(function(r){t.call(o,e[r],r)})},Xe.initializeArray=function(e,t){for(var o=0,r=e.length;o<r;o++)e[o]=t;return e},Xe.replaceArray=function(e,t){e.splice(0,e.length),e.push.apply(e,t)},Ke.repeatString=function(e,t){for(var o="",r=0;r<t;r++)o+=e;return o},Ke.pluralSuffix=function(e){return 1!=e?"s":""},Ke.endsWith=function(e,t){return e.indexOf(t,e.length-t.length)!==-1},Ke.lpad=function(e,t,o){return o=o||" ",e=String(e),Ke.repeatString(o,t-e.length)+e},Ke.rpad=function(e,t,o){return o=o||" ",e=String(e),e+Ke.repeatString(o,t-e.length)},Ke.trim=function(e){return Ke.ltrim(Ke.rtrim(e))};var Ze=/^\s+/;Ke.ltrim=function(e){return e.replace(Ze,"")};var He=/\s+$/;Ke.rtrim=function(e){return e.replace(He,"")},Ke.addThousandsSep=function(e){for(var t="",o="-"==e[0]?1:0,r=e.indexOf("."),i=e.length,n=(r==-1?i:r)-3;n>o;)t=","+e.substring(n,i)+t,i=n,n-=3;return e.substring(0,i)+t},Ke.numToStr=function(e,t){return t>=0?e.toFixed(t):String(e)},Ke.formatNumber=function(e,t,o,r){var i;return isNaN(e)?i=o||"-":(i=Ke.numToStr(e,t),i=Ke.addThousandsSep(i),r&&parseFloat(i)>0&&(i="+"+i)),i},e.prototype.isNull=function(){return!this.mx||!this.my||isNaN(this.bx)||isNaN(this.by)},e.prototype.invert=function(){var t=new e;return t.mx=1/this.mx,t.my=1/this.my,t.bx=-this.bx/this.mx,t.by=-this.by/this.my,t},e.prototype.transform=function(e,t,o){return o=o||[],o[0]=e*this.mx+this.bx,o[1]=t*this.my+this.by,o},e.prototype.toString=function(){return Ke.toString(Ke.extend({},this))},t.prototype.toString=function(){return JSON.stringify({xmin:this.xmin,xmax:this.xmax,ymin:this.ymin,ymax:this.ymax})},t.prototype.toArray=function(){return this.hasBounds()?[this.xmin,this.ymin,this.xmax,this.ymax]:[]},t.prototype.hasBounds=function(){return this.xmin<=this.xmax&&this.ymin<=this.ymax},t.prototype.sameBounds=t.prototype.equals=function(e){return e&&this.xmin===e.xmin&&this.xmax===e.xmax&&this.ymin===e.ymin&&this.ymax===e.ymax},t.prototype.width=function(){return this.xmax-this.xmin||0},t.prototype.height=function(){return this.ymax-this.ymin||0},t.prototype.area=function(){return this.width()*this.height()||0},t.prototype.empty=function(){return this.xmin=this.ymin=this.xmax=this.ymax=void 0,this},t.prototype.setBounds=function(e,t,o,r){return 1==arguments.length&&(Ke.isArrayLike(e)?(t=e[1],o=e[2],r=e[3],e=e[0]):(t=e.ymin,o=e.xmax,r=e.ymax,e=e.xmin)),this.xmin=e,this.ymin=t,this.xmax=o,this.ymax=r,(e>o||t>r)&&this.update(),this},t.prototype.centerX=function(){var e=.5*(this.xmin+this.xmax);return e},t.prototype.centerY=function(){var e=.5*(this.ymax+this.ymin);return e},t.prototype.containsPoint=function(e,t){return e>=this.xmin&&e<=this.xmax&&t<=this.ymax&&t>=this.ymin},t.prototype.containsBufferedPoint=t.prototype.containsCircle=function(e,t,o){return e+o>this.xmin&&e-o<this.xmax&&t-o<this.ymax&&t+o>this.ymin},t.prototype.intersects=function(e){return e.xmin<=this.xmax&&e.xmax>=this.xmin&&e.ymax>=this.ymin&&e.ymin<=this.ymax},t.prototype.contains=function(e){return e.xmin>=this.xmin&&e.ymax<=this.ymax&&e.xmax<=this.xmax&&e.ymin>=this.ymin},t.prototype.shift=function(e,t){this.setBounds(this.xmin+e,this.ymin+t,this.xmax+e,this.ymax+t)},t.prototype.padBounds=function(e,t,o,r){this.xmin-=e,this.ymin-=t,this.xmax+=o,this.ymax+=r},t.prototype.scale=function(e,t){var o=.5*(this.xmax-this.xmin),r=.5*(this.ymax-this.ymin),i=e-1,n=void 0===t?i:t-1;this.xmin-=o*i,this.ymin-=r*n,this.xmax+=o*i,this.ymax+=r*n},t.prototype.cloneBounds=t.prototype.clone=function(){return new t(this.xmin,this.ymin,this.xmax,this.ymax)},t.prototype.clearBounds=function(){this.setBounds(new t)},t.prototype.mergePoint=function(e,t){void 0===this.xmin?this.setBounds(e,t,e,t):(e<this.xmin?this.xmin=e:e>this.xmax&&(this.xmax=e),t<this.ymin?this.ymin=t:t>this.ymax&&(this.ymax=t))},t.prototype.fillOut=function(e,t,o){arguments.length<3&&(t=.5,o=.5);var r,i=this.width(),n=this.height(),a=i/n;return isNaN(e)||e<=0||(a<e?(r=n*e-i,this.xmin-=(1-t)*r,this.xmax+=t*r):(r=i/e-n,this.ymin-=(1-o)*r,this.ymax+=o*r)),this},t.prototype.update=function(){var e;this.xmin>this.xmax&&(e=this.xmin,this.xmin=this.xmax,this.xmax=e),this.ymin>this.ymax&&(e=this.ymin,this.ymin=this.ymax,this.ymax=e)},t.prototype.transform=function(e){return this.xmin=this.xmin*e.mx+e.bx,this.xmax=this.xmax*e.mx+e.bx,this.ymin=this.ymin*e.my+e.by,this.ymax=this.ymax*e.my+e.by,this.update(),this},t.prototype.getTransform=function(t,o){var r=new e;return r.mx=t.width()/this.width()||1,r.bx=t.xmin-r.mx*this.xmin,o?(r.my=-t.height()/this.height()||1,r.by=t.ymax-r.my*this.ymin):(r.my=t.height()/this.height()||1,r.by=t.ymin-r.my*this.ymin),r},t.prototype.mergeCircle=function(e,t,o){o<0&&(o=-o),this.mergeBounds([e-o,t-o,e+o,t+o])},t.prototype.mergeBounds=function(e){var o,r,n,a;return e instanceof t?(o=e.xmin,r=e.ymin,n=e.xmax,a=e.ymax):4==arguments.length?(o=arguments[0],r=arguments[1],n=arguments[2],a=arguments[3]):4==e.length?(o=e[0],r=e[1],n=e[2],a=e[3]):i("Bounds#mergeBounds() invalid argument:",e),void 0===this.xmin?this.setBounds(o,r,n,a):(o<this.xmin&&(this.xmin=o),r<this.ymin&&(this.ymin=r),n>this.xmax&&(this.xmax=n),a>this.ymax&&(this.ymax=a)),this},Ke.sortOn=function(e){for(var t=[],o=1;o<arguments.length;o+=2)t.push(Ke.getKeyComparator(arguments[o],arguments[o+1]));return e.sort(function(e,o){for(var r=0,i=0,n=t.length;i<n&&0===r;)r=t[i](e,o),i++;return r}),e},Ke.genericSort=function(e,t){var o=Ke.getGenericComparator(t);return Array.prototype.sort.call(e,o),e},Ke.sortOnKey=function(e,t,o){var r=Ke.getGenericComparator(o!==!1);e.sort(function(e,o){return r(t(e),t(o))})},Ke.sortOnKey2=function(e,t,o){Ke.sortArrayByKeys(e,e.map(t),o)},Ke.sortArrayByKeys=function(e,t,o){var r=Ke.getSortedIds(t,o);Ke.reorderArray(e,r)},Ke.getSortedIds=function(e,t){var o=Ke.range(e.length);return Ke.sortArrayIndex(o,e,t),o},Ke.sortArrayIndex=function(e,t,o){var r=Ke.getGenericComparator(o);e.sort(function(e,o){var i=r(t[e],t[o]);return i>0||0===i&&e<o?1:-1})},Ke.reorderArray=function(e,t){for(var o=t.length,r=[],n=0;n<o;n++){var a=t[n];(a<0||a>=o)&&i("Out-of-bounds array idx"),r[n]=e[a]}Ke.replaceArray(e,r)},Ke.getKeyComparator=function(e,t){var o=Ke.getGenericComparator(t);return function(t,r){return o(t[e],r[e])}},Ke.getGenericComparator=function(e){return e=e!==!1,function(t,o){var r=0;return null==o?r=null==t?0:-1:null==t?r=1:t<o?r=e?-1:1:t>o?r=e?1:-1:t!==t?r=1:o!==o&&(r=-1),r}},Ke.quicksort=function(e,t){return Ke.quicksortPartition(e,0,e.length-1),t===!1&&Array.prototype.reverse.call(e),e},Ke.quicksortPartition=function(e,t,o){for(var r,i,n=t,a=o;n<o;){for(r=e[t+o>>1];n<=a;){for(;e[n]<r;)n++;for(;e[a]>r;)a--;n<=a&&(i=e[n],e[n]=e[a],e[a]=i,n++,a--)}t<a&&Ke.quicksortPartition(e,t,a),t=n,a=o}},Ke.findRankByValue=function(e,t){if(isNaN(t))return e.length;for(var o=1,r=0,i=e.length;r<i;r++)t>e[r]&&o++;return o},Ke.findValueByPct=function(e,t){var o=Math.ceil((1-t)*e.length);return Ke.findValueByRank(e,o)},Ke.findValueByRank=function(e,t){(!e.length||t<1||t>e.length)&&i("[findValueByRank()] invalid input"),t=Ke.clamp(0|t,1,e.length);for(var o,r,n,a,l=t-1,s=e.length,p=0,g=s-1;p<g;){n=e[l],o=p,r=g;do{for(;e[o]<n;)o++;for(;n<e[r];)r--;o<=r&&(a=e[o],e[o]=e[r],e[r]=a,o++,r--)}while(o<=r);r<l&&(p=o),l<o&&(g=r)}return e[l]},Ke.findMedian=function(e){var t=e.length,o=Math.floor(t/2)+1,r=Ke.findValueByRank(e,o);return 0==(1&t)&&(r=(r+Ke.findValueByRank(e,o-1))/2),r},Ke.mean=function(e){for(var t,o=0,r=NaN,i=0,n=e.length;i<n;i++)t=e[i],isNaN(t)||(r=1==++o?t:t/o+(o-1)/o*r);return r},o.bufferToUintArray=function(e,t){return 4==t?new Uint32Array(e):2==t?new Uint16Array(e):1==t?new Uint8Array(e):void i("BinArray.bufferToUintArray() invalid word length:",t)},o.uintSize=function(e){return 1&e||2&e||4},o.bufferCopy=function(e,t,r,n,a){n=n||0,a=a||r.byteLength-n,e.byteLength-t<a&&i("Buffer overflow; tried to write:",a);for(var l=Math.min(o.uintSize(a),o.uintSize(n),o.uintSize(e.byteLength),o.uintSize(t),o.uintSize(r.byteLength)),s=o.bufferToUintArray(r,l),p=o.bufferToUintArray(e,l),g=a/l,u=n/l,c=t/l;g--;)p[c++]=s[u++];return a},o.toArrayBuffer=function(e){for(var t=e.length,o=new ArrayBuffer(t),r=new Uint8Array(o),i=0;i<t;i++)r[i]=e[i];return o},o.bufferSize=function(e){return e instanceof ArrayBuffer?e.byteLength:0|e.length},Ke.buffersAreIdentical=function(e,t){var r=o.bufferSize(e),i=o.bufferSize(t);if(r!=i)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0},o.prototype={size:function(){return this._buffer.byteLength},littleEndian:function(){return this._le=!0,this},bigEndian:function(){return this._le=!1,this},buffer:function(){return this._buffer},bytesLeft:function(){return this._buffer.byteLength-this._idx},skipBytes:function(e){return this._idx+=e+0,this},readUint8:function(){return this._bytes[this._idx++]},writeUint8:function(e){return this._bytes[this._idx++]=e,this},readInt8:function(){return this._view.getInt8(this._idx++)},writeInt8:function(e){return this._view.setInt8(this._idx++,e),this},readUint16:function(){var e=this._view.getUint16(this._idx,this._le);return this._idx+=2,e},writeUint16:function(e){return this._view.setUint16(this._idx,e,this._le),this._idx+=2,this},readUint32:function(){var e=this._view.getUint32(this._idx,this._le);return this._idx+=4,e},writeUint32:function(e){return this._view.setUint32(this._idx,e,this._le),this._idx+=4,this},readInt32:function(){var e=this._view.getInt32(this._idx,this._le);return this._idx+=4,e},writeInt32:function(e){return this._view.setInt32(this._idx,e,this._le),this._idx+=4,this},readFloat64:function(){var e=this._view.getFloat64(this._idx,this._le);return this._idx+=8,e},writeFloat64:function(e){return this._view.setFloat64(this._idx,e,this._le),this._idx+=8,this},readFloat64Array:function(e){var t,r=8*e,i=this._idx,n=this._buffer;if(i%8===0)t=new Float64Array(n,i,e);else if(n.slice)t=new Float64Array(n.slice(i,i+r));else{var a=new ArrayBuffer(r);o.bufferCopy(a,0,n,i,r),t=new Float64Array(a)}return this._idx+=r,t},readUint32Array:function(e){for(var t=[],o=0;o<e;o++)t.push(this.readUint32());return t},peek:function(e){return this._view.getUint8(e>=0?e:this._idx)},position:function(e){return null!=e?(this._idx=e,this):this._idx},readCString:function(e,t){for(var o="",r=e>=0?e:this.bytesLeft();r>0;){var i=this.readUint8();if(r--,0==i)break;if(i>127&&t){o=null;break}o+=String.fromCharCode(i)}return e>0&&r>0&&this.skipBytes(r),o},writeString:function(e,t){var o,r=0,i=e.length;t&&(i=Math.min(i,t));for(var n=0;n<i;n++)o=e.charCodeAt(n),o>127&&(g("#writeCString() Unicode value beyond ascii range"),o="?".charCodeAt(0)),this.writeUint8(o),r++;return r},writeCString:function(e,t){var o=t?t-1:null,r=this.writeString(e,o);if(this.writeUint8(0),r++,t)for(;r<t;)this.writeUint8(0),r++;return this},writeBuffer:function(e,t,r){return this._idx+=o.bufferCopy(this._buffer,this._idx,e,r,t),this}},Ke.format=function(e){var t=Ke.formatter(e),o=t.apply(null,Array.prototype.slice.call(arguments,1));return o},Ke.formatter=function(e){for(var t,o,n=/%([\',+0]*)([1-9]?)((?:\.[1-9])?)([sdifxX%])/g,a=[],l=[],s=0,p="";o=n.exec(e);)t=e.substring(s,n.lastIndex-o[0].length),"%%"==o[0]?p+=t+"%":(a.push(p+t),p="",l.push(o)),s=n.lastIndex;return a.push(p+e.substr(s)),function(){var t=a[0],o=arguments.length;o!=l.length&&i("[format()] Data does not match format string; format:",e,"data:",arguments);for(var n=0;n<o;n++)t+=r(arguments[n],l[n])+a[n+1];return t}},Xe.wildcardToRegExp=function(e){var t=e.split("*").map(function(e){return Xe.regexEscape(e)}).join(".*");return new RegExp("^"+t+"$")},Xe.expandoBuffer=function(e,t){var o,r=0,i=t>=1?t:1.2;return function(t){return t>r&&(r=Math.ceil(t*i),o=new e(r)),o}},Xe.copyElements=function(e,t,o,r,n,a){e===o&&r>t&&i("copy error");var l=1,s=0;a&&(l=-1,s=n-1);for(var p=0;p<n;p++,s+=l)o[p+r]=e[t+s]},Xe.extendBuffer=function(e,t,o){var r=Math.max(e.length,t),i=o||e.length,n=new e.constructor(r);return Xe.copyElements(e,0,n,0,i),n},Xe.mergeNames=function(e,t){var o;return e&&t&&(o=Xe.findStringPrefix(e,t).replace(/[-_]$/,"")),o||""},Xe.findStringPrefix=function(e,t){for(var o=0,r=e.length;o<r&&e[o]===t[o];o++);return e.substr(0,o)},Xe.isFiniteNumber=function(e){return 0===e||!!e&&e.constructor==Number&&e!==1/0&&e!==-(1/0)},Xe.parsePercent=function(e){var t,o=String(e),r=o.indexOf("%")>0;return t=r?Number(o.replace("%",""))/100:Number(o),t>=0&&t<=1||n(Xe.format("Invalid percentage: %s",o)),t};var ze={},Je={VERSION:We,LOGGING:!1,QUIET:!1,TRACING:!1,VERBOSE:!1,T:Ye,defs:{}};new Float64Array(1);var Qe;ze.enableLogging=function(){return Je.LOGGING=!0,ze},ze.printError=function(e){var t;if(Xe.isString(e)&&(e=new a(e)),!Je.LOGGING||"APIError"!=e.name)throw e;t=e.message,/Error/.test(t)||(t="Error: "+t),console.error(t),s("Run mapshaper -h to view help")},Je.error=function(){var e=Ke.toArray(arguments).join(" ");throw new Error(e)},Je.stop=function(){throw new a(Je.formatLogArgs(arguments))},Je.message=function(){Je.logArgs(arguments)},Je.formatLogArgs=function(e){return Xe.toArray(e).join(" ")},Je.formatStringsAsGrid=function(e){var t=e.reduce(function(e,t){return Math.max(e,t.length)},0),o=t+2,r=Math.floor(80/o)||1;return e.reduce(function(e,t,i){var n=i%r;return i>0&&0===n&&(e+="\n"),n<r-1&&(t=Xe.rpad(t,o-2," ")),e+"  "+t},"")},Je.logArgs=function(e){Je.LOGGING&&!Je.QUIET&&Xe.isArrayLike(e)&&(console.error||console.log).call(console,Je.formatLogArgs(e))},Je.getWorldBounds=function(e){return e=Xe.isFiniteNumber(e)?e:1e-10,[-180+e,-90+e,180-e,90-e]},Je.probablyDecimalDegreeBounds=function(e){var o=Je.getWorldBounds(-1),r=e instanceof t?e.toArray():e;return k(o,r)},Je.layerHasGeometry=function(e){return Je.layerHasPaths(e)||Je.layerHasPoints(e)},Je.layerHasPaths=function(e){return("polygon"==e.geometry_type||"polyline"==e.geometry_type)&&Je.layerHasNonNullShapes(e)},Je.layerHasPoints=function(e){return"point"==e.geometry_type&&Je.layerHasNonNullShapes(e)},Je.layerHasNonNullShapes=function(e){return Xe.some(e.shapes||[],function(e){return!!e})},Je.requireDataFields=function(e,t){e||n("Missing attribute data");var o=e.getFields(),r=Xe.difference(t,o);r.length>0&&n("Table is missing one or more fields:\n",r,"\nExisting fields:","\n"+Je.formatStringsAsGrid(o))},Je.requirePolygonLayer=function(e,t){e&&"polygon"===e.geometry_type||n(t||"Expected a polygon layer")},Je.requirePathLayer=function(e,t){e&&Je.layerHasPaths(e)||n(t||"Expected a polygon or polyline layer")};var $e=6378137,et=Math.PI/180;Je.calcArcBounds=function(e,t,o,r){var i,n,a,l,s,p,g=0|o,u=isNaN(r)?e.length-g:r+g;for(u>0&&(a=s=e[g],l=p=t[g]),g++;g<u;g++)i=e[g],n=t[g],i<a&&(a=i),i>s&&(s=i),n<l&&(l=n),n>p&&(p=n);return[a,l,s,p]},Je.reversePathCoords=function(e,t,o){for(var r,i=t,n=t+o-1;i<n;)r=e[i],e[i]=e[n],e[n]=r,i++,n--};var tt={R:$e,D2R:et,degreesToMeters:c,segmentHit:ee,segmentIntersection:K,distanceSq:h,distance2D:d,distance3D:y,innerAngle:C,innerAngle2:v,signedAngle:S,bearing:x,signedAngleSph:E,standardAngle:_,convLngLatToSph:P,lngLatToXYZ:R,xyzToLngLat:T,sphericalDistance:L,greatCircleDistance:M,pointSegDistSq:G,pointSegDistSq3D:D,innerAngle3D:b,triangleArea:I,triangleArea3D:F,cosine:w,cosine3D:O};j.prototype.init=function(e,t,o){return o?(this._i=e,this._inc=1):(this._i=e+t-1,this._inc=-1),this._n=t,this},j.prototype.hasNext=function(){var e=this._i;return this._n>0&&(this._i=e+this._inc,this.x=this._xx[e],this.y=this._yy[e],this.i=e,this._n--,!0)},U.prototype.hasNext=function(){var e=this._arc;return this._i<this._n!=!1&&(e.hasNext()?(this.x=e.x,this.y=e.y,!0):(this.nextArc(),this.hasNext()))},U.prototype.init=function(e){return this._ids=e,this._n=e.length,this.reset(),this},U.prototype.nextArc=function(){var e=this._i+1;e<this._n&&(this._arc=this._arcs.getArcIter(this._ids[e]),e>0&&this._arc.hasNext()),this._i=e},U.prototype.reset=function(){this._i=-1,this.nextArc()},B.prototype.inspect=function(){var e,t=this.getPointCount();return e=t<50?JSON.stringify(this.toArray()):"[ArcCollection ("+this.size()+")]"},Je.dedupArcCoords=function(e,t,o,r,i,n){for(var a,l,s,p,g,u=0,c=0;u<o;)p=e+u,a=r[p],l=i[p],g=a==a&&l==l&&(0===c||a!=r[p-1]||l!=i[p-1]),g&&(s=t+c,r[s]=a,i[s]=l,c++),n&&c>0&&(g||n[p]>n[s])&&(n[s]=n[p]),u++;return c>1?c:0},Je.countPointsInLayer=function(e){var t=0;return Je.layerHasPoints(e)&&Je.forEachPoint(e.shapes,function(){t++}),t},Je.getPointBounds=function(e){var o=new t;return Je.forEachPoint(e,function(e){o.mergePoint(e[0],e[1])}),o},Je.forEachPoint=function(e,t){e.forEach(function(e,o){for(var r=e?e.length:0,i=0;i<r;i++)t(e[i],o)})},Je.transformPointsInLayer=function(e,t){Je.layerHasPoints(e)&&Je.forEachPoint(e.shapes,function(e){var o=t(e[0],e[1]);e[0]=o[0],e[1]=o[1]})},Je.getAvgSegment=function(e){var t=0,o=e.forEachSegment(function(e,o,r,i){var n=r[e]-r[o],a=i[e]-i[o];t+=Math.sqrt(n*n+a*a)});return t/o||0},Je.getAvgSegment2=function(e){var t=0,o=0,r=e.forEachSegment(function(e,r,i,n){t+=Math.abs(i[e]-i[r]),o+=Math.abs(n[e]-n[r])});return[t/r||0,o/r||0]},Je.countArcsInShapes=function(e,t){Je.traversePaths(e,null,function(e){for(var o,r=e.arcs,i=0;i<r.length;i++)o=r[i],o<0&&(o=~o),t[o]++})},Je.findShapesByArcId=function(e,t,o){var r=o?new Uint8Array(o):[],i=[];return t.forEach(function(e){r[u(e)]=1}),e.forEach(function(e,t){var o=!1;Je.forEachArcId(e||[],function(e){o=o||1==r[u(e)]}),o&&i.push(t)}),i},Je.cloneShape=function(e){return e?e.map(function(e){return e.concat()}):null},Je.cloneShapes=function(e){return Xe.isArray(e)?e.map(Je.cloneShape):null},Je.pathsAreIdentical=function(e,t){if(e.length!=t.length)return!1;for(var o=0,r=e.length;o<r;o++)if(e[o]!=t[o])return!1;return!0},Je.reversePath=function(e){e.reverse();for(var t=0,o=e.length;t<o;t++)e[t]=~e[t]},Je.clampIntervalByPct=function(e,t){return t<=0?e=1/0:t>=1&&(e=0),e},Je.findNextRemovableVertices=function(e,t,o,r){var i,n,a=Je.findNextRemovableVertex(e,t,o,r);if(a>-1)for(n=e[a],i=[a];++a<r;)e[a]==n&&i.push(a);return i||null},Je.findNextRemovableVertex=function(e,t,o,r){var i,n,a=0,l=-1;o>r&&(i=o,o=r,r=i);for(var s=o+1;s<r;s++)n=e[s],n<t&&n>a&&(l=s,a=n);return l},Je.forEachArcId=function(e,t){for(var o,r=0;r<e.length;r++)if(o=e[r],o instanceof Array)Je.forEachArcId(o,t);else if(Xe.isInteger(o)){var n=t(o);void 0!==n&&(e[r]=n)}else o&&i("Non-integer arc id in:",e)},Je.forEachPath=function(e,t){Je.editPaths(e,t)},Je.editShapes=function(e,t){for(var o=0,r=e.length;o<r;o++)e[o]=Je.editPaths(e[o],t)},Je.editPaths=function(e,t){if(!e)return null;Xe.isArray(e)||i("[editPaths()] Expected an array, found:",arr);for(var o,r=0,n=e.length,a=0;a<n;a++)o=t(e[a],a,e),null===o?(r++,e[a]=null):Xe.isArray(o)&&(e[a]=o);return r==n?null:r>0?e.filter(function(e){return!!e}):e},Je.forEachPathSegment=function(e,t,o){Je.forEachArcId(e,function(e){t.forEachArcSegment(e,o)})},Je.traversePaths=function(e,t,o,r){var i=0;e.forEach(function(e,n){if(e&&0!==e.length){var a,l;r&&r(n);for(var s=0,p=e.length;s<p;s++)if(a=e[s],o&&o({i:s,shapeId:n,shape:e,arcs:a}),t)for(var g=0,u=a.length;g<u;g++,i++)l=a[g],t({i:g,shapeId:n,partId:s,arcId:l,segId:i})}})},Je.arcHasLength=function(e,t){var o,r,i=t.getArcIter(e);if(i.hasNext())for(o=i.x,r=i.y;i.hasNext();)if(i.x!=o||i.y!=r)return!0;return!1},Je.filterEmptyArcs=function(e,t){if(!e)return null;var o=[];return e.forEach(function(e){for(var r=[],i=0;i<e.length;i++)Je.arcHasLength(e[i],t)&&r.push(e[i]);r.length>0&&o.push(r)}),o.length>0?o:null},Je.groupPolygonRings=function(e){var t=[],o=[];e&&e.forEach(function(e){e.area>0?t.push(e):e.area<0&&o.push(e)});var r=t.map(function(e){return[e]});return o.forEach(function(e){for(var o=-1,i=0,n=0,a=t.length;n<a;n++){var l=t[n],s=l.bounds.contains(e.bounds)&&l.area>-e.area;s&&(0===i||l.area<i)&&(i=l.area,o=n)}o==-1?p("[groupPolygonRings()] polygon hole is missing a containing ring, dropping."):r[o].push(e)}),r},Je.getPathMetadata=function(e,t,o){for(var r,i=[],n=0,a=e&&e.length;n<a;n++)r=e[n],i.push({ids:r,area:"polygon"==o?tt.getPlanarPathArea(r,t):0,bounds:t.getSimpleShapeBounds(r)});return i},Je.quantizeArcs=function(e,o){var r=e.getBounds(),i=new t(0,0,o-1,o-1),n=r.getTransform(i),a=n.invert();e.transformPoints(function(e,t){var o=n.transform(e,t);return a.transform(Math.round(o[0]),Math.round(o[1]))})},ze.affine=function(e,t,o){var r,i,n,a=t.arcs,l=[],s=[],p=[];t.layers.filter(Je.layerHasGeometry).forEach(function(r){var i,n=[],a=[];e.indexOf(r)==-1?a=r.shapes:o.where?(i=Je.compileValueExpression(o.where,r,t.arcs),r.shapes.forEach(function(e,t){(i(t)?n:a).push(e)})):n=r.shapes,"point"==r.geometry_type?p=p.concat(n):(l=l.concat(n),s=s.concat(a))}),o=Je.getAffineOpts({arcs:t.arcs,layers:[{geometry_type:"point",shapes:p},{geometry_type:"polyline",shapes:l}]},o),n=Je.getAffineTransform(o.rotate,o.scale,o.shift,o.anchor),l.length>0&&(r=new Uint8Array(a.size()),i=new Uint8Array(a.size()),Je.countArcsInShapes(l,r),s.length>0&&(Je.countArcsInShapes(s,i),Je.applyArrayMask(i,r),t.arcs=Je.duplicateSelectedArcs(s,a,i)),t.arcs.transformPoints(function(e,t,o){if(o<r.length&&r[o]>0)return n(e,t)})),Je.forEachPoint(p,function(e){var t=n(e[0],e[1]);e[0]=t[0],e[1]=t[1]})},Je.getAffineOpts=function(e,t){var o,r={shift:t.shift||[0,0],rotate:t.rotate||0,scale:t.scale||1};return t.anchor?r.anchor=t.anchor:(o=Je.getDatasetBounds(e),r.anchor=[o.centerX(),o.centerY()]),r},Je.getAffineTransform=function(e,t,o,r){var i=e*Math.PI/180,n=t*Math.cos(i),a=-t*Math.sin(i);return function(e,t){var i=n*(e-r[0])-a*(t-r[1])+o[0]+r[0],l=a*(e-r[0])+n*(t-r[1])+o[1]+r[1];return[i,l]}},Je.applyArrayMask=function(e,t){for(var o=0,r=e.length;o<r;o++)0===t[o]&&(e[o]=0)},Je.duplicateSelectedArcs=function(e,t,o){for(var r,i=0,n=0,a=t.getVertexData(),l=[],s=[],p=[],g=[],c=0,y=o.length;c<y;c++)o[c]>0&&(g[c]=t.size()+i,r=a.nn[c],Xe.copyElements(a.xx,a.ii[c],l,n,r),Xe.copyElements(a.yy,a.ii[c],s,n,r),p.push(r),n+=r,i++);return Je.forEachArcId(e,function(e){var t=u(e);if(o[t]>0)return e<0?~g[t]:g[t]}),Je.mergeArcs([t,new B(p,l,s)])},Je.divideFeaturesByType=function(e,t,o){var r=Xe.uniq(o),i=r.map(function(r){for(var i,n=[],a=[],l=0,s=0,p=e.length;s<p;s++)o[s]==r&&(r&&a.push(e[s]),i=t[s],n.push(i),i||l++);return{geometry_type:r,shapes:a,data:l<a.length?new ne(n):null}});return i},Je.splitDataset=function(e){return e.layers.map(function(t){var o={arcs:e.arcs,layers:[t],info:e.info};return Je.dissolveArcs(o),o})},Je.copyDataset=function(e){var t=Xe.extend({},e);return t.layers=t.layers.map(Je.copyLayer),t.arcs&&(t.arcs=t.arcs.getFilteredCopy()),t},Je.copyDatasetForExport=function(e){var t=Xe.extend({},e);return t.layers=t.layers.map(Je.copyLayerShapes),t.arcs&&(t.arcs=t.arcs.getFilteredCopy()),t},Je.copyDatasetForRenaming=function(e){return Xe.defaults({layers:e.layers.map(function(e){return Xe.extend({},e)})},e)},Je.getOutputLayer=function(e,t){return t&&t.no_replace?{geometry_type:e.geometry_type}:e},Je.copyLayer=function(e){var t=Je.copyLayerShapes(e);return t.data&&(t.data=t.data.clone()),t},Je.copyLayerShapes=function(e){var t=Xe.extend({},e);return e.shapes&&(t.shapes=Je.cloneShapes(e.shapes)),t},Je.getDatasetBounds=function(e){var o=new t;return e.layers.forEach(function(t){var r=Je.getLayerBounds(t,e.arcs);r&&o.mergeBounds(r)}),o},Je.datasetHasPaths=function(e){return Xe.some(e.layers,function(e){return Je.layerHasPaths(e)})},Je.cleanupArcs=function(e){if(e.arcs&&!Xe.some(e.layers,Je.layerHasPaths))return e.arcs=null,!0},Je.countMultiPartFeatures=function(e){for(var t=0,o=0,r=e.length;o<r;o++)e[o]&&e[o].length>1&&t++;return t},Je.getFeatureCount=function(e){var t=0;return e.data?t=e.data.size():e.shapes&&(t=e.shapes.length),t},Je.getLayerBounds=function(e,t){var o=null;return"point"==e.geometry_type?o=Je.getPointBounds(e.shapes):"polygon"!=e.geometry_type&&"polyline"!=e.geometry_type||(o=Je.getPathBounds(e.shapes,t)),o},Je.getPathBounds=function(e,o){var r=new t;return Je.forEachArcId(e,function(e){o.mergeArcBounds(e,r)}),r},Je.replaceLayers=function(e,t,o){var r=e.layers.concat();Xe.repeat(Math.max(t.length,o.length),function(e){var i=t[e],n=o[e],a=i?r.indexOf(i):r.length;i&&r.splice(a,1),n&&r.splice(a,0,n)}),e.layers=r},Je.isolateLayer=function(e,t){return Xe.defaults({layers:t.layers.filter(function(t){return t==e})},t)},Je.transformPoints=function(e,t){e.arcs&&e.arcs.transformPoints(t),e.layers.forEach(function(e){Je.layerHasPoints(e)&&Je.transformPointsInLayer(e,t)})},Je.initDataTable=function(e){e.data=new ne(Je.getFeatureCount(e))},Je.findNodeTopology=function(e,t){var o=2*e.size(),r=new Float64Array(o),i=new Float64Array(o),n=new Int32Array(o);e.forEach2(function(e,o,a,l,s,p){if(!t||t(p)){var g=e,u=e+o-1,c=2*p,y=c+1;r[c]=a[g],i[c]=l[g],n[c]=p,r[y]=a[u],i[y]=l[u],n[y]=p}});var a=Se(r,i);return{xx:r,yy:i,ids:n,chains:a}},tt.getShapeArea=function(e,t){return(t.isPlanar()?tt.getPlanarShapeArea:tt.getSphericalShapeArea)(e,t)},tt.getPlanarShapeArea=function(e,t){return(e||[]).reduce(function(e,o){return e+tt.getPlanarPathArea(o,t)},0)},tt.getSphericalShapeArea=function(e,t){return t.isPlanar()&&i("[getSphericalShapeArea()] Function requires decimal degree coordinates"),(e||[]).reduce(function(e,o){return e+tt.getSphericalPathArea(o,t)},0)},tt.getMaxPath=function(e,t){var o=0;return(e||[]).reduce(function(e,r){var i=t.getSimpleShapeBounds(r).area();return i>o&&(o=i,e=r),e},null)},tt.getAvgPathXY=function(e,t){var o=t.getShapeIter(e);if(!o.hasNext())return null;for(var r=o.x,i=o.y,n=0,a=0,l=0;o.hasNext();)n++,a+=o.x,l+=o.y;return 0!==n&&o.x===r&&o.y===i||(a+=r,l+=i,n++),{x:a/n,y:l/n}},tt.testPointInPolygon=function(e,t,o,r){var i=!1,n=!1;return o&&o.forEach(function(o){var a=tt.testPointInRing(e,t,o,r);1==a?i=!i:a==-1&&(n=!0)}),n||i},tt.getPointToPathDistance=function(e,t,o,r){
var i=r.getShapeIter(o);if(!i.hasNext())return 1/0;for(var n,a,l,s,p=i.x,g=i.y,u=h(e,t,p,g),c=u;i.hasNext();)l=i.x,s=i.y,n=h(e,t,l,s),a=h(p,g,l,s),c=Math.min(c,N(u,n,a)),p=l,g=s,u=n;return Math.sqrt(c)},tt.getYIntercept=function(e,t,o,r,i){return o+(e-t)*(i-o)/(r-t)},tt.getXIntercept=function(e,t,o,r,i){return t+(e-o)*(r-t)/(i-o)},tt.getPointToShapeDistance=function(e,t,o,r){var i=(o||[]).reduce(function(o,i){var n=tt.getPointToPathDistance(e,t,i,r);return Math.min(o,n)},1/0);return i},tt.testPointInRing=function(e,t,o,r){var i=!1,n=!1;return Je.forEachPathSegment(o,r,function(o,r,a,l){var s=tt.testRayIntersection(e,t,a[o],l[o],a[r],l[r]);1==s?i=!i:isNaN(s)&&(n=!0)}),n?-1:i?1:0},tt.testRayIntersection=function(e,t,o,r,i,n){var a=tt.getRayIntersection(e,t,o,r,i,n);return a!=a?NaN:a==-(1/0)?0:1},tt.getRayIntersection=function(e,t,o,r,i,n){var a,l=-(1/0);return e<o&&e<i||e>o&&e>i||t>r&&t>n||(e===o||e===i?e===o&&e===i?t!=r&&t!=n&&t>r==t>n||(l=NaN):e===o?t===r?l=NaN:i<o&&t<r&&(l=r):t===n?l=NaN:o<i&&t<n&&(l=n):(a=tt.getYIntercept(e,o,r,i,n),a>t?l=a:a==t&&(l=NaN))),l},tt.getSphericalPathArea=function(e,t){for(var o,r,i,n,a=t.getShapeIter(e),l=0,s=!1,p=Math.PI/180;a.hasNext();)o=a.x*p,r=Math.sin(a.y*p),s?l+=(o-i)*(2+r+n):s=!0,i=o,n=r;return l/2*6378137*6378137},tt.getPlanarPathArea2=function(e){for(var t,o,r,i,n,a,l,s=0,p=0,g=e.length;p<g;p++)l=e[p],0===p?(t=0,o=0,n=-l[0],a=-l[1]):(t=l[0]+n,o=l[1]+a,s+=t*i-r*o),r=t,i=o;return s/2},tt.getPlanarPathArea=function(e,t){var o,r,i,n,a,l,s=t.getShapeIter(e),p=0;if(s.hasNext())for(o=0,r=0,a=-s.x,l=-s.y;s.hasNext();)i=o,n=r,o=s.x+a,r=s.y+l,p+=o*n-i*r;return p/2},tt.countVerticesInPath=function(e,t){for(var o=t.getShapeIter(e),r=0;o.hasNext();)r++;return r},tt.getPathBounds=function(e){for(var o=new t,r=0,i=e.length;r<i;r++)o.mergePoint(e[r][0],e[r][1]);return o},tt.transposePoints=function(e){for(var t=[],o=[],r=e.length,i=0;i<r;i++)t.push(e[i][0]),o.push(e[i][1]);return[t,o]},tt.calcPathLen=function(){function e(e,r,i,n){t+=o(i[e],n[e],i[r],n[r])}var t,o;return function(r,n,a){a&&n.isPlanar()&&i("Expected lat-long coordinates"),o=a?M:d,t=0;for(var l=0,s=r.length;l<s;l++)n.forEachArcSegment(r[l],e);return t}}(),Je.sortSegmentIds=function(e,t){Je.orderSegmentIds(e,t),Je.quicksortSegmentIds(e,t,0,t.length-2)},Je.orderSegmentIds=function(e,t,o){function r(e,o){var r=t[e];t[e]=t[o],t[o]=r}for(var i=0,n=t.length;i<n;i+=2)e[t[i]]>e[t[i+1]]&&r(i,i+1)},Je.insertionSortSegmentIds=function(e,t,o,r){for(var i,n,a=o+2;a<=r;a+=2){i=t[a],n=t[a+1];for(var l=a-2;l>=o&&e[i]<e[t[l]];l-=2)t[l+2]=t[l],t[l+3]=t[l+1];t[l+2]=i,t[l+3]=n}},Je.quicksortSegmentIds=function(e,t,o,r){for(var i,n,a=o,l=r;a<r;){for(i=e[t[o+r>>2<<1]];a<=l;){for(;e[t[a]]<i;)a+=2;for(;e[t[l]]>i;)l-=2;a<=l&&(n=t[a],t[a]=t[l],t[l]=n,n=t[a+1],t[a+1]=t[l+1],t[l+1]=n,a+=2,l-=2)}if(l-o<40?Je.insertionSortSegmentIds(e,t,o,l):Je.quicksortSegmentIds(e,t,o,l),r-a<40)return void Je.insertionSortSegmentIds(e,t,a,r);o=a,l=r}},tt.segmentIntersection=K,tt.segmentHit=ee,tt.lineIntersection=Y,tt.orient2D=$,tt.outsideRange=J,tt.debugSegmentIntersection=function(e,t,o,r,i,n,a,l,s){g("[debugSegmentIntersection()]"),g("  s1\n  dx:",Math.abs(t-r),"\n  dy:",Math.abs(o-i)),g("  s2\n  dx:",Math.abs(n-l),"\n  dy:",Math.abs(a-s)),g("  s1 xx:",t,r),g("  s2 xx:",n,l),g("  s1 yy:",o,i),g("  s2 yy:",a,s),g("  angle:",tt.signedAngle(t,o,r,i,l-n+r,s-a+i))},tt.clampToCloseRange=function(e,t,o){var r;return tt.outsideRange(e,t,o)&&(r=Math.abs(e-t)<Math.abs(e-o)?t:o,Math.abs(e-r)>1e-16&&g("[clampToCloseRange()] large clamping interval",e,t,o),e=r),e},Je.getIntersectionPoints=function(e){return e.map(function(e){return[e.x,e.y]})},Je.findSegmentIntersections=function(){function e(e){var o=4*e;return(!t||t.byteLength<o)&&(t=new ArrayBuffer(o)),new Uint32Array(t,0,e)}var t;return function(t){function o(e){return Math.floor((p-1)*(e-l)/s)}function r(e){return 0}var i,n,a=t.getBounds(),l=(!t.isPlanar()&&k(Je.getWorldBounds(),a.toArray()),a.ymin),s=a.ymax-l,p=Je.calcSegmentIntersectionStripeCount(t),g=new Uint32Array(p),u=p>1?o:r;t.forEachSegment(function(e,t,o,r){for(var i=u(r[e]),n=u(r[t]);;){if(g[i]=g[i]+2,i==n)break;i+=n>i?1:-1}});var c=e(Xe.sum(g)),y=0,h=[];Xe.forEach(g,function(e){var t=y;y+=e,h.push(c.subarray(t,y))}),Xe.initializeArray(g,0),t.forEachSegment(function(e,t,o,r){for(var i,n,a=u(r[e]),l=u(r[t]);;){if(i=g[a],g[a]=i+2,n=h[a],n[i]=e,n[i+1]=t,a==l)break;a+=l>a?1:-1}});var d,f=t.getVertexData(),m=[];for(i=0;i<p;i++)for(d=Je.intersectSegments(h[i],f.xx,f.yy),n=0;n<d.length;n++)m.push(d[n]);return Je.dedupIntersections(m)}}(),Je.sortIntersections=function(e){e.sort(function(e,t){return e.x-t.x||e.y-t.y})},Je.dedupIntersections=function(e){var t={};return e.filter(function(e){var o=Je.getIntersectionKey(e);return!(o in t)&&(t[o]=!0,!0)})},Je.getIntersectionKey=function(e){return e.a.join(",")+";"+e.b.join(",")},Je.calcSegmentIntersectionStripeCount=function(e){var t=e.getBounds().height(),o=Je.getAvgSegment2(e)[1],r=1;return o>0&&t>0&&(r=Math.ceil(t/o/20)),r||1},Je.intersectSegments=function(e,t,o){var r,i,n,a,l,s,p,g,u,c,y,h,d,f,m,v,_,S=e.length-2,x=[];for(Je.sortSegmentIds(t,e),v=0;v<S;){for(r=e[v],i=e[v+1],l=t[r],s=t[i],u=o[r],c=o[i],_=v;_<S&&(_+=2,n=e[_],p=t[n],!(s<p));){if(y=o[n],a=e[_+1],g=t[a],h=o[a],u>=y){if(u>h&&c>y&&c>h)continue}else if(u<h&&c<y&&c<h)continue;r!=n&&r!=a&&i!=n&&i!=a&&(d=K(l,u,s,c,p,y,g,h),d&&(f=[r,i],m=[n,a],x.push(Je.formatIntersection(d,f,m,t,o)),4==d.length&&x.push(Je.formatIntersection(d.slice(2),f,m,t,o))))}v+=2}return x},Je.formatIntersection=function(e,t,o,r,i){var n,a,l=e[0],s=e[1];return t=Je.formatIntersectingSegment(l,s,t[0],t[1],r,i),o=Je.formatIntersectingSegment(l,s,o[0],o[1],r,i),n=t[0]<o[0]?t:o,a=n==t?o:t,{x:l,y:s,a:n,b:a}},Je.formatIntersectingSegment=function(e,t,o,r,i,n){var a=o<r?o:r,l=a===o?r:o;return i[a]==e&&n[a]==t?l=a:i[l]==e&&n[l]==t&&(a=l),[a,l]},Je.getSelfIntersectionSplitter=function(e){function t(e){for(var t=null,r=0;r<e.length-1;r++)if(t=o(e,e[r]))return t;return Je.removeSpikesInPath(e),e.length>0?[e]:[]}function o(t,o){for(var n,a=e.getConnectedArcs(o),l=[],s=0;s<a.length;s++)n=~a[s],i(t,n)&&l.push(n);return l.length>1?Je.splitPathByIds(t,l).reduce(r,null):null}function r(e,o){var r=t(o);return e?e.concat(r):r}function i(e,t){for(var o=0,r=e.length;o<r;o++)if(e[o]===t)return!0;return!1}return t},Je.splitPathByIds=function(e,t){var o=[],r=t.map(function(t){var o=e.indexOf(t);return o==-1&&i("[splitPathByIds()] missing arc:",t),o});Xe.genericSort(r,!0),r[0]>0&&o.push(e.slice(0,r[0]));for(var n=0,a=r.length;n<a;n++)n<a-1?o.push(e.slice(r[n],r[n+1])):o.push(e.slice(r[n]));return o.length>t.length&&(o[0]=o[0].concat(o.pop())),o},Je.getHoleDivider=function(e,t){var o=Je.getSelfIntersectionSplitter(e);return function(r,i,n){var a=t?tt.getSphericalPathArea:tt.getPlanarPathArea;Je.forEachPath(r,function(t){var r=o(t);0===r.length&&g("[getRingDivider()] Defective path:",t),r.forEach(function(t,o){var r=a(t,e.arcs);r>0?i.push(t):r<0&&n.push(t)})})}},Je.cleanShapes=function(e,t,o){for(var r=0,i=e.length;r<i;r++)e[r]=Je.cleanShape(e[r],t,o)},Je.cleanShape=function(e,t,o){return Je.editPaths(e,function(e){var r=Je.cleanPath(e,t);return"polygon"==o&&r&&(Je.removeSpikesInPath(r),0===tt.getPlanarPathArea(r,t)&&(r=null)),r})},Je.cleanPath=function(e,t){for(var o=0,r=0,i=e.length;r<i;r++)t.arcIsDegenerate(e[r])&&(o++,e[r]=null);return o>0?e.filter(function(e){return null!==e}):e},Je.removeSpikesInPath=function(e){var t=e.length;if(t>=2){if(e[0]==~e[t-1])e.pop(),e.shift();else for(var o=1;o<t;o++)if(e[o-1]==~e[o]){e.splice(o-1,2);break}e.length<t&&Je.removeSpikesInPath(e)}},Je.repairPolygonGeometry=function(e,t,o){var r=Je.addIntersectionCuts(t);return e.forEach(function(e){Je.repairSelfIntersections(e,r)}),e},Je.repairSelfIntersections=function(e,t){function o(e){var o=[];return Je.forEachPath(e,function(e){var n=r(e);if(0===n.length)i("[cleanPolygon()] Defective path:",e);else if(1==n.length)o.push(n[0]);else{var a,l=tt.getPlanarPathArea(e,t.arcs),s=l>0?1:-1;n.reduce(function(e,o,r){var i=tt.getPlanarPathArea(o,t.arcs)*s;return i>e&&(a=o,e=i),e},0);a&&o.push(a)}}),o.length>0?o:null}var r=Je.getSelfIntersectionSplitter(t);e.shapes=e.shapes.map(function(e,t){return o(e)})},Je.addIntersectionCuts=function(e,t){var o=e.arcs,r=Je.getHighPrecisionSnapInterval(o),i=t&&t.no_snap?0:Je.snapCoordsByInterval(o,r),n=o.dedupCoords();(i>0||n>0)&&ze.buildTopology(e);var a=Je.divideArcs(o),l=new V(o);return e.layers.forEach(function(e){Je.layerHasPaths(e)&&(Je.updateArcIds(e.shapes,a,l),Je.cleanShapes(e.shapes,o,e.geometry_type))}),l},Je.divideArcs=function(e){var t=Je.findClippingPoints(e),o=Je.insertCutPoints(t,e);return e.dedupCoords(),o},Je.insertCutPoints=function(e,t){var o,r,n,a,l=t.getVertexData(),s=l.xx,p=l.yy,g=l.nn,u=0,c=0,y=[],h=t.size(),d=new Uint32Array(h),f=Je.filterSortedCutPoints(Je.sortCutPoints(e,s,p),t),m=t.getPointCount()+2*f.length,v=new Float64Array(m),_=new Float64Array(m);f.reverse(),a=f.pop();for(var S=0,x=0;S<h;S++){for(n=g[S],d[S]=x,o=0,r=0;o<n;){for(v[c]=s[u],_[c]=p[u],c++,r++;a&&a.i==u;)v[c]=a.x,_[c]=a.y,c++,r++,y[x++]=r,r=0,v[c]=a.x,_[c]=a.y,c++,r++,a=f.pop();o++,u++}y[x++]=r}return c!=m&&i("[insertCutPoints()] Counting error"),t.updateVertexData(y,v,_,null),d},Je.convertIntersectionsToCutPoints=function(e,t,o){for(var r,i,n,a=[],l=0,s=e.length;l<s;l++)r=e[l],i=Je.getCutPoint(r.x,r.y,r.a[0],r.a[1],t,o),n=Je.getCutPoint(r.x,r.y,r.b[0],r.b[1],t,o),i&&a.push(i),n&&a.push(n);return a},Je.getCutPoint=function(e,t,o,r,n,a){var l=n[o],s=a[o],p=n[r],u=a[r];return(r<o||r>o+1)&&i("Out-of-sequence arc ids:",o,r),tt.outsideRange(e,l,p)||tt.outsideRange(t,s,u)?(g("[getCutPoint()] Coordinate range error"),null):{x:e,y:t,i:o}},Je.sortCutPoints=function(e,t,o){return e.sort(function(e,r){return e.i-r.i||Math.abs(e.x-t[e.i])-Math.abs(r.x-t[r.i])||Math.abs(e.y-o[e.i])-Math.abs(r.y-o[r.i])}),e},Je.filterSortedCutPoints=function(e,t){var o=[],r=0;return t.forEach2(function(t,i,n,a){for(var l,s,p=t+i-1,g=n[t],u=a[t],c=n[p],y=a[p];r<e.length&&e[r].i<=p;)l=e[r],s=o[o.length-1],l.x==g&&l.y==u||l.x==c&&l.y==y||s&&s.x==l.x&&s.y==l.y&&s.i==l.i||o.push(l),r++}),o},Je.findClippingPoints=function(e){var t=Je.findSegmentIntersections(e),o=e.getVertexData();return Je.convertIntersectionsToCutPoints(t,o.xx,o.yy)},Je.updateArcIds=function(e,t,o){function r(e){if(e){for(var t=[],o=0;o<e.length;o++)i(e[o],t);n.push(t)}}function i(e,r){var i,n=e<0,l=n?~e:e,s=t[l],p=(l>=t.length-1?a:t[l+1])-1;do n?(i=~p,p--):(i=s,s++),o&&(i=o.findMatchingArc(i)),r.push(i);while(p-s>=0)}for(var n,a=o.arcs.size(),l=0;l<e.length;l++)n=[],Je.forEachPath(e[l],r),e[l]=n},Je.getRightmostArc=function(e,t,o){var r=t.getConnectedArcs(e);return o&&(r=r.filter(o)),0===r.length?e:Je.getRighmostArc2(e,r,t.arcs)},Je.getRighmostArc2=function(e,t,o){var r,n,a,l,s,p=o.getVertexData(),g=p.xx,u=p.yy,c=o.indexOfVertex(e,-1),y=g[c],h=u[c],d=o.indexOfVertex(e,-2),f=g[d],m=u[d],v=e;for(t.length>0&&(v=t[0],r=o.indexOfVertex(v,-2)),s=1;s<t.length;s++)n=t[s],a=o.indexOfVertex(n,-2),l=Je.chooseRighthandPath(f,m,y,h,g[r],u[r],g[a],u[a]),2==l&&(v=n,r=a);return v==e&&i("Pathfinder error"),v},Je.chooseRighthandPath=function(e,t,o,r,n,a,l,s){var p,u=tt.signedAngle(e,t,o,r,n,a),c=tt.signedAngle(e,t,o,r,l,s);return u<=0||c<=0?(g("[chooseRighthandPath()] 0 angle(s):",u,c),u<=0&&g("  A orient2D:",tt.orient2D(e,t,o,r,n,a)),c<=0&&g("  B orient2D:",tt.orient2D(e,t,o,r,l,s)),p=u>0?1:c>0?2:0):u<c?p=1:c<u?p=2:isNaN(u)||isNaN(c)?i("Invalid node geometry"):(p=Je.chooseRighthandVector(n-o,a-r,l-o,s-r),g("[chooseRighthandVector()] code:",p,"angle:",u),g(e,t,o,r,n,a,l,s)),p},Je.chooseRighthandVector=function(e,t,o,r){var i,n=tt.orient2D(e,t,0,0,o,r);return i=n>0?2:n<0?1:0},Je.setBits=function(e,t,o){return e&~o|t&o},Je.andBits=function(e,t,o){return e&(~o|t)},Je.setRouteBits=function(e,t,o){var r,i=u(t);i==t?r=-4:(r=-49,e<<=4),o[i]&=e|r},Je.getRouteBits=function(e,t){var o=u(e),r=t[o];return o!=e&&(r>>=4),7&r},Je.openArcRoutes=function(e,t,o,r,i,n,a){Je.forEachArcId(e,function(e){var l=e<0,s=l?~e:e,p=o[s],u=l?i:r,c=l?r:i,y=p;t.arcIsLollipop(e)?(g("lollipop"),y=0):(u&&(y|=3),c&&(y|=48),a>0&&(y|=a),n&&34===(34&y)&&(y&=-18)),o[s]=y})},Je.closeArcRoutes=function(e,t,o,r,i,n){Je.forEachArcId(e,function(e){var t=e<0,a=t?~e:e,l=o[a],s=255,p=t?i:r,g=t?r:i;p&&(n&&(s&=-2),s^=2),g&&(n&&(s&=-17),s^=32),o[a]=l&s})},Je.getPathFinder=function(e,t,o){function r(t){return~Je.getRightmostArc(t,e,i)}var i=null;return o&&(i=function(e){return o(~e)}),function(e){var o,i=[],n=e;do{if(!t(n))return null;if(i.push(n),o=n,n=r(o),n==~o)return s("Pathfinder warning: dead-end path"),null}while(n!=e);return 0===i.length?null:i}},Je.getRingIntersector=function(e,t,o){function r(e){var t=Je.getRouteBits(e,o);return 1==(1&t)}function i(e){var t=Je.getRouteBits(e,o),r=!1;return 3==t&&(r=!0,Je.setRouteBits(1,e,o)),r}var n=e.arcs,a=Je.getPathFinder(e,i,r);return o=o||new Uint8Array(n.size()),function(e){var r,i="dissolve"==t,l=!0,s="flatten"==t;return e.length>0?(r=[],Je.openArcRoutes(e,n,o,l,s,i),Je.forEachPath(e,function(e){for(var t,o=0,i=e.length;o<i;o++)t=a(e[o]),t&&r.push(t)}),Je.closeArcRoutes(e,n,o,l,s,!0)):r=e,r}},Je.debugFlags=function(e){function t(e){for(var t="",o=0;o<8;o++)t+=(e&1<<o)>0?"1":"0",o<7&&(t+=" "),3==o&&(t+=" ");return t}var o=[];Xe.forEach(e,function(e){o.push(t(e))}),s(o)},Je.getEncodings=function(){var e=require("iconv-lite");return e.encodingExists("ascii"),Object.keys(e.encodings)},Je.validateEncoding=function(e){return Je.encodingIsSupported(e)||n("Unknown encoding:",e,"\nRun the -encodings command see a list of supported encodings"),e},Je.encodingIsSupported=function(e){var t=Je.standardizeEncodingName(e);return Xe.contains(Je.getEncodings(),t)},Je.decodeString=function(e,t){var o=require("iconv-lite"),r=o.decode(e,t);return 65279==r.charCodeAt(0)&&(r=r.substr(1)),r},Je.standardizeEncodingName=function(e){return e.toLowerCase().replace(/[_-]/g,"")},Je.printEncodings=function(){var e=Je.getEncodings().filter(function(e){return!/^(_|cs|internal|ibm|isoir|singlebyte|table|[0-9]|l[0-9]|windows)/.test(e)});e.sort(),s("Supported encodings:\n"+Je.formatStringsAsGrid(e))},Je.detectEncoding=function(e){var t=null;return Je.looksLikeUtf8(e)?t="utf8":Je.looksLikeWin1252(e)&&(t="win1252"),t},Je.decodeSamples=function(e,t){return t.map(function(t){return Je.decodeString(t,e).trim()}).join("\n")},Je.formatSamples=function(e){return Je.formatStringsAsGrid(e.split("\n"))},Je.looksLikeWin1252=function(e){var t="abcdefghijklmnopqrstuvwxyz0123456789.'\"?+-\n,:;/|_$% ",o="ßàáâãäåæçèéêëìíîïðñòóôõöøùúûüýÿ°–",r=Je.decodeSamples("win1252",e),i=Je.getCharScore(r,t),n=Je.getCharScore(r,o+t);return n>.97&&i>.7},Je.looksLikeUtf8=function(e){var t=Je.decodeSamples("utf8",e);return t.indexOf("�")==-1},Je.replaceUtf8ReplacementChar=function(e){for(var t=!1,o=0,r=e.length;o<r;o++)239==e[o]&&o+2<r&&191==e[o+1]&&189==e[o+2]&&(t||(e=new Qe(e),t=!0),e[o]=e[o+1]=e[o+2]=63);return e},Je.getCharScore=function(e,t){var o={},r=0;e=e.toLowerCase();for(var i=0,n=t.length;i<n;i++)o[t[i]]=1;for(i=0,n=e.length;i<n;i++)r+=o[e[i]]||0;return r/e.length},Je.insertFieldValues=function(e,t,o){var r=Je.getFeatureCount(e)||o.length,i=e.data=e.data||new ne(r);i.getRecords();Je.insertFieldValues2(t,i.getRecords(),o)},Je.insertFieldValues2=function(e,t,o){var r,i,n,a=t.length;for(r=0,a=t.length;r<a;r++)i=t[r],n=o[r],i||(i=t[r]={}),i[e]=void 0===n?null:n},Je.getValueType=function(e){var t=null;return Xe.isString(e)?t="string":Xe.isNumber(e)?t="number":Xe.isBoolean(e)?t="boolean":Xe.isObject(e)&&(t="object"),t},Je.fixInconsistentFields=function(e){var t=Je.findIncompleteFields(e);Je.patchMissingFields(e,t)},Je.findIncompleteFields=function(e){var t,o,r,i={};for(t=0;t<e.length;t++)for(r=Object.keys(e[t]||{}),o=0;o<r.length;o++)i[r[o]]=(0|i[r[o]])+1;return Object.keys(i).filter(function(t){return i[t]<e.length})},Je.patchMissingFields=function(e,t){var o,r,i,n;for(r=0;r<e.length;r++)for(o=e[r]||(e[r]={}),i=0;i<t.length;i++)n=t[i],n in o==!1&&(o[n]=void 0)},Je.getColumnType=function(e,t){for(var o,r=null,i=t.getRecords(),n=0,a=t.size();n<a&&(o=i[n]||{},!(r=Je.getValueType(o[e])));n++);return r},Je.deleteFields=function(e,t){e.getFields().forEach(function(o){t(o)&&e.deleteField(o)})},Je.isInvalidFieldName=function(e){return/^\s*$/.test(e)},Je.getUniqFieldNames=function(e,t){var o={};return e.map(function(e){var r,i=0;do r=Je.adjustFieldName(e,t,i),i++;while(r in o);return o[r]=!0,r})},Je.adjustFieldName=function(e,t,o){var r,i;return t=t||256,o?(i=String(o),1==i.length&&(i="_"+i),r=e.substr(0,t-i.length)+i):r=e.substr(0,t),r};var ot={};ot.languageIds=[1,"437",2,"850",3,"1252",8,"865",9,"437",10,"850",11,"437",13,"437",14,"850",15,"437",16,"850",17,"437",18,"850",19,"932",20,"850",21,"437",22,"850",23,"865",24,"437",25,"437",26,"850",27,"437",28,"863",29,"850",31,"852",34,"852",35,"852",36,"860",37,"850",38,"866",55,"850",64,"852",77,"936",78,"949",79,"950",80,"874",87,"1252",88,"1252",89,"1252",100,"852",101,"866",102,"865",103,"861",106,"737",107,"857",108,"863",120,"950",121,"949",122,"936",123,"932",124,"874",134,"737",135,"852",136,"857",200,"1250",201,"1251",202,"1254",203,"1253",204,"1257"],ot.encodingNames={932:"Japanese",936:"Simplified Chinese",950:"Traditional Chinese",1252:"Western European",949:"Korean",874:"Thai",1250:"Eastern European",1251:"Russian",1254:"Turkish",1253:"Greek",1257:"Baltic"},ot.ENCODING_PROMPT='To avoid corrupted text, re-import using the "encoding=" option.\nTo see a list of supported encodings, run the "encodings" command.',ot.lookupCodePage=function(e){var t=ot.languageIds.indexOf(e);return t==-1?null:ot.languageIds[t+1]},ot.readAsciiString=function(e,t){var o=!0,r=e.readCString(t,o);return null===r&&n("DBF file contains non-ascii text.\n"+ot.ENCODING_PROMPT),Xe.trim(r)},ot.readStringBytes=function(e,t,o){for(var r,i=0,n=0;n<t&&(r=e.readUint8(),0!==r);n++)(i>0||32!=r)&&(o[i++]=r);for(;i>0&&32==o[i-1];)i--;return i},ot.getAsciiStringReader=function(){var e=new Uint8Array(256);return function(t,o){for(var r="",i=ot.readStringBytes(t,o,e),n=0;n<i;n++)r+=String.fromCharCode(e[n]);return r}},ot.getEncodedStringReader=function(e){var t=new Qe(256),o="utf8"==Je.standardizeEncodingName(e);return function(r,i){var n,a=ot.readStringBytes(r,i,t);return n=0===a?"":o?t.toString("utf8",0,a):Je.decodeString(t.slice(0,a),e)}},ot.getStringReader=function(e){return e&&"ascii"!==e?ot.getEncodedStringReader(e):ot.getAsciiStringReader()},ot.bufferContainsHighBit=function(e,t){for(var o=0;o<t;o++)if(e[o]>=128)return!0;return!1},ot.getNumberReader=function(){var e=ot.getAsciiStringReader();return function(t,o){var r,i=e(t,o);return i.indexOf(",")>=0&&(i=i.replace(",",".")),r=parseFloat(i),isNaN(r)?null:r}},ot.readInt=function(e,t){return e.readInt32()},ot.readBool=function(e,t){var o=e.readCString(t),r=null;return/[ty]/i.test(o)?r=!0:/[fn]/i.test(o)&&(r=!1),r},ot.readDate=function(e,t){var o=e.readCString(t),r=o.substr(0,4),i=o.substr(4,2),n=o.substr(6,2);return new Date(Date.UTC(+r,+i-1,+n))},ot.MAX_STRING_LEN=254,ot.exportRecords=function(e,t){t=t||"ascii";var r=ot.getFieldNames(e),n=Je.getUniqFieldNames(r,10),a=e.length,l=r.map(function(o){return ot.getFieldInfo(e,o,t)}),s=ot.getHeaderSize(l.length),p=ot.getRecordSize(Xe.pluck(l,"size")),g=s+a*p+1,u=new ArrayBuffer(g),c=new o(u).littleEndian(),y=new Date;return c.writeUint8(3),c.writeUint8(y.getFullYear()-1900),c.writeUint8(y.getMonth()+1),c.writeUint8(y.getDate()),c.writeUint32(a),c.writeUint16(s),c.writeUint16(p),c.skipBytes(17),c.writeUint8(0),c.skipBytes(2),l.reduce(function(e,t,o){var r=n[o];return c.writeCString(r,11),c.writeUint8(t.type.charCodeAt(0)),c.writeUint32(e),c.writeUint8(t.size),c.writeUint8(t.decimals),c.skipBytes(14),e+t.size},1),c.writeUint8(13),c.position()!=s&&i("Dbf#exportRecords() header size mismatch; expected:",s,"written:",c.position()),e.forEach(function(e,t){var o=c.position();c.writeUint8(32);for(var r=0,n=l.length;r<n;r++)l[r].write(t,c);c.position()-o!=p&&i("#exportRecords() Error exporting record:",e)}),c.writeUint8(26),c.position()!=g&&i("Dbf#exportRecords() file size mismatch; expected:",g,"written:",c.position()),u},ot.getFieldNames=function(e){if(!e||!e.length)return[];var t=Object.keys(e[0]);return t.sort(),t},ot.getHeaderSize=function(e){return 33+32*e},ot.getRecordSize=function(e){return Xe.sum(e)+1},ot.initNumericField=function(e,t,o){var r,n,a=18;r=this.getNumericFieldInfo(t,o),e.decimals=r.decimals,n=Math.max(r.max.toFixed(e.decimals).length,r.min.toFixed(e.decimals).length),n>a&&(n=a,e.decimals-=n-a,e.decimals<0&&i("Dbf#getFieldInfo() Out-of-range error.")),e.size=n;var l=ot.getDecimalFormatter(n,e.decimals);e.write=function(e,r){var i=t[e],a=l(i[o]);a.length<n&&(a=Xe.lpad(a,n," ")),r.writeString(a,n)}},ot.initBooleanField=function(e,t,o){e.size=1,e.write=function(e,r){var i,n=t[e][o];i=n===!0?"T":n===!1?"F":"?",r.writeString(i)}},ot.initDateField=function(e,t,o){e.size=8,e.write=function(e,r){var i,n=t[e][o];i=n instanceof Date==!1?"00000000":Xe.lpad(n.getUTCFullYear(),4,"0")+Xe.lpad(n.getUTCMonth()+1,2,"0")+Xe.lpad(n.getUTCDate(),2,"0"),r.writeString(i)}},ot.initStringField=function(e,t,o,r){var i=ot.getStringWriter(r),n=0,a=t.map(function(e){var t=i(e[o]);return n=Math.max(n,t.byteLength),t});e.size=n,e.write=function(e,t){var o=a[e],r=Math.min(n,o.byteLength),i=t.position();t.writeBuffer(o,r,0),t.position(i+n)}},ot.getFieldInfo=function(e,t,o){var r=this.discoverFieldType(e,t),i={name:t,type:r,decimals:0};return"N"==r?ot.initNumericField(i,e,t):"C"==r?ot.initStringField(i,e,t,o):"L"==r?ot.initBooleanField(i,e,t):"D"==r?ot.initDateField(i,e,t):(i.size=0,i.type="N",i.write=function(){}),i},ot.discoverFieldType=function(e,t){for(var o,r=0,i=e.length;r<i;r++){if(o=e[r][t],Xe.isString(o))return"C";if(Xe.isNumber(o))return"N";if(Xe.isBoolean(o))return"L";if(o instanceof Date)return"D"}return null},ot.getDecimalFormatter=function(e,t){var o=" ";return function(r){var i=Xe.isFiniteNumber(r),n=i?r.toFixed(t):String(o);return Xe.lpad(n,e," ")}},ot.getNumericFieldInfo=function(e,t){for(var o,r=0,i=0,n=1,a=1,l=0,s=1e-15,p=0,g=e.length;p<g;p++)if(o=e[p][t],Xe.isFiniteNumber(o)){if(o<r||o>i)for(o<r&&(r=o),o>i&&(i=o);Math.abs(o)>=a;)a*=10,s*=10;for(;Math.abs(Math.round(o*n)-o*n)>s&&15!=l;)l++,s*=10,n*=10}return{decimals:l,min:r,max:i}},ot.getStringWriter=function(e){return"ascii"===e?ot.getStringWriterAscii():ot.getStringWriterEncoded(e)},ot.getStringWriterAscii=function(){return function(e){for(var t=String(e),o=Math.min(t.length,ot.MAX_STRING_LEN),r=new ArrayBuffer(o),i=new Uint8ClampedArray(r),n=0;n<o;n++)i[n]=t.charCodeAt(n);return r}},ot.getStringWriterEncoded=function(e){var t=require("iconv-lite");return function(r){var i=t.encode(r,e);return i.length>=ot.MAX_STRING_LEN&&(i=ot.truncateEncodedString(i,e,ot.MAX_STRING_LEN)),o.toArrayBuffer(i)}},ot.truncateEncodedString=function(e,t,o){for(var r,i,n=e.slice(0,o),a=o;a>0&&a>=o-3;){if(r=a==o?n:e.slice(0,a),i=Je.decodeString(r,t),"�"!=i.charAt(i.length-1)){n=r;break}a--}return n};var rt=/^[a-zA-Z_][a-zA-Z_0-9]*$/,it={fieldExists:function(e){return Xe.contains(this.getFields(),e)},toString:function(){return JSON.stringify(this)},toJSON:function(){return this.getRecords()},addField:function(e,t){var o=Xe.isFunction(t);Xe.isNumber(t)||Xe.isString(t)||o||i("DataTable#addField() requires a string, number or function for initialization"),this.fieldExists(e)&&i("DataTable#addField() tried to add a field that already exists:",e),rt.test(e)||i("DataTable#addField() invalid field name:",e),this.getRecords().forEach(function(r,i){r[e]=o?t(r,i):t})},addIdField:function(){this.addField("FID",function(e,t){return t})},deleteField:function(e){this.getRecords().forEach(function(t){delete t[e]})},getFields:function(){var e=this.getRecords(),t=e[0];return t?Object.keys(t):[]},update:function(e){for(var t=this.getRecords(),o=0,r=t.length;o<r;o++)t[o]=e(t[o],o)},clone:function(){var e=this.getRecords().map(function(e){return Xe.extend({},e)});return new ne(e)},size:function(){return this.getRecords().length}};Xe.extend(ne.prototype,it),Je.simplifyArcsFast=function(e,t){for(var o,r=[],i=[],n=[],a=0,l=e.size();a<l;a++)o=Je.simplifyPathFast([a],e,t,r,i),1==o&&(o=0,r.pop(),i.pop()),n.push(o);return new B(n,r,i)},Je.simplifyPolygonFast=function(e,t,o){if(!e||!o)return null;var r=[],i=[],n=[],a=[];return e.forEach(function(e){for(var l=Je.simplifyPathFast(e,t,o,r,i);l<4&&l>0;)r.pop(),i.pop(),l--;l>0&&(a.push([n.length]),n.push(l))}),{shape:a.length>0?a:null,arcs:new B(n,r,i)}},Je.simplifyPathFast=function(e,t,o,r,i){for(var n,a,l,s,p=t.getShapeIter(e),g=0;p.hasNext();)l=p.x,s=p.y,(0===g||d(l,s,n,a)>o)&&(r.push(l),i.push(s),n=l,a=s,g++);return l==n&&s==a||(r.push(l),i.push(s),g++),g},tt.getShapeCentroid=function(e,t){var o=tt.getMaxPath(e,t);return o?tt.getPathCentroid(o,t):null},tt.getPathCentroid=function(e,t){var o,r,i,n,a=t.getShapeIter(e),l=0,s=0,p=0;if(!a.hasNext())return null;for(o=a.x,r=a.y;a.hasNext();)i=o*a.y-r*a.x,l+=i,s+=i*(a.x+o),p+=i*(a.y+r),o=a.x,r=a.y;return n=l/2,0===n?tt.getAvgPathXY(e,t):{x:s/(6*n),y:p/(6*n)}},tt.findInteriorPoint=function(e,t){var o,r,i=e&&tt.getMaxPath(e,t),n=i&&t.getSimpleShapeBounds(i);return n&&n.hasBounds()&&0!==n.area()?(o=.01*Math.sqrt(n.area()),r=Je.simplifyPolygonFast(e,t,o),r.shape?tt.findInteriorPoint2(r.shape,r.arcs):null):null},tt.findInteriorPoint2=function(e,t){var o,r,i,n,a,l,s,g,u=tt.getMaxPath(e,t),c=t.getSimpleShapeBounds(u),y=tt.getPathCentroid(u,t),h=Je.getPointWeightingFunction(y,c),d=tt.getPlanarPathArea(u,t);return 1==e.length&&1.2*d>c.area()?(a=5,n=.2):1==e.length&&1.7*d>c.area()?(a=7,n=.4):(a=11,n=.5),o=c.width()*n,r=y.x-o/2,i=r+o,l=o/a,s=Je.probeForBestInteriorPoint(e,t,r,i,a,h),s?(g=Je.probeForBestInteriorPoint(e,t,s.x-l/2,s.x+l/2,2,h),g.distance>s.distance&&(s=g)):(p("[points inner] failed, falling back to centroid"),s=y),s},Je.getPointWeightingFunction=function(e,t){var o=Math.max(t.width(),t.height())/2;return function(t,r){var i=d(e.x,e.y,t,r);return 1-Math.min(.6*i/o,.25)}},Je.findInteriorPointCandidates=function(e,t,o){var r=t.getBounds().ymin-1;return o.reduce(function(o,i){var n=Je.findHitCandidates(i,r,e,t);return o.concat(n)},[])},Je.probeForBestInteriorPoint=function(e,t,o,r,i,n){var a,l,s,p=Je.getInnerTics(o,r,i),g=(r-o)/i,u=Je.findInteriorPointCandidates(e,t,p);u.forEach(function(e){e.interval*=n(e.x,e.y)}),u.sort(function(e,t){return t.interval-e.interval});for(var c=0;c<u.length&&(s=u[c],!(a&&a.distance>s.interval));c++)l=Je.getAdjustedPoint(s.x,s.y,e,t,g,n),(!a||l.distance>a.distance)&&(a=l);return a},Je.getAdjustedPoint=function(e,t,o,r,i,n){var a={x:e,y:t,distance:tt.getPointToShapeDistance(e,t,o,r)*n(e,t)};return Je.scanForBetterPoint(a,o,r,i,n),Je.scanForBetterPoint(a,o,r,-i,n),a},Je.scanForBetterPoint=function(e,t,o,r,i){for(var n,a=e.x,l=e.y,s=e.distance;;){if(l+=r,n=tt.getPointToShapeDistance(a,l,t,o)*i(a,l),!(n>.9*s&&tt.testPointInPolygon(a,l,t,o)))break;n>s&&(e.distance=s=n,e.y=l)}},Je.findHitCandidates=function(e,t,o,r){var i,n,a,l=Je.findRayShapeIntersections(e,t,o,r),s=[];Xe.genericSort(l);for(var p=0;p<l.length;p+=2)i=l[p],n=l[p+1],a=(n-i)/2,a>0&&s.push({y:(i+n)/2,x:e,interval:a});return s},Je.findRayShapeIntersections=function(e,t,o,r){return o?o.reduce(function(o,i){var n=Je.findRayRingIntersections(e,t,i,r);return o.concat(n)},[]):[]},Je.findRayRingIntersections=function(e,t,o,r){var i=[];return Je.forEachPathSegment(o,r,function(o,r,n,a){var l=tt.getRayIntersection(e,t,n[o],a[o],n[r],a[r]);l>-(1/0)&&i.push(l)}),i.length%2===1&&(i=[]),i},Je.getInnerTics=function(e,t,o){for(var r=t-e,i=r/(o+1),n=[],a=1;a<=o;a++)n.push(e+i*a);return n},Je.initFeatureProxy=function(e,t){function o(){var t=e.shapes[c];return g||(g=t&&t[0]||null),g}function r(){return s=s||tt.getShapeCentroid(u,t)}function i(){return p=p||tt.findInteriorPoint(u,t)}function a(){return l||(l=t.getMultiShapeBounds(u)),l}var l,s,p,g,u,c,y=Je.layerHasPoints(e),h=t&&Je.layerHasPaths(e),d=e.data?e.data.getRecords():null,f=h&&t.isPlanar(),m={};return ae(m,{id:function(){return c}}),d&&Object.defineProperty(m,"properties",{set:function(e){Xe.isObject(e)?d[c]=e:n("Can't assign non-object to $.properties")},get:function(){var e=d[c];return e||(e=d[c]={}),e}}),h?(ae(m,{partCount:function(){return u?u.length:0},isNull:function(){return 0===m.partCount},bounds:function(){return a().toArray()},height:function(){return a().height()},width:function(){return a().width()}}),"polygon"==e.geometry_type&&ae(m,{area:function(){return f?m.planarArea:tt.getSphericalShapeArea(u,t)},planarArea:function(){return tt.getPlanarShapeArea(u,t)},originalArea:function(){var e,o=t.getRetainedInterval();return t.setRetainedInterval(0),e=m.area,t.setRetainedInterval(o),e},centroidX:function(){var e=r();return e?e.x:null},centroidY:function(){var e=r();return e?e.y:null},innerX:function(){var e=i();return e?e.x:null},innerY:function(){var e=i();return e?e.y:null}})):y&&(Object.defineProperty(m,"coordinates",{set:function(t){!t||Xe.isArray(t)?e.shapes[c]=t||null:n("Can't assign non-array to $.coordinates")},get:function(){return e.shapes[c]||null}}),ae(m,{x:function(){return o(),g?g[0]:null},y:function(){return o(),g?g[1]:null}})),function(t){return c=t,h&&(l=null,s=null,p=null,u=e.shapes[t]),y&&(g=null),m}},Je.compileValueExpression=function(e,t,o,r){return r=r||{},r.returns=!0,Je.compileFeatureExpression(e,t,o,r)},Je.compileFeatureExpression=function(e,t,o,r){var i,n,a=Xe.extend({},r),l=e||"",s=!a.no_assign,p=Je.getAssignedVars(l);return s&&p.length>0&&!t.data&&Je.initDataTable(t),s||(a.context=a.context||{},Je.nullifyUnsetProperties(p,a.context)),n=t.data?t.data.getRecords():[],i=Je.getExpressionFunction(l,t,o,a),function(e,t){var o;return o=t?t:n[e]||(n[e]={}),s&&Je.nullifyUnsetProperties(p,o),i(o,e)}},Je.getAssignedVars=function(e,t){var o=/[a-z_][.a-z0-9_]*(?= *=[^=])/gi,r=e.match(o)||[],i=function(e){var o=e.indexOf(".");return t?o>-1:o==-1};return Xe.uniq(r.filter(i))},Je.getAssignmentObjects=function(e){var t=Je.getAssignedVars(e,!0),o=[];return t.forEach(function(e){var t=/^([^.]+)\.[^.]+$/.exec(e),r=t?t[1]:null;r&&"this"!=r&&o.push(r)}),Xe.uniq(o)},Je.getExpressionFunction=function(e,t,o,r){var i,a=Je.initFeatureProxy(t,o),l=Je.getExpressionContext(t,r.context),s="with(env){with(record){ "+(r.returns?"return ":"")+e+"}}";try{i=new Function("record,env",s)}catch(t){n(t.name,"in expression ["+e+"]")}return function(t,o){var r;l.$=a(o),l._=l;try{r=i.call(l.$,t,l)}catch(t){n(t.name,"in expression ["+e+"]:",t.message)}return r}},Je.nullifyUnsetProperties=function(e,t){for(var o=0;o<e.length;o++)e[o]in t==!1&&(t[e[o]]=null)},Je.getExpressionContext=function(e,t){var o=Je.getBaseContext();return e.data&&Je.nullifyUnsetProperties(e.data.getFields(),o),t&&(Object.keys(t).forEach(function(e){e in o&&s('Warning: "'+e+'" has multiple definitions'),o[e]=t[e]}),Xe.extend(o,t)),Object.keys(o).reduce(function(e,t){return Object.defineProperty(e,t,{value:o[t]}),e},{})},Je.getBaseContext=function(){var e={};return function(){for(var t in this)e[t]=null}(),e.console=console,e},ze.filterFeatures=function(e,t,o){var r,i=e.data?e.data.getRecords():null,a=e.shapes||null,l=Je.getFeatureCount(e),p=a?[]:null,g=i?[]:null,u=Je.getOutputLayer(e,o);return o.expression&&(r=Je.compileValueExpression(o.expression,e,t)),o.remove_empty&&(r=Je.combineFilters(r,Je.getNullGeometryFilter(e,t))),r||n("Missing a filter expression"),Xe.repeat(l,function(e){var t=r(e);t===!0?(a&&p.push(a[e]||null),i&&g.push(i[e]||null)):t!==!1&&n("Expression must return true or false")}),u.shapes=p,u.data=g?new ne(g):null,o.no_replace&&(u=Je.copyLayer(u)),o.verbose!==!1&&s(Xe.format("Retained %,d of %,d features",Je.getFeatureCount(u),l)),u},Je.getNullGeometryFilter=function(e,t){var o=e.shapes;return"polygon"==e.geometry_type?Je.getEmptyPolygonFilter(o,t):function(e){return!!o[e]}},Je.getEmptyPolygonFilter=function(e,t){return function(o){var r=e[o];return!!r&&tt.getPlanarShapeArea(e[o],t)>0}},Je.combineFilters=function(e,t){return e&&t&&function(o){
return e(o)&&t(o)}||e||t},Je.getMode=function(e){var t=Je.getModeData(e);return t.modes[0]},Je.getModeData=function(e){var t,o,r,i,n=0,a=0,l=[],s=[],p={};if(1==e.length)return{modes:e,margin:1};for(o=0;o<e.length;o++)t=e[o],t in p==!1?(r=0,l.push(t)):r=p[t],p[t]=++r,r>n&&(n=r);for(i=n,o=0;o<l.length;o++)r=p[l[o]],r===n?s.push(l[o]):r>a&&(a=r);return{modes:s,margin:s.length>1?0:n-a}},ze.calc=function(e,t,o){var r,i=o.expression;return o.where&&(e={shapes:e.shapes,data:e.data},ze.filterFeatures(e,t,{expression:o.where}),i+=" where "+o.where),r=Je.evalCalcExpression(e,t,o.expression),s(i+":  "+r),r},Je.evalCalcExpression=function(e,t,o){return Je.compileCalcExpression(e,t,o)()},Je.compileCalcExpression=function(e,t,o){function r(e){return e}function a(e){return Xe.getArrayBounds(e).max}function l(e){return Xe.getArrayBounds(e).min}function s(e,t){var o=arguments.length>1?t:null;return function(){var t=x++;return S>0?e(E[t]):o}}function p(){for(var e=0;e<R;e++)u(e)}function g(e){e.forEach(u)}function u(e){(e<0||e>=R)&&i("Invalid record index"),v(e),S++,x=0}function c(){}function y(){S=0,x=0,E=[]}function h(e){return isNaN(e)&&e&&n("Expected a number, received:",e),m(e)}function d(e){return 0===S&&(E[x]=e),x++,e}function f(e){return E[x++]=e,e}function m(e){var t;return 0===S&&(E[x]=[]),t=E[x],t.length!=S&&n("Evaluation failed"),t.push(e),x++,e}var v,_,S=0,x=0,E=[],P={count:f,sum:h,average:h,median:h,min:h,max:h,mode:m,collect:m,first:d,last:f},T={count:s(function(){return S},0),sum:s(Xe.sum,0),median:s(Xe.findMedian),min:s(l),max:s(a),average:s(Xe.mean),mode:s(Je.getMode),collect:s(r),first:s(r),last:s(r)},R=Je.getFeatureCount(e);return e.geometry_type&&(P.width=P.height=c,T.width=function(){return Je.getLayerBounds(e,t).width()},T.height=function(){return Je.getLayerBounds(e,t).height()}),v=Je.compileFeatureExpression(o,e,t,{context:P,no_assign:!0}),_=Je.compileFeatureExpression(o,{data:e.data},null,{returns:!0,context:T}),function(e,t){var o;return e?g(e):p(),o=_(void 0,t),y(),o}},Je.getJoinCalc=function(e,t){var o=Je.compileCalcExpression({data:e},null,t);return function(e,t){e||(e=[]),o(e,t)}},Je.getCategoryClassifier=function(e,t){if(!e)return function(e){return 0};t&&t.fieldExists(e)||n("Data table is missing field:",e);var o={},r=0,i=t.getRecords();return function(t){var n=String(i[t][e]);return n in o==!1&&(o[n]=r++),o[n]}},Je.aggregateDataRecords=function(e,t,o){function r(t,o){for(var r,i=0,n=0;n<o.length;n++)r=e[o[n]],i+=r&&r[t]||0;return i}var i,n=Je.groupIds(t,e.length),a=o.sum_fields||[],l=o.copy_fields||[];return o.field&&l.push(o.field),o.calc&&(i=Je.getJoinCalc(new ne(e),o.calc)),n.map(function(t){var o,n,s={};for(t=t||[],n=e[t[0]],o=0;o<a.length;o++)s[a[o]]=r(a[o],t);for(o=0;o<l.length;o++)s[l[o]]=n?n[l[o]]:null;return i&&i(t,s),s})},Je.groupIds=function(e,t){for(var o,r=[],i=0;i<t;i++)o=e(i),o in r?r[o].push(i):r[o]=[i];return r},Je.dissolvePolylineGeometry=function(e,t,o,r){var i=Je.getPolylineDissolveGroups(e.shapes,t),n=i.map(function(e){return Je.dissolvePolylineArcs(e,o)});return n},Je.getPolylineDissolveGroups=function(e,t){var o=[];return Je.traversePaths(e,function(e){var r=t(e.shapeId);r in o==!1&&(o[r]=[]),o[r].push(e.arcId)}),o},Je.dissolvePolylineArcs=function(e,t){var o=new Uint8Array(t.size());e.forEach(function(e){o[u(e)]=1});var r=function(e){return o[u(e)]>0},i=function(e){o[u(e)]=0},n=new V(t,r),a=Je.findPolylineEnds(e,n),l=Je.collectPolylineArcs(a,n,r,i),s=Je.collectPolylineArcs(e,n,r,i);return l.concat(s)},Je.collectPolylineArcs=function(e,t,o,r){var i=[];return e.forEach(function(e){for(var n,a=[],l=e;o(l)&&(a.push(l),r(l),n=t.getConnectedArcs(l).filter(o),n.length>0);)l=~n[0];a.length>0&&i.push(a)}),i},Je.findPolylineEnds=function(e,t){var o=[];return e.forEach(function(e){0===t.getConnectedArcs(e).length&&o.push(~e),0===t.getConnectedArcs(~e).length&&o.push(e)}),o},ze.dissolve=function(e,t,o){var r=o||{},i=Je.getCategoryClassifier(r.field,e.data),n=null;return"polygon"==e.geometry_type?n=pe(e.shapes,i):"polyline"==e.geometry_type?n=Je.dissolvePolylineGeometry(e,i,t,r):"point"==e.geometry_type&&(n=le(e,i,r)),Je.composeDissolveLayer(e,n,i,r)},Je.composeDissolveLayer=function(e,t,o,r){var i,n=null;if(e.data){n=Je.aggregateDataRecords(e.data.getRecords(),o,r);for(var a=0,l=n.length;a<l;a++)t&&!t[a]&&(t[a]=null)}return i={name:r.no_replace?null:e.name,shapes:t,data:n?new ne(n):null,geometry_type:e.geometry_type},r.silent||Je.printDissolveMessage(e,i),i},Je.printDissolveMessage=function(e,t){var o=Je.getFeatureCount(e),r=Je.getFeatureCount(t),i=Xe.format("Dissolved %,d feature%s into %,d feature%s",o,Xe.pluralSuffix(o),r,Xe.pluralSuffix(r));s(i)},Je.dissolvePolygonLayer=function(e,t,o){o=o||{};var r=Je.getCategoryClassifier(o.field,e.data),i=e.shapes.reduce(function(e,t,o){var i=r(o);return i in e==!1&&(e[i]=[]),Je.extendShape(e[i],t),e},[]),n=i.map(Je.getPolygonDissolver(t));return Je.composeDissolveLayer(e,n,r,o)},Je.concatShapes=function(e){return e.reduce(function(e,t){return Je.extendShape(e,t),e},[])},Je.extendShape=function(e,t){if(t)for(var o=0,r=t.length;o<r;o++)e.push(t[o])},Je.getPolygonDissolver=function(e,t){t=t&&!e.arcs.isPlanar();var o=new Uint8Array(e.arcs.size()),r=Je.getHoleDivider(e,t),i=Je.getRingIntersector(e,"flatten",o,t),n=Je.getRingIntersector(e,"dissolve",o,t);return function(e){if(!e)return null;var t=[],o=[];r(e,t,o),t=i(t),o.forEach(Je.reversePath),o=i(o),o.forEach(Je.reversePath);var a=Je.appendHolestoRings(t,o),l=n(a);return l.length>0?l:null}},Je.appendHolestoRings=function(e,t){for(var o=0,r=t.length;o<r;o++)e.push(t[o]);return e},ze.dissolve2=function(e,t,o){var r,i=Array.isArray(e),n=i?e:[e],a=n.map(function(e){return Je.requirePolygonLayer(e),r||(r=Je.addIntersectionCuts(t,o)),Je.dissolvePolygonLayer(e,r,o)});return i?a:a[0]},Je.buildPolygonMosaic=function(e){function t(e){var t=u(e),o=t==e?1:2;return 0===(i[t]&o)&&(i[t]|=o,!0)}for(var o,r=e.arcs,i=new Uint8Array(r.size()),n=Je.getPathFinder(e,t),a=[],l=0,s=i.length;l<s;l++)o=n(l),o&&a.push(o),o=n(~l),o&&a.push(o);return a},ze.cleanLayers=function(e,t,o){var r=Je.addIntersectionCuts(t),i=Je.getPolygonFlattener(r);e.forEach(function(e){Je.requirePolygonLayer(e),e.shapes=e.shapes.map(i)})},Je.getPolygonFlattener=function(e){var t=new Uint8Array(e.arcs.size()),o=Je.getHoleDivider(e),r=Je.getRingIntersector(e,"flatten",t);return function(e){if(!e)return null;var t=[],i=[];o(e,t,i),t=r(t),i.forEach(Je.reversePath),i=r(i),i.forEach(Je.reversePath);var n=Je.appendHolestoRings(t,i);return n&&n.length>0?n:null}},Je.clipPolygons=function(e,t,o,r){function i(e,t,o){var r=[],i="clip"==t,n="erase"==t;return Je.openArcRoutes(e,c,h,!0,!1,!1),Je.forEachPath(e,function(e){for(var t,a=0,l=e.length;a<l;a++)if(d=0,f=0,t=v(e[a]))if(0===d||0===f){var s=o.pathIsEnclosed(t);(i&&s||n&&!s)&&r.push(t)}else r.push(t)}),Je.closeArcRoutes(e,c,h,!0,!0,!0),m.length>0&&(Je.closeArcRoutes(m,c,h,!0,!0,!0),m=[]),0===r.length?null:r}function n(e){var t=e>=0,o=t?e:~e,r=t?1:16,i=h[o],n=y[o];return n>0&&d++,(i&r)>0||(n&r)>0}function a(e){var t,o,i=e>=0,n=i?e:~e,a=h[n],l=y[n];i?(t=a,o=l):(t=a>>4,o=l>>4),t&=3,o&=3;var s=!1;return 3==t?1==o||2==o&&"erase"==r||(s=!0):0===t&&3==o&&(m.push(e),s=!0),s&&(3==o&&f++,a=i?Je.setBits(a,1,3):Je.setBits(a,16,48)),a|=i?4:64,h[n]=a,s}function l(e){return e.map(function(e){var t=[];return Je.forEachPath(e,function(e){for(var o=!0,r=!1,i=0;i<e.length;i++){if(!s(e[i],h)){o=!1;break}!r&&p(e[i],y)&&(r=!0)}o&&r&&t.push(e)}),t.length>0?t:null})}function s(e,t){var o=u(e),r=t[o];return 0===(68&r)}function p(e,t){var o=t[u(e)];return(17&o)>0}function g(e,t,o){var r=o.findPathsInsideShape(e),i=[];return r?("erase"==t&&r.forEach(Je.reversePath),r.length<=1?i=r:(Je.openArcRoutes(r,c,h,!0,!1,!0),r.forEach(function(e){for(var t,o=0;o<e.length;o++)t=v(e[o]),t&&i.push(t)})),i.length>0?i:null):null}var c=o.arcs,y=new Uint8Array(c.size()),h=new Uint8Array(c.size()),d=0,f=0,m=[],v=Je.getPathFinder(o,a,n),_=Je.getPolygonDissolver(o);e=e.map(_),t=[_(Je.concatShapes(t))],Je.openArcRoutes(t,c,y,"clip"==r,"erase"==r,!0,17);var S=new X(t,c),x=e.map(function(e,t){return e?i(e,r,S):null}),E=l(t);return Je.closeArcRoutes(t,c,h,!0,!0),S=new X(E,c),e.forEach(function(e,t){var o=e?g(e,r,S):null;o&&(x[t]=(x[t]||[]).concat(o))}),x},Je.clipPolylines=function(e,t,o,r){function i(e){var t=null;return e&&(t=e.reduce(n,[])),t&&t.length>0?t:null}function n(e,t){for(var o,i,n=null,l=0;l<t.length;l++)o=t[l],i=a.arcIsEnclosed(o),i&&"clip"==r||!i&&"erase"==r?(n||e.push(n=[]),n.push(o)):n=null;return e}var a=new X(t,o.arcs);return e.map(function(e){return i(e)})},Je.clipPoints=function(e,t,o,r){var i=new X(t,o),n=e.reduce(function(e,t){for(var o,n=t?t.length:0,a=[],l=0;l<n;l++)o=i.findEnclosingShape(t[l])>-1,("clip"==r&&o||"erase"==r&&!o)&&a.push(t[l].concat());return e.push(a.length>0?a:null),e},[]);return n},Je.getPathEndpointTest=function(e,t){function o(e){Je.forEachPath(e,r)}function r(e){i(~e[0]),i(e[e.length-1])}function i(e){var t=u(e),o=t==e;n[t]|=o?1:2}var n=new Uint8Array(t.size());return e.forEach(function(e){Je.layerHasPaths(e)&&e.shapes.forEach(o)}),function(e){var t=u(e),o=t==e,r=n[t];return o?1==(1&r):2==(2&r)}},Je.dissolveArcs=function(e){function t(e){for(var t,r,p,g,c,y,h=0,d=[],f=0,m=e.length;f<m;f++)r=e[f],p=u(r),c=r===p,o.arcIsDegenerate(r)||(0!==s[p]?t=null:(g=o.getArcLength(r),t&&i(e[f-1],r)?(g>0&&g--,t.push(r),s[p]=1):(t=[r],l[p]=n.length,n.push(t),s[p]=c?2:3),h+=g)),s[p]>1&&(y=l[p],(c&&3==s[p]||!c&&2==s[p])&&(y=~y),d.push(y));return a+=h,d}var o=e.arcs,r=e.layers.filter(Je.layerHasPaths);if(!o||!r.length)return void(e.arcs=null);var i=Je.getArcDissolveTest(r,o),n=[],a=0,l=new Int32Array(o.size()),s=new Uint8Array(o.size());r.forEach(function(e){e.shapes=e.shapes.map(function(e){return Je.editPaths(e&&e.concat(),t)})}),e.arcs=Je.dissolveArcCollection(o,n,a)},Je.dissolveArcCollection=function(e,t,o){function r(e,t){var o=u(e),r=e<0,p=l.nn[o],c=l.ii[o],y=i[t];p>0&&(y>0&&(p--,r||c++),Xe.copyElements(l.xx,c,n,g,p,r),Xe.copyElements(l.yy,c,a,g,p,r),s&&Xe.copyElements(l.zz,c,s,g,p,r),i[t]+=p,g+=p)}var i=new Uint32Array(t.length),n=new Float64Array(o),a=new Float64Array(o),l=e.getVertexData(),s=l.zz?new Float64Array(o):null,p=e.getRetainedInterval(),g=0;return t.forEach(function(e,t){e.forEach(function(e,o){r(e,t)})}),new B(i,n,a).setThresholds(s).setRetainedInterval(p)},Je.getArcDissolveTest=function(e,t){function o(e,t){r++,i=e}var r,i,n=Je.getFilteredNodeCollection(e,t),a=e.filter(function(e){return"polyline"==e.geometry_type}),l=Je.getPathEndpointTest(a,t);return function(e,t){return e==t||e==~t?(p("Unexpected arc sequence:",e,t),!1):(r=0,n.forEachConnectedArc(e,o),1==r&&i==~t&&!l(e)&&!l(~t))}},Je.getFilteredNodeCollection=function(e,t){var o=Je.countArcReferences(e,t),r=function(e){return o[u(e)]>0};return new V(t,r)},Je.countArcReferences=function(e,t){var o=new Uint32Array(t.size());return e.forEach(function(e){Je.countArcsInShapes(e.shapes,o)}),o},ze.filterIslands=function(e,t,o){var r=0;"polygon"==e.geometry_type&&(o.min_area||o.min_vertices?(o.min_area&&(r+=Je.filterIslands(e,t,Je.getMinAreaTest(o.min_area,t))),o.min_vertices&&(r+=Je.filterIslands(e,t,Je.getVertexCountTest(o.min_vertices,t))),o.remove_empty&&ze.filterFeatures(e,t,{remove_empty:!0,verbose:!1}),s(Xe.format("Removed %'d island%s",r,Xe.pluralSuffix(r)))):s("Missing a criterion for filtering islands; use min-area or min-vertices"))},Je.getVertexCountTest=function(e,t){return function(o){return tt.countVerticesInPath(o,t)<=e}},Je.getMinAreaTest=function(e,t){var o=t.isPlanar()?tt.getPlanarPathArea:tt.getSphericalPathArea;return function(r){var i=o(r,t);return Math.abs(i)<e}},Je.filterIslands=function(e,t,o){var r=0,i=new Uint8Array(t.size());Je.countArcsInShapes(e.shapes,i);var n=function(e,n,a){if(1==e.length&&1===i[u(e[0])]&&(!o||o(e))&&!Je.ringHasHoles(e,a,t))return r++,null};return Je.editShapes(e.shapes,n),r},Je.ringIntersectsBBox=function(e,t,o){for(var r=0,i=e.length;r<i;r++)if(o.arcIntersectsBBox(u(e[r]),t))return!0;return!1},Je.ringHasHoles=function(e,t,o){for(var r,i,n=o.getSimpleShapeBounds2(e),a=0,l=t.length;a<l;a++)if(r=t[a],r&&r!=e&&Je.ringIntersectsBBox(r,n,o)&&(i=o.getVertex(r[0],0),tt.testPointInRing(i.x,i.y,e,o)))return!0;return!1},ze.filterSlivers=function(e,t,o){return"polygon"!=e.geometry_type?0:Je.filterSlivers(e,t,o)},Je.filterSlivers=function(e,t,o){var r=o&&o.min_area?Je.getMinAreaTest(o.min_area,t):Je.getSliverTest(t),i=0,n=function(e,t,o){if(r(e))return i++,null};return Je.editShapes(e.shapes,n),s(Xe.format("Removed %'d sliver%s",i,Xe.pluralSuffix(i))),i},Je.filterClipSlivers=function(e,t,o){var r=new Uint8Array(o.size()),i=Je.getSliverTest(o),n=0,a=function(e){for(var t=0,o=0,a=0,l=e&&e.length||0;a<l;a++)r[u(e[a])]>0?o++:t++;if(o>0&&t>0&&i(e))return n++,null};return Je.countArcsInShapes(t.shapes,r),Je.editShapes(e.shapes,a),n},Je.getSliverTest=function(e){var t=Je.calcMaxSliverArea(e);return function(o){return Math.abs(tt.getPlanarPathArea(o,e))<=t}},Je.calcMaxSliverArea=function(e){var t=2,o=e.getBounds().width()/t,r=e.getBounds().height()/t,i=0,n=0;return e.forEachSegment(function(e,t,a,l){var s=Math.abs(a[e]-a[t]),p=Math.abs(l[e]-l[t]);s<o&&p<r&&(n+=(Math.sqrt(s*s+p*p)-n)/++i)}),n*n},ze.splitLayer=function(e,t,o){var r,i=o&&o.no_replace?Je.copyLayer(e):e,a=i.data?i.data.getRecords():null,l=i.shapes,s={},p=[];return!t||a&&i.data.fieldExists(t)||n("Missing attribute field:",t),r=i.name||(t?"":"split"),Xe.repeat(Je.getFeatureCount(i),function(e){var o,n=Je.getSplitKey(e,t,a);n in s==!1?(s[n]=p.length,o=Xe.defaults({name:Je.getSplitLayerName(r,n),data:a?new ne:null,shapes:l?[]:null},i),p.push(o)):o=p[s[n]],l&&o.shapes.push(l[e]),a&&o.data.getRecords().push(a[e])}),p},Je.getSplitKey=function(e,t,o){var r=t&&o?o[e]:null;return String(r?r[t]:e+1)},Je.getSplitLayerName=function(e,t){return(e?e+"-":"")+t},ze.clipLayers=function(e,t,o,r){return Je.clipLayers(e,t,o,"clip",r)},ze.eraseLayers=function(e,t,o,r){return Je.clipLayers(e,t,o,"erase",r)},ze.clipLayer=function(e,t,o,r){return ze.clipLayers([e],t,o,r)[0]},ze.eraseLayer=function(e,t,o,r){return ze.eraseLayers([e],t,o,r)[0]},ze.sliceLayers=function(e,t,o,r){return Je.clipLayers(e,t,o,"slice",r)},ze.sliceLayer=function(e,t,o,r){return ze.sliceLayers([e],t,o,r)},Je.clipLayers=function(e,t,o,r,i){var a,l,s,p,g,u,c=Xe.some(e,Je.layerHasPaths);return i=i||{no_cleanup:!0},t&&t.geometry_type&&(t={dataset:o,layer:t,disposable:!0}),i.bbox?(a=Je.convertClipBounds(i.bbox),s=a.layers[0]):t?(s=t.layer,a=Xe.defaults({layers:[s]},t.dataset)):n("Missing clipping data"),o.arcs!=a.arcs?(t&&!t.disposable&&(s=a.layers[0]=Je.copyLayerShapes(a.layers[0])),l=Je.mergeDatasets([o,a]),ze.buildTopology(l)):l=o,c?(p=Je.addIntersectionCuts(l,i),o.arcs=l.arcs):p=new V(l.arcs),u=Je.clipLayersByLayer(e,s,p,r,i),c&&!i.no_cleanup&&(g={arcs:l.arcs,layers:o.layers},Je.replaceLayers(g,e,u),Je.dissolveArcs(g),o.arcs=g.arcs),u},Je.clipLayersByLayer=function(e,t,o,r,i){return Je.requirePolygonLayer(t,"Requires a polygon clipping layer"),e.reduce(function(e,n){return i.no_replace&&e.push(n),"slice"==r?e=e.concat(Je.sliceLayerByLayer(n,t,o,i)):e.push(Je.clipLayerByLayer(n,t,o,r,i)),e},[])},Je.getSliceLayerName=function(e,t,o){var r=t?e.data.getRecords()[0][t]:o+1;return"slice-"+r},Je.sliceLayerByLayer=function(e,t,o,r){var i=ze.splitLayer(t,r.id_field,{no_replace:!0});return i.map(function(t,i){var n=Je.clipLayerByLayer(e,t,o,"clip",r);return n.name=Je.getSliceLayerName(t,r.id_field,i),n})},Je.clipLayerByLayer=function(e,t,o,r,i){var a,l,p=o.arcs,g=e.shapes?e.shapes.length:0,u=0,c=0;return 0===g?e:(e===t&&n("Can't clip a layer with itself"),"point"==e.geometry_type?a=Je.clipPoints(e.shapes,t.shapes,p,r):"polygon"==e.geometry_type?a=Je.clipPolygons(e.shapes,t.shapes,o,r):"polyline"==e.geometry_type?a=Je.clipPolylines(e.shapes,t.shapes,o,r):n("Invalid target layer:",e.name),l={name:e.name,geometry_type:e.geometry_type,shapes:a,data:e.data},i.remove_slivers&&"polygon"==l.geometry_type&&(c=Je.filterClipSlivers(l,t,p)),ze.filterFeatures(l,p,{remove_empty:!0,verbose:!1}),l.data&&(l.data=l.data.clone()),u=g-l.shapes.length,u&&c&&s(Je.getClipMessage(u,c)),l)},Je.getClipMessage=function(e,t){var o=e?Xe.format("%,d null feature%s",e,Xe.pluralSuffix(e)):"",r=t?Xe.format("%,d sliver%s",t,Xe.pluralSuffix(t)):"";return o||r?Xe.format("Removed %s%s%s",o,o&&r?" and ":"",r):""},Je.convertClipBounds=function(e){var t=e[0],o=e[1],r=e[2],i=e[3],a=[[t,o],[t,i],[r,i],[r,o],[t,o]];return i>o&&r>t||n("Invalid bbox (should be [xmin, ymin, xmax, ymax]):",e),{arcs:new B([a]),layers:[{shapes:[[[0]]],geometry_type:"polygon"}]}},Je.getArcClassifier=function(e,t){function o(e,t){var o=u(e),r=null;return i[o]>-1&&(r=t(i[o],n[o]),r&&(i[o]=-1,n[o]=-1)),r}var r=t.size(),i=new Int32Array(r),n=new Int32Array(r);return Xe.initializeArray(i,-1),Xe.initializeArray(n,-1),Je.traversePaths(e,function(e){var t=u(e.arcId),o=e.shapeId,r=i[t];r==-1?i[t]=o:o<r?(n[t]=r,i[t]=o):n[t]=o}),function(e){return function(t){return o(t,e)}}},Je.findNeighbors=function(e,t){var o=function(e,t){return t>-1&&e>-1?[e,t]:null},r=Je.getArcClassifier(e,t)(o),i=[],n={},a=function(e){var t,o=r(e);o&&(t=o.join("~"),t in n==!1&&(i.push(o),n[t]=!0))};return Je.forEachArcId(e,a),i},ze.cluster=function(e,t,o){Je.requirePolygonLayer(e);var r=Je.calcPolygonClusters(e,t,o),i=o.id_field||"cluster";return Je.insertFieldValues(e,i,r),e},Je.calcPolygonClusters=function(e,t,o){function r(e){var t=s(e.ids),o=_.length;_[o]=t,g(t.friends,e.ids,o)}function i(){var e,t,o,r=-1,i=1/0;for(t=0,o=S.length;t<o;t++)e=S[t],null!==e&&e.score<i&&(i=e.score,r=t);return r==-1?null:(e=S[r],S[r]=null,e)}function a(e){return d(_[e.ids[0]],_[e.ids[1]])}function l(e,t){var o=e.area/(e.area+t.area),r=e.centroid,i=t.centroid;r.x=r.x*o+i.x*(1-o),r.y=r.y*o+i.y*(1-o)}function s(e){var t=_[e[0]],o=_[e[1]];return t.bounds.mergeBounds(o.bounds),t.area+=o.area,t.ids=t.ids.concat(o.ids),l(t,o),_[e[0]]=null,_[e[1]]=null,t.friends=p(t.friends.concat(o.friends)),t}function p(e){for(var t,o={},r=[],i=0;i<e.length;i++)t=e[i],t in o==!1&&null!==S[t]&&(r.push(t),o[t]=!0);return r}function g(e,t,o){for(var r,i,n=0,a=e.length;n<a;n++)i=e[n],r=S[i],c(r.ids,t)&&(S[i]=u(r,t,o))}function u(e,t,o){var r,i=e.ids[0],n=e.ids[1];return t[0]!=i&&t[1]!=i||(i=o),t[0]!=n&&t[1]!=n||(n=o),i==n?null:(e.ids=[i,n],r=y(e),r in x?null:(x[r]=!0,e.score=a(e),e.score<0?null:e))}function c(e,t){return e[0]===t[0]||e[0]===t[1]||e[1]===t[0]||e[1]===t[1]}function y(e){var t=e.ids[0],o=e.ids[1];return o<t&&(t=o,o=e.ids[0]),t+","+o}var h,d=Je.getPolygonClusterCalculator(o),f=e.shapes.length,m=Math.round(f*(o.pct||1)),v=o.group_by||null,_=e.shapes.map(function(o,r){var i=v&&e.data.getRecordAt(r)[v]||null;return{ids:[r],area:tt.getShapeArea(o,t),bounds:t.getMultiShapeBounds(o),centroid:tt.getShapeCentroid(o,t),group:i,friends:[]}}),S=[],x={};for(v&&!e.data&&n("Missing attribute data table"),Je.findNeighbors(e.shapes,t).forEach(function(e,t){var o,r,i=_[e[0]],n=_[e[1]];i.group===n.group&&(o={ids:e},o.score=a(o),o.score<0||(r=S.length,i.friends.push(r),n.friends.push(r),S.push(o)))});m-- >0&&(h=i());)r(h);return _.filter(Boolean).reduce(function(e,t,o){for(var r=t.ids,i=0;i<r.length;i++)e[r[i]]=o;return e},[])},Je.getPolygonClusterCalculator=function(e){var t=e.max_width||1/0,o=e.max_height||1/0,r=e.max_area||1/0;return function(e,i){var n=e.area+i.area,a=tt.distance2D(e.centroid.x,e.centroid.y,i.centroid.x,i.centroid.y),l=e.bounds.clone().mergeBounds(i.bounds);return(n>r||l.width()>t||l.height()>o)&&(a=-1),a}},Je.roundPoints=function(e,t){Je.forEachPoint(e.shapes,function(e){e[0]=t(e[0]),e[1]=t(e[1])})},Je.setCoordinatePrecision=function(e,t){var o,r,i=Xe.getRoundingFunction(t);return Je.transformPoints(e,function(e,t){return[i(e),i(t)]}),e.arcs&&(r=Je.addIntersectionCuts(e),o=Je.getPolygonDissolver(r)),e.layers.forEach(function(e){"polygon"==e.geometry_type&&o&&(e.shapes=e.shapes.map(o))}),e},Xe.getRoundingFunction=function(e){Xe.isNumber(e)&&0!==e||i("Rounding increment must be a non-zero number.");var t=1/e;return t>1&&(t=Math.round(t)),function(e){return Math.round(e*t)/t}},ze.colorizer=function(e){e.name||n("Missing required name= parameter"),Je.isReservedName(e.name)&&n('"'+e.name+'" is a reserved name'),Je.defs[e.name]=Je.getColorizerFunction(e)},Je.isReservedName=function(e){return/^(stroke|stroke-width|fill|opacity|r|class)$/.test(e)},Je.getColorizerFunction=function(e){var t,o=e.nodata||"white",r=e.precision?Xe.getRoundingFunction(e.precision):null;return e.colors&&e.colors.length||n("Missing colors= parameter"),e.breaks?t=Je.getSequentialColorFunction(e.colors,e.breaks,r):e.categories?t=Je.getCategoricalColorFunction(e.colors,e.other,e.categories):n("Missing categories= or breaks= parameter"),function(e){var r=t(e);return r||o}},Je.getCategoricalColorFunction=function(e,t,o){return e.length!=o.length&&n("Number of colors should be equal to the number of categories"),function(r){var i=o.indexOf(r);return i>=0?e[i]:r&&t?t:null}},Je.validateSequentialBreaks=function(e){var t=e.map(parseFloat);Xe.genericSort(t);for(var o=0;o<e.length;o++)e[o]!==t[o]&&n("Invalid class breaks:",e.join(","))},Je.getSequentialColorFunction=function(e,t,o){return e.length!=t.length+1&&n("Number of colors should be one more than number of class breaks"),Je.validateSequentialBreaks(t),function(r){var i=-1;return Number(r)===r&&(o&&(r=r(o)),i=Xe.getClassId(r,t)),i>-1&&i<e.length?e[i]:null}},Xe.getClassId=function(e,t){var o=-(1/0),r=1/0,i=0;if(!(e>=o&&e<=r))return-1;for(;i<t.length&&e>=t[i];)i++;return i},ze.dataFill=function(e,t,o){var r,i=o.field;i||n("Missing required field= parameter"),"polygon"!=e.geometry_type&&n("Target layer must be polygon type"),r=Je.fillMissingValues(e,i,Je.getSingleAssignment(e,i,t)),p("first pass:",r);do r=Je.fillMissingValues(e,i,Je.getMultipleAssignment(e,i,t)),p("count:",r);while(r>0);o.postprocess&&(Je.fillDataIslands(e,i,t),Je.fillDataIslands(e,i,t))},Je.fillDataIslands=function(e,t,o){var r=e.data.getRecords(),i=Je.getSingleAssignment(e,t,o,{min_border_pct:.5});r.forEach(function(e,o){var r=e[t],n=i(o);n&&n!=r&&(e[t]=n)})},Je.fillMissingValues=function(e,t,o){var r=e.data.getRecords(),i=Je.getEmptyRecordIds(r,t),n=0;return i.forEach(function(e){var i=o(e);Je.isEmptyValue(i)||(n++,r[e][t]=i)}),n},Je.getSingleAssignment=function(e,t,o,r){var i=Je.buildAssignmentIndex(e,t,o),n=r&&r.min_border_pct||0;return function(e){for(var t,o,r,a=i[e],l=0,s=0,p=null,g=0;g<a.length;g++)if(t=a[g],o=t.value,r=t.length,Je.isEmptyValue(o))l+=r;else{if(null!==p&&p!=o)return null;p=o,s+=r}return s/(s+l)<n?null:s>0?p:null}},Je.isEmptyValue=function(e){return!e&&0!==e},Je.getMultipleAssignment=function(e,t,o){var r;return function(i){r=r||Je.buildAssignmentIndex(e,t,o);for(var n,a,l,s=r[i],p={},g=0,u=0,c=null,y=0;y<s.length;y++)n=s[y],a=n.value,l=n.length,Je.isEmptyValue(a)?g+=l:(a in p&&(l+=p[a]),l>u&&(u=l,c=a),p[a]=l);return c}},Je.getEmptyRecordIds=function(e,t){for(var o=[],r=0,i=e.length;r<i;r++)Je.isEmptyValue(e[r][t])&&o.push(r);return o},Je.buildAssignmentIndex=function(e,t,o){function r(e,t){return e>-1?[e,t]:null}function i(e){var t,r=s(e);r&&(t=tt.calcPathLen([e],o,!o.isPlanar()),n(r[0],r[1],t),r[1]>-1&&n(r[1],r[0],t))}function n(e,t,o){var r=p[e]||(p[e]={});r[t]=o+(r[t]||0)}var a=e.shapes,l=e.data.getRecords(),s=Je.getArcClassifier(a,o)(r),p={},g={};return Je.forEachArcId(a,i),Object.keys(p).forEach(function(e){for(var o,r=p[e],i=Object.keys(r),n=g[e]=[],a=0;a<i.length;a++)o=i[a],n.push({length:r[o],value:o>-1?l[o][t]:null})}),g};var nt={};nt.ID_FIELD="FID",nt.typeLookup={LineString:"polyline",MultiLineString:"polyline",Polygon:"polygon",MultiPolygon:"polygon",Point:"point",MultiPoint:"point"},nt.translateGeoJSONType=function(e){return nt.typeLookup[e]||null},Je.FileReader=de,de.prototype.findString=function(e,t){var o,r=Math.min(this.size(),t||this.size()),i=this.readSync(0,r),n=e.length,a=i.length-n,l=e.charCodeAt(0);for(o=0;o<a;o++)if(i[o]==l&&i.toString("utf8",o,o+n)==e)return{offset:o+n,text:i.toString("utf8",0,o)};return null},Je.GeoJSONReader=fe,ze.buildTopology=function(e){if(e.arcs){var t=e.arcs.getVertexData(),o=Je.buildPathTopology(t.nn,t.xx,t.yy);e.arcs.updateVertexData(o.nn,o.xx,o.yy),e.layers.forEach(function(e){"polyline"!=e.geometry_type&&"polygon"!=e.geometry_type||(e.shapes=Je.replaceArcIds(e.shapes,o.paths))})}},Je.buildPathTopology=function(e,t,o){function r(){return!(!t.subarray||!o.subarray)}function n(e){for(var t,o=[],r=0,i=0,n=e.length;i<n;i++)t=e[i],o.push(t<2?null:p(r,r+t-1)),r+=t;return o}function a(t){var o=S[t],r=t+1;if(r<v&&S[r]===o)return t+1;var i=e[o];return s(t,t-i+1)?t-i+2:-1}function l(t){var o=S[t],r=t-1;if(r>=0&&S[r]===o)return t-1;var i=e[o];return s(t,t+i-1)?t+i-2:-1}function s(e,r){return t[e]==t[r]&&o[e]==o[r]}function p(e,t){for(var o,r=[],n=-1,a=e;a<t;a++)g(a)&&(n>-1?r.push(h(o,a)):n=a,o=a);return n==-1?r.push(d(e,t)):n==e?(g(t)||i("Topology error"),r.push(h(o,a))):r.push(y(o,t,e+1,n)),r}function g(e){var t,o,r=_[e],i=l(e),n=a(e);if(i==-1||n==-1)return!0;for(;e!=r;){if(t=l(r),o=a(r),t==-1||o==-1||u(i,n,t,o))return!0;r=_[r]}return!1}function u(e,r,i,n){var a=t[e],l=t[r],s=t[i],p=t[n],g=o[e],u=o[r],c=o[i],y=o[n];return!(a==p&&l==s&&g==y&&u==c||a==s&&l==p&&g==c&&u==y)}function c(e,t,o,i,n){var a,l=o-t+n-i+2,s=r()?Float64Array:Array,p=new s(l),g=0;for(a=t;a<=o;a++)p[g++]=e[a];for(a=i;a<=n;a++)p[g++]=e[a];return p}function y(e,r,i,n){var s=x.findMatchingArc(t,o,e,n,a,l);return null===s&&(s=x.addArc(c(t,e,r,i,n),c(o,e,r,i,n))),s}function h(e,r){var i=x.findMatchingArc(t,o,e,r,a,l);return null===i&&(i=x.addArc(E.call(t,e,r+1),E.call(o,e,r+1))),i}function d(r,n){for(var s,p=_[r],g=S[r];p!=r&&!(S[p]<g);)p=_[p];if(p==r)return h(r,n);for(var u=r;u<n;u++)if(s=x.findMatchingArc(t,o,u,u,a,l),null!==s)return s;i("Unmatched ring; id:",g,"len:",e[g])}var f,m,v=t.length,_=Se(t,o),S=xe(v,e),x=new ve(v),E=r()?t.subarray:Array.prototype.slice;return f=n(e),m=x.getVertexData(),m.paths=f,m},Je.replaceArcIds=function(e,t){function o(e,t){return e?e.map(function(e){return r(e,t)}):null}function r(e,t){return e.reduce(function(e,o){var r=u(o),i=t[r];if(i){o<0&&(i=i.concat(),Je.reversePath(i));for(var n=0,a=i.length;n<a;n++)e.push(i[n])}return e},[])}return e.map(function(e){return o(e,t)})},Je.getHighPrecisionSnapInterval=function(e){var t=e.getBounds();if(!t.hasBounds())return 0;var o=Math.max(Math.abs(t.xmin),Math.abs(t.ymin),Math.abs(t.xmax),Math.abs(t.ymax));return 1e-14*o},Je.snapCoords=function(e,t){var o=Je.getAvgSegment(e),r=.0025*o,i=r;t>0&&(i=t,s(Xe.format("Applying snapping threshold of %s -- %.6f times avg. segment length",t,t/o)));var n=Je.snapCoordsByInterval(e,i);n>0&&e.dedupCoords(),s(Xe.format("Snapped %s point%s",n,Xe.pluralSuffix(n)))},Je.snapCoordsByInterval=function(e,t){function o(e,t,o,r,i){for(var n,a,l,s=e,p=o.length,g=r[o[e]],u=i[o[e]],c=0;++s<p&&(n=o[s],a=r[n]-g,!(a>t));)l=i[n]-u,0===a&&0===l||a*a+l*l>t*t||(r[n]=g,i[n]=u,c++);return c}for(var r=0,i=e.getVertexData(),n=Xe.sortCoordinateIds(i.xx),a=0,l=n.length;a<l;a++)r+=o(a,t,n,i.xx,i.yy);return r},Xe.sortCoordinateIds=function(e){for(var t=e.length,o=new Uint32Array(t),r=0;r<t;r++)o[r]=r;return Xe.quicksortIds(e,o,0,o.length-1),o},Xe.quicksortIds=function(e,t,o,r){if(r-o>24){for(var i,n=e[t[o+r>>1]],a=o,l=r;a<=l;){for(;e[t[a]]<n;)a++;for(;e[t[l]]>n;)l--;a<=l&&(i=t[a],t[a]=t[l],t[l]=i,a++,l--)}l>o&&Xe.quicksortIds(e,t,o,l),a<r&&Xe.quicksortIds(e,t,a,r)}else Xe.insertionSortIds(e,t,o,r)},Xe.insertionSortIds=function(e,t,o,r){var i,n,a;for(a=o+1;a<=r;a++){for(i=t[a],n=a-1;n>=o&&e[i]<e[t[n]];n--)t[n+1]=t[n];t[n+1]=i}},Je.importGeoJSON=function(e,t){var o,r,i=Object.keys(nt.pathImporters),n=Xe.isString(e)?JSON.parse(e):e,a=new Te(t);return o="Feature"==n.type?{type:"FeatureCollection",features:[n]}:Xe.contains(i,n.type)?{type:"GeometryCollection",geometries:[n]}:n,(o.features||o.geometries||[]).forEach(a.parseObject),r=a.done(),Je.importCRS(r,n),r},nt.importGeometry=function(e,t){var o=e.type;o in nt.pathImporters?nt.pathImporters[o](e.coordinates,t):"GeometryCollection"==o?e.geometries.forEach(function(e){nt.importGeometry(e,t)}):p("GeoJSON.importGeometry() Unsupported geometry type:",e.type)},nt.pathImporters={LineString:function(e,t){t.importLine(e)},MultiLineString:function(e,t){for(var o=0;o<e.length;o++)nt.pathImporters.LineString(e[o],t)},Polygon:function(e,t){for(var o=0;o<e.length;o++)t.importRing(e[o],o>0)},MultiPolygon:function(e,t){for(var o=0;o<e.length;o++)nt.pathImporters.Polygon(e[o],t)},Point:function(e,t){t.importPoints([e])},MultiPoint:function(e,t){t.importPoints(e)}},Je.importCRS=function(e,t){"crs"in t&&(e.info.input_geojson_crs=t.crs)},Je.getFormattedStringify=function(e){function t(e,t){if(e in o&&Xe.isArray(t)){var i=JSON.stringify(t);if(i.indexOf(!1))return r+i.replace(/,/g,", ")+r}return t}var o=Xe.arrayToIndex(e),r="က⿕̐",i=new RegExp('"'+r+"|"+r+'"',"g"),n="  ";return function(e){var o=JSON.stringify(e,t,n);return o.replace(i,"")}},Je.exportPointData=function(e){var t,o;return e&&0!==e.length?(o={points:e,pointCount:e.length,bounds:tt.getPathBounds(e)},t={bounds:o.bounds,pathData:[o],partCount:1,pointCount:o.pointCount}):t={partCount:0,pointCount:0},t},Je.exportPathData=function(e,o,r){if("point"==r)return Je.exportPointData(e);var i=0,n=new t,a=[];return!e||"polyline"!=r&&"polygon"!=r||e.forEach(function(e,t){var l=o.getShapeIter(e),s=Je.exportPathCoords(l),g=!0;"polygon"==r?(s.area=tt.getPlanarPathArea2(s.points),g=s.pointCount>3&&0!==s.area):"polyline"==r&&(g=s.pointCount>1),g?(i+=s.pointCount,s.bounds=tt.getPathBounds(s.points),n.mergeBounds(s.bounds),a.push(s)):p("Skipping a collapsed",r,"path")}),{pointCount:i,pathData:a,pathCount:a.length,bounds:n}},Je.exportPathCoords=function(e){for(var t,o,r,i,n=[],a=0;e.hasNext();)t=e.x,o=e.y,0!==a&&r==t&&i==o||(n.push([t,o]),a++),r=t,i=o;return{points:n,pointCount:n.length}},Je.mergeDatasetsForExport=function(e){var t=e.map(function(e){return Xe.defaults({layers:e.layers.map(Je.copyLayerShapes)},e)});return Je.mergeDatasets(t)},Je.mergeDatasets=function(e){var t,o=[],r=0,a=[],l={},s=null;return e.forEach(function(e){var t,i=Je.getDatasetBounds(e),p=e.arcs?e.arcs.size():0;p>0&&o.push(e.arcs),i.hasBounds()&&(t=Je.probablyDecimalDegreeBounds(i),null===s?s=t:s!==t&&n("Unable to combine projected and unprojected datasets")),Je.mergeDatasetInfo(l,e),e.layers.forEach(function(e){"polygon"!=e.geometry_type&&"polyline"!=e.geometry_type||Je.forEachArcId(e.shapes,function(e){return e<0?e-r:e+r}),a.push(e)}),r+=p}),t=Je.mergeArcs(o),t.size()!=r&&i("[mergeDatasets()] Arc indexing error"),{info:l,arcs:t,layers:a}},Je.mergeDatasetInfo=function(e,t){var o=t.info||{};e.input_files=Xe.uniq((e.input_files||[]).concat(o.input_files||[])),e.input_formats=Xe.uniq((e.input_formats||[]).concat(o.input_formats||[])),Xe.defaults(e,o)},Je.mergeArcs=function(e){var t=e.map(function(e){return e.getRetainedInterval()>0&&(p("Baking-in simplification setting."),e.flatten()),e.getVertexData()}),o=Xe.mergeArrays(Xe.pluck(t,"xx"),Float64Array),r=Xe.mergeArrays(Xe.pluck(t,"yy"),Float64Array),i=Xe.mergeArrays(Xe.pluck(t,"nn"),Int32Array);return new B(i,o,r)},Xe.countElements=function(e){return e.reduce(function(e,t){return e+(t.length||0)},0)},Xe.mergeArrays=function(e,t){var o=Xe.countElements(e),r=t||Array,i=new r(o),n=0;return e.forEach(function(e){for(var t=e.length,o=0;o<t;o++)i[o+n]=e[o];n+=t}),i},ze.mergeLayers=function(e){var t;return e.length?(Je.checkLayersCanMerge(e),e.forEach(function(e){t?(t.shapes&&e.shapes?t.shapes=t.shapes.concat(e.shapes):t.shapes=null,t.data&&e.data?t.data=new ne(t.data.getRecords().concat(e.data.getRecords())):t.data=null):t=e}),t.name=Je.mergeLayerNames(e),[t]):null},Je.mergeLayerNames=function(e){return e.reduce(function(e,t){return null===e?e=t.name||null:e&&t.name&&(e=Xe.mergeNames(e,t.name)),e},null)||""},Je.checkFieldTypes=function(e,t){return t.reduce(function(t,o){var r=o.data?Je.getColumnType(e,o.data):null;return r&&t.indexOf(r)==-1&&t.push(r),t},[])},Je.findMissingFields=function(e){
var t=e.map(function(e){return e.data?e.data.getFields():[]}),o=t.reduce(function(e,t){return Xe.uniq(e.concat(t))},[]);return t.reduce(function(e,t){var r=Xe.difference(o,t);return Xe.uniq(e.concat(r))},[])},Je.checkLayersCanMerge=function(e){var t=Xe.uniq(Xe.pluck(e,"geometry_type")),o=e[0].data?e[0].data.getFields():[],r=Je.findMissingFields(e);Xe.uniq(t).length>1&&n("Incompatible geometry types:",t.map(function(e){return e||"[none]"}).join(", ")),r.length>0&&n("Field"+Xe.pluralSuffix(r.length),"missing from one or more layers:",r.join(", ")),o.forEach(function(t){var o=Je.checkFieldTypes(t,e);o.length>1&&n('Inconsistent data types in "'+t+'" field:',o.join(", "))})},Je.exportGeoJSON=function(e,t){t=t||{};var o,r=t.extension||"json";return t.file&&(r=Xe.getFileExtension(t.file)),o=t.combine_layers?[e.layers]:e.layers.map(function(e){return[e]}),o.map(function(o){var i=Je.mergeLayerNames(o)||"output";return{content:Je.exportLayersAsGeoJSON(o,e,t,"buffer"),filename:i+"."+r}})},Je.exportLayerAsGeoJSON=function(e,t,o,r,n){var a,l=Je.exportProperties(e.data,o),s=e.shapes,p=Je.exportIds(e.data,o);return n&&(a=o.prettify?Je.getFormattedStringify(["bbox","coordinates"]):JSON.stringify),l&&s&&l.length!==s.length&&i("Mismatch between number of properties and number of shapes"),(s||l||[]).reduce(function(o,i,g){var u=s?s[g]:null,c=nt.exporters[e.geometry_type],y=u?c(u,t.arcs):null;if(r)y={type:"Feature",geometry:y,properties:l?l[g]:null},p&&(y.id=p[g]);else if(!y)return o;return n&&(y=a(y),"buffer"==n&&(y=new Qe(y,"utf8"))),o.push(y),o},[])},Je.exportGeoJSONCollection=function(e,t,o){return Je.exportLayersAsGeoJSON([e],t,o||{})},Je.exportLayersAsGeoJSON=function(e,t,o,r){var i,n,a,l={},s=Je.useFeatureCollection(e,o);return s?(l.type="FeatureCollection",a="features"):(l.type="GeometryCollection",a="geometries"),Je.exportCRS(t,l),o.bbox&&(n=Je.getDatasetBounds(t),n.hasBounds()&&(l.bbox=n.toArray())),i=e.reduce(function(e,i,n){var a=Je.exportLayerAsGeoJSON(i,t,o,s,r);return e.length>0?e.concat(a):a},[]),r?nt.formatGeoJSON(l,i,a,r):(l[a]=i,l)},nt.formatGeoJSON=function(e,t,o,r){var i=JSON.stringify(e).replace(/\}$/,', "'+o+'": [\n'),n="\n]}";return"buffer"==r?nt.joinOutputBuffers(i,n,t):i+t.join(",\n")+n},nt.joinOutputBuffers=function(e,t,o){var r=new Qe(",\n","utf8"),i=o.reduce(function(e,t,o){return o>0&&e.push(r),e.push(t),e},[new Qe(e,"utf8")]);return i.push(new Qe(t,"utf8")),Qe.concat(i)},nt.exportPointGeom=function(e,t){var o=null;return 1==e.length?o={type:"Point",coordinates:e[0]}:e.length>1&&(o={type:"MultiPoint",coordinates:e}),o},nt.exportLineGeom=function(e,t){var o=Je.exportPathData(e,t,"polyline");if(0===o.pointCount)return null;var r=o.pathData.map(function(e){return e.points});return 1==r.length?{type:"LineString",coordinates:r[0]}:{type:"MultiLineString",coordinates:r}},nt.exportPolygonGeom=function(e,t){var o=Je.exportPathData(e,t,"polygon");if(0===o.pointCount)return null;var r=Je.groupPolygonRings(o.pathData),i=r.map(function(e){return e.map(function(e){return e.points})});return 1==i.length?{type:"Polygon",coordinates:i[0]}:{type:"MultiPolygon",coordinates:i}},nt.exporters={polygon:nt.exportPolygonGeom,polyline:nt.exportLineGeom,point:nt.exportPointGeom},Je.exportCRS=function(e,t){var o=e.info||{};!o.crs&&"input_geojson_crs"in o?t.crs=o.input_geojson_crs:o.crs&&!o.crs.is_latlong&&(t.crs=null)},Je.useFeatureCollection=function(e,t){return Xe.some(e,function(e){var o=e.data?e.data.getFields():[],r=Je.useFeatureProperties(o,t),i=!!Je.getIdField(o,t);return r||i})},Je.useFeatureProperties=function(e,t){return!(t.drop_table||t.cut_table||0===e.length||1==e.length&&e[0]==nt.ID_FIELD)},Je.exportProperties=function(e,t){var o,r,i=e?e.getFields():[],n=Je.getIdField(i,t);return Je.useFeatureProperties(i,t)?(r=e.getRecords(),o=n==nt.ID_FIELD?r.map(function(e){return e=Xe.extend({},e),delete e[n],e}):r):null},Je.getIdField=function(e,t){var o=[],r=t.id_field;return Xe.isString(r)?o.push(r):Xe.isArray(r)&&(o=r),o.push(nt.ID_FIELD),Xe.find(o,function(t){return Xe.contains(e,t)})},Je.exportIds=function(e,t){var o=e?e.getFields():[],r=Je.getIdField(o,t);return r?e.getRecords().map(function(e){return r in e?e[r]:null}):null};var at={};at.forEachPath=function(e,t){function o(e){e.type in i&&i[e.type](e)}function r(e){for(var o,r=0;r<e.length;r++)o=t(e[r]),o&&(e[r]=o)}var i={GeometryCollection:function(e){e.geometries.forEach(o)},LineString:function(e){var o=t(e.arcs);o&&(e.arcs=o)},MultiLineString:function(e){r(e.arcs)},Polygon:function(e){r(e.arcs)},MultiPolygon:function(e){e.arcs.forEach(r)}};o(e)},at.forEachArc=function(e,t){at.forEachPath(e,function(e){for(var o,r=0;r<e.length;r++)o=t(e[r]),Xe.isInteger(o)&&(e[r]=o)})},Je.importTopoJSON=function(e,t){var o,r,i;return Xe.isString(e)&&(e=JSON.parse(e)),e.arcs&&e.arcs.length>0&&(e.transform&&at.decodeArcs(e.arcs,e.transform),t&&t.precision&&at.roundCoords(e.arcs,t.precision),r=new B(e.arcs)),i=Object.keys(e.objects).reduce(function(o,i){for(var n,a=at.importObject(e.objects[i],r,t),l=0,s=a.length;l<s;l++)n=a[l],n.name=i,o.push(n);return o},[]),i.forEach(function(t){Je.layerHasPaths(t)&&Je.cleanShapes(t.shapes,r,t.geometry_type),"point"==t.geometry_type&&e.transform&&at.decodePoints(t.shapes,e.transform),t.data&&Je.fixInconsistentFields(t.data.getRecords())}),o={layers:i,arcs:r,info:{}},Je.importCRS(o,e),o},at.decodePoints=function(e,t){Je.forEachPoint(e,function(e){e[0]=e[0]*t.scale[0]+t.translate[0],e[1]=e[1]*t.scale[1]+t.translate[1]})},at.decodeArcs=function(e,t){var o=t.scale[0],r=t.scale[1],i=t.translate[0],n=t.translate[1];e.forEach(function(e){for(var t,a,l,s=0,p=0,g=0,u=e.length;g<u;g++)t=e[g],a=t[0]+s,l=t[1]+p,t[0]=a*o+i,t[1]=l*r+n,s=a,p=l})},at.roundCoords=function(e,t){var o,r=Xe.getRoundingFunction(t);e.forEach(function(e){for(var t=0,i=e.length;t<i;t++)o=e[t],o[0]=r(o[0]),o[1]=r(o[1])})},at.importObject=function(e,t,o){var r=new at.GeometryImporter(t,o),i="GeometryCollection"==e.type?e.geometries:[e];return i.forEach(r.addGeometryObject,r),r.done()},at.GeometryImporter=function(e,t){var o,r=t&&t.id_field||nt.ID_FIELD,i=[],a=[],l=[],s=0,p=0,g=null;this.addGeometryObject=function(e){var t=e.properties||null;o=a.length,a[o]=null,"id"in e&&(t=t||{},t[r]=e.id),i[o]=t,t||s++,e.type&&this.addShape(e),null===a[o]&&p++},this.addShape=function(t){var r,i=a[o],l=nt.translateGeoJSONType(t.type);"GeometryCollection"==t.type?t.geometries.forEach(this.addShape,this):l?(this.setGeometryType(l),r=at.shapeImporters[t.type](t,e),r&&r.length&&(Array.isArray(r[0])?a[o]=i?i.concat(r):r:n("Invalid TopoJSON",t.type,"geometry"))):t.type&&n("Invalid TopoJSON geometry type:",t.type)},this.setGeometryType=function(e){var t=o<l.length?l[o]:null;t?t!=e&&n("Unable to import mixed-type TopoJSON geometries"):(l[o]=e,this.updateCollectionType(e))},this.updateCollectionType=function(e){g?e&&g!=e&&(g="mixed"):g=e},this.done=function(){var e;return e="mixed"==g?Je.divideFeaturesByType(a,i,l):[{geometry_type:g,shapes:g?a:null,data:s<a.length?new ne(i):null}]}},at.importPolygonArcs=function(e,t){var o=e[0],r=tt.getPlanarPathArea(o,t),i=null;if(!r)return null;r<0&&Je.reversePath(o),i=[o];for(var n=1;n<e.length;n++)o=e[n],r=tt.getPlanarPathArea(o,t),r&&(r>0&&Je.reversePath(o),i.push(o));return i},at.shapeImporters={Point:function(e){return[e.coordinates]},MultiPoint:function(e){return e.coordinates},LineString:function(e){return[e.arcs]},MultiLineString:function(e){return e.arcs},Polygon:function(e,t){return at.importPolygonArcs(e.arcs,t)},MultiPolygon:function(e,t){return e.arcs.reduce(function(e,o){var r=at.importPolygonArcs(o,t);return r&&(e=e?e.concat(r):r),e},null)}},at.getPresimplifyFunction=function(e){var t=1e4,o=t/e;return function(e){return e===1/0?0:Math.ceil(e*o)}},ze.explodeFeatures=function(e,t,o){var r=e.data?e.data.getRecords():null,i=r?[]:null,n=[],a=Xe.extend({},e);return e.shapes.forEach(function(a,l){var s;if(a?(s="polygon"==e.geometry_type&&a.length>1?o&&o.naive?Je.explodePolygonNaive(a,t):Je.explodePolygon(a,t):Je.explodeShape(a),Xe.merge(n,s)):n.push(null),null!==i)for(var p=0,g=s?s.length:1;p<g;p++)i.push(Je.cloneProperties(r[l]))}),a.shapes=n,null!==i&&(a.data=new ne(i)),a},Je.explodeShape=function(e){return e.map(function(e){return[e.concat()]})},Je.explodePolygon=function(e,t){var o=Je.getPathMetadata(e,t,"polygon"),r=Je.groupPolygonRings(o);return r.map(function(e){return e.map(function(e){return e.ids})})},Je.explodePolygonNaive=function(e,t){var o=Je.getPathMetadata(e,t,"polygon");return console.log("Naive"),o.map(function(e){return e.area<0&&Je.reversePath(e.ids),[e.ids]})},Je.cloneProperties=function(e){var t={};for(var o in e)t[o]=e[o];return t},Je.exportTopoJSON=function(e,t){var o="."+(t.extension||"json"),r=!t.final||Je.datasetHasPaths(e)&&e.arcs.getRetainedInterval()>0,i=JSON.stringify;return t.prettify&&(i=Je.getFormattedStringify("coordinates,arcs,bbox,translate,scale".split(","))),t.singles?Je.splitDataset(e).map(function(e){return r&&(e=Je.copyDatasetForExport(e)),{content:i(at.exportTopology(e,t)),filename:(e.layers[0].name||"output")+o}}):(r&&(e=Je.copyDatasetForExport(e)),[{filename:t.file||Xe.getOutputFileBase(e)+o,content:i(at.exportTopology(e,t))}])},at.exportTopology=function(e,t){var o={type:"Topology",arcs:[]},r=Je.datasetHasPaths(e),i=Je.getDatasetBounds(e);return t.bbox&&i.hasBounds()&&(o.bbox=i.toArray()),r&&t.presimplify&&!e.arcs.getVertexData().zz&&ze.simplify(e,t),t.no_quantization||!t.quantization&&!r||(o.transform=at.transformDataset(e,i,t)),r&&(Je.dissolveArcs(e),o.arcs=at.exportArcs(e.arcs,i,t),o.transform&&at.deltaEncodeArcs(o.arcs)),o.objects=e.layers.reduce(function(o,r,i){var n=r.name||"layer"+(i+1);return o[n]=at.exportLayer(r,e.arcs,t),o},{}),Je.exportCRS(e,o),o},at.transformDataset=function(e,t,o){function r(e,t){var o=n.transform(e,t);return[Math.round(o[0]),Math.round(o[1])]}var i=at.calcExportBounds(t,e.arcs,o),n=t.getTransform(i),a=n.invert();return e.arcs&&e.arcs.transformPoints(r),o.no_point_quantization||e.layers.filter(Je.layerHasPoints).forEach(function(e){Je.transformPointsInLayer(e,r)}),{scale:[a.mx,a.my],translate:[a.bx,a.by]}},at.exportArcs=function(e,t,o){var r=null,i=[];return o.presimplify&&(r=at.getPresimplifyFunction(t.width())),e.forEach2(function(e,t,o,n,a){for(var l,s=[],p=e+t;e<p;e++)l=[o[e],n[e]],r&&l.push(r(a[e])),s.push(l);i.push(s.length>1?s:null)}),i},at.deltaEncodeArcs=function(e){e.forEach(function(e){for(var t,o,r,i,n,a=0,l=e.length;a<l;a++)n=e[a],r=n[0],i=n[1],a>0&&(n[0]=r-t,n[1]=i-o),t=r,o=i})},at.calcExportResolution=function(e,t){var o=Je.getAvgSegment2(e);return[o[0]*t,o[1]*t]},at.calcExportBounds=function(e,o,r){var i,n,a;return i=r.topojson_precision>0?at.calcExportResolution(o,r.topojson_precision):r.quantization>0?[e.width()/(r.quantization-1),e.height()/(r.quantization-1)]:r.precision>0?[r.precision,r.precision]:at.calcExportResolution(o,.02),n=Math.ceil(e.width()/i[0])||0,a=Math.ceil(e.height()/i[1])||0,new t(0,0,n,a)},at.exportProperties=function(e,t,o){var r=Je.exportProperties(t,o),i=Je.exportIds(t,o);e.forEach(function(e,t){r&&(e.properties=r[t]),i&&(e.id=i[t])})},at.exportLayer=function(e,t,o){for(var r=Je.getFeatureCount(e),i=[],n=0;n<r;n++)i[n]={type:null};return Je.layerHasGeometry(e)&&at.exportGeometries(i,e.shapes,t,e.geometry_type),e.data&&at.exportProperties(i,e.data,o),{type:"GeometryCollection",geometries:i}},at.exportGeometries=function(e,t,o,r){var i=at.exporters[r];i&&t&&t.forEach(function(t,r){t&&t.length>0&&(e[r]=i(t,o))})},at.exportPolygonGeom=function(e,t){var o={};return e=Je.filterEmptyArcs(e,t),e&&0!==e.length?e.length>1?(o.arcs=Je.explodePolygon(e,t),1==o.arcs.length?(o.arcs=o.arcs[0],o.type="Polygon"):o.type="MultiPolygon"):(o.arcs=e,o.type="Polygon"):o.type=null,o},at.exportLineGeom=function(e,t){var o={};return e=Je.filterEmptyArcs(e,t),e&&0!==e.length?1==e.length?(o.type="LineString",o.arcs=e[0]):(o.type="MultiLineString",o.arcs=e):o.type=null,o},at.exporters={polygon:at.exportPolygonGeom,polyline:at.exportLineGeom,point:nt.exportPointGeom};var lt={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULIPOINTM:28,MULTIPATCH:31};lt.isPolygonType=function(e){return 5==e||15==e||25==e},lt.isPolylineType=function(e){return 3==e||13==e||23==e},lt.isMultiPartType=function(e){return lt.isPolygonType(e)||lt.isPolylineType(e)},lt.isMultiPointType=function(e){return 8==e||18==e||28==e},lt.isZType=function(e){return Xe.contains([11,13,15,18],e)},lt.isMType=function(e){return lt.isZType(e)||Xe.contains([21,23,25,28],e)},lt.hasBounds=function(e){return lt.isMultiPartType(e)||lt.isMultiPointType(e)},Je.translateShapefileType=function(e){return Xe.contains([lt.POLYGON,lt.POLYGONM,lt.POLYGONZ],e)?"polygon":Xe.contains([lt.POLYLINE,lt.POLYLINEM,lt.POLYLINEZ],e)?"polyline":Xe.contains([lt.POINT,lt.POINTM,lt.POINTZ,lt.MULTIPOINT,lt.MULTIPOINTM,lt.MULTIPOINTZ],e)?"point":null},Je.isSupportedShapefileType=function(e){return Xe.contains([0,1,3,5,8,11,13,15,18,21,23,25,28],e)},Je.getShapefileType=function(e){return{polygon:lt.POLYGON,polyline:lt.POLYLINE,point:lt.MULTIPOINT}[e]||lt.NULL};var st=function(){return{isNull:!0,pointCount:0,partCount:0,byteLength:12}};Le.prototype.type=function(){return this.header().type},Le.prototype.getCounts=function(){var e={nullCount:0,partCount:0,shapeCount:0,pointCount:0};return this.forEachShape(function(t){t.isNull&&e.nullCount++,e.pointCount+=t.pointCount,e.partCount+=t.partCount,e.shapeCount++}),e},Je.importShp=function(e,t){var o=new Le(e),r=o.type(),i=Je.translateShapefileType(r),a=Xe.defaults({type:i,reserved_points:Math.round(o.header().byteLength/16)},t),l=new Pe(a);return Je.isSupportedShapefileType(r)||n("Unsupported Shapefile type:",r),lt.isZType(r)?s("Warning: Shapefile Z data will be lost."):lt.isMType(r)&&s("Warning: Shapefile M data will be lost."),o.forEachShape(function(e){l.startShape(),e.isNull||("point"==i?l.importPoints(e.readPoints()):e.stream(l))}),l.done()},Ce.prototype.transformXY=function(e,t,o){return o=o||{},o.x=e*this.a+t*this.c+this.tx,o.y=e*this.b+t*this.d+this.ty,o},Ce.prototype.translate=function(e,t){this.tx+=e,this.ty+=t},Ce.prototype.rotate=function(e,t,o){var r=Math.cos(e),i=Math.sin(e);t=t||0,o=o||0,this.a=r,this.c=-i,this.b=i,this.d=r,this.tx+=t-t*r+o*i,this.ty+=o-t*i-o*r},Ce.prototype.scale=function(e,t){this.a*=e,this.c*=e,this.b*=t,this.d*=t},Je.projectionIndex={robinson:"+proj=robin +datum=WGS84",webmercator:"+proj=merc +a=6378137 +b=6378137",wgs84:"+proj=longlat +datum=WGS84",albersusa:Ie},Je.getProjInfo=function(e){var t,o;try{t=Je.getDatasetProjection(e),t&&(o=Je.crsToProj4(t))}catch(e){}return o||"[unknown]"},Je.crsToProj4=function(e){return require("mproj").internal.get_proj_defn(e)},Je.crsToPrj=function(e){var t;try{t=require("mproj").internal.wkt_from_proj4(e)}catch(e){}return t},Je.crsAreEqual=function(e,t){var o=Je.crsToProj4(e);return!!o&&o==Je.crsToProj4(t)},Je.getProjDefn=function(e){var t,o=require("mproj");return e in Je.projectionIndex?t=Je.projectionIndex[e]:e in o.internal.pj_list?t="+proj="+e:/^\+/.test(e)?t=e:n("Unknown projection definition:",e),t},Je.getProjection=function(e){var t,o=Je.getProjDefn(e);if("function"==typeof o)t=o();else try{t=require("mproj").pj_init(o)}catch(e){n("Unable to use projection",o,"("+e.message+")")}return t||null},Je.setDatasetProjection=function(e,t){e.info=e.info||{},e.info.crs=t.crs,e.info.prj=t.prj},Je.getDatasetProjection=function(e){var t=e.info||{},o=t.crs;return!o&&t.prj&&(o=Je.parsePrj(t.prj)),!o&&Je.probablyDecimalDegreeBounds(Je.getDatasetBounds(e))&&(o=Je.getProjection("wgs84")),o},Je.printProjections=function(){var e=require("mproj").internal.pj_list,t="Proj4 projections\n";Object.keys(e).sort().forEach(function(o){t+="  "+Xe.rpad(o,7," ")+"  "+e[o].name+"\n"}),t+="\nAliases",Object.keys(Je.projectionIndex).sort().forEach(function(e){t+="\n  "+e}),s(t)},Je.translatePrj=function(e){var t;try{t=require("mproj").internal.wkt_to_proj4(e)}catch(e){n("Unusable .prj file ("+e.message+")")}return t},Je.parsePrj=function(e){return Je.getProjection(Je.translatePrj(e))},Je.exportShapefile=function(e,t){return e.layers.reduce(function(o,r){var i=Je.exportPrjFile(r,e);return o=o.concat(Je.exportShpAndShxFiles(r,e,t)),o=o.concat(Je.exportDbfFile(r,e,t)),i&&o.push(i),o},[])},Je.exportPrjFile=function(e,t){var o=t.info||{},r=o.prj;if(!r)try{r=Je.crsToPrj(Je.getDatasetProjection(t))}catch(e){}return r||s("Unable to generate .prj file for",e.name+".shp"),r?{content:r,filename:e.name+".prj"}:null},Je.exportShpAndShxFiles=function(e,r,i){var n=e.geometry_type,a=Je.getShapefileType(n),l=100,s=new t,p=e.shapes||Xe.initializeArray(new Array(Je.getFeatureCount(e)),null),g=p.map(function(e,t){var o=Je.exportPathData(e,r.arcs,n),i=Je.exportShpRecord(o,t+1,a);return l+=i.buffer.byteLength,i.bounds&&s.mergeBounds(i.bounds),i.buffer}),u=new o(l,!1).writeInt32(9994).skipBytes(20).writeInt32(l/2).littleEndian().writeInt32(1e3).writeInt32(a);s.hasBounds()?u.writeFloat64(s.xmin||0).writeFloat64(s.ymin||0).writeFloat64(s.xmax||0).writeFloat64(s.ymax||0):u.skipBytes(32),u.skipBytes(32);var c=100+8*g.length,y=new o(c,!1).writeBuffer(u.buffer(),100).position(24).bigEndian().writeInt32(c/2).position(100);return g.forEach(function(e,t){var o=u.position()/2,r=(e.byteLength-8)/2;y.writeInt32(o),y.writeInt32(r),u.writeBuffer(e)}),[{content:u.buffer(),filename:e.name+".shp"},{content:y.buffer(),filename:e.name+".shx"}]},Je.exportShpRecord=function(e,t,r){var n=null,a=null;if(e.pointCount>0){var l=lt.isMultiPartType(r),s=52,p=l?s+4*e.pathCount:48,g=p+16*e.pointCount,u=0;n=e.bounds,a=new o(g,!1).writeInt32(t).writeInt32((g-8)/2).littleEndian().writeInt32(r).writeFloat64(n.xmin).writeFloat64(n.ymin).writeFloat64(n.xmax).writeFloat64(n.ymax),l?a.writeInt32(e.pathCount):e.pathData.length>1&&i("[exportShpRecord()] Tried to export multiple paths as type:",r),a.writeInt32(e.pointCount),e.pathData.forEach(function(e,t){l&&a.position(s+4*t).writeInt32(u),a.position(p+16*u);for(var o=e.points,r=0,i=o.length;r<i;r++)a.writeFloat64(o[r][0]),a.writeFloat64(o[r][1]);u+=r}),e.pointCount!=u&&i("Shp record point count mismatch; pointCount:",u,"data.pointCount:",e.pointCount)}else a=new o(12,!1).writeInt32(t).writeInt32(2).littleEndian().writeInt32(0);return{bounds:n,buffer:a.buffer()}},Je.importDbfTable=function(e,t){var o=t||{};return new Ae(e,o.encoding)},Xe.extend(Ae.prototype,it),Je.exportDbf=function(e,t){return e.layers.reduce(function(o,r){return r.data&&(o=o.concat(Je.exportDbfFile(r,e,t))),o},[])},Je.exportDbfFile=function(e,t,o){var r,i=e.data;return(!i||o.cut_table||o.drop_table)&&(i=new ne(e.shapes?e.shapes.length:0)),0===i.getFields().length&&i.addIdField(),r=i.exportAsDbf(o.encoding||"utf8"),Xe.isInteger(o.ldid)&&(new Uint8Array(r)[29]=o.ldid),[{content:r,filename:e.name+".dbf"}]},nt.convertPointFeatureToSquare=function(e,t,o){var r=e.geometry,i=2*(t in e.properties?e.properties[t]:o);i>0==!1?e.geometry=null:"Point"==r.type?e.geometry={type:"Polygon",coordinates:nt.convertPointCoordsToSquareCoords(r.coordinates,i)}:"MultiPoint"==r.type&&(e.geometry={type:"MultiPolygon",coordinates:r.coordinates.map(function(e){return nt.convertPointCoordsToSquareCoords(e,i)})})},nt.convertPointCoordsToSquareCoords=function(e,t){var o=t/2,r=e[0]-o,i=e[0]+o,n=e[1]+o,a=e[1]-o;return[[[r,n],[i,n],[i,a],[r,a],[r,n]]]},ze.svgStyle=function(e,t,o){var r=Object.keys(o),i=Je.getStyleFields(r,Je.svgStyles,Je.invalidSvgTypes[e.geometry_type]);i.forEach(function(r){var i,n,a=o[r],l=null,s=Je.svgStyleTypes[r];e.data||Je.initDataTable(e),"number"==s&&Je.isSvgNumber(a)?l=Number(a):"color"==s&&Je.isSvgColor(a,e.data.getFields())?l=a:"classname"==s&&Je.isSvgClassName(a,e.data.getFields())&&(l=a),null===l&&(n=Je.compileValueExpression(a,e,t.arcs,{context:Je.defs})),i=e.data.getRecords(),i.forEach(function(e,t){e[r]=n?n(t):l})})},Je.isSvgClassName=function(e,t){return e=e.trim(),(!t||t.indexOf(e)==-1)&&/^( ?[_a-z][-_a-z0-9]*\b)+$/i.test(e)},Je.isSvgNumber=function(e){return Xe.isFiniteNumber(e)||Xe.isString(e)&&/^-?[.0-9]+$/.test(e)},Je.isSvgColor=function(e,t){return e=e.trim(),(!t||t.indexOf(e)==-1)&&/^[a-z]+$/i.test(e)||/^#[0-9a-f]+$/i.test(e)||/^rgba?\([0-9,. ]+\)$/.test(e)},Je.getStyleFields=function(e,t,o){return e.reduce(function(e,r){return r in t&&(o&&o.indexOf(r)!=-1||e.push(r)),e},[])},Je.getSvgStyleFields=function(e){var t=e.data?e.data.getFields():[];return Je.getStyleFields(t,Je.svgStyles,Je.invalidSvgTypes[e.geometry_type])},Je.layerHasSvgDisplayStyle=function(e){var t=Je.getSvgStyleFields(e);return"point"==e.geometry_type?t.indexOf("r")>-1:Xe.difference(t,["opacity","class"]).length>0},Je.invalidSvgTypes={polygon:["r"],polyline:["r","fill"]},Je.svgStyles={class:"class",opacity:"opacity",r:"radius",fill:"fillColor",stroke:"strokeColor",stroke_width:"strokeWidth"},Je.svgStyleTypes={class:"classname",opacity:"number",r:"number",fill:"color",stroke:"color",stroke_width:"number"};var pt={};pt.importGeoJSONFeatures=function(e){return e.map(function(e,t){var o="Feature"==e.type?e.geometry:e,r=o&&o.type,i=null;return r&&o.coordinates&&(i=pt.geojsonImporters[r](o.coordinates)),i?(e.properties&&pt.applyStyleAttributes(i,r,e.properties),"id"in e&&(i.properties||(i.properties={}),i.properties.id=e.id),i):{tag:"g"}})},pt.stringify=function(e){var t="<"+e.tag;return e.properties&&(t+=pt.stringifyProperties(e.properties)),e.children?(t+=">\n",t+=e.children.map(pt.stringify).join("\n"),t+="\n</"+e.tag+">"):t+="/>",t},pt.stringEscape=function(){var e=/[&<>"']/g,t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};return function(o){return String(o).replace(e,function(e){return t[e]})}}(),pt.stringifyProperties=function(e){return Object.keys(e).reduce(function(t,o,r){var i=e[o],n=Xe.isString(i)?i:JSON.stringify(i);return t+" "+o+'="'+pt.stringEscape(n)+'"'},"")},pt.applyStyleAttributes=function(e,t,o){for(var r,i=(e.properties,Je.invalidSvgTypes[nt.translateGeoJSONType(t)]),n=Je.getStyleFields(Object.keys(o),Je.svgStyles,i),a=0,l=n.length;a<l;a++)r=n[a],pt.setAttribute(e,r.replace("_","-"),o[r])},pt.setAttribute=function(e,t,o){var r,i;if("r"!=t&&"class"!=t||!e.children)e.properties||(e.properties={}),e.properties[t]=o;else{r=e.children;for(var n=0;n<r.length;n++)i=r[n],i.properties||(i.properties={}),i.properties[t]=o}},pt.importMultiGeometry=function(e,t){for(var o=[],r=0;r<e.length;r++)o.push(t(e[r]));return o.length>0?{tag:"g",children:o}:null},pt.importMultiPath=function(e,t){for(var o,r=0;r<e.length;r++)0===r?o=t(e[r]):o.properties.d+=" "+t(e[r]).properties.d;return o},pt.mapVertex=function(e){return e[0]+" "+-e[1]},pt.importLineString=function(e){var t="M "+e.map(pt.mapVertex).join(" ");return{tag:"path",properties:{d:t}}},pt.importPoint=function(e){return{tag:"circle",properties:{cx:e[0],cy:-e[1]}}},pt.importPolygon=function(e){for(var t,o,r=0;r<e.length;r++)t=o?o.properties.d+" ":"",o=pt.importLineString(e[r]),o.properties.d=t+o.properties.d+" Z";return o},pt.geojsonImporters={Point:pt.importPoint,Polygon:pt.importPolygon,LineString:pt.importLineString,MultiPoint:function(e){return pt.importMultiGeometry(e,pt.importPoint)},MultiLineString:function(e){return pt.importMultiPath(e,pt.importLineString)},MultiPolygon:function(e){return pt.importMultiPath(e,pt.importPolygon)}},Je.exportSVG=function(e,t){var o,r,i='<?xml version="1.0"?>\n<svg xmlns="http://www.w3.org/2000/svg" version="1.2" baseProfile="tiny" width="%d" height="%d" viewBox="%s %s %s %s" stroke-linecap="round" stroke-linejoin="round">\n%s\n</svg>';return t.final?e.arcs&&e.arcs.flatten():e=Je.copyDataset(e),o=Je.transformCoordsForSVG(e,t),r=e.layers.map(function(o){return Je.exportLayerAsSVG(o,e,t)}).join("\n"),r=Xe.format(i,o.width(),o.height(),0,0,o.width(),o.height(),r),[{content:r,filename:t.file||Xe.getOutputFileBase(e)+".svg"}]},Je.transformCoordsForSVG=function(e,o){var r,i,n,a=o.width>0?o.width:800,l=o.margin>=0?o.margin:1,s=Je.getDatasetBounds(e),p=o.precision||1e-4;return o.svg_scale>0&&(a=s.width()/o.svg_scale,l=0),Je.padViewportBoundsForSVG(s,a,l),r=Math.ceil(a*s.height()/s.width()),i=new t(0,-r,a,0),n=s.getTransform(i),Je.transformPoints(e,function(e,t){return n.transform(e,t)}),Je.setCoordinatePrecision(e,p),i},Je.padViewportBoundsForSVG=function(e,t,o){var r,i=e.width()||e.height()||1;o>=0==!1&&(o=1),r=i/(t-2*o)*o,e.padBounds(r,r,r,r)},Je.exportGeoJSONForSVG=function(e,t,o){var r=Je.exportGeoJSONCollection(e,t,o);return"square"==o.point_symbol&&r.features&&r.features.forEach(function(e){nt.convertPointFeatureToSquare(e,"r",2)}),r},Je.exportLayerAsSVG=function(e,t,o){var r=Je.exportGeoJSONForSVG(e,t,o),i=r.features||r.geometries||(r.type?[r]:[]),n=pt.importGeoJSONFeatures(i),a={tag:"g",children:n,properties:{id:e.name}};return"polyline"==e.geometry_type&&(a.properties.fill="none",a.properties.stroke="black",a.properties["stroke-width"]=1),pt.stringify(a)},Je.exportDelim=function(e,t){var o=Je.getExportDelimiter(e.info,t),r=Je.getDelimFileExtension(o,t);return e.layers.reduce(function(e,t){return t.data&&e.push({content:Je.exportDelimTable(t,o),filename:(t.name||"output")+"."+r}),e},[])},Je.exportDelimTable=function(e,t){for(var o=require("d3-dsv").dsvFormat(t),r=e.data.getFields(),i=Je.getDelimRowFormatter(r,e.data),n=e.data.getRecords(),a=o.formatRows([r]),l=0,s=n.length;l<s;l++)a+="\n"+o.formatRows([i(n[l])]);return a},Je.getDelimRowFormatter=function(e,t){var o=e.map(function(e){var o=Je.getColumnType(e,t);return function(t){return"object"==o?JSON.stringify(t[e]):t[e]}});return function(e){for(var t=[],r=0;r<o.length;r++)t.push(o[r](e));return t}},Je.getExportDelimiter=function(e,t){var o=",",r=t.file?Xe.getFileExtension(t.file):"";return t.delimiter?o=t.delimiter:"tsv"==r?o="\t":"csv"==r?o=",":e.input_delimiter&&(o=e.input_delimiter),o},Je.getDelimFileExtension=function(e,t){var o="txt";return t.file?o=Xe.getFileExtension(t.file):"\t"==e?o="tsv":","==e&&(o="csv"),o},Je.importJSONTable=function(e){return Je.fixInconsistentFields(e),{layers:[{data:new ne(e)}],info:{}}},Je.exportJSON=function(e,t){return e.layers.reduce(function(e,t){return t.data&&e.push({content:Je.exportJSONTable(t),filename:(t.name||"output")+".json"}),e},[])},Je.exportJSONTable=function(e){return JSON.stringify(e.data.getRecords())},Je.exportTargetLayers=function(e,t){var o=e.map(function(e){return Xe.defaults({layers:e.layers},e.dataset)});return Je.exportDatasets(o,t)},Je.exportDatasets=function(e,t){var o,r=Je.getOutputFormat(e[0],t);return"svg"==r||"topojson"==r||"geojson"==r&&t.combine_layers?e.length>1&&(e=[Je.mergeDatasetsForExport(e)],"topojson"==r&&ze.buildTopology(e[0]),t=Xe.defaults({final:!0},t)):(e=e.map(Je.copyDatasetForRenaming),Je.assignUniqueLayerNames2(e)),o=e.reduce(function(e,o){return t.target&&Xe.sortOn(o.layers,"match_id",!0),e.concat(Je.exportFileContent(o,t))},[]),Je.assignUniqueFileNames(o),o},Je.exportFileContent=function(e,t){var o=t.format=Je.getOutputFormat(e,t),r=Je.exporters[o],n=[];return o?r||i("Unknown output format:",o):i("Missing output format"),e=Xe.defaults({layers:e.layers.map(function(e){return Xe.extend({},e)})},e),t.file&&"topojson"!=o&&e.layers.forEach(function(e){e.name=Xe.getFileBase(t.file)}),Je.assignUniqueLayerNames(e.layers),t.precision&&"svg"!=o&&(e=Je.copyDatasetForExport(e),Je.setCoordinatePrecision(e,t.precision)),t.cut_table&&(n=Je.exportDataTables(e.layers,t).concat(n)),t.extension&&(t.extension=Je.fixFileExtension(t.extension,o)),Je.validateLayerData(e.layers),n=r(e,t).concat(n),t.bbox_index&&n.push(Je.createIndexFile(e)),Je.validateFileNames(n),n},Je.exporters={geojson:Je.exportGeoJSON,topojson:Je.exportTopoJSON,shapefile:Je.exportShapefile,dsv:Je.exportDelim,dbf:Je.exportDbf,json:Je.exportJSON,svg:Je.exportSVG},Je.getOutputFormat=function(e,t){var o=t.file||null,r=e.info&&e.info.input_formats&&e.info.input_formats[0],i=null;return t.format?i=t.format:o?i=Je.inferOutputFormat(o,r):r&&(i=r),i},Je.createIndexFile=function(e){var t=e.layers.map(function(t){var o=Je.getLayerBounds(t,e.arcs);return{bbox:o.toArray(),name:t.name}});return{content:JSON.stringify(t),filename:"bbox-index.json"}},Je.validateLayerData=function(e){e.forEach(function(e){e.geometry_type?(Xe.contains(["polygon","polyline","point"],e.geometry_type)||i("A layer has an invalid geometry type:",e.geometry_type),e.shapes||i("A layer is missing shape data")):e.shapes&&Xe.some(e.shapes,function(e){return!!e})&&i("A layer contains shape records and a null geometry type")})},Je.validateFileNames=function(e){var t={};e.forEach(function(e,o){var r=e.filename;r||i("Missing a filename for file"+o),r in t&&i("Duplicate filename",r),t[r]=!0})},Je.assignUniqueLayerNames=function(e){var t=e.map(function(e){return e.name||"layer"}),o=Je.uniqifyNames(t);e.forEach(function(e,t){e.name=o[t]})},Je.assignUniqueLayerNames2=function(e){var t=e.reduce(function(e,t){return e.concat(t.layers)},[]);Je.assignUniqueLayerNames(t)},Je.assignUniqueFileNames=function(e){var t=e.map(function(e){return e.filename}),o=Je.uniqifyNames(t,Je.formatVersionedFileName);e.forEach(function(e,t){e.filename=o[t]})},Je.exportDataTables=function(e,t){var o=[];return e.forEach(function(e){e.data&&o.push({content:JSON.stringify(e.data),filename:(e.name?e.name+"-":"")+"table.json"})}),o},Je.formatVersionedName=function(e,t){var o=String(t);return/[0-9]$/.test(e)&&(o="-"+o),e+o},Je.formatVersionedFileName=function(e,t){var o,r,i=e.split(".");return i.length<2?Je.formatVersionedName(e,t):(o=i.pop(),r=i.join("."),Je.formatVersionedName(r,t)+"."+o)},Je.fixFileExtension=function(e,t){return e.replace(/^\.+/,"")},Je.uniqifyNames=function(e,t){var o=Xe.countValues(e),r=t||Je.formatVersionedName,i={};return Object.keys(o).forEach(function(e){o[e]>1&&(i[e]=!0)}),e.map(function(e){for(var t,o=1,n=e;n in i;){if(t=r(e,o),!t||t==n)throw new Error("Naming error");n=t,o++}return i[n]=!0,n})},ze.evaluateEachFeature=function(e,t,o,r){var i,n,a=Je.getFeatureCount(e);a>0&&!e.data&&(e.data=new ne(a)),r&&r.where&&(n=Je.compileValueExpression(r.where,e,t)),i=Je.compileFeatureExpression(o,e,t,{context:Je.defs});for(var l=0;l<a;l++)n&&!n(l)||i(l)},Je.identifyJSONString=function(e){var t=1e3,o=null;return e.length>t&&(e=e.substr(0,t)),e=e.replace(/\s/g,""),/^\[[{\]]/.test(e)?o="json":/"arcs":\[|"objects":\{|"transform":\{/.test(e)?o="topojson":/^\{"/.test(e)&&(o="geojson"),o},Je.identifyJSONObject=function(e){var t=null;return"Topology"==e.type?t="topojson":e.type?t="geojson":Xe.isArray(e)&&(t="json"),t},Je.importGeoJSONFile=function(e,t){var o=new Te(t);return new fe(e).readObjects(o.parseObject),o.done()},Je.importJSONFile=function(e,t){var o,r=new de(e),i=r.readSync(0,Math.min(1e3,r.size())).toString("utf8"),n=Je.identifyJSONString(i);return"geojson"==n?(o=Je.importGeoJSONFile(r,t),r.close(),{dataset:o,format:"geojson"}):(r.close(),{content:ct.readFile(e,"utf8")})},Je.importJSON=function(e,t){var o=e.content,r=e.filename,i={filename:r};if(o||(e=Je.importJSONFile(r,t),e.dataset?(i.dataset=e.dataset,i.format=e.format):o=e.content),o){if(Xe.isString(o))try{o=JSON.parse(o)}catch(e){n("Unable to parse JSON")}i.format=Je.identifyJSONObject(o),"topojson"==i.format?i.dataset=Je.importTopoJSON(o,t):"geojson"==i.format?i.dataset=Je.importGeoJSON(o,t):"json"==i.format?i.dataset=Je.importJSONTable(o,t):n("Unknown JSON format")}return i},Je.importContent=function(e,t){var o,r,i;return t=t||{},e.json?(i=Je.importJSON(e.json,t),r=i.format,o=i.dataset):e.text?(r="dsv",i=e.text,o=Je.importDelim(i.content,t)):e.shp?(r="shapefile",i=e.shp,o=Je.importShapefile(e,t)):e.dbf?(r="dbf",i=e.dbf,o=Je.importDbf(e,t)):e.prj&&(r="prj",i=e.prj,o={layers:[],info:{prj:i.content}}),o||n("Missing an expected input type"),o.arcs&&!t.no_topology&&"topojson"!=r&&ze.buildTopology(o),"topojson"!=r&&o.layers.forEach(function(e){Je.setLayerName(e,Je.filenameToLayerName(i.filename||""))}),i.filename&&(o.info.input_files=[i.filename]),o.info.input_formats=[r],o},Je.importFileContent=function(e,t,o){var r=Je.guessInputType(t,e),i={};return i[r]={
filename:t,content:e},Je.importContent(i,o)},Je.importShapefile=function(e,t){var o,r=e.shp.content||e.shp.filename,i=Je.importShp(r,t),n=i.layers[0];return e.dbf&&(o=Je.importDbf(e,t),Xe.extend(i.info,o.info),n.data=o.layers[0].data,n.shapes&&n.data.size()!=n.shapes.length&&s("Mismatched .dbf and .shp record count -- possible data loss.")),e.prj&&(i.info.prj=e.prj.content),i},Je.importDbf=function(e,t){var o;return t=Xe.extend({},t),e.cpg&&!t.encoding&&(t.encoding=e.cpg.content),o=Je.importDbfTable(e.dbf.content,t),{info:{},layers:[{data:o}]}},Je.filenameToLayerName=function(e){var t="layer1",o=Xe.parseLocalPath(e);return o.basename&&o.extension&&(t=o.basename),t},Je.setLayerName=function(e,t){e.name||(e.name=Xe.getFileBase(t))},ze.importFiles=function(e){var t,o=e.files||[];return e.stdin?ze.importFile("/dev/stdin",e):(o.length>0==!1&&n("Missing input file(s)"),1==o.length?t=ze.importFile(o[0],e):e.merge_files?(t=Je.importFiles(o,e),t.layers=ze.mergeLayers(t.layers)):e.combine_files?t=Je.importFiles(o,e):n("Invalid inputs"),t)},ze.importFile=function(e,t){var o,r,i=Je.isBinaryFile(e),a=Je.guessInputFileType(e),l={},p=t&&t.encoding||null,g=t&&t.input||null,u=g&&e in g;return ct.checkFileExists(e,g),r=("shp"!=a||u)&&("json"!=a||u)?i?ct.readFile(e,null,g):ct.readFile(e,p||"utf-8",g):null,o=a||Je.guessInputContentType(r),o||n("Unable to import",e),l[o]={filename:e,content:r},r=null,"shp"!=o&&"dbf"!=o||Je.readShapefileAuxFiles(e,l,g),"shp"!=o||l.dbf||s(Xe.format("[%s] .dbf file is missing - shapes imported without attribute data.",e)),Je.importContent(l,t)},Je.readShapefileAuxFiles=function(e,t,o){var r=Xe.replaceFileExtension(e,"dbf"),i=Xe.replaceFileExtension(e,"cpg"),n=Xe.replaceFileExtension(e,"prj");ct.isFile(n,o)&&(t.prj={filename:n,content:ct.readFile(n,"utf-8",o)}),!t.dbf&&ct.isFile(r,o)&&(t.dbf={filename:r,content:ct.readFile(r,null,o)}),t.dbf&&ct.isFile(i,o)&&(t.cpg={filename:i,content:ct.readFile(i,"utf-8",o).trim()})},Je.writeFiles=function(e,t,o){if(e.length>0==!1)s("No files to save");else if(t.dry_run);else{if(t.stdout)return ct.writeFile("/dev/stdout",e[0].content,o);var r=Je.getOutputPaths(Xe.pluck(e,"filename"),t);e.forEach(function(e,o){var i=r[o];e.content instanceof ArrayBuffer&&(e.content=ct.convertArrayBuffer(e.content)),t.output?t.output.push({filename:i,content:e.content}):(ct.writeFile(i,e.content),s("Wrote "+i))})}o&&o(null)},Je.getOutputPaths=function(e,t){var o=t.directory;return t.force&&s("The force option is obsolete, files are now overwritten by default"),o&&(e=e.map(function(e){return require("path").join(o,e)})),e},ze.filterFields=function(e,t){var o=e.data;t=t||[],Je.requireDataFields(o,t),Xe.difference(o.getFields(),t).forEach(o.deleteField,o)},ze.renameFields=function(e,t){var o=Je.mapFieldNames(t);Je.requireDataFields(e.data,Object.keys(o)),Xe.defaults(o,Je.mapFieldNames(e.data.getFields())),e.data.update(Je.getRecordMapper(o))},Je.mapFieldNames=function(e){return(e||[]).reduce(function(e,t){var o=t.split("="),r=Xe.trimQuotes(o[0]),i=o.length>1?Xe.trimQuotes(o[1]):r;return i&&r||n("Invalid field description:",t),e[i]=r,e},{})},Je.getRecordMapper=function(e){var t=Object.keys(e);return function(o){for(var r,i={},n=0,a=t.length;n<a;n++)r=t[n],i[e[r]]=o[r];return i}},ze.graticule=function(e,t){var o,r,i=Je.createGraticule(t);return e&&(o=Je.getDatasetProjection(e),r=Je.getProjection("wgs84"),o||n("Coordinate system is unknown, unable to create a graticule"),Je.projectDataset(i,r,o,{})),i},Je.createGraticule=function(e){var t=1,o=10,r=90,i=Math.round(360/o)+1,n=Math.round(180/o)+1,a=Xe.range(i,-180,o),l=Xe.range(n,-90,o),s=a.map(function(e){var i=-90,n=90;return e%r!==0&&(i+=o,n-=o),Je.createMeridian(e,i,n,t)}),p=l.map(function(e){return Je.createParallel(e,-180,180,t)}),g={type:"FeatureCollection",features:s.concat(p)},u=Je.importGeoJSON(g,{});return u.layers[0].name="graticule",u},Je.graticuleFeature=function(e,t){return{type:"Feature",properties:t,geometry:{type:"LineString",coordinates:e}}},Je.createMeridian=function(e,t,o,r){for(var i=[],n=t;n<o;n+=r)i.push([e,n]);return i.push([e,o]),Je.graticuleFeature(i,{type:"meridian",value:e})},Je.createParallel=function(e,t,o,r){for(var i=[],n=t;n<o;n+=r)i.push([n,e]);return i.push([o,e]),Je.graticuleFeature(i,{type:"parallel",value:e})},Je.printInfo=function(e){var t="";e.forEach(function(e,o){o>0&&(t+="\n"),t+="\nLayer "+(o+1)+"\n"+Je.getLayerInfo(e.layer,e.dataset)}),s(t)},Je.countNullShapes=function(e){for(var t=0,o=0;o<e.length;o++)e[o]&&0!==e[o].length||t++;return t},Je.getLayerInfo=function(e,t){var o="Layer name: "+(e.name||"[unnamed]")+"\n";return o+=Xe.format("Records: %,d\n",Je.getFeatureCount(e)),o+=Je.getGeometryInfo(e,t),o+=Je.getTableInfo(e)},Je.getGeometryInfo=function(e,t){var o,r=e.shapes?e.shapes.length:0,i=r>0?Je.countNullShapes(e.shapes):0;return e.geometry_type?(o=["Geometry","Type: "+e.geometry_type],i>0&&o.push(Xe.format("Null shapes: %'d",i)),r>i&&(o.push("Bounds: "+Je.getLayerBounds(e,t.arcs).toArray().join(" ")),o.push("Proj.4: "+Je.getProjInfo(t)))):o=["Geometry: [none]"],o.join("\n  ")+"\n"},Je.getTableInfo=function(e,t){return e.data&&0!==e.data.size()&&0!==e.data.getFields().length?Je.getAttributeInfo(e.data,t):"Attribute data: [none]"},Je.getAttributeInfo=function(e,t){var o=t||0,r=t>=0?"Value":"First value",i=e.getFields().sort(),n=i.reduce(function(e,t){return Math.max(e,t.length)},5)+2,a=i.map(function(t){return e.getRecordAt(o)[t]}),l=a.reduce(function(e,t){return Xe.isNumber(t)&&(e=Math.max(e,Je.countIntegralChars(t))),e},0),s=a.map(function(e,t){return"  "+Je.formatTableItem(i[t],e,n,l)}).join("\n");return"Attribute data\n  "+Xe.rpad("Field",n," ")+r+"\n"+s},Je.formatNumber=function(e){return e+""},Je.formatString=function(e){var t={"\n":"\\n","\r":"\\r","\t":"\\t"},o=function(e){return e in t?t[e]:""};return e=e.replace(/[\r\t\n]/g,o),"'"+e+"'"},Je.countIntegralChars=function(e){return Xe.isNumber(e)?(Je.formatNumber(e)+".").indexOf("."):0},Je.formatTableItem=function(e,t,o,r){var i=Xe.rpad(e,o," ");return i+=Xe.isNumber(t)?Xe.lpad("",r-Je.countIntegralChars(t)," ")+Je.formatNumber(t):Xe.isString(t)?Je.formatString(t):Xe.isObject(t)?JSON.stringify(t):String(t)},Je.getSimplificationInfo=function(e){new V(e).size(),Je.countInteriorVertices(e)},Je.countInteriorVertices=function(e){var t=0;return e.forEach2(function(e,o){o>2&&(t+=o-2)}),t},ze.innerlines=function(e,t,o){Je.requirePolygonLayer(e);var r=Je.getArcClassifier(e.shapes,t),i=Je.extractInnerLines(e.shapes,r),n=Je.createLineLayer(i,null);return 0===i.length&&s("No shared boundaries were found"),n.name=o&&o.no_replace?null:e.name,n},ze.lines=function(e,t,o){function r(e,t){var o=e.map(function(e,o){return{RANK:s,TYPE:t}});p=Xe.merge(e,p),g=Xe.merge(o,g),s++}o=o||{};var i,a=Je.getArcClassifier(e.shapes,t),l=Xe.isArray(o.fields)?o.fields:[],s=0,p=[],g=[];return Je.requirePolygonLayer(e,"Command requires a polygon layer"),l.length>0&&!e.data&&n("Missing a data table"),r(Je.extractOuterLines(e.shapes,a),"outer"),l.forEach(function(t){var o=e.data.getRecords(),i=function(e,r){var i=o[e],n=o[r];return i&&n&&i[t]!==n[t]?e+"-"+r:null};e.data.fieldExists(t)||n("Unknown data field:",t),r(Je.extractLines(e.shapes,a(i)),t)}),r(Je.extractInnerLines(e.shapes,a),"inner"),i=Je.createLineLayer(p,g),i.name=o.no_replace?null:e.name,i},Je.createLineLayer=function(e,t){return{geometry_type:"polyline",shapes:e,data:t?new ne(t):null}},Je.extractOuterLines=function(e,t){var o=function(e,t){return t==-1?String(e):null};return Je.extractLines(e,t(o))},Je.extractInnerLines=function(e,t){var o=function(e,t){return t>-1?e+"-"+t:null};return Je.extractLines(e,t(o))},Je.extractLines=function(e,t){function o(e){var o,r,p=e.arcId,g=t(p);g&&(r=g in a?a[g]:null,o=g==s&&e.shapeId==l.shapeId&&e.partId==l.partId,r?o?r[r.length-1].push(p):r.push([p]):(r=[[p]],a[g]=r,n.push(r)),e.i==i.arcs.length-1&&r.length>1&&r[0][0]==i.arcs[0]&&(r[0]=r.pop().concat(r[0]))),l=e,s=g}function r(e){i=e}var i,n=[],a={},l=null,s=null;return Je.traversePaths(e,o,r),n},ze.inspect=function(e,t,o){var r,i=Je.selectFeatures(e,t,o);r=1==i.length?Je.getFeatureInfo(i[0],e,t):Xe.format("Expression matched %d feature%s. Select one feature for details",i.length,Xe.pluralSuffix(i.length)),s(r)},Je.getFeatureInfo=function(e,t,o){var r="Feature "+e+"\n";return r+=Je.getShapeInfo(e,t,o),r+=Je.getTableInfo(t,e)},Je.getShapeInfo=function(e,t,o){var r,i,n=t.shapes?t.shapes[e]:null,a=t.geometry_type;return n&&a?(i="Geometry\n  Type: "+a+"\n","point"==a?i+="  Points: "+n.length+"\n":"polyline"==a?i+="  Parts: "+n.length+"\n":"polygon"==a&&(r=Je.getPolygonInfo(n,o),i+=Xe.format("  Rings: %d cw, %d ccw\n",r.cw,r.ccw),i+="  Planar area: "+r.area+"\n",r.sph_area&&(i+="  Spherical area: "+r.sph_area+" sq. meters\n")),i):"Geometry: [null]\n"},Je.getPolygonInfo=function(e,t){for(var o,r={rings:e.length,cw:0,ccw:0,area:0},i=0;i<e.length;i++)o=tt.getPlanarPathArea(e[i],t),o>0?r.cw++:o<0&&r.ccw++,r.area+=o;return t.isPlanar()||(r.sph_area=tt.getSphericalShapeArea(e,t)),r},Je.selectFeatures=function(e,t,o){var r,i=Je.getFeatureCount(e),a=[];return o.expression||n("Missing a JS expression for selecting a feature"),r=Je.compileValueExpression(o.expression,e,t),Xe.repeat(i,function(e){var t=r(e);t===!0?a.push(e):t!==!1&&n("Expression must return true or false")}),a},Je.importDelim=function(e,t){var o=Je.guessDelimiter(e);return{layers:[{data:Je.importDelimTable(e,o,t)}],info:{input_delimiter:o}}},Je.importDelimTable=function(e,t,o){var r,i=require("d3-dsv").dsvFormat(t).parse(e);return 0===i.length&&n("Unable to read any records"),delete i.columns,Je.adjustRecordTypes(i,o&&o.field_types),r=new ne(i),Je.deleteFields(r,Je.isInvalidFieldName),r},Je.supportedDelimiters=["|","\t",",",";"],Je.isSupportedDelimiter=function(e){return Xe.contains(Je.supportedDelimiters,e)},Je.guessDelimiter=function(e){return Xe.find(Je.supportedDelimiters,function(t){var o=Je.getDelimiterRxp(t);return o.test(e)})||","},Je.getDelimiterRxp=function(e){var t="^[^\\n\\r]+"+Xe.regexEscape(e);return new RegExp(t)},Je.adjustRecordTypes=function(e,t){var o={},r=Object.keys(e[0]||[]),i=[];t&&Je.parseFieldHeaders(t,o),r.forEach(function(t){var r=o[t],n=Je.adjustFieldValues(t,e,r);r||"number"!=n||i.push(t)}),i.length>0&&s(Xe.format("Auto-detected number field%s: %s",1==i.length?"":"s",i.join(", ")))},Je.adjustFieldValues=function(e,t,o){var r;return o||(r=Je.tryNumericField(e,t)),r?(o="number",Je.insertFieldValues2(e,t,r)):"number"==o?Je.convertDataField(e,t,Xe.parseNumber):(o="string",Je.convertDataField(e,t,Xe.parseString)),o},Je.tryNumericField=function(e,t){for(var o,r,i=[],n=0,a=0,l=t.length;a<l;a++){if(o=t[a][e],r=Xe.parseNumber(o),null!==r)n++;else if(o&&o.trim())return null;i.push(r)}return n>0?i:null},Je.convertDataField=function(e,t,o){for(var r=0,i=t.length;r<i;r++)t[r][e]=o(t[r][e])},Je.validateFieldType=function(e){var t=e.toLowerCase(),o=null;return"n"==t[0]?o="number":"s"==t[0]&&(o="string"),o},Je.parseFieldHeaders=function(e,t){var o=e.map(function(e){var o,r,i;return e.indexOf(":")!=-1?(o=e.split(":"),r=o[0],i=Je.validateFieldType(o[1]),i||s("Invalid type hint (expected :str or :num) ["+e+"]")):"+"===e[0]?(r=e.substr(1),i="number"):r=e,i&&(t[r]=i),r});return o},Xe.cleanNumericString=function(e){return e.replace(/,/g,"")},Xe.parseString=function(e){return e?e:""},Xe.parseNumber=function(e){var t=String(e).trim(),o=t?Number(Xe.cleanNumericString(t)):NaN;return isNaN(o)?null:o},ze.joinPointsToPolygons=function(e,t,o,r){var i=Je.getPolygonToPointsFunction(e,t,o,r);return Je.prepJoinLayers(e,o),Je.joinTables(e.data,o.data,i,r)},ze.joinPolygonsToPoints=function(e,t,o,r){var i=Je.getPointToPolygonFunction(e,t,o,r);return Je.prepJoinLayers(e,t),Je.joinTables(e.data,t.data,i,r)},ze.joinPointsToPoints=function(e,t,o){var r=Je.getPointToPointFunction(e,t,o);return Je.prepJoinLayers(e,t),Je.joinTables(e.data,t.data,r,o)},Je.prepJoinLayers=function(e,t){e.data||(e.data=new ne(e.shapes.length)),t.data||n("Can't join a layer that is missing attribute data")},Je.getPointToPointFunction=function(e,t,o){var r=e.shapes,i=new we(t.shapes,{});return function(e){var t=i.findNearestPointFeature(r[e]);return t>-1?[t]:null}},Je.getPolygonToPointsFunction=function(e,t,o,r){for(var i,n,a=Je.getPointToPolygonFunction(o,e,t,r),l=[],s=0,p=o.shapes.length;s<p;s++)i=a(s),i&&(n=i[0],n in l?l[n].push(s):l[n]=[s]);return function(e){return l[e]||null}},Je.getPointToPolygonFunction=function(e,t,o,r){var i=new X(t.shapes,o),n=e.shapes;return function(e){var t=n[e],o=-1;return t&&(o=i.findEnclosingShape(t[0])),o==-1?null:[o]}},Je.getJoinFilter=function(e,t){var o=Je.getJoinFilterTestFunction(t,e),r=null;return Je.expressionHasCalcFunction(t)&&(r=Je.getJoinFilterCalcFunction(t,e)),function(e){var t,i,a=r?r(e):null,l=[];for(i=0;i<e.length;i++)t=o(e[i],a),t===!0?l.push(e[i]):t!==!1&&n('"where" expression must return true or false');return l}},Je.expressionHasCalcFunction=function(e){return Xe.some(["isMax","isMin","isMode"],function(t){return e.indexOf(t)>-1})},Je.getJoinFilterCalcFunction=function(e,t){function o(){i=-(1/0),n=1/0,r=null}var r,i,n,a,l;return a={isMax:function(e){e>i&&(i=e)},isMin:function(e){e<n&&(n=e)},isMode:function(e){r||(r=[]),r.push(e)}},l=Je.compileFeatureExpression(e,{data:t},null,{context:a}),function(e){var t;o();for(var a=0;a<e.length;a++)l(e[a]);return t=r?Je.getModeData(r):null,{max:i,min:n,modes:t?t.modes:null,margin:t?t.margin:null}}},Je.getJoinFilterTestFunction=function(e,t){var o,r,i;return o={isMax:function(e){return e===i.max},isMin:function(e){return e===i.min},isMode:function(e){return i.modes.indexOf(e)>-1}},r=Je.compileFeatureExpression(e,{data:t},null,{context:o,returns:!0}),function(e,t){return i=t,r(e)}},ze.join=function(e,t,o,r){var i,a,l;o&&o.layer.data&&o.dataset||n("Missing a joinable data source"),r.keys?(2!=r.keys.length&&n("Expected two key fields: a target field and a source field"),l=ze.joinAttributesToFeatures(e,o.layer.data,r)):(i=o.layer.geometry_type,a=e.geometry_type,"point"==i&&"polygon"==a?l=ze.joinPointsToPolygons(e,t.arcs,o.layer,r):"polygon"==i&&"point"==a?l=ze.joinPolygonsToPoints(e,o.layer,o.dataset.arcs,r):"point"==i&&"point"==a?l=ze.joinPointsToPoints(e,o.layer,r):n(Xe.format("Unable to join %s geometry to %s geometry",i||"null",a||"null"))),l.unmatched&&t.layers.push(l.unmatched),l.unjoined&&t.layers.push(l.unjoined)},Je.removeTypeHints=function(e){var t=Je.parseFieldHeaders(e,{});return e.join(",")!=t.join(",")&&n("Type hints are no longer supported. Use field-types= option instead"),e},ze.joinAttributesToFeatures=function(e,t,o){var r=Je.removeTypeHints(o.keys),i=r[0],n=r[1],a=e.data,l=o.fields||Xe.difference(t.getFields(),[n]),s=Je.getJoinByKey(a,i,t,n);return o=Xe.defaults({fields:l},o),Je.joinTables(a,t,s,o)},Je.joinTables=function(e,t,o,r){var i,a,l,s,p,g,u,c,y,h,d,f=t.getRecords(),m=e.getRecords(),v=[],_=Je.getFieldsToJoin(e.getFields(),t.getFields(),r),S=r.sum_fields||[],x=Xe.difference(_,S),E=new Uint32Array(f.length),P=0,T=0,R=0,L={};for(r.where&&(g=Je.getJoinFilter(t,r.where)),r.calc&&(u=Je.getJoinCalc(t,r.calc)),c=0,h=m.length;c<h;c++){for(l=m[c],s=o(c),s&&g&&(R+=s.length,s=g(s),R-=s.length),y=0,p=0,d=s?s.length:0;y<d;y++)a=s[y],i=f[a],0===p?x.length>0&&Je.joinByCopy(l,i,x):1==p&&T++,S.length>0&&Je.joinBySum(l,i,S),E[a]++,p++;u&&u(s,l),p>0?P++:l&&(r.unmatched&&v.push(Xe.extend({},l)),Je.updateUnmatchedRecord(l,x,S))}return 0===P&&n("No records could be joined"),Je.printJoinMessage(P,m.length,Je.countJoins(E),f.length,T,R),r.unjoined&&(L.unjoined={name:"unjoined",data:new ne(f.filter(function(e,t){return 0===E[t]}))}),r.unmatched&&(L.unmatched={name:"unmatched",data:new ne(v)}),L},Je.countJoins=function(e){for(var t=0,o=0,r=e.length;o<r;o++)e[o]>0&&t++;return t},Je.updateUnmatchedRecord=function(e,t,o){Je.joinByCopy(e,{},t),Je.joinBySum(e,{},o)},Je.joinByCopy=function(e,t,o){for(var r,i=0,n=o.length;i<n;i++)r=o[i],Object.prototype.hasOwnProperty.call(t,r)?e[r]=t[r]:Object.prototype.hasOwnProperty.call(e,r)||(e[r]=null)},Je.joinBySum=function(e,t,o){for(var r,i=0;i<o.length;i++)r=o[i],e[r]=(e[r]||0)+(t[r]||0)},Je.printJoinMessage=function(e,t,o,r,i,n){s(Xe.format("Joined %'d data record%s",o,Xe.pluralSuffix(o))),e<t&&s(Xe.format("%d/%d target records received no data",t-e,t)),i>0&&s(Xe.format("%d/%d target records were matched by multiple source records",i,t)),o<r&&s(Xe.format("%d/%d source records could not be joined",r-o,r)),n>0&&s(Xe.format("%d/%d source records were skipped",n,r))},Je.getFieldsToJoin=function(e,t,o){var r;return r=o.fields?o.fields.indexOf("*")>-1?t:Je.removeTypeHints(o.fields):o.calc?[]:t,o.force||(r=Xe.difference(r,e)),r},Je.getJoinByKey=function(e,t,o,r){var i=e.getRecords(),a=Je.createTableIndex(o.getRecords(),r);return o.fieldExists(r)===!1&&n("External table is missing a field named:",r),e&&e.fieldExists(t)||n("Target layer is missing key field:",t),function(e){var o=i[e],r=o?o[t]:null;return o&&r in a?a[r]:null}},Je.createTableIndex=function(e,t){for(var o,r,i={},n=0,a=e.length;n<a;n++)o=e[n],r=o[t],r in i?i[r].push(n):i[r]=[n];return i},ze.keepEveryPolygon=Je.keepEveryPolygon=function(e,t){t.forEach(function(t){"polygon"==t.geometry_type&&Je.protectLayerShapes(e,t.shapes)})},Je.protectLayerShapes=function(e,t){t.forEach(function(t){Je.protectShape(e,t)})},Je.protectShape=function(e,t){for(var o,r,i=0,n=t?t.length:0,a=0;a<n;a++)r=e.getSimpleShapeBounds(t[a]).area(),r>i&&(o=t[a],i=r);o&&0!==o.length?1==o.length?Je.protectIslandRing(e,o):Je.protectMultiRing(e,o):p("[protectShape()] Invalid shape:",t)},Je.protectIslandRing=function(e,t){var o=Je.lockMaxThreshold(e,t);1==o&&(o+=Je.lockMaxThreshold(e,t)),o<2&&p("[protectIslandRing()] Failed on ring:",t)},Je.protectMultiRing=function(e,t){var o,r,i=e.getRetainedInterval(),n=0;for(e.setRetainedInterval(1/0),o=tt.getPlanarPathArea(t,e);o<=n;){if(r=Je.lockMaxThreshold(e,t),0===r){p("[protectMultiRing()] Failed on ring:",t);break}o=tt.getPlanarPathArea(t,e)}e.setRetainedInterval(i)},Je.lockMaxThreshold=function(e,t){for(var o,r,i,n,a,l,s=0,p=e.getVertexData(),g=0;g<t.length;g++)r=t[g],r<0&&(r=~r),a=p.ii[r],l=a+p.nn[r]-1,i=Je.findNextRemovableVertex(p.zz,1/0,a,l),i!=-1&&(n=p.zz[i],n>s&&(s=n,o=r));return s>0?(a=p.ii[o],l=a+p.nn[o]-1,Je.replaceInArray(p.zz,s,1/0,a,l)):0},Je.replaceInArray=function(e,t,o,r,i){for(var n=0,a=r;a<=i;a++)e[a]===t&&(e[a]=o,n++);return n},Je.importFiles=function(e,t){var o=!1,r=e.map(function(e){var r=Xe.defaults({no_topology:!0,auto_snap:!1,snap_interval:null,files:[e]},t),i=ze.importFile(e,r);return i.arcs&&i.arcs.size()>0&&"topojson"!=i.info.input_formats[0]&&(o=!0),i}),i=Je.mergeDatasets(r);return o&&!t.no_topology&&((t.auto_snap||t.snap_interval)&&Je.snapCoords(i.arcs,t.snap_interval),ze.buildTopology(i)),i},ze.createPointLayer=function(e,t,o){var r=Je.getOutputLayer(e,o);o.interpolated?r.shapes=Je.interpolatedPointsFromVertices(e,t,o):o.vertices?r.shapes=Je.pointsFromVertices(e,t,o):o.x||o.y?r.shapes=Je.pointsFromDataTable(e.data,o):r.shapes=Je.pointsFromPolygons(e,t,o),r.geometry_type="point";var i=r.shapes.reduce(function(e,t){return t||e++,e},0);return i>0&&s(Xe.format("%,d of %,d points are null",i,r.shapes.length)),e.data&&(r.data=o.no_replace?e.data.clone():e.data),r},Je.interpolatePoint2D=function(e,t,o,r,i){var n=1-i;return[e*n+o*i,t*n+r*i]},Je.interpolatePointsAlongArc=function(e,t,o){var r,i,n,a,l,s=t.getShapeIter(e),p=t.isPlanar()?d:M,g=[],u=0;for(s.hasNext()&&(g.push([s.x,s.y]),r=s.x,i=s.y);s.hasNext();){for(n=p(r,i,s.x,s.y);u+n>=o;)a=(o-u)/n,l=Je.interpolatePoint2D(r,i,s.x,s.y,a),u=0,g.push(l),r=l[0],i=l[1],n=p(r,i,s.x,s.y);u+=n,r=s.x,i=s.y}return u>0&&g.push([r,i]),g},Je.interpolatedPointsFromVertices=function(e,t,o){function r(e){var o=Je.interpolatePointsAlongArc(e,t,a);i=i.concat(o)}var i,a=o.interval;return a>0==!1&&n("Invalid interpolation interval:",a),"polyline"!=e.geometry_type&&n("Expected a polyline layer"),e.shapes.map(function(e,t){return i=[],e&&e.forEach(r),i.length>0?i:null})},Je.pointsFromVertices=function(e,t,o){function r(e){for(var o,r=t.getShapeIter(e);r.hasNext();)o=r.x+"~"+r.y,o in a==!1&&(a[o]=!0,i.push([r.x,r.y]))}var i,a;return"polygon"!=e.geometry_type&&"polyline"!=e.geometry_type&&n("Expected a polygon or polyline layer"),e.shapes.map(function(e,t){return i=[],a={},(e||[]).forEach(r),i.length>0?i:null})},Je.pointsFromPolygons=function(e,t,o){"polygon"!=e.geometry_type&&n("Expected a polygon layer");var r=o.inner?tt.findInteriorPoint:tt.getShapeCentroid;return e.shapes.map(function(e){var o=r(e,t);return o?[[o.x,o.y]]:null})},Je.pointsFromDataTable=function(e,t){return e||n("Layer is missing a data table"),t.x&&t.y&&e.fieldExists(t.x)&&e.fieldExists(t.y)||n("Missing x,y data fields"),e.getRecords().map(function(e){var o=e[t.x],r=e[t.y];return Xe.isFiniteNumber(o)&&Xe.isFiniteNumber(r)?[[o,r]]:null})},ze.pointGrid=function(e,t){var o;return o=t.bbox?t.bbox:e?Je.getDatasetBounds(e).toArray():[-180,-90,180,90],Je.createPointGrid(o,t)},Je.createPointGrid=function(e,t){var o,r,i,a,l,s,p,g,u=e[2]-e[0],c=e[3]-e[1],y=[];for(t.interval>0?(i=t.interval,a=t.interval,o=Math.round(u/i)-1,r=Math.round(c/a)-1,l=e[0]+(u-o*i)/2,s=e[1]+(c-r*a)/2):t.rows>0&&t.cols>0&&(o=t.cols,r=t.rows,i=u/o,a=c/r,l=e[0]+i/2,s=e[1]+a/2),i>0!=!1&&a>0!=!1||n("Invalid grid parameters"),g=s;g<=e[3];){for(p=l;p<=e[2];)y.push([[p,g]]),p+=i;g+=a}return{geometry_type:"point",shapes:y}},Je.editArcs=function(e,t){function o(e){l.push(e[0]),s.push(e[1]),n++}function r(e,t){var r,l,s,p,g=0;for(n=0;e.hasNext();)r=e.x,l=e.y,t(o,r,l,s,p,g++),s=r,p=l;1==n&&i("An invalid arc was created"),a.push(n)}var n,a=[],l=[],s=[];e.forEach(function(e,o){r(e,t)}),e.updateVertexData(a,l,s)},ze.proj=function(e,t,o){var r,i,a=!!ze.gui,l=[],p={};if(r=Je.getDatasetProjection(e),r||n("Unable to project -- source coordinate system is unknown"),i=t.crs,i||n("Missing projection data"),Je.crsAreEqual(r,i))return void s("Source and destination CRS are the same");e.arcs&&(e.arcs.flatten(),p.arcs=a?e.arcs.getCopy():e.arcs),p.layers=e.layers.filter(Je.layerHasPoints).map(function(e){return a&&(l.push(e),e=Xe.extend({},e),e.shapes=Je.cloneShapes(e.shapes)),e});try{Je.projectDataset(p,r,i,o||{})}catch(e){n(Xe.format("Projection failure%s (%s)",e.point?" at "+e.point.join(" "):"",e.message))}e.info.crs=i,e.info.prj=t.prj,e.arcs=p.arcs,l.forEach(function(e,t){Xe.extend(e,p.layers[t])})},Je.getProjectionInfo=function(e,t){var o,r,i={};return/\.prj$/i.test(e)?(o=ze.importFile(e,{}),o&&(i.prj=o.info.prj,i.crs=Je.parsePrj(i.prj))):(r=t.findCommandTargets(e),r.length>0?(o=r[0].dataset,i.crs=Je.getDatasetProjection(o),i.prj=o.info.prj):i.crs=Je.getProjection(e)),i},Je.projectDataset=function(e,t,o,r){var i=Je.getProjTransform(t,o);e.layers.forEach(function(e){Je.layerHasPoints(e)&&Je.projectPointLayer(e,i)}),e.arcs&&(r.densify?Je.projectAndDensifyArcs(e.arcs,i):Je.projectArcs(e.arcs,i))},Je.getProjTransform=function(e,t){var o=require("mproj"),r=e.is_latlong;return function(i,n){var a;return r&&(i<-180?i=-180:i>180&&(i=180)),a=[i,n],o.pj_transform_point(e,t,a),a}},Je.projectPointLayer=function(e,t){Je.forEachPoint(e.shapes,function(e){var o=t(e[0],e[1]);e[0]=o[0],e[1]=o[1]})},Je.projectArcs=function(e,t){for(var o,r=e.getVertexData(),i=r.xx,n=r.yy,a=r.zz,l=0,s=i.length;l<s;l++)o=t(i[l],n[l]),i[l]=o[0],n[l]=o[1];e.updateVertexData(r.nn,i,n,a)},Je.getDefaultDensifyInterval=function(e,t){var o=Je.getAvgSegment2(e),r=e.getBounds(),i=t(r.centerX(),r.centerY()),n=t(r.centerX()+o[0],r.centerY()+o[1]);return d(i[0],i[1],n[0],n[1])},Je.densifySegment=function(e,t,o,r,i,n,a,l,s,p,g){var u=(e+i)/2,c=(t+n)/2,y=s(u,c),h=tt.pointSegDistSq(y[0],y[1],o,r,a,l);return g=g||[],h>p*p*.25&&d(e,t,i,n)>.01&&(Je.densifySegment(e,t,o,r,u,c,y[0],y[1],s,p,g),g.push(y),Je.densifySegment(u,c,y[0],y[1],i,n,a,l,s,p,g)),g},Je.projectAndDensifyArcs=function(e,t){function o(e,o,n,a,l,s){var p=i[0],g=i[1];i=t(o,n),s>0&&h(i[0],i[1],p,g)>r*r*25&&Je.densifySegment(a,l,p,g,o,n,i[0],i[1],t,r).forEach(e),e(i)}var r=Je.getDefaultDensifyInterval(e,t),i=[0,0];Je.editArcs(e,o)},ze.renameLayers=function(e,t){var o=t&&t.length||0,r="layer",i="";e.forEach(function(n,a){a<o&&(r=t[a]),o<e.length&&a>=o-1&&(i=(i||0)+1),n.name=r+i})},ze.shape=function(e,o){var r;e?r=Je.getLayerBounds(e.layer,e.dataset.arcs):o.bbox&&(r=new t(o.bbox)),r&&r.hasBounds()||n("Missing shape extent"),o.offset>0&&r.padBounds(o.offset,o.offset,o.offset,o.offset);var i=Je.convertBboxToGeoJSON(r.toArray(),o),a=Je.importGeoJSON(i,{});return a.layers[0].name=o.name||"shape",a},Je.convertBboxToGeoJSON=function(e,t){var o=[[e[0],e[1]],[e[0],e[3]],[e[2],e[3]],[e[2],e[1]],[e[0],e[1]]];return{type:"Polygon",coordinates:[o]}};var gt={};gt.getArcCalculator=function(e,t){var o=new Oe,r=Xe.expandoBuffer(Int32Array),n=Xe.expandoBuffer(Int32Array),a=t?function(t,o,r,i,n,a){return e(i[t],n[t],a[t],i[o],n[o],a[o],i[r],n[r],a[r])}:function(t,o,r,i,n){return e(i[t],n[t],i[o],n[o],i[r],n[r])};return function(e,l,s,p){var g,u,c,y,h=e.length,d=r(h),f=n(h),m=-(1/0);for(p&&!t?i("[visvalingam] Received z-axis data for 2D simplification"):!p&&t?i("[visvalingam] Missing z-axis data for 3D simplification"):e.length>l.length&&i("[visvalingam] Incompatible data arrays:",e.length,l.length),c=0;c<h;c++)u=c-1,y=c+1,g=u<0||y>=h?1/0:a(u,c,y,l,s,p),e[c]=g,f[c]=y,d[c]=u;for(o.init(e);o.size()>0&&(c=o.pop(),g=e[c],g!==1/0);)g<m?e[c]=m:m=g,u=d[c],y=f[c],u>0&&(g=a(d[u],u,y,l,s,p),o.updateValue(u,g)),y<h-1&&(g=a(u,y,f[y],l,s,p),o.updateValue(y,g)),f[u]=y,d[y]=u}},gt.standardMetric=I,gt.standardMetric3D=F,gt.getWeightedMetric=function(e){var t=gt.getWeightFunction(e);return function(e,o,r,i,n,a){var l=I(e,o,r,i,n,a),s=w(e,o,r,i,n,a);return t(s)*l}},gt.getWeightedMetric3D=function(e){var t=gt.getWeightFunction(e);return function(e,o,r,i,n,a,l,s,p){var g=F(e,o,r,i,n,a,l,s,p),u=O(e,o,r,i,n,a,l,s,p);return t(u)*g}},gt.getWeightCoefficient=function(e){return e&&Xe.isNumber(e&&e.weighting)?e.weighting:.7},gt.getWeightFunction=function(e){var t=gt.getWeightCoefficient(e);return function(e){return-e*t+1}},gt.weight=function(e){var t=.7;return-e*t+1},gt.getEffectiveAreaSimplifier=function(e){var t=e?gt.standardMetric3D:gt.standardMetric;return gt.getPathSimplifier(t,e)},gt.getWeightedSimplifier=function(e,t){var o=t?gt.getWeightedMetric3D(e):gt.getWeightedMetric(e);return gt.getPathSimplifier(o,t)},gt.getPathSimplifier=function(e,t){return gt.scaledSimplify(gt.getArcCalculator(e,t))},gt.scaledSimplify=function(e){return function(t,o,r,i){e(t,o,r,i);for(var n=1,a=t.length-1;n<a;n++)t[n]=.65*Math.sqrt(t[n])}};var ut={};ut.metricSq3D=tt.pointSegDistSq3D,ut.metricSq=tt.pointSegDistSq,ut.calcArcData=function(e,t,o,r){function i(n,l,s,p){var g,u,c=t[n],y=o[n],h=t[l],d=o[l];a&&(g=r[n],u=r[l]);for(var f,m=0,v=0,_=0,S=0,x=n+1;x<l;x++)f=a?ut.metricSq3D(t[x],o[x],r[x],c,y,g,h,d,u):ut.metricSq(t[x],o[x],c,y,h,d),f>=m&&(m=f,v=x);return p<m&&(m=p),v-n>1&&(_=i(n,v,s+1,m)),l-v>1&&(S=i(v,l,s+1,m)),1==s&&c==h&&y==d&&(m=Math.max(_,S)),e[v]=Math.sqrt(m),m}var n=e.length,a=!!r;e[0]=e[n-1]=1/0,n>2&&i(0,n-1,1,Number.MAX_VALUE)},Je.postSimplifyRepair=function(e){var t,o=Je.findSegmentIntersections(e),r=Je.repairIntersections(e,o),i=o.length,n=r.length,a=i>n?i-n:0;i>0&&(t=Xe.format("Repaired %'i intersection%s",a,Xe.pluralSuffix(a)),n>0&&(t+=Xe.format("; %'i intersection%s could not be repaired",n,Xe.pluralSuffix(n))),s(t))},Je.repairIntersections=function(e,t){for(;Je.unwindIntersections(e,t)>0;)t=Je.findSegmentIntersections(e);return t},Je.unwindIntersections=function(e,t){var o,r,i,n,a=e.getVertexData(),l=e.getRetainedInterval(),s=0,g=0;for(r=Je.getUnwindTargets(t,l,a.zz),Xe.sortOn(r,"z",!0);r.length>0;)for(i=r.pop(),o=Je.redetectIntersectionTarget(i,l,a.xx,a.yy,a.zz),1==o.length&&(o=Je.unwindIntersection(o[0],l,a.zz),s++),n=0;n<o.length;n++)Je.insertUnwindTarget(r,o[n]);return++g>5e5?(p("Caught an infinite loop at intersection:",i),0):s},Je.getUnwindTargets=function(e,t,o){return e.reduce(function(e,r){var i=Je.getUnwindTarget(r,t,o);return null!==i&&e.push(i),e},[])},Je.getUnwindTarget=function(e,t,o){var r,i=Je.findNextRemovableVertex(o,t,e.a[0],e.a[1]),n=Je.findNextRemovableVertex(o,t,e.b[0],e.b[1]);return r=i==-1&&n==-1?null:n==-1||i!=-1&&o[i]>o[n]?{a:e.a,b:e.b,z:o[i]}:{a:e.b,b:e.a,z:o[n]}},Je.insertUnwindTarget=function(e,t){for(var o=e.length;o>0&&!(e[o-1].z<=t.z);)e[o]=e[o-1],o--;e[o]=t},Je.unwindIntersection=function(e,t,o){for(var r=[],n=e.a[0],a=e.a[1],l=e.z,s=n+1;s<=a;s++)o[s]!=l&&s!=a||(r.push({a:[n,s],b:e.b,z:l}),s!=a&&(o[s]=t),n=s);return r.length<2&&i("Error in unwindIntersection()"),r},Je.redetectIntersectionTarget=function(e,t,o,r,i){var n=Je.getIntersectionCandidates(e,t,o,r,i),a=Je.intersectSegments(n,o,r);return Je.getUnwindTargets(a,t,i)},Je.getIntersectionCandidates=function(e,t,o,r,i){var n=Je.getSegmentVertices(e.a,t,o,r,i);return n=n.concat(Je.getSegmentVertices(e.b,t,o,r,i))},Je.getSegmentVertices=function(e,t,o,r,i){var n,a,l,s=[];e[0]<=e[1]?(n=e[0],a=e[1]):(n=e[1],a=e[0]),l=n;for(var p=n+1;p<=a;p++)i[p]>=t&&(o[l]<o[p]?s.push(l,p):s.push(p,l),l=p);return s},Je.calcSimplifyStats=function(e,t){function o(e,t,o,r,i,n){var a=[],l=[],s=[];return tt.convLngLatToSph([e,o,i],[t,r,n],a,l,s),tt.pointSegDistSq3D(a[0],l[0],s[0],a[1],l[1],s[1],a[2],l[2],s[2])}var r,i=t?o:tt.pointSegDistSq,n=t?tt.signedAngleSph:tt.signedAngle,a=0,l=0,s=0,p=0,g=0,u=0,c=-1,y=-1,h=[],d=[],f=e.getVertexData().zz;return e.forEachSegment(function(e,t,o,r){var m,v,_,S,x,E,P,T,R;if(m=o[e],v=r[e],_=o[t],S=r[t],e==y&&(T=n(o[c],r[c],m,v,_,S),T>Math.PI&&(T=2*Math.PI-T),isNaN(T)||d.push(180*T/Math.PI)),c=e,y=t,f[e]<1/0&&l++,P=t-e-1,!(P<1))if(a+=P,m==_&&v==S)s++;else{for(x=0;++e<t;)R=i(o[e],r[e],m,v,_,S),x=Math.max(x,R);u+=x,E=Math.sqrt(x),g+=E,h.push(E),p=Math.max(p,E)}}),r={angleMean:0,displacementMean:0,displacementMax:p,collapsedRings:s,removed:a,retained:l,uniqueCount:Je.countUniqueVertices(e),removableCount:a+l},d.length>0&&(r.angleMean=Xe.sum(d)/d.length,r.angleQuartiles=[Xe.findValueByPct(d,.75),Xe.findValueByPct(d,.5),Xe.findValueByPct(d,.25)]),h.length>0&&(r.displacementMean=g/h.length,r.displacementQuartiles=[Xe.findValueByPct(h,.75),Xe.findValueByPct(h,.5),Xe.findValueByPct(h,.25)]),r},Je.countUniqueVertices=function(e){var t=2*e.size(),o=new V(e).size();return e.getPointCount()-t+o},Je.getSimplifyMethodLabel=function(e){return{dp:"Ramer-Douglas-Peucker",visvalingam:"Visvalingam",weighted_visvalingam:"Weighted Visvalingam"}[e]||"Unknown"},Je.printSimplifyInfo=function(e,t){var o=Je.getSimplifyMethod(t),r=Je.getSimplifyMethodLabel(o),i=Je.useSphericalSimplify(e,t),n=Je.calcSimplifyStats(e,i),a=(n.removed+n.collapsedRings)/n.uniqueCount||0,l=n.removed/n.removableCount||0,p=n.angleQuartiles,g=n.displacementQuartiles,u=["Simplification statistics"];u.push(Xe.format("Method: %s (%s) %s",r,i?"spherical":"planar","weighted_visvalingam"==o?"(weighting="+gt.getWeightCoefficient(t)+")":"")),u.push(Xe.format("Removed vertices: %,d",n.removed+n.collapsedRings)),u.push(Xe.format("   %.1f% of %,d unique coordinate locations",100*a,n.uniqueCount)),u.push(Xe.format("   %.1f% of %,d filterable coordinate locations",100*l,n.removableCount)),u.push(Xe.format("Simplification threshold: %.4f %s",e.getRetainedInterval(),i?"meters":"")),u.push(Xe.format("Collapsed rings: %,d",n.collapsedRings)),u.push("Displacement statistics"),u.push(Xe.format("   Mean displacement: %.4f",n.displacementMean)),u.push(Xe.format("   Max displacement: %.4f",n.displacementMax)),g&&u.push(Xe.format("   Quartiles: %.2f, %.2f, %.2f",g[0],g[1],g[2])),u.push("Vertex angle statistics"),u.push(Xe.format("   Mean angle: %.2f degrees",n.angleMean)),p&&u.push(Xe.format("   Quartiles: %.2f, %.2f, %.2f",p[0],p[1],p[2])),s(u.join("\n   "))},ze.simplify=function(e,t){var o=e.arcs;o||n("Missing path data"),t=Je.getStandardSimplifyOpts(e,t),e.info=Xe.defaults({simplify:t},e.info),Je.simplifyPaths(o,t),t.percentage?o.setRetainedPct(Xe.parsePercent(t.percentage)):Xe.isNumber(t.interval)?o.setRetainedInterval(t.interval):t.resolution&&o.setRetainedInterval(Je.calcSimplifyInterval(o,t)),
t.keep_shapes&&ze.keepEveryPolygon(o,e.layers),!t.no_repair&&o.getRetainedInterval()>0&&Je.postSimplifyRepair(o),t.stats&&Je.printSimplifyInfo(o,t)},Je.getStandardSimplifyOpts=function(e,t){return t=t||{},Xe.defaults({method:Je.getSimplifyMethod(t),spherical:Je.useSphericalSimplify(e.arcs,t)},t)},Je.useSphericalSimplify=function(e,t){return!t.planar&&!e.isPlanar()},Je.simplifyPaths=function(e,t){var o=Je.getSimplifyFunction(t);e.setThresholds(new Float64Array(e.getPointCount())),t.spherical?(Je.simplifyPaths3D(e,o),Je.protectWorldEdges(e)):Je.simplifyPaths2D(e,o),t.lock_box&&Je.protectContentEdges(e)},Je.simplifyPaths2D=function(e,t){e.forEach3(function(e,o,r,i){t(r,e,o)})},Je.simplifyPaths3D=function(e,t){var o=Xe.expandoBuffer(Float64Array),r=Xe.expandoBuffer(Float64Array),i=Xe.expandoBuffer(Float64Array);e.forEach3(function(e,n,a,l){var s=e.length,p=o(s),g=r(s),u=i(s);tt.convLngLatToSph(e,n,p,g,u),t(a,p,g,u)})},Je.getSimplifyMethod=function(e){var t=e.method;return(!t||"weighted"==t||"visvalingam"==t&&e.weighting)&&(t="weighted_visvalingam"),t},Je.getSimplifyFunction=function(e){var t;return"dp"==e.method?t=ut.calcArcData:"visvalingam"==e.method?t=gt.getEffectiveAreaSimplifier(e.spherical):"weighted_visvalingam"==e.method?t=gt.getWeightedSimplifier(e,e.spherical):n("Unsupported simplify method:",method),t},Je.protectContentEdges=function(e){var t=1e-14,o=e.getBounds();o.padBounds(-t,-t,-t,-t),Je.limitSimplificationExtent(e,o.toArray(),!0)},Je.limitSimplificationExtent=function(e,t,o){var r=e.getBounds().toArray();k(t,r)!==!0&&e.forEach3(function(e,r,i){for(var n,a,l=o?1/0:0,s=0,p=i.length;s<p;s++)n=e[s],a=r[s],(n>=t[2]||n<=t[0]||a<=t[1]||a>=t[3])&&(0===l&&(l=Je.findMaxThreshold(i)),i[s]!==1/0&&(i[s]=l))})},Je.protectWorldEdges=function(e){Je.limitSimplificationExtent(e,Je.getWorldBounds(1e-12),!1)},Je.findMaxThreshold=function(e){for(var t,o=0,r=0,i=e.length;r<i;r++)t=e[r],t>o&&t<1/0&&(o=t);return o},Je.parseSimplifyResolution=function(e){var t,o,r;return Xe.isNumber(e)?(o=e,r=e):Xe.isString(e)&&(t=e.split("x"),o=Number(t[0])||0,r=2==t.length?Number(t[1])||0:o),o>=0&&r>=0&&o+r>0||n("Invalid simplify resolution:",e),[o,r]},Je.calcPlanarInterval=function(e,t,o,r){var i=0!==e&&o/r>e/t||0===t;return i?o/e:r/t},Je.calcSphericalInterval=function(e,t,o){var r=tt.degreesToMeters(o.width())*Math.cos(o.centerY()*tt.D2R),i=tt.degreesToMeters(o.height());return Je.calcPlanarInterval(e,t,r,i)},Je.calcSimplifyInterval=function(e,t){var o,r,i;return t.interval?r=t.interval:t.resolution&&(o=Je.parseSimplifyResolution(t.resolution),i=e.getBounds(),r=Je.useSphericalSimplify(e,t)?Je.calcSphericalInterval(o[0],o[1],i):Je.calcPlanarInterval(o[0],o[1],i.width(),i.height()),r*=.5),r},ze.splitLayerOnGrid=function(e,t,o){function r(e,t,o){var r=e.xmin,i=e.ymin,a=e.width(),l=e.height();return o>0!=!1&&t>0!=!1||n("Invalid grid parameters"),a>0!=!1&&l>0!=!1||(t=1,o=1),function(e){var n=Math.floor((e.centerX()-r)/a*t),s=Math.floor((e.centerY()-i)/l*o);return n=Xe.clamp(n,0,t-1)||0,s=Xe.clamp(s,0,o-1)||0,"r"+s+"c"+n}}var i,a=e.shapes,l=e.geometry_type,s=!!o.id_field,p=o.id_field||"__split__",g=r(Je.getLayerBounds(e,t),o.cols,o.rows);return l||n("Layer has no geometry"),e.data||(e.data=new ne(a.length)),i=e.data.getRecords(),e.shapes.forEach(function(e,o){var r="point"==l?Je.getPointBounds([e]):t.getMultiShapeBounds(e),n=r.hasBounds()?g(r):"",a=i[o]=i[o]||{};a[p]=n}),s?e:ze.splitLayer(e,p).filter(function(e){var t=e.data.getRecordAt(0)[p];return e.name=t,e.data.deleteField(p),!!t})},ze.subdivideLayer=function(e,t,o){return Je.subdivide(e,t,o)},Je.subdivide=function(e,t,o){var r,i,a,l,s=Je.evalCalcExpression(e,t,o),p=[];return Xe.isBoolean(s)||n("Expression must evaluate to true or false"),s?(i=Je.getLayerBounds(e,t),r=Je.divideLayer(e,t,i),a=r[0],a.shapes.length>1&&a.shapes.length<e.shapes.length?Xe.merge(p,Je.subdivide(a,t,o)):p.push(a),l=r[1],l.shapes.length>1&&l.shapes.length<e.shapes.length?Xe.merge(p,Je.subdivide(l,t,o)):p.push(l)):p.push(e),p.forEach(function(t,o){t.name=Je.getSplitLayerName(e.name||"split",o+1),Xe.defaults(t,e)}),p},Je.divideLayer=function(e,t,o){var r,i,n=e.data?e.data.getRecords():null,a=e.shapes;r={geometry_type:e.geometry_type,shapes:[],data:n?[]:null},i={geometry_type:e.geometry_type,shapes:[],data:n?[]:null};var l=o&&o.width()>o.height(),s=a.map(function(e){var o=t.getMultiShapeBounds(e);return l?o.centerX():o.centerY()}),p=Xe.range(s.length);return p.sort(function(e,t){return s[e]-s[t]}),p.forEach(function(e,t){var o=t<a.length/2?r:i;o.shapes.push(a[e]),n&&o.data.push(n[e])}),n&&(r.data=new ne(r.data),i.data=new ne(i.data)),[r,i]},ze.sortFeatures=function(e,t,o){var r=Je.getFeatureCount(e),i=!o.descending,n=Je.compileValueExpression(o.expression,e,t),a=[];Xe.repeat(r,function(e){a.push(n(e))});var l=Xe.getSortedIds(a,i);e.shapes&&Xe.reorderArray(e.shapes,l),e.data&&Xe.reorderArray(e.data.getRecords(),l)},ze.target=function(e,t,o){var r=e.findCommandTargets(t),i=r[0];i&&0!==i.layers.length?(r.length>1||i.layers.length>1)&&n("Matched more than one layer"):n("Target not found ("+t+")"),o&&o.name&&(i.layers[0].name=o.name),e.setDefaultTarget(i.layers,i.dataset)},ze.uniq=function(e,t,o){var r=Je.getFeatureCount(e),i=Je.compileValueExpression(o.expression,e,t),n={},a=[],l=!!o.verbose,p=e.data?e.data.getRecords():null,g=function(e,t){return!a[t]};Xe.repeat(r,function(e){var t=i(e);a[e]=t in n,l&&n[t]&&s(Xe.format("Removing feature %i key: [%s]",e,t)),n[t]=!0}),e.shapes&&(e.shapes=e.shapes.filter(g)),p&&(e.data=new ne(p.filter(g))),o.verbose!==!1&&s(Xe.format("Retained %,d of %,d features",Je.getFeatureCount(e),r))},ze.runCommand=function(e,t,o){function r(e){Ye.stop("-"+h),Je.CURR_CMD=null,o(e,e?null:t)}var l,s,p,g,u,c,y,h=e.name,d=e.options;Je.CURR_CMD=h;try{if(Ye.start(),t||(t=new Ve),"rename-layers"==h?(g=t.findCommandTargets(d.target||"*"),c=g.reduce(function(e,t){return e.concat(t.layers)},[])):"o"==h?g=t.findCommandTargets(d.target||d.combine_layers&&"*"):"proj"==h?g=t.findCommandTargets(d.target):(g=t.findCommandTargets(d.target),1==g.length?(u=g[0].dataset,y=u.arcs,c=g[0].layers,t.setDefaultTarget(c,u)):g.length>1&&n("Targetting multiple datasets is not supported")),0===g.length&&(d.target&&n(Xe.format("Missing target: %s\nAvailable layers: %s",d.target,Je.getFormattedLayerList(t))),"help"!=h&&"graticule"!=h&&"i"!=h&&"point-grid"!=h&&"shape"!=h))throw new a("Missing a -i command");if(d.source&&(l=Je.findCommandSource(d.source,t,d)),"affine"==h)ze.affine(c,u,d);else if("data-fill"==h)Je.applyCommand(ze.dataFill,c,y,d);else if("cluster"==h)Je.applyCommand(ze.cluster,c,y,d);else if("calc"==h)Je.applyCommand(ze.calc,c,y,d);else if("clean"==h)ze.cleanLayers(c,u,d);else if("clip"==h)s=ze.clipLayers(c,l,u,d);else if("colorizer"==h)s=ze.colorizer(d);else if("dissolve"==h)s=Je.applyCommand(ze.dissolve,c,y,d);else if("dissolve2"==h)s=ze.dissolve2(c,u,d);else if("each"==h)Je.applyCommand(ze.evaluateEachFeature,c,y,d.expression,d);else if("erase"==h)s=ze.eraseLayers(c,l,u,d);else if("explode"==h)s=Je.applyCommand(ze.explodeFeatures,c,y,d);else if("filter"==h)s=Je.applyCommand(ze.filterFeatures,c,y,d);else if("filter-fields"==h)Je.applyCommand(ze.filterFields,c,d.fields);else if("filter-islands"==h)Je.applyCommand(ze.filterIslands,c,y,d);else if("filter-slivers"==h)Je.applyCommand(ze.filterSlivers,c,y,d);else if("graticule"==h)t.addDataset(ze.graticule(u,d));else if("help"==h)Je.getOptionParser().printHelp(d.command);else if("i"==h)d.replace&&(t=new Ve),u=ze.importFiles(e.options),u&&(t.addDataset(u),s=u.layers);else if("info"==h)Je.printInfo(t.getLayers());else if("inspect"==h)Je.applyCommand(ze.inspect,c,y,d);else if("innerlines"==h)s=Je.applyCommand(ze.innerlines,c,y,d);else if("join"==h)Je.applyCommand(ze.join,c,u,l,d);else if("lines"==h)s=Je.applyCommand(ze.lines,c,y,d);else if("merge-layers"==h)d.target||(c=u.layers),s=ze.mergeLayers(c);else{if("o"==h)return p=Je.exportTargetLayers(g,d),d.final&&(t=null),Je.writeFiles(p,d,r);"point-grid"==h?(s=[ze.pointGrid(u,d)],u||t.addDataset({layers:s})):"points"==h?s=Je.applyCommand(ze.createPointLayer,c,y,d):"proj"==h?g.forEach(function(e){var o,r;d.from&&(o=Je.getProjectionInfo(d.from,t),o.crs||n("Unknown projection source:",d.from),Je.setDatasetProjection(e.dataset,o)),(d.match||d.projection)&&(r=Je.getProjectionInfo(d.match||d.projection,t),ze.proj(e.dataset,r,d))}):"rename-fields"==h?Je.applyCommand(ze.renameFields,c,d.fields):"rename-layers"==h?ze.renameLayers(c,d.names):"shape"==h?t.addDataset(ze.shape(l,d)):"simplify"==h?ze.simplify(u,d):"slice"==h?s=ze.sliceLayers(c,l,u,d):"sort"==h?Je.applyCommand(ze.sortFeatures,c,y,d):"split"==h?s=Je.applyCommand(ze.splitLayer,c,d.field,d):"split-on-grid"==h?s=Je.applyCommand(ze.splitLayerOnGrid,c,y,d):"stitch"==h?ze.stitch(u):"subdivide"==h?s=Je.applyCommand(ze.subdivideLayer,c,y,d.expression):"svg-style"==h?Je.applyCommand(ze.svgStyle,c,u,d):"uniq"==h?Je.applyCommand(ze.uniq,c,y,d):"target"==h?ze.target(t,d.target,d):i("Unhandled command: ["+h+"]")}"name"in d&&s&&s.forEach(function(e){e.name=d.name}),u&&Je.cleanupArcs(u),s&&u&&s!=u.layers&&(d.no_replace?u.layers=u.layers.concat(s):Je.replaceLayers(u,c,s),t.setDefaultTarget(s,u))}catch(e){return r(e)}r(null)},Je.applyCommand=function(e,t){var o=Xe.toArray(arguments).slice(2);return t.reduce(function(t,r){var i=e.apply(null,[r].concat(o));return Xe.isArray(i)?t=t.concat(i):i&&t.push(i),t},[])},Je.findCommandSource=function(e,t,o){var r,i,a=t.findCommandTargets(e);return a.length>1||1==a.length&&a[0].layers.length>1?n(Xe.format("Source [%s] matched multiple layers",e)):1==a.length?i={dataset:a[0].dataset,layer:a[0].layers[0]}:(r=ze.importFile(e,Xe.defaults({no_topology:!0},o)),r?r.layers.length>1&&n("Multiple-layer sources are not supported"):n(Xe.format("Unable to find source [%s]",e)),i={dataset:r,layer:r.layers[0],disposable:!0}),i},Je.splitShellTokens=function(e){return Je.splitTokens(e,"\\s")},Je.splitTokens=function(e,t){var o="([^"+t+"'\"])+",r='"((\\\\"|[^"])*?)"',i="'((\\\\'|[^'])*?)'",n=new RegExp("("+o+"|"+r+"|"+i+")*","g"),a=e.match(n)||[],l=a.filter(function(e){return!!e&&"\\"!=e}).map(Xe.trimQuotes);return l},Xe.trimQuotes=function(e){var t,o,r=e.length;return r>=2&&(t=e.charAt(0),o=e.charAt(r-1),'"'==t&&'"'==o||"'"==t&&"'"==o)?e.substr(1,r-2):e},Je.parseStringList=function(e){var t=",",o=Je.splitTokens(e,t);return 1==o.length&&(o=Je.splitTokens(o[0],t)),o},Je.parseColorList=function(e){var t=", ",o=Je.splitTokens(e,t);return 1==o.length&&(o=Je.splitTokens(o[0],t)),o},Je.cleanArgv=function(e){return e=e.map(function(e){return e.trim()}),e=e.filter(function(e){return""!==e}),e=e.map(Xe.trimQuotes)},Xe.replaceFileExtension=function(e,t){var o=Xe.parseLocalPath(e);return o.pathbase+"."+t},Xe.getPathSep=function(e){return e.indexOf("/")==-1&&e.indexOf("\\")!=-1?"\\":"/"},Xe.parseLocalPath=function(e){var t,o={},r=Xe.getPathSep(e),i=e.split(r);return 1==i.length?(o.filename=i[0],o.directory=""):(o.filename=i.pop(),o.directory=i.join(r)),t=o.filename.lastIndexOf("."),t>-1?(o.extension=o.filename.substr(t+1),o.basename=o.filename.substr(0,t),o.pathbase=e.substr(0,e.lastIndexOf("."))):(o.extension="",o.basename=o.filename,o.pathbase=e),o},Xe.getFileBase=function(e){return Xe.parseLocalPath(e).basename},Xe.getFileExtension=function(e){return Xe.parseLocalPath(e).extension},Xe.getPathBase=function(e){return Xe.parseLocalPath(e).pathbase},Xe.getCommonFileBase=function(e){return e.reduce(function(e,t,o){return e=0===o?Xe.getFileBase(t):Xe.mergeNames(e,t)},"")},Xe.getOutputFileBase=function(e){var t=e.info&&e.info.input_files;return t&&Xe.getCommonFileBase(t)||"output"},Je.guessInputFileType=function(e){var t=Xe.getFileExtension(e||"").toLowerCase(),o=null;return"dbf"==t||"shp"==t||"prj"==t?o=t:/json$/.test(t)&&(o="json"),o},Je.guessInputContentType=function(e){var t=null;return Xe.isString(e)?t=Je.stringLooksLikeJSON(e)?"json":"text":(Xe.isObject(e)&&e.type||Xe.isArray(e))&&(t="json"),t},Je.guessInputType=function(e,t){return Je.guessInputFileType(e)||Je.guessInputContentType(t)},Je.stringLooksLikeJSON=function(e){return/^\s*[{[]/.test(String(e))},Je.couldBeDsvFile=function(e){var t=Xe.getFileExtension(e).toLowerCase();return/csv|tsv|txt$/.test(t)},Je.inferOutputFormat=function(e,t){var o=Xe.getFileExtension(e).toLowerCase(),r=null;return"shp"==o?r="shapefile":"dbf"==o?r="dbf":"svg"==o?r="svg":/json$/.test(o)?(r="geojson","topojson"==o||"topojson"==t&&"geojson"!=o?r="topojson":"json"==o&&"json"==t&&(r="json")):Je.couldBeDsvFile(e)?r="dsv":t&&(r=t),r},Je.isZipFile=function(e){return/\.zip$/i.test(e)},Je.isSupportedOutputFormat=function(e){var t=["geojson","topojson","json","dsv","dbf","shapefile","svg"];return t.indexOf(e)>-1},Je.getFormatName=function(e){return{geojson:"GeoJSON",topojson:"TopoJSON",json:"JSON records",dsv:"CSV",dbf:"DBF",shapefile:"Shapefile",svg:"SVG"}[e]||""},Je.isBinaryFile=function(e){var t=Xe.getFileExtension(e).toLowerCase();return"shp"==t||"dbf"==t||"zip"==t},Je.filenameIsUnsupportedOutputType=function(e){var t=/\.(shx|prj|xls|xlsx|gdb|sbn|sbx|xml|kml)$/i;return t.test(e)},Je.getOptionParser=function(){var e={describe:"layer(s) to target (comma-sep. list)"},t={describe:"rename the edited layer(s)"},o={alias:"+",type:"flag",describe:"retain the original layer(s) instead of replacing"},r={type:"flag"},n={describe:"text encoding (applies to .dbf and delimited text files)"},a={alias:"snap",describe:"snap nearly identical points to fix minor topology errors",type:"flag"},l={describe:"specify snapping distance in source units",type:"number"},s={describe:"fields to sum when dissolving  (comma-sep. list)",type:"strings"},p={describe:"fields to copy when dissolving (comma-sep. list)",type:"strings"},g={describe:"(optional) name of a data field to dissolve on"},u={type:"bbox",describe:"comma-sep. bounding box: xmin,ymin,xmax,ymax"},c=new Fe;return c.usage("Usage:  mapshaper -<command> [options] ..."),c.note("Enter mapshaper -help <command> to view options for a single command"),c.section("I/O commands"),c.default("i"),c.command("i").describe("input one or more files").validate(Ge).flag("multi_arg").option("files",{label:"<files>",describe:"files to import (separated by spaces), or - to use stdin"}).option("merge-files",{describe:"merge features from compatible files into the same layer",type:"flag"}).option("combine-files",{describe:"import files to separate layers with shared topology",type:"flag"}).option("no-topology",{describe:"treat each shape as topologically independent",type:"flag"}).option("precision",{describe:"coordinate precision in source units, e.g. 0.001",type:"number"}).option("auto-snap",a).option("snap-interval",l).option("encoding",n).option("id-field",{describe:"import Topo/GeoJSON id property to this field"}).option("field-types",{describe:"type hints for csv files, e.g. FIPS:str,STATE_FIPS:str",type:"strings"}).option("name",{describe:"Rename the imported layer(s)"}),c.command("o").describe("output edited content").validate(Be).option("_",{label:"<file|directory|->",describe:"(optional) name of output file or directory, or - for stdout"}).option("format",{describe:"options: shapefile,geojson,topojson,json,dbf,csv,tsv,svg"}).option("target",e).option("force",{type:"flag"}).option("dry-run",{type:"flag"}).option("encoding",{describe:"text encoding of output dbf file"}).option("ldid",{type:"number"}).option("bbox-index",{describe:"export a .json file with bbox of each layer",type:"flag"}).option("cut-table",{describe:"detach data attributes from shapes and save as a JSON file",type:"flag"}).option("drop-table",{describe:"remove data attributes from output",type:"flag"}).option("precision",{describe:"coordinate precision in source units, e.g. 0.001",type:"number"}).option("id-field",{describe:"(Topo/GeoJSON/SVG) field to use for id property",type:"strings"}).option("bbox",{type:"flag",describe:"(Topo/GeoJSON) add bbox property"}).option("extension",{describe:'(Topo/GeoJSON) set file extension (default is ".json")'}).option("prettify",{type:"flag",describe:"(Topo/GeoJSON) format output for readability"}).option("singles",{type:"flag"}).option("quantization",{describe:"(TopoJSON) specify quantization (auto-set by default)",type:"integer"}).option("no-quantization",{describe:"(TopoJSON) export coordinates without quantization",type:"flag"}).option("no-point-quantization",{type:"flag"}).option("presimplify",{describe:"(TopoJSON) add per-vertex data for dynamic simplification",type:"flag"}).option("topojson-precision",{type:"number"}).option("combine-layers",{describe:"(GeoJSON) output layers as a single file",type:"flag"}).option("width",{describe:"(SVG) width of the SVG viewport (default is 800)",type:"number"}).option("margin",{describe:"(SVG) margin between data and viewport bounds (default is 1)",type:"number"}).option("point-symbol",{describe:"(SVG) circle or square (default is circle)"}).option("svg-scale",{type:"number"}).option("delimiter",{describe:"(CSV) field delimiter"}).option("final",{type:"flag"}),c.section("\nEditing commands"),c.command("clip").describe("use a polygon layer to clip another layer").example("$ mapshaper states.shp -clip land_area.shp -o clipped.shp").validate(je).default("source").option("source",{describe:"file or layer containing clip polygons"}).option("remove-slivers",{describe:"remove sliver polygons created by clipping",type:"flag"}).option("cleanup",{type:"flag"}).option("bbox",u).option("name",t).option("no-replace",o).option("no-snap",r).option("target",e),c.command("dissolve").describe("merge features within a layer").example("Dissolve all polygons in a feature layer into a single polygon\n$ mapshaper states.shp -dissolve -o country.shp").example("Generate state-level polygons by dissolving a layer of counties\n(STATE_FIPS, POPULATION and STATE_NAME are attribute field names)\n$ mapshaper counties.shp -dissolve STATE_FIPS copy-fields=STATE_NAME sum-fields=POPULATION -o states.shp").default("field").option("field",g).option("calc",{describe:"use a JS expression to aggregate data values"}).option("sum-fields",s).option("copy-fields",p).option("weight",{describe:"[points] field or expression to use for weighting centroid"}).option("planar",{type:"flag",describe:"[points] use 2D math to find centroids of latlong points"}).option("name",t).option("no-replace",o).option("target",e),c.command("dissolve2").describe("merge adjacent and overlapping polygons").default("field").option("field",g).option("calc",{describe:"use a JS expression to aggregate data values"}).option("sum-fields",s).option("copy-fields",p).option("name",t).option("no-replace",o).option("no-snap",r).option("target",e),c.command("each").describe("create/update/delete data fields using a JS expression").example("Add two calculated data fields to a layer of U.S. counties\n$ mapshaper counties.shp -each 'STATE_FIPS=CNTY_FIPS.substr(0, 2), AREA=$.area'").default("expression").option("expression",{describe:"JS expression to apply to each target feature"}).option("where",{describe:"use a JS expression to select a subset of features"}).option("target",e),c.command("erase").describe("use a polygon layer to erase another layer").example("$ mapshaper land_areas.shp -erase water_bodies.shp -o erased.shp").validate(je).default("source").option("source",{describe:"file or layer containing erase polygons"}).option("remove-slivers",{describe:"remove sliver polygons created by erasing",type:"flag"}).option("cleanup",{type:"flag"}).option("bbox",u).option("name",t).option("no-replace",o).option("no-snap",r).option("target",e),c.command("explode").describe("divide multi-part features into single-part features").option("naive",{type:"flag"}).option("target",e),c.command("filter").describe("delete features using a JS expression").default("expression").option("expression",{describe:"delete features that evaluate to false"}).option("remove-empty",{type:"flag",describe:"delete features with null geometry"}).option("keep-shapes",{type:"flag"}).option("name",t).option("no-replace",o).option("target",e),c.command("filter-fields").describe("retain a subset of data fields").default("fields").option("fields",{type:"strings",describe:"fields to retain (comma-sep.), e.g. 'fips,name'"}).option("target",e),c.command("filter-islands").describe("remove small detached polygon rings (islands)").option("min-area",{type:"number",describe:"remove small-area islands (sq meters or projected units)"}).option("min-vertices",{type:"integer",describe:"remove low-vertex-count islands"}).option("remove-empty",{type:"flag",describe:"delete features with null geometry"}).option("target",e),c.command("filter-slivers").describe("remove small polygon rings").option("min-area",{type:"number",describe:"remove small-area rings (sq meters or projected units)"}).option("target",e),c.command("graticule").describe("create a graticule layer"),c.command("innerlines").describe("convert polygons to polylines along shared edges").flag("no_arg").option("name",t).option("no-replace",o).option("target",e),c.command("join").describe("join data records from a file or layer to a layer").example("Join a csv table to a Shapefile\n(The :str suffix prevents FIPS field from being converted from strings to numbers)\n$ mapshaper states.shp -join data.csv keys=STATE_FIPS,FIPS -field-types=FIPS:str -o joined.shp").validate(function(e){e.options.source||i("Command requires the name of a layer or file to join")}).default("source").option("source",{describe:"file or layer containing data records"}).option("keys",{describe:"join by matching target,source key fields; e.g. keys=FIPS,GEOID",type:"strings"}).option("fields",{describe:"fields to join, e.g. fields=FIPS,POP (default is all fields)",type:"strings"}).option("field-types",{describe:"type hints for csv source files, e.g. FIPS:str,STATE_FIPS:str",type:"strings"}).option("sum-fields",{describe:"fields to sum when multiple source records match the same target",type:"strings"}).option("calc",{describe:"use a JS expression to calculate values for many-to-one joins"}).option("where",{describe:"use a JS expression to filter source records"}).option("force",{describe:"replace values from same-named fields",type:"flag"}).option("unjoined",{describe:'copy unjoined records from source table to "unjoined" layer',type:"flag"}).option("unmatched",{describe:'copy unmatched records in target table to "unmatched" layer',type:"flag"}).option("encoding",n).option("target",e),c.command("lines").describe("convert polygons to polylines, classified by edge type").default("fields").option("fields",{describe:"optional comma-sep. list of fields to create a hierarchy",type:"strings"}).option("name",t).option("no-replace",o).option("target",e),c.command("merge-layers").describe("merge multiple layers into as few layers as possible").flag("no_arg").option("name",t).option("target",e),c.command("point-grid").describe("create a rectangular grid of points").validate(qe).option("-",{label:"<cols,rows>",describe:"size of the grid, e.g. -point-grid 100,100"}).option("interval",{describe:"distance between adjacent points, in source units",type:"number"}).option("cols",{type:"integer"}).option("rows",{type:"integer"}).option("bbox",{type:"bbox",describe:"xmin,ymin,xmax,ymax (default is bbox of data)"}).option("name",t),c.command("points").describe("create a point layer from polylines, polygons or attribute data").flag("no_arg").option("x",{describe:"field containing x coordinate"}).option("y",{describe:"field containing y coordinate"}).option("inner",{describe:"create an interior point for each polygon's largest ring",type:"flag"}).option("centroid",{describe:"create a centroid point for each polygon's largest ring",type:"flag"}).option("vertices",{describe:"capture unique vertices of polygons and polylines",type:"flag"}).option("interpolated",{describe:"interpolate points along polylines; requires interval=",type:"flag"}).option("interval",{describe:"distance between interpolated points (meters or projected units)",type:"number"}).option("name",t).option("no-replace",o).option("target",e),c.command("proj").describe("project your data (using Proj.4)").flag("multi_arg").option("projection",{label:"<projection>",describe:"set the destination CRS using a Proj.4 definition or alias"}).option("match",{describe:"set the destination CRS using a .prj file or layer id"}).option("source",{alias_to:"match"}).option("from",{describe:"set the source CRS (if unset) using a string, .prj or layer id"}).option("densify",{type:"flag",describe:"add points along straight segments to approximate curves"}).option("target",e).validate(ke),c.command("rename-fields").default("fields").describe("rename data fields").option("fields",{type:"strings",describe:"fields to rename (comma-sep.), e.g. 'fips=STATE_FIPS,st=state'"}).option("target",e),c.command("rename-layers").default("names").describe("assign new names to layers").option("names",{type:"strings",describe:"new layer name(s) (comma-sep. list)"}).option("target",e),c.command("shape").option("type",{}).option("bbox",{describe:"bounding box of shape",type:"bounds"}).option("offset",{describe:"space around the bounding box or contents",type:"number"}).option("source",{describe:"name of layer to surround"}).option("name",t),c.command("simplify").default("percentage").validate(De).example("Retain 10% of removable vertices\n$ mapshaper input.shp -simplify 10%").describe("simplify the geometry of polygon and polyline features").option("percentage",{alias:"p",type:"percent",describe:"percentage of removable points to retain, e.g. 10%"}).option("dp",{alias:"rdp",describe:"use Ramer-Douglas-Peucker simplification",assign_to:"method"}).option("visvalingam",{describe:'use Visvalingam simplification with "effective area" metric',assign_to:"method"}).option("weighted",{describe:"use weighted Visvalingam simplification (default)",assign_to:"method"}).option("method",{}).option("weighting",{type:"number",describe:"weighted Visvalingam coefficient (default is 0.7)"}).option("resolution",{describe:"output resolution as a grid (e.g. 1000x500)"}).option("interval",{describe:"output resolution as a distance (e.g. 100)",type:"number"}).option("planar",{describe:"simplify decimal degree coords in 2D space (default is 3D)",type:"flag"}).option("cartesian",{type:"flag",alias_to:"planar"}).option("keep-shapes",{describe:"prevent small polygon features from disappearing",type:"flag"}).option("lock-box",{type:"flag"}).option("no-repair",{describe:"don't remove intersections introduced by simplification",type:"flag"}).option("stats",{describe:"display simplification statistics",type:"flag"}),c.command("slice").default("source").option("source",{describe:"file or layer containing clip polygons"}).option("id-field",{describe:"slice id field (from source layer)"}).option("name",t).option("no-replace",o).option("no-snap",r).option("target",e),c.command("sort").describe("sort features using a JS expression").default("expression").option("expression",{describe:"JS expression to generate a sort key for each feature"}).option("ascending",{describe:"sort in ascending order (default)",type:"flag"}).option("descending",{describe:"sort in descending order",type:"flag"}).option("target",e),c.command("split").describe("split features into separate layers using a data field").default("field").option("field",{describe:"name of an attribute field (omit to split all features)"}).option("no-replace",o).option("target",e),c.command("split-on-grid").describe("split features into separate layers using a grid").validate(qe).option("-",{label:"<cols,rows>",describe:"size of the grid, e.g. -split-on-grid 12,10"}).option("cols",{type:"integer"}).option("rows",{type:"integer"}).option("id-field",{describe:"assign each feature a cell id instead of splitting layer"}).option("target",e),c.command("svg-style").describe("set SVG style using JS expressions or literal values").option("class",{describe:"name of CSS class or classes (space sep.)"}).option("fill",{describe:"fill color, examples: #eee pink rgba(0, 0, 0, 0.2)"}).option("stroke",{describe:"stroke color"}).option("stroke-width",{describe:"stroke width"}).option("opacity",{describe:"opacity, example: 0.5"}).option("r",{describe:"radius of circle symbols"}).option("target",e),c.command("target").describe("set active layer").validate(function(e){!e.options.target&&e._.length&&(e.options.target=e._.shift())}).option("target",{label:"<target>",describe:"name or index of layer to target"}).option("name",{describe:"rename the target layer"}),c.command("uniq").describe("delete features with the same id as a previous feature").default("expression").option("expression",{describe:"JS expression to obtain the id of a feature"}).option("verbose",{describe:"print each removed feature",type:"flag"}).option("target",e),c.section("\nExperimental commands (may give unexpected results)"),c.command("affine").describe("transform coordinates by shifting, scaling and rotating").flag("no_args").option("shift",{type:"numbers",describe:"x,y offsets in source units (e.g. 5000,-5000)"}).option("scale",{type:"number",describe:"scale (default is 1)"}).option("rotate",{type:"number",describe:"angle of rotation in degrees (default is 0)"}).option("anchor",{type:"numbers",describe:"center of rotation/scaling (default is center of selected shapes)"}).option("where",{describe:"use a JS expression to select a subset of features"}).option("target",e),c.command("clean").option("target",e),c.command("cluster").describe("group polygons into compact clusters").option("id-field",{describe:'field name of cluster id (default is "cluster")'}).option("pct",{alias:"p",type:"percent",describe:"percentage of shapes to retain, e.g. 50%"}).option("max-width",{describe:"max width of cluster bounding box",type:"number"}).option("max-height",{describe:"max height of cluster bounding box",type:"number"}).option("max-area",{describe:"max area of a cluster",type:"number"}).option("group-by",{describe:"field name; only same-value shapes will be grouped"}).option("target",e),c.command("colorizer").describe("define a function to convert data values to color classes").flag("no_arg").option("colors",{describe:"comma-separated list of CSS colors",type:"colors"}).option("breaks",{describe:"ascending-order list of breaks for sequential color scheme",type:"numbers"}).option("categories",{describe:"comma-sep. list of keys for categorical color scheme",type:"strings"}).option("other",{describe:"default color for categorical scheme (defaults to no-data color)"}).option("nodata",{describe:"color to use for invalid or missing data (default is white)"}).option("name",{describe:"function name to use in -each and -svg-style commands"}).option("precision",{describe:"rounding precision to apply before classification (e.g. 0.1)",type:"number"}),c.command("data-fill").option("field",{describe:"name of field to fill out"}).option("postprocess",{describe:"remove data islands",type:"flag"}),c.command("subdivide").describe("recursively split a layer using a JS expression").validate(Ue).default("expression").option("expression",{describe:"boolean JS expression"}).option("target",e),c.section("\nInformational commands"),c.command("calc").describe("calculate statistics about the features in a layer").example("Calculate the total area of a polygon layer\n$ mapshaper polygons.shp -calc 'sum($.area)'").example("Count census blocks in NY with zero population\n$ mapshaper ny-census-blocks.shp -calc 'count()' where='POPULATION == 0'").validate(Ue).default("expression").option("expression",{describe:"functions: sum() average() median() max() min() count()"}).option("where",{describe:"use a JS expression to select a subset of features"}).option("target",e),c.command("encodings").describe("print list of supported text encodings (for .dbf import)"),c.command("help").alias("h").describe("print help; takes optional command name").default("command").option("command",{describe:"view detailed information about a command"}),c.command("info").describe("print information about data layers"),
c.command("inspect").describe("print information about a feature").default("expression").option("expression",{describe:"boolean JS expression for selecting a feature"}).option("target",e).validate(Ue),c.command("projections").describe("print list of supported projections"),c.command("quiet").describe("inhibit console messages"),c.command("verbose").describe("print verbose processing messages"),c.command("version").alias("v").describe("print mapshaper version"),c.command("tracing"),c},Je.parseCommands=function(e){return Array.isArray(e)&&Xe.isObject(e[0])?e.map(function(e){return{name:e.name,options:Xe.extend({},e.options)}}):(Xe.isString(e)&&(e=Je.splitShellTokens(e)),Je.getOptionParser().parseArgv(e))},Je.parseConsoleCommands=function(e){var t,o=e.replace(/^mapshaper\b/,"").trim();return/^[a-z]/.test(o)&&(o="-"+o),Xe.contains(Je.splitShellTokens(o),"-i")&&n("The input command cannot be run in the browser"),t=Je.parseCommands(o),t.length>0&&"i"==t[0].name&&n(Xe.format("Unable to run [%s]",e)),t},Je.findCommandTargets=function(e,t){var o=[],r=Xe.pluck(t.getLayers(),"layer");return Je.findMatchingLayers(r,e),t.getDatasets().forEach(function(e){var t=e.layers.filter(function(e){return e.match_id>-1});t.length>0&&o.push({layers:t,dataset:e})}),o},Je.findMatchingLayers=function(e,t){var o=0;return t.split(",").forEach(function(t,r){var i=Je.getLayerMatch(t);e.forEach(function(e,t){0===r&&(e.match_id=-1),e.match_id==-1&&i(e,t+1)&&(e.match_id=o++)})}),e},Je.getLayerMatch=function(e){var t=Xe.isInteger(Number(e)),o=t?null:Xe.wildcardToRegExp(e);return function(r,i){return t?String(i)==e:o.test(r.name||"")}},Je.getFormattedLayerList=function(e){var t=[];return e.forEachLayer(function(e,o,r){t.push("  ["+(r+1)+"]  "+(e.name||"[unnamed]"))}),t.length>0?t.join("\n"):"[none]"},ze.runCommands=function(e,t){var o;try{o=Je.parseCommands(e)}catch(e){return t(e)}Je.runParsedCommands(o,null,function(e,o){t(e)})},ze.applyCommands=function(e,t,o){var r=[],i=Je.guessInputContentType(t);try{e=Je.parseCommands(e)}catch(e){return o(e)}return"text"==i||"json"==i?(s("Warning: applyCommands() was called with deprecated input format"),Je.applyCommandsOld(e,t,o)):(e=e.map(function(e){return"i"!=e.name&&"join"!=e.name||!t?"o"==e.name&&(e.options.output=r):e.options.input=t,e}),void Je.runParsedCommands(e,null,function(e){var t=r.reduce(function(e,t){return e[t.filename]=t.content,e},{});o(e,e?null:t)}))},Je.applyCommandsOld=function(e,t,o){var r,i=[];e=Je.runAndRemoveInfoCommands(e),0!==e.length&&"i"==e[0].name||e.unshift({name:"i",options:{}}),e[0].options.input={input:t},e[0].options.files=["input"],r=e.pop(),"o"!=r.name&&(e.push(r),r={name:"o",options:{}}),e.push(r),r.options.output=i,Je.runParsedCommands(e,null,function(e){var t=i.map(function(e){return e.content});1==t.length&&(t=t[0]),o(e,t)})},Je.testCommands=function(e,t){Je.runParsedCommands(Je.parseCommands(e),null,function(e,o){var r,i=o&&o.getDefaultTarget();!e&&i&&(r=i.dataset),t(e,r)})},Je.runParsedCommands=function(e,t,o){return t?t instanceof Ve==!1&&i("Changed in v0.4: runParsedCommands() takes a Catalog object"):t=new Ve,Xe.isFunction(o)||i("Missing a callback function"),Xe.isArray(e)||i("Expected an array of parsed commands"),0===e.length?o(new a("No commands to run")):(e=Je.runAndRemoveInfoCommands(e),0===e.length?o(null):(e=Je.divideImportCommand(e),void Xe.reduceAsync(e,t,function(e,t,o){ze.runCommand(t,e,o)},o)))},Je.divideImportCommand=function(e){var t=e[0],o=e[e.length-1],r=t.options;return"o"==o.name&&(o.options.final=!0),"i"!=t.name||r.stdin||r.merge_files||r.combine_files||!r.files||r.files.length<2?e:r.files.reduce(function(t,o){var i={name:"i",options:Xe.defaults({files:[o],replace:!0},r)};return t.push(i),t.push.apply(t,e.slice(1)),t},[])},Xe.reduceAsync=function(e,t,o,r){function i(t,l){return t?r(t,null):void n(function(){a<e.length==!1?r(null,l):o(l,e[a++],i)},0)}var n="undefined"==typeof setImmediate?setTimeout:setImmediate,a=0;i(null,t)},Je.runAndRemoveInfoCommands=function(e){return e.filter(function(e){if("version"==e.name)s(Je.VERSION);else if("encodings"==e.name)Je.printEncodings();else if("projections"==e.name)Je.printProjections();else if("verbose"==e.name)Je.VERBOSE=!0;else if("quiet"==e.name)Je.QUIET=!0;else{if("tracing"!=e.name)return!0;Je.TRACING=!0}return!1})};var ct={};ct.isFile=function(e,t){var o=ct.statSync(e);return t&&e in t||o&&o.isFile()||!1},ct.fileSize=function(e){var t=ct.statSync(e);return t&&t.size||0},ct.isDirectory=function(e){var t=ct.statSync(e);return t&&t.isDirectory()||!1},ct.readFile=function(e,t,o){var r;return o&&e in o?(r=o[e],delete o[e]):r=require("/dev/stdin"==e?"rw":"fs").readFileSync(e),t&&Qe.isBuffer(r)&&(r=Je.decodeString(r,t)),r},ct.writeFile=function(e,t,o){var r=require("rw");o?r.writeFile(e,t,o):r.writeFileSync(e,t)},ct.convertArrayBuffer=function(e){for(var t=new Uint8Array(e),o=new Qe(t.length),r=0,i=t.length;r<i;r++)o[r]=t[r];return o},ct.expandFileName=function(e){var t=Xe.parseLocalPath(e),o=Xe.wildcardToRegExp(t.filename),r=t.directory||".",i=[];try{require("fs").readdirSync(r).forEach(function(e){var t=require("path").join(r,e);o.test(e)&&ct.isFile(t)&&i.push(t)})}catch(e){}return 0===i.length&&n("No files matched ("+e+")"),i},ct.expandInputFiles=function(e){return e.reduce(function(e,t){return t.indexOf("*")>-1?e=e.concat(ct.expandFileName(t)):e.push(t),e},[])},ct.validateOutputDir=function(e){ct.isDirectory(e)||i("Output directory not found:",e)},ct.checkFileExists=function(e,t){ct.isFile(e,t)||"/dev/stdin"==e||n("File not found ("+e+")")},ct.statSync=function(e){var t=null;try{t=require("fs").statSync(e)}catch(e){}return t},ze.cli=ct,ze.internal=Je,ze.utils=Xe,ze.geom=tt,this.mapshaper=ze,Xe.extend(ze.internal,{Catalog:Ve,DataTable:ne,BinArray:o,DouglasPeucker:ut,Visvalingam:gt,Heap:Oe,ShpReader:Le,ShpType:lt,Dbf:ot,DbfReader:ie,ShapefileTable:Ae,ArcCollection:B,ArcIter:j,ShapeIter:U,Bounds:t,Transform:e,NodeCollection:V,PolygonIndex:W,PathIndex:X,topojson:at,geojson:nt,svg:pt,APIError:a}),"function"==typeof define&&define.amd?define("mapshaper",["buffer"],function(e){return Qe=e.Buffer,ze}):"object"==typeof module&&module.exports&&(Qe=require("buffer").Buffer,module.exports=ze)}(),function(e){e(function(e,t){function o(e){var t=new v.ArcCollection(e);return v.findSegmentIntersections(t)}function r(t,o){var r=o.geometry.coordinates;return[0,1,2,3].map(function(i){var n=(i+1)%4,a=t[i],l=t[n],s=a.geometry.coordinates,p=Math.atan2(s[0]-r[0],s[1]-r[1]),g=[o,a,l,o].map(function(e){return e.geometry.coordinates}),u=m(g);u&&(g=[o,l,a,o].map(function(e){return e.geometry.coordinates}));var c=u?{a:{geom:o.properties.target.geom,index:o.properties.target.index},b:{geom:l.properties.target.geom,index:l.properties.target.index},c:{geom:a.properties.target.geom,index:a.properties.target.index}}:{a:{geom:o.properties.target.geom,index:o.properties.target.index},b:{geom:a.properties.target.geom,index:a.properties.target.index},c:{geom:l.properties.target.geom,index:l.properties.target.index}},y=e.featureCollection([e.polygon([g],c)]);return[p,y]}).reduce(function(e,t){return e[0].push(t[0]),e[1].push(t[1]),e},[[],[]])}function i(e,t){for(var o=t?function(e){return!(e>=0&&e<2*Math.PI)}:function(e){return!(e>-1*Math.PI&&e<=Math.PI)};o(e);)e+=2*Math.PI*(e>0?-1:1);return e}function n(e,t){for(var o,r=i(e-t[0]),n=2*Math.PI,a=0;a<t.length;a++){var l=(a+1)%t.length,s=i(e-t[l]),p=Math.min(Math.abs(r),Math.abs(s));r*s<=0&&p<n&&(n=p,o=a),r=s}return o}function a(t,o,r){return e.point(t,{target:{geom:o,index:r}})}function l(t){return e.point(t.properties.target.geom,{target:{geom:t.geometry.coordinates,index:t.properties.target.index}})}function s(e,t,o){var r=t.geometry.coordinates[0][0],i=t.geometry.coordinates[0][1],n=t.geometry.coordinates[0][2],a=e.geometry.coordinates,l=t.properties.a.geom,s=t.properties.b.geom,p=t.properties.c.geom,g=[i[0]-r[0],i[1]-r[1]],u=[n[0]-r[0],n[1]-r[1]],c=[a[0]-r[0],a[1]-r[1]],y=[s[0]-l[0],s[1]-l[1]],h=[p[0]-l[0],p[1]-l[1]],d=(u[1]*c[0]-u[0]*c[1])/(g[0]*u[1]-g[1]*u[0]),f=(g[0]*c[1]-g[1]*c[0])/(g[0]*u[1]-g[1]*u[0]);if(o){var m,v=o[t.properties.a.index],_=o[t.properties.b.index],S=o[t.properties.c.index];if(d<0||f<0||1-d-f<0){var x=d/(d+f),E=f/(d+f);m=d/_/(x/_+E/S),f=f/S/(x/_+E/S)}else m=d/_/(d/_+f/S+(1-d-f)/v),f=f/S/(d/_+f/S+(1-d-f)/v);d=m}var P=[d*y[0]+f*h[0]+l[0],d*y[1]+f*h[1]+l[1]];return P}function p(e,t,o,r){var i=e.geometry.coordinates,a=o.geometry.coordinates,l=Math.atan2(i[0]-a[0],i[1]-a[1]),p=n(l,t[0]),g=t[1][p];return s(e,g.features[0],r)}function g(t,o){for(var r=0;r<o.features.length;r++){var i=e.inside(t,o.features[r]);if(i)return o.features[r]}}function u(e,t,o,r,i){var n=g(e,t);return n?s(e,n,i):p(e,o,r,i)}function c(t){var o=["a","b","c","a"].map(function(e){return t.properties[e].geom}),r=m(o);r&&(o=["a","c","b","a"].map(function(e){return t.properties[e].geom}));var i=t.geometry.coordinates[0],n=t.properties,a=r?{a:{geom:i[0],index:n.a.index},b:{geom:i[2],index:n.c.index},c:{geom:i[1],index:n.b.index}}:{a:{geom:i[0],index:n.a.index},b:{geom:i[1],index:n.b.index},c:{geom:i[2],index:n.c.index}};return e.polygon([o],a)}function y(t){var o={forw:{},bakw:{}};return Promise.all(Object.keys(t).map(function(o){return new Promise(function(r){var i=t[o];return i.length<2?r():void["forw","bakw"].map(function(t){var n=e.intersect(i[0][t],i[1][t]);if(!n||"Point"==n.geometry.type||"LineString"==n.geometry.type)return r();var a=e.difference(i[0][t],n),l=e.difference(i[1][t],n);a&&l?i[t][o]="Not include case":i[t][o]="Include case",r()})})})).then(function(){return 0==Object.keys(o.forw).length&&delete o.forw,0==Object.keys(o.bakw).length&&delete o.bakw,o}).catch(function(e){throw e})}function h(e,t,o){var r=f(t.forw),i=f(t.bakw);if(JSON.stringify(r)!=JSON.stringify(i))throw JSON.stringify(t,null,2)+"\n"+JSON.stringify(r)+"\n"+JSON.stringify(i);for(var n=0;n<r.length;n++){var a=r[n];e[a]||(e[a]=[]),e[a].push(t)}o&&(o.forw.features.push(t.forw),o.bakw.features.push(t.bakw))}function d(e,t,o){var r=f(t.forw),i=f(t.bakw);if(JSON.stringify(r)!=JSON.stringify(i))throw JSON.stringify(t,null,2)+"\n"+JSON.stringify(r)+"\n"+JSON.stringify(i);for(var n=0;n<r.length;n++){var a=r[n],l=e[a].filter(function(e){return e.forw!=t.forw});0==l.length?delete e[a]:e[a]=l}if(o){var l=o.forw.features.filter(function(e){return e!=t.forw});o.forw.features=l,l=o.bakw.features.filter(function(e){return e!=t.bakw}),o.bakw.features=l}}function f(e){var t=["a","b","c"].map(function(t){return e.properties[t].index});return[[0,1],[0,2],[1,2],[0,1,2]].map(function(e){var o=e.map(function(e){return t[e]}).sort().join("-");return o}).sort()}var m=e.booleanClockwise,v=t.internal,_=function(t){this.points=t.points,this.wh=t.wh,e.inside=function(t,o){var r=e.getCoord(t),i=o.geometry.coordinates;"Polygon"===o.geometry.type&&(i=[i]);for(var n=0,a=!1;n<i.length&&!a;n++)if(e.inRing(r,i[n][0])){for(var l=!1,s=1;s<i[n].length&&!l;)e.inRing(r,i[n][s],!0)&&(l=!0),s++;l||(a=!0)}return a},e.inRing=function(e,t,o){var r=!1;t[0][0]==t[t.length-1][0]&&t[0][1]==t[t.length-1][1]&&(t=t.slice(0,t.length-1));for(var i=0,n=t.length-1;i<t.length;n=i++){var a=t[i][0],l=t[i][1],s=t[n][0],p=t[n][1],g=e[1]*(a-s)+l*(s-e[0])+p*(e[0]-a)==0&&(a-e[0])*(s-e[0])<=0&&(l-e[1])*(p-e[1])<=0;if(g)return!o;var u=l>e[1]!=p>e[1]&&e[0]<(s-a)*(e[1]-l)/(p-l)+a;u&&(r=!r)}return r}};return _.setTurf=function(t){e=t},_.prototype.setPoints=function(e){this.points=e,this.tins=void 0},_.prototype.setCompiled=function(e){this.tins=e.tins,this.strict_status=e.strict_status,this.pointsWeightBuffer=e.weight_buffer,this.vertices_params=e.vertices_params,this.centroid=e.centroid,this.kinks=e.kinks;for(var t=[],o=0;o<this.tins.forw.features.length;o++){var r=this.tins.forw.features[o];["a","b","c"].map(function(e,o){var i=r.geometry.coordinates[0][o],n=r.properties[e].geom,a=r.properties[e].index;t[a]=[i,n]})}this.points=t},_.prototype.setWh=function(e){this.wh=e,this.tins=void 0},_.prototype.calcurateStrictTinAsync=function(){var t=this;return Promise.all(t.tins.forw.features.map(function(e){return Promise.resolve(c(e))})).then(function(o){t.tins.bakw=e.featureCollection(o)}).then(function(){var e={};return Promise.all(t.tins.forw.features.map(function(o,r){var i=t.tins.bakw.features[r];return Promise.resolve(h(e,{forw:o,bakw:i}))})).then(function(){return e}).catch(function(e){throw e})}).then(function(e){return[y(e),e]}).then(function(r){var i=r[0],n=r[1];return i.bakw&&Object.keys(i.bakw).map(function(o){if("Not include case"!=i.bakw[o]){var r=n[o],a=e.union(r[0].forw,r[1].forw),l=e.convex(e.featureCollection([r[0].forw,r[1].forw])),s=e.difference(l,a);if(!s){var p=o.split("-").map(function(e){return["a","b","c"].map(function(e,t){var o=r[0].bakw.properties[e],i=r[0].bakw.geometry.coordinates[0][t];return{geom:i,prop:o}}).filter(function(t){return t.prop.index==e})[0]}),g=r.map(function(e){return["a","b","c"].map(function(t,o){var r=e.bakw.properties[t],i=e.bakw.geometry.coordinates[0][o];return{geom:i,prop:r}}).filter(function(e){return e.prop.index!=p[0].prop.index&&e.prop.index!=p[1].prop.index})[0]});d(n,r[0],t.tins),d(n,r[1],t.tins),p.map(function(o){var r=[o.geom,g[0].geom,g[1].geom,o.geom],i=m(r);i&&(r=[o.geom,g[1].geom,g[0].geom,o.geom]);var a=i?{a:o.prop,b:g[1].prop,c:g[0].prop}:{a:o.prop,b:g[0].prop,c:g[1].prop},l=e.polygon([r],a),s=c(l);h(n,{forw:s,bakw:l},t.tins)})}}}),Promise.all(["forw","bakw"].map(function(r){return new Promise(function(i){var n=t.tins[r].features.map(function(e){return e.geometry.coordinates[0]}),a=o(n),l=v.dedupIntersections(a).reduce(function(t,o,r,i){return t||(t={}),t[o.x+":"+o.y]=o,r!=i.length-1?t:Object.keys(t).map(function(o){return e.point([t[o].x,t[o].y])})},[]);i(l)}).catch(function(e){throw e})})).then(function(o){0==o[0].length&&0==o[1].length?(t.strict_status="strict",delete t.kinks):(t.strict_status="strict_error",t.kinks={},o[0].length>0&&(t.kinks.forw=e.featureCollection(o[0])),o[1].length>0&&(t.kinks.bakw=e.featureCollection(o[1])))}).catch(function(e){throw e})}).catch(function(e){throw e})},_.prototype.updateTinAsync=function(t){var o=this;return new Promise(function(r,i){"strict"!=t&&"loose"!=t&&(t="auto");var n=[];o.wh&&(n=[[0,0],[o.wh[0],0],[0,o.wh[1]],[o.wh[0],o.wh[1]]]);for(var s={forw:[],bakw:[]},p=0;p<o.points.length;p++){var g=o.points[p][0],u=o.points[p][1],c=a(g,u,p);s.forw.push(c),s.bakw.push(l(c))}var y={forw:e.featureCollection(s.forw),bakw:e.featureCollection(s.bakw)};r([y,n])}).then(function(t){var o=t[0];return Promise.all([new Promise(function(t){t(e.tin(o.forw,"target"))}),new Promise(function(t){t(e.tin(o.bakw,"target"))}),new Promise(function(t){t(e.centroid(o.forw))}),Promise.resolve(t)]).catch(function(e){throw e})}).then(function(t){var r=t[0],i=t[1],n=t[2],s=t[3],p=s[0],g={forw:n.geometry.coordinates};g.bakw=u(n,r),o.centroid={forw:a(g.forw,g.bakw,"cent")},o.centroid.bakw=l(o.centroid.forw);var c={};return Promise.all([new Promise(function(t){var o=e.convex(p.forw).geometry.coordinates[0],i=o.map(function(t){return{forw:t,bakw:u(e.point(t),r)}});i.map(function(e){c[e.forw[0]+":"+e.forw[1]]=e}),t()}),new Promise(function(t){var o=e.convex(p.bakw).geometry.coordinates[0],r=o.map(function(t){return{bakw:t,forw:u(e.point(t),i)}});r.map(function(e){c[e.forw[0]+":"+e.forw[1]]=e}),t()})]).then(function(){return[g,c,s]}).catch(function(e){throw e})}).then(function(e){var t=e[0],r=e[1],i=e[2],n=Object.keys(r).reduce(function(e,i,n,a){var l=r[i].forw,s=r[i].bakw,p={forw:[l[0]-t.forw[0],l[1]-t.forw[1]]};p.bakw=[s[0]-t.bakw[0],s[1]-t.bakw[1]];var g=0==p.forw[0]?1/0:((p.forw[0]<0?0:o.wh[0])-t.forw[0])/p.forw[0],u=0==p.forw[1]?1/0:((p.forw[1]<0?0:o.wh[1])-t.forw[1])/p.forw[1];if(Math.abs(g)/Math.abs(u)<1.1){var c={forw:[p.forw[0]*g+t.forw[0],p.forw[1]*g+t.forw[1]],bakw:[p.bakw[0]*g+t.bakw[0],p.bakw[1]*g+t.bakw[1]]};p.forw[0]<0?e[3].push(c):e[1].push(c)}if(Math.abs(u)/Math.abs(g)<1.1){var c={forw:[p.forw[0]*u+t.forw[0],p.forw[1]*u+t.forw[1]],bakw:[p.bakw[0]*u+t.bakw[0],p.bakw[1]*u+t.bakw[1]]};p.forw[1]<0?e[0].push(c):e[2].push(c)}return e},[[],[],[],[]]),a=Object.keys(r).reduce(function(e,o,i,n){var a=r[o].forw,l=r[o].bakw,s={forw:[a[0]-t.forw[0],a[1]-t.forw[1]]};if(s.bakw=[l[0]-t.bakw[0],t.bakw[1]-l[1]],0==s.forw[0]||0==s.forw[1])return e;var p=0;return s.forw[0]>0&&(p+=1),s.forw[1]>0&&(p+=2),e[p].push([s.forw,s.bakw]),i==n.length-1?e.length==e.filter(function(e){return e.length>0}).length?e:e.reduce(function(e,t){var o=[e[0].concat(t)];return o},[[]]):e},[[],[],[],[]]).map(function(e){return e.reduce(function(e,t,o,r){e||(e=[1/0,0,0]);var i=Math.sqrt(Math.pow(t[0][0],2)+Math.pow(t[0][1],2))/Math.sqrt(Math.pow(t[1][0],2)+Math.pow(t[1][1],2));i=i<e[0]?i:e[0];var n=Math.atan2(t[0][0],t[0][1])-Math.atan2(t[1][0],t[1][1]),a=e[1]+Math.cos(n),l=e[2]+Math.sin(n);return o==r.length-1?[i,Math.atan2(l,a)]:[i,a,l]},null)});return 1==a.length&&(a=[a[0],a[0],a[0],a[0]]),[a,t,n,i]}).then(function(t){var o=t[0],r=t[1],i=t[2],n=t[3][0],a=t[3][1],l=o.map(function(e,t){var o=a[t],i=[o[0]-r.forw[0],o[1]-r.forw[1]],n=Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2)),l=n/e[0],s=Math.atan2(i[0],i[1]),p=s-e[1],g=[r.bakw[0]+l*Math.sin(p),r.bakw[1]-l*Math.cos(p)];return{forw:o,bakw:g}}),s=l[2];l[2]=l[3],l[3]=s;for(var p=[1,1,1,1],g=0;g<4;g++){var u=(g+1)%4,c=e.lineString([l[g].bakw,l[u].bakw]),y=i[g];y.map(function(t){var o=e.lineString([r.bakw,t.bakw]),i=e.intersect(c,o);if(i){var n=Math.sqrt(Math.pow(t.bakw[0]-r.bakw[0],2)+Math.pow(t.bakw[1]-r.bakw[1],2)),a=Math.sqrt(Math.pow(i.geometry.coordinates[0]-r.bakw[0],2)+Math.pow(i.geometry.coordinates[1]-r.bakw[1],2)),l=n/a;l>p[g]&&(p[g]=l),l>p[u]&&(p[u]=l)}})}return l=l.map(function(e,t){var o=p[t],i=[(e.bakw[0]-r.bakw[0])*o+r.bakw[0],(e.bakw[1]-r.bakw[1])*o+r.bakw[1]];return{forw:e.forw,bakw:i}}),[l,n]}).then(function(i){for(var n=i[0],s=i[1],p={forw:[],bakw:[]},g=0;g<n.length;g++){var u=n[g].forw,c=n[g].bakw,y=a(u,c,"bbox"+g),h=l(y);s.forw.features.push(y),s.bakw.features.push(h),p.forw.push(y),p.bakw.push(h)}o.pointsSet=s,o.tins={forw:e.tin(s.forw,"target")};var d;return d="strict"==t||"auto"==t?o.calcurateStrictTinAsync():Promise.resolve(),d.then(function(){return("loose"==t||"auto"==t&&"strict_error"==o.strict_status)&&(o.tins.bakw=e.tin(s.bakw,"target"),delete o.kinks,o.strict_status="loose"),o.vertices_params={forw:r(p.forw,o.centroid.forw),bakw:r(p.bakw,o.centroid.bakw)},o.calculatePointsWeightAsync()}).catch(function(e){throw e})}).catch(function(e){throw e})},_.prototype.transform=function(t,o){var r=e.point(t),i=o?this.tins.bakw:this.tins.forw,n=o?this.vertices_params.bakw:this.vertices_params.forw,a=o?this.centroid.bakw:this.centroid.forw,l=o?this.pointsWeightBuffer.bakw:this.pointsWeightBuffer.forw;return u(r,i,n,a,l)},_.prototype.calculatePointsWeightAsync=function(){var e=this,t=["forw"];"loose"==e.strict_status&&t.push("bakw");var o={};return Promise.all(t.map(function(t){o[t]={};var r={},i=e.tins[t];return Promise.all(i.features.map(function(e){var i=["a","b","c"];return new Promise(function(n){for(var a=0;a<3;a++){var l=(a+1)%3,s=i[a],p=i[l],g=e.properties[s].index,u=e.properties[p].index,c=[g,u].sort().join("-");if(!r[c]){var y=e.geometry.coordinates[0][a],h=e.geometry.coordinates[0][l],d=e.properties[s].geom,f=e.properties[p].geom;r[c]=1;var m=Math.sqrt(Math.pow(d[0]-f[0],2)+Math.pow(d[1]-f[1],2))/Math.sqrt(Math.pow(y[0]-h[0],2)+Math.pow(y[1]-h[1],2));o[t][g]||(o[t][g]={}),o[t][u]||(o[t][u]={}),o[t][g][c]=m,o[t][u][c]=m}}n()})})).catch(function(e){throw e})})).then(function(){var r={};t.map(function(t){r[t]={},"strict"==e.strict_status&&(r.bakw={}),Object.keys(o[t]).map(function(i){r[t][i]=Object.keys(o[t][i]).reduce(function(e,r,n,a){return e+=o[t][i][r],n==a.length-1?e/a.length:e},0),"strict"==e.strict_status&&(r.bakw[i]=1/r[t][i])}),r[t].cent=[0,1,2,3].reduce(function(e,o){var i="bbox"+o;return e+=r[t][i],3==o?e/4:e},0),"strict"==e.strict_status&&(r.bakw.cent=1/r[t].cent)}),e.pointsWeightBuffer=r}).catch(function(e){throw e})},_})}("function"==typeof turf?function(e){this.Tin=e(this.turf,this.mapshaper)}:"function"==typeof define&&define.amd?function(e){define("tin",["turf","mapshaper"],function(t,o){return e(t,o)})}:"undefined"!=typeof module&&module.exports&&"function"==typeof require?function(e){var t,o;try{t=require("@turf/turf"),o=require("mapshaper")}catch(e){}module.exports=e(t,o)}:function(e){if(!this.turf)throw new Error('"turf" not found');this.Tin=e(this.turf,this.mapshaper)}),define("histmap_tin",["histmap","tin","aigle"],function(e,t,o){return e.source.HistMap_tin=function(o){var r=o||{};e.source.HistMap.call(this,r),this.tin=new t({wh:[this.width,this.height]})},e.inherits(e.source.HistMap_tin,e.source.HistMap),e.source.HistMap_tin.createAsync=function(t){return t.noload?(t.attr&&!t.attributions&&(t.attributions=[new e.Attribution({html:t.attr})]),o.resolve(new e.source.HistMap_tin(t))):new o(function(o,r){var i=t.setting_file||"maps/"+t.mapID+".json",n=new XMLHttpRequest;n.open("GET",i,!0),n.responseType="json",n.onload=function(r){if(200!=this.status&&0!=this.status)throw"Fail to load map json";try{var i=this.response;t.title=t.title||i.title,t.width=t.width||i.width,t.height=t.height||i.height,t.label=t.label||i.label||i.year,t.attr=t.attr||i.attr,t.attr&&!t.attributions&&(t.attributions=[new e.Attribution({html:t.attr})]);var n=new e.source.HistMap_tin(t),a=new e.proj.Projection({code:"Illst:"+n.mapID,extent:[0,0,n.width,n.height],units:"m"});e.proj.addProjection(a),e.proj.addCoordinateTransforms(a,"EPSG:3857",function(e){return n.tin.transform(e,!1)},function(e){return n.tin.transform(e,!0)}),e.proj.transformDirect("EPSG:4326",a),i.compiled?(n.tin.setCompiled(i.compiled),o(n)):n.finalizeCreateAsync_(i.gcps,o)}catch(e){throw e}},n.send()})},e.source.HistMap_tin.prototype.finalizeCreateAsync_=function(e,t){var o=this;this.tin.setPoints(e),this.tin.updateTinAsync().then(function(){t(o)})},e.source.HistMap_tin.prototype.xy2MercAsync_=function(t){var r=this;return new o(function(o,i){o(e.proj.transformDirect(t,"Illst:"+r.mapID,"EPSG:3857"))}).catch(function(e){throw e})},e.source.HistMap_tin.prototype.merc2XyAsync_=function(t){var r=this;return new o(function(o,i){o(e.proj.transformDirect(t,"EPSG:3857","Illst:"+r.mapID))}).catch(function(e){throw e})},e}),function(e,t,o){"function"==typeof define&&"undefined"!=typeof define.amd?define(t,function(){return o(e)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=o(e):e[t]=o(e)}(this,"sprintf",function(){var e=function(){if(!arguments||arguments.length<1)throw new Error("sprintf: ERROR: not enough arguments");for(var e,t=0,o="",r=arguments[t++];e=/^([^%]*)%(?:(\d+)\$|\((.*?)\))?([#0 +'-]+)?(\*|\d+)?(\.\*|\.\d+)?([%diouxXfFeEcs])((?:.|[\r\n])*)$/.exec(r);){var i,n=e[1],a=e[2],l=e[3],s=e[4],p=e[5],g=e[6],u=e[7],c=e[8];if("%"===u)i="%";else{var y=" ",h=!0;s?(s.indexOf("0")>=0&&(y="0"),s.indexOf("-")>=0&&(y=" ",h=!1)):s="";var d,f=-1;if(p)if("*"===p){if(d=t++,d>=arguments.length)throw new Error("sprintf: ERROR: not enough arguments");f=arguments[d]}else f=parseInt(p,10);var m=-1;if(g)if(".*"===g){if(d=t++,d>=arguments.length)throw new Error("sprintf: ERROR: not enough arguments");m=arguments[d]}else m=parseInt(g.substring(1),10);if(d=t++,a){if(d=parseInt(a,10),d>=arguments.length)throw new Error("sprintf: ERROR: not enough arguments");i=arguments[d]}else if(l){if("object"!=typeof arguments[1])throw new Error("sprintf: ERROR: invalid non-object arguments for named argument");if(i=arguments[1][l],"undefined"==typeof i)throw new Error("sprintf: ERROR: invalid undefined value for named argument")}else{if(d>=arguments.length)throw new Error("sprintf: ERROR: not enough arguments");i=arguments[d]}var v="";switch(u){case"d":case"i":"number"!=typeof i&&(i=0),i=i.toString(10),s.indexOf("#")>=0&&i>=0&&(i="+"+i),s.indexOf(" ")>=0&&i>=0&&(i=" "+i);break;case"b":"number"!=typeof i&&(i=0),i=i.toString(2);break;case"o":"number"!=typeof i&&(i=0),i=i.toString(8);break;case"u":"number"!=typeof i&&(i=0),i=Math.abs(i),i=i.toString(10);break;case"x":"number"!=typeof i&&(i=0),i=i.toString(16).toLowerCase(),s.indexOf("#")>=0&&(v="0x");break;case"X":"number"!=typeof i&&(i=0),i=i.toString(16).toUpperCase(),s.indexOf("#")>=0&&(v="0X");break;case"f":case"F":if("number"!=typeof i&&(i=0),i=0+i,m>-1&&(i.toFixed?i=i.toFixed(m):(i=Math.round(i*Math.pow(10,m))/Math.pow(10,m),i+="0000000000",i=i.substr(0,i.indexOf(".")+m+1))),i=""+i,s.indexOf("'")>=0)for(var _=0,S=i.length-1-3;S>=0;S-=3)i=i.substring(0,S)+(0===_?".":",")+i.substring(S),_=(_+1)%2;break;case"e":case"E":if("number"!=typeof i&&(i=0),i=0+i,m>-1){if(!i.toExponential)throw new Error("sprintf: ERROR: toExponential() method not supported");i=i.toExponential(m)}i=""+i,"E"===u&&(i=i.replace(/e\+/,"E+"));break;case"c":"number"!=typeof i&&(i=0),i=String.fromCharCode(i);break;case"s":"string"!=typeof i&&(i=String(i)),m>-1&&(i=i.substr(0,m));break;default:throw new Error('sprintf: ERROR: invalid conversion character "'+u+'"')}var x=f-i.toString().length-v.toString().length;if(x>0){var E=new Array(x+1);h?i=E.join(y)+i:i+=E.join(y)}i=v+i}o=o+n+i,r=c}return o+r};return e.version={text:"1.2.3",major:1,minor:2,micro:3},e}),define("sprintf",function(){}),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("i18nxhr",t):e.i18nextXHRBackend=t()}(this,function(){"use strict";function e(e){return i.call(n.call(arguments,1),function(t){if(t)for(var o in t)void 0===e[o]&&(e[o]=t[o])}),e}function t(e,t,o,r,i){if(r&&"object"===("undefined"==typeof r?"undefined":a(r))){var n="",l=encodeURIComponent;for(var s in r)n+="&"+l(s)+"="+l(r[s]);r=n.slice(1)+(i?"":"&_t="+new Date)}try{var p=new(XMLHttpRequest||ActiveXObject)("MSXML2.XMLHTTP.3.0");p.open(r?"POST":"GET",e,1),t.crossDomain||p.setRequestHeader("X-Requested-With","XMLHttpRequest"),p.withCredentials=!!t.withCredentials,r&&p.setRequestHeader("Content-type","application/x-www-form-urlencoded"),p.onreadystatechange=function(){p.readyState>3&&o&&o(p.responseText,p)},p.send(r)}catch(e){window.console&&console.log(e)}}function o(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,crossDomain:!1,ajax:t}}var r=[],i=r.forEach,n=r.slice,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=(function(){function e(e){this.value=e}function t(t){function o(e,t){return new Promise(function(o,i){var l={key:e,arg:t,resolve:o,reject:i,next:null};a?a=a.next=l:(n=a=l,r(e,t))})}function r(o,n){try{var a=t[o](n),l=a.value;l instanceof e?Promise.resolve(l.value).then(function(e){r("next",e)},function(e){r("throw",e)}):i(a.done?"return":"normal",a.value)}catch(e){i("throw",e)}}function i(e,t){switch(e){case"return":n.resolve({value:t,done:!0});break;case"throw":n.reject(t);break;default:n.resolve({value:t,done:!1})}n=n.next,n?r(n.key,n.arg):a=null}var n,a;this._invoke=o,"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}(),function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}),s=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),p=function(){function t(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,t),this.init(e,o),this.type="backend"}return s(t,[{key:"init",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.services=t,this.options=e(r,this.options||{},o())}},{key:"readMulti",value:function(e,t,o){var r=this.options.loadPath;"function"==typeof this.options.loadPath&&(r=this.options.loadPath(e,t));var i=this.services.interpolator.interpolate(r,{lng:e.join("+"),ns:t.join("+")});this.loadUrl(i,o)}},{key:"read",value:function(e,t,o){var r=this.options.loadPath;"function"==typeof this.options.loadPath&&(r=this.options.loadPath([e],[t]));var i=this.services.interpolator.interpolate(r,{lng:e,ns:t});this.loadUrl(i,o)}},{key:"loadUrl",value:function(e,t){var o=this;this.options.ajax(e,this.options,function(r,i){if(i.status>=500&&i.status<600)return t("failed loading "+e,!0);if(i.status>=400&&i.status<500)return t("failed loading "+e,!1);var n=void 0,a=void 0;try{n=o.options.parse(r,e)}catch(t){a="failed parsing "+e+" to json"}return a?t(a,!1):void t(null,n)})}},{key:"create",value:function(e,t,o,r){var i=this;"string"==typeof e&&(e=[e]);var n={};n[o]=r||"",e.forEach(function(e){var o=i.services.interpolator.interpolate(i.options.addPath,{lng:e,ns:t});i.options.ajax(o,i.options,function(e,t){},n)})}}]),t}();return p.type="backend",p}),function(e,t){if("function"==typeof define&&define.amd)define("bootstrap",[],t);else if("object"==typeof module&&module.exports)module.exports=t();else{var o=t();e.Affix=o.Affix,e.Alert=o.Alert,e.Button=o.Button,e.Carousel=o.Carousel,e.Collapse=o.Collapse,e.Dropdown=o.Dropdown,e.Modal=o.Modal,e.Popover=o.Popover,e.ScrollSpy=o.ScrollSpy,e.Tab=o.Tab,e.Tooltip=o.Tooltip}}(this,function(){var e="undefined"!=typeof global?global:this||window,t=document.documentElement,o=document.body,r="data-toggle",i="data-dismiss",n="data-spy",a="data-ride",l="Affix",s="Alert",p="Button",g="Carousel",u="Collapse",c="Dropdown",y="Modal",h="Popover",d="ScrollSpy",f="Tab",m="Tooltip",v="data-backdrop",_="data-keyboard",S="data-target",x="data-interval",E="data-height",P="data-pause",T="data-original-title",R="data-original-text",L="data-dismissible",M="data-trigger",C="data-animation",b="data-container",I="data-placement",A="data-delay",w="data-offset-top",O="data-offset-bottom",F="backdrop",N="keyboard",G="delay",D="content",k="target",j="interval",q="pause",U="animation",B="placement",V="container",W="offsetTop",X="offsetBottom",K="offsetLeft",Y="scrollTop",Z="scrollLeft",H="clientWidth",z="clientHeight",J="offsetWidth",Q="offsetHeight",$="innerWidth",ee="innerHeight",te="scrollHeight",oe="height",re="aria-expanded",ie="aria-hidden",ne="click",ae="hover",le="keydown",se="resize",pe="scroll",ge="show",ue="shown",ce="hide",ye="hidden",he="close",de="closed",fe="slid",me="slide",ve="change",_e="getAttribute",Se="setAttribute",xe="hasAttribute",Ee="getElementsByTagName",Pe="getBoundingClientRect",Te="querySelectorAll",Re="getElementsByClassName",Le="indexOf",Me="parentNode",Ce="length",be="toLowerCase",Ie="Transition",Ae="Webkit",we="style",Oe="active",Fe="in",Ne="collapsing",Ge="disabled",De="loading",ke="left",je="right",qe="top",Ue="bottom",Be=!("opacity"in o[we]),Ve="navbar-fixed-top",We="navbar-fixed-bottom",Xe="onmouseleave"in document?["mouseenter","mouseleave"]:["mouseover","mouseout"],Ke=/\b(top|bottom|left|top)+/,Ye=Ae+Ie in t[we]||Ie[be]()in t[we],Ze=Ae+Ie in t[we]?Ae[be]()+Ie+"End":Ie[be]()+"end",He=function(e){e.focus?e.focus():e.setActive()},ze=function(e,t){e.classList.add(t)},Je=function(e,t){e.classList.remove(t)},Qe=function(e,t){return e.classList.contains(t)},$e=function(e){for(var t=[],o=0,r=e[Ce];o<r;o++)t.push(e[o]);return t},et=function(e,t){var o=Be?Te:Re;return $e(e[o](Be?"."+t.replace(/\s(?=[a-z])/g,"."):t))},tt=function(e,t){var o=t?t:document;return"object"==typeof e?e:o.querySelector(e)},ot=function(e,t){for(var o=t.charAt(0);e&&e!==document;e=e[Me])if("."===o){if(null!==tt(t,e[Me])&&Qe(e,t.replace(".","")))return e}else if("#"===o&&e.id===t.substr(1))return e;return!1},rt=function(e,t,o){e.addEventListener(t,o,!1)},it=function(e,t,o){
e.removeEventListener(t,o,!1)},nt=function(e,t,o){rt(e,t,function r(i){o(i),it(e,t,r)})},at=function(e,t){Ye?nt(e,Ze,function(e){t(e)}):t()},lt=function(e,t,o){var r=new CustomEvent(e+".bs."+t);r.relatedTarget=o,this.dispatchEvent(r)},st=document[Ee]("*"),pt=function(e,t,o,r){for(var i=r&&r[Ce]?r:st,n=0;n<i[Ce];n++){var a=i[n][_e](o),l=e.replace(/spy/i,"")[be]();(a&&e===p&&a[Le](l)>-1||a===l)&&new t(i[n])}},gt=/^\#(.)+$/,ut=function(t){var o=t&&(t.currentStyle||e.getComputedStyle(t)),r=/px/.test(o.borderTopWidth)?Math.round(o.borderTopWidth.replace("px","")):0,i=/px/.test(o.borderBottomWidth)?Math.round(o.borderBottomWidth.replace("px","")):0,n=/px/.test(o.marginTop)?Math.round(o.marginTop.replace("px","")):0,a=/px/.test(o.marginBottom)?Math.round(o.marginBottom.replace("px","")):0;return t[z]+parseInt(r)+parseInt(i)+parseInt(n)+parseInt(a)},ct=function(e){for(var t=0,o=0,r=e.children[Ce];o<r;o++)t+=ut(e.children[o]);return t},yt=function(o){var r=o[Pe]();return r[qe]>=0&&r[ke]>=0&&r[Ue]<=(e[ee]||t[z])&&r[je]<=(e[$]||t[H])},ht=function(){return{y:e.pageYOffset||t[Y],x:e.pageXOffset||t[Z]}},dt=function(e,t,r,i){var n=e[Pe](),a=i===o?ht():{x:i[K]+i[Z],y:i[W]+i[Y]},l={w:n[je]-n[ke],h:n[Ue]-n[qe]},s={w:t[J],h:t[Q]};r===qe?(t[we][qe]=n[qe]+a.y-s.h+"px",t[we][ke]=n[ke]+a.x-s.w/2+l.w/2+"px"):r===Ue?(t[we][qe]=n[qe]+a.y+l.h+"px",t[we][ke]=n[ke]+a.x-s.w/2+l.w/2+"px"):r===ke?(t[we][qe]=n[qe]+a.y-s.h/2+l.h/2+"px",t[we][ke]=n[ke]+a.x-s.w+"px"):r===je&&(t[we][qe]=n[qe]+a.y-s.h/2+l.h/2+"px",t[we][ke]=n[ke]+a.x+l.w+"px"),t.className[Le](r)===-1&&(t.className=t.className.replace(Ke,r))},ft=function(e){return e===qe?Ue:e===Ue?qe:e===ke?je:e===je?ke:e},mt=function(r,i){r=tt(r),i=i||{};var n=r[_e](S),a=r[_e](w),s=r[_e](O),p="affix",g="affixed",u="function",c="update",y="affix-top",h="affixed-top",d="affix-bottom",f="affixed-bottom";if(this[k]=i[k]?tt(i[k]):tt(n)||null,this[W]=i[W]?i[W]:parseInt(a)||0,this[X]=i[X]?i[X]:parseInt(s)||0,this[k]||this[W]||this[X]){var m,v,_,x,E,P,T=this,R=Ye?50:500,L=!1,M=!1,C=function(){return Math.max(o[te],o[Q],t[z],t[te],t[Q])},b=function(){return null!==T[k]?T[k][Pe]()[qe]+x:T[W]?parseInt(typeof T[W]===u?T[W]():T[W]||0):void 0},I=function(){if(T[X])return _-r[Q]-parseInt(typeof T[X]===u?T[X]():T[X]||0)},A=function(){_=C(),x=parseInt(ht().y,0),m=b(),v=I(),E=parseInt(m)-x<0&&x>parseInt(m),P=parseInt(v)-x<0&&x>parseInt(v)},F=function(){L||Qe(r,p)||(lt.call(r,p,p),lt.call(r,y,p),ze(r,p),L=!0,lt.call(r,g,p),lt.call(r,h,p))},N=function(){L&&Qe(r,p)&&(Je(r,p),L=!1)},G=function(){M||Qe(r,d)||(lt.call(r,p,p),lt.call(r,d,p),ze(r,d),M=!0,lt.call(r,g,p),lt.call(r,f,p))},D=function(){M&&Qe(r,d)&&(Je(r,d),M=!1)},j=function(){P?(E&&N(),G()):(D(),E?F():N())};this[c]=function(){A(),j()},l in r||(rt(e,pe,this[c]),rt(e,se,function(){setTimeout(function(){T[c]()},R)})),r[l]=this,this[c]()}};pt(l,mt,n);var vt=function(e){e=tt(e);var t=this,o="alert",r=ot(e,"."+o),n=function(){Qe(r,"fade")?at(r,l):l()},a=function(n){var a=n[k];a=a[xe](i)?a:a[Me],a&&a[xe](i)&&(r=ot(a,"."+o),e=tt("["+i+'="'+o+'"]',r),(e===a||e===a[Me])&&r&&t.close())},l=function(){lt.call(r,de,o),it(e,ne,a),r[Me].removeChild(r)};this.close=function(){r&&e&&Qe(r,Fe)&&(lt.call(r,he,o),Je(r,Fe),r&&n())},s in e||rt(e,ne,a),e[s]=this};pt(s,vt,i);var _t=function(e,t){e=tt(e),t=t||null;var o=!1,r="button",i="checked",n="reset",a="LABEL",l="INPUT",s=function(){t&&t!==n&&(t===De&&(ze(e,Ge),e[Se](Ge,Ge)),e[Se](R,e.innerHTML.replace(/^\s+|\s+$/g,"")),e.innerHTML=e[_e]("data-"+t+"-text"))},g=function(){e[_e](R)&&((Qe(e,Ge)||e[_e](Ge)===Ge)&&(Je(e,Ge),e.removeAttribute(Ge)),e.innerHTML=e[_e](R))},u=function(t){var n=t[k][Me],s=t[k].tagName===a?t[k]:n.tagName===a?n:null;if(s){var p=this,g=et(p,"btn"),u=s[Ee](l)[0];if(u){if("checkbox"===u.type&&(u[i]?(Je(s,Oe),u[_e](i),u.removeAttribute(i),u[i]=!1):(ze(s,Oe),u[_e](i),u[Se](i,i),u[i]=!0),o||(o=!0,lt.call(u,ve,r),lt.call(e,ve,r))),"radio"===u.type&&!o&&!u[i]){ze(s,Oe),u[Se](i,i),u[i]=!0,lt.call(u,ve,r),lt.call(e,ve,r),o=!0;for(var c=0,y=g[Ce];c<y;c++){var h=g[c],d=h[Ee](l)[0];h!==s&&Qe(h,Oe)&&(Je(h,Oe),d.removeAttribute(i),d[i]=!1,lt.call(d,ve,r))}}setTimeout(function(){o=!1},50)}}};Qe(e,"btn")&&null!==t&&(t!==n?s():g()),Qe(e,"btn-group")&&(p in e||rt(e,ne,u),e[p]=this)};pt(p,_t,r);var St=function(t,o){t=tt(t),o=o||{};var r="false"!==t[_e](x)&&(parseInt(t[_e](x))||5e3),i=t[_e](P)===ae||!1,n="true"===t[_e](_)||!1,a="carousel",l="paused",s="direction",p="data-slide-to";this[N]=o[N]===!0||n,this[q]=!(o[q]!==ae&&!i)&&ae,o[j]||r?this[j]=parseInt(o[j])||r:this[j]=!1;var u=this,c=t.index=0,y=t.timer=0,h=!1,d=et(t,"item"),f=d[Ce],m=this[s]=ke,v=et(t,a+"-control"),S=v[0],E=v[1],T=tt("."+a+"-indicators",t),R=T&&T[Ee]("LI")||[],L=function(){u[j]===!1||Qe(t,l)||(ze(t,l),!h&&clearInterval(y))},M=function(){u[j]!==!1&&Qe(t,l)&&(Je(t,l),!h&&clearInterval(y),!h&&u.cycle())},C=function(e){if(e.preventDefault(),!h){var t=e[k],o=u.getActiveIndex();if(!t||Qe(t,Oe)||!t[_e](p))return!1;c=parseInt(t[_e](p),10),o<c||0===o&&c===f-1?m=u[s]=ke:(o>c||o===f-1&&0===c)&&(m=u[s]=je),u.slideTo(c)}},b=function(e){if(e.preventDefault(),!h){var t=e.currentTarget||e.srcElement;t===E?(c++,m=u[s]=ke,c===f-1?c=f-1:c===f&&(c=0)):t===S&&(c--,m=u[s]=je,0===c?c=0:c<0&&(c=f-1)),u.slideTo(c)}},I=function(e){if(!h){switch(e.which){case 39:c++,m=u[s]=ke,c==f-1?c=f-1:c==f&&(c=0);break;case 37:c--,m=u[s]=je,0==c?c=0:c<0&&(c=f-1);break;default:return}u.slideTo(c)}},A=function(e){for(var t=0,o=R[Ce];t<o;t++)Je(R[t],Oe);R[e]&&ze(R[e],Oe)};this.cycle=function(){m=this[s]=ke,y=setInterval(function(){c++,c=c===f?0:c,u.slideTo(c)},this[j])},this.slideTo=function(e){var o=this.getActiveIndex(),r=m===ke?"next":"prev";lt.call(t,me,a,d[e]),h=this.isSliding=!0,clearInterval(y),A(e),Ye&&Qe(t,"slide")?(ze(d[e],r),d[e][J],ze(d[e],m),ze(d[o],m),nt(d[o],Ze,function(i){var n=i[k]!==d[o]?1e3*i.elapsedTime:0;setTimeout(function(){h=u.isSliding=!1,ze(d[e],Oe),Je(d[o],Oe),Je(d[e],r),Je(d[e],m),Je(d[o],m),lt.call(t,fe,a,d[e]),u[j]&&!Qe(t,l)&&u.cycle()},n)})):(ze(d[e],Oe),d[e][J],Je(d[o],Oe),setTimeout(function(){h=!1,u[j]&&!Qe(t,l)&&u.cycle(),lt.call(t,fe,a,d[e])},100))},this.getActiveIndex=function(){return d[Le](et(t,"item active")[0])||0},g in t||(this[q]&&this[j]&&(rt(t,Xe[0],L),rt(t,Xe[1],M),rt(t,"touchstart",L),rt(t,"touchend",M)),E&&rt(E,ne,b),S&&rt(S,ne,b),T&&rt(T,ne,C,!1),this[N]===!0&&rt(e,le,I,!1)),this.getActiveIndex()<0&&(d[Ce]&&ze(d[0],Oe),R[Ce]&&A(0)),this[j]&&this.cycle(),t[g]=this};pt(g,St,a);var xt=function(e,t){e=tt(e),t=t||{};var o=null,i=null,n=this,a=!1,l=e[_e]("data-parent"),s="collapse",p="collapsed",g=function(e){lt.call(e,ge,s),a=!0,ze(e,Ne),ze(e,Fe),setTimeout(function(){e[we][oe]=ct(e)+"px",at(e,function(){a=!1,e[Se](re,"true"),Je(e,Ne),e[we][oe]="",lt.call(e,ue,s)})},20)},c=function(e){lt.call(e,ce,s),a=!0,e[we][oe]=ct(e)+"px",setTimeout(function(){ze(e,Ne),e[we][oe]="0px",at(e,function(){a=!1,e[Se](re,"false"),Je(e,Ne),Je(e,Fe),e[we][oe]="",lt.call(e,ye,s)})},20)},y=function(){var t=e.href&&e[_e]("href"),o=e[_e](S),r=t||o&&gt.test(o)&&o;return r&&tt(r)};this.toggle=function(e){e.preventDefault(),a||(Qe(i,Fe)?n.hide():n.show())},this.hide=function(){c(i),ze(e,p)},this.show=function(){if(g(i),Je(e,p),null!==o){for(var t,n=et(o,s+" "+Fe),a=o[Te]("["+r+'="'+s+'"]'),l=0,u=n[Ce];l<u;l++)n[l]!==i&&c(n[l]);for(var y=0,h=a[Ce];y<h;y++)t=a[y][_e](S)||a[y].href,t.split("#")[1]!==i.id?ze(a[y],p):Je(a[y],p)}},u in e||rt(e,ne,this.toggle),i=y(),o=tt(t.parent)||l&&ot(e,l),e[u]=this};pt(u,xt,r);var Et=function(e,t){e=tt(e),this.persist=t===!0||"true"===e[_e]("data-persist")||!1;var o=this,i=!1,n=e[Me],a="dropdown",l="open",s=null,p=tt(".dropdown-menu",n),g=p[Ee]("*"),u=function(e){!i||27!=e.which&&27!=e.keyCode||(s=null,d())},y=function(t){var a=t[k],l=a&&(a[_e](r)||a[Me]&&_e in a[Me]&&a[Me][_e](r));if(a===e||a===n||a[Me]===e)t.preventDefault(),s=e,o.toggle();else if(i){if(a===p||g&&$e(g)[Le](a)>-1&&(o.persist||l))return;s=null,d()}(/\#$/.test(a.href)||a[Me]&&/\#$/.test(a[Me].href))&&t.preventDefault()},h=function(){lt.call(n,ge,a,s),ze(n,l),p[Se](re,!0),lt.call(n,ue,a,s),rt(document,le,u),i=!0},d=function(){lt.call(n,ce,a,s),Je(n,l),p[Se](re,!1),lt.call(n,ye,a,s),it(document,le,u),i=!1};this.toggle=function(){Qe(n,l)&&i?d():h()},c in e||(p[Se]("tabindex","0"),rt(document,ne,y)),e[c]=this};pt(c,Et,r);var Pt=function(r,n){r=tt(r);var a=r[_e](S)||r[_e]("href"),l=tt(a),s=Qe(r,"modal")?r:l,p="modal",g="static",u="paddingLeft",c="paddingRight",h="modal-backdrop";if(Qe(r,"modal")&&(r=null),s){n=n||{},this[N]=n[N]!==!1&&"false"!==s[_e](_),this[F]=n[F]!==g&&s[_e](v)!==g||g,this[F]=n[F]!==!1&&"false"!==s[_e](v)&&this[F],this[D]=n[D];var d,f,m,x,E=this,P=this.open=!1,T=null,R=et(t,Ve).concat(et(t,We)),L=function(){var o=t[Pe]();return e[$]||o[je]-Math.abs(o[ke])},M=function(){var t,r=o.currentStyle||e.getComputedStyle(o),i=parseInt(r[c],10);if(d&&(o[we][c]=i+m+"px",R[Ce]))for(var n=0;n<R[Ce];n++)t=e.getComputedStyle(R[n])[c],R[n][we][c]=parseInt(t)+m+"px"},C=function(){if(o[we][c]="",R[Ce])for(var e=0;e<R[Ce];e++)R[e][we][c]=""},b=function(){var e,t=document.createElement("div");return t.className=p+"-scrollbar-measure",o.appendChild(t),e=t[J]-t[H],o.removeChild(t),e},I=function(){d=o[H]<L(),f=s[te]>t[z],m=b()},A=function(){s[we][u]=!d&&f?m+"px":"",s[we][c]=d&&!f?m+"px":""},w=function(){s[we][u]="",s[we][c]=""},O=function(){var e=document.createElement("div");x=tt("."+h),null===x&&(e[Se]("class",h+" fade"),x=e,o.appendChild(x))},G=function(){x=tt("."+h),x&&null!==x&&"object"==typeof x&&(o.removeChild(x),x=null)},j=function(){Qe(s,Fe)?it(document,le,X):rt(document,le,X)},q=function(){Qe(s,Fe)?it(e,se,E.update):rt(e,se,E.update)},U=function(){Qe(s,Fe)?it(s,ne,K):rt(s,ne,K)},B=function(){P=E.open=!0,He(s),lt.call(s,ue,p,T)},V=function(){q(),U(),j(),s[we].display="",P=E.open=!1,r&&He(r),lt.call(s,ye,p),setTimeout(function(){w(),C(),Je(o,p+"-open"),G()},100)},W=function(e){var t=e[k];t=t[xe](S)||t[xe]("href")?t:t[Me],P||t!==r||Qe(s,Fe)||(s.modalTrigger=r,T=r,E.show(),e.preventDefault())},X=function(e){var t=e.which||e.keyCode;E[N]&&27==t&&P&&E.hide()},K=function(e){var t=e[k];P&&(t[Me][_e](i)===p||t[_e](i)===p||t===s&&E[F]!==g)&&(E.hide(),T=null,e.preventDefault())};this.toggle=function(){P&&Qe(s,Fe)?this.hide():this.show()},this.show=function(){lt.call(s,ge,p,T);var e=et(document,p+" in")[0];try{e&&e!==s&&e.modalTrigger[y].hide()}catch(t){e.classList.remove("in")}this[F]&&O(),x&&!Qe(x,Fe)&&setTimeout(function(){ze(x,Fe)},0),setTimeout(function(){s[we].display="block",I(),M(),A(),q(),U(),j(),ze(o,p+"-open"),ze(s,Fe),s[Se](ie,!1),Qe(s,"fade")?at(s,B):B()},Ye?150:0)},this.hide=function(){lt.call(s,ce,p),x=tt("."+h),Je(s,Fe),s[Se](ie,!0),!!x&&Je(x,Fe),setTimeout(function(){Qe(s,"fade")?at(s,V):V()},Ye?150:0)},this.setContent=function(e){tt("."+p+"-content",s).innerHTML=e},this.update=function(){P&&(I(),M(),A())},!r||y in r||rt(r,ne,W),this[D]&&this.setContent(this[D]),!!r&&(r[y]=this)}};pt(y,Pt,r);var Tt=function(t,r){t=tt(t);var i=t[_e](M),n=t[_e](C),a=t[_e](I),l=t[_e](L),s=t[_e](A),p=t[_e](b),g="popover",u="template",c="trigger",y="class",d="div",f="fade",m="data-title",v="data-content",_="dismissible",S='<button type="button" class="close">×</button>',x=ot(t,".modal"),E=ot(t,"."+Ve),P=ot(t,"."+We);r=r||{},this[u]=r[u]?r[u]:null,this[c]=r[c]?r[c]:i||ae,this[U]=r[U]&&r[U]!==f?r[U]:n||f,this[B]=r[B]?r[B]:a||qe,this[G]=parseInt(r[G]||s)||200,this[_]=!(!r[_]&&"true"!==l),this[V]=tt(r[V])?tt(r[V]):tt(p)?tt(p):E?E:P?P:x?x:o;var T=this,R=t[_e](m)||null,w=t[_e](v)||null;if(w||this[u]){var O=null,F=0,N=this[B],D=function(e){null!==O&&e[k]===tt(".close",O)&&T.hide()},j=function(){T[V].removeChild(O),F=null,O=null},q=function(){if(R=t[_e](m),w=t[_e](v),O=document.createElement(d),null!==w&&null===T[u]){if(O[Se]("role","tooltip"),null!==R){var e=document.createElement("h3");e[Se](y,g+"-title"),e.innerHTML=T[_]?R+S:R,O.appendChild(e)}var o=document.createElement(d),r=document.createElement(d);o[Se](y,"arrow"),r[Se](y,g+"-content"),O.appendChild(o),O.appendChild(r),r.innerHTML=T[_]&&null===R?w+S:w}else{var i=document.createElement(d);i.innerHTML=T[u],O.innerHTML=i.firstChild.innerHTML}T[V].appendChild(O),O[we].display="block",O[Se](y,g+" "+N+" "+T[U])},W=function(){!Qe(O,Fe)&&ze(O,Fe)},X=function(){dt(t,O,N,T[V]),yt(O)||(N=ft(N),dt(t,O,N,T[V]))},K=function(){lt.call(t,ue,g)},Y=function(){j(),lt.call(t,ye,g)};this.toggle=function(){null===O?T.show():T.hide()},this.show=function(){clearTimeout(F),F=setTimeout(function(){null===O&&(N=T[B],q(),X(),W(),lt.call(t,ge,g),T[U]?at(O,K):K())},20)},this.hide=function(){clearTimeout(F),F=setTimeout(function(){O&&null!==O&&Qe(O,Fe)&&(lt.call(t,ce,g),Je(O,Fe),T[U]?at(O,Y):Y())},T[G])},h in t||(T[c]===ae?(rt(t,Xe[0],T.show),T[_]||rt(t,Xe[1],T.hide)):/^(click|focus)$/.test(T[c])&&(rt(t,T[c],T.toggle),T[_]||rt(t,"blur",T.hide)),T[_]&&rt(document,ne,D),!Be&&rt(e,se,T.hide)),t[h]=T}};pt(h,Tt,r);var Rt=function(t,o){t=tt(t);var r=tt(t[_e](S));if(o=o||{},o[k]||r){for(var i,n=o[k]&&tt(o[k])||r,a=n&&n[Ee]("A"),l=[],s=[],p=t[Q]<t[te]?t:e,g=p===e,u=0,c=a[Ce];u<c;u++){var y=a[u][_e]("href"),h=y&&gt.test(y)&&tt(y);h&&(l.push(a[u]),s.push(h))}var f=function(e){var o=l[e][Me],r=s[e],n=ot(o,".dropdown"),a=g&&r[Pe](),p=Qe(o,Oe)||!1,u=g?a[qe]+i:r[W]-(s[e-1]?0:10),c=g?a[Ue]+i:s[e+1]?s[e+1][W]:t[te],y=i>=u&&c>i;if(!p&&y)"LI"!==o.tagName||Qe(o,Oe)||(ze(o,Oe),p=!0,n&&!Qe(n,Oe)&&ze(n,Oe),lt.call(t,"activate","scrollspy",l[e]));else if(y){if(!y&&!p||p&&y)return}else"LI"===o.tagName&&Qe(o,Oe)&&(Je(o,Oe),p=!1,n&&Qe(n,Oe)&&!et(o[Me],Oe).length&&Je(n,Oe))},m=function(){i=g?ht().y:t[Y];for(var e=0,o=l[Ce];e<o;e++)f(e)};this.refresh=function(){m()},d in t||(rt(p,pe,this.refresh),!Be&&rt(e,se,this.refresh)),this.refresh(),t[d]=this}};pt(d,Rt,n);var Lt=function(e,t){e=tt(e);var o=e[_e](E),i="tab",n="height",a="isAnimating";e[a]=!1,t=t||{},this[n]=!!Ye&&(t[n]||"true"===o);var l,s,p,g,u,c=this,y=ot(e,".nav"),h=y&&tt(".dropdown",y),d=function(){lt.call(l,ue,i,p),s?!function(){setTimeout(function(){s[we][n]="",Je(s,Ne),p[a]=l[a]=!1},200)}():p[a]=l[a]=!1},m=function(){Je(g,Oe),ze(u,Oe),setTimeout(function(){ze(u,Fe),u[Q],s&&ze(s,Ne),function(){lt.call(l,ge,i,p),function(){s&&(s[we][n]=ct(u)+"px"),lt.call(p,ye,i,l)}()}()},20)};if(y){var v=function(){var e,t=et(y,Oe);return 1!==t[Ce]||Qe(t[0],"dropdown")?t[Ce]>1&&(e=t[t[Ce]-1]):e=t[0],e[Ee]("A")[0]},_=function(){return tt(v()[_e]("href"))},S=function(e){e.preventDefault(),l=e[k][_e](r)===i||gt.test(e[k][_e]("href"))?e[k]:e[k][Me],c.show()};this.show=function(){l=l||e,u=tt(l[_e]("href")),p=v(),g=_(),p[a]&&l[a]||Qe(l[Me],Oe)||(p[a]=l[a]=!0,Je(p[Me],Oe),ze(l[Me],Oe),h&&(Qe(e[Me][Me],"dropdown-menu")?Qe(h,Oe)||ze(h,Oe):Qe(h,Oe)&&Je(h,Oe)),s&&(s[we][n]=ct(g)+"px"),function(){Je(g,Fe),lt.call(p,ce,i,l),function(){Qe(g,"fade")?at(g,m):m()}()}(),function(){Qe(u,"fade")?at(u,d):d()}())},f in e||rt(e,ne,S),this[n]&&(s=_()[Me]),e[f]=this}};pt(f,Lt,r);var Mt=function(e,t){e=tt(e);var r=e[_e](C),i=e[_e](I),n=e[_e](A),a=e[_e](b),l="tooltip",s="class",p="title",g="fade",u="div",c=ot(e,".modal"),y=ot(e,"."+Ve),h=ot(e,"."+We);t=t||{},this[U]=t[U]&&t[U]!==g?t[U]:r||g,this[B]=t[B]?t[B]:i||qe,this[G]=parseInt(t[G]||n)||200,this[V]=tt(t[V])?tt(t[V]):tt(a)?tt(a):y?y:h?h:c?c:o;var d=this,f=0,v=this[B],_=null,S=e[_e](p)||e[_e](T);if(S){var x=function(){d[V].removeChild(_),_=null,f=null},E=function(){S=e[_e](p)||e[_e](T),_=document.createElement(u),_[Se]("role",l);var t=document.createElement(u),o=document.createElement(u);t[Se](s,l+"-arrow"),o[Se](s,l+"-inner"),_.appendChild(t),_.appendChild(o),o.innerHTML=S,d[V].appendChild(_),_[Se](s,l+" "+v+" "+d[U])},P=function(){dt(e,_,v,d[V]),yt(_)||(v=ft(v),dt(e,_,v,d[V]))},R=function(){!Qe(_,Fe)&&ze(_,Fe)},L=function(){lt.call(e,ue,l)},M=function(){x(),lt.call(e,ye,l)};this.show=function(){clearTimeout(f),f=setTimeout(function(){null===_&&(v=d[B],E(),P(),R(),lt.call(e,ge,l),d[U]?at(_,L):L())},20)},this.hide=function(){clearTimeout(f),f=setTimeout(function(){_&&null!==_&&Qe(_,Fe)&&(lt.call(e,ce,l),Je(_,Fe),d[U]?at(_,M):M())},d[G])},this.toggle=function(){_?d.hide():d.show()},m in e||(e[Se](T,S),e.removeAttribute(p),rt(e,Xe[0],this.show),rt(e,Xe[1],this.hide)),e[m]=this}};return pt(m,Mt,r),{Affix:mt,Alert:vt,Button:_t,Carousel:St,Collapse:xt,Dropdown:Et,Modal:Pt,Popover:Tt,ScrollSpy:Rt,Tab:Lt,Tooltip:Mt}}),define("app",["aigle","histmap","sprintf","i18n","i18nxhr","swiper","bootstrap"],function(e,t,o,r,i,n,a){!function(){function e(e){var o=e.timeStamp,i=r||o,n=o-i,a=e.touches.length;r=o,!n||n>=300||a>1||(t(),e.preventDefault(),e.target.click())}function t(){r=0}var o=document.getElementById("map_div"),r=0;o.addEventListener("touchstart",e,!1),o.addEventListener("touchmove",t,!1)}();var l={ALL:-99,DEBUG:-1,INFO:0,WARN:1,ERROR:2,OFF:99},s=function(e){var t=this;t.level=isNaN(e)?l.INFO:e,t.make()};s.prototype.make=function(){var e=this;for(var t in console){var o=l[t.toUpperCase()];o&&(e.level<=o?Function.bind?s.prototype[t]=function(e){return console[e].bind(console)}(t):s.prototype[t]=function(e){return console[e].apply(console,arguments)}(t):s.prototype[t]=function(){})}},"ontouchstart"in window&&document.querySelector("body").classList.add("ol-touch"),Swiper.prototype.setSlideIndex=function(e){this.slideTo(e+this.params.slidesPerView),this.setSlideIndexAsSelected(e)},Swiper.prototype.setSlideIndexAsSelected=function(e){for(var t=this.container[0].querySelectorAll(".swiper-slide"),o=0;o<t.length;o++){var r=t[o];r.getAttribute("data-swiper-slide-index")==e?r.classList.add("selected"):r.classList.remove("selected")}};var p=function(){for(var e="…",t=2,o=function(t){for(var o=t.innerText.split(""),r="",i=0;i<o.length;i++)r+="<span>"+o[i]+"</span>";r+='<span class="omit-mark">'+e+"</span>",t.innerHTML=r},r=function(e){var o,r=e.querySelectorAll("span"),i=e.querySelector(".omit-mark"),n=0;if(!(t<=0)){r[0].style.display=null;for(var a=1;a<r.length;a++)r[a].style.display="none";i.style.display=null;for(var l=e.offsetHeight,s=!1,a=1;a<r.length-1;a++){if(r[a].style.display=null,e.offsetHeight>l&&(s?(l=e.offsetHeight,n++):(s=!0,e.classList.add("minimize"))),n>=t){o=a-2;break}if(a>=r.length-2)return void(i.style.display="none")}for(var a=o;a<r.length-1;a++)r[a].style.display="none"}},i=document.querySelectorAll(".swiper-slide div"),n=0;n<i.length;n++){var a=i[n];o(a),r(a)}},g=function(e){var t,o=document,r=o.createDocumentFragment(),i=[],n=0;for(t=r.appendChild(o.createElement("div")),t.innerHTML=e;n<t.childNodes.length;n++){var a=t.childNodes[n];if(a.tagName&&"script"===a.tagName.toLowerCase()){var l=document.createElement("script");a.type&&(l.type=a.type),a.src?l.src=a.src:l.text=a.text,i[n]=l}else i[n]=a}return i};return function(n){var u=n.stroly?"stroly":n.drumsey?"drumsey":n.warper?"warper":null,c=n.appid||(u?n[u]:"sample"),y=!1,h=n.no_ui||!1;n.mobile_if&&(y=!0,h=!0,n.debug=!0);var d=new s(n.debug?l.ALL:l.INFO),f=n.lang||"ja",m=n.overlay||!1,v=n.no_rotate||!1;m&&document.querySelector("body").classList.add("with-opacity"),h&&(document.querySelector(".swiper-container").style.display="none");var _=new e(u?function(e,t){var o={fake_gps:!1,default_zoom:17,sources:["gsi","osm",{mapID:c,maptype:u,algorythm:"tin"}],pois:[]};e(o)}:function(e,t){var o=new XMLHttpRequest;o.open("GET","apps/"+c+".json",!0),o.responseType="json",o.onload=function(t){e(200==this.status?this.response:this.response)},o.send()}),S=new e(function(e,t){r.use(i).init({lng:f,fallbackLng:["en"],backend:{loadPath:"locales/{{lng}}/{{ns}}.json"}},function(t,o){for(var i=document.querySelectorAll("[data-i18n]"),n=0;n<i.length;n++){var a=i[n],l=a.getAttribute("data-i18n");a.innerText=o(l)}e([o,r])})}),x=e.all([S,_]);return x.then(function(r){var i,l,s,c=r[1],f=r[0][1],_=r[0][0];if(t.source.HistMap.setI18n(f,_),document.querySelector("#all").style.display=null,!h){var S=document.getElementById("loadWait"),x=new a.Modal(S);x.show();var E=1.4;i=new Swiper(".base-swiper",{slidesPerView:E,centeredSlides:!0,spaceBetween:10,loop:!0,onClick:function(e,t){if(t.preventDefault(),e.clickedSlide){var o=e.clickedSlide;s(!1,o.getAttribute("data")),e.setSlideIndexAsSelected(o.getAttribute("data-swiper-slide-index"))}}}),l=new Swiper(".overlay-swiper",{slidesPerView:E,centeredSlides:!0,spaceBetween:10,loop:!0,onClick:function(e,t){if(t.preventDefault(),e.clickedSlide){var o=e.clickedSlide;s(!1,o.getAttribute("data")),e.setSlideIndexAsSelected(o.getAttribute("data-swiper-slide-index"))}}})}var P,T=null,R=c.home_position,L=c.default_zoom,M=c.app_name,C=!!n.fake&&c.fake_gps,b=!!n.fake&&c.fake_center,I=!!n.fake&&c.fake_radius,A=null,w=null,O="map_div",F=O+"_front",N=g('<div id="'+F+'" class="map" style="top:0; left:0; right:0; bottom:0; position:absolute;"></div>')[0],G=document.querySelector("#"+O);G.insertBefore(N,G.firstChild);var D=new t.MaplatMap({div:F,off_control:!!h,off_rotation:!!v}),k=D.sliderCommon;k.setEnable(!1);var j=null;if(m){j=O+"_back";var N=g('<div id="'+j+'" class="map" style="top:0; left:0; right:0; bottom:0; position:absolute;"></div>')[0],G=document.querySelector("#"+O);G.insertBefore(N,G.firstChild),w=new t.MaplatMap({off_control:!0,div:j})}if(!h){var q=!1;if(D.on("gps_request",function(){q=!0;var e=document.getElementById("gpsWait"),t=new a.Modal(e);t.show()}),D.on("gps_result",function(e){var t=e.frameState;if(t&&t.error){if(A=null,"gps_out"==t.error&&q){q=!1;var o=document.getElementById("gpsWait"),r=new a.Modal(o);r.hide(),document.querySelector("#gpsDialogTitle").innerText=_("app.out_of_map"),document.querySelector("#gpsDialogBody").innerText=_("app.out_of_map_desc");var i=document.getElementById("gpsDialog"),n=new a.Modal(i);n.show()}}else A=t;if(q){q=!1;var o=document.getElementById("gpsWait"),r=new a.Modal(o);r.hide()}}),C){var N=g(o(_("app.fake_explanation"),b,I))[0],G=document.querySelector("#gps_etc");G.appendChild(N)}else{var N=g(_("app.acquiring_gps_desc"))[0],G=document.querySelector("#gps_etc");G.appendChild(N)}}var U=c.pois;document.querySelector("title").innerHTML=M;for(var B=c.sources,V=[],W={home_position:R,merc_zoom:L,fake_gps:!!C&&I},X=0;X<B.length;X++){var K=B[X];V.push(t.source.HistMap.createAsync(K,W))}return e.all(V).then(function(o){function r(o,r){var i=D.getView(),n=P.size2MercsAsync(),a=t.MathEx.recursiveRound([i.getCenter(),i.getZoom(),i.getRotation()],10);if(T&&T.mercs&&T.buffer[P.sourceID]){var l=T.buffer[P.sourceID];l[0][0]==a[0][0]&&l[0][1]==a[0][1]&&l[1]==a[1]&&l[2]==a[2]?(d.debug(l),d.debug(a),d.debug("From: Use buffer"),n=new e(function(e,t){e(T.mercs)})):(T={buffer:{}},T.buffer[P.sourceID]=a)}else T={buffer:{}},T.buffer[P.sourceID]=a;d.debug("From: Center: "+a[0]+" Zoom: "+a[1]+" Rotation: "+a[2]),d.debug("From: "+P.sourceID),n.then(function(i){T.mercs=i,d.debug("Mercs: "+i);var n=o.mercs2SizeAsync(i),a=o.sourceID;T.buffer[a]&&(d.debug("To: Use buffer"),n=new e(function(e,t){e(T.buffer[a])})),n.then(function(e){d.debug("To: Center: "+e[0]+" Zoom: "+e[1]+" Rotation: "+e[2]),d.debug("To: "+o.sourceID),T.buffer[o.sourceID]=t.MathEx.recursiveRound(e,10),r(e)})})}function n(e,o){var i=S.osm,n=S[o];n==P&&n!=i||n!=P&&r(n,function(o){var l=null,s=null;w&&(l=w.getSource(),n instanceof t.source.NowMap?n instanceof t.source.NowMap&&w.exchangeSource():l?s=l:(s=i,P instanceof t.source.NowMap&&(s=P instanceof t.source.TmsMap?D.getSource():P),w.exchangeSource(s)),!(n instanceof t.source.NowMap)||n instanceof t.source.TmsMap?k.setEnable(!0):k.setEnable(!1)),n instanceof t.source.TmsMap?(D.setLayer(n),P instanceof t.source.NowMap||D.exchangeSource(l||i),k.setEnable(!0)):(D.setLayer(),D.exchangeSource(n)),P=n;var p=100*k.get("slidervalue");D.setOpacity(p);var g=D.getView();if(n.insideCheckHistMapCoords(o[0]))g.setCenter(o[0]),g.setZoom(o[1]),g.setRotation(o[2]);else if(!e){document.querySelector("#gpsDialogTitle").innerText=_("app.out_of_map"),document.querySelector("#gpsDialogBody").innerText=_("app.out_of_map_area");var u=document.getElementById("gpsDialog"),c=new a.Modal(u);c.show(),n.goHome()}n.setGPSMarker(A,!0),D.resetMarker();for(var y=0;y<U.length;y++)!function(e){var o=[e.lng,e.lat],r=t.proj.transform(o,"EPSG:4326","EPSG:3857");n.merc2XyAsync(r).then(function(t){n.insideCheckHistMapCoords(t)&&D.setMarker(t,{datum:e},e.icon)})}(U[y]);D.updateSize(),D.renderSync(),1==e?n.goHome():w&&s&&r(s,function(e){var t=w.getView();t.setCenter(e[0]),t.setZoom(e[1]),t.setRotation(e[2]),w.updateSize(),w.renderSync()})})}function g(e){if(y){d.debug(e);var t=JSON.stringify(e);jsBridge.callWeb2App("poiClick",t)}else{document.querySelector("#poi_name").innerText=e.name,e.url?(document.querySelector("#poi_web").classList.remove("hide"),document.querySelector("#poi_data").classList.add("hide"),document.querySelector("#poi_iframe").setAttribute("src",e.url)):(document.querySelector("#poi_data").classList.remove("hide"),document.querySelector("#poi_web").classList.add("hide"),e.image&&""!=e.image?document.querySelector("#poi_img").setAttribute("src",e.image.match(/^http/)?e.image:"img/"+e.image):document.querySelector("#poi_img").setAttribute("src","parts/no_image.png"),document.querySelector("#poi_address").innerText=e.address,document.querySelector("#poi_desc").innerHTML=e.desc.replace(/\n/g,"<br>"));var o=document.getElementById("poi_info"),r=new a.Modal(o);r.show()}}if(!h){var c=document.getElementById("loadWait"),f=new a.Modal(c);f.hide()}if(u){var m=o.length-1;R=o[m].home_position,L=o[m].merc_zoom,document.querySelector("title").innerHTML=o[m].title}for(var v=[],S={},x=0;x<o.length;x++){var E=o[x];h||(E instanceof t.source.NowMap&&!(E instanceof t.source.TmsMap)?i.appendSlide('<div class="swiper-slide" data="'+E.sourceID+'"><img crossorigin="anonymous" src="'+E.thumbnail+'"><div>'+E.label+"</div></div>"):l.appendSlide('<div class="swiper-slide" data="'+E.sourceID+'"><img crossorigin="anonymous" src="'+E.thumbnail+'"><div>'+E.label+"</div></div>")),u&&(E.home_position=R,E.merc_zoom=L),E._map=D,v.push(E),S[E.sourceID]=E}h||(i.on,l.on,p());var M=v[v.length-1];P=v.reduce(function(e,o){return e?e instanceof t.source.HistMap||o===M?e:o:o!==M?o:e},null),n(!0,M.sourceID),s=n;var C=function(e){d.debug(e.pixel);var t=this.forEachFeatureAtPixel(e.pixel,function(t){if(d.debug(e.pixel),t.get("datum"))return t});t&&g(t.get("datum"))};D.on("click",C);var b=function(e){var t=this.getEventPixel(e.originalEvent),o=this.hasFeatureAtPixel(t),r=this.getTarget();if(o){var i=this.forEachFeatureAtPixel(e.pixel,function(e){if(e.get("datum"))return e});return void(document.querySelector("#"+r).style.cursor=i?"pointer":"")}document.querySelector("#"+r).style.cursor=""};D.on("pointermove",b);var I=function(e){var t=e.frameState.viewState.center,o=this.getSource();if(!o.insideCheckHistMapCoords(t)){var r=o.histMapCoords2Xy(t),i=r[0]/(o.width/2)-1,n=r[1]/(o.height/2)-1,a=Math.max(Math.abs(i),Math.abs(n));r=[(i/a+1)*o.width/2,(n/a+1)*o.height/2],t=o.xy2HistMapCoords(r),this.getView().setCenter(t)}};D.on("moveend",I);var O=function(e){if(w){if(this._backMapMoving)return void d.debug("Backmap moving skipped");var t=w.getSource();if(t){this._backMapMoving=!0,d.debug("Backmap moving started");var o=this;r(t,function(e){var t=w.getView();t.setCenter(e[0]),t.setZoom(e[1]),t.setRotation(e[2]),d.debug("Backmap moving ended"),o._backMapMoving=!1})}}};if(D.on("postrender",O),k.on("propertychange",function(e){"slidervalue"===e.key&&D.setOpacity(100*k.get(e.key))}),y)return{setMarker:function(o){d.debug(o);var r=JSON.parse(o),i=r.latitude,n=r.longitude,a=r.x,l=r.y,s=D.getSource(),p=a&&l?new e(function(e){e(s.xy2HistMapCoords([a,l]))}):function(){var e=t.proj.transform([n,i],"EPSG:4326","EPSG:3857");return s.merc2XyAsync(e)}(),g=r.data;p.then(function(e){D.setMarker(e,{datum:g},g.icon)})}}})})}}),require.config({baseUrl:"js",paths:{i18nxhr:"i18nextXHRBackend.min",ol3:"ol-debug","ol-custom":"ol-custom",tps:"thinplatespline",i18n:"//cdnjs.cloudflare.com/ajax/libs/i18next/8.4.2/i18next.min",turf:"//npmcdn.com/@turf/turf@4.5.2/turf.min",swiper:"//cdnjs.cloudflare.com/ajax/libs/Swiper/3.4.2/js/swiper.min",bootstrap:"bootstrap-native",aigle:"aigle-es5.min",buffer:"buffer"},shim:{i18nxhr:{deps:["i18n"]},turf:{exports:"turf"},aigle:{exports:"Promise"},tps:{exports:"ThinPlateSpline"},buffer:{exports:"exports"}}}),function(){if("function"==typeof window.CustomEvent)return!1;var e=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o};e.prototype=window.Event.prototype,window.CustomEvent=e}(),require(["app"],function(e){var t=new CustomEvent("loadMaplat",{detail:e});document.dispatchEvent(t)}),define("config",function(){});